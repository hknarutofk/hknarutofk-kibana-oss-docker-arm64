(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],[function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(0)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(27)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(705)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(909)},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1766)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.link=link;exports.get=get;exports.close=close;exports.uiModules=void 0;var _angular=_interopRequireDefault(__webpack_require__(17));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var existingModules={};var links=[];function link(module){links.push(module);module.requires=_lodash.default.union(module.requires,_lodash.default.keys(existingModules))}function get(moduleName,requires){var module=existingModules[moduleName];if(module===void 0){module=existingModules[moduleName]=_angular.default.module(moduleName,[]);module.close=_lodash.default.partial(close,moduleName);_lodash.default.each(links,function(app){if(!~app.requires.indexOf(moduleName))app.requires.push(moduleName)})}if(requires){module.requires=_lodash.default.union(module.requires,requires)}return module}function close(moduleName){var module=existingModules[moduleName];if(!module)return;var i=links.indexOf(module);if(i>-1)links.splice(i,1);_lodash.default.each(links,function(app){_lodash.default.pull(app.requires,moduleName)});delete existingModules[moduleName]}var uiModules={link:link,get:get,close:close};exports.uiModules=uiModules},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _chrome=__webpack_require__(873);var _default=_chrome.chrome;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"__setup__",{enumerable:true,get:function get(){return _new_platform.__setup__}});Object.defineProperty(exports,"__start__",{enumerable:true,get:function get(){return _new_platform.__start__}});Object.defineProperty(exports,"npSetup",{enumerable:true,get:function get(){return _new_platform.npSetup}});Object.defineProperty(exports,"npStart",{enumerable:true,get:function get(){return _new_platform.npStart}});var _new_platform=__webpack_require__(872)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"fatalError",{enumerable:true,get:function get(){return _fatal_error.fatalError}});Object.defineProperty(exports,"addFatalErrorCallback",{enumerable:true,get:function get(){return _fatal_error.addFatalErrorCallback}});Object.defineProperty(exports,"toastNotifications",{enumerable:true,get:function get(){return _toasts.toastNotifications}});Object.defineProperty(exports,"banners",{enumerable:true,get:function get(){return _banners.banners}});Object.defineProperty(exports,"addAppRedirectMessageToUrl",{enumerable:true,get:function get(){return _app_redirect.addAppRedirectMessageToUrl}});Object.defineProperty(exports,"showAppRedirectNotification",{enumerable:true,get:function get(){return _app_redirect.showAppRedirectNotification}});var _fatal_error=__webpack_require__(521);var _toasts=__webpack_require__(523);var _banners=__webpack_require__(896);var _app_redirect=__webpack_require__(898)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(4)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.wrapInI18nContext=wrapInI18nContext;exports.I18nContext=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _angular=__webpack_require__(1131);var _modules=__webpack_require__(6);var _new_platform=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var I18nContext=_new_platform.npStart.core.i18n.Context;exports.I18nContext=I18nContext;function wrapInI18nContext(ComponentToWrap){var ContextWrapper=function ContextWrapper(props){return _react.default.createElement(I18nContext,null,_react.default.createElement(ComponentToWrap,props))};ContextWrapper.propTypes=ComponentToWrap.propTypes;return ContextWrapper}_modules.uiModules.get("i18n").provider("i18n",_angular.I18nProvider).filter("i18n",_angular.i18nFilter).directive("i18nId",_angular.i18nDirective)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(799)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(61)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(39)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2099)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2610)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(295)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSelectHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createSelectHandler=function createSelectHandler(handleChange){return function(name){return function(selectedOptions){if(_lodash.default.isFunction(handleChange)){return handleChange(_defineProperty({},name,_lodash.default.get(selectedOptions,"[0].value",null)))}}}};exports.createSelectHandler=createSelectHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _routes=__webpack_require__(858);var _default=_routes.uiRoutes;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1702)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTextHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _detect_ie=__webpack_require__(655);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createTextHandler=function createTextHandler(handleChange){return function(name,defaultValue){return function(e){if(!(0,_detect_ie.detectIE)()||e.keyCode===13)e.preventDefault();var value=_lodash.default.get(e,"target.value",defaultValue);if(_lodash.default.isFunction(handleChange)){return handleChange(_defineProperty({},name,value))}}}};exports.createTextHandler=createTextHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TimeRange",{enumerable:true,get:function get(){return _public.TimeRange}});Object.defineProperty(exports,"RefreshInterval",{enumerable:true,get:function get(){return _public.RefreshInterval}});Object.defineProperty(exports,"timefilter",{enumerable:true,get:function get(){return _timefilter.timefilter}});Object.defineProperty(exports,"Timefilter",{enumerable:true,get:function get(){return _timefilter.Timefilter}});Object.defineProperty(exports,"registerTimefilterWithGlobalState",{enumerable:true,get:function get(){return _timefilter.registerTimefilterWithGlobalState}});Object.defineProperty(exports,"timeHistory",{enumerable:true,get:function get(){return _time_history.timeHistory}});Object.defineProperty(exports,"TimeHistory",{enumerable:true,get:function get(){return _time_history.TimeHistory}});Object.defineProperty(exports,"getTime",{enumerable:true,get:function get(){return _get_time.getTime}});var _public=__webpack_require__(960);var _timefilter=__webpack_require__(967);var _time_history=__webpack_require__(538);var _get_time=__webpack_require__(398)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricAggType=MetricAggType;var _lodash=_interopRequireDefault(__webpack_require__(1));var _agg_type=__webpack_require__(582);var _field_formats=__webpack_require__(32);var _legacy_class=__webpack_require__(29);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(MetricAggType).inherits(_agg_type.AggType);function MetricAggType(config){MetricAggType.Super.call(this,config);_lodash.default.forOwn(config,function(val,key){if(_lodash.default.has(MetricAggType.prototype,key)){this[key]=val}},this)}MetricAggType.prototype.subtype=_i18n.i18n.translate("common.ui.aggTypes.metrics.metricAggregationsSubtypeTitle",{defaultMessage:"Metric Aggregations"});MetricAggType.prototype.getValue=function(agg,bucket){var isSettableToZero=["cardinality","sum"].indexOf(agg.__type.name)!==-1;if(!bucket[agg.id]&&isSettableToZero)return 0;return bucket[agg.id]&&bucket[agg.id].value};MetricAggType.prototype.getFormat=function(agg){var field=agg.getField();return field?field.format:_field_formats.fieldFormats.getDefaultInstance("number")};MetricAggType.prototype.isScalable=function(){return false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,ExpressionRenderer:true,ExpressionRendererProps:true,ExpressionRunner:true,FilterBar:true,ApplyFiltersPopover:true,Field:true,FieldType:true,IndexPattern:true,IndexPatterns:true,StaticIndexPattern:true,CONTAINS_SPACES:true,getFromSavedObject:true,getRoutes:true,isFilterable:true,IndexPatternSelect:true,IndexPatternsProvider:true,validateIndexPattern:true,ILLEGAL_CHARACTERS:true,INDEX_PATTERN_ILLEGAL_CHARACTERS:true,INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE:true,IndexPatternAlreadyExists:true,IndexPatternMissingIndices:true,NoDefaultIndexPattern:true,NoDefinedIndexPatterns:true,mockFields:true,mockIndexPattern:true,Query:true,QueryBar:true,QueryBarInput:true,SearchBar:true,SearchBarProps:true,SavedQueryAttributes:true,SavedQuery:true,FilterManager:true,FilterStateManager:true,uniqFilters:true,onlyDisabledFiltersChanged:true};exports.plugin=plugin;Object.defineProperty(exports,"ExpressionRenderer",{enumerable:true,get:function get(){return _expressions.ExpressionRenderer}});Object.defineProperty(exports,"ExpressionRendererProps",{enumerable:true,get:function get(){return _expressions.ExpressionRendererProps}});Object.defineProperty(exports,"ExpressionRunner",{enumerable:true,get:function get(){return _expressions.ExpressionRunner}});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _filter.FilterBar}});Object.defineProperty(exports,"ApplyFiltersPopover",{enumerable:true,get:function get(){return _filter.ApplyFiltersPopover}});Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _index_patterns.Field}});Object.defineProperty(exports,"FieldType",{enumerable:true,get:function get(){return _index_patterns.FieldType}});Object.defineProperty(exports,"IndexPattern",{enumerable:true,get:function get(){return _index_patterns.IndexPattern}});Object.defineProperty(exports,"IndexPatterns",{enumerable:true,get:function get(){return _index_patterns.IndexPatterns}});Object.defineProperty(exports,"StaticIndexPattern",{enumerable:true,get:function get(){return _index_patterns.StaticIndexPattern}});Object.defineProperty(exports,"CONTAINS_SPACES",{enumerable:true,get:function get(){return _index_patterns.CONTAINS_SPACES}});Object.defineProperty(exports,"getFromSavedObject",{enumerable:true,get:function get(){return _index_patterns.getFromSavedObject}});Object.defineProperty(exports,"getRoutes",{enumerable:true,get:function get(){return _index_patterns.getRoutes}});Object.defineProperty(exports,"isFilterable",{enumerable:true,get:function get(){return _index_patterns.isFilterable}});Object.defineProperty(exports,"IndexPatternSelect",{enumerable:true,get:function get(){return _index_patterns.IndexPatternSelect}});Object.defineProperty(exports,"IndexPatternsProvider",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsProvider}});Object.defineProperty(exports,"validateIndexPattern",{enumerable:true,get:function get(){return _index_patterns.validateIndexPattern}});Object.defineProperty(exports,"ILLEGAL_CHARACTERS",{enumerable:true,get:function get(){return _index_patterns.ILLEGAL_CHARACTERS}});Object.defineProperty(exports,"INDEX_PATTERN_ILLEGAL_CHARACTERS",{enumerable:true,get:function get(){return _index_patterns.INDEX_PATTERN_ILLEGAL_CHARACTERS}});Object.defineProperty(exports,"INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE",{enumerable:true,get:function get(){return _index_patterns.INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE}});Object.defineProperty(exports,"IndexPatternAlreadyExists",{enumerable:true,get:function get(){return _index_patterns.IndexPatternAlreadyExists}});Object.defineProperty(exports,"IndexPatternMissingIndices",{enumerable:true,get:function get(){return _index_patterns.IndexPatternMissingIndices}});Object.defineProperty(exports,"NoDefaultIndexPattern",{enumerable:true,get:function get(){return _index_patterns.NoDefaultIndexPattern}});Object.defineProperty(exports,"NoDefinedIndexPatterns",{enumerable:true,get:function get(){return _index_patterns.NoDefinedIndexPatterns}});Object.defineProperty(exports,"mockFields",{enumerable:true,get:function get(){return _index_patterns.mockFields}});Object.defineProperty(exports,"mockIndexPattern",{enumerable:true,get:function get(){return _index_patterns.mockIndexPattern}});Object.defineProperty(exports,"Query",{enumerable:true,get:function get(){return _query.Query}});Object.defineProperty(exports,"QueryBar",{enumerable:true,get:function get(){return _query.QueryBar}});Object.defineProperty(exports,"QueryBarInput",{enumerable:true,get:function get(){return _query.QueryBarInput}});Object.defineProperty(exports,"SearchBar",{enumerable:true,get:function get(){return _search.SearchBar}});Object.defineProperty(exports,"SearchBarProps",{enumerable:true,get:function get(){return _search.SearchBarProps}});Object.defineProperty(exports,"SavedQueryAttributes",{enumerable:true,get:function get(){return _search.SavedQueryAttributes}});Object.defineProperty(exports,"SavedQuery",{enumerable:true,get:function get(){return _search.SavedQuery}});Object.defineProperty(exports,"FilterManager",{enumerable:true,get:function get(){return _filter_manager.FilterManager}});Object.defineProperty(exports,"FilterStateManager",{enumerable:true,get:function get(){return _filter_manager.FilterStateManager}});Object.defineProperty(exports,"uniqFilters",{enumerable:true,get:function get(){return _filter_manager.uniqFilters}});Object.defineProperty(exports,"onlyDisabledFiltersChanged",{enumerable:true,get:function get(){return _filter_manager.onlyDisabledFiltersChanged}});var _plugin=__webpack_require__(972);var _expressions=__webpack_require__(540);var _filter=__webpack_require__(405);var _index_patterns=__webpack_require__(343);var _query=__webpack_require__(546);var _search=__webpack_require__(543);var _common=__webpack_require__(573);Object.keys(_common).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _common[key]}})});var _filter_manager=__webpack_require__(561);function plugin(){return new _plugin.DataPlugin}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoResults=exports.StackedBarChartConfig=exports.InvalidLogScaleValues=exports.PieContainsAllZeros=exports.InvalidWiggleSelection=exports.ContainerTooSmall=exports.VislibError=exports.InvalidJSONProperty=exports.PersistedStateError=exports.SavedObjectNotFound=exports.DuplicateField=exports.FieldNotFoundInCache=exports.CacheWriteFailure=exports.RestrictedMapping=exports.MappingConflict=exports.VersionConflict=exports.FetchFailure=exports.RequestFailure=exports.KbnError=void 0;var _angular=_interopRequireDefault(__webpack_require__(17));var _legacy_class=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var canStack=function(){var err=new Error;return!!err.stack}();var KbnError=function(){function KbnError(msg,constructor){_classCallCheck(this,KbnError);this.message=msg;if(Error.captureStackTrace){Error.captureStackTrace(this,constructor||KbnError)}else if(canStack){this.stack=(new Error).stack}else{this.stack=""}}_createClass(KbnError,[{key:"displayToScreen",value:function displayToScreen(){throw this}}]);return KbnError}();exports.KbnError=KbnError;try{(0,_legacy_class.createLegacyClass)(KbnError).inherits(Error)}catch(e){}var RequestFailure=function(_KbnError){_inherits(RequestFailure,_KbnError);function RequestFailure(err,resp){var _this;_classCallCheck(this,RequestFailure);err=err||false;_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestFailure).call(this,"Request to Elasticsearch failed: ".concat(_angular.default.toJson(resp||err.message)),RequestFailure));_this.origError=err;_this.resp=resp;return _this}return RequestFailure}(KbnError);exports.RequestFailure=RequestFailure;var FetchFailure=function(_KbnError2){_inherits(FetchFailure,_KbnError2);function FetchFailure(resp){var _this2;_classCallCheck(this,FetchFailure);_this2=_possibleConstructorReturn(this,_getPrototypeOf(FetchFailure).call(this,"Failed to get the doc: ".concat(_angular.default.toJson(resp)),FetchFailure));_this2.resp=resp;return _this2}return FetchFailure}(KbnError);exports.FetchFailure=FetchFailure;var VersionConflict=function(_KbnError3){_inherits(VersionConflict,_KbnError3);function VersionConflict(resp){var _this3;_classCallCheck(this,VersionConflict);_this3=_possibleConstructorReturn(this,_getPrototypeOf(VersionConflict).call(this,"Failed to store document changes do to a version conflict.",VersionConflict));_this3.resp=resp;return _this3}return VersionConflict}(KbnError);exports.VersionConflict=VersionConflict;var MappingConflict=function(_KbnError4){_inherits(MappingConflict,_KbnError4);function MappingConflict(field){_classCallCheck(this,MappingConflict);return _possibleConstructorReturn(this,_getPrototypeOf(MappingConflict).call(this,'Field "'.concat(field,'" is defined with at least two different types in indices matching the pattern'),MappingConflict))}return MappingConflict}(KbnError);exports.MappingConflict=MappingConflict;var RestrictedMapping=function(_KbnError5){_inherits(RestrictedMapping,_KbnError5);function RestrictedMapping(field,index){_classCallCheck(this,RestrictedMapping);var msg='"'.concat(field,'" is a restricted field name');if(index)msg+=", found it while attempting to fetch mapping for index pattern: ".concat(index);return _possibleConstructorReturn(this,_getPrototypeOf(RestrictedMapping).call(this,msg,RestrictedMapping))}return RestrictedMapping}(KbnError);exports.RestrictedMapping=RestrictedMapping;var CacheWriteFailure=function(_KbnError6){_inherits(CacheWriteFailure,_KbnError6);function CacheWriteFailure(){_classCallCheck(this,CacheWriteFailure);return _possibleConstructorReturn(this,_getPrototypeOf(CacheWriteFailure).call(this,"A Elasticsearch cache write has failed.",CacheWriteFailure))}return CacheWriteFailure}(KbnError);exports.CacheWriteFailure=CacheWriteFailure;var FieldNotFoundInCache=function(_KbnError7){_inherits(FieldNotFoundInCache,_KbnError7);function FieldNotFoundInCache(name){_classCallCheck(this,FieldNotFoundInCache);return _possibleConstructorReturn(this,_getPrototypeOf(FieldNotFoundInCache).call(this,'The "'.concat(name,'" field was not found in the cached mappings'),FieldNotFoundInCache))}return FieldNotFoundInCache}(KbnError);exports.FieldNotFoundInCache=FieldNotFoundInCache;var DuplicateField=function(_KbnError8){_inherits(DuplicateField,_KbnError8);function DuplicateField(name){_classCallCheck(this,DuplicateField);return _possibleConstructorReturn(this,_getPrototypeOf(DuplicateField).call(this,'The field "'.concat(name,'" already exists in this mapping'),DuplicateField))}return DuplicateField}(KbnError);exports.DuplicateField=DuplicateField;var SavedObjectNotFound=function(_KbnError9){_inherits(SavedObjectNotFound,_KbnError9);function SavedObjectNotFound(type,id,link){var _this4;_classCallCheck(this,SavedObjectNotFound);var idMsg=id?" (id: ".concat(id,")"):"";var message="Could not locate that ".concat(type).concat(idMsg);if(link){message+=", [click here to re-create it](".concat(link,")")}_this4=_possibleConstructorReturn(this,_getPrototypeOf(SavedObjectNotFound).call(this,message,SavedObjectNotFound));_this4.savedObjectType=type;_this4.savedObjectId=id;return _this4}return SavedObjectNotFound}(KbnError);exports.SavedObjectNotFound=SavedObjectNotFound;var PersistedStateError=function(_KbnError10){_inherits(PersistedStateError,_KbnError10);function PersistedStateError(){_classCallCheck(this,PersistedStateError);return _possibleConstructorReturn(this,_getPrototypeOf(PersistedStateError).call(this,"Error with the persisted state",PersistedStateError))}return PersistedStateError}(KbnError);exports.PersistedStateError=PersistedStateError;var InvalidJSONProperty=function(_KbnError11){_inherits(InvalidJSONProperty,_KbnError11);function InvalidJSONProperty(message){_classCallCheck(this,InvalidJSONProperty);return _possibleConstructorReturn(this,_getPrototypeOf(InvalidJSONProperty).call(this,message))}return InvalidJSONProperty}(KbnError);exports.InvalidJSONProperty=InvalidJSONProperty;var VislibError=function(_KbnError12){_inherits(VislibError,_KbnError12);function VislibError(message){_classCallCheck(this,VislibError);return _possibleConstructorReturn(this,_getPrototypeOf(VislibError).call(this,message))}_createClass(VislibError,[{key:"displayToScreen",value:function displayToScreen(handler){handler.error(this.message)}}]);return VislibError}(KbnError);exports.VislibError=VislibError;var ContainerTooSmall=function(_VislibError){_inherits(ContainerTooSmall,_VislibError);function ContainerTooSmall(){_classCallCheck(this,ContainerTooSmall);return _possibleConstructorReturn(this,_getPrototypeOf(ContainerTooSmall).call(this,"This container is too small to render the visualization"))}return ContainerTooSmall}(VislibError);exports.ContainerTooSmall=ContainerTooSmall;var InvalidWiggleSelection=function(_VislibError2){_inherits(InvalidWiggleSelection,_VislibError2);function InvalidWiggleSelection(){_classCallCheck(this,InvalidWiggleSelection);return _possibleConstructorReturn(this,_getPrototypeOf(InvalidWiggleSelection).call(this,"In wiggle mode the area chart requires ordered values on the x-axis. Try using a Histogram or Date Histogram aggregation."))}return InvalidWiggleSelection}(VislibError);exports.InvalidWiggleSelection=InvalidWiggleSelection;var PieContainsAllZeros=function(_VislibError3){_inherits(PieContainsAllZeros,_VislibError3);function PieContainsAllZeros(){_classCallCheck(this,PieContainsAllZeros);return _possibleConstructorReturn(this,_getPrototypeOf(PieContainsAllZeros).call(this,"No results displayed because all values equal 0."))}return PieContainsAllZeros}(VislibError);exports.PieContainsAllZeros=PieContainsAllZeros;var InvalidLogScaleValues=function(_VislibError4){_inherits(InvalidLogScaleValues,_VislibError4);function InvalidLogScaleValues(){_classCallCheck(this,InvalidLogScaleValues);return _possibleConstructorReturn(this,_getPrototypeOf(InvalidLogScaleValues).call(this,"Values less than 1 cannot be displayed on a log scale"))}return InvalidLogScaleValues}(VislibError);exports.InvalidLogScaleValues=InvalidLogScaleValues;var StackedBarChartConfig=function(_VislibError5){_inherits(StackedBarChartConfig,_VislibError5);function StackedBarChartConfig(message){_classCallCheck(this,StackedBarChartConfig);return _possibleConstructorReturn(this,_getPrototypeOf(StackedBarChartConfig).call(this,message))}return StackedBarChartConfig}(VislibError);exports.StackedBarChartConfig=StackedBarChartConfig;var NoResults=function(_VislibError6){_inherits(NoResults,_VislibError6);function NoResults(){_classCallCheck(this,NoResults);return _possibleConstructorReturn(this,_getPrototypeOf(NoResults).call(this,"No results found"))}return NoResults}(VislibError);exports.NoResults=NoResults},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2641)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggRow=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _add_delete_buttons=__webpack_require__(42);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _series_drag_handler=__webpack_require__(86);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AggRowUi(props){var iconType="eyeClosed";var iconColor="subdued";var lastSibling=(0,_lodash.last)(props.siblings);var intl=props.intl;if(lastSibling.id===props.model.id){iconType="eye";iconColor="text"}return _react.default.createElement("div",{className:"tvbAggRow"},_react.default.createElement(_eui.EuiFlexGroup,{"data-test-subj":"aggRow",gutterSize:"s",alignItems:"flexStart",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{className:"tvbAggRow__visibilityIcon",type:iconType,color:iconColor})),_react.default.createElement(_eui.EuiFlexItem,{className:"tvbAggRow__children"},props.children),_react.default.createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{testSubj:"addMetric",addTooltip:intl.formatMessage({id:"tsvb.aggRow.addMetricButtonTooltip",defaultMessage:"Add Metric"}),deleteTooltip:intl.formatMessage({id:"tsvb.aggRow.deleteMetricButtonTooltip",defaultMessage:"Delete Metric"}),onAdd:props.onAdd,onDelete:props.onDelete,disableDelete:props.disableDelete}))))}AggRowUi.propTypes={disableDelete:_propTypes.default.bool,model:_propTypes.default.object,onAdd:_propTypes.default.func,onDelete:_propTypes.default.func,siblings:_propTypes.default.array,dragHandleProps:_propTypes.default.object};var AggRow=(0,_react2.injectI18n)(AggRowUi);exports.AggRow=AggRow},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createLegacyClass=createLegacyClass;function describeConst(val){return{writable:false,enumerable:false,configurable:false,value:val}}var props={inherits:describeConst(function(SuperClass){var prototype=Object.create(SuperClass.prototype,{constructor:describeConst(this),superConstructor:describeConst(SuperClass)});Object.defineProperties(this,{prototype:describeConst(prototype),Super:describeConst(SuperClass)});return this})};function createLegacyClass(ClassConstructor){return Object.defineProperties(ClassConstructor,props)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Vis",{enumerable:true,get:function get(){return _types.Vis}});Object.defineProperty(exports,"visFactory",{enumerable:true,get:function get(){return _types.visFactory}});Object.defineProperty(exports,"DefaultEditorSize",{enumerable:true,get:function get(){return _types.DefaultEditorSize}});Object.defineProperty(exports,"VisParams",{enumerable:true,get:function get(){return _types.VisParams}});Object.defineProperty(exports,"VisProvider",{enumerable:true,get:function get(){return _types.VisProvider}});Object.defineProperty(exports,"VisState",{enumerable:true,get:function get(){return _types.VisState}});Object.defineProperty(exports,"VisTypeAlias",{enumerable:true,get:function get(){return _types.VisTypeAlias}});Object.defineProperty(exports,"VisTypesRegistry",{enumerable:true,get:function get(){return _types.VisTypesRegistry}});Object.defineProperty(exports,"Status",{enumerable:true,get:function get(){return _types.Status}});exports.visualizations=void 0;var _filters=__webpack_require__(955);var _types=__webpack_require__(1045);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualizationsPlugin=function(){function VisualizationsPlugin(){_classCallCheck(this,VisualizationsPlugin);_defineProperty(this,"filters",void 0);_defineProperty(this,"types",void 0);this.filters=new _filters.FiltersService;this.types=new _types.TypesService}_createClass(VisualizationsPlugin,[{key:"setup",value:function setup(){return{filters:this.filters.setup(),types:this.types.setup()}}},{key:"stop",value:function stop(){this.filters.stop();this.types.stop()}}]);return VisualizationsPlugin}();var visualizations=(new VisualizationsPlugin).setup();exports.visualizations=visualizations},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(329)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fieldFormats=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _chrome=_interopRequireDefault(__webpack_require__(7));var _field_format=__webpack_require__(344);var _indexed_array=__webpack_require__(59);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldFormatRegistry=function(_IndexedArray){_inherits(FieldFormatRegistry,_IndexedArray);function FieldFormatRegistry(){var _this;_classCallCheck(this,FieldFormatRegistry);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldFormatRegistry).call(this,{group:["fieldType"],index:["id","name"]}));_defineProperty(_assertThisInitialized(_this),"getDefaultConfig",function(fieldType,esTypes){var type=_this.getDefaultTypeName(fieldType,esTypes);return _this._defaultMap[type]||_this._defaultMap._default_});_defineProperty(_assertThisInitialized(_this),"getType",function(formatId){return _this.byId[formatId]});_defineProperty(_assertThisInitialized(_this),"getDefaultType",function(fieldType,esTypes){var config=_this.getDefaultConfig(fieldType,esTypes);return _this.byId[config.id]});_defineProperty(_assertThisInitialized(_this),"getTypeNameByEsTypes",function(esTypes){if(!Array.isArray(esTypes)){return}return esTypes.find(function(type){return _this._defaultMap[type]&&_this._defaultMap[type].es})});_defineProperty(_assertThisInitialized(_this),"getDefaultTypeName",function(fieldType,esTypes){return _this.getTypeNameByEsTypes(esTypes)||fieldType});_defineProperty(_assertThisInitialized(_this),"getInstance",_lodash.default.memoize(function(formatId){var FieldFormat=this.byId[formatId];if(!FieldFormat){throw new Error("Field Format '".concat(formatId,"' not found!"))}return new FieldFormat(null,this.getConfig)}));_defineProperty(_assertThisInitialized(_this),"getDefaultInstance",_lodash.default.memoize(_this.getDefaultInstancePlain,_this.getDefaultInstanceCacheResolver));_defineProperty(_assertThisInitialized(_this),"name","fieldFormats");_defineProperty(_assertThisInitialized(_this),"displayName","[registry "+_this.name+"]");_defineProperty(_assertThisInitialized(_this),"register",function(module){_this.push(module(_field_format.FieldFormat));return _assertThisInitialized(_this)});_this._uiSettings=_chrome.default.getUiSettingsClient();_this.getConfig=function(){var _this$_uiSettings;return(_this$_uiSettings=_this._uiSettings).get.apply(_this$_uiSettings,arguments)};_this._defaultMap=[];_this._providers=[];_this.init();return _this}_createClass(FieldFormatRegistry,[{key:"init",value:function init(){var _this2=this;this.parseDefaultTypeMap(this._uiSettings.get("format:defaultTypeMap"));this._uiSettings.getUpdate$().subscribe(function(_ref){var key=_ref.key,newValue=_ref.newValue;if(key==="format:defaultTypeMap"){_this2.parseDefaultTypeMap(newValue)}})}},{key:"getDefaultInstancePlain",value:function getDefaultInstancePlain(fieldType,esTypes){var conf=this.getDefaultConfig(fieldType,esTypes);var FieldFormat=this.byId[conf.id];return new FieldFormat(conf.params,this.getConfig)}},{key:"getDefaultInstanceCacheResolver",value:function getDefaultInstanceCacheResolver(fieldType,esTypes){return Array.isArray(esTypes)&&esTypes.indexOf(fieldType)===-1?[fieldType].concat(_toConsumableArray(esTypes)).join("-"):fieldType}},{key:"parseDefaultTypeMap",value:function parseDefaultTypeMap(value){this._defaultMap=value;_lodash.default.forOwn(this,function(fn){if(_lodash.default.isFunction(fn)&&fn.cache){fn.cache=new _lodash.default.memoize.Cache}})}}]);return FieldFormatRegistry}(_indexed_array.IndexedArray);var fieldFormats=new FieldFormatRegistry;exports.fieldFormats=fieldFormats},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Schemas=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _indexed_array=__webpack_require__(59);var _agg_params=__webpack_require__(409);var _rows_or_columns=__webpack_require__(1090);var _radius_ratio_option=__webpack_require__(1091);var _agg_groups=__webpack_require__(61);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Schemas=function Schemas(schemas){var _this=this;_classCallCheck(this,Schemas);(0,_lodash.default)(schemas||[]).map(function(schema){if(!schema.name)throw new Error("all schema must have a unique name");if(schema.name==="split"){schema.params=[{name:"row",default:true}];schema.editorComponent=_rows_or_columns.RowsOrColumnsControl}else if(schema.name==="radius"){schema.editorComponent=_radius_ratio_option.RadiusRatioOptionControl}_lodash.default.defaults(schema,{min:0,max:Infinity,group:_agg_groups.AggGroupNames.Buckets,title:schema.name,aggFilter:"*",editor:false,params:[]});schema.params=new _agg_params.AggParams(schema.params);return schema}).tap(function(schemas){_this.all=new _indexed_array.IndexedArray({index:["name"],group:["group"],immutable:true,initialSet:schemas})}).groupBy("group").forOwn(function(group,groupName){_this[groupName]=new _indexed_array.IndexedArray({index:["name"],immutable:true,initialSet:group})}).commit()};exports.Schemas=Schemas},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggSelect=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);var _check_ui_restrictions=__webpack_require__(107);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var metricAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.averageLabel",{defaultMessage:"Average"}),value:"avg"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.cardinalityLabel",{defaultMessage:"Cardinality"}),value:"cardinality"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.countLabel",{defaultMessage:"Count"}),value:"count"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.filterRatioLabel",{defaultMessage:"Filter Ratio"}),value:"filter_ratio"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.maxLabel",{defaultMessage:"Max"}),value:"max"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.minLabel",{defaultMessage:"Min"}),value:"min"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.percentileLabel",{defaultMessage:"Percentile"}),value:"percentile"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.percentileRankLabel",{defaultMessage:"Percentile Rank"}),value:"percentile_rank"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.staticValueLabel",{defaultMessage:"Static Value"}),value:"static"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.stdDeviationLabel",{defaultMessage:"Std. Deviation"}),value:"std_deviation"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.sumLabel",{defaultMessage:"Sum"}),value:"sum"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.sumOfSquaresLabel",{defaultMessage:"Sum of Squares"}),value:"sum_of_squares"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.topHitLabel",{defaultMessage:"Top Hit"}),value:"top_hit"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.valueCountLabel",{defaultMessage:"Value Count"}),value:"value_count"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.varianceLabel",{defaultMessage:"Variance"}),value:"variance"}];var pipelineAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.bucketScriptLabel",{defaultMessage:"Bucket Script"}),value:"calculation"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.cumulativeSumLabel",{defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.derivativeLabel",{defaultMessage:"Derivative"}),value:"derivative"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.movingAverageLabel",{defaultMessage:"Moving Average"}),value:"moving_average"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.positiveOnlyLabel",{defaultMessage:"Positive Only"}),value:"positive_only"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.serialDifferenceLabel",{defaultMessage:"Serial Difference"}),value:"serial_diff"}];var siblingAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallAverageLabel",{defaultMessage:"Overall Average"}),value:"avg_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallMaxLabel",{defaultMessage:"Overall Max"}),value:"max_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallMinLabel",{defaultMessage:"Overall Min"}),value:"min_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallStdDeviationLabel",{defaultMessage:"Overall Std. Deviation"}),value:"std_deviation_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallSumLabel",{defaultMessage:"Overall Sum"}),value:"sum_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallSumOfSquaresLabel",{defaultMessage:"Overall Sum of Squares"}),value:"sum_of_squares_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallVarianceLabel",{defaultMessage:"Overall Variance"}),value:"variance_bucket"}];var specialAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.specialAggs.seriesAggLabel",{defaultMessage:"Series Agg"}),value:"series_agg"},{label:_i18n.i18n.translate("tsvb.aggSelect.specialAggs.mathLabel",{defaultMessage:"Math"}),value:"math"}];var allAggOptions=[].concat(metricAggs,pipelineAggs,siblingAggs,specialAggs);function filterByPanelType(panelType){return function(agg){if(panelType==="table")return agg.value!=="series_agg";return true}}function AggSelectUi(props){var siblings=props.siblings,panelType=props.panelType,value=props.value,onChange=props.onChange,intl=props.intl,uiRestrictions=props.uiRestrictions,rest=_objectWithoutProperties(props,["siblings","panelType","value","onChange","intl","uiRestrictions"]);var selectedOptions=allAggOptions.filter(function(option){return value===option.value&&(0,_check_ui_restrictions.isMetricEnabled)(option.value,uiRestrictions)});var enablePipelines=siblings.some(function(s){return!!metricAggs.find(function(m){return m.value===s.type})});if(siblings.length<=1)enablePipelines=false;var options;if(panelType==="metrics"){options=metricAggs}else{var disableSiblingAggs=function disableSiblingAggs(agg){return _objectSpread({},agg,{disabled:!enablePipelines||!(0,_check_ui_restrictions.isMetricEnabled)(agg.value,uiRestrictions)})};options=[{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.metricAggLabel",defaultMessage:"Metric Aggregations"}),options:metricAggs.map(function(agg){return _objectSpread({},agg,{disabled:!(0,_check_ui_restrictions.isMetricEnabled)(agg.value,uiRestrictions)})})},{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.parentPipelineAggLabel",defaultMessage:"Parent Pipeline Aggregations"}),options:pipelineAggs.filter(filterByPanelType(panelType)).map(disableSiblingAggs)},{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.siblingPipelineAggLabel",defaultMessage:"Sibling Pipeline Aggregations"}),options:siblingAggs.map(disableSiblingAggs)},{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.specialAggLabel",defaultMessage:"Special Aggregations"}),options:specialAggs.map(disableSiblingAggs)}]}var handleChange=function handleChange(selectedOptions){if(!selectedOptions||selectedOptions.length<=0)return;onChange(selectedOptions)};return _react.default.createElement("div",{"data-test-subj":"aggSelector"},_react.default.createElement(_eui.EuiComboBox,_extends({isClearable:false,placeholder:intl.formatMessage({id:"tsvb.aggSelect.selectAggPlaceholder",defaultMessage:"Select aggregation"}),options:options,selectedOptions:selectedOptions,onChange:handleChange,singleSelection:{asPlainText:true}},rest)))}AggSelectUi.propTypes={onChange:_propTypes.default.func,panelType:_propTypes.default.string,siblings:_propTypes.default.array,value:_propTypes.default.string,uiRestrictions:_propTypes.default.object};var AggSelect=(0,_react2.injectI18n)(AggSelectUi);exports.AggSelect=AggSelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createChangeHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createChangeHandler=function createChangeHandler(handleChange,model){return function(part){var doc=_lodash.default.assign({},model,part);handleChange(doc)}};exports.createChangeHandler=createChangeHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedObjectRegistryProvider",{enumerable:true,get:function get(){return _saved_object_registry.SavedObjectRegistryProvider}});Object.defineProperty(exports,"SavedObjectsClientProvider",{enumerable:true,get:function get(){return _saved_objects_client_provider.SavedObjectsClientProvider}});Object.defineProperty(exports,"SavedObjectLoader",{enumerable:true,get:function get(){return _saved_object_loader.SavedObjectLoader}});Object.defineProperty(exports,"findObjectByTitle",{enumerable:true,get:function get(){return _find_object_by_title.findObjectByTitle}});var _saved_object_registry=__webpack_require__(69);var _saved_objects_client_provider=__webpack_require__(556);var _saved_object_loader=__webpack_require__(1010);var _find_object_by_title=__webpack_require__(558)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UICapabilities",{enumerable:true,get:function get(){return _public.Capabilities}});exports.capabilities=void 0;var _new_platform=__webpack_require__(8);var _public=__webpack_require__(79);var capabilities={get:function get(){return _new_platform.npStart.core.application.capabilities}};exports.capabilities=capabilities},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(164)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"addInterceptor",{enumerable:true,get:function get(){return _kfetch.addInterceptor}});Object.defineProperty(exports,"KFetchOptions",{enumerable:true,get:function get(){return _kfetch.KFetchOptions}});Object.defineProperty(exports,"KFetchQuery",{enumerable:true,get:function get(){return _kfetch.KFetchQuery}});exports.kfetch=void 0;var _new_platform=__webpack_require__(8);var _kfetch=__webpack_require__(994);var kfetchInstance=(0,_kfetch.createKfetch)(_new_platform.npSetup.core.http);var kfetch=function kfetch(options,kfetchOptions){return kfetchInstance(options,kfetchOptions)};exports.kfetch=kfetch},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,Plugin:true,ADD_PANEL_ACTION_ID:true,APPLY_FILTER_ACTION:true,APPLY_FILTER_TRIGGER:true,PANEL_BADGE_TRIGGER:true,Action:true,ActionContext:true,Adapters:true,AddPanelAction:true,ApplyFilterAction:true,CONTEXT_MENU_TRIGGER:true,Container:true,ContainerInput:true,ContainerOutput:true,EDIT_PANEL_ACTION_ID:true,EditPanelAction:true,Embeddable:true,EmbeddableChildPanel:true,EmbeddableChildPanelUiProps:true,EmbeddableFactory:true,EmbeddableFactoryNotFoundError:true,EmbeddableInput:true,EmbeddableInstanceConfiguration:true,EmbeddableOutput:true,EmbeddablePanel:true,ErrorEmbeddable:true,ExecuteTriggerActions:true,GetActionsCompatibleWithTrigger:true,GetEmbeddableFactories:true,GetEmbeddableFactory:true,IContainer:true,IEmbeddable:true,IncompatibleActionError:true,OutputSpec:true,PanelNotFoundError:true,PanelState:true,PropertySpec:true,SavedObjectMetaData:true,Trigger:true,TriggerContext:true,ViewMode:true,isErrorEmbeddable:true,openAddPanelFlyout:true};exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.EmbeddablePublicPlugin}});Object.defineProperty(exports,"ADD_PANEL_ACTION_ID",{enumerable:true,get:function get(){return _lib.ADD_PANEL_ACTION_ID}});Object.defineProperty(exports,"APPLY_FILTER_ACTION",{enumerable:true,get:function get(){return _lib.APPLY_FILTER_ACTION}});Object.defineProperty(exports,"APPLY_FILTER_TRIGGER",{enumerable:true,get:function get(){return _lib.APPLY_FILTER_TRIGGER}});Object.defineProperty(exports,"PANEL_BADGE_TRIGGER",{enumerable:true,get:function get(){return _lib.PANEL_BADGE_TRIGGER}});Object.defineProperty(exports,"Action",{enumerable:true,get:function get(){return _lib.Action}});Object.defineProperty(exports,"ActionContext",{enumerable:true,get:function get(){return _lib.ActionContext}});Object.defineProperty(exports,"Adapters",{enumerable:true,get:function get(){return _lib.Adapters}});Object.defineProperty(exports,"AddPanelAction",{enumerable:true,get:function get(){return _lib.AddPanelAction}});Object.defineProperty(exports,"ApplyFilterAction",{enumerable:true,get:function get(){return _lib.ApplyFilterAction}});Object.defineProperty(exports,"CONTEXT_MENU_TRIGGER",{enumerable:true,get:function get(){return _lib.CONTEXT_MENU_TRIGGER}});Object.defineProperty(exports,"Container",{enumerable:true,get:function get(){return _lib.Container}});Object.defineProperty(exports,"ContainerInput",{enumerable:true,get:function get(){return _lib.ContainerInput}});Object.defineProperty(exports,"ContainerOutput",{enumerable:true,get:function get(){return _lib.ContainerOutput}});Object.defineProperty(exports,"EDIT_PANEL_ACTION_ID",{enumerable:true,get:function get(){return _lib.EDIT_PANEL_ACTION_ID}});Object.defineProperty(exports,"EditPanelAction",{enumerable:true,get:function get(){return _lib.EditPanelAction}});Object.defineProperty(exports,"Embeddable",{enumerable:true,get:function get(){return _lib.Embeddable}});Object.defineProperty(exports,"EmbeddableChildPanel",{enumerable:true,get:function get(){return _lib.EmbeddableChildPanel}});Object.defineProperty(exports,"EmbeddableChildPanelUiProps",{enumerable:true,get:function get(){return _lib.EmbeddableChildPanelUiProps}});Object.defineProperty(exports,"EmbeddableFactory",{enumerable:true,get:function get(){return _lib.EmbeddableFactory}});Object.defineProperty(exports,"EmbeddableFactoryNotFoundError",{enumerable:true,get:function get(){return _lib.EmbeddableFactoryNotFoundError}});Object.defineProperty(exports,"EmbeddableInput",{enumerable:true,get:function get(){return _lib.EmbeddableInput}});Object.defineProperty(exports,"EmbeddableInstanceConfiguration",{enumerable:true,get:function get(){return _lib.EmbeddableInstanceConfiguration}});Object.defineProperty(exports,"EmbeddableOutput",{enumerable:true,get:function get(){return _lib.EmbeddableOutput}});Object.defineProperty(exports,"EmbeddablePanel",{enumerable:true,get:function get(){return _lib.EmbeddablePanel}});Object.defineProperty(exports,"ErrorEmbeddable",{enumerable:true,get:function get(){return _lib.ErrorEmbeddable}});Object.defineProperty(exports,"ExecuteTriggerActions",{enumerable:true,get:function get(){return _lib.ExecuteTriggerActions}});Object.defineProperty(exports,"GetActionsCompatibleWithTrigger",{enumerable:true,get:function get(){return _lib.GetActionsCompatibleWithTrigger}});Object.defineProperty(exports,"GetEmbeddableFactories",{enumerable:true,get:function get(){return _lib.GetEmbeddableFactories}});Object.defineProperty(exports,"GetEmbeddableFactory",{enumerable:true,get:function get(){return _lib.GetEmbeddableFactory}});Object.defineProperty(exports,"IContainer",{enumerable:true,get:function get(){return _lib.IContainer}});Object.defineProperty(exports,"IEmbeddable",{enumerable:true,get:function get(){return _lib.IEmbeddable}});Object.defineProperty(exports,"IncompatibleActionError",{enumerable:true,get:function get(){return _lib.IncompatibleActionError}});Object.defineProperty(exports,"OutputSpec",{enumerable:true,get:function get(){return _lib.OutputSpec}});Object.defineProperty(exports,"PanelNotFoundError",{enumerable:true,get:function get(){return _lib.PanelNotFoundError}});Object.defineProperty(exports,"PanelState",{enumerable:true,get:function get(){return _lib.PanelState}});Object.defineProperty(exports,"PropertySpec",{enumerable:true,get:function get(){return _lib.PropertySpec}});Object.defineProperty(exports,"SavedObjectMetaData",{enumerable:true,get:function get(){return _lib.SavedObjectMetaData}});Object.defineProperty(exports,"Trigger",{enumerable:true,get:function get(){return _lib.Trigger}});Object.defineProperty(exports,"TriggerContext",{enumerable:true,get:function get(){return _lib.TriggerContext}});Object.defineProperty(exports,"ViewMode",{enumerable:true,get:function get(){return _lib.ViewMode}});Object.defineProperty(exports,"isErrorEmbeddable",{enumerable:true,get:function get(){return _lib.isErrorEmbeddable}});Object.defineProperty(exports,"openAddPanelFlyout",{enumerable:true,get:function get(){return _lib.openAddPanelFlyout}});var _plugin=__webpack_require__(1612);Object.keys(_plugin).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _plugin[key]}})});var _lib=__webpack_require__(441);function plugin(initializerContext){return new _plugin.EmbeddablePublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTableAggs=exports.getFormat=exports.createFormat=void 0;var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);var _field_format=__webpack_require__(344);var _get_columns=__webpack_require__(415);var _chrome=_interopRequireDefault(__webpack_require__(7));var _field_formats=__webpack_require__(32);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isTermsFieldFormat(serializedFieldFormat){return serializedFieldFormat.id==="terms"}var config=_chrome.default.getUiSettingsClient();var getConfig=function getConfig(){return config.get.apply(config,arguments)};var getDefaultFieldFormat=function getDefaultFieldFormat(){return{convert:_lodash.identity}};var getFieldFormat=function getFieldFormat(id){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var Format=_field_formats.fieldFormats.byId[id];if(Format){return new Format(params,getConfig)}else{return getDefaultFieldFormat()}};var createFormat=function createFormat(agg){var format=agg.params.field?agg.params.field.format.toJSON():{};var formats={date_range:function date_range(){return{id:"string"}},percentile_ranks:function percentile_ranks(){return{id:"percent"}},count:function count(){return{id:"number"}},cardinality:function cardinality(){return{id:"number"}},date_histogram:function date_histogram(){return{id:"date",params:{pattern:agg.buckets.getScaledDateFormat()}}},terms:function terms(){return{id:"terms",params:_objectSpread({id:format.id,otherBucketLabel:agg.params.otherBucketLabel,missingBucketLabel:agg.params.missingBucketLabel},format.params)}},range:function range(){return{id:"range",params:_objectSpread({id:format.id},format.params)}}};return formats[agg.type.name]?formats[agg.type.name]():format};exports.createFormat=createFormat;var getFormat=function getFormat(){var mapping=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!mapping){return getDefaultFieldFormat()}var id=mapping.id;if(id==="range"){var RangeFormat=_field_format.FieldFormat.from(function(range){var format=getFieldFormat(id,mapping.params);return _i18n.i18n.translate("common.ui.aggTypes.buckets.ranges.rangesFormatMessage",{defaultMessage:"{from} to {to}",values:{from:format.convert(range.gte),to:format.convert(range.lt)}})});return new RangeFormat}else if(isTermsFieldFormat(mapping)&&mapping.params){var params=mapping.params;return{getConverterFor:function getConverterFor(type){var format=getFieldFormat(params.id,mapping.params);return function(val){if(val==="__other__"){return params.otherBucketLabel}if(val==="__missing__"){return params.missingBucketLabel}var parsedUrl={origin:window.location.origin,pathname:window.location.pathname,basePath:_chrome.default.getBasePath()};return format.convert(val,undefined,undefined,parsedUrl)}},convert:function convert(val,type){var format=getFieldFormat(params.id,mapping.params);if(val==="__other__"){return params.otherBucketLabel}if(val==="__missing__"){return params.missingBucketLabel}var parsedUrl={origin:window.location.origin,pathname:window.location.pathname,basePath:_chrome.default.getBasePath()};return format.convert(val,type,undefined,parsedUrl)}}}else{return getFieldFormat(id,mapping.params)}};exports.getFormat=getFormat;var getTableAggs=function getTableAggs(vis){if(!vis.aggs||!vis.aggs.getResponseAggs){return[]}var columns=(0,_get_columns.tabifyGetColumns)(vis.aggs.getResponseAggs(),!vis.isHierarchical());return columns.map(function(c){return c.aggConfig})};exports.getTableAggs=getTableAggs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddDeleteButtons=AddDeleteButtons;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AddDeleteButtons(props){var testSubj=props.testSubj;var createDelete=function createDelete(){if(props.disableDelete){return null}return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{content:props.deleteTooltip},_react.default.createElement(_eui.EuiButtonIcon,{"data-test-subj":"".concat(testSubj,"DeleteBtn"),"aria-label":props.deleteTooltip,color:"danger",iconType:"trash",onClick:props.onDelete})))};var createAdd=function createAdd(){if(props.disableAdd){return null}return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{content:props.addTooltip},_react.default.createElement(_eui.EuiButtonIcon,{"data-test-subj":"".concat(testSubj,"AddBtn"),"aria-label":props.addTooltip,iconType:"plusInCircle",onClick:props.onAdd})))};var createClone=function createClone(){var cloneBtn=null;if(props.onClone&&!props.disableAdd){cloneBtn=_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{content:props.cloneTooltip},_react.default.createElement(_eui.EuiButtonIcon,{"data-test-subj":"".concat(testSubj,"CloneBtn"),"aria-label":props.cloneTooltip,iconType:"copy",onClick:props.onClone})))}return cloneBtn};var createActivatePanel=function createActivatePanel(){var activatePanelBtn=null;if((0,_lodash.isBoolean)(props.isPanelActive)){var tooltip=props.isPanelActive?props.deactivatePanelTooltip:props.activatePanelTooltip;var iconType=props.isPanelActive?"eye":"eyeClosed";activatePanelBtn=_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{content:tooltip},_react.default.createElement(_eui.EuiButtonIcon,{"data-test-subj":"".concat(testSubj,"ActivatePanelBtn"),"aria-label":tooltip,iconType:iconType,onClick:props.togglePanelActivation})))}return activatePanelBtn};var deleteBtn=createDelete();var addBtn=createAdd();var cloneBtn=createClone();var activatePanelBtn=createActivatePanel();return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:props.responsive,justifyContent:"flexEnd"},activatePanelBtn,cloneBtn,addBtn,deleteBtn)}AddDeleteButtons.defaultProps={testSubj:"Add",activeTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.addButtonDefaultTooltip",{defaultMessage:"Add"}),addTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.addButtonDefaultTooltip",{defaultMessage:"Add"}),deleteTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.deleteButtonDefaultTooltip",{defaultMessage:"Delete"}),cloneTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.cloneButtonDefaultTooltip",{defaultMessage:"Clone"}),activatePanelTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.reEnableTooltip",{defaultMessage:"Re-enable"}),deactivatePanelTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.temporarilyDisableTooltip",{defaultMessage:"Temporarily Disable"})};AddDeleteButtons.propTypes={addTooltip:_propTypes.default.string,deleteTooltip:_propTypes.default.string,cloneTooltip:_propTypes.default.string,activatePanelTooltip:_propTypes.default.string,deactivatePanelTooltip:_propTypes.default.string,togglePanelActivation:_propTypes.default.func,isPanelActive:_propTypes.default.bool,disableAdd:_propTypes.default.bool,disableDelete:_propTypes.default.bool,onClone:_propTypes.default.func,onAdd:_propTypes.default.func,onDelete:_propTypes.default.func,responsive:_propTypes.default.bool}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultQueryLanguage=getDefaultQueryLanguage;var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDefaultQueryLanguage(){return _chrome.default.getUiSettingsClient().get("search:queryLanguage")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uiRegistry=uiRegistry;var _lodash=_interopRequireDefault(__webpack_require__(1));var _indexed_array=__webpack_require__(59);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var notPropsOptNames=_indexed_array.IndexedArray.OPT_NAMES.concat("constructor","invokeProviders");function uiRegistry(spec){spec=spec||{};var constructor=_lodash.default.has(spec,"constructor")&&spec.constructor;var filter=_lodash.default.has(spec,"filter")&&spec.filter;var invokeProviders=_lodash.default.has(spec,"invokeProviders")&&spec.invokeProviders;var iaOpts=_lodash.default.defaults(_lodash.default.pick(spec,_indexed_array.IndexedArray.OPT_NAMES),{index:["name"]});var props=_lodash.default.omit(spec,notPropsOptNames);var providers=[];var isInstantiated=false;var getInvokedProviders;var modules;var registry=function registry(Private,$injector){getInvokedProviders=function getInvokedProviders(newProviders){var set=invokeProviders?$injector.invoke(invokeProviders,undefined,{providers:newProviders}):newProviders.map(Private);if(filter&&_lodash.default.isFunction(filter)){set=set.filter(function(item){return filter(item)})}return set};iaOpts.initialSet=getInvokedProviders(providers);modules=new _indexed_array.IndexedArray(iaOpts);_lodash.default.assign(modules,props);if(constructor){modules=$injector.invoke(constructor,modules)||modules}isInstantiated=true;return modules};registry.displayName="[registry "+props.name+"]";registry.register=function(privateModule){providers.push(privateModule);if(isInstantiated){var _getInvokedProviders=getInvokedProviders([privateModule]),_getInvokedProviders2=_slicedToArray(_getInvokedProviders,1),provider=_getInvokedProviders2[0];if(provider){modules.push(provider)}}return registry};return registry}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisFactoryProvider=exports.visFactory=void 0;var _vis_types=__webpack_require__(1237);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var visFactory={createBaseVisualization:function createBaseVisualization(config){return new _vis_types.BaseVisType(config)},createReactVisualization:function createReactVisualization(config){return new _vis_types.ReactVisType(config)}};exports.visFactory=visFactory;var VisFactoryProvider=function VisFactoryProvider(Private){var AngularVisType=Private(_vis_types.AngularVisTypeProvider);var VislibVisType=Private(_vis_types.VislibVisTypeProvider);return _objectSpread({},visFactory,{createAngularVisualization:function createAngularVisualization(config){return new AngularVisType(config)},createVislibVisualization:function createVislibVisualization(config){return new VislibVisType(config)}})};exports.VisFactoryProvider=VisFactoryProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryBarWrapper=QueryBarWrapper;var _react=_interopRequireWildcard(__webpack_require__(0));var _query_input_bar_context=__webpack_require__(658);var _data=__webpack_require__(24);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function QueryBarWrapper(props){var coreStartContext=(0,_react.useContext)(_query_input_bar_context.CoreStartContext);return _react.default.createElement(_data.QueryBarInput,_extends({},props,coreStartContext))}},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(288)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisTypesRegistryProvider=void 0;var _registry=__webpack_require__(44);var VisTypesRegistryProvider=(0,_registry.uiRegistry)({name:"visTypes",index:["name"],order:["title"]});exports.VisTypesRegistryProvider=VisTypesRegistryProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BucketAggType=BucketAggType;var _lodash=_interopRequireDefault(__webpack_require__(1));var _agg_type=__webpack_require__(582);var _legacy_class=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(BucketAggType).inherits(_agg_type.AggType);function BucketAggType(config){BucketAggType.Super.call(this,config);if(_lodash.default.isFunction(config.getKey)){this.getKey=config.getKey}}BucketAggType.prototype.getKey=function(bucket,key){return key||bucket.key}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarQueryFilterProvider=FilterBarQueryFilterProvider;var _data=__webpack_require__(24);function FilterBarQueryFilterProvider(getAppState,globalState){var _require=__webpack_require__(71),setup=_require.setup;var filterManager=setup.filter.filterManager;var filterStateManager=new _data.FilterStateManager(globalState,getAppState,filterManager);var queryFilter={};queryFilter.getUpdates$=filterManager.getUpdates$.bind(filterManager);queryFilter.getFetches$=filterManager.getFetches$.bind(filterManager);queryFilter.getFilters=filterManager.getFilters.bind(filterManager);queryFilter.getAppFilters=filterManager.getAppFilters.bind(filterManager);queryFilter.getGlobalFilters=filterManager.getGlobalFilters.bind(filterManager);queryFilter.removeFilter=filterManager.removeFilter.bind(filterManager);queryFilter.addFilters=filterManager.addFilters.bind(filterManager);queryFilter.setFilters=filterManager.setFilters.bind(filterManager);queryFilter.addFiltersAndChangeTimeFilter=filterManager.addFiltersAndChangeTimeFilter.bind(filterManager);queryFilter.removeAll=filterManager.removeAll.bind(filterManager);queryFilter.destroy=function(){filterManager.destroy();filterStateManager.destroy()};return queryFilter}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorPicker=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _custom_color_picker=__webpack_require__(1396);var _i18n=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ColorPicker=function(_Component){_inherits(ColorPicker,_Component);function ColorPicker(props){var _this;_classCallCheck(this,ColorPicker);_this=_possibleConstructorReturn(this,_getPrototypeOf(ColorPicker).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleChange",function(color){var rgb=color.rgb;var part={};part[_this.props.name]="rgba(".concat(rgb.r,",").concat(rgb.g,",").concat(rgb.b,",").concat(rgb.a,")");if(_this.props.onChange)_this.props.onChange(part)});_defineProperty(_assertThisInitialized(_this),"handleClick",function(){_this.setState({displayPicker:!_this.state.displayColorPicker})});_defineProperty(_assertThisInitialized(_this),"handleClose",function(){_this.setState({displayPicker:false})});_defineProperty(_assertThisInitialized(_this),"handleClear",function(){var part={};part[_this.props.name]=null;_this.props.onChange(part)});_this.state={displayPicker:false,color:{}};return _this}_createClass(ColorPicker,[{key:"renderSwatch",value:function renderSwatch(){if(!this.props.value){return _react.default.createElement("button",{"aria-label":_i18n.i18n.translate("tsvb.colorPicker.notAccessibleAriaLabel",{defaultMessage:"Color picker, not accessible"}),className:"tvbColorPicker__swatch-empty",onClick:this.handleClick})}return _react.default.createElement("button",{"aria-label":_i18n.i18n.translate("tsvb.colorPicker.notAccessibleWithValueAriaLabel",{defaultMessage:"Color picker ({value}), not accessible",values:{value:this.props.value}}),style:{backgroundColor:this.props.value},className:"tvbColorPicker__swatch",onClick:this.handleClick})}},{key:"render",value:function render(){var swatch=this.renderSwatch();var value=this.props.value||undefined;var clear;if(!this.props.disableTrash){clear=_react.default.createElement("div",{className:"tvbColorPicker__clear",onClick:this.handleClear},_react.default.createElement(_eui.EuiIconTip,{size:"s",type:"cross",color:"danger",content:_i18n.i18n.translate("tsvb.colorPicker.clearIconLabel",{defaultMessage:"Clear"})}))}return _react.default.createElement("div",{className:"tvbColorPicker","data-test-subj":"tvbColorPicker"},swatch,clear,this.state.displayPicker?_react.default.createElement("div",{className:"tvbColorPicker__popover"},_react.default.createElement("div",{className:"tvbColorPicker__cover",onClick:this.handleClose}),_react.default.createElement(_custom_color_picker.CustomColorPicker,{color:value,onChangeComplete:this.handleChange})):null)}}]);return ColorPicker}(_react.Component);exports.ColorPicker=ColorPicker;ColorPicker.propTypes={name:_propTypes.default.string.isRequired,value:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),disableTrash:_propTypes.default.bool,onChange:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldSelect=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _check_ui_restrictions=__webpack_require__(107);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var isFieldTypeEnabled=function isFieldTypeEnabled(fieldRestrictions,fieldType){return fieldRestrictions.length?fieldRestrictions.includes(fieldType):true};function FieldSelectUi(_ref){var type=_ref.type,fields=_ref.fields,indexPattern=_ref.indexPattern,value=_ref.value,onChange=_ref.onChange,disabled=_ref.disabled,restrict=_ref.restrict,placeholder=_ref.placeholder,uiRestrictions=_ref.uiRestrictions,rest=_objectWithoutProperties(_ref,["type","fields","indexPattern","value","onChange","disabled","restrict","placeholder","uiRestrictions"]);if(type==="count"){return null}var selectedOptions=[];var options=Object.values((fields[indexPattern]||[]).reduce(function(acc,field){if(isFieldTypeEnabled(restrict,field.type)&&(0,_check_ui_restrictions.isFieldEnabled)(field.name,type,uiRestrictions)){var item={label:field.name,value:field.name};if(acc[field.type]){acc[field.type].options.push(item)}else{acc[field.type]={options:[item],label:field.type}}if(value===item.value){selectedOptions.push(item)}}return acc},{}));if(onChange&&value&&!selectedOptions.length){onChange()}return _react.default.createElement(_eui.EuiComboBox,_extends({placeholder:placeholder,isDisabled:disabled,options:options,selectedOptions:selectedOptions,onChange:onChange,singleSelection:{asPlainText:true}},rest))}FieldSelectUi.defaultProps={indexPattern:"*",disabled:false,restrict:[],placeholder:_i18n.i18n.translate("tsvb.fieldSelect.selectFieldPlaceholder",{defaultMessage:"Select field..."})};FieldSelectUi.propTypes={disabled:_propTypes.default.bool,fields:_propTypes.default.object,id:_propTypes.default.string,indexPattern:_propTypes.default.string,onChange:_propTypes.default.func,restrict:_propTypes.default.array,type:_propTypes.default.string,value:_propTypes.default.string,uiRestrictions:_propTypes.default.object,placeholder:_propTypes.default.string};var FieldSelect=(0,_react2.injectI18n)(FieldSelectUi);exports.FieldSelect=FieldSelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.YesNo=YesNo;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function YesNo(props){var name=props.name,value=props.value,disabled=props.disabled;var handleChange=function handleChange(value){var name=props.name;return function(){var parts=_defineProperty({},name,value);props.onChange(parts)}};var htmlId=(0,_eui.htmlIdGenerator)();var inputName=name+_lodash.default.uniqueId();return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiRadio,{id:htmlId("yes"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.yesButtonLabel",defaultMessage:"Yes",description:"The 'yes' in a yes/no answer choice."}),className:"eui-displayInlineBlock",name:inputName,checked:Boolean(value),value:"yes",onChange:handleChange(1),disabled:disabled})," ",_react.default.createElement(_eui.EuiRadio,{id:htmlId("no"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.noButtonLabel",defaultMessage:"No",description:"The 'no' in a yes/no answer choice."}),className:"eui-displayInlineBlock",name:inputName,checked:!Boolean(value),value:"no",onChange:handleChange(0),disabled:disabled}))}YesNo.propTypes={name:_propTypes.default.string,value:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.string])};YesNo.defaultProps={disabled:false}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(103)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assert_never=__webpack_require__(803);Object.keys(_assert_never).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _assert_never[key]}})});var _context=__webpack_require__(386);Object.keys(_context).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _context[key]}})});var _deep_freeze=__webpack_require__(804);Object.keys(_deep_freeze).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _deep_freeze[key]}})});var _get=__webpack_require__(805);Object.keys(_get).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get[key]}})});var _map_to_object=__webpack_require__(806);Object.keys(_map_to_object).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _map_to_object[key]}})});var _merge=__webpack_require__(807);Object.keys(_merge).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _merge[key]}})});var _pick=__webpack_require__(808);Object.keys(_pick).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _pick[key]}})});var _url=__webpack_require__(809);Object.keys(_url).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createDefer",{enumerable:true,get:function get(){return _defer.createDefer}});__webpack_require__(861);var _defer=__webpack_require__(862)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexedArray",{enumerable:true,get:function get(){return _indexed_array.IndexedArray}});var _indexed_array=__webpack_require__(918)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ELASTIC_WEBSITE_URL",{enumerable:true,get:function get(){return _documentation_links.ELASTIC_WEBSITE_URL}});Object.defineProperty(exports,"DOC_LINK_VERSION",{enumerable:true,get:function get(){return _documentation_links.DOC_LINK_VERSION}});Object.defineProperty(exports,"documentationLinks",{enumerable:true,get:function get(){return _documentation_links.documentationLinks}});Object.defineProperty(exports,"getDocLink",{enumerable:true,get:function get(){return _get_doc_link.getDocLink}});var _documentation_links=__webpack_require__(116);var _get_doc_link=__webpack_require__(992)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggGroupNamesMap=exports.AggGroupNames=void 0;var _i18n=__webpack_require__(2);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggGroupNames;exports.AggGroupNames=AggGroupNames;(function(AggGroupNames){AggGroupNames["Buckets"]="buckets";AggGroupNames["Metrics"]="metrics"})(AggGroupNames||(exports.AggGroupNames=AggGroupNames={}));var aggGroupNamesMap=function aggGroupNamesMap(){var _ref;return _ref={},_defineProperty(_ref,AggGroupNames.Metrics,_i18n.i18n.translate("common.ui.vis.editors.aggGroups.metricsText",{defaultMessage:"Metrics"})),_defineProperty(_ref,AggGroupNames.Buckets,_i18n.i18n.translate("common.ui.vis.editors.aggGroups.bucketsText",{defaultMessage:"Buckets"})),_ref};exports.aggGroupNamesMap=aggGroupNamesMap},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(298)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(67)},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(769)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2609)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PersistedLog",{enumerable:true,get:function get(){return _persisted_log.PersistedLog}});Object.defineProperty(exports,"recentlyAccessed",{enumerable:true,get:function get(){return _recently_accessed.recentlyAccessed}});__webpack_require__(968);var _persisted_log=__webpack_require__(539);var _recently_accessed=__webpack_require__(969)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectRegistryProvider=void 0;var _registry=__webpack_require__(44);var SavedObjectRegistryProvider=(0,_registry.uiRegistry)({name:"savedObjects",index:["loaderProperties.name"],order:["loaderProperties.name"]});exports.SavedObjectRegistryProvider=SavedObjectRegistryProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.makeNestedLabel=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var makeNestedLabel=function makeNestedLabel(aggConfig,label){var uppercaseLabel=_lodash.default.startCase(label);if(aggConfig.params.customMetric){var metricLabel=aggConfig.params.customMetric.makeLabel();if(metricLabel.includes("".concat(uppercaseLabel," of "))){metricLabel=metricLabel.substring("".concat(uppercaseLabel," of ").length);metricLabel="2. ".concat(label," of ").concat(metricLabel)}else if(metricLabel.includes("".concat(label," of "))){metricLabel=parseInt(metricLabel.substring(0,1))+1+metricLabel.substring(1)}else{metricLabel="".concat(uppercaseLabel," of ").concat(metricLabel)}return metricLabel}var metric=aggConfig.aggConfigs.find(function(agg){return agg.id===aggConfig.params.metricAgg});if(!metric)return"";return"".concat(uppercaseLabel," of ").concat(metric.makeLabel())};exports.makeNestedLabel=makeNestedLabel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setup=void 0;var _new_platform=__webpack_require__(8);var _registries=__webpack_require__(80);var _interpreter=__webpack_require__(601);var _legacy_dependencies_plugin=__webpack_require__(1217);var _=__webpack_require__(24);var dataPlugin=(0,_.plugin)();var legacyPlugin=new _legacy_dependencies_plugin.LegacyDependenciesPlugin;var setup=dataPlugin.setup(_new_platform.npSetup.core,{__LEGACY:legacyPlugin.setup(),interpreter:{renderersRegistry:_registries.renderersRegistry,getInterpreter:_interpreter.getInterpreter}});exports.setup=setup},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLastValue=void 0;var _lodash=__webpack_require__(1);var DEFAULT_VALUE=0;var extractValue=function extractValue(data){return data&&data[1]||null};var getLastValue=function getLastValue(data){var defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DEFAULT_VALUE;if(!(0,_lodash.isArray)(data)){return data||defaultValue}return extractValue((0,_lodash.last)(data))||defaultValue};exports.getLastValue=getLastValue},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterRows=filterRows;exports.MetricSelect=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);var _calculate_siblings=__webpack_require__(1408);var _calculate_label=__webpack_require__(431);var _basic_aggs=__webpack_require__(651);var _to_percentile_number=__webpack_require__(1409);var _metric_types=__webpack_require__(365);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function createTypeFilter(restrict,exclude){return function(metric){if((0,_lodash.includes)(exclude,metric.type))return false;switch(restrict){case"basic":return(0,_lodash.includes)(_basic_aggs.basicAggs,metric.type);default:return true}}}function filterRows(includeSiblings){return function(row){if(includeSiblings){return!/^series/.test(row.type)&&!/^percentile/.test(row.type)&&row.type!=="math"}return!/_bucket$/.test(row.type)&&!/^series/.test(row.type)&&!/^percentile/.test(row.type)&&row.type!=="math"}}function MetricSelectUi(props){var additionalOptions=props.additionalOptions,restrict=props.restrict,metric=props.metric,metrics=props.metrics,onChange=props.onChange,value=props.value,exclude=props.exclude,includeSiblings=props.includeSiblings,clearable=props.clearable,intl=props.intl,rest=_objectWithoutProperties(props,["additionalOptions","restrict","metric","metrics","onChange","value","exclude","includeSiblings","clearable","intl"]);var calculatedMetrics=metrics.filter(createTypeFilter(restrict,exclude));var siblings=(0,_calculate_siblings.calculateSiblings)(calculatedMetrics,metric);var percentileOptions=siblings.filter(function(row){return/^percentile/.test(row.type)}).reduce(function(acc,row){var label=(0,_calculate_label.calculateLabel)(row,calculatedMetrics);switch(row.type){case _metric_types.METRIC_TYPES.PERCENTILE_RANK:(row.values||[]).forEach(function(p){var value=(0,_to_percentile_number.toPercentileNumber)(p);acc.push({value:"".concat(row.id,"[").concat(value,"]"),label:"".concat(label," (").concat(value,")")})});case _metric_types.METRIC_TYPES.PERCENTILE:(row.percentiles||[]).forEach(function(p){if(p.value){var _value=(0,_to_percentile_number.toPercentileNumber)(p.value);acc.push({value:"".concat(row.id,"[").concat(_value,"]"),label:"".concat(label," (").concat(_value,")")})}})}return acc},[]);var options=siblings.filter(filterRows(includeSiblings)).map(function(row){var label=(0,_calculate_label.calculateLabel)(row,calculatedMetrics);return{value:row.id,label:label}});var allOptions=[].concat(_toConsumableArray(options),_toConsumableArray(additionalOptions),_toConsumableArray(percentileOptions));var selectedOption=allOptions.find(function(option){return value===option.value});var selectedOptions=selectedOption?[selectedOption]:[];return _react.default.createElement(_eui.EuiComboBox,_extends({placeholder:intl.formatMessage({id:"tsvb.metricSelect.selectMetricPlaceholder",defaultMessage:"Select metric…"}),options:allOptions,selectedOptions:selectedOptions,onChange:onChange,singleSelection:{asPlainText:true},isClearable:clearable},rest))}MetricSelectUi.defaultProps={additionalOptions:[],exclude:[],metric:{},restrict:"none",includeSiblings:false};MetricSelectUi.propTypes={additionalOptions:_propTypes.default.array,exclude:_propTypes.default.array,metric:_propTypes.default.object,onChange:_propTypes.default.func,restrict:_propTypes.default.string,value:_propTypes.default.string,includeSiblings:_propTypes.default.bool};var MetricSelect=(0,_react2.injectI18n)(MetricSelectUi);exports.MetricSelect=MetricSelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.handleChange=handleChange;exports.handleDelete=handleDelete;exports.handleAdd=handleAdd;exports.collectionActions=void 0;var _uuid=_interopRequireDefault(__webpack_require__(31));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var newFn=function newFn(){return{id:_uuid.default.v1()}};function handleChange(props,doc){var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.map(function(row){if(row.id===doc.id)return doc;return row});if(_lodash.default.isFunction(props.onChange)){props.onChange(_lodash.default.assign({},model,part))}}function handleDelete(props,doc){var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.filter(function(row){return row.id!==doc.id});if(_lodash.default.isFunction(props.onChange)){props.onChange(_lodash.default.assign({},model,part))}}function handleAdd(props){var fn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:newFn;if(!_lodash.default.isFunction(fn))fn=newFn;var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.concat([fn()]);if(_lodash.default.isFunction(props.onChange)){props.onChange(_lodash.default.assign({},model,part))}}var collectionActions={handleAdd:handleAdd,handleDelete:handleDelete,handleChange:handleChange};exports.collectionActions=collectionActions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ES_TYPES=void 0;var ES_TYPES={NUMBER:"number",STRING:"string",KEYWORD:"keyword",TEXT:"text",DATE:"date"};exports.ES_TYPES=ES_TYPES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPattern=void 0;var _lodash=__webpack_require__(1);var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _field_select=__webpack_require__(53);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _yes_no=__webpack_require__(54);var _es_types=__webpack_require__(75);var _form_validation_context=__webpack_require__(657);var _get_interval=__webpack_require__(363);var _i18n=__webpack_require__(2);var _timerange_data_modes=__webpack_require__(1434);var _panel_types=__webpack_require__(102);var _check_ui_restrictions=__webpack_require__(107);var _vis_data_context=__webpack_require__(366);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RESTRICT_FIELDS=[_es_types.ES_TYPES.DATE];var validateIntervalValue=function validateIntervalValue(intervalValue){var isAutoOrGteInterval=(0,_get_interval.isGteInterval)(intervalValue)||(0,_get_interval.isAutoInterval)(intervalValue);if(isAutoOrGteInterval){return{isValid:true}}return(0,_get_interval.validateReInterval)(intervalValue)};var htmlId=(0,_eui.htmlIdGenerator)();var isEntireTimeRangeActive=function isEntireTimeRangeActive(model,isTimeSeries){return!isTimeSeries&&model[_timerange_data_modes.TIME_RANGE_MODE_KEY]===_timerange_data_modes.TIME_RANGE_DATA_MODES.ENTIRE_TIME_RANGE};var IndexPattern=function IndexPattern(_ref){var _defaults;var fields=_ref.fields,prefix=_ref.prefix,onChange=_ref.onChange,disabled=_ref.disabled,_model=_ref.model;var handleSelectChange=(0,_create_select_handler.createSelectHandler)(onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(onChange);var timeFieldName="".concat(prefix,"time_field");var indexPatternName="".concat(prefix,"index_pattern");var intervalName="".concat(prefix,"interval");var dropBucketName="".concat(prefix,"drop_last_bucket");var updateControlValidity=(0,_react.useContext)(_form_validation_context.FormValidationContext);var uiRestrictions=(0,_lodash.get)((0,_react.useContext)(_vis_data_context.VisDataContext),"uiRestrictions");var timeRangeOptions=[{label:_i18n.i18n.translate("tsvb.indexPattern.timeRange.lastValue",{defaultMessage:"Last value"}),value:_timerange_data_modes.TIME_RANGE_DATA_MODES.LAST_VALUE,disabled:!(0,_check_ui_restrictions.isTimerangeModeEnabled)(_timerange_data_modes.TIME_RANGE_DATA_MODES.LAST_VALUE,uiRestrictions)},{label:_i18n.i18n.translate("tsvb.indexPattern.timeRange.entireTimeRange",{defaultMessage:"Entire time range"}),value:_timerange_data_modes.TIME_RANGE_DATA_MODES.ENTIRE_TIME_RANGE,disabled:!(0,_check_ui_restrictions.isTimerangeModeEnabled)(_timerange_data_modes.TIME_RANGE_DATA_MODES.ENTIRE_TIME_RANGE,uiRestrictions)}];var defaults=(_defaults={default_index_pattern:""},_defineProperty(_defaults,indexPatternName,"*"),_defineProperty(_defaults,intervalName,_get_interval.AUTO_INTERVAL),_defineProperty(_defaults,dropBucketName,1),_defineProperty(_defaults,_timerange_data_modes.TIME_RANGE_MODE_KEY,timeRangeOptions[0].value),_defaults);var model=_objectSpread({},defaults,{},_model);var isDefaultIndexPatternUsed=model.default_index_pattern&&!model[indexPatternName];var intervalValidation=validateIntervalValue(model[intervalName]);var selectedTimeRangeOption=timeRangeOptions.find(function(_ref2){var value=_ref2.value;return model[_timerange_data_modes.TIME_RANGE_MODE_KEY]===value});var isTimeSeries=model.type===_panel_types.PANEL_TYPES.TIMESERIES;updateControlValidity(intervalName,intervalValidation.isValid);return _react.default.createElement("div",{className:"index-pattern"},!isTimeSeries&&_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("timeRange"),label:_i18n.i18n.translate("tsvb.indexPattern.timeRange.label",{defaultMessage:"Data timerange mode"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,placeholder:_i18n.i18n.translate("tsvb.indexPattern.timeRange.selectTimeRange",{defaultMessage:"Select"}),options:timeRangeOptions,selectedOptions:selectedTimeRangeOption?[selectedTimeRangeOption]:[],onChange:handleSelectChange(_timerange_data_modes.TIME_RANGE_MODE_KEY),singleSelection:{asPlainText:true},isDisabled:disabled})),_react.default.createElement(_eui.EuiText,{size:"xs",style:{margin:0}},_i18n.i18n.translate("tsvb.indexPattern.timeRange.hint",{defaultMessage:'This setting controls the timespan used for matching documents. \n                "Entire timerange" will match all the documents selected in the timepicker. \n                "Last value" will match only the documents for the specified interval from the end of the timerange.'})))),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("indexPattern"),label:_i18n.i18n.translate("tsvb.indexPatternLabel",{defaultMessage:"Index pattern"}),helpText:isDefaultIndexPatternUsed&&_i18n.i18n.translate("tsvb.indexPattern.searchByDefaultIndex",{defaultMessage:"Default index pattern is used. To query all indexes use *"})},_react.default.createElement(_eui.EuiFieldText,{"data-test-subj":"metricsIndexPatternInput",disabled:disabled,placeholder:model.default_index_pattern,onChange:handleTextChange(indexPatternName,"*"),value:model[indexPatternName]}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("timeField"),label:_i18n.i18n.translate("tsvb.indexPattern.timeFieldLabel",{defaultMessage:"Time field"})},_react.default.createElement(_field_select.FieldSelect,{"data-test-subj":"metricsIndexPatternFieldsSelect",restrict:RESTRICT_FIELDS,value:model[timeFieldName],disabled:disabled,onChange:handleSelectChange(timeFieldName),indexPattern:model[indexPatternName],fields:fields,placeholder:isDefaultIndexPatternUsed?model.default_timefield:undefined}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{isInvalid:!intervalValidation.isValid,error:intervalValidation.errorMessage,id:htmlId("interval"),label:_i18n.i18n.translate("tsvb.indexPattern.intervalLabel",{defaultMessage:"Interval"}),helpText:_i18n.i18n.translate("tsvb.indexPattern.intervalHelpText",{defaultMessage:"Examples: auto, 1m, 1d, 7d, 1y, >=1m",description:"auto, 1m, 1d, 7d, 1y, >=1m are required values and must not be translated."})},_react.default.createElement(_eui.EuiFieldText,{isInvalid:!intervalValidation.isValid,disabled:disabled||isEntireTimeRangeActive(model,isTimeSeries),onChange:handleTextChange(intervalName,_get_interval.AUTO_INTERVAL),value:model[intervalName],placeholder:_get_interval.AUTO_INTERVAL}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("dropLastBucket"),label:_i18n.i18n.translate("tsvb.indexPattern.dropLastBucketLabel",{defaultMessage:"Drop last bucket?"})},_react.default.createElement(_yes_no.YesNo,{value:model[dropBucketName],name:dropBucketName,onChange:onChange,disabled:disabled||isEntireTimeRangeActive(model,isTimeSeries)})))))};exports.IndexPattern=IndexPattern;IndexPattern.defaultProps={prefix:"",disabled:false};IndexPattern.propTypes={model:_propTypes.default.object.isRequired,fields:_propTypes.default.object.isRequired,onChange:_propTypes.default.func.isRequired,prefix:_propTypes.default.string,disabled:_propTypes.default.bool,className:_propTypes.default.string}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ChromeBadge",{enumerable:true,get:function get(){return _chrome.ChromeBadge}});Object.defineProperty(exports,"ChromeBrand",{enumerable:true,get:function get(){return _chrome.ChromeBrand}});Object.defineProperty(exports,"ChromeBreadcrumb",{enumerable:true,get:function get(){return _chrome.ChromeBreadcrumb}});Object.defineProperty(exports,"ChromeHelpExtension",{enumerable:true,get:function get(){return _chrome.ChromeHelpExtension}});Object.defineProperty(exports,"ChromeNavControl",{enumerable:true,get:function get(){return _chrome.ChromeNavControl}});Object.defineProperty(exports,"ChromeNavControls",{enumerable:true,get:function get(){return _chrome.ChromeNavControls}});Object.defineProperty(exports,"ChromeNavLink",{enumerable:true,get:function get(){return _chrome.ChromeNavLink}});Object.defineProperty(exports,"ChromeNavLinks",{enumerable:true,get:function get(){return _chrome.ChromeNavLinks}});Object.defineProperty(exports,"ChromeNavLinkUpdateableFields",{enumerable:true,get:function get(){return _chrome.ChromeNavLinkUpdateableFields}});Object.defineProperty(exports,"ChromeStart",{enumerable:true,get:function get(){return _chrome.ChromeStart}});Object.defineProperty(exports,"ChromeRecentlyAccessed",{enumerable:true,get:function get(){return _chrome.ChromeRecentlyAccessed}});Object.defineProperty(exports,"ChromeRecentlyAccessedHistoryItem",{enumerable:true,get:function get(){return _chrome.ChromeRecentlyAccessedHistoryItem}});Object.defineProperty(exports,"FatalErrorsSetup",{enumerable:true,get:function get(){return _fatal_errors.FatalErrorsSetup}});Object.defineProperty(exports,"FatalErrorInfo",{enumerable:true,get:function get(){return _fatal_errors.FatalErrorInfo}});Object.defineProperty(exports,"HttpSetup",{enumerable:true,get:function get(){return _http.HttpSetup}});Object.defineProperty(exports,"HttpStart",{enumerable:true,get:function get(){return _http.HttpStart}});Object.defineProperty(exports,"HttpServiceBase",{enumerable:true,get:function get(){return _http.HttpServiceBase}});Object.defineProperty(exports,"HttpHeadersInit",{enumerable:true,get:function get(){return _http.HttpHeadersInit}});Object.defineProperty(exports,"HttpRequestInit",{enumerable:true,get:function get(){return _http.HttpRequestInit}});Object.defineProperty(exports,"HttpFetchOptions",{enumerable:true,get:function get(){return _http.HttpFetchOptions}});Object.defineProperty(exports,"HttpFetchQuery",{enumerable:true,get:function get(){return _http.HttpFetchQuery}});Object.defineProperty(exports,"HttpErrorResponse",{enumerable:true,get:function get(){return _http.HttpErrorResponse}});Object.defineProperty(exports,"HttpErrorRequest",{enumerable:true,get:function get(){return _http.HttpErrorRequest}});Object.defineProperty(exports,"HttpInterceptor",{enumerable:true,get:function get(){return _http.HttpInterceptor}});Object.defineProperty(exports,"HttpResponse",{enumerable:true,get:function get(){return _http.HttpResponse}});Object.defineProperty(exports,"HttpHandler",{enumerable:true,get:function get(){return _http.HttpHandler}});Object.defineProperty(exports,"HttpBody",{enumerable:true,get:function get(){return _http.HttpBody}});Object.defineProperty(exports,"I18nStart",{enumerable:true,get:function get(){return _i18n.I18nStart}});Object.defineProperty(exports,"LegacyNavLink",{enumerable:true,get:function get(){return _injected_metadata.LegacyNavLink}});Object.defineProperty(exports,"ErrorToastOptions",{enumerable:true,get:function get(){return _notifications.ErrorToastOptions}});Object.defineProperty(exports,"NotificationsSetup",{enumerable:true,get:function get(){return _notifications.NotificationsSetup}});Object.defineProperty(exports,"NotificationsStart",{enumerable:true,get:function get(){return _notifications.NotificationsStart}});Object.defineProperty(exports,"Toast",{enumerable:true,get:function get(){return _notifications.Toast}});Object.defineProperty(exports,"ToastInput",{enumerable:true,get:function get(){return _notifications.ToastInput}});Object.defineProperty(exports,"ToastsApi",{enumerable:true,get:function get(){return _notifications.ToastsApi}});Object.defineProperty(exports,"OverlayStart",{enumerable:true,get:function get(){return _overlays.OverlayStart}});Object.defineProperty(exports,"OverlayBannerMount",{enumerable:true,get:function get(){return _overlays.OverlayBannerMount}});Object.defineProperty(exports,"OverlayBannerUnmount",{enumerable:true,get:function get(){return _overlays.OverlayBannerUnmount}});Object.defineProperty(exports,"OverlayBannersStart",{enumerable:true,get:function get(){return _overlays.OverlayBannersStart}});Object.defineProperty(exports,"OverlayRef",{enumerable:true,get:function get(){return _overlays.OverlayRef}});Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugins.Plugin}});Object.defineProperty(exports,"PluginInitializer",{enumerable:true,get:function get(){return _plugins.PluginInitializer}});Object.defineProperty(exports,"PluginInitializerContext",{enumerable:true,get:function get(){return _plugins.PluginInitializerContext}});Object.defineProperty(exports,"PluginOpaqueId",{enumerable:true,get:function get(){return _plugins.PluginOpaqueId}});Object.defineProperty(exports,"UiSettingsClient",{enumerable:true,get:function get(){return _ui_settings.UiSettingsClient}});Object.defineProperty(exports,"UiSettingsState",{enumerable:true,get:function get(){return _ui_settings.UiSettingsState}});Object.defineProperty(exports,"UiSettingsClientContract",{enumerable:true,get:function get(){return _ui_settings.UiSettingsClientContract}});Object.defineProperty(exports,"ApplicationSetup",{enumerable:true,get:function get(){return _application.ApplicationSetup}});Object.defineProperty(exports,"Capabilities",{enumerable:true,get:function get(){return _application.Capabilities}});Object.defineProperty(exports,"ApplicationStart",{enumerable:true,get:function get(){return _application.ApplicationStart}});Object.defineProperty(exports,"DocLinksStart",{enumerable:true,get:function get(){return _doc_links.DocLinksStart}});Object.defineProperty(exports,"SavedObjectsStart",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsStart}});Object.defineProperty(exports,"SavedObjectsBatchResponse",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsBatchResponse}});Object.defineProperty(exports,"SavedObjectsBulkCreateObject",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsBulkCreateObject}});Object.defineProperty(exports,"SavedObjectsBulkCreateOptions",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsBulkCreateOptions}});Object.defineProperty(exports,"SavedObjectsCreateOptions",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsCreateOptions}});Object.defineProperty(exports,"SavedObjectsFindResponsePublic",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsFindResponsePublic}});Object.defineProperty(exports,"SavedObjectsUpdateOptions",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsUpdateOptions}});Object.defineProperty(exports,"SavedObject",{enumerable:true,get:function get(){return _saved_objects.SavedObject}});Object.defineProperty(exports,"SavedObjectAttribute",{enumerable:true,get:function get(){return _saved_objects.SavedObjectAttribute}});Object.defineProperty(exports,"SavedObjectAttributes",{enumerable:true,get:function get(){return _saved_objects.SavedObjectAttributes}});Object.defineProperty(exports,"SavedObjectReference",{enumerable:true,get:function get(){return _saved_objects.SavedObjectReference}});Object.defineProperty(exports,"SavedObjectsBaseOptions",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsBaseOptions}});Object.defineProperty(exports,"SavedObjectsFindOptions",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsFindOptions}});Object.defineProperty(exports,"SavedObjectsMigrationVersion",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsMigrationVersion}});Object.defineProperty(exports,"SavedObjectsClientContract",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsClientContract}});Object.defineProperty(exports,"SavedObjectsClient",{enumerable:true,get:function get(){return _saved_objects.SavedObjectsClient}});Object.defineProperty(exports,"SimpleSavedObject",{enumerable:true,get:function get(){return _saved_objects.SimpleSavedObject}});Object.defineProperty(exports,"IContextContainer",{enumerable:true,get:function get(){return _context.IContextContainer}});Object.defineProperty(exports,"IContextProvider",{enumerable:true,get:function get(){return _context.IContextProvider}});Object.defineProperty(exports,"ContextSetup",{enumerable:true,get:function get(){return _context.ContextSetup}});Object.defineProperty(exports,"IContextHandler",{enumerable:true,get:function get(){return _context.IContextHandler}});Object.defineProperty(exports,"CoreContext",{enumerable:true,get:function get(){return _core_system.CoreContext}});Object.defineProperty(exports,"CoreSystem",{enumerable:true,get:function get(){return _core_system.CoreSystem}});Object.defineProperty(exports,"RecursiveReadonly",{enumerable:true,get:function get(){return _utils.RecursiveReadonly}});var _chrome=__webpack_require__(478);var _fatal_errors=__webpack_require__(485);var _http=__webpack_require__(487);var _i18n=__webpack_require__(491);var _injected_metadata=__webpack_require__(492);var _notifications=__webpack_require__(493);var _overlays=__webpack_require__(496);var _plugins=__webpack_require__(499);var _ui_settings=__webpack_require__(503);var _application=__webpack_require__(505);var _doc_links=__webpack_require__(507);var _saved_objects=__webpack_require__(856);var _context=__webpack_require__(512);var _core_system=__webpack_require__(868);var _utils=__webpack_require__(56)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registries=exports.typesRegistry=exports.renderersRegistry=exports.functionsRegistry=void 0;var _new_platform=__webpack_require__(8);var functionsRegistry=_new_platform.npSetup.plugins.data.expressions.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.functions;exports.functionsRegistry=functionsRegistry;var renderersRegistry=_new_platform.npSetup.plugins.data.expressions.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.renderers;exports.renderersRegistry=renderersRegistry;var typesRegistry=_new_platform.npSetup.plugins.data.expressions.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.types;exports.typesRegistry=typesRegistry;var registries={browserFunctions:functionsRegistry,renderers:renderersRegistry,types:typesRegistry};exports.registries=registries},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2238)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={dispatchRenderComplete:true,dispatchRenderStart:true};exports.dispatchRenderComplete=dispatchRenderComplete;exports.dispatchRenderStart=dispatchRenderStart;__webpack_require__(1212);var _render_complete_helper=__webpack_require__(618);Object.keys(_render_complete_helper).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _render_complete_helper[key]}})});var dispatchCustomEvent=function dispatchCustomEvent(el,eventName){el.dispatchEvent(new CustomEvent(eventName,{bubbles:true}))};function dispatchRenderComplete(el){dispatchCustomEvent(el,"renderComplete")}function dispatchRenderStart(el){dispatchCustomEvent(el,"renderStart")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getUpdateStatus=getUpdateStatus;exports.Status=void 0;var _calculate_object_hash=__webpack_require__(608);var Status;exports.Status=Status;(function(Status){Status["AGGS"]="aggs";Status["DATA"]="data";Status["PARAMS"]="params";Status["RESIZE"]="resize";Status["TIME"]="time";Status["UI_STATE"]="uiState"})(Status||(exports.Status=Status={}));function hasHashChanged(valueHash,oldStatus,name){var oldHash=oldStatus[name];return oldHash!==valueHash}function hasSizeChanged(size,oldSize){if(!oldSize){return true}return oldSize.width!==size.width||oldSize.height!==size.height}function getUpdateStatus(){var requiresUpdateStatus=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var obj=arguments.length>1?arguments[1]:undefined;var param=arguments.length>2?arguments[2]:undefined;var status={};if(requiresUpdateStatus.length===0){return status}if(!obj._oldStatus){obj._oldStatus={}}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=requiresUpdateStatus[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var requiredStatus=_step.value;var hash=void 0;switch(requiredStatus){case Status.AGGS:hash=(0,_calculate_object_hash.calculateObjectHash)(param.vis.aggs);status.aggs=hasHashChanged(hash,obj._oldStatus,"aggs");obj._oldStatus.aggs=hash;break;case Status.DATA:hash=(0,_calculate_object_hash.calculateObjectHash)(param.visData);status.data=hasHashChanged(hash,obj._oldStatus,"data");obj._oldStatus.data=hash;break;case Status.PARAMS:hash=(0,_calculate_object_hash.calculateObjectHash)(param.vis.params);status.params=hasHashChanged(hash,obj._oldStatus,"param");obj._oldStatus.param=hash;break;case Status.RESIZE:var width=param.vis.size?param.vis.size[0]:0;var height=param.vis.size?param.vis.size[1]:0;var size={width:width,height:height};status.resize=hasSizeChanged(size,obj._oldStatus.resize);obj._oldStatus.resize=size;break;case Status.TIME:var timeRange=param.vis.filters&&param.vis.filters.timeRange;hash=(0,_calculate_object_hash.calculateObjectHash)(timeRange);status.time=hasHashChanged(hash,obj._oldStatus,"time");obj._oldStatus.time=hash;break;case Status.UI_STATE:hash=(0,_calculate_object_hash.calculateObjectHash)(param.uiState);status.uiState=hasHashChanged(hash,obj._oldStatus,"uiState");obj._oldStatus.uiState=hash;break}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return status}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.colorSchemas=exports.vislibColorMaps=exports.ColorSchemas=void 0;var _i18n=__webpack_require__(2);var _vislibColorMaps;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ColorSchemas;exports.ColorSchemas=ColorSchemas;(function(ColorSchemas){ColorSchemas["Blues"]="Blues";ColorSchemas["Greens"]="Greens";ColorSchemas["Greys"]="Greys";ColorSchemas["Reds"]="Reds";ColorSchemas["YellowToRed"]="Yellow to Red";ColorSchemas["GreenToRed"]="Green to Red"})(ColorSchemas||(exports.ColorSchemas=ColorSchemas={}));var vislibColorMaps=(_vislibColorMaps={},_defineProperty(_vislibColorMaps,ColorSchemas.Blues,{id:ColorSchemas.Blues,label:_i18n.i18n.translate("common.ui.vislib.colormaps.bluesText",{defaultMessage:"Blues"}),value:[[0,[.969,.984,1]],[.002,[.969,.984,1]],[.004,[.966,.982,.999]],[.006,[.966,.982,.999]],[.008,[.962,.98,.998]],[.01,[.962,.98,.998]],[.012,[.959,.978,.997]],[.014,[.959,.978,.997]],[.016,[.956,.976,.996]],[.018,[.956,.976,.996]],[.02,[.953,.974,.995]],[.022,[.953,.974,.995]],[.023,[.95,.973,.994]],[.025,[.95,.973,.994]],[.027,[.947,.971,.993]],[.029,[.947,.971,.993]],[.031,[.944,.969,.992]],[.033,[.944,.969,.992]],[.035,[.941,.967,.991]],[.037,[.941,.967,.991]],[.039,[.938,.965,.99]],[.041,[.938,.965,.99]],[.043,[.935,.963,.989]],[.045,[.935,.963,.989]],[.047,[.932,.961,.988]],[.049,[.932,.961,.988]],[.051,[.929,.959,.987]],[.053,[.929,.959,.987]],[.055,[.926,.957,.986]],[.057,[.926,.957,.986]],[.059,[.922,.955,.985]],[.061,[.922,.955,.985]],[.063,[.919,.953,.984]],[.065,[.919,.953,.984]],[.067,[.916,.951,.983]],[.068,[.916,.951,.983]],[.07,[.913,.949,.982]],[.072,[.913,.949,.982]],[.074,[.91,.947,.981]],[.076,[.91,.947,.981]],[.078,[.907,.945,.98]],[.08,[.907,.945,.98]],[.082,[.904,.943,.979]],[.084,[.904,.943,.979]],[.086,[.901,.941,.978]],[.088,[.901,.941,.978]],[.09,[.898,.939,.977]],[.092,[.898,.939,.977]],[.094,[.895,.937,.976]],[.096,[.895,.937,.976]],[.098,[.892,.935,.975]],[.1,[.892,.935,.975]],[.102,[.889,.933,.974]],[.104,[.889,.933,.974]],[.106,[.886,.931,.973]],[.108,[.886,.931,.973]],[.11,[.883,.929,.972]],[.112,[.883,.929,.972]],[.114,[.879,.927,.971]],[.115,[.879,.927,.971]],[.117,[.876,.925,.97]],[.119,[.876,.925,.97]],[.121,[.873,.923,.969]],[.123,[.873,.923,.969]],[.125,[.87,.921,.969]],[.127,[.87,.921,.969]],[.129,[.867,.919,.968]],[.131,[.867,.919,.968]],[.133,[.864,.917,.967]],[.135,[.864,.917,.967]],[.137,[.861,.915,.966]],[.139,[.861,.915,.966]],[.141,[.858,.913,.965]],[.143,[.858,.913,.965]],[.145,[.855,.911,.964]],[.147,[.855,.911,.964]],[.149,[.853,.91,.963]],[.151,[.853,.91,.963]],[.153,[.85,.908,.962]],[.155,[.85,.908,.962]],[.157,[.847,.906,.961]],[.159,[.847,.906,.961]],[.16,[.844,.904,.96]],[.162,[.844,.904,.96]],[.164,[.841,.902,.959]],[.166,[.841,.902,.959]],[.168,[.838,.9,.958]],[.17,[.838,.9,.958]],[.172,[.835,.898,.957]],[.174,[.835,.898,.957]],[.176,[.832,.896,.956]],[.178,[.832,.896,.956]],[.18,[.829,.894,.955]],[.182,[.829,.894,.955]],[.184,[.826,.892,.954]],[.186,[.826,.892,.954]],[.188,[.823,.89,.953]],[.19,[.823,.89,.953]],[.192,[.82,.888,.952]],[.194,[.82,.888,.952]],[.196,[.817,.886,.951]],[.198,[.817,.886,.951]],[.2,[.814,.884,.95]],[.202,[.814,.884,.95]],[.204,[.811,.882,.949]],[.205,[.811,.882,.949]],[.207,[.808,.88,.948]],[.209,[.808,.88,.948]],[.211,[.805,.878,.947]],[.213,[.805,.878,.947]],[.215,[.802,.876,.946]],[.217,[.802,.876,.946]],[.219,[.799,.874,.945]],[.221,[.799,.874,.945]],[.223,[.796,.872,.944]],[.225,[.796,.872,.944]],[.227,[.793,.87,.943]],[.229,[.793,.87,.943]],[.231,[.79,.868,.942]],[.233,[.79,.868,.942]],[.235,[.788,.866,.941]],[.237,[.788,.866,.941]],[.239,[.785,.864,.94]],[.241,[.785,.864,.94]],[.243,[.782,.862,.939]],[.245,[.782,.862,.939]],[.247,[.779,.86,.938]],[.249,[.779,.86,.938]],[.25,[.775,.858,.937]],[.252,[.775,.858,.937]],[.254,[.77,.856,.935]],[.256,[.77,.856,.935]],[.258,[.765,.854,.933]],[.26,[.765,.854,.933]],[.262,[.76,.852,.932]],[.264,[.76,.852,.932]],[.266,[.756,.85,.93]],[.268,[.756,.85,.93]],[.27,[.751,.848,.928]],[.272,[.751,.848,.928]],[.274,[.746,.846,.926]],[.276,[.746,.846,.926]],[.278,[.741,.844,.925]],[.28,[.741,.844,.925]],[.282,[.736,.842,.923]],[.284,[.736,.842,.923]],[.286,[.731,.839,.921]],[.288,[.731,.839,.921]],[.29,[.726,.837,.92]],[.292,[.726,.837,.92]],[.294,[.721,.835,.918]],[.295,[.721,.835,.918]],[.297,[.716,.833,.916]],[.299,[.716,.833,.916]],[.301,[.711,.831,.914]],[.303,[.711,.831,.914]],[.305,[.706,.829,.913]],[.307,[.706,.829,.913]],[.309,[.701,.827,.911]],[.311,[.701,.827,.911]],[.313,[.697,.825,.909]],[.315,[.697,.825,.909]],[.317,[.692,.823,.908]],[.319,[.692,.823,.908]],[.321,[.687,.821,.906]],[.323,[.687,.821,.906]],[.325,[.682,.819,.904]],[.327,[.682,.819,.904]],[.329,[.677,.816,.902]],[.331,[.677,.816,.902]],[.333,[.672,.814,.901]],[.335,[.672,.814,.901]],[.337,[.667,.812,.899]],[.339,[.667,.812,.899]],[.341,[.662,.81,.897]],[.342,[.662,.81,.897]],[.344,[.657,.808,.895]],[.346,[.657,.808,.895]],[.348,[.652,.806,.894]],[.35,[.652,.806,.894]],[.352,[.647,.804,.892]],[.354,[.647,.804,.892]],[.356,[.642,.802,.89]],[.358,[.642,.802,.89]],[.36,[.637,.8,.889]],[.362,[.637,.8,.889]],[.364,[.633,.798,.887]],[.366,[.633,.798,.887]],[.368,[.628,.796,.885]],[.37,[.628,.796,.885]],[.372,[.623,.793,.883]],[.374,[.623,.793,.883]],[.376,[.617,.791,.882]],[.378,[.617,.791,.882]],[.38,[.611,.787,.88]],[.382,[.611,.787,.88]],[.384,[.605,.784,.879]],[.386,[.605,.784,.879]],[.387,[.598,.781,.878]],[.389,[.598,.781,.878]],[.391,[.592,.777,.876]],[.393,[.592,.777,.876]],[.395,[.586,.774,.875]],[.397,[.586,.774,.875]],[.399,[.58,.77,.874]],[.401,[.58,.77,.874]],[.403,[.573,.767,.872]],[.405,[.573,.767,.872]],[.407,[.567,.763,.871]],[.409,[.567,.763,.871]],[.411,[.561,.76,.87]],[.413,[.561,.76,.87]],[.415,[.555,.756,.868]],[.417,[.555,.756,.868]],[.419,[.548,.753,.867]],[.421,[.548,.753,.867]],[.423,[.542,.75,.866]],[.425,[.542,.75,.866]],[.427,[.536,.746,.864]],[.429,[.536,.746,.864]],[.431,[.529,.743,.863]],[.432,[.529,.743,.863]],[.434,[.523,.739,.862]],[.436,[.523,.739,.862]],[.438,[.517,.736,.86]],[.44,[.517,.736,.86]],[.442,[.511,.732,.859]],[.444,[.511,.732,.859]],[.446,[.504,.729,.857]],[.448,[.504,.729,.857]],[.45,[.498,.725,.856]],[.452,[.498,.725,.856]],[.454,[.492,.722,.855]],[.456,[.492,.722,.855]],[.458,[.485,.719,.853]],[.46,[.485,.719,.853]],[.462,[.479,.715,.852]],[.464,[.479,.715,.852]],[.466,[.473,.712,.851]],[.468,[.473,.712,.851]],[.47,[.467,.708,.849]],[.472,[.467,.708,.849]],[.474,[.46,.705,.848]],[.476,[.46,.705,.848]],[.477,[.454,.701,.847]],[.479,[.454,.701,.847]],[.481,[.448,.698,.845]],[.483,[.448,.698,.845]],[.485,[.442,.694,.844]],[.487,[.442,.694,.844]],[.489,[.435,.691,.843]],[.491,[.435,.691,.843]],[.493,[.429,.688,.841]],[.495,[.429,.688,.841]],[.497,[.423,.684,.84]],[.499,[.423,.684,.84]],[.501,[.417,.681,.838]],[.503,[.417,.681,.838]],[.505,[.412,.677,.836]],[.507,[.412,.677,.836]],[.509,[.407,.674,.834]],[.511,[.407,.674,.834]],[.513,[.402,.67,.832]],[.515,[.402,.67,.832]],[.517,[.397,.667,.83]],[.519,[.397,.667,.83]],[.521,[.392,.663,.828]],[.523,[.392,.663,.828]],[.524,[.387,.66,.826]],[.526,[.387,.66,.826]],[.528,[.382,.657,.824]],[.53,[.382,.657,.824]],[.532,[.377,.653,.822]],[.534,[.377,.653,.822]],[.536,[.372,.65,.821]],[.538,[.372,.65,.821]],[.54,[.367,.646,.819]],[.542,[.367,.646,.819]],[.544,[.362,.643,.817]],[.546,[.362,.643,.817]],[.548,[.357,.639,.815]],[.55,[.357,.639,.815]],[.552,[.352,.636,.813]],[.554,[.352,.636,.813]],[.556,[.346,.632,.811]],[.558,[.346,.632,.811]],[.56,[.341,.629,.809]],[.562,[.341,.629,.809]],[.564,[.336,.626,.807]],[.566,[.336,.626,.807]],[.568,[.331,.622,.805]],[.569,[.331,.622,.805]],[.571,[.326,.619,.803]],[.573,[.326,.619,.803]],[.575,[.321,.615,.801]],[.577,[.321,.615,.801]],[.579,[.316,.612,.799]],[.581,[.316,.612,.799]],[.583,[.311,.608,.797]],[.585,[.311,.608,.797]],[.587,[.306,.605,.795]],[.589,[.306,.605,.795]],[.591,[.301,.601,.793]],[.593,[.301,.601,.793]],[.595,[.296,.598,.791]],[.597,[.296,.598,.791]],[.599,[.291,.595,.789]],[.601,[.291,.595,.789]],[.603,[.286,.591,.787]],[.605,[.286,.591,.787]],[.607,[.281,.588,.785]],[.609,[.281,.588,.785]],[.611,[.276,.584,.783]],[.613,[.276,.584,.783]],[.614,[.271,.581,.781]],[.616,[.271,.581,.781]],[.618,[.266,.577,.779]],[.62,[.266,.577,.779]],[.622,[.261,.574,.777]],[.624,[.261,.574,.777]],[.626,[.256,.57,.775]],[.628,[.256,.57,.775]],[.63,[.252,.566,.773]],[.632,[.252,.566,.773]],[.634,[.248,.562,.771]],[.636,[.248,.562,.771]],[.638,[.244,.558,.769]],[.64,[.244,.558,.769]],[.642,[.24,.554,.767]],[.644,[.24,.554,.767]],[.646,[.236,.55,.765]],[.648,[.236,.55,.765]],[.65,[.232,.546,.763]],[.652,[.232,.546,.763]],[.654,[.228,.542,.761]],[.656,[.228,.542,.761]],[.658,[.224,.538,.758]],[.659,[.224,.538,.758]],[.661,[.22,.533,.756]],[.663,[.22,.533,.756]],[.665,[.216,.529,.754]],[.667,[.216,.529,.754]],[.669,[.212,.525,.752]],[.671,[.212,.525,.752]],[.673,[.208,.521,.75]],[.675,[.208,.521,.75]],[.677,[.204,.517,.748]],[.679,[.204,.517,.748]],[.681,[.199,.513,.746]],[.683,[.199,.513,.746]],[.685,[.195,.509,.744]],[.687,[.195,.509,.744]],[.689,[.191,.505,.742]],[.691,[.191,.505,.742]],[.693,[.187,.501,.74]],[.695,[.187,.501,.74]],[.697,[.183,.497,.738]],[.699,[.183,.497,.738]],[.701,[.179,.493,.735]],[.703,[.179,.493,.735]],[.705,[.175,.489,.733]],[.706,[.175,.489,.733]],[.708,[.171,.485,.731]],[.71,[.171,.485,.731]],[.712,[.167,.481,.729]],[.714,[.167,.481,.729]],[.716,[.163,.477,.727]],[.718,[.163,.477,.727]],[.72,[.159,.473,.725]],[.722,[.159,.473,.725]],[.724,[.155,.469,.723]],[.726,[.155,.469,.723]],[.728,[.151,.464,.721]],[.73,[.151,.464,.721]],[.732,[.147,.46,.719]],[.734,[.147,.46,.719]],[.736,[.143,.456,.717]],[.738,[.143,.456,.717]],[.74,[.139,.452,.715]],[.742,[.139,.452,.715]],[.744,[.134,.448,.712]],[.746,[.134,.448,.712]],[.748,[.13,.444,.71]],[.75,[.13,.444,.71]],[.751,[.127,.44,.707]],[.753,[.127,.44,.707]],[.755,[.124,.436,.704]],[.757,[.124,.436,.704]],[.759,[.121,.432,.701]],[.761,[.121,.432,.701]],[.763,[.118,.428,.698]],[.765,[.118,.428,.698]],[.767,[.115,.424,.695]],[.769,[.115,.424,.695]],[.771,[.112,.42,.692]],[.773,[.112,.42,.692]],[.775,[.109,.417,.689]],[.777,[.109,.417,.689]],[.779,[.106,.413,.686]],[.781,[.106,.413,.686]],[.783,[.102,.409,.683]],[.785,[.102,.409,.683]],[.787,[.099,.405,.68]],[.789,[.099,.405,.68]],[.791,[.096,.401,.677]],[.793,[.096,.401,.677]],[.795,[.093,.397,.674]],[.796,[.093,.397,.674]],[.798,[.09,.393,.671]],[.8,[.09,.393,.671]],[.802,[.087,.389,.668]],[.804,[.087,.389,.668]],[.806,[.084,.385,.664]],[.808,[.084,.385,.664]],[.81,[.081,.381,.661]],[.812,[.081,.381,.661]],[.814,[.078,.377,.658]],[.816,[.078,.377,.658]],[.818,[.075,.373,.655]],[.82,[.075,.373,.655]],[.822,[.072,.369,.652]],[.824,[.072,.369,.652]],[.826,[.069,.365,.649]],[.828,[.069,.365,.649]],[.83,[.066,.361,.646]],[.832,[.066,.361,.646]],[.834,[.063,.358,.643]],[.836,[.063,.358,.643]],[.838,[.059,.354,.64]],[.84,[.059,.354,.64]],[.841,[.056,.35,.637]],[.843,[.056,.35,.637]],[.845,[.053,.346,.634]],[.847,[.053,.346,.634]],[.849,[.05,.342,.631]],[.851,[.05,.342,.631]],[.853,[.047,.338,.628]],[.855,[.047,.338,.628]],[.857,[.044,.334,.624]],[.859,[.044,.334,.624]],[.861,[.041,.33,.621]],[.863,[.041,.33,.621]],[.865,[.038,.326,.618]],[.867,[.038,.326,.618]],[.869,[.035,.322,.615]],[.871,[.035,.322,.615]],[.873,[.032,.318,.612]],[.875,[.032,.318,.612]],[.877,[.031,.314,.606]],[.879,[.031,.314,.606]],[.881,[.031,.31,.6]],[.883,[.031,.31,.6]],[.885,[.031,.306,.594]],[.886,[.031,.306,.594]],[.888,[.031,.302,.588]],[.89,[.031,.302,.588]],[.892,[.031,.298,.582]],[.894,[.031,.298,.582]],[.896,[.031,.294,.576]],[.898,[.031,.294,.576]],[.9,[.031,.29,.57]],[.902,[.031,.29,.57]],[.904,[.031,.286,.564]],[.906,[.031,.286,.564]],[.908,[.031,.282,.558]],[.91,[.031,.282,.558]],[.912,[.031,.278,.552]],[.914,[.031,.278,.552]],[.916,[.031,.273,.546]],[.918,[.031,.273,.546]],[.92,[.031,.269,.54]],[.922,[.031,.269,.54]],[.924,[.031,.265,.534]],[.926,[.031,.265,.534]],[.928,[.031,.261,.528]],[.93,[.031,.261,.528]],[.932,[.031,.257,.522]],[.933,[.031,.257,.522]],[.935,[.031,.253,.516]],[.937,[.031,.253,.516]],[.939,[.031,.249,.51]],[.941,[.031,.249,.51]],[.943,[.031,.245,.504]],[.945,[.031,.245,.504]],[.947,[.031,.241,.498]],[.949,[.031,.241,.498]],[.951,[.031,.237,.492]],[.953,[.031,.237,.492]],[.955,[.031,.233,.486]],[.957,[.031,.233,.486]],[.959,[.031,.229,.48]],[.961,[.031,.229,.48]],[.963,[.031,.225,.474]],[.965,[.031,.225,.474]],[.967,[.031,.221,.468]],[.969,[.031,.221,.468]],[.971,[.031,.217,.462]],[.973,[.031,.217,.462]],[.975,[.031,.213,.456]],[.977,[.031,.213,.456]],[.978,[.031,.209,.45]],[.98,[.031,.209,.45]],[.982,[.031,.204,.444]],[.984,[.031,.204,.444]],[.986,[.031,.2,.438]],[.988,[.031,.2,.438]],[.99,[.031,.196,.432]],[.992,[.031,.196,.432]],[.994,[.031,.192,.426]],[.996,[.031,.192,.426]],[.998,[.031,.188,.42]],[1,[.031,.188,.42]]]}),_defineProperty(_vislibColorMaps,ColorSchemas.Greens,{id:ColorSchemas.Greens,label:_i18n.i18n.translate("common.ui.vislib.colormaps.greensText",{defaultMessage:"Greens"}),value:[[0,[.969,.988,.961]],[.002,[.969,.988,.961]],[.004,[.966,.987,.958]],[.006,[.966,.987,.958]],[.008,[.964,.987,.956]],[.01,[.964,.987,.956]],[.012,[.962,.986,.953]],[.014,[.962,.986,.953]],[.016,[.96,.985,.95]],[.018,[.96,.985,.95]],[.02,[.958,.984,.948]],[.022,[.958,.984,.948]],[.023,[.955,.983,.945]],[.025,[.955,.983,.945]],[.027,[.953,.982,.943]],[.029,[.953,.982,.943]],[.031,[.951,.981,.94]],[.033,[.951,.981,.94]],[.035,[.949,.98,.938]],[.037,[.949,.98,.938]],[.039,[.946,.98,.935]],[.041,[.946,.98,.935]],[.043,[.944,.979,.932]],[.045,[.944,.979,.932]],[.047,[.942,.978,.93]],[.049,[.942,.978,.93]],[.051,[.94,.977,.927]],[.053,[.94,.977,.927]],[.055,[.938,.976,.925]],[.057,[.938,.976,.925]],[.059,[.935,.975,.922]],[.061,[.935,.975,.922]],[.063,[.933,.974,.919]],[.065,[.933,.974,.919]],[.067,[.931,.974,.917]],[.068,[.931,.974,.917]],[.07,[.929,.973,.914]],[.072,[.929,.973,.914]],[.074,[.927,.972,.912]],[.076,[.927,.972,.912]],[.078,[.924,.971,.909]],[.08,[.924,.971,.909]],[.082,[.922,.97,.907]],[.084,[.922,.97,.907]],[.086,[.92,.969,.904]],[.088,[.92,.969,.904]],[.09,[.918,.968,.901]],[.092,[.918,.968,.901]],[.094,[.915,.968,.899]],[.096,[.915,.968,.899]],[.098,[.913,.967,.896]],[.1,[.913,.967,.896]],[.102,[.911,.966,.894]],[.104,[.911,.966,.894]],[.106,[.909,.965,.891]],[.108,[.909,.965,.891]],[.11,[.907,.964,.888]],[.112,[.907,.964,.888]],[.114,[.904,.963,.886]],[.115,[.904,.963,.886]],[.117,[.902,.962,.883]],[.119,[.902,.962,.883]],[.121,[.9,.962,.881]],[.123,[.9,.962,.881]],[.125,[.898,.961,.878]],[.127,[.898,.961,.878]],[.129,[.894,.959,.874]],[.131,[.894,.959,.874]],[.133,[.89,.958,.87]],[.135,[.89,.958,.87]],[.137,[.887,.956,.866]],[.139,[.887,.956,.866]],[.141,[.883,.955,.862]],[.143,[.883,.955,.862]],[.145,[.879,.953,.858]],[.147,[.879,.953,.858]],[.149,[.875,.952,.854]],[.151,[.875,.952,.854]],[.153,[.872,.95,.85]],[.155,[.872,.95,.85]],[.157,[.868,.949,.846]],[.159,[.868,.949,.846]],[.16,[.864,.947,.843]],[.162,[.864,.947,.843]],[.164,[.861,.946,.839]],[.166,[.861,.946,.839]],[.168,[.857,.944,.835]],[.17,[.857,.944,.835]],[.172,[.853,.943,.831]],[.174,[.853,.943,.831]],[.176,[.85,.941,.827]],[.178,[.85,.941,.827]],[.18,[.846,.94,.823]],[.182,[.846,.94,.823]],[.184,[.842,.938,.819]],[.186,[.842,.938,.819]],[.188,[.839,.937,.815]],[.19,[.839,.937,.815]],[.192,[.835,.936,.811]],[.194,[.835,.936,.811]],[.196,[.831,.934,.807]],[.198,[.831,.934,.807]],[.2,[.827,.933,.803]],[.202,[.827,.933,.803]],[.204,[.824,.931,.799]],[.205,[.824,.931,.799]],[.207,[.82,.93,.795]],[.209,[.82,.93,.795]],[.211,[.816,.928,.791]],[.213,[.816,.928,.791]],[.215,[.813,.927,.787]],[.217,[.813,.927,.787]],[.219,[.809,.925,.783]],[.221,[.809,.925,.783]],[.223,[.805,.924,.78]],[.225,[.805,.924,.78]],[.227,[.802,.922,.776]],[.229,[.802,.922,.776]],[.231,[.798,.921,.772]],[.233,[.798,.921,.772]],[.235,[.794,.919,.768]],[.237,[.794,.919,.768]],[.239,[.791,.918,.764]],[.241,[.791,.918,.764]],[.243,[.787,.916,.76]],[.245,[.787,.916,.76]],[.247,[.783,.915,.756]],[.249,[.783,.915,.756]],[.25,[.779,.913,.752]],[.252,[.779,.913,.752]],[.254,[.775,.911,.747]],[.256,[.775,.911,.747]],[.258,[.77,.909,.743]],[.26,[.77,.909,.743]],[.262,[.765,.907,.738]],[.264,[.765,.907,.738]],[.266,[.761,.905,.734]],[.268,[.761,.905,.734]],[.27,[.756,.903,.729]],[.272,[.756,.903,.729]],[.274,[.751,.901,.724]],[.276,[.751,.901,.724]],[.278,[.746,.899,.72]],[.28,[.746,.899,.72]],[.282,[.742,.897,.715]],[.284,[.742,.897,.715]],[.286,[.737,.896,.711]],[.288,[.737,.896,.711]],[.29,[.732,.894,.706]],[.292,[.732,.894,.706]],[.294,[.728,.892,.702]],[.295,[.728,.892,.702]],[.297,[.723,.89,.697]],[.299,[.723,.89,.697]],[.301,[.718,.888,.693]],[.303,[.718,.888,.693]],[.305,[.714,.886,.688]],[.307,[.714,.886,.688]],[.309,[.709,.884,.684]],[.311,[.709,.884,.684]],[.313,[.704,.882,.679]],[.315,[.704,.882,.679]],[.317,[.7,.88,.674]],[.319,[.7,.88,.674]],[.321,[.695,.878,.67]],[.323,[.695,.878,.67]],[.325,[.69,.876,.665]],[.327,[.69,.876,.665]],[.329,[.686,.874,.661]],[.331,[.686,.874,.661]],[.333,[.681,.872,.656]],[.335,[.681,.872,.656]],[.337,[.676,.87,.652]],[.339,[.676,.87,.652]],[.341,[.672,.868,.647]],[.342,[.672,.868,.647]],[.344,[.667,.866,.643]],[.346,[.667,.866,.643]],[.348,[.662,.864,.638]],[.35,[.662,.864,.638]],[.352,[.658,.862,.633]],[.354,[.658,.862,.633]],[.356,[.653,.86,.629]],[.358,[.653,.86,.629]],[.36,[.648,.858,.624]],[.362,[.648,.858,.624]],[.364,[.644,.856,.62]],[.366,[.644,.856,.62]],[.368,[.639,.854,.615]],[.37,[.639,.854,.615]],[.372,[.634,.852,.611]],[.374,[.634,.852,.611]],[.376,[.629,.85,.606]],[.378,[.629,.85,.606]],[.38,[.624,.847,.602]],[.382,[.624,.847,.602]],[.384,[.618,.845,.597]],[.386,[.618,.845,.597]],[.387,[.613,.842,.592]],[.389,[.613,.842,.592]],[.391,[.607,.84,.588]],[.393,[.607,.84,.588]],[.395,[.602,.837,.583]],[.397,[.602,.837,.583]],[.399,[.596,.835,.579]],[.401,[.596,.835,.579]],[.403,[.591,.832,.574]],[.405,[.591,.832,.574]],[.407,[.585,.829,.57]],[.409,[.585,.829,.57]],[.411,[.579,.827,.565]],[.413,[.579,.827,.565]],[.415,[.574,.824,.561]],[.417,[.574,.824,.561]],[.419,[.568,.822,.556]],[.421,[.568,.822,.556]],[.423,[.563,.819,.552]],[.425,[.563,.819,.552]],[.427,[.557,.816,.547]],[.429,[.557,.816,.547]],[.431,[.552,.814,.542]],[.432,[.552,.814,.542]],[.434,[.546,.811,.538]],[.436,[.546,.811,.538]],[.438,[.541,.809,.533]],[.44,[.541,.809,.533]],[.442,[.535,.806,.529]],[.444,[.535,.806,.529]],[.446,[.53,.804,.524]],[.448,[.53,.804,.524]],[.45,[.524,.801,.52]],[.452,[.524,.801,.52]],[.454,[.519,.798,.515]],[.456,[.519,.798,.515]],[.458,[.513,.796,.511]],[.46,[.513,.796,.511]],[.462,[.507,.793,.506]],[.464,[.507,.793,.506]],[.466,[.502,.791,.501]],[.468,[.502,.791,.501]],[.47,[.496,.788,.497]],[.472,[.496,.788,.497]],[.474,[.491,.785,.492]],[.476,[.491,.785,.492]],[.477,[.485,.783,.488]],[.479,[.485,.783,.488]],[.481,[.48,.78,.483]],[.483,[.48,.78,.483]],[.485,[.474,.778,.479]],[.487,[.474,.778,.479]],[.489,[.469,.775,.474]],[.491,[.469,.775,.474]],[.493,[.463,.773,.47]],[.495,[.463,.773,.47]],[.497,[.458,.77,.465]],[.499,[.458,.77,.465]],[.501,[.452,.767,.461]],[.503,[.452,.767,.461]],[.505,[.445,.764,.458]],[.507,[.445,.764,.458]],[.509,[.439,.761,.455]],[.511,[.439,.761,.455]],[.513,[.433,.758,.452]],[.515,[.433,.758,.452]],[.517,[.427,.755,.449]],[.519,[.427,.755,.449]],[.521,[.42,.752,.446]],[.523,[.42,.752,.446]],[.524,[.414,.749,.443]],[.526,[.414,.749,.443]],[.528,[.408,.746,.44]],[.53,[.408,.746,.44]],[.532,[.402,.742,.437]],[.534,[.402,.742,.437]],[.536,[.395,.739,.434]],[.538,[.395,.739,.434]],[.54,[.389,.736,.43]],[.542,[.389,.736,.43]],[.544,[.383,.733,.427]],[.546,[.383,.733,.427]],[.548,[.376,.73,.424]],[.55,[.376,.73,.424]],[.552,[.37,.727,.421]],[.554,[.37,.727,.421]],[.556,[.364,.724,.418]],[.558,[.364,.724,.418]],[.56,[.358,.721,.415]],[.562,[.358,.721,.415]],[.564,[.351,.718,.412]],[.566,[.351,.718,.412]],[.568,[.345,.715,.409]],[.569,[.345,.715,.409]],[.571,[.339,.712,.406]],[.573,[.339,.712,.406]],[.575,[.333,.709,.403]],[.577,[.333,.709,.403]],[.579,[.326,.706,.4]],[.581,[.326,.706,.4]],[.583,[.32,.702,.397]],[.585,[.32,.702,.397]],[.587,[.314,.699,.394]],[.589,[.314,.699,.394]],[.591,[.307,.696,.39]],[.593,[.307,.696,.39]],[.595,[.301,.693,.387]],[.597,[.301,.693,.387]],[.599,[.295,.69,.384]],[.601,[.295,.69,.384]],[.603,[.289,.687,.381]],[.605,[.289,.687,.381]],[.607,[.282,.684,.378]],[.609,[.282,.684,.378]],[.611,[.276,.681,.375]],[.613,[.276,.681,.375]],[.614,[.27,.678,.372]],[.616,[.27,.678,.372]],[.618,[.264,.675,.369]],[.62,[.264,.675,.369]],[.622,[.257,.672,.366]],[.624,[.257,.672,.366]],[.626,[.253,.668,.363]],[.628,[.253,.668,.363]],[.63,[.249,.664,.36]],[.632,[.249,.664,.36]],[.634,[.245,.66,.357]],[.636,[.245,.66,.357]],[.638,[.242,.656,.354]],[.64,[.242,.656,.354]],[.642,[.238,.652,.351]],[.644,[.238,.652,.351]],[.646,[.234,.648,.348]],[.648,[.234,.648,.348]],[.65,[.23,.645,.345]],[.652,[.23,.645,.345]],[.654,[.227,.641,.342]],[.656,[.227,.641,.342]],[.658,[.223,.637,.339]],[.659,[.223,.637,.339]],[.661,[.219,.633,.336]],[.663,[.219,.633,.336]],[.665,[.216,.629,.333]],[.667,[.216,.629,.333]],[.669,[.212,.625,.33]],[.671,[.212,.625,.33]],[.673,[.208,.621,.327]],[.675,[.208,.621,.327]],[.677,[.205,.617,.324]],[.679,[.205,.617,.324]],[.681,[.201,.613,.322]],[.683,[.201,.613,.322]],[.685,[.197,.609,.319]],[.687,[.197,.609,.319]],[.689,[.194,.605,.316]],[.691,[.194,.605,.316]],[.693,[.19,.601,.313]],[.695,[.19,.601,.313]],[.697,[.186,.597,.31]],[.699,[.186,.597,.31]],[.701,[.182,.593,.307]],[.703,[.182,.593,.307]],[.705,[.179,.589,.304]],[.706,[.179,.589,.304]],[.708,[.175,.585,.301]],[.71,[.175,.585,.301]],[.712,[.171,.582,.298]],[.714,[.171,.582,.298]],[.716,[.168,.578,.295]],[.718,[.168,.578,.295]],[.72,[.164,.574,.292]],[.722,[.164,.574,.292]],[.724,[.16,.57,.289]],[.726,[.16,.57,.289]],[.728,[.157,.566,.286]],[.73,[.157,.566,.286]],[.732,[.153,.562,.283]],[.734,[.153,.562,.283]],[.736,[.149,.558,.28]],[.738,[.149,.558,.28]],[.74,[.146,.554,.277]],[.742,[.146,.554,.277]],[.744,[.142,.55,.274]],[.746,[.142,.55,.274]],[.748,[.138,.546,.271]],[.75,[.138,.546,.271]],[.751,[.134,.542,.268]],[.753,[.134,.542,.268]],[.755,[.13,.539,.265]],[.757,[.13,.539,.265]],[.759,[.125,.535,.262]],[.761,[.125,.535,.262]],[.763,[.121,.531,.259]],[.765,[.121,.531,.259]],[.767,[.117,.528,.256]],[.769,[.117,.528,.256]],[.771,[.112,.524,.253]],[.773,[.112,.524,.253]],[.775,[.108,.52,.25]],[.777,[.108,.52,.25]],[.779,[.104,.516,.247]],[.781,[.104,.516,.247]],[.783,[.1,.513,.244]],[.785,[.1,.513,.244]],[.787,[.095,.509,.241]],[.789,[.095,.509,.241]],[.791,[.091,.505,.238]],[.793,[.091,.505,.238]],[.795,[.087,.502,.234]],[.796,[.087,.502,.234]],[.798,[.082,.498,.231]],[.8,[.082,.498,.231]],[.802,[.078,.494,.228]],[.804,[.078,.494,.228]],[.806,[.074,.491,.225]],[.808,[.074,.491,.225]],[.81,[.069,.487,.222]],[.812,[.069,.487,.222]],[.814,[.065,.483,.219]],[.816,[.065,.483,.219]],[.818,[.061,.48,.216]],[.82,[.061,.48,.216]],[.822,[.057,.476,.213]],[.824,[.057,.476,.213]],[.826,[.052,.472,.21]],[.828,[.052,.472,.21]],[.83,[.048,.469,.207]],[.832,[.048,.469,.207]],[.834,[.044,.465,.204]],[.836,[.044,.465,.204]],[.838,[.039,.461,.201]],[.84,[.039,.461,.201]],[.841,[.035,.457,.198]],[.843,[.035,.457,.198]],[.845,[.031,.454,.194]],[.847,[.031,.454,.194]],[.849,[.026,.45,.191]],[.851,[.026,.45,.191]],[.853,[.022,.446,.188]],[.855,[.022,.446,.188]],[.857,[.018,.443,.185]],[.859,[.018,.443,.185]],[.861,[.013,.439,.182]],[.863,[.013,.439,.182]],[.865,[.009,.435,.179]],[.867,[.009,.435,.179]],[.869,[.005,.432,.176]],[.871,[.005,.432,.176]],[.873,[.001,.428,.173]],[.875,[.001,.428,.173]],[.877,[0,.423,.171]],[.879,[0,.423,.171]],[.881,[0,.418,.169]],[.883,[0,.418,.169]],[.885,[0,.413,.167]],[.886,[0,.413,.167]],[.888,[0,.408,.164]],[.89,[0,.408,.164]],[.892,[0,.403,.162]],[.894,[0,.403,.162]],[.896,[0,.398,.16]],[.898,[0,.398,.16]],[.9,[0,.393,.158]],[.902,[0,.393,.158]],[.904,[0,.388,.156]],[.906,[0,.388,.156]],[.908,[0,.383,.154]],[.91,[0,.383,.154]],[.912,[0,.378,.152]],[.914,[0,.378,.152]],[.916,[0,.373,.15]],[.918,[0,.373,.15]],[.92,[0,.368,.148]],[.922,[0,.368,.148]],[.924,[0,.363,.146]],[.926,[0,.363,.146]],[.928,[0,.357,.144]],[.93,[0,.357,.144]],[.932,[0,.352,.141]],[.933,[0,.352,.141]],[.935,[0,.347,.139]],[.937,[0,.347,.139]],[.939,[0,.342,.137]],[.941,[0,.342,.137]],[.943,[0,.337,.135]],[.945,[0,.337,.135]],[.947,[0,.332,.133]],[.949,[0,.332,.133]],[.951,[0,.327,.131]],[.953,[0,.327,.131]],[.955,[0,.322,.129]],[.957,[0,.322,.129]],[.959,[0,.317,.127]],[.961,[0,.317,.127]],[.963,[0,.312,.125]],[.965,[0,.312,.125]],[.967,[0,.307,.123]],[.969,[0,.307,.123]],[.971,[0,.302,.121]],[.973,[0,.302,.121]],[.975,[0,.297,.118]],[.977,[0,.297,.118]],[.978,[0,.292,.116]],[.98,[0,.292,.116]],[.982,[0,.287,.114]],[.984,[0,.287,.114]],[.986,[0,.282,.112]],[.988,[0,.282,.112]],[.99,[0,.277,.11]],[.992,[0,.277,.11]],[.994,[0,.272,.108]],[.996,[0,.272,.108]],[.998,[0,.267,.106]],[1,[0,.267,.106]]]}),_defineProperty(_vislibColorMaps,ColorSchemas.Greys,{id:ColorSchemas.Greys,label:_i18n.i18n.translate("common.ui.vislib.colormaps.greysText",{defaultMessage:"Greys"}),value:[[0,[1,1,1]],[.002,[1,1,1]],[.004,[.998,.998,.998]],[.006,[.998,.998,.998]],[.008,[.996,.996,.996]],[.01,[.996,.996,.996]],[.012,[.994,.994,.994]],[.014,[.994,.994,.994]],[.016,[.993,.993,.993]],[.018,[.993,.993,.993]],[.02,[.991,.991,.991]],[.022,[.991,.991,.991]],[.023,[.989,.989,.989]],[.025,[.989,.989,.989]],[.027,[.987,.987,.987]],[.029,[.987,.987,.987]],[.031,[.985,.985,.985]],[.033,[.985,.985,.985]],[.035,[.983,.983,.983]],[.037,[.983,.983,.983]],[.039,[.982,.982,.982]],[.041,[.982,.982,.982]],[.043,[.98,.98,.98]],[.045,[.98,.98,.98]],[.047,[.978,.978,.978]],[.049,[.978,.978,.978]],[.051,[.976,.976,.976]],[.053,[.976,.976,.976]],[.055,[.974,.974,.974]],[.057,[.974,.974,.974]],[.059,[.972,.972,.972]],[.061,[.972,.972,.972]],[.063,[.97,.97,.97]],[.065,[.97,.97,.97]],[.067,[.969,.969,.969]],[.068,[.969,.969,.969]],[.07,[.967,.967,.967]],[.072,[.967,.967,.967]],[.074,[.965,.965,.965]],[.076,[.965,.965,.965]],[.078,[.963,.963,.963]],[.08,[.963,.963,.963]],[.082,[.961,.961,.961]],[.084,[.961,.961,.961]],[.086,[.959,.959,.959]],[.088,[.959,.959,.959]],[.09,[.958,.958,.958]],[.092,[.958,.958,.958]],[.094,[.956,.956,.956]],[.096,[.956,.956,.956]],[.098,[.954,.954,.954]],[.1,[.954,.954,.954]],[.102,[.952,.952,.952]],[.104,[.952,.952,.952]],[.106,[.95,.95,.95]],[.108,[.95,.95,.95]],[.11,[.948,.948,.948]],[.112,[.948,.948,.948]],[.114,[.946,.946,.946]],[.115,[.946,.946,.946]],[.117,[.945,.945,.945]],[.119,[.945,.945,.945]],[.121,[.943,.943,.943]],[.123,[.943,.943,.943]],[.125,[.941,.941,.941]],[.127,[.941,.941,.941]],[.129,[.938,.938,.938]],[.131,[.938,.938,.938]],[.133,[.935,.935,.935]],[.135,[.935,.935,.935]],[.137,[.932,.932,.932]],[.139,[.932,.932,.932]],[.141,[.93,.93,.93]],[.143,[.93,.93,.93]],[.145,[.927,.927,.927]],[.147,[.927,.927,.927]],[.149,[.924,.924,.924]],[.151,[.924,.924,.924]],[.153,[.921,.921,.921]],[.155,[.921,.921,.921]],[.157,[.918,.918,.918]],[.159,[.918,.918,.918]],[.16,[.915,.915,.915]],[.162,[.915,.915,.915]],[.164,[.913,.913,.913]],[.166,[.913,.913,.913]],[.168,[.91,.91,.91]],[.17,[.91,.91,.91]],[.172,[.907,.907,.907]],[.174,[.907,.907,.907]],[.176,[.904,.904,.904]],[.178,[.904,.904,.904]],[.18,[.901,.901,.901]],[.182,[.901,.901,.901]],[.184,[.898,.898,.898]],[.186,[.898,.898,.898]],[.188,[.896,.896,.896]],[.19,[.896,.896,.896]],[.192,[.893,.893,.893]],[.194,[.893,.893,.893]],[.196,[.89,.89,.89]],[.198,[.89,.89,.89]],[.2,[.887,.887,.887]],[.202,[.887,.887,.887]],[.204,[.884,.884,.884]],[.205,[.884,.884,.884]],[.207,[.881,.881,.881]],[.209,[.881,.881,.881]],[.211,[.879,.879,.879]],[.213,[.879,.879,.879]],[.215,[.876,.876,.876]],[.217,[.876,.876,.876]],[.219,[.873,.873,.873]],[.221,[.873,.873,.873]],[.223,[.87,.87,.87]],[.225,[.87,.87,.87]],[.227,[.867,.867,.867]],[.229,[.867,.867,.867]],[.231,[.864,.864,.864]],[.233,[.864,.864,.864]],[.235,[.862,.862,.862]],[.237,[.862,.862,.862]],[.239,[.859,.859,.859]],[.241,[.859,.859,.859]],[.243,[.856,.856,.856]],[.245,[.856,.856,.856]],[.247,[.853,.853,.853]],[.249,[.853,.853,.853]],[.25,[.85,.85,.85]],[.252,[.85,.85,.85]],[.254,[.847,.847,.847]],[.256,[.847,.847,.847]],[.258,[.843,.843,.843]],[.26,[.843,.843,.843]],[.262,[.84,.84,.84]],[.264,[.84,.84,.84]],[.266,[.836,.836,.836]],[.268,[.836,.836,.836]],[.27,[.833,.833,.833]],[.272,[.833,.833,.833]],[.274,[.829,.829,.829]],[.276,[.829,.829,.829]],[.278,[.826,.826,.826]],[.28,[.826,.826,.826]],[.282,[.823,.823,.823]],[.284,[.823,.823,.823]],[.286,[.819,.819,.819]],[.288,[.819,.819,.819]],[.29,[.816,.816,.816]],[.292,[.816,.816,.816]],[.294,[.812,.812,.812]],[.295,[.812,.812,.812]],[.297,[.809,.809,.809]],[.299,[.809,.809,.809]],[.301,[.805,.805,.805]],[.303,[.805,.805,.805]],[.305,[.802,.802,.802]],[.307,[.802,.802,.802]],[.309,[.798,.798,.798]],[.311,[.798,.798,.798]],[.313,[.795,.795,.795]],[.315,[.795,.795,.795]],[.317,[.792,.792,.792]],[.319,[.792,.792,.792]],[.321,[.788,.788,.788]],[.323,[.788,.788,.788]],[.325,[.785,.785,.785]],[.327,[.785,.785,.785]],[.329,[.781,.781,.781]],[.331,[.781,.781,.781]],[.333,[.778,.778,.778]],[.335,[.778,.778,.778]],[.337,[.774,.774,.774]],[.339,[.774,.774,.774]],[.341,[.771,.771,.771]],[.342,[.771,.771,.771]],[.344,[.767,.767,.767]],[.346,[.767,.767,.767]],[.348,[.764,.764,.764]],[.35,[.764,.764,.764]],[.352,[.761,.761,.761]],[.354,[.761,.761,.761]],[.356,[.757,.757,.757]],[.358,[.757,.757,.757]],[.36,[.754,.754,.754]],[.362,[.754,.754,.754]],[.364,[.75,.75,.75]],[.366,[.75,.75,.75]],[.368,[.747,.747,.747]],[.37,[.747,.747,.747]],[.372,[.743,.743,.743]],[.374,[.743,.743,.743]],[.376,[.739,.739,.739]],[.378,[.739,.739,.739]],[.38,[.735,.735,.735]],[.382,[.735,.735,.735]],[.384,[.73,.73,.73]],[.386,[.73,.73,.73]],[.387,[.725,.725,.725]],[.389,[.725,.725,.725]],[.391,[.72,.72,.72]],[.393,[.72,.72,.72]],[.395,[.715,.715,.715]],[.397,[.715,.715,.715]],[.399,[.711,.711,.711]],[.401,[.711,.711,.711]],[.403,[.706,.706,.706]],[.405,[.706,.706,.706]],[.407,[.701,.701,.701]],[.409,[.701,.701,.701]],[.411,[.696,.696,.696]],[.413,[.696,.696,.696]],[.415,[.691,.691,.691]],[.417,[.691,.691,.691]],[.419,[.687,.687,.687]],[.421,[.687,.687,.687]],[.423,[.682,.682,.682]],[.425,[.682,.682,.682]],[.427,[.677,.677,.677]],[.429,[.677,.677,.677]],[.431,[.672,.672,.672]],[.432,[.672,.672,.672]],[.434,[.667,.667,.667]],[.436,[.667,.667,.667]],[.438,[.663,.663,.663]],[.44,[.663,.663,.663]],[.442,[.658,.658,.658]],[.444,[.658,.658,.658]],[.446,[.653,.653,.653]],[.448,[.653,.653,.653]],[.45,[.648,.648,.648]],[.452,[.648,.648,.648]],[.454,[.643,.643,.643]],[.456,[.643,.643,.643]],[.458,[.639,.639,.639]],[.46,[.639,.639,.639]],[.462,[.634,.634,.634]],[.464,[.634,.634,.634]],[.466,[.629,.629,.629]],[.468,[.629,.629,.629]],[.47,[.624,.624,.624]],[.472,[.624,.624,.624]],[.474,[.619,.619,.619]],[.476,[.619,.619,.619]],[.477,[.615,.615,.615]],[.479,[.615,.615,.615]],[.481,[.61,.61,.61]],[.483,[.61,.61,.61]],[.485,[.605,.605,.605]],[.487,[.605,.605,.605]],[.489,[.6,.6,.6]],[.491,[.6,.6,.6]],[.493,[.595,.595,.595]],[.495,[.595,.595,.595]],[.497,[.591,.591,.591]],[.499,[.591,.591,.591]],[.501,[.586,.586,.586]],[.503,[.586,.586,.586]],[.505,[.582,.582,.582]],[.507,[.582,.582,.582]],[.509,[.577,.577,.577]],[.511,[.577,.577,.577]],[.513,[.573,.573,.573]],[.515,[.573,.573,.573]],[.517,[.569,.569,.569]],[.519,[.569,.569,.569]],[.521,[.565,.565,.565]],[.523,[.565,.565,.565]],[.524,[.56,.56,.56]],[.526,[.56,.56,.56]],[.528,[.556,.556,.556]],[.53,[.556,.556,.556]],[.532,[.552,.552,.552]],[.534,[.552,.552,.552]],[.536,[.547,.547,.547]],[.538,[.547,.547,.547]],[.54,[.543,.543,.543]],[.542,[.543,.543,.543]],[.544,[.539,.539,.539]],[.546,[.539,.539,.539]],[.548,[.534,.534,.534]],[.55,[.534,.534,.534]],[.552,[.53,.53,.53]],[.554,[.53,.53,.53]],[.556,[.526,.526,.526]],[.558,[.526,.526,.526]],[.56,[.521,.521,.521]],[.562,[.521,.521,.521]],[.564,[.517,.517,.517]],[.566,[.517,.517,.517]],[.568,[.513,.513,.513]],[.569,[.513,.513,.513]],[.571,[.509,.509,.509]],[.573,[.509,.509,.509]],[.575,[.504,.504,.504]],[.577,[.504,.504,.504]],[.579,[.5,.5,.5]],[.581,[.5,.5,.5]],[.583,[.496,.496,.496]],[.585,[.496,.496,.496]],[.587,[.491,.491,.491]],[.589,[.491,.491,.491]],[.591,[.487,.487,.487]],[.593,[.487,.487,.487]],[.595,[.483,.483,.483]],[.597,[.483,.483,.483]],[.599,[.478,.478,.478]],[.601,[.478,.478,.478]],[.603,[.474,.474,.474]],[.605,[.474,.474,.474]],[.607,[.47,.47,.47]],[.609,[.47,.47,.47]],[.611,[.466,.466,.466]],[.613,[.466,.466,.466]],[.614,[.461,.461,.461]],[.616,[.461,.461,.461]],[.618,[.457,.457,.457]],[.62,[.457,.457,.457]],[.622,[.453,.453,.453]],[.624,[.453,.453,.453]],[.626,[.448,.448,.448]],[.628,[.448,.448,.448]],[.63,[.444,.444,.444]],[.632,[.444,.444,.444]],[.634,[.44,.44,.44]],[.636,[.44,.44,.44]],[.638,[.436,.436,.436]],[.64,[.436,.436,.436]],[.642,[.432,.432,.432]],[.644,[.432,.432,.432]],[.646,[.428,.428,.428]],[.648,[.428,.428,.428]],[.65,[.424,.424,.424]],[.652,[.424,.424,.424]],[.654,[.42,.42,.42]],[.656,[.42,.42,.42]],[.658,[.416,.416,.416]],[.659,[.416,.416,.416]],[.661,[.412,.412,.412]],[.663,[.412,.412,.412]],[.665,[.408,.408,.408]],[.667,[.408,.408,.408]],[.669,[.404,.404,.404]],[.671,[.404,.404,.404]],[.673,[.4,.4,.4]],[.675,[.4,.4,.4]],[.677,[.396,.396,.396]],[.679,[.396,.396,.396]],[.681,[.392,.392,.392]],[.683,[.392,.392,.392]],[.685,[.388,.388,.388]],[.687,[.388,.388,.388]],[.689,[.383,.383,.383]],[.691,[.383,.383,.383]],[.693,[.379,.379,.379]],[.695,[.379,.379,.379]],[.697,[.375,.375,.375]],[.699,[.375,.375,.375]],[.701,[.371,.371,.371]],[.703,[.371,.371,.371]],[.705,[.367,.367,.367]],[.706,[.367,.367,.367]],[.708,[.363,.363,.363]],[.71,[.363,.363,.363]],[.712,[.359,.359,.359]],[.714,[.359,.359,.359]],[.716,[.355,.355,.355]],[.718,[.355,.355,.355]],[.72,[.351,.351,.351]],[.722,[.351,.351,.351]],[.724,[.347,.347,.347]],[.726,[.347,.347,.347]],[.728,[.343,.343,.343]],[.73,[.343,.343,.343]],[.732,[.339,.339,.339]],[.734,[.339,.339,.339]],[.736,[.335,.335,.335]],[.738,[.335,.335,.335]],[.74,[.331,.331,.331]],[.742,[.331,.331,.331]],[.744,[.327,.327,.327]],[.746,[.327,.327,.327]],[.748,[.323,.323,.323]],[.75,[.323,.323,.323]],[.751,[.317,.317,.317]],[.753,[.317,.317,.317]],[.755,[.312,.312,.312]],[.757,[.312,.312,.312]],[.759,[.306,.306,.306]],[.761,[.306,.306,.306]],[.763,[.301,.301,.301]],[.765,[.301,.301,.301]],[.767,[.295,.295,.295]],[.769,[.295,.295,.295]],[.771,[.29,.29,.29]],[.773,[.29,.29,.29]],[.775,[.284,.284,.284]],[.777,[.284,.284,.284]],[.779,[.279,.279,.279]],[.781,[.279,.279,.279]],[.783,[.273,.273,.273]],[.785,[.273,.273,.273]],[.787,[.268,.268,.268]],[.789,[.268,.268,.268]],[.791,[.262,.262,.262]],[.793,[.262,.262,.262]],[.795,[.257,.257,.257]],[.796,[.257,.257,.257]],[.798,[.251,.251,.251]],[.8,[.251,.251,.251]],[.802,[.245,.245,.245]],[.804,[.245,.245,.245]],[.806,[.24,.24,.24]],[.808,[.24,.24,.24]],[.81,[.234,.234,.234]],[.812,[.234,.234,.234]],[.814,[.229,.229,.229]],[.816,[.229,.229,.229]],[.818,[.223,.223,.223]],[.82,[.223,.223,.223]],[.822,[.218,.218,.218]],[.824,[.218,.218,.218]],[.826,[.212,.212,.212]],[.828,[.212,.212,.212]],[.83,[.207,.207,.207]],[.832,[.207,.207,.207]],[.834,[.201,.201,.201]],[.836,[.201,.201,.201]],[.838,[.196,.196,.196]],[.84,[.196,.196,.196]],[.841,[.19,.19,.19]],[.843,[.19,.19,.19]],[.845,[.185,.185,.185]],[.847,[.185,.185,.185]],[.849,[.179,.179,.179]],[.851,[.179,.179,.179]],[.853,[.173,.173,.173]],[.855,[.173,.173,.173]],[.857,[.168,.168,.168]],[.859,[.168,.168,.168]],[.861,[.162,.162,.162]],[.863,[.162,.162,.162]],[.865,[.157,.157,.157]],[.867,[.157,.157,.157]],[.869,[.151,.151,.151]],[.871,[.151,.151,.151]],[.873,[.146,.146,.146]],[.875,[.146,.146,.146]],[.877,[.141,.141,.141]],[.879,[.141,.141,.141]],[.881,[.137,.137,.137]],[.883,[.137,.137,.137]],[.885,[.132,.132,.132]],[.886,[.132,.132,.132]],[.888,[.127,.127,.127]],[.89,[.127,.127,.127]],[.892,[.123,.123,.123]],[.894,[.123,.123,.123]],[.896,[.118,.118,.118]],[.898,[.118,.118,.118]],[.9,[.114,.114,.114]],[.902,[.114,.114,.114]],[.904,[.109,.109,.109]],[.906,[.109,.109,.109]],[.908,[.105,.105,.105]],[.91,[.105,.105,.105]],[.912,[.1,.1,.1]],[.914,[.1,.1,.1]],[.916,[.096,.096,.096]],[.918,[.096,.096,.096]],[.92,[.091,.091,.091]],[.922,[.091,.091,.091]],[.924,[.086,.086,.086]],[.926,[.086,.086,.086]],[.928,[.082,.082,.082]],[.93,[.082,.082,.082]],[.932,[.077,.077,.077]],[.933,[.077,.077,.077]],[.935,[.073,.073,.073]],[.937,[.073,.073,.073]],[.939,[.068,.068,.068]],[.941,[.068,.068,.068]],[.943,[.064,.064,.064]],[.945,[.064,.064,.064]],[.947,[.059,.059,.059]],[.949,[.059,.059,.059]],[.951,[.055,.055,.055]],[.953,[.055,.055,.055]],[.955,[.05,.05,.05]],[.957,[.05,.05,.05]],[.959,[.046,.046,.046]],[.961,[.046,.046,.046]],[.963,[.041,.041,.041]],[.965,[.041,.041,.041]],[.967,[.036,.036,.036]],[.969,[.036,.036,.036]],[.971,[.032,.032,.032]],[.973,[.032,.032,.032]],[.975,[.027,.027,.027]],[.977,[.027,.027,.027]],[.978,[.023,.023,.023]],[.98,[.023,.023,.023]],[.982,[.018,.018,.018]],[.984,[.018,.018,.018]],[.986,[.014,.014,.014]],[.988,[.014,.014,.014]],[.99,[.009,.009,.009]],[.992,[.009,.009,.009]],[.994,[.005,.005,.005]],[.996,[.005,.005,.005]],[.998,[0,0,0]],[1,[0,0,0]]]}),_defineProperty(_vislibColorMaps,ColorSchemas.Reds,{id:ColorSchemas.Reds,label:_i18n.i18n.translate("common.ui.vislib.colormaps.redsText",{defaultMessage:"Reds"}),value:[[0,[1,.961,.941]],[.002,[1,.961,.941]],[.004,[1,.958,.937]],[.006,[1,.958,.937]],[.008,[1,.956,.934]],[.01,[1,.956,.934]],[.012,[1,.953,.93]],[.014,[1,.953,.93]],[.016,[1,.95,.926]],[.018,[1,.95,.926]],[.02,[.999,.948,.923]],[.022,[.999,.948,.923]],[.023,[.999,.945,.919]],[.025,[.999,.945,.919]],[.027,[.999,.943,.915]],[.029,[.999,.943,.915]],[.031,[.999,.94,.912]],[.033,[.999,.94,.912]],[.035,[.999,.938,.908]],[.037,[.999,.938,.908]],[.039,[.999,.935,.904]],[.041,[.999,.935,.904]],[.043,[.999,.932,.901]],[.045,[.999,.932,.901]],[.047,[.999,.93,.897]],[.049,[.999,.93,.897]],[.051,[.998,.927,.893]],[.053,[.998,.927,.893]],[.055,[.998,.925,.89]],[.057,[.998,.925,.89]],[.059,[.998,.922,.886]],[.061,[.998,.922,.886]],[.063,[.998,.919,.882]],[.065,[.998,.919,.882]],[.067,[.998,.917,.878]],[.068,[.998,.917,.878]],[.07,[.998,.914,.875]],[.072,[.998,.914,.875]],[.074,[.998,.912,.871]],[.076,[.998,.912,.871]],[.078,[.998,.909,.867]],[.08,[.998,.909,.867]],[.082,[.997,.907,.864]],[.084,[.997,.907,.864]],[.086,[.997,.904,.86]],[.088,[.997,.904,.86]],[.09,[.997,.901,.856]],[.092,[.997,.901,.856]],[.094,[.997,.899,.853]],[.096,[.997,.899,.853]],[.098,[.997,.896,.849]],[.1,[.997,.896,.849]],[.102,[.997,.894,.845]],[.104,[.997,.894,.845]],[.106,[.997,.891,.842]],[.108,[.997,.891,.842]],[.11,[.997,.888,.838]],[.112,[.997,.888,.838]],[.114,[.996,.886,.834]],[.115,[.996,.886,.834]],[.117,[.996,.883,.83]],[.119,[.996,.883,.83]],[.121,[.996,.881,.827]],[.123,[.996,.881,.827]],[.125,[.996,.878,.823]],[.127,[.996,.878,.823]],[.129,[.996,.873,.817]],[.131,[.996,.873,.817]],[.133,[.996,.869,.811]],[.135,[.996,.869,.811]],[.137,[.995,.864,.805]],[.139,[.995,.864,.805]],[.141,[.995,.86,.799]],[.143,[.995,.86,.799]],[.145,[.995,.855,.793]],[.147,[.995,.855,.793]],[.149,[.995,.851,.787]],[.151,[.995,.851,.787]],[.153,[.994,.846,.781]],[.155,[.994,.846,.781]],[.157,[.994,.841,.775]],[.159,[.994,.841,.775]],[.16,[.994,.837,.769]],[.162,[.994,.837,.769]],[.164,[.994,.832,.762]],[.166,[.994,.832,.762]],[.168,[.993,.828,.756]],[.17,[.993,.828,.756]],[.172,[.993,.823,.75]],[.174,[.993,.823,.75]],[.176,[.993,.819,.744]],[.178,[.993,.819,.744]],[.18,[.993,.814,.738]],[.182,[.993,.814,.738]],[.184,[.992,.81,.732]],[.186,[.992,.81,.732]],[.188,[.992,.805,.726]],[.19,[.992,.805,.726]],[.192,[.992,.8,.72]],[.194,[.992,.8,.72]],[.196,[.992,.796,.714]],[.198,[.992,.796,.714]],[.2,[.991,.791,.708]],[.202,[.991,.791,.708]],[.204,[.991,.787,.702]],[.205,[.991,.787,.702]],[.207,[.991,.782,.696]],[.209,[.991,.782,.696]],[.211,[.991,.778,.69]],[.213,[.991,.778,.69]],[.215,[.99,.773,.684]],[.217,[.99,.773,.684]],[.219,[.99,.769,.678]],[.221,[.99,.769,.678]],[.223,[.99,.764,.672]],[.225,[.99,.764,.672]],[.227,[.99,.76,.666]],[.229,[.99,.76,.666]],[.231,[.989,.755,.66]],[.233,[.989,.755,.66]],[.235,[.989,.75,.654]],[.237,[.989,.75,.654]],[.239,[.989,.746,.648]],[.241,[.989,.746,.648]],[.243,[.989,.741,.642]],[.245,[.989,.741,.642]],[.247,[.988,.737,.636]],[.249,[.988,.737,.636]],[.25,[.988,.732,.63]],[.252,[.988,.732,.63]],[.254,[.988,.727,.624]],[.256,[.988,.727,.624]],[.258,[.988,.722,.618]],[.26,[.988,.722,.618]],[.262,[.988,.717,.613]],[.264,[.988,.717,.613]],[.266,[.988,.712,.607]],[.268,[.988,.712,.607]],[.27,[.988,.707,.601]],[.272,[.988,.707,.601]],[.274,[.988,.702,.595]],[.276,[.988,.702,.595]],[.278,[.988,.697,.589]],[.28,[.988,.697,.589]],[.282,[.988,.692,.584]],[.284,[.988,.692,.584]],[.286,[.988,.687,.578]],[.288,[.988,.687,.578]],[.29,[.988,.682,.572]],[.292,[.988,.682,.572]],[.294,[.988,.677,.566]],[.295,[.988,.677,.566]],[.297,[.988,.672,.561]],[.299,[.988,.672,.561]],[.301,[.988,.666,.555]],[.303,[.988,.666,.555]],[.305,[.988,.661,.549]],[.307,[.988,.661,.549]],[.309,[.988,.656,.543]],[.311,[.988,.656,.543]],[.313,[.988,.651,.537]],[.315,[.988,.651,.537]],[.317,[.988,.646,.532]],[.319,[.988,.646,.532]],[.321,[.988,.641,.526]],[.323,[.988,.641,.526]],[.325,[.988,.636,.52]],[.327,[.988,.636,.52]],[.329,[.988,.631,.514]],[.331,[.988,.631,.514]],[.333,[.988,.626,.508]],[.335,[.988,.626,.508]],[.337,[.988,.621,.503]],[.339,[.988,.621,.503]],[.341,[.988,.616,.497]],[.342,[.988,.616,.497]],[.344,[.988,.611,.491]],[.346,[.988,.611,.491]],[.348,[.988,.606,.485]],[.35,[.988,.606,.485]],[.352,[.988,.601,.48]],[.354,[.988,.601,.48]],[.356,[.988,.596,.474]],[.358,[.988,.596,.474]],[.36,[.988,.591,.468]],[.362,[.988,.591,.468]],[.364,[.988,.586,.462]],[.366,[.988,.586,.462]],[.368,[.988,.581,.456]],[.37,[.988,.581,.456]],[.372,[.988,.576,.451]],[.374,[.988,.576,.451]],[.376,[.988,.571,.445]],[.378,[.988,.571,.445]],[.38,[.988,.566,.44]],[.382,[.988,.566,.44]],[.384,[.988,.561,.435]],[.386,[.988,.561,.435]],[.387,[.988,.556,.43]],[.389,[.988,.556,.43]],[.391,[.988,.551,.426]],[.393,[.988,.551,.426]],[.395,[.988,.546,.421]],[.397,[.988,.546,.421]],[.399,[.987,.541,.416]],[.401,[.987,.541,.416]],[.403,[.987,.536,.411]],[.405,[.987,.536,.411]],[.407,[.987,.531,.406]],[.409,[.987,.531,.406]],[.411,[.987,.526,.401]],[.413,[.987,.526,.401]],[.415,[.987,.521,.396]],[.417,[.987,.521,.396]],[.419,[.987,.517,.391]],[.421,[.987,.517,.391]],[.423,[.987,.512,.386]],[.425,[.987,.512,.386]],[.427,[.987,.507,.381]],[.429,[.987,.507,.381]],[.431,[.986,.502,.376]],[.432,[.986,.502,.376]],[.434,[.986,.497,.371]],[.436,[.986,.497,.371]],[.438,[.986,.492,.366]],[.44,[.986,.492,.366]],[.442,[.986,.487,.362]],[.444,[.986,.487,.362]],[.446,[.986,.482,.357]],[.448,[.986,.482,.357]],[.45,[.986,.477,.352]],[.452,[.986,.477,.352]],[.454,[.986,.472,.347]],[.456,[.986,.472,.347]],[.458,[.986,.467,.342]],[.46,[.986,.467,.342]],[.462,[.985,.462,.337]],[.464,[.985,.462,.337]],[.466,[.985,.458,.332]],[.468,[.985,.458,.332]],[.47,[.985,.453,.327]],[.472,[.985,.453,.327]],[.474,[.985,.448,.322]],[.476,[.985,.448,.322]],[.477,[.985,.443,.317]],[.479,[.985,.443,.317]],[.481,[.985,.438,.312]],[.483,[.985,.438,.312]],[.485,[.985,.433,.307]],[.487,[.985,.433,.307]],[.489,[.985,.428,.302]],[.491,[.985,.428,.302]],[.493,[.984,.423,.298]],[.495,[.984,.423,.298]],[.497,[.984,.418,.293]],[.499,[.984,.418,.293]],[.501,[.984,.413,.288]],[.503,[.984,.413,.288]],[.505,[.982,.407,.285]],[.507,[.982,.407,.285]],[.509,[.981,.401,.281]],[.511,[.981,.401,.281]],[.513,[.979,.395,.277]],[.515,[.979,.395,.277]],[.517,[.978,.39,.274]],[.519,[.978,.39,.274]],[.521,[.976,.384,.27]],[.523,[.976,.384,.27]],[.524,[.975,.378,.266]],[.526,[.975,.378,.266]],[.528,[.973,.372,.263]],[.53,[.973,.372,.263]],[.532,[.972,.367,.259]],[.534,[.972,.367,.259]],[.536,[.97,.361,.255]],[.538,[.97,.361,.255]],[.54,[.969,.355,.251]],[.542,[.969,.355,.251]],[.544,[.967,.349,.248]],[.546,[.967,.349,.248]],[.548,[.966,.343,.244]],[.55,[.966,.343,.244]],[.552,[.964,.338,.24]],[.554,[.964,.338,.24]],[.556,[.963,.332,.237]],[.558,[.963,.332,.237]],[.56,[.961,.326,.233]],[.562,[.961,.326,.233]],[.564,[.96,.32,.229]],[.566,[.96,.32,.229]],[.568,[.958,.314,.226]],[.569,[.958,.314,.226]],[.571,[.957,.309,.222]],[.573,[.957,.309,.222]],[.575,[.956,.303,.218]],[.577,[.956,.303,.218]],[.579,[.954,.297,.215]],[.581,[.954,.297,.215]],[.583,[.953,.291,.211]],[.585,[.953,.291,.211]],[.587,[.951,.286,.207]],[.589,[.951,.286,.207]],[.591,[.95,.28,.203]],[.593,[.95,.28,.203]],[.595,[.948,.274,.2]],[.597,[.948,.274,.2]],[.599,[.947,.268,.196]],[.601,[.947,.268,.196]],[.603,[.945,.262,.192]],[.605,[.945,.262,.192]],[.607,[.944,.257,.189]],[.609,[.944,.257,.189]],[.611,[.942,.251,.185]],[.613,[.942,.251,.185]],[.614,[.941,.245,.181]],[.616,[.941,.245,.181]],[.618,[.939,.239,.178]],[.62,[.939,.239,.178]],[.622,[.938,.234,.174]],[.624,[.938,.234,.174]],[.626,[.934,.229,.171]],[.628,[.934,.229,.171]],[.63,[.93,.224,.17]],[.632,[.93,.224,.17]],[.634,[.926,.22,.168]],[.636,[.926,.22,.168]],[.638,[.921,.216,.166]],[.64,[.921,.216,.166]],[.642,[.917,.211,.164]],[.644,[.917,.211,.164]],[.646,[.912,.207,.162]],[.648,[.912,.207,.162]],[.65,[.908,.203,.16]],[.652,[.908,.203,.16]],[.654,[.903,.199,.158]],[.656,[.903,.199,.158]],[.658,[.899,.194,.157]],[.659,[.899,.194,.157]],[.661,[.895,.19,.155]],[.663,[.895,.19,.155]],[.665,[.89,.186,.153]],[.667,[.89,.186,.153]],[.669,[.886,.181,.151]],[.671,[.886,.181,.151]],[.673,[.881,.177,.149]],[.675,[.881,.177,.149]],[.677,[.877,.173,.147]],[.679,[.877,.173,.147]],[.681,[.872,.168,.146]],[.683,[.872,.168,.146]],[.685,[.868,.164,.144]],[.687,[.868,.164,.144]],[.689,[.864,.16,.142]],[.691,[.864,.16,.142]],[.693,[.859,.155,.14]],[.695,[.859,.155,.14]],[.697,[.855,.151,.138]],[.699,[.855,.151,.138]],[.701,[.85,.147,.136]],[.703,[.85,.147,.136]],[.705,[.846,.143,.134]],[.706,[.846,.143,.134]],[.708,[.841,.138,.133]],[.71,[.841,.138,.133]],[.712,[.837,.134,.131]],[.714,[.837,.134,.131]],[.716,[.833,.13,.129]],[.718,[.833,.13,.129]],[.72,[.828,.125,.127]],[.722,[.828,.125,.127]],[.724,[.824,.121,.125]],[.726,[.824,.121,.125]],[.728,[.819,.117,.123]],[.73,[.819,.117,.123]],[.732,[.815,.112,.122]],[.734,[.815,.112,.122]],[.736,[.81,.108,.12]],[.738,[.81,.108,.12]],[.74,[.806,.104,.118]],[.742,[.806,.104,.118]],[.744,[.802,.1,.116]],[.746,[.802,.1,.116]],[.748,[.797,.095,.114]],[.75,[.797,.095,.114]],[.751,[.793,.093,.113]],[.753,[.793,.093,.113]],[.755,[.788,.092,.112]],[.757,[.788,.092,.112]],[.759,[.783,.091,.111]],[.761,[.783,.091,.111]],[.763,[.779,.09,.11]],[.765,[.779,.09,.11]],[.767,[.774,.089,.109]],[.769,[.774,.089,.109]],[.771,[.769,.088,.108]],[.773,[.769,.088,.108]],[.775,[.765,.087,.107]],[.777,[.765,.087,.107]],[.779,[.76,.086,.106]],[.781,[.76,.086,.106]],[.783,[.755,.084,.105]],[.785,[.755,.084,.105]],[.787,[.75,.083,.104]],[.789,[.75,.083,.104]],[.791,[.746,.082,.103]],[.793,[.746,.082,.103]],[.795,[.741,.081,.102]],[.796,[.741,.081,.102]],[.798,[.736,.08,.101]],[.8,[.736,.08,.101]],[.802,[.732,.079,.1]],[.804,[.732,.079,.1]],[.806,[.727,.078,.099]],[.808,[.727,.078,.099]],[.81,[.722,.077,.098]],[.812,[.722,.077,.098]],[.814,[.718,.076,.097]],[.816,[.718,.076,.097]],[.818,[.713,.074,.096]],[.82,[.713,.074,.096]],[.822,[.708,.073,.095]],[.824,[.708,.073,.095]],[.826,[.704,.072,.094]],[.828,[.704,.072,.094]],[.83,[.699,.071,.093]],[.832,[.699,.071,.093]],[.834,[.694,.07,.092]],[.836,[.694,.07,.092]],[.838,[.69,.069,.091]],[.84,[.69,.069,.091]],[.841,[.685,.068,.09]],[.843,[.685,.068,.09]],[.845,[.68,.067,.089]],[.847,[.68,.067,.089]],[.849,[.676,.066,.088]],[.851,[.676,.066,.088]],[.853,[.671,.064,.087]],[.855,[.671,.064,.087]],[.857,[.666,.063,.086]],[.859,[.666,.063,.086]],[.861,[.662,.062,.085]],[.863,[.662,.062,.085]],[.865,[.657,.061,.084]],[.867,[.657,.061,.084]],[.869,[.652,.06,.083]],[.871,[.652,.06,.083]],[.873,[.648,.059,.082]],[.875,[.648,.059,.082]],[.877,[.64,.057,.081]],[.879,[.64,.057,.081]],[.881,[.633,.055,.081]],[.883,[.633,.055,.081]],[.885,[.625,.054,.08]],[.886,[.625,.054,.08]],[.888,[.618,.052,.079]],[.89,[.618,.052,.079]],[.892,[.61,.05,.078]],[.894,[.61,.05,.078]],[.896,[.602,.048,.077]],[.898,[.602,.048,.077]],[.9,[.595,.046,.076]],[.902,[.595,.046,.076]],[.904,[.587,.044,.075]],[.906,[.587,.044,.075]],[.908,[.579,.042,.074]],[.91,[.579,.042,.074]],[.912,[.572,.041,.073]],[.914,[.572,.041,.073]],[.916,[.564,.039,.072]],[.918,[.564,.039,.072]],[.92,[.556,.037,.071]],[.922,[.556,.037,.071]],[.924,[.549,.035,.07]],[.926,[.549,.035,.07]],[.928,[.541,.033,.069]],[.93,[.541,.033,.069]],[.932,[.534,.031,.068]],[.933,[.534,.031,.068]],[.935,[.526,.03,.067]],[.937,[.526,.03,.067]],[.939,[.518,.028,.066]],[.941,[.518,.028,.066]],[.943,[.511,.026,.065]],[.945,[.511,.026,.065]],[.947,[.503,.024,.064]],[.949,[.503,.024,.064]],[.951,[.495,.022,.063]],[.953,[.495,.022,.063]],[.955,[.488,.02,.062]],[.957,[.488,.02,.062]],[.959,[.48,.018,.061]],[.961,[.48,.018,.061]],[.963,[.473,.017,.06]],[.965,[.473,.017,.06]],[.967,[.465,.015,.059]],[.969,[.465,.015,.059]],[.971,[.457,.013,.058]],[.973,[.457,.013,.058]],[.975,[.45,.011,.057]],[.977,[.45,.011,.057]],[.978,[.442,.009,.056]],[.98,[.442,.009,.056]],[.982,[.434,.007,.055]],[.984,[.434,.007,.055]],[.986,[.427,.006,.054]],[.988,[.427,.006,.054]],[.99,[.419,.004,.053]],[.992,[.419,.004,.053]],[.994,[.412,.002,.052]],[.996,[.412,.002,.052]],[.998,[.404,0,.051]],[1,[.404,0,.051]]]}),_defineProperty(_vislibColorMaps,ColorSchemas.YellowToRed,{id:ColorSchemas.YellowToRed,label:_i18n.i18n.translate("common.ui.vislib.colormaps.yellowToRedText",{defaultMessage:"Yellow to Red"}),value:[[0,[1,1,.8]],[.002,[1,1,.8]],[.004,[1,.998,.795]],[.006,[1,.998,.795]],[.008,[1,.996,.789]],[.01,[1,.996,.789]],[.012,[1,.993,.784]],[.014,[1,.993,.784]],[.016,[1,.991,.778]],[.018,[1,.991,.778]],[.02,[1,.989,.773]],[.022,[1,.989,.773]],[.023,[1,.987,.768]],[.025,[1,.987,.768]],[.027,[1,.984,.762]],[.029,[1,.984,.762]],[.031,[1,.982,.757]],[.033,[1,.982,.757]],[.035,[1,.98,.751]],[.037,[1,.98,.751]],[.039,[1,.978,.746]],[.041,[1,.978,.746]],[.043,[1,.976,.74]],[.045,[1,.976,.74]],[.047,[1,.973,.735]],[.049,[1,.973,.735]],[.051,[1,.971,.73]],[.053,[1,.971,.73]],[.055,[1,.969,.724]],[.057,[1,.969,.724]],[.059,[1,.967,.719]],[.061,[1,.967,.719]],[.063,[1,.965,.713]],[.065,[1,.965,.713]],[.067,[1,.962,.708]],[.068,[1,.962,.708]],[.07,[1,.96,.703]],[.072,[1,.96,.703]],[.074,[1,.958,.697]],[.076,[1,.958,.697]],[.078,[1,.956,.692]],[.08,[1,.956,.692]],[.082,[1,.953,.686]],[.084,[1,.953,.686]],[.086,[1,.951,.681]],[.088,[1,.951,.681]],[.09,[1,.949,.675]],[.092,[1,.949,.675]],[.094,[1,.947,.67]],[.096,[1,.947,.67]],[.098,[1,.945,.665]],[.1,[1,.945,.665]],[.102,[1,.942,.659]],[.104,[1,.942,.659]],[.106,[1,.94,.654]],[.108,[1,.94,.654]],[.11,[1,.938,.648]],[.112,[1,.938,.648]],[.114,[1,.936,.643]],[.115,[1,.936,.643]],[.117,[1,.934,.638]],[.119,[1,.934,.638]],[.121,[1,.931,.632]],[.123,[1,.931,.632]],[.125,[1,.929,.627]],[.127,[1,.929,.627]],[.129,[1,.927,.622]],[.131,[1,.927,.622]],[.133,[1,.924,.616]],[.135,[1,.924,.616]],[.137,[1,.922,.611]],[.139,[1,.922,.611]],[.141,[.999,.919,.606]],[.143,[.999,.919,.606]],[.145,[.999,.917,.601]],[.147,[.999,.917,.601]],[.149,[.999,.914,.596]],[.151,[.999,.914,.596]],[.153,[.999,.912,.591]],[.155,[.999,.912,.591]],[.157,[.999,.909,.585]],[.159,[.999,.909,.585]],[.16,[.999,.907,.58]],[.162,[.999,.907,.58]],[.164,[.999,.904,.575]],[.166,[.999,.904,.575]],[.168,[.999,.902,.57]],[.17,[.999,.902,.57]],[.172,[.999,.9,.565]],[.174,[.999,.9,.565]],[.176,[.998,.897,.56]],[.178,[.998,.897,.56]],[.18,[.998,.895,.554]],[.182,[.998,.895,.554]],[.184,[.998,.892,.549]],[.186,[.998,.892,.549]],[.188,[.998,.89,.544]],[.19,[.998,.89,.544]],[.192,[.998,.887,.539]],[.194,[.998,.887,.539]],[.196,[.998,.885,.534]],[.198,[.998,.885,.534]],[.2,[.998,.882,.529]],[.202,[.998,.882,.529]],[.204,[.998,.88,.523]],[.205,[.998,.88,.523]],[.207,[.997,.877,.518]],[.209,[.997,.877,.518]],[.211,[.997,.875,.513]],[.213,[.997,.875,.513]],[.215,[.997,.873,.508]],[.217,[.997,.873,.508]],[.219,[.997,.87,.503]],[.221,[.997,.87,.503]],[.223,[.997,.868,.498]],[.225,[.997,.868,.498]],[.227,[.997,.865,.492]],[.229,[.997,.865,.492]],[.231,[.997,.863,.487]],[.233,[.997,.863,.487]],[.235,[.997,.86,.482]],[.237,[.997,.86,.482]],[.239,[.996,.858,.477]],[.241,[.996,.858,.477]],[.243,[.996,.855,.472]],[.245,[.996,.855,.472]],[.247,[.996,.853,.467]],[.249,[.996,.853,.467]],[.25,[.996,.85,.461]],[.252,[.996,.85,.461]],[.254,[.996,.845,.456]],[.256,[.996,.845,.456]],[.258,[.996,.84,.451]],[.26,[.996,.84,.451]],[.262,[.996,.835,.446]],[.264,[.996,.835,.446]],[.266,[.996,.831,.441]],[.268,[.996,.831,.441]],[.27,[.996,.826,.436]],[.272,[.996,.826,.436]],[.274,[.996,.821,.43]],[.276,[.996,.821,.43]],[.278,[.996,.816,.425]],[.28,[.996,.816,.425]],[.282,[.996,.811,.42]],[.284,[.996,.811,.42]],[.286,[.996,.807,.415]],[.288,[.996,.807,.415]],[.29,[.996,.802,.41]],[.292,[.996,.802,.41]],[.294,[.996,.797,.405]],[.295,[.996,.797,.405]],[.297,[.996,.792,.399]],[.299,[.996,.792,.399]],[.301,[.996,.787,.394]],[.303,[.996,.787,.394]],[.305,[.996,.783,.389]],[.307,[.996,.783,.389]],[.309,[.996,.778,.384]],[.311,[.996,.778,.384]],[.313,[.996,.773,.379]],[.315,[.996,.773,.379]],[.317,[.996,.768,.374]],[.319,[.996,.768,.374]],[.321,[.996,.763,.368]],[.323,[.996,.763,.368]],[.325,[.996,.759,.363]],[.327,[.996,.759,.363]],[.329,[.996,.754,.358]],[.331,[.996,.754,.358]],[.333,[.996,.749,.353]],[.335,[.996,.749,.353]],[.337,[.996,.744,.348]],[.339,[.996,.744,.348]],[.341,[.996,.739,.343]],[.342,[.996,.739,.343]],[.344,[.996,.735,.337]],[.346,[.996,.735,.337]],[.348,[.996,.73,.332]],[.35,[.996,.73,.332]],[.352,[.996,.725,.327]],[.354,[.996,.725,.327]],[.356,[.996,.72,.322]],[.358,[.996,.72,.322]],[.36,[.996,.715,.317]],[.362,[.996,.715,.317]],[.364,[.996,.711,.312]],[.366,[.996,.711,.312]],[.368,[.996,.706,.306]],[.37,[.996,.706,.306]],[.372,[.996,.701,.301]],[.374,[.996,.701,.301]],[.376,[.996,.696,.297]],[.378,[.996,.696,.297]],[.38,[.996,.692,.295]],[.382,[.996,.692,.295]],[.384,[.996,.687,.293]],[.386,[.996,.687,.293]],[.387,[.996,.683,.291]],[.389,[.996,.683,.291]],[.391,[.996,.678,.289]],[.393,[.996,.678,.289]],[.395,[.995,.674,.287]],[.397,[.995,.674,.287]],[.399,[.995,.669,.285]],[.401,[.995,.669,.285]],[.403,[.995,.664,.284]],[.405,[.995,.664,.284]],[.407,[.995,.66,.282]],[.409,[.995,.66,.282]],[.411,[.995,.655,.28]],[.413,[.995,.655,.28]],[.415,[.995,.651,.278]],[.417,[.995,.651,.278]],[.419,[.995,.646,.276]],[.421,[.995,.646,.276]],[.423,[.995,.642,.274]],[.425,[.995,.642,.274]],[.427,[.994,.637,.272]],[.429,[.994,.637,.272]],[.431,[.994,.633,.27]],[.432,[.994,.633,.27]],[.434,[.994,.628,.268]],[.436,[.994,.628,.268]],[.438,[.994,.623,.266]],[.44,[.994,.623,.266]],[.442,[.994,.619,.264]],[.444,[.994,.619,.264]],[.446,[.994,.614,.262]],[.448,[.994,.614,.262]],[.45,[.994,.61,.26]],[.452,[.994,.61,.26]],[.454,[.994,.605,.258]],[.456,[.994,.605,.258]],[.458,[.993,.601,.256]],[.46,[.993,.601,.256]],[.462,[.993,.596,.254]],[.464,[.993,.596,.254]],[.466,[.993,.592,.252]],[.468,[.993,.592,.252]],[.47,[.993,.587,.25]],[.472,[.993,.587,.25]],[.474,[.993,.583,.248]],[.476,[.993,.583,.248]],[.477,[.993,.578,.246]],[.479,[.993,.578,.246]],[.481,[.993,.573,.244]],[.483,[.993,.573,.244]],[.485,[.993,.569,.242]],[.487,[.993,.569,.242]],[.489,[.992,.564,.24]],[.491,[.992,.564,.24]],[.493,[.992,.56,.238]],[.495,[.992,.56,.238]],[.497,[.992,.555,.236]],[.499,[.992,.555,.236]],[.501,[.992,.549,.234]],[.503,[.992,.549,.234]],[.505,[.992,.541,.232]],[.507,[.992,.541,.232]],[.509,[.992,.534,.23]],[.511,[.992,.534,.23]],[.513,[.992,.526,.228]],[.515,[.992,.526,.228]],[.517,[.992,.518,.225]],[.519,[.992,.518,.225]],[.521,[.991,.51,.223]],[.523,[.991,.51,.223]],[.524,[.991,.503,.221]],[.526,[.991,.503,.221]],[.528,[.991,.495,.219]],[.53,[.991,.495,.219]],[.532,[.991,.487,.216]],[.534,[.991,.487,.216]],[.536,[.991,.479,.214]],[.538,[.991,.479,.214]],[.54,[.991,.472,.212]],[.542,[.991,.472,.212]],[.544,[.991,.464,.21]],[.546,[.991,.464,.21]],[.548,[.991,.456,.208]],[.55,[.991,.456,.208]],[.552,[.99,.448,.205]],[.554,[.99,.448,.205]],[.556,[.99,.441,.203]],[.558,[.99,.441,.203]],[.56,[.99,.433,.201]],[.562,[.99,.433,.201]],[.564,[.99,.425,.199]],[.566,[.99,.425,.199]],[.568,[.99,.417,.197]],[.569,[.99,.417,.197]],[.571,[.99,.41,.194]],[.573,[.99,.41,.194]],[.575,[.99,.402,.192]],[.577,[.99,.402,.192]],[.579,[.99,.394,.19]],[.581,[.99,.394,.19]],[.583,[.99,.386,.188]],[.585,[.99,.386,.188]],[.587,[.989,.379,.185]],[.589,[.989,.379,.185]],[.591,[.989,.371,.183]],[.593,[.989,.371,.183]],[.595,[.989,.363,.181]],[.597,[.989,.363,.181]],[.599,[.989,.355,.179]],[.601,[.989,.355,.179]],[.603,[.989,.348,.177]],[.605,[.989,.348,.177]],[.607,[.989,.34,.174]],[.609,[.989,.34,.174]],[.611,[.989,.332,.172]],[.613,[.989,.332,.172]],[.614,[.989,.324,.17]],[.616,[.989,.324,.17]],[.618,[.988,.317,.168]],[.62,[.988,.317,.168]],[.622,[.988,.309,.166]],[.624,[.988,.309,.166]],[.626,[.986,.302,.164]],[.628,[.986,.302,.164]],[.63,[.983,.295,.162]],[.632,[.983,.295,.162]],[.634,[.98,.289,.16]],[.636,[.98,.289,.16]],[.638,[.977,.283,.158]],[.64,[.977,.283,.158]],[.642,[.974,.276,.157]],[.644,[.974,.276,.157]],[.646,[.971,.27,.155]],[.648,[.971,.27,.155]],[.65,[.968,.263,.153]],[.652,[.968,.263,.153]],[.654,[.965,.257,.152]],[.656,[.965,.257,.152]],[.658,[.962,.251,.15]],[.659,[.962,.251,.15]],[.661,[.959,.244,.148]],[.663,[.959,.244,.148]],[.665,[.956,.238,.146]],[.667,[.956,.238,.146]],[.669,[.952,.232,.145]],[.671,[.952,.232,.145]],[.673,[.949,.225,.143]],[.675,[.949,.225,.143]],[.677,[.946,.219,.141]],[.679,[.946,.219,.141]],[.681,[.943,.212,.14]],[.683,[.943,.212,.14]],[.685,[.94,.206,.138]],[.687,[.94,.206,.138]],[.689,[.937,.2,.136]],[.691,[.937,.2,.136]],[.693,[.934,.193,.134]],[.695,[.934,.193,.134]],[.697,[.931,.187,.133]],[.699,[.931,.187,.133]],[.701,[.928,.18,.131]],[.703,[.928,.18,.131]],[.705,[.925,.174,.129]],[.706,[.925,.174,.129]],[.708,[.922,.168,.127]],[.71,[.922,.168,.127]],[.712,[.919,.161,.126]],[.714,[.919,.161,.126]],[.716,[.916,.155,.124]],[.718,[.916,.155,.124]],[.72,[.912,.148,.122]],[.722,[.912,.148,.122]],[.724,[.909,.142,.121]],[.726,[.909,.142,.121]],[.728,[.906,.136,.119]],[.73,[.906,.136,.119]],[.732,[.903,.129,.117]],[.734,[.903,.129,.117]],[.736,[.9,.123,.115]],[.738,[.9,.123,.115]],[.74,[.897,.116,.114]],[.742,[.897,.116,.114]],[.744,[.894,.11,.112]],[.746,[.894,.11,.112]],[.748,[.891,.104,.11]],[.75,[.891,.104,.11]],[.751,[.887,.1,.111]],[.753,[.887,.1,.111]],[.755,[.882,.096,.112]],[.757,[.882,.096,.112]],[.759,[.877,.093,.113]],[.761,[.877,.093,.113]],[.763,[.873,.09,.114]],[.765,[.873,.09,.114]],[.767,[.868,.087,.116]],[.769,[.868,.087,.116]],[.771,[.863,.084,.117]],[.773,[.863,.084,.117]],[.775,[.859,.08,.118]],[.777,[.859,.08,.118]],[.779,[.854,.077,.119]],[.781,[.854,.077,.119]],[.783,[.849,.074,.121]],[.785,[.849,.074,.121]],[.787,[.845,.071,.122]],[.789,[.845,.071,.122]],[.791,[.84,.068,.123]],[.793,[.84,.068,.123]],[.795,[.835,.064,.124]],[.796,[.835,.064,.124]],[.798,[.831,.061,.125]],[.8,[.831,.061,.125]],[.802,[.826,.058,.127]],[.804,[.826,.058,.127]],[.806,[.821,.055,.128]],[.808,[.821,.055,.128]],[.81,[.817,.052,.129]],[.812,[.817,.052,.129]],[.814,[.812,.048,.13]],[.816,[.812,.048,.13]],[.818,[.807,.045,.132]],[.82,[.807,.045,.132]],[.822,[.803,.042,.133]],[.824,[.803,.042,.133]],[.826,[.798,.039,.134]],[.828,[.798,.039,.134]],[.83,[.793,.036,.135]],[.832,[.793,.036,.135]],[.834,[.789,.032,.137]],[.836,[.789,.032,.137]],[.838,[.784,.029,.138]],[.84,[.784,.029,.138]],[.841,[.779,.026,.139]],[.843,[.779,.026,.139]],[.845,[.774,.023,.14]],[.847,[.774,.023,.14]],[.849,[.77,.02,.141]],[.851,[.77,.02,.141]],[.853,[.765,.016,.143]],[.855,[.765,.016,.143]],[.857,[.76,.013,.144]],[.859,[.76,.013,.144]],[.861,[.756,.01,.145]],[.863,[.756,.01,.145]],[.865,[.751,.007,.146]],[.867,[.751,.007,.146]],[.869,[.746,.004,.148]],[.871,[.746,.004,.148]],[.873,[.742,0,.149]],[.875,[.742,0,.149]],[.877,[.735,0,.149]],[.879,[.735,0,.149]],[.881,[.727,0,.149]],[.883,[.727,0,.149]],[.885,[.72,0,.149]],[.886,[.72,0,.149]],[.888,[.712,0,.149]],[.89,[.712,0,.149]],[.892,[.705,0,.149]],[.894,[.705,0,.149]],[.896,[.697,0,.149]],[.898,[.697,0,.149]],[.9,[.69,0,.149]],[.902,[.69,0,.149]],[.904,[.682,0,.149]],[.906,[.682,0,.149]],[.908,[.675,0,.149]],[.91,[.675,0,.149]],[.912,[.667,0,.149]],[.914,[.667,0,.149]],[.916,[.66,0,.149]],[.918,[.66,0,.149]],[.92,[.652,0,.149]],[.922,[.652,0,.149]],[.924,[.645,0,.149]],[.926,[.645,0,.149]],[.928,[.637,0,.149]],[.93,[.637,0,.149]],[.932,[.63,0,.149]],[.933,[.63,0,.149]],[.935,[.622,0,.149]],[.937,[.622,0,.149]],[.939,[.615,0,.149]],[.941,[.615,0,.149]],[.943,[.607,0,.149]],[.945,[.607,0,.149]],[.947,[.6,0,.149]],[.949,[.6,0,.149]],[.951,[.592,0,.149]],[.953,[.592,0,.149]],[.955,[.585,0,.149]],[.957,[.585,0,.149]],[.959,[.577,0,.149]],[.961,[.577,0,.149]],[.963,[.57,0,.149]],[.965,[.57,0,.149]],[.967,[.562,0,.149]],[.969,[.562,0,.149]],[.971,[.554,0,.149]],[.973,[.554,0,.149]],[.975,[.547,0,.149]],[.977,[.547,0,.149]],[.978,[.539,0,.149]],[.98,[.539,0,.149]],[.982,[.532,0,.149]],[.984,[.532,0,.149]],[.986,[.524,0,.149]],[.988,[.524,0,.149]],[.99,[.517,0,.149]],[.992,[.517,0,.149]],[.994,[.509,0,.149]],[.996,[.509,0,.149]],[.998,[.502,0,.149]],[1,[.502,0,.149]]]}),_defineProperty(_vislibColorMaps,ColorSchemas.GreenToRed,{id:ColorSchemas.GreenToRed,label:_i18n.i18n.translate("common.ui.vislib.colormaps.greenToRedText",{defaultMessage:"Green to Red"}),value:[[0,[0,.408,.216]],[.002,[0,.408,.216]],[.004,[.004,.415,.22]],[.006,[.004,.415,.22]],[.008,[.008,.423,.223]],[.01,[.008,.423,.223]],[.012,[.012,.43,.227]],[.014,[.012,.43,.227]],[.016,[.016,.437,.231]],[.018,[.016,.437,.231]],[.02,[.02,.445,.235]],[.022,[.02,.445,.235]],[.023,[.024,.452,.239]],[.025,[.024,.452,.239]],[.027,[.028,.46,.243]],[.029,[.028,.46,.243]],[.031,[.032,.467,.246]],[.033,[.032,.467,.246]],[.035,[.036,.474,.25]],[.037,[.036,.474,.25]],[.039,[.04,.482,.254]],[.041,[.04,.482,.254]],[.043,[.044,.489,.258]],[.045,[.044,.489,.258]],[.047,[.048,.496,.262]],[.049,[.048,.496,.262]],[.051,[.052,.504,.266]],[.053,[.052,.504,.266]],[.055,[.056,.511,.27]],[.057,[.056,.511,.27]],[.059,[.06,.519,.273]],[.061,[.06,.519,.273]],[.063,[.064,.526,.277]],[.065,[.064,.526,.277]],[.067,[.068,.533,.281]],[.068,[.068,.533,.281]],[.07,[.072,.541,.285]],[.072,[.072,.541,.285]],[.074,[.076,.548,.289]],[.076,[.076,.548,.289]],[.078,[.08,.555,.293]],[.08,[.08,.555,.293]],[.082,[.084,.563,.296]],[.084,[.084,.563,.296]],[.086,[.088,.57,.3]],[.088,[.088,.57,.3]],[.09,[.092,.578,.304]],[.092,[.092,.578,.304]],[.094,[.096,.585,.308]],[.096,[.096,.585,.308]],[.098,[.1,.592,.312]],[.1,[.1,.592,.312]],[.102,[.108,.599,.315]],[.104,[.108,.599,.315]],[.106,[.119,.605,.318]],[.108,[.119,.605,.318]],[.11,[.131,.61,.321]],[.112,[.131,.61,.321]],[.114,[.143,.616,.324]],[.115,[.143,.616,.324]],[.117,[.155,.622,.327]],[.119,[.155,.622,.327]],[.121,[.166,.627,.33]],[.123,[.166,.627,.33]],[.125,[.178,.633,.333]],[.127,[.178,.633,.333]],[.129,[.19,.639,.336]],[.131,[.19,.639,.336]],[.133,[.201,.644,.339]],[.135,[.201,.644,.339]],[.137,[.213,.65,.341]],[.139,[.213,.65,.341]],[.141,[.225,.656,.344]],[.143,[.225,.656,.344]],[.145,[.236,.662,.347]],[.147,[.236,.662,.347]],[.149,[.248,.667,.35]],[.151,[.248,.667,.35]],[.153,[.26,.673,.353]],[.155,[.26,.673,.353]],[.157,[.271,.679,.356]],[.159,[.271,.679,.356]],[.16,[.283,.684,.359]],[.162,[.283,.684,.359]],[.164,[.295,.69,.362]],[.166,[.295,.69,.362]],[.168,[.306,.696,.365]],[.17,[.306,.696,.365]],[.172,[.318,.701,.368]],[.174,[.318,.701,.368]],[.176,[.33,.707,.371]],[.178,[.33,.707,.371]],[.18,[.342,.713,.374]],[.182,[.342,.713,.374]],[.184,[.353,.718,.377]],[.186,[.353,.718,.377]],[.188,[.365,.724,.379]],[.19,[.365,.724,.379]],[.192,[.377,.73,.382]],[.194,[.377,.73,.382]],[.196,[.388,.735,.385]],[.198,[.388,.735,.385]],[.2,[.4,.741,.388]],[.202,[.4,.741,.388]],[.204,[.41,.745,.389]],[.205,[.41,.745,.389]],[.207,[.42,.75,.39]],[.209,[.42,.75,.39]],[.211,[.43,.754,.391]],[.213,[.43,.754,.391]],[.215,[.439,.758,.393]],[.217,[.439,.758,.393]],[.219,[.449,.763,.394]],[.221,[.449,.763,.394]],[.223,[.459,.767,.395]],[.225,[.459,.767,.395]],[.227,[.469,.771,.396]],[.229,[.469,.771,.396]],[.231,[.479,.776,.397]],[.233,[.479,.776,.397]],[.235,[.489,.78,.398]],[.237,[.489,.78,.398]],[.239,[.498,.784,.399]],[.241,[.498,.784,.399]],[.243,[.508,.789,.4]],[.245,[.508,.789,.4]],[.247,[.518,.793,.401]],[.249,[.518,.793,.401]],[.25,[.528,.797,.402]],[.252,[.528,.797,.402]],[.254,[.538,.801,.403]],[.256,[.538,.801,.403]],[.258,[.548,.806,.404]],[.26,[.548,.806,.404]],[.262,[.557,.81,.405]],[.264,[.557,.81,.405]],[.266,[.567,.814,.407]],[.268,[.567,.814,.407]],[.27,[.577,.819,.408]],[.272,[.577,.819,.408]],[.274,[.587,.823,.409]],[.276,[.587,.823,.409]],[.278,[.597,.827,.41]],[.28,[.597,.827,.41]],[.282,[.607,.832,.411]],[.284,[.607,.832,.411]],[.286,[.617,.836,.412]],[.288,[.617,.836,.412]],[.29,[.626,.84,.413]],[.292,[.626,.84,.413]],[.294,[.636,.845,.414]],[.295,[.636,.845,.414]],[.297,[.646,.849,.415]],[.299,[.646,.849,.415]],[.301,[.655,.853,.418]],[.303,[.655,.853,.418]],[.305,[.663,.856,.423]],[.307,[.663,.856,.423]],[.309,[.671,.859,.428]],[.311,[.671,.859,.428]],[.313,[.678,.863,.433]],[.315,[.678,.863,.433]],[.317,[.686,.866,.439]],[.319,[.686,.866,.439]],[.321,[.694,.87,.444]],[.323,[.694,.87,.444]],[.325,[.702,.873,.449]],[.327,[.702,.873,.449]],[.329,[.71,.876,.454]],[.331,[.71,.876,.454]],[.333,[.718,.88,.459]],[.335,[.718,.88,.459]],[.337,[.725,.883,.464]],[.339,[.725,.883,.464]],[.341,[.733,.887,.469]],[.342,[.733,.887,.469]],[.344,[.741,.89,.474]],[.346,[.741,.89,.474]],[.348,[.749,.893,.479]],[.35,[.749,.893,.479]],[.352,[.757,.897,.484]],[.354,[.757,.897,.484]],[.356,[.765,.9,.489]],[.358,[.765,.9,.489]],[.36,[.773,.903,.494]],[.362,[.773,.903,.494]],[.364,[.78,.907,.499]],[.366,[.78,.907,.499]],[.368,[.788,.91,.504]],[.37,[.788,.91,.504]],[.372,[.796,.914,.51]],[.374,[.796,.914,.51]],[.376,[.804,.917,.515]],[.378,[.804,.917,.515]],[.38,[.812,.92,.52]],[.382,[.812,.92,.52]],[.384,[.82,.924,.525]],[.386,[.82,.924,.525]],[.387,[.827,.927,.53]],[.389,[.827,.927,.53]],[.391,[.835,.93,.535]],[.393,[.835,.93,.535]],[.395,[.843,.934,.54]],[.397,[.843,.934,.54]],[.399,[.851,.937,.545]],[.401,[.851,.937,.545]],[.403,[.857,.94,.553]],[.405,[.857,.94,.553]],[.407,[.863,.942,.561]],[.409,[.863,.942,.561]],[.411,[.869,.945,.569]],[.413,[.869,.945,.569]],[.415,[.874,.947,.577]],[.417,[.874,.947,.577]],[.419,[.88,.95,.585]],[.421,[.88,.95,.585]],[.423,[.886,.952,.593]],[.425,[.886,.952,.593]],[.427,[.892,.954,.601]],[.429,[.892,.954,.601]],[.431,[.898,.957,.609]],[.432,[.898,.957,.609]],[.434,[.904,.959,.617]],[.436,[.904,.959,.617]],[.438,[.909,.962,.625]],[.44,[.909,.962,.625]],[.442,[.915,.964,.633]],[.444,[.915,.964,.633]],[.446,[.921,.967,.641]],[.448,[.921,.967,.641]],[.45,[.927,.969,.649]],[.452,[.927,.969,.649]],[.454,[.933,.972,.657]],[.456,[.933,.972,.657]],[.458,[.939,.974,.665]],[.46,[.939,.974,.665]],[.462,[.944,.977,.673]],[.464,[.944,.977,.673]],[.466,[.95,.979,.681]],[.468,[.95,.979,.681]],[.47,[.956,.982,.689]],[.472,[.956,.982,.689]],[.474,[.962,.984,.697]],[.476,[.962,.984,.697]],[.477,[.968,.986,.705]],[.479,[.968,.986,.705]],[.481,[.974,.989,.713]],[.483,[.974,.989,.713]],[.485,[.98,.991,.721]],[.487,[.98,.991,.721]],[.489,[.985,.994,.729]],[.491,[.985,.994,.729]],[.493,[.991,.996,.737]],[.495,[.991,.996,.737]],[.497,[.997,.999,.745]],[.499,[.997,.999,.745]],[.501,[1,.998,.745]],[.503,[1,.998,.745]],[.505,[1,.993,.737]],[.507,[1,.993,.737]],[.509,[1,.988,.729]],[.511,[1,.988,.729]],[.513,[.999,.983,.721]],[.515,[.999,.983,.721]],[.517,[.999,.979,.713]],[.519,[.999,.979,.713]],[.521,[.999,.974,.705]],[.523,[.999,.974,.705]],[.524,[.999,.969,.697]],[.526,[.999,.969,.697]],[.528,[.999,.964,.689]],[.53,[.999,.964,.689]],[.532,[.999,.959,.681]],[.534,[.999,.959,.681]],[.536,[.999,.955,.673]],[.538,[.999,.955,.673]],[.54,[.998,.95,.665]],[.542,[.998,.95,.665]],[.544,[.998,.945,.657]],[.546,[.998,.945,.657]],[.548,[.998,.94,.649]],[.55,[.998,.94,.649]],[.552,[.998,.936,.641]],[.554,[.998,.936,.641]],[.556,[.998,.931,.633]],[.558,[.998,.931,.633]],[.56,[.998,.926,.625]],[.562,[.998,.926,.625]],[.564,[.997,.921,.617]],[.566,[.997,.921,.617]],[.568,[.997,.917,.609]],[.569,[.997,.917,.609]],[.571,[.997,.912,.601]],[.573,[.997,.912,.601]],[.575,[.997,.907,.593]],[.577,[.997,.907,.593]],[.579,[.997,.902,.585]],[.581,[.997,.902,.585]],[.583,[.997,.898,.577]],[.585,[.997,.898,.577]],[.587,[.997,.893,.569]],[.589,[.997,.893,.569]],[.591,[.996,.888,.561]],[.593,[.996,.888,.561]],[.595,[.996,.883,.553]],[.597,[.996,.883,.553]],[.599,[.996,.878,.545]],[.601,[.996,.878,.545]],[.603,[.996,.871,.539]],[.605,[.996,.871,.539]],[.607,[.996,.863,.532]],[.609,[.996,.863,.532]],[.611,[.996,.855,.526]],[.613,[.996,.855,.526]],[.614,[.995,.848,.519]],[.616,[.995,.848,.519]],[.618,[.995,.84,.513]],[.62,[.995,.84,.513]],[.622,[.995,.832,.506]],[.624,[.995,.832,.506]],[.626,[.995,.825,.5]],[.628,[.995,.825,.5]],[.63,[.995,.817,.493]],[.632,[.995,.817,.493]],[.634,[.995,.809,.487]],[.636,[.995,.809,.487]],[.638,[.995,.802,.481]],[.64,[.995,.802,.481]],[.642,[.994,.794,.474]],[.644,[.994,.794,.474]],[.646,[.994,.786,.468]],[.648,[.994,.786,.468]],[.65,[.994,.778,.461]],[.652,[.994,.778,.461]],[.654,[.994,.771,.455]],[.656,[.994,.771,.455]],[.658,[.994,.763,.448]],[.659,[.994,.763,.448]],[.661,[.994,.755,.442]],[.663,[.994,.755,.442]],[.665,[.993,.748,.435]],[.667,[.993,.748,.435]],[.669,[.993,.74,.429]],[.671,[.993,.74,.429]],[.673,[.993,.732,.422]],[.675,[.993,.732,.422]],[.677,[.993,.725,.416]],[.679,[.993,.725,.416]],[.681,[.993,.717,.409]],[.683,[.993,.717,.409]],[.685,[.993,.709,.403]],[.687,[.993,.709,.403]],[.689,[.993,.702,.397]],[.691,[.993,.702,.397]],[.693,[.992,.694,.39]],[.695,[.992,.694,.39]],[.697,[.992,.686,.384]],[.699,[.992,.686,.384]],[.701,[.991,.677,.378]],[.703,[.991,.677,.378]],[.705,[.99,.667,.373]],[.706,[.99,.667,.373]],[.708,[.989,.657,.369]],[.71,[.989,.657,.369]],[.712,[.987,.647,.364]],[.714,[.987,.647,.364]],[.716,[.986,.637,.36]],[.718,[.986,.637,.36]],[.72,[.985,.627,.355]],[.722,[.985,.627,.355]],[.724,[.983,.617,.35]],[.726,[.983,.617,.35]],[.728,[.982,.607,.346]],[.73,[.982,.607,.346]],[.732,[.98,.597,.341]],[.734,[.98,.597,.341]],[.736,[.979,.587,.337]],[.738,[.979,.587,.337]],[.74,[.978,.577,.332]],[.742,[.978,.577,.332]],[.744,[.976,.567,.327]],[.746,[.976,.567,.327]],[.748,[.975,.557,.323]],[.75,[.975,.557,.323]],[.751,[.973,.547,.318]],[.753,[.973,.547,.318]],[.755,[.972,.537,.313]],[.757,[.972,.537,.313]],[.759,[.971,.527,.309]],[.761,[.971,.527,.309]],[.763,[.969,.517,.304]],[.765,[.969,.517,.304]],[.767,[.968,.507,.3]],[.769,[.968,.507,.3]],[.771,[.967,.497,.295]],[.773,[.967,.497,.295]],[.775,[.965,.487,.29]],[.777,[.965,.487,.29]],[.779,[.964,.477,.286]],[.781,[.964,.477,.286]],[.783,[.962,.467,.281]],[.785,[.962,.467,.281]],[.787,[.961,.457,.277]],[.789,[.961,.457,.277]],[.791,[.96,.447,.272]],[.793,[.96,.447,.272]],[.795,[.958,.437,.267]],[.796,[.958,.437,.267]],[.798,[.957,.427,.263]],[.8,[.957,.427,.263]],[.802,[.952,.418,.258]],[.804,[.952,.418,.258]],[.806,[.948,.409,.254]],[.808,[.948,.409,.254]],[.81,[.943,.399,.25]],[.812,[.943,.399,.25]],[.814,[.939,.39,.246]],[.816,[.939,.39,.246]],[.818,[.935,.381,.241]],[.82,[.935,.381,.241]],[.822,[.93,.371,.237]],[.824,[.93,.371,.237]],[.826,[.926,.362,.233]],[.828,[.926,.362,.233]],[.83,[.921,.352,.228]],[.832,[.921,.352,.228]],[.834,[.917,.343,.224]],[.836,[.917,.343,.224]],[.838,[.912,.334,.22]],[.84,[.912,.334,.22]],[.841,[.908,.324,.215]],[.843,[.908,.324,.215]],[.845,[.903,.315,.211]],[.847,[.903,.315,.211]],[.849,[.899,.305,.207]],[.851,[.899,.305,.207]],[.853,[.894,.296,.202]],[.855,[.894,.296,.202]],[.857,[.89,.287,.198]],[.859,[.89,.287,.198]],[.861,[.886,.277,.194]],[.863,[.886,.277,.194]],[.865,[.881,.268,.19]],[.867,[.881,.268,.19]],[.869,[.877,.259,.185]],[.871,[.877,.259,.185]],[.873,[.872,.249,.181]],[.875,[.872,.249,.181]],[.877,[.868,.24,.177]],[.879,[.868,.24,.177]],[.881,[.863,.23,.172]],[.883,[.863,.23,.172]],[.885,[.859,.221,.168]],[.886,[.859,.221,.168]],[.888,[.854,.212,.164]],[.89,[.854,.212,.164]],[.892,[.85,.202,.159]],[.894,[.85,.202,.159]],[.896,[.845,.193,.155]],[.898,[.845,.193,.155]],[.9,[.839,.185,.153]],[.902,[.839,.185,.153]],[.904,[.832,.177,.153]],[.906,[.832,.177,.153]],[.908,[.824,.17,.153]],[.91,[.824,.17,.153]],[.912,[.816,.162,.152]],[.914,[.816,.162,.152]],[.916,[.809,.155,.152]],[.918,[.809,.155,.152]],[.92,[.801,.148,.152]],[.922,[.801,.148,.152]],[.924,[.793,.14,.152]],[.926,[.793,.14,.152]],[.928,[.785,.133,.152]],[.93,[.785,.133,.152]],[.932,[.778,.125,.152]],[.933,[.778,.125,.152]],[.935,[.77,.118,.151]],[.937,[.77,.118,.151]],[.939,[.762,.111,.151]],[.941,[.762,.111,.151]],[.943,[.755,.103,.151]],[.945,[.755,.103,.151]],[.947,[.747,.096,.151]],[.949,[.747,.096,.151]],[.951,[.739,.089,.151]],[.953,[.739,.089,.151]],[.955,[.732,.081,.151]],[.957,[.732,.081,.151]],[.959,[.724,.074,.151]],[.961,[.724,.074,.151]],[.963,[.716,.066,.15]],[.965,[.716,.066,.15]],[.967,[.709,.059,.15]],[.969,[.709,.059,.15]],[.971,[.701,.052,.15]],[.973,[.701,.052,.15]],[.975,[.693,.044,.15]],[.977,[.693,.044,.15]],[.978,[.686,.037,.15]],[.98,[.686,.037,.15]],[.982,[.678,.03,.15]],[.984,[.678,.03,.15]],[.986,[.67,.022,.149]],[.988,[.67,.022,.149]],[.99,[.662,.015,.149]],[.992,[.662,.015,.149]],[.994,[.655,.007,.149]],[.996,[.655,.007,.149]],[.998,[.647,0,.149]],[1,[.647,0,.149]]]}),_vislibColorMaps);exports.vislibColorMaps=vislibColorMaps;var colorSchemas=Object.values(vislibColorMaps).map(function(_ref){var id=_ref.id,label=_ref.label;return{value:id,text:label}});exports.colorSchemas=colorSchemas},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tickFormatter=void 0;var _handlebars=_interopRequireDefault(__webpack_require__(645));var _lodash=__webpack_require__(1);var _field_formats=__webpack_require__(32);var _durations=__webpack_require__(644);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var tickFormatter=function tickFormatter(){var format=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"0,0.[00]";var template=arguments.length>1?arguments[1]:undefined;var getConfig=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!template)template="{{value}}";var render=_handlebars.default.compile(template,{knownHelpersOnly:true});var formatter;if((0,_durations.isDuration)(format)){var _format$split=format.split(","),_format$split2=_slicedToArray(_format$split,3),from=_format$split2[0],to=_format$split2[1],decimals=_format$split2[2];var DurationFormat=_field_formats.fieldFormats.getType("duration");formatter=new DurationFormat({inputFormat:_durations.inputFormats[from],outputFormat:_durations.outputFormats[to],outputPrecision:decimals})}else{var FieldFormat=_field_formats.fieldFormats.getType(format);if(FieldFormat){formatter=new FieldFormat(null,getConfig)}else{FieldFormat=_field_formats.fieldFormats.getType("number");formatter=new FieldFormat({pattern:format},getConfig)}}return function(val){var value;if(!(0,_lodash.isNumber)(val)){value=val}else{try{value=formatter.convert(val,"text")}catch(e){value=val}}try{return render({value:value})}catch(e){return String(value)}}};exports.tickFormatter=tickFormatter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeriesDragHandler=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SeriesDragHandler=function(_PureComponent){_inherits(SeriesDragHandler,_PureComponent);function SeriesDragHandler(){_classCallCheck(this,SeriesDragHandler);return _possibleConstructorReturn(this,_getPrototypeOf(SeriesDragHandler).apply(this,arguments))}_createClass(SeriesDragHandler,[{key:"render",value:function render(){var _this$props=this.props,dragHandleProps=_this$props.dragHandleProps,hideDragHandler=_this$props.hideDragHandler;return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("div",dragHandleProps,!hideDragHandler&&_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("tsvb.sort.dragToSortTooltip",{defaultMessage:"Drag to sort"})},_react.default.createElement(_eui.EuiIcon,{className:"tvbSeries__sortHandle","aria-label":_i18n.i18n.translate("tsvb.sort.dragToSortAriaLabel",{defaultMessage:"Drag to sort"}),type:"grab"}))))}}]);return SeriesDragHandler}(_react.PureComponent);exports.SeriesDragHandler=SeriesDragHandler;SeriesDragHandler.defaultProps={hideDragHandler:true};SeriesDragHandler.propTypes={hideDragHandler:_propTypes.default.bool,dragHandleProps:_propTypes.default.object.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ORIGIN=void 0;var ORIGIN;exports.ORIGIN=ORIGIN;(function(ORIGIN){ORIGIN["EMS"]="elastic_maps_service";ORIGIN["KIBANA_YML"]="self_hosted"})(ORIGIN||(exports.ORIGIN=ORIGIN={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"BasicOptions",{enumerable:true,get:function get(){return _basic_options.BasicOptions}});Object.defineProperty(exports,"NumberInputOption",{enumerable:true,get:function get(){return _number_input.NumberInputOption}});Object.defineProperty(exports,"RangeOption",{enumerable:true,get:function get(){return _range.RangeOption}});Object.defineProperty(exports,"SelectOption",{enumerable:true,get:function get(){return _select.SelectOption}});Object.defineProperty(exports,"SwitchOption",{enumerable:true,get:function get(){return _switch.SwitchOption}});Object.defineProperty(exports,"TextInputOption",{enumerable:true,get:function get(){return _text_input.TextInputOption}});Object.defineProperty(exports,"TruncateLabelsOption",{enumerable:true,get:function get(){return _truncate_labels.TruncateLabelsOption}});var _basic_options=__webpack_require__(1481);var _number_input=__webpack_require__(1482);var _range=__webpack_require__(1483);var _select=__webpack_require__(665);var _switch=__webpack_require__(664);var _text_input=__webpack_require__(1484);var _truncate_labels=__webpack_require__(1485)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Adapters",{enumerable:true,get:function get(){return _public.Adapters}});exports.ViewMode=void 0;var _public=__webpack_require__(428);var ViewMode;exports.ViewMode=ViewMode;(function(ViewMode){ViewMode["EDIT"]="edit";ViewMode["VIEW"]="view"})(ViewMode||(exports.ViewMode=ViewMode={}))},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.savedObjectManagementRegistry=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var registry=[];var savedObjectManagementRegistry={register:function register(service){registry.push(service)},all:function all(){return registry},get:function get(id){return _lodash.default.find(registry,{service:id})}};exports.savedObjectManagementRegistry=savedObjectManagementRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createVisualizeEditUrl=createVisualizeEditUrl;exports.VisualizeConstants=void 0;var VisualizeConstants={LANDING_PAGE_PATH:"/visualize",WIZARD_STEP_1_PAGE_PATH:"/visualize/new",WIZARD_STEP_2_PAGE_PATH:"/visualize/new/configure",CREATE_PATH:"/visualize/create",EDIT_PATH:"/visualize/edit"};exports.VisualizeConstants=VisualizeConstants;function createVisualizeEditUrl(id){return"".concat(VisualizeConstants.EDIT_PATH,"/").concat(id)}},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.subscribeWithScope=subscribeWithScope;var _fatal_error=__webpack_require__(521);function callInDigest($scope,fn){try{if($scope.$root.$$phase){fn()}else{$scope.$apply(function(){return fn()})}}catch(error){(0,_fatal_error.fatalError)(error)}}function subscribeWithScope($scope,observable,observer){return observable.subscribe({next:function next(value){if(observer&&observer.next){callInDigest($scope,function(){return observer.next(value)})}},error:function error(_error){callInDigest($scope,function(){if(observer&&observer.error){observer.error(_error)}else{throw new Error("Uncaught error in subscribeWithScope(): ".concat(_error?_error.stack||_error.message:_error))}})},complete:function complete(){if(observer&&observer.complete){callInDigest($scope,function(){return observer.complete()})}}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Storage",{enumerable:true,get:function get(){return _storage.Storage}});__webpack_require__(908);var _storage=__webpack_require__(526)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"KbnUrlProvider",{enumerable:true,get:function get(){return _url.KbnUrlProvider}});Object.defineProperty(exports,"RedirectWhenMissingProvider",{enumerable:true,get:function get(){return _redirect_when_missing.RedirectWhenMissingProvider}});Object.defineProperty(exports,"modifyUrl",{enumerable:true,get:function get(){return _utils.modifyUrl}});var _url=__webpack_require__(925);var _redirect_when_missing=__webpack_require__(927);var _utils=__webpack_require__(387)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PersistedState",{enumerable:true,get:function get(){return _persisted_state.PersistedState}});__webpack_require__(926);var _persisted_state=__webpack_require__(532)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"VisFiltersProvider",{enumerable:true,get:function get(){return _vis_filters.VisFiltersProvider}});Object.defineProperty(exports,"createFilter",{enumerable:true,get:function get(){return _vis_filters.createFilter}});Object.defineProperty(exports,"createFiltersFromEvent",{enumerable:true,get:function get(){return _vis_filters.createFiltersFromEvent}});var _vis_filters=__webpack_require__(957)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SwitchParamEditor=SwitchParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SwitchParamEditor(_ref){var value=_ref.value,setValue=_ref.setValue,dataTestSubj=_ref.dataTestSubj,displayToolTip=_ref.displayToolTip,displayLabel=_ref.displayLabel,disabled=_ref.disabled;return _react.default.createElement("div",{className:"visEditorSidebar__aggParamFormRow"},_react.default.createElement(_eui.EuiToolTip,{content:displayToolTip,delay:"long",position:"right"},_react.default.createElement(_eui.EuiSwitch,{label:displayLabel,checked:value,disabled:disabled,"data-test-subj":dataTestSubj,onChange:function onChange(ev){return setValue(ev.target.checked)}})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PANEL_TYPES=void 0;var PANEL_TYPES={TABLE:"table",GAUGE:"gauge",MARKDOWN:"markdown",TOP_N:"top_n",TIMESERIES:"timeseries",METRIC:"metric"};exports.PANEL_TYPES=PANEL_TYPES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isBackgroundInverted=exports.isBackgroundDark=exports.isThemeDark=void 0;var _color=_interopRequireDefault(__webpack_require__(659));var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var IS_DARK_THEME=_chrome.default.getUiSettingsClient().get("theme:darkMode");var isColorDark=function isColorDark(c){return(0,_color.default)(c).luminosity()<.45};var isThemeDark=function isThemeDark(currentTheme){var themeIsDark=currentTheme||IS_DARK_THEME;if(typeof currentTheme==="string"){themeIsDark=isColorDark(currentTheme)}return themeIsDark};exports.isThemeDark=isThemeDark;var isBackgroundDark=function isBackgroundDark(backgroundColor,currentTheme){var themeIsDark=isThemeDark(currentTheme);if(backgroundColor===undefined||backgroundColor==="inherit"){return themeIsDark}return isColorDark(backgroundColor)};exports.isBackgroundDark=isBackgroundDark;var isBackgroundInverted=function isBackgroundInverted(backgroundColor,currentTheme){var backgroundIsDark=isBackgroundDark(backgroundColor,currentTheme);var themeIsDark=isThemeDark(currentTheme);return backgroundIsDark!==themeIsDark};exports.isBackgroundInverted=isBackgroundInverted},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TopNavMenu",{enumerable:true,get:function get(){return _top_nav_menu.TopNavMenu}});Object.defineProperty(exports,"TopNavMenuData",{enumerable:true,get:function get(){return _top_nav_menu.TopNavMenuData}});Object.defineProperty(exports,"Markdown",{enumerable:true,get:function get(){return _markdown.Markdown}});Object.defineProperty(exports,"MarkdownSimple",{enumerable:true,get:function get(){return _markdown.MarkdownSimple}});var _top_nav_menu=__webpack_require__(1370);var _markdown=__webpack_require__(533)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeriesEditor=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(1);var _re_id_series=__webpack_require__(1393);var _series=__webpack_require__(1394);var _collection_actions=__webpack_require__(74);var _new_series_fn=__webpack_require__(1448);var _eui=__webpack_require__(3);var _reorder=__webpack_require__(1449);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DROPPABLE_ID="series_editor_dnd";var SeriesEditor=function(_Component){_inherits(SeriesEditor,_Component);function SeriesEditor(){var _getPrototypeOf2;var _this;_classCallCheck(this,SeriesEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SeriesEditor)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"handleClone",function(series){var newSeries=(0,_re_id_series.reIdSeries)(series);_collection_actions.handleAdd.call(null,_this.props,function(){return newSeries})});_defineProperty(_assertThisInitialized(_this),"sortHandler",function(_ref){var destination=_ref.destination,source=_ref.source;var canSort=destination&&source;if(canSort){var sortFunction=_this.getSortFunction({destination:destination,source:source});sortFunction({destination:destination,source:source})}});_defineProperty(_assertThisInitialized(_this),"getSortFunction",function(_ref2){var destination=_ref2.destination,source=_ref2.source;return destination.droppableId===source.droppableId&&source.droppableId===DROPPABLE_ID?_this.sortSeries:_this.sortAggregations});_defineProperty(_assertThisInitialized(_this),"sortSeries",function(_ref3){var destination=_ref3.destination,source=_ref3.source;_this.props.onChange({series:(0,_reorder.reorder)(_toConsumableArray(_this.props.model.series),source.index,destination.index)})});_defineProperty(_assertThisInitialized(_this),"sortAggregations",function(_ref4){var destination=_ref4.destination,source=_ref4.source;var extractId=function extractId(_ref5){var droppableId=_ref5.droppableId;return droppableId.split(":")[1]};var id=extractId(source);var canSort=id===extractId(destination);if(canSort){var model=_toConsumableArray(_this.props.model.series);var series=(0,_lodash.find)(model,{id:id});series.metrics=(0,_reorder.reorder)(_toConsumableArray(series.metrics),source.index,destination.index);_this.props.onChange({series:model})}});return _this}_createClass(SeriesEditor,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,limit=_this$props.limit,model=_this$props.model,name=_this$props.name,fields=_this$props.fields,colorPicker=_this$props.colorPicker;var list=model[name].filter(function(val,index){return index<(limit||Infinity)});return _react.default.createElement(_eui.EuiDragDropContext,{onDragEnd:this.sortHandler},_react.default.createElement(_eui.EuiDroppable,{droppableId:DROPPABLE_ID,spacing:"l",type:"MACRO"},list.map(function(row,idx){return _react.default.createElement(_eui.EuiDraggable,{spacing:"m",key:row.id,index:idx,customDragHandle:true,draggableId:"".concat(DROPPABLE_ID,":").concat(row.id),disableInteractiveElementBlocking:true},function(provided){return _react.default.createElement(_series.Series,{className:"tvbSeriesEditor",colorPicker:colorPicker,disableAdd:model[name].length>=limit,disableDelete:model[name].length<2,fields:fields,onAdd:function onAdd(){return(0,_collection_actions.handleAdd)(_this2.props,_new_series_fn.newSeriesFn)},onChange:function onChange(doc){return(0,_collection_actions.handleChange)(_this2.props,doc)},onClone:function onClone(){return _this2.handleClone(row)},onDelete:function onDelete(){return(0,_collection_actions.handleDelete)(_this2.props,row)},model:row,panel:model,dragHandleProps:provided.dragHandleProps})})})))}}]);return SeriesEditor}(_react.Component);exports.SeriesEditor=SeriesEditor;SeriesEditor.defaultProps={name:"series",limit:Infinity,colorPicker:true};SeriesEditor.propTypes={colorPicker:_propTypes.default.bool,fields:_propTypes.default.object,limit:_propTypes.default.number,model:_propTypes.default.object,name:_propTypes.default.string,onChange:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Aggs=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _eui=__webpack_require__(3);var _agg=__webpack_require__(1404);var _new_metric_agg_fn=__webpack_require__(433);var _series_change_handler=__webpack_require__(1432);var _collection_actions=__webpack_require__(74);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var DROPPABLE_ID="aggs_dnd";var Aggs=function(_PureComponent){_inherits(Aggs,_PureComponent);function Aggs(){_classCallCheck(this,Aggs);return _possibleConstructorReturn(this,_getPrototypeOf(Aggs).apply(this,arguments))}_createClass(Aggs,[{key:"render",value:function render(){var _this=this;var _this$props=this.props,panel=_this$props.panel,model=_this$props.model,fields=_this$props.fields,uiRestrictions=_this$props.uiRestrictions;var list=model.metrics;var onChange=(0,_series_change_handler.seriesChangeHandler)(this.props,list);return _react.default.createElement(_eui.EuiDroppable,{droppableId:"".concat(DROPPABLE_ID,":").concat(model.id),type:"MICRO",spacing:"s"},list.map(function(row,idx){return _react.default.createElement(_eui.EuiDraggable,{spacing:"s",key:row.id,index:idx,customDragHandle:true,draggableId:"".concat(DROPPABLE_ID,":").concat(model.id,":").concat(row.id)},function(provided){return _react.default.createElement(_agg.Agg,{key:row.id,disableDelete:list.length<2,fields:fields,model:row,onAdd:function onAdd(){return(0,_collection_actions.handleAdd)(_this.props,_new_metric_agg_fn.newMetricAggFn)},onChange:onChange,onDelete:function onDelete(){return(0,_collection_actions.handleDelete)(_this.props,row)},panel:panel,series:model,siblings:list,uiRestrictions:uiRestrictions,dragHandleProps:provided.dragHandleProps})})}))}}]);return Aggs}(_react.PureComponent);exports.Aggs=Aggs;Aggs.propTypes={name:_propTypes.default.string.isRequired,fields:_propTypes.default.object.isRequired,model:_propTypes.default.object.isRequired,onChange:_propTypes.default.func.isRequired,panel:_propTypes.default.object.isRequired,dragHandleProps:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isTimerangeModeEnabled=exports.isGroupByFieldsEnabled=exports.isFieldEnabled=exports.isMetricEnabled=void 0;var _lodash=__webpack_require__(1);var _ui_restrictions=__webpack_require__(1407);var checkUIRestrictions=function checkUIRestrictions(key){var restrictions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_ui_restrictions.DEFAULT_UI_RESTRICTION;var type=arguments.length>2?arguments[2]:undefined;var isAllEnabled=(0,_lodash.get)(restrictions,"".concat(type,".*"),true);return isAllEnabled||Boolean((0,_lodash.get)(restrictions,type,{})[key])};var isMetricEnabled=function isMetricEnabled(key,restrictions){return checkUIRestrictions(key,restrictions,_ui_restrictions.RESTRICTIONS_KEYS.WHITE_LISTED_METRICS)};exports.isMetricEnabled=isMetricEnabled;var isFieldEnabled=function isFieldEnabled(field,metricType){var restrictions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_ui_restrictions.DEFAULT_UI_RESTRICTION;if(isMetricEnabled(metricType,restrictions)){return checkUIRestrictions(field,restrictions[_ui_restrictions.RESTRICTIONS_KEYS.WHITE_LISTED_METRICS],metricType)}return false};exports.isFieldEnabled=isFieldEnabled;var isGroupByFieldsEnabled=function isGroupByFieldsEnabled(key,restrictions){return checkUIRestrictions(key,restrictions,_ui_restrictions.RESTRICTIONS_KEYS.WHITE_LISTED_GROUP_BY_FIELDS)};exports.isGroupByFieldsEnabled=isGroupByFieldsEnabled;var isTimerangeModeEnabled=function isTimerangeModeEnabled(key,restrictions){return checkUIRestrictions(key,restrictions,_ui_restrictions.RESTRICTIONS_KEYS.WHITE_LISTED_TIMERANGE_MODES)};exports.isTimerangeModeEnabled=isTimerangeModeEnabled},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _common=__webpack_require__(88);Object.keys(_common).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _common[key]}})})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableFactoryNotFoundError=exports.PanelNotFoundError=exports.IncompatibleActionError=void 0;var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IncompatibleActionError=function(_Error){_inherits(IncompatibleActionError,_Error);function IncompatibleActionError(){var _this;_classCallCheck(this,IncompatibleActionError);_this=_possibleConstructorReturn(this,_getPrototypeOf(IncompatibleActionError).call(this,_i18n.i18n.translate("embeddableApi.errors.incompatibleAction",{defaultMessage:"Action is incompatible"})));_defineProperty(_assertThisInitialized(_this),"code","INCOMPATIBLE_ACTION");return _this}return IncompatibleActionError}(_wrapNativeSuper(Error));exports.IncompatibleActionError=IncompatibleActionError;var PanelNotFoundError=function(_Error2){_inherits(PanelNotFoundError,_Error2);function PanelNotFoundError(){var _this2;_classCallCheck(this,PanelNotFoundError);_this2=_possibleConstructorReturn(this,_getPrototypeOf(PanelNotFoundError).call(this,_i18n.i18n.translate("embeddableApi.errors.paneldoesNotExist",{defaultMessage:"Panel not found"})));_defineProperty(_assertThisInitialized(_this2),"code","PANEL_NOT_FOUND");return _this2}return PanelNotFoundError}(_wrapNativeSuper(Error));exports.PanelNotFoundError=PanelNotFoundError;var EmbeddableFactoryNotFoundError=function(_Error3){_inherits(EmbeddableFactoryNotFoundError,_Error3);function EmbeddableFactoryNotFoundError(type){var _this3;_classCallCheck(this,EmbeddableFactoryNotFoundError);_this3=_possibleConstructorReturn(this,_getPrototypeOf(EmbeddableFactoryNotFoundError).call(this,_i18n.i18n.translate("embeddableApi.errors.embeddableFactoryNotFound",{defaultMessage:"{type} can't be loaded. Please upgrade to the default distribution of Elasticsearch and Kibana with the appropriate license.",values:{type:type}})));_defineProperty(_assertThisInitialized(_this3),"code","EMBEDDABLE_FACTORY_NOT_FOUND");return _this3}return EmbeddableFactoryNotFoundError}(_wrapNativeSuper(Error));exports.EmbeddableFactoryNotFoundError=EmbeddableFactoryNotFoundError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={Action:true,ActionContext:true};Object.defineProperty(exports,"Action",{enumerable:true,get:function get(){return _action.Action}});Object.defineProperty(exports,"ActionContext",{enumerable:true,get:function get(){return _action.ActionContext}});var _action=__webpack_require__(442);var _apply_filter_action=__webpack_require__(1620);Object.keys(_apply_filter_action).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _apply_filter_action[key]}})});var _edit_panel_action=__webpack_require__(1621);Object.keys(_edit_panel_action).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _edit_panel_action[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"docTitle",{enumerable:true,get:function get(){return _doc_title.docTitle}});var _doc_title=__webpack_require__(727)},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(8)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getUnhashableStatesProvider",{enumerable:true,get:function get(){return _get_unhashable_states_provider.getUnhashableStatesProvider}});Object.defineProperty(exports,"hashUrl",{enumerable:true,get:function get(){return _hash_url.hashUrl}});Object.defineProperty(exports,"unhashQueryString",{enumerable:true,get:function get(){return _unhash_query_string.unhashQueryString}});Object.defineProperty(exports,"unhashUrl",{enumerable:true,get:function get(){return _unhash_url.unhashUrl}});var _get_unhashable_states_provider=__webpack_require__(529);var _hash_url=__webpack_require__(921);var _unhash_query_string=__webpack_require__(531);var _unhash_url=__webpack_require__(922)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index=__webpack_require__(399);Object.keys(_index).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.documentationLinks=exports.ELASTIC_WEBSITE_URL=exports.DOC_LINK_VERSION=void 0;var _new_platform=__webpack_require__(8);var DOC_LINK_VERSION=_new_platform.npStart.core.docLinks.DOC_LINK_VERSION;exports.DOC_LINK_VERSION=DOC_LINK_VERSION;var ELASTIC_WEBSITE_URL=_new_platform.npStart.core.docLinks.ELASTIC_WEBSITE_URL;exports.ELASTIC_WEBSITE_URL=ELASTIC_WEBSITE_URL;var documentationLinks=_new_platform.npStart.core.docLinks.links;exports.documentationLinks=documentationLinks},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortenDottedString=shortenDottedString;var DOT_PREFIX_RE=/(.).+?\./g;function shortenDottedString(input){return typeof input!=="string"?input:input.replace(DOT_PREFIX_RE,"$1.")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggConfig=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _field_formats=__webpack_require__(32);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AggConfig=function(){_createClass(AggConfig,null,[{key:"ensureIds",value:function ensureIds(list){var have=[];var haveNot=[];list.forEach(function(obj){(obj.id?have:haveNot).push(obj)});var nextId=AggConfig.nextId(have);haveNot.forEach(function(obj){obj.id=String(nextId++)});return list}},{key:"nextId",value:function nextId(list){return 1+list.reduce(function(max,obj){return Math.max(max,+obj.id||0)},0)}}]);function AggConfig(aggConfigs){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,AggConfig);this.aggConfigs=aggConfigs;this.id=String(opts.id||AggConfig.nextId(aggConfigs));this._opts=opts;this.enabled=typeof opts.enabled==="boolean"?opts.enabled:true;this.params={};this.type=opts.type;this.schema=opts.schema;this.setParams(opts.params||{})}_createClass(AggConfig,[{key:"setParams",value:function setParams(from){var _this=this;from=from||this.params||{};var to=this.params={};this.getAggParams().forEach(function(aggParam){var val=from[aggParam.name];if(val==null){if(aggParam.default==null)return;if(!_lodash.default.isFunction(aggParam.default)){val=aggParam.default}else{val=aggParam.default(_this);if(val==null)return}}if(aggParam.deserialize){var isTyped=_lodash.default.isFunction(aggParam.type);var isType=isTyped&&val instanceof aggParam.type;var isObject=!isTyped&&_lodash.default.isObject(val);var isDeserialized=isType||isObject;if(!isDeserialized){val=aggParam.deserialize(val,_this)}to[aggParam.name]=val;return}to[aggParam.name]=_lodash.default.cloneDeep(val)})}},{key:"write",value:function write(aggs){return this.type.params.write(this,aggs)}},{key:"isFilterable",value:function isFilterable(){return _lodash.default.isFunction(this.type.createFilter)}},{key:"createFilter",value:function createFilter(key){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!this.isFilterable()){throw new TypeError('The "'.concat(this.type.title,'" aggregation does not support filtering.'))}var field=this.getField();var label=this.getFieldDisplayName();if(field&&!field.filterable){var message='The "'.concat(label,'" field can not be used for filtering.');if(field.scripted){message='The "'.concat(label,'" field is scripted and can not be used for filtering.')}throw new TypeError(message)}return this.type.createFilter(this,key,params)}},{key:"onSearchRequestStart",value:function onSearchRequestStart(searchSource,searchRequest){var _this2=this;if(!this.type){return Promise.resolve()}return Promise.all(this.type.params.map(function(param){return param.modifyAggConfigOnSearchRequestStart(_this2,searchSource,searchRequest)}))}},{key:"toDsl",value:function toDsl(aggConfigs){if(this.type.hasNoDsl)return;var output=this.write(aggConfigs);var configDsl={};configDsl[this.type.dslName||this.type.name]=output.params;if(this.subAggs&&!output.subAggs)output.subAggs=this.subAggs;if(output.subAggs){var subDslLvl=configDsl.aggs||(configDsl.aggs={});output.subAggs.forEach(function nestAdhocSubAggs(subAggConfig){subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)})}if(output.parentAggs){var _subDslLvl=configDsl.parentAggs||(configDsl.parentAggs={});output.parentAggs.forEach(function nestAdhocSubAggs(subAggConfig){_subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)})}return configDsl}},{key:"toJSON",value:function toJSON(){var _this3=this;var params=this.params;var outParams=_lodash.default.transform(this.getAggParams(),function(out,aggParam){var val=params[aggParam.name];if(val==null)return;if(aggParam.serialize)val=aggParam.serialize(val,_this3);if(val==null)return;out[aggParam.name]=_lodash.default.cloneDeep(val)},{});return{id:this.id,enabled:this.enabled,type:this.type&&this.type.name,schema:this.schema&&this.schema.name,params:outParams}}},{key:"getAggParams",value:function getAggParams(){return[].concat(_toConsumableArray(this.type?this.type.params.raw:[]),_toConsumableArray(_lodash.default.has(this,"schema.params")?this.schema.params.raw:[]))}},{key:"getRequestAggs",value:function getRequestAggs(){if(!this.type)return;return this.type.getRequestAggs(this)||[this]}},{key:"getResponseAggs",value:function getResponseAggs(){if(!this.type)return;return this.type.getResponseAggs(this)||[this]}},{key:"getValue",value:function getValue(bucket){return this.type.getValue(this,bucket)}},{key:"getKey",value:function getKey(bucket,key){return this.type.getKey(bucket,key,this)}},{key:"getFieldDisplayName",value:function getFieldDisplayName(){var field=this.getField();return field?field.displayName||this.fieldName():""}},{key:"getField",value:function getField(){return this.params.field}},{key:"makeLabel",value:function makeLabel(){var percentageMode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.params.customLabel){return this.params.customLabel}if(!this.type)return"";return percentageMode?_i18n.i18n.translate("common.ui.vis.aggConfig.percentageOfLabel",{defaultMessage:"Percentage of {label}",values:{label:this.type.makeLabel(this)}}):"".concat(this.type.makeLabel(this))}},{key:"getIndexPattern",value:function getIndexPattern(){return _lodash.default.get(this.aggConfigs,"indexPattern",null)}},{key:"getTimeRange",value:function getTimeRange(){return _lodash.default.get(this.aggConfigs,"timeRange",null)}},{key:"fieldFormatter",value:function fieldFormatter(contentType,defaultFormat){var format=this.type&&this.type.getFormat(this);if(format)return format.getConverterFor(contentType);return this.fieldOwnFormatter(contentType,defaultFormat)}},{key:"fieldOwnFormatter",value:function fieldOwnFormatter(contentType,defaultFormat){var field=this.getField();var format=field&&field.format;if(!format)format=defaultFormat;if(!format)format=_field_formats.fieldFormats.getDefaultInstance("string");return format.getConverterFor(contentType)}},{key:"fieldName",value:function fieldName(){var field=this.getField();return field?field.name:""}},{key:"fieldIsTimeField",value:function fieldIsTimeField(){var timeFieldName=this.getIndexPattern().timeFieldName;return timeFieldName&&this.fieldName()===timeFieldName}},{key:"type",get:function get(){return this.__type},set:function set(type){if(this.__typeDecorations){_lodash.default.forOwn(this.__typeDecorations,function(prop,name){delete this[name]},this)}if(_lodash.default.isString(type)){type=__webpack_require__(347).aggTypes.byName[type]}if(type&&_lodash.default.isFunction(type.decorateAggConfig)){this.__typeDecorations=type.decorateAggConfig();Object.defineProperties(this,this.__typeDecorations)}this.__type=type;var fieldParam=_lodash.default.get(this,"type.params.byName.field");var availableFields=fieldParam?fieldParam.getAvailableFields(this.getIndexPattern().fields):[];this.setParams({row:this.params.row,field:_lodash.default.get(availableFields,["byName",this.getField()])})}},{key:"schema",get:function get(){return this.__schema},set:function set(schema){if(_lodash.default.isString(schema)&&this.aggConfigs.schemas){schema=this.aggConfigs.schemas.byName[schema]}this.__schema=schema}}]);return AggConfig}();exports.AggConfig=AggConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseParamType=BaseParamType;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function BaseParamType(config){_lodash.default.assign(this,config)}BaseParamType.prototype.modifyAggConfigOnSearchRequestStart=function(aggconfig,searchSource,searchRequest){}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parentPipelineAggHelper=void 0;var _metric_agg=__webpack_require__(1080);var _sub_agg=__webpack_require__(1081);var _lodash=_interopRequireDefault(__webpack_require__(1));var _agg_config=__webpack_require__(118);var _schemas=__webpack_require__(33);var _parent_pipeline_agg_writer=__webpack_require__(1092);var _nested_agg_helpers=__webpack_require__(591);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!geo_bounds","!geo_centroid"];var metricAggSchema=new _schemas.Schemas([{group:"none",name:"metricAgg",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.metricAggTitle",{defaultMessage:"Metric agg"}),hideCustomLabel:true,aggFilter:metricAggFilter}]).all[0];var parentPipelineAggHelper={subtype:_i18n.i18n.translate("common.ui.aggTypes.metrics.parentPipelineAggregationsSubtypeTitle",{defaultMessage:"Parent Pipeline Aggregations"}),params:function params(){return[{name:"metricAgg",editorComponent:_metric_agg.MetricAggParamEditor,default:"custom",write:_parent_pipeline_agg_writer.parentPipelineAggWriter},{name:"customMetric",editorComponent:_sub_agg.SubAggParamEditor,type:_agg_config.AggConfig,default:null,serialize:function serialize(customMetric){return customMetric.toJSON()},deserialize:function deserialize(state,agg){return this.makeAgg(agg,state)},makeAgg:function makeAgg(termsAgg,state){state=state||{type:"count"};state.schema=metricAggSchema;var metricAgg=termsAgg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});metricAgg.id=termsAgg.id+"-metric";return metricAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customMetric"),write:_lodash.default.noop},{name:"buckets_path",write:_lodash.default.noop}]},getFormat:function getFormat(agg){var subAgg;if(agg.params.customMetric){subAgg=agg.params.customMetric}else{subAgg=agg.aggConfigs.byId[agg.params.metricAgg]}return subAgg.type.getFormat(subAgg)}};exports.parentPipelineAggHelper=parentPipelineAggHelper},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(44)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"searchRequestQueue",{enumerable:true,get:function get(){return _search_request_queue.searchRequestQueue}});var _search_request_queue=__webpack_require__(1179)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Split=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _uuid=_interopRequireDefault(__webpack_require__(31));var _lodash=__webpack_require__(1);var _terms=__webpack_require__(1435);var _filter=__webpack_require__(1437);var _filters=__webpack_require__(1438);var _everything=__webpack_require__(1440);var _unsupported_split=__webpack_require__(1441);var _check_ui_restrictions=__webpack_require__(107);var _get_default_query_language=__webpack_require__(43);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SPLIT_MODES={FILTERS:"filters",FILTER:"filter",TERMS:"terms",EVERYTHING:"everything"};var Split=function(_Component){_inherits(Split,_Component);function Split(){_classCallCheck(this,Split);return _possibleConstructorReturn(this,_getPrototypeOf(Split).apply(this,arguments))}_createClass(Split,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){var model=nextProps.model;if(model.split_mode==="filters"&&!model.split_filters){this.props.onChange({split_filters:[{color:model.color,id:_uuid.default.v1(),filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()}}]})}}},{key:"getComponent",value:function getComponent(splitMode,uiRestrictions){if(!(0,_check_ui_restrictions.isGroupByFieldsEnabled)(splitMode,uiRestrictions)){return _unsupported_split.SplitUnsupported}switch(splitMode){case SPLIT_MODES.TERMS:return _terms.SplitByTerms;case SPLIT_MODES.FILTER:return _filter.SplitByFilter;case SPLIT_MODES.FILTERS:return _filters.SplitByFilters;default:return _everything.SplitByEverything}}},{key:"render",value:function render(){var _this$props=this.props,model=_this$props.model,panel=_this$props.panel,uiRestrictions=_this$props.uiRestrictions;var indexPattern=model.override_index_pattern&&model.series_index_pattern||panel.index_pattern;var splitMode=(0,_lodash.get)(this.props,"model.split_mode",SPLIT_MODES.EVERYTHING);var Component=this.getComponent(splitMode,uiRestrictions);return _react.default.createElement(Component,{model:model,indexPattern:indexPattern,fields:this.props.fields,onChange:this.props.onChange,uiRestrictions:uiRestrictions})}}]);return Split}(_react.Component);exports.Split=Split;Split.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func,panel:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupBySelect=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _check_ui_restrictions=__webpack_require__(107);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function GroupBySelectUi(props){var intl=props.intl,uiRestrictions=props.uiRestrictions;var modeOptions=[{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.everythingLabel",defaultMessage:"Everything"}),value:"everything"},{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.filterLabel",defaultMessage:"Filter"}),value:"filter"},{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.filtersLabel",defaultMessage:"Filters"}),value:"filters"},{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.termsLabel",defaultMessage:"Terms"}),value:"terms"}].map(function(field){return _objectSpread({},field,{disabled:!(0,_check_ui_restrictions.isGroupByFieldsEnabled)(field.value,uiRestrictions)})});var selectedValue=props.value||"everything";var selectedOption=modeOptions.find(function(option){return selectedValue===option.value});return _react.default.createElement(_eui.EuiComboBox,{id:props.id,isClearable:false,options:modeOptions,selectedOptions:[selectedOption],onChange:props.onChange,singleSelection:{asPlainText:true}})}GroupBySelectUi.propTypes={onChange:_propTypes.default.func,value:_propTypes.default.string,uiRestrictions:_propTypes.default.object};var GroupBySelect=(0,_react2.injectI18n)(GroupBySelectUi);exports.GroupBySelect=GroupBySelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.colorSchemas=exports.truncatedColorMaps=void 0;var _colormaps=__webpack_require__(84);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var truncatedColorMaps={};exports.truncatedColorMaps=truncatedColorMaps;var colormaps=_colormaps.vislibColorMaps;for(var key in colormaps){if(colormaps.hasOwnProperty(key)){truncatedColorMaps[key]=_objectSpread({},colormaps[key],{value:colormaps[key].value.slice(Math.floor(colormaps[key].value.length/4))})}}var colorSchemas=Object.values(truncatedColorMaps).map(function(_ref){var id=_ref.id,label=_ref.label;return{value:id,text:label}});exports.colorSchemas=colorSchemas},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateLegacyQuery=migrateLegacyQuery;var _lodash=__webpack_require__(1);function migrateLegacyQuery(query){if(!(0,_lodash.has)(query,"language")){return{query:query,language:"lucene"}}return query}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchSourceProvider",{enumerable:true,get:function get(){return _search_source.SearchSourceProvider}});Object.defineProperty(exports,"addSearchStrategy",{enumerable:true,get:function get(){return _search_strategy.addSearchStrategy}});Object.defineProperty(exports,"hasSearchStategyForIndexPattern",{enumerable:true,get:function get(){return _search_strategy.hasSearchStategyForIndexPattern}});Object.defineProperty(exports,"isDefaultTypeIndexPattern",{enumerable:true,get:function get(){return _search_strategy.isDefaultTypeIndexPattern}});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search_strategy.SearchError}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search_strategy.getSearchErrorType}});__webpack_require__(1932);var _search_source=__webpack_require__(355);var _search_strategy=__webpack_require__(610)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(703)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2044)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2040)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2039)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2041)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2042)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2043)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2045)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2046)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2047)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2048)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2049)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2050)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2051)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2052)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1890)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1891)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1892)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1893)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1894)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1896)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1895)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1898)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1897)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1899)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1900)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1901)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1902)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(277)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1903)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1904)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1905)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1906)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1908)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1907)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1909)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1910)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1911)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1912)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1913)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1914)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1916)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1915)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1887)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1888)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1889)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1917)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1918)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1920)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1921)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1923)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1924)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1925)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1926)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1927)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1928)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1929)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1930)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1931)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1932)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1933)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1934)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1935)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1937)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1938)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1939)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1940)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1941)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1942)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1943)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1944)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1945)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1946)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1947)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1948)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1949)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1951)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1952)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1953)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1954)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1955)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1956)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1957)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1958)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1959)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1960)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1961)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1962)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1963)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1964)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1965)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1966)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1967)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1968)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1969)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1970)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1971)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1975)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1972)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1973)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1974)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1976)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1977)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1978)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1979)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1980)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1981)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1982)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1984)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1985)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1986)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1988)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1987)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1991)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1992)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1994)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1995)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1998)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1996)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1997)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1999)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2e3)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2001)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2002)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2004)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2003)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2005)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2006)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2007)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2008)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2009)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2014)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2015)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2019)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2020)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(760)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2023)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2024)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2025)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2026)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2027)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2028)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2029)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2031)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2032)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2038)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2036)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2037)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2010)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2011)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2012)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2013)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2016)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2017)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2018)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2021)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2022)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2030)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2033)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2034)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2035)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2059)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2060)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2067)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2065)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2066)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2085)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2086)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2083)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2084)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2053)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2054)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2055)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2056)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2058)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2057)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2061)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2062)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2063)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2064)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2068)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2069)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2070)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2071)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2072)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2074)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2073)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2075)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2076)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2077)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2078)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2079)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2080)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2081)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2082)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2087)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2088)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2089)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2090)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2091)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2092)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2094)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2096)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(767)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(651)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2606)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2097)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2733)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1857)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"BinderBase",{enumerable:true,get:function get(){return _binder.BinderBase}});Object.defineProperty(exports,"BinderFor",{enumerable:true,get:function get(){return _binder_for.BinderFor}});Object.defineProperty(exports,"deepCloneWithBuffers",{enumerable:true,get:function get(){return _deep_clone_with_buffers.deepCloneWithBuffers}});Object.defineProperty(exports,"fromRoot",{enumerable:true,get:function get(){return _from_root.fromRoot}});Object.defineProperty(exports,"pkg",{enumerable:true,get:function get(){return _package_json.pkg}});Object.defineProperty(exports,"unset",{enumerable:true,get:function get(){return _unset.unset}});Object.defineProperty(exports,"encodeQueryComponent",{enumerable:true,get:function get(){return _encode_query_component.encodeQueryComponent}});Object.defineProperty(exports,"getFlattenedObject",{enumerable:true,get:function get(){return _get_flattened_object.getFlattenedObject}});Object.defineProperty(exports,"watchStdioForLine",{enumerable:true,get:function get(){return _watch_stdio_for_line.watchStdioForLine}});Object.defineProperty(exports,"IS_KIBANA_DISTRIBUTABLE",{enumerable:true,get:function get(){return _artifact_type.IS_KIBANA_DISTRIBUTABLE}});Object.defineProperty(exports,"IS_KIBANA_RELEASE",{enumerable:true,get:function get(){return _artifact_type.IS_KIBANA_RELEASE}});Object.defineProperty(exports,"getKbnTypeNames",{enumerable:true,get:function get(){return _kbn_field_types.getKbnTypeNames}});Object.defineProperty(exports,"getKbnFieldType",{enumerable:true,get:function get(){return _kbn_field_types.getKbnFieldType}});Object.defineProperty(exports,"castEsToKbnFieldTypeName",{enumerable:true,get:function get(){return _kbn_field_types.castEsToKbnFieldTypeName}});Object.defineProperty(exports,"concatStreamProviders",{enumerable:true,get:function get(){return _streams.concatStreamProviders}});Object.defineProperty(exports,"createConcatStream",{enumerable:true,get:function get(){return _streams.createConcatStream}});Object.defineProperty(exports,"createIntersperseStream",{enumerable:true,get:function get(){return _streams.createIntersperseStream}});Object.defineProperty(exports,"createListStream",{enumerable:true,get:function get(){return _streams.createListStream}});Object.defineProperty(exports,"createPromiseFromStreams",{enumerable:true,get:function get(){return _streams.createPromiseFromStreams}});Object.defineProperty(exports,"createReduceStream",{enumerable:true,get:function get(){return _streams.createReduceStream}});Object.defineProperty(exports,"createSplitStream",{enumerable:true,get:function get(){return _streams.createSplitStream}});Object.defineProperty(exports,"createMapStream",{enumerable:true,get:function get(){return _streams.createMapStream}});Object.defineProperty(exports,"createReplaceStream",{enumerable:true,get:function get(){return _streams.createReplaceStream}});Object.defineProperty(exports,"parseCommaSeparatedList",{enumerable:true,get:function get(){return _strings.parseCommaSeparatedList}});Object.defineProperty(exports,"formatListAsProse",{enumerable:true,get:function get(){return _strings.formatListAsProse}});var _binder=__webpack_require__(388);var _binder_for=__webpack_require__(875);var _deep_clone_with_buffers=__webpack_require__(876);var _from_root=__webpack_require__(877);var _package_json=__webpack_require__(389);var _unset=__webpack_require__(878);var _encode_query_component=__webpack_require__(879);var _get_flattened_object=__webpack_require__(517);var _watch_stdio_for_line=__webpack_require__(880);var _artifact_type=__webpack_require__(890);var _kbn_field_types=__webpack_require__(391);var _streams=__webpack_require__(518);var _strings=__webpack_require__(891)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2742)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AppStateProvider=AppStateProvider;var _modules=__webpack_require__(6);var _state=__webpack_require__(392);__webpack_require__(99);var _legacy_class=__webpack_require__(29);var _function=__webpack_require__(394);var urlParam="_a";function AppStateProvider(Private,$location,$injector){var State=Private(_state.StateProvider);var PersistedState=$injector.get("PersistedState");var persistedStates;var eventUnsubscribers;(0,_legacy_class.createLegacyClass)(AppState).inherits(State);function AppState(defaults){persistedStates={};eventUnsubscribers=[];AppState.Super.call(this,urlParam,defaults);AppState.getAppState._set(this)}AppState.prototype._persistAcrossApps=false;AppState.prototype.destroy=function(){AppState.Super.prototype.destroy.call(this);AppState.getAppState._set(null);(0,_function.callEach)(eventUnsubscribers)};AppState.prototype.makeStateful=function(prop){var _this=this;if(persistedStates[prop])return persistedStates[prop];var self=this;persistedStates[prop]=new PersistedState;var updateOnChange=function updateOnChange(){var replaceState=false;self[prop]=persistedStates[prop].getChanges();self.save(replaceState)};var handlerOnChange=function handlerOnChange(method){return persistedStates[prop][method]("change",updateOnChange)};handlerOnChange("on");eventUnsubscribers.push(function(){return handlerOnChange("off")});var persistOnChange=function persistOnChange(changes){if(!changes)return;if(changes.indexOf(prop)!==-1){persistedStates[prop].set(self[prop])}};var handlePersist=function handlePersist(method){return _this[method]("fetch_with_changes",persistOnChange)};handlePersist("on");eventUnsubscribers.push(function(){return handlePersist("off")});if(self[prop])persistedStates[prop].setSilent(self[prop]);return persistedStates[prop]};AppState.getAppState=function(){var currentAppState;function get(){return currentAppState}get.previouslyStored=function(){var search=$location.search();return search[urlParam]?true:false};get._set=function(current){currentAppState=current};return get}();return AppState}_modules.uiModules.get("kibana/global_state").factory("AppState",function(Private){return Private(AppStateProvider)}).service("getAppState",function(Private){return Private(AppStateProvider).getAppState})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(801)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index_patterns_service=__webpack_require__(1002);Object.keys(_index_patterns_service).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns_service[key]}})})},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormat=FieldFormat;var _lodash=_interopRequireDefault(__webpack_require__(1));var _content_types=__webpack_require__(1005);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FieldFormat(params){this.type=this.constructor;this._params=params||{};if(_lodash.default.isFunction(this._convert)){this._convert={text:this._convert}}(0,_content_types.contentTypesSetup)(this)}FieldFormat.from=function(converter){var FieldFormatFromConverter=function(_FieldFormat){_inherits(FieldFormatFromConverter,_FieldFormat);function FieldFormatFromConverter(){_classCallCheck(this,FieldFormatFromConverter);return _possibleConstructorReturn(this,_getPrototypeOf(FieldFormatFromConverter).apply(this,arguments))}return FieldFormatFromConverter}(FieldFormat);FieldFormatFromConverter.prototype._convert=converter;return FieldFormatFromConverter};FieldFormat.prototype.convert=function(value,contentType){return this.getConverterFor(contentType)(value)};FieldFormat.prototype.getConverterFor=function(contentType){return this._convert[contentType||"text"]};FieldFormat.prototype.getParamDefaults=function(){return{}};FieldFormat.prototype.param=function(name){var val=this._params[name];if(val||val===false||val===0){return val}return this.getParamDefaults()[name]};FieldFormat.prototype.params=function(){return _lodash.default.cloneDeep(_lodash.default.defaults({},this._params,this.getParamDefaults()))};FieldFormat.prototype.toJSON=function(){var type=this.type;var defaults=this.getParamDefaults();var params=_lodash.default.transform(this._params,function(uniqParams,val,param){if(val!==defaults[param]){uniqParams[param]=val}},{});if(!_lodash.default.size(params)){params=undefined}return{id:type.id,params:params}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.asPrettyString=asPrettyString;function asPrettyString(val){if(val===null||val===undefined)return" - ";switch(_typeof(val)){case"string":return val;case"object":return JSON.stringify(val,null,"  ");default:return""+val}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultFeedbackMessage=void 0;var _i18n=__webpack_require__(2);var defaultFeedbackMessage=_i18n.i18n.translate("common.ui.vis.defaultFeedbackMessage",{defaultMessage:"Have feedback? Please create an issue in {link}.",values:{link:'<a href="https://github.com/elastic/kibana/issues/new" rel="noopener noreferrer" target="_blank">GitHub</a>'}});exports.defaultFeedbackMessage=defaultFeedbackMessage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggTypes=void 0;__webpack_require__(409);var _indexed_array=__webpack_require__(59);var _count=__webpack_require__(1056);var _avg=__webpack_require__(1057);var _sum=__webpack_require__(1058);var _median=__webpack_require__(1059);var _min=__webpack_require__(1066);var _max=__webpack_require__(1067);var _top_hit=__webpack_require__(1068);var _std_deviation=__webpack_require__(1073);var _cardinality=__webpack_require__(1074);var _percentiles=__webpack_require__(583);var _geo_bounds=__webpack_require__(1075);var _geo_centroid=__webpack_require__(1076);var _percentile_ranks=__webpack_require__(1077);var _derivative=__webpack_require__(1079);var _cumulative_sum=__webpack_require__(1093);var _moving_avg=__webpack_require__(1094);var _serial_diff=__webpack_require__(1095);var _date_histogram=__webpack_require__(592);var _histogram=__webpack_require__(1103);var _range=__webpack_require__(1109);var _date_range=__webpack_require__(1112);var _ip_range=__webpack_require__(1115);var _terms=__webpack_require__(1120);var _filter=__webpack_require__(1126);var _filters=__webpack_require__(1127);var _significant_terms=__webpack_require__(1220);var _geo_hash=__webpack_require__(1221);var _geo_tile=__webpack_require__(1227);var _bucket_sum=__webpack_require__(1228);var _bucket_avg=__webpack_require__(1231);var _bucket_min=__webpack_require__(1232);var _bucket_max=__webpack_require__(1233);var aggs={metrics:[_count.countMetricAgg,_avg.avgMetricAgg,_sum.sumMetricAgg,_median.medianMetricAgg,_min.minMetricAgg,_max.maxMetricAgg,_std_deviation.stdDeviationMetricAgg,_cardinality.cardinalityMetricAgg,_percentiles.percentilesMetricAgg,_percentile_ranks.percentileRanksMetricAgg,_top_hit.topHitMetricAgg,_derivative.derivativeMetricAgg,_cumulative_sum.cumulativeSumMetricAgg,_moving_avg.movingAvgMetricAgg,_serial_diff.serialDiffMetricAgg,_bucket_avg.bucketAvgMetricAgg,_bucket_sum.bucketSumMetricAgg,_bucket_min.bucketMinMetricAgg,_bucket_max.bucketMaxMetricAgg,_geo_bounds.geoBoundsMetricAgg,_geo_centroid.geoCentroidMetricAgg],buckets:[_date_histogram.dateHistogramBucketAgg,_histogram.histogramBucketAgg,_range.rangeBucketAgg,_date_range.dateRangeBucketAgg,_ip_range.ipRangeBucketAgg,_terms.termsBucketAgg,_filter.filterBucketAgg,_filters.filtersBucketAgg,_significant_terms.significantTermsBucketAgg,_geo_hash.geoHashBucketAgg,_geo_tile.geoTileBucketAgg]};Object.keys(aggs).forEach(function(type){aggs[type].forEach(function(agg){agg.type=type})});var aggTypes=new _indexed_array.IndexedArray({index:["name"],group:["type"],initialSet:aggs.metrics.concat(aggs.buckets)});exports.aggTypes=aggTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.safeMakeLabel=safeMakeLabel;exports.isCompatibleAggregation=isCompatibleAggregation;var _i18n=__webpack_require__(2);function safeMakeLabel(agg){try{return agg.makeLabel()}catch(e){return _i18n.i18n.translate("common.ui.aggTypes.aggNotValidLabel",{defaultMessage:"- agg not valid -"})}}function isCompatibleAggregation(aggFilter){return function(agg){return!aggFilter.includes("!".concat(agg.type.name))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={AggParamEditorProps:true,DefaultEditorAggParams:true,SubAggParamsProp:true,ComboBoxGroupedOptions:true};Object.defineProperty(exports,"AggParamEditorProps",{enumerable:true,get:function get(){return _agg_param_props.AggParamEditorProps}});Object.defineProperty(exports,"DefaultEditorAggParams",{enumerable:true,get:function get(){return _agg_params.DefaultEditorAggParams}});Object.defineProperty(exports,"SubAggParamsProp",{enumerable:true,get:function get(){return _agg_params.SubAggParamsProp}});Object.defineProperty(exports,"ComboBoxGroupedOptions",{enumerable:true,get:function get(){return _utils.ComboBoxGroupedOptions}});var _agg_param_props=__webpack_require__(1082);var _agg_params=__webpack_require__(589);var _utils=__webpack_require__(590);Object.keys(_utils).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})});var _vis_options_props=__webpack_require__(1089);Object.keys(_vis_options_props).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _vis_options_props[key]}})});var _agg_groups=__webpack_require__(61);Object.keys(_agg_groups).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_groups[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isType=isType;exports.migrateIncludeExcludeFormat=exports.isStringType=void 0;var _lodash=__webpack_require__(1);function isType(type){return function(agg){var field=agg.params.field;return field&&field.type===type}}var isStringType=isType("string");exports.isStringType=isStringType;var migrateIncludeExcludeFormat={serialize:function serialize(value,agg){if(this.shouldShow&&!this.shouldShow(agg))return;if(!value||(0,_lodash.isString)(value))return value;else return value.pattern},write:function write(aggConfig,output){var value=aggConfig.params[this.name];if((0,_lodash.isObject)(value)){output.params[this.name]=value.pattern}else if(value&&isStringType(aggConfig)){output.params[this.name]=value}}};exports.migrateIncludeExcludeFormat=migrateIncludeExcludeFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRequestInspectorStats=getRequestInspectorStats;exports.getResponseInspectorStats=getResponseInspectorStats;var _i18n=__webpack_require__(2);function getRequestInspectorStats(searchSource){var stats={};var index=searchSource.getField("index");if(index){stats.indexPattern={label:_i18n.i18n.translate("common.ui.courier.indexPatternLabel",{defaultMessage:"Index pattern"}),value:index.title,description:_i18n.i18n.translate("common.ui.courier.indexPatternDescription",{defaultMessage:"The index pattern that connected to the Elasticsearch indices."})};stats.indexPatternId={label:_i18n.i18n.translate("common.ui.courier.indexPatternIdLabel",{defaultMessage:"Index pattern ID"}),value:index.id,description:_i18n.i18n.translate("common.ui.courier.indexPatternIdDescription",{defaultMessage:"The ID in the {kibanaIndexPattern} index.",values:{kibanaIndexPattern:".kibana"}})}}return stats}function getResponseInspectorStats(searchSource,resp){var lastRequest=searchSource.history&&searchSource.history[searchSource.history.length-1];var stats={};if(resp&&resp.took){stats.queryTime={label:_i18n.i18n.translate("common.ui.courier.queryTimeLabel",{defaultMessage:"Query time"}),value:_i18n.i18n.translate("common.ui.courier.queryTimeValue",{defaultMessage:"{queryTime}ms",values:{queryTime:resp.took}}),description:_i18n.i18n.translate("common.ui.courier.queryTimeDescription",{defaultMessage:"The time it took to process the query. "+"Does not include the time to send the request or parse it in the browser."})}}if(resp&&resp.hits){stats.hitsTotal={label:_i18n.i18n.translate("common.ui.courier.hitsTotalLabel",{defaultMessage:"Hits (total)"}),value:"".concat(resp.hits.total),description:_i18n.i18n.translate("common.ui.courier.hitsTotalDescription",{defaultMessage:"The number of documents that match the query."})};stats.hits={label:_i18n.i18n.translate("common.ui.courier.hitsLabel",{defaultMessage:"Hits"}),value:"".concat(resp.hits.hits.length),description:_i18n.i18n.translate("common.ui.courier.hitsDescription",{defaultMessage:"The number of documents returned by the query."})}}if(lastRequest&&(lastRequest.ms===0||lastRequest.ms)){stats.requestTime={label:_i18n.i18n.translate("common.ui.courier.requestTimeLabel",{defaultMessage:"Request time"}),value:_i18n.i18n.translate("common.ui.courier.requestTimeValue",{defaultMessage:"{requestTime}ms",values:{requestTime:lastRequest.ms}}),description:_i18n.i18n.translate("common.ui.courier.requestTimeDescription",{defaultMessage:"The time of the request from the browser to Elasticsearch and back. "+"Does not include the time the requested waited in the queue."})}}return stats}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.vislibSlicesResponseHandlerProvider=exports.vislibSeriesResponseHandlerProvider=void 0;var _build_hierarchical_data=__webpack_require__(602);var _point_series=__webpack_require__(603);var _vis_response_handlers=__webpack_require__(353);var _legacy=__webpack_require__(416);var tableResponseHandler=(0,_legacy.legacyResponseHandlerProvider)().handler;function convertTableGroup(tableGroup,convertTable){var tables=tableGroup.tables;if(!tables.length)return;var firstChild=tables[0];if(firstChild.columns){var chart=convertTable(firstChild);if(tableGroup.$parent){chart.label=tableGroup.title}return chart}var out={};var outList;tables.forEach(function(table){if(!outList){var direction=tableGroup.direction==="row"?"rows":"columns";outList=out[direction]=[]}var output;if(output=convertTableGroup(table,convertTable)){outList.push(output)}});return out}var handlerFunction=function handlerFunction(convertTable){return function(response,dimensions){return new Promise(function(resolve){return tableResponseHandler(response,dimensions).then(function(tableGroup){var converted=convertTableGroup(tableGroup,function(table){return convertTable(table,dimensions)});if(!converted){converted={rows:[]}}converted.hits=response.rows.length;resolve(converted)})})}};var vislibSeriesResponseHandlerProvider=function vislibSeriesResponseHandlerProvider(){return{name:"vislib_series",handler:handlerFunction(_point_series.buildPointSeriesData)}};exports.vislibSeriesResponseHandlerProvider=vislibSeriesResponseHandlerProvider;var vislibSlicesResponseHandlerProvider=function vislibSlicesResponseHandlerProvider(){return{name:"vislib_slices",handler:handlerFunction(_build_hierarchical_data.buildHierarchicalData)}};exports.vislibSlicesResponseHandlerProvider=vislibSlicesResponseHandlerProvider;_vis_response_handlers.VisResponseHandlersRegistryProvider.register(vislibSeriesResponseHandlerProvider);_vis_response_handlers.VisResponseHandlersRegistryProvider.register(vislibSlicesResponseHandlerProvider)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisResponseHandlersRegistryProvider=void 0;var _registry=__webpack_require__(44);var VisResponseHandlersRegistryProvider=(0,_registry.uiRegistry)({name:"visResponseHandlers",index:["name"],order:["title"]});exports.VisResponseHandlersRegistryProvider=VisResponseHandlersRegistryProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisRequestHandlersRegistryProvider=void 0;var _registry=__webpack_require__(44);var VisRequestHandlersRegistryProvider=(0,_registry.uiRegistry)({name:"visRequestHandlers",index:["name"],order:["title"]});exports.VisRequestHandlersRegistryProvider=VisRequestHandlersRegistryProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchSourceProvider",{enumerable:true,get:function get(){return _search_source.SearchSourceProvider}});var _search_source=__webpack_require__(1175)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSearchErrorType=getSearchErrorType;exports.SearchError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var SearchError=function(_Error){_inherits(SearchError,_Error);function SearchError(_ref){var _this;var status=_ref.status,title=_ref.title,message=_ref.message,path=_ref.path,type=_ref.type;_classCallCheck(this,SearchError);_this=_possibleConstructorReturn(this,_getPrototypeOf(SearchError).call(this,message));_this.name="SearchError";_this.status=status;_this.title=title;_this.message=message;_this.path=path;_this.type=type;if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),SearchError)}Object.setPrototypeOf(_assertThisInitialized(_this),SearchError.prototype);return _this}return SearchError}(_wrapNativeSuper(Error));exports.SearchError=SearchError;function getSearchErrorType(_ref2){var message=_ref2.message;var msg=message.toLowerCase();if(msg.indexOf("unsupported query")>-1){return"UNSUPPORTED_QUERY"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestStatus=void 0;var RequestStatus={ABORTED:"aborted",INCOMPLETE:"incomplete"};exports.RequestStatus=RequestStatus},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.siblingPipelineAggHelper=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _agg_config=__webpack_require__(118);var _schemas=__webpack_require__(33);var _sibling_pipeline_agg_writer=__webpack_require__(1229);var _sub_metric=__webpack_require__(1230);var _nested_agg_helpers=__webpack_require__(591);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!sum_bucket","!avg_bucket","!min_bucket","!max_bucket","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!geo_bounds","!geo_centroid"];var metricAggSchema=new _schemas.Schemas([{group:"none",name:"metricAgg",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.metricAggTitle",{defaultMessage:"Metric agg"}),aggFilter:metricAggFilter}]).all[0];var bucketAggFilter=[];var bucketAggSchema=new _schemas.Schemas([{group:"none",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.bucketAggTitle",{defaultMessage:"Bucket agg"}),name:"bucketAgg",aggFilter:bucketAggFilter}]).all[0];var siblingPipelineAggHelper={subtype:_i18n.i18n.translate("common.ui.aggTypes.metrics.siblingPipelineAggregationsSubtypeTitle",{defaultMessage:"Sibling pipeline aggregations"}),params:function params(){return[{name:"customBucket",type:_agg_config.AggConfig,default:null,serialize:function serialize(customMetric){return customMetric.toJSON()},deserialize:function deserialize(state,agg){return this.makeAgg(agg,state)},makeAgg:function makeAgg(agg,state){state=state||{type:"date_histogram"};state.schema=bucketAggSchema;var orderAgg=agg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=agg.id+"-bucket";return orderAgg},editorComponent:_sub_metric.SubMetricParamEditor,modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customBucket"),write:_lodash.default.noop},{name:"customMetric",type:_agg_config.AggConfig,default:null,serialize:function serialize(customMetric){return customMetric.toJSON()},deserialize:function deserialize(state,agg){return this.makeAgg(agg,state)},makeAgg:function makeAgg(agg,state){state=state||{type:"count"};state.schema=metricAggSchema;var orderAgg=agg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=agg.id+"-metric";return orderAgg},editorComponent:_sub_metric.SubMetricParamEditor,modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customMetric"),write:_sibling_pipeline_agg_writer.siblingPipelineAggWriter}]},getFormat:function getFormat(agg){return agg.params.customMetric.type.getFormat(agg.params.customMetric)}};exports.siblingPipelineAggHelper=siblingPipelineAggHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseVisType=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _vis_filters=__webpack_require__(100);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var BaseVisType=function(){function BaseVisType(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,BaseVisType);if(!opts.name){throw"vis_type must define its name"}if(!opts.title){throw"vis_type must define its title"}if(!opts.description){throw"vis_type must define its description"}if(!opts.icon&&!opts.image){throw"vis_type must define its icon or image"}if(!opts.visualization){throw"vis_type must define visualization controller"}var _defaults={visualization:null,visConfig:{defaults:{}},requestHandler:"courier",responseHandler:"none",editor:"default",editorConfig:{collections:{}},options:{showTimePicker:true,showQueryBar:true,showFilterBar:true,showIndexSelection:true,hierarchicalData:false},events:{filterBucket:{defaultAction:_vis_filters.createFiltersFromEvent}},stage:"production",feedbackMessage:"",hidden:false};_lodash.default.defaultsDeep(this,opts,_defaults);this.requiresSearch=this.requestHandler!=="none"}_createClass(BaseVisType,[{key:"shouldMarkAsExperimentalInUI",value:function shouldMarkAsExperimentalInUI(){return this.stage==="experimental"}},{key:"schemas",get:function get(){if(this.editorConfig&&this.editorConfig.schemas){return this.editorConfig.schemas}return[]}}]);return BaseVisType}();exports.BaseVisType=BaseVisType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeries=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _services=__webpack_require__(113);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var thresholdLineDefaults={show:false,value:10,width:1,style:"full",color:_services.palettes.euiPaletteColorBlind.colors[9]};var PointSeries=function(){function PointSeries(handler,seriesEl,seriesData,seriesConfig){_classCallCheck(this,PointSeries);this.handler=handler;this.baseChart=handler.pointSeries;this.chartEl=seriesEl;this.chartData=seriesData;this.seriesConfig=seriesConfig;this.thresholdLineOptions=_lodash.default.defaults(handler.visConfig.get("thresholdLine",{}),thresholdLineDefaults)}_createClass(PointSeries,[{key:"getGroupedCount",value:function getGroupedCount(){var _this=this;var stacks=[];return this.baseChart.chartConfig.series.reduce(function(sum,series){var valueAxis=series.valueAxis||_this.baseChart.handler.valueAxes[0].id;var isStacked=series.mode==="stacked";var isHistogram=series.type==="histogram";if(!isHistogram)return sum;if(isStacked&&stacks.includes(valueAxis))return sum;if(isStacked)stacks.push(valueAxis);return sum+1},0)}},{key:"getGroupedNum",value:function getGroupedNum(data){var i=0;var stacks=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.baseChart.chartConfig.series[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var seri=_step.value;var valueAxis=seri.valueAxis||this.baseChart.handler.valueAxes[0].id;var isStacked=seri.mode==="stacked";if(!isStacked){if(seri.data===data)return i;i++}else{if(!(valueAxis in stacks))stacks[valueAxis]=i++;if(seri.data===data)return stacks[valueAxis]}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return 0}},{key:"getValueAxis",value:function getValueAxis(){var _this2=this;return _lodash.default.find(this.handler.valueAxes,function(axis){return axis.axisConfig.get("id")===_this2.seriesConfig.valueAxis})||this.handler.valueAxes[0]}},{key:"getCategoryAxis",value:function getCategoryAxis(){var _this3=this;return _lodash.default.find(this.handler.categoryAxes,function(axis){return axis.axisConfig.get("id")===_this3.seriesConfig.categoryAxis})||this.handler.categoryAxes[0]}},{key:"addCircleEvents",value:function addCircleEvents(element){var events=this.events;if(this.handler.visConfig.get("enableHover")){var hover=events.addHoverEvent();var mouseout=events.addMouseoutEvent();element.call(hover).call(mouseout)}var click=events.addClickEvent();return element.call(click)}},{key:"addThresholdLine",value:function addThresholdLine(svgElem){var chartData=this.chartData;var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var valueAxisDomain=this.getValueAxis().axisScale.getDomain(chartData.values.length);var yScale=this.getValueAxis().getScale();var svgParentWidth=svgElem[0][0].attributes.width.value;var svgParentHeight=svgElem[0][0].attributes.height.value;var thresholdLineWidth=this.thresholdLineOptions.width;var thresholdLineStyle="0";if(this.thresholdLineOptions.style==="dashed"){thresholdLineStyle="10,5"}else if(this.thresholdLineOptions.style==="dot-dashed"){thresholdLineStyle="20,5,5,5"}var thresholdValue=this.thresholdLineOptions.value;var lineColor=this.thresholdLineOptions.color;function y(y){return yScale(y)}if(valueAxisDomain&&valueAxisDomain[0]<=thresholdValue&&valueAxisDomain[1]>=thresholdValue){svgElem.append("line").attr("x1",isHorizontal?0:y(thresholdValue)).attr("y1",isHorizontal?y(thresholdValue):0).attr("x2",isHorizontal?svgParentWidth:y(thresholdValue)).attr("y2",isHorizontal?y(thresholdValue):svgParentHeight).attr("stroke-width",thresholdLineWidth).attr("stroke-dasharray",thresholdLineStyle).attr("stroke",lineColor)}}}]);return PointSeries}();exports.PointSeries=PointSeries},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DefaultEditorSize=void 0;var DefaultEditorSize={SMALL:"small",MEDIUM:"medium",LARGE:"large"};exports.DefaultEditorSize=DefaultEditorSize},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getVisualizeLoader=getVisualizeLoader;exports.VisualizeLoaderProvider=VisualizeLoaderProvider;exports.VisualizeLoader=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _query_filter=__webpack_require__(51);var _embedded_visualize_handler=__webpack_require__(1318);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var VisualizeLoader=function(){function VisualizeLoader(savedVisualizations,pipelineDataLoader,Private){_classCallCheck(this,VisualizeLoader);this.savedVisualizations=savedVisualizations;this.pipelineDataLoader=pipelineDataLoader;this.Private=Private}_createClass(VisualizeLoader,[{key:"embedVisualizationWithId",value:function(){var _embedVisualizationWithId=_asyncToGenerator(regeneratorRuntime.mark(function _callee(element,savedVisualizationId,params){var _this=this;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise(function(resolve,reject){_this.savedVisualizations.get(savedVisualizationId).then(function(savedObj){var handler=_this.renderVis(element,savedObj,params);resolve(handler)},reject)}));case 1:case"end":return _context.stop()}}},_callee)}));function embedVisualizationWithId(_x,_x2,_x3){return _embedVisualizationWithId.apply(this,arguments)}return embedVisualizationWithId}()},{key:"embedVisualizationWithSavedObject",value:function embedVisualizationWithSavedObject(el,savedObj,params){return this.renderVis(el,savedObj,params)}},{key:"getVisualizationList",value:function getVisualizationList(){return this.savedVisualizations.find().then(function(result){return result.hits})}},{key:"renderVis",value:function renderVis(container,savedObj,params){var vis=savedObj.vis,description=savedObj.description,searchSource=savedObj.searchSource;vis.description=description;vis.searchSource=searchSource;if(!params.append){container.innerHTML=""}var element=document.createElement("div");element.className="visualize";element.setAttribute("data-test-subj","visualizationLoader");container.appendChild(element);container.style.display="flex";if(params.cssClass){params.cssClass.split(" ").forEach(function(cssClass){element.classList.add(cssClass)})}var dataAttrs=params.dataAttrs;if(dataAttrs){Object.keys(dataAttrs).forEach(function(key){element.setAttribute("data-".concat(key),dataAttrs[key])})}var handlerParams=_objectSpread({},params,{queryFilter:this.Private(_query_filter.FilterBarQueryFilterProvider),Private:this.Private,pipelineDataLoader:this.pipelineDataLoader});return new _embedded_visualize_handler.EmbeddedVisualizeHandler(element,savedObj,handlerParams)}}]);return VisualizeLoader}();exports.VisualizeLoader=VisualizeLoader;function VisualizeLoaderProvider(savedVisualizations,interpreterConfig,Private){return new VisualizeLoader(savedVisualizations,interpreterConfig.enableInVisualize,Private)}function getVisualizeLoader(){return _chrome.default.dangerouslyGetActiveInjector().then(function($injector){var Private=$injector.get("Private");return Private(VisualizeLoaderProvider)})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getInterval=exports.validateReInterval=exports.isAutoInterval=exports.isGteInterval=exports.convertIntervalIntoUnit=exports.unitLookup=exports.AUTO_INTERVAL=void 0;var _moment=_interopRequireDefault(__webpack_require__(14));var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);var _public=__webpack_require__(24);var _interval_regexp=__webpack_require__(637);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AUTO_INTERVAL="auto";exports.AUTO_INTERVAL=AUTO_INTERVAL;var unitLookup={s:_i18n.i18n.translate("tsvb.getInterval.secondsLabel",{defaultMessage:"seconds"}),m:_i18n.i18n.translate("tsvb.getInterval.minutesLabel",{defaultMessage:"minutes"}),h:_i18n.i18n.translate("tsvb.getInterval.hoursLabel",{defaultMessage:"hours"}),d:_i18n.i18n.translate("tsvb.getInterval.daysLabel",{defaultMessage:"days"}),w:_i18n.i18n.translate("tsvb.getInterval.weeksLabel",{defaultMessage:"weeks"}),M:_i18n.i18n.translate("tsvb.getInterval.monthsLabel",{defaultMessage:"months"}),y:_i18n.i18n.translate("tsvb.getInterval.yearsLabel",{defaultMessage:"years"})};exports.unitLookup=unitLookup;var convertIntervalIntoUnit=function convertIntervalIntoUnit(interval){var hasTranslateUnitString=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var units=Object.keys(unitLookup).reverse();var duration=_moment.default.duration(interval,"ms");for(var i=0;i<units.length;i++){var as=duration.as(units[i]);if(Math.abs(as)>1){return{unitValue:Math.round(Math.abs(as)),unitString:hasTranslateUnitString?unitLookup[units[i]]:units[i]}}}};exports.convertIntervalIntoUnit=convertIntervalIntoUnit;var isGteInterval=function isGteInterval(interval){return _interval_regexp.GTE_INTERVAL_RE.test(interval)};exports.isGteInterval=isGteInterval;var isAutoInterval=function isAutoInterval(interval){return!interval||interval===AUTO_INTERVAL};exports.isAutoInterval=isAutoInterval;var validateReInterval=function validateReInterval(intervalValue){var validationResult={};try{(0,_public.parseEsInterval)(intervalValue)}catch(_ref){var message=_ref.message;validationResult.errorMessage=message}finally{validationResult.isValid=!validationResult.errorMessage}return validationResult};exports.validateReInterval=validateReInterval;var getInterval=function getInterval(visData,model){var series;if(model&&model.type==="table"){series=(0,_lodash.get)(visData,"series[0].series",[])}else{series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[])}return series.reduce(function(currentInterval,item){if(item.data.length>1){var seriesInterval=item.data[1][0]-item.data[0][0];if(!currentInterval||seriesInterval<currentInterval)return seriesInterval}return currentInterval},0)};exports.getInterval=getInterval},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.replaceVars=replaceVars;var _lodash=_interopRequireDefault(__webpack_require__(1));var _handlebars=_interopRequireDefault(__webpack_require__(645));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function replaceVars(str){var args=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var vars=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};try{var template=_handlebars.default.compile(str,{strict:true,knownHelpersOnly:true});var string=template(_lodash.default.assign({},vars,{args:args}));return string}catch(e){if(e.toString().indexOf("Parse error")!==-1){return str}else if(e.message.indexOf("not defined in")!==-1){var badVar=e.message.split(/"/)[1];e.error={caused_by:{reason:_i18n.i18n.translate("tsvb.replaceVars.errors.unknownVarDescription",{defaultMessage:"{badVar} is an unknown variable",values:{badVar:"{{"+badVar+"}}"}}),title:_i18n.i18n.translate("tsvb.replaceVars.errors.unknownVarTitle",{defaultMessage:"Error processing your markdown"})}}}else{e.error={caused_by:{reason:_i18n.i18n.translate("tsvb.replaceVars.errors.markdownErrorDescription",{defaultMessage:"Please verify you are only using markdown, known variables, and built-in Handlebars expressions"}),title:_i18n.i18n.translate("tsvb.replaceVars.errors.markdownErrorTitle",{defaultMessage:"Error processing your markdown"})}}}return e}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EXTENDED_STATS_TYPES=exports.METRIC_TYPES=void 0;var METRIC_TYPES={PERCENTILE:"percentile",PERCENTILE_RANK:"percentile_rank",TOP_HIT:"top_hit",COUNT:"count",DERIVATIVE:"derivative",STD_DEVIATION:"std_deviation",VARIANCE:"variance",SUM_OF_SQUARES:"sum_of_squares",CARDINALITY:"cardinality"};exports.METRIC_TYPES=METRIC_TYPES;var EXTENDED_STATS_TYPES=[METRIC_TYPES.STD_DEVIATION,METRIC_TYPES.VARIANCE,METRIC_TYPES.SUM_OF_SQUARES];exports.EXTENDED_STATS_TYPES=EXTENDED_STATS_TYPES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisDataContext=void 0;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VisDataContext=_react.default.createContext({});exports.VisDataContext=VisDataContext},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeriesConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _data_format_picker=__webpack_require__(434);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _yes_no=__webpack_require__(54);var _index_pattern=__webpack_require__(76);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _get_default_query_language=__webpack_require__(43);var _query_bar_wrapper=__webpack_require__(46);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SeriesConfig=function SeriesConfig(props){var defaults={offset_time:"",value_template:""};var model=_objectSpread({},defaults,{},props.model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var seriesIndexPattern=props.model.override_index_pattern&&props.model.series_index_pattern?props.model.series_index_pattern:props.indexPatternForQuery;return _react.default.createElement("div",{className:"tvbAggRow"},_react.default.createElement(_data_format_picker.DataFormatPicker,{onChange:handleSelectChange("formatter"),value:model.formatter}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiFormRow,{id:htmlId("series_filter"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.filterLabel",defaultMessage:"Filter"}),fullWidth:true},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter&&model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter&&model.filter.query?model.filter.query:""},onChange:function onChange(filter){return props.onChange({filter:filter})},indexPatterns:[seriesIndexPattern]})),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("template"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.templateLabel",defaultMessage:"Template"}),helpText:_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.templateHelpText",defaultMessage:"eg. {templateExample}",values:{templateExample:_react.default.createElement(_eui.EuiCode,null,"{{value}}/s")}})),fullWidth:true},_react.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("value_template"),value:model.value_template,fullWidth:true}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("offsetSeries"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.offsetSeriesTimeLabel",defaultMessage:"Offset series time by (1m, 1h, 1w, 1d)",description:"1m, 1h, 1w and 1d are required values and must not be translated."})},_react.default.createElement(_eui.EuiFieldText,{"data-test-subj":"offsetTimeSeries",onChange:handleTextChange("offset_time"),value:model.offset_time})))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.overrideIndexPatternLabel",defaultMessage:"Override Index Pattern?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.override_index_pattern,name:"override_index_pattern",onChange:props.onChange})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_index_pattern.IndexPattern,{onChange:props.onChange,model:props.model,fields:props.fields,prefix:"series_",disabled:!model.override_index_pattern}))))};exports.SeriesConfig=SeriesConfig;SeriesConfig.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func,indexPatternForQuery:_propTypes.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorRules=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _add_delete_buttons=__webpack_require__(42);var _collection_actions=__webpack_require__(74);var _color_picker=__webpack_require__(52);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _i18n=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ColorRulesUI=function(_Component){_inherits(ColorRulesUI,_Component);function ColorRulesUI(props){var _this;_classCallCheck(this,ColorRulesUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(ColorRulesUI).call(this,props));_this.renderRow=_this.renderRow.bind(_assertThisInitialized(_this));return _this}_createClass(ColorRulesUI,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;var cast=arguments.length>2&&arguments[2]!==undefined?arguments[2]:String;return function(e){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=cast(_lodash.default.get(e,"[0].value",_lodash.default.get(e,"target.value")));if(part[name]==="undefined")part[name]=undefined;if(part[name]===NaN)part[name]=undefined;handleChange(_lodash.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row,i,items){var _this3=this;var defaults={value:0};var model=_objectSpread({},defaults,{},row);var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,this.props);var handleDelete=_collection_actions.collectionActions.handleDelete.bind(null,this.props,model);var intl=this.props.intl;var operatorOptions=[{label:intl.formatMessage({id:"tsvb.colorRules.greaterThanLabel",defaultMessage:"> greater than"}),value:"gt"},{label:intl.formatMessage({id:"tsvb.colorRules.greaterThanOrEqualLabel",defaultMessage:">= greater than or equal"}),value:"gte"},{label:intl.formatMessage({id:"tsvb.colorRules.lessThanLabel",defaultMessage:"< less than"}),value:"lt"},{label:intl.formatMessage({id:"tsvb.colorRules.lessThanOrEqualLabel",defaultMessage:"<= less than or equal"}),value:"lte"}];var handleColorChange=function handleColorChange(part){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this3.props);handleChange(_lodash.default.assign({},model,part))};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var selectedOperatorOption=operatorOptions.find(function(option){return model.operator===option.value});var labelStyle={marginBottom:0};var secondary;if(!this.props.hideSecondary){secondary=_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:labelStyle},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.colorRules.setSecondaryColorLabel",defaultMessage:"and {secondaryName} to",values:{secondaryName:this.props.secondaryName},description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_color_picker.ColorPicker,{onChange:handleColorChange,name:this.props.secondaryVarName,value:model[this.props.secondaryVarName]})))}return _react.default.createElement(_eui.EuiFlexGroup,{wrap:true,responsive:false,gutterSize:"s",key:model.id,alignItems:"center",className:"tvbColorRules__rule"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:labelStyle},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.colorRules.setPrimaryColorLabel",defaultMessage:"Set {primaryName} to",values:{primaryName:this.props.primaryName},description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_color_picker.ColorPicker,{onChange:handleColorChange,name:this.props.primaryVarName,value:model[this.props.primaryVarName]})),secondary,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("ifMetricIs")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.colorRules.ifMetricIsLabel",defaultMessage:"if metric is",description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiComboBox,{id:htmlId("ifMetricIs"),options:operatorOptions,selectedOptions:selectedOperatorOption?[selectedOperatorOption]:[],onChange:this.handleChange(model,"operator"),singleSelection:{asPlainText:true},fullWidth:true})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldNumber,{"aria-label":intl.formatMessage({id:"tsvb.colorRules.valueAriaLabel",defaultMessage:"Value"}),value:model.value,onChange:this.handleChange(model,"value",Number),fullWidth:true})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false})))}},{key:"render",value:function render(){var _this$props=this.props,model=_this$props.model,name=_this$props.name;if(!model[name])return _react.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react.default.createElement("div",null,rows)}}]);return ColorRulesUI}(_react.Component);ColorRulesUI.defaultProps={name:"color_rules",primaryName:_i18n.i18n.translate("tsvb.colorRules.defaultPrimaryNameLabel",{defaultMessage:"background"}),primaryVarName:"background_color",secondaryName:_i18n.i18n.translate("tsvb.colorRules.defaultSecondaryNameLabel",{defaultMessage:"text"}),secondaryVarName:"color",hideSecondary:false};ColorRulesUI.propTypes={name:_propTypes.default.string,model:_propTypes.default.object,onChange:_propTypes.default.func,primaryName:_propTypes.default.string,primaryVarName:_propTypes.default.string,secondaryName:_propTypes.default.string,secondaryVarName:_propTypes.default.string,hideSecondary:_propTypes.default.bool};var ColorRules=(0,_react2.injectI18n)(ColorRulesUI);exports.ColorRules=ColorRules},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);var _lodash=_interopRequireDefault(__webpack_require__(1));var _markdownIt=_interopRequireDefault(__webpack_require__(426));var _origin=__webpack_require__(87);var _ems_client=__webpack_require__(1465);var _i18n=__webpack_require__(2);__webpack_require__(498);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var markdownIt=new _markdownIt.default({html:false,linkify:true});var TMS_IN_YML_ID="TMS in config/kibana.yml";_modules.uiModules.get("kibana",["ngSanitize"]).service("serviceSettings",function($sanitize,mapConfig,tilemapsConfig,kbnVersion){var attributionFromConfig=$sanitize(markdownIt.render(tilemapsConfig.deprecated.config.options.attribution||""));var tmsOptionsFromConfig=_lodash.default.assign({},tilemapsConfig.deprecated.config.options,{attribution:attributionFromConfig});var ServiceSettings=function(){function ServiceSettings(){_classCallCheck(this,ServiceSettings);this._showZoomMessage=true;this._emsClient=new _ems_client.EMSClient({language:_i18n.i18n.getLocale(),kbnVersion:kbnVersion,manifestServiceUrl:mapConfig.manifestServiceUrl,htmlSanitizer:$sanitize,landingPageUrl:mapConfig.emsLandingPageUrl})}_createClass(ServiceSettings,[{key:"shouldShowZoomMessage",value:function shouldShowZoomMessage(_ref){var origin=_ref.origin;return origin===_origin.ORIGIN.EMS&&this._showZoomMessage}},{key:"disableZoomMessage",value:function disableZoomMessage(){this._showZoomMessage=false}},{key:"__debugStubManifestCalls",value:function __debugStubManifestCalls(manifestRetrieval){var _this=this;var oldGetManifest=this._emsClient.getManifest;this._emsClient.getManifest=manifestRetrieval;return{removeStub:function removeStub(){delete _this._emsClient.getManifest;if(_this._emsClient.getManifest!==oldGetManifest){_this._emsClient.getManifest=oldGetManifest}}}}},{key:"getFileLayers",value:function(){var _getFileLayers=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var fileLayers;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(mapConfig.includeElasticMapsService){_context.next=2;break}return _context.abrupt("return",[]);case 2:_context.next=4;return this._emsClient.getFileLayers();case 4:fileLayers=_context.sent;return _context.abrupt("return",fileLayers.map(function(fileLayer){var format=fileLayer.getDefaultFormatType();var meta=fileLayer.getDefaultFormatMeta();return{name:fileLayer.getDisplayName(),origin:fileLayer.getOrigin(),id:fileLayer.getId(),created_at:fileLayer.getCreatedAt(),attribution:fileLayer.getHTMLAttribution(),fields:fileLayer.getFieldsInLanguage(),format:format,meta:meta}}));case 6:case"end":return _context.stop()}}},_callee,this)}));function getFileLayers(){return _getFileLayers.apply(this,arguments)}return getFileLayers}()},{key:"getTMSServices",value:function(){var _getTMSServices=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var allServices,tmsService,servicesFromManifest,strippedServiceFromManifest;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:allServices=[];if(tilemapsConfig.deprecated.isOverridden){tmsService=_lodash.default.cloneDeep(tmsOptionsFromConfig);tmsService.id=TMS_IN_YML_ID;tmsService.origin=_origin.ORIGIN.KIBANA_YML;allServices.push(tmsService)}if(!mapConfig.includeElasticMapsService){_context3.next=10;break}_context3.next=5;return this._emsClient.getTMSServices();case 5:servicesFromManifest=_context3.sent;_context3.next=8;return Promise.all(servicesFromManifest.filter(function(tmsService){return tmsService.getId()===mapConfig.emsTileLayerId.bright}).map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(tmsService){var shim;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=tmsService.getOrigin();_context2.t1=tmsService.getId();_context2.next=4;return tmsService.getMinZoom();case 4:_context2.t2=_context2.sent;_context2.next=7;return tmsService.getMaxZoom();case 7:_context2.t3=_context2.sent;_context2.t4=tmsService.getHTMLAttribution();shim={origin:_context2.t0,id:_context2.t1,minZoom:_context2.t2,maxZoom:_context2.t3,attribution:_context2.t4};return _context2.abrupt("return",shim);case 11:case"end":return _context2.stop()}}},_callee2)}));return function(_x){return _ref2.apply(this,arguments)}}()));case 8:strippedServiceFromManifest=_context3.sent;allServices=allServices.concat(strippedServiceFromManifest);case 10:return _context3.abrupt("return",allServices);case 11:case"end":return _context3.stop()}}},_callee3,this)}));function getTMSServices(){return _getTMSServices.apply(this,arguments)}return getTMSServices}()},{key:"addQueryParams",value:function addQueryParams(additionalQueryParams){this._emsClient.addQueryParams(additionalQueryParams)}},{key:"getEMSHotLink",value:function(){var _getEMSHotLink=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(fileLayerConfig){var fileLayers,layer;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this._emsClient.getFileLayers();case 2:fileLayers=_context4.sent;layer=fileLayers.find(function(fileLayer){var hasIdByName=fileLayer.hasId(fileLayerConfig.name);var hasIdById=fileLayer.hasId(fileLayerConfig.id);return hasIdByName||hasIdById});return _context4.abrupt("return",layer?layer.getEMSHotLink():null);case 5:case"end":return _context4.stop()}}},_callee4,this)}));function getEMSHotLink(_x2){return _getEMSHotLink.apply(this,arguments)}return getEMSHotLink}()},{key:"_getAttributesForEMSTMSLayer",value:function(){var _getAttributesForEMSTMSLayer2=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(isDesaturated,isDarkMode){var tmsServices,emsTileLayerId,serviceId,tmsService;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this._emsClient.getTMSServices();case 2:tmsServices=_context5.sent;emsTileLayerId=mapConfig.emsTileLayerId;if(isDarkMode){serviceId=emsTileLayerId.dark}else{if(isDesaturated){serviceId=emsTileLayerId.desaturated}else{serviceId=emsTileLayerId.bright}}tmsService=tmsServices.find(function(service){return service.getId()===serviceId});_context5.next=8;return tmsService.getUrlTemplate();case 8:_context5.t0=_context5.sent;_context5.next=11;return tmsService.getMinZoom();case 11:_context5.t1=_context5.sent;_context5.next=14;return tmsService.getMaxZoom();case 14:_context5.t2=_context5.sent;_context5.next=17;return tmsService.getHTMLAttribution();case 17:_context5.t3=_context5.sent;_context5.t4=_origin.ORIGIN.EMS;return _context5.abrupt("return",{url:_context5.t0,minZoom:_context5.t1,maxZoom:_context5.t2,attribution:_context5.t3,origin:_context5.t4});case 20:case"end":return _context5.stop()}}},_callee5,this)}));function _getAttributesForEMSTMSLayer(_x3,_x4){return _getAttributesForEMSTMSLayer2.apply(this,arguments)}return _getAttributesForEMSTMSLayer}()},{key:"getAttributesForTMSLayer",value:function(){var _getAttributesForTMSLayer=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(tmsServiceConfig,isDesaturated,isDarkMode){var config,attrs,_config,_attrs;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(tmsServiceConfig.origin===_origin.ORIGIN.EMS)){_context6.next=4;break}return _context6.abrupt("return",this._getAttributesForEMSTMSLayer(isDesaturated,isDarkMode));case 4:if(!(tmsServiceConfig.origin===_origin.ORIGIN.KIBANA_YML)){_context6.next=10;break}config=tilemapsConfig.deprecated.config;attrs=_lodash.default.pick(config,["url","minzoom","maxzoom","attribution"]);return _context6.abrupt("return",_objectSpread({},attrs,{},{origin:_origin.ORIGIN.KIBANA_YML}));case 10:if(!(tmsServiceConfig.id===TMS_IN_YML_ID)){_context6.next=16;break}_config=tilemapsConfig.deprecated.config;_attrs=_lodash.default.pick(_config,["url","minzoom","maxzoom","attribution"]);return _context6.abrupt("return",_objectSpread({},_attrs,{},{origin:_origin.ORIGIN.KIBANA_YML}));case 16:return _context6.abrupt("return",this._getAttributesForEMSTMSLayer(isDesaturated,isDarkMode));case 17:case"end":return _context6.stop()}}},_callee6,this)}));function getAttributesForTMSLayer(_x5,_x6,_x7){return _getAttributesForTMSLayer.apply(this,arguments)}return getAttributesForTMSLayer}()},{key:"_getFileUrlFromEMS",value:function(){var _getFileUrlFromEMS2=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(fileLayerConfig){var fileLayers,layer;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this._emsClient.getFileLayers();case 2:fileLayers=_context7.sent;layer=fileLayers.find(function(fileLayer){var hasIdByName=fileLayer.hasId(fileLayerConfig.name);var hasIdById=fileLayer.hasId(fileLayerConfig.id);return hasIdByName||hasIdById});if(!layer){_context7.next=8;break}return _context7.abrupt("return",layer.getDefaultFormatUrl());case 8:throw new Error("File  ".concat(fileLayerConfig.name," not recognized"));case 9:case"end":return _context7.stop()}}},_callee7,this)}));function _getFileUrlFromEMS(_x8){return _getFileUrlFromEMS2.apply(this,arguments)}return _getFileUrlFromEMS}()},{key:"getUrlForRegionLayer",value:function(){var _getUrlForRegionLayer=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(fileLayerConfig){var url;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(fileLayerConfig.origin===_origin.ORIGIN.EMS){url=this._getFileUrlFromEMS(fileLayerConfig)}else if(fileLayerConfig.layerId&&fileLayerConfig.layerId.startsWith("".concat(_origin.ORIGIN.EMS,"."))){url=this._getFileUrlFromEMS(fileLayerConfig)}else if(fileLayerConfig.layerId&&fileLayerConfig.layerId.startsWith("".concat(_origin.ORIGIN.KIBANA_YML,"."))){url=fileLayerConfig.url}else{url=fileLayerConfig.url}return _context8.abrupt("return",url);case 2:case"end":return _context8.stop()}}},_callee8,this)}));function getUrlForRegionLayer(_x9){return _getUrlForRegionLayer.apply(this,arguments)}return getUrlForRegionLayer}()},{key:"getJsonForRegionLayer",value:function(){var _getJsonForRegionLayer=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(fileLayerConfig){var url,response;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.getUrlForRegionLayer(fileLayerConfig);case 2:url=_context9.sent;_context9.next=5;return fetch(url);case 5:response=_context9.sent;_context9.next=8;return response.json();case 8:return _context9.abrupt("return",_context9.sent);case 9:case"end":return _context9.stop()}}},_callee9,this)}));function getJsonForRegionLayer(_x10){return _getJsonForRegionLayer.apply(this,arguments)}return getJsonForRegionLayer}()}]);return ServiceSettings}();return new ServiceSettings})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1774)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DevToolsRegistryProvider=void 0;var _registry=__webpack_require__(44);var DevToolsRegistryProvider=(0,_registry.uiRegistry)({name:"devTools",index:["name"],order:["order"]});exports.DevToolsRegistryProvider=DevToolsRegistryProvider},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectFinder=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _chrome=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FixedEuiListGroup=_eui.EuiListGroup;var FixedEuiContextMenuPanel=_eui.EuiContextMenuPanel;var SavedObjectFinder=function(_React$Component){_inherits(SavedObjectFinder,_React$Component);function SavedObjectFinder(props){var _this;_classCallCheck(this,SavedObjectFinder);_this=_possibleConstructorReturn(this,_getPrototypeOf(SavedObjectFinder).call(this,props));_defineProperty(_assertThisInitialized(_this),"isComponentMounted",false);_defineProperty(_assertThisInitialized(_this),"debouncedFetch",_lodash.default.debounce(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(query){var metaDataMap,resp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:metaDataMap=_this.getSavedObjectMetaDataMap();_context.next=3;return _chrome.default.getSavedObjectsClient().find({type:Object.keys(metaDataMap),fields:["title","visState"],search:query?"".concat(query,"*"):undefined,page:1,perPage:_chrome.default.getUiSettingsClient().get("savedObjects:listingLimit"),searchFields:["title^3","description"],defaultSearchOperator:"AND"});case 3:resp=_context.sent;resp.savedObjects=resp.savedObjects.filter(function(savedObject){var metaData=metaDataMap[savedObject.type];if(metaData.showSavedObject){return metaData.showSavedObject(savedObject)}else{return true}});if(_this.isComponentMounted){_context.next=7;break}return _context.abrupt("return");case 7:if(query===_this.state.query){_this.setState({isFetchingItems:false,items:resp.savedObjects.map(function(savedObject){var title=savedObject.attributes.title,id=savedObject.id,type=savedObject.type;return{title:typeof title==="string"?title:"",id:id,type:type,savedObject:savedObject}})})}case 8:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"getPageOfItems",function(){var items=_this.state.items.slice();var sortDirection=_this.state.sortDirection;if(sortDirection||!_this.state.query){items.sort(function(_ref2,_ref3){var titleA=_ref2.title;var titleB=_ref3.title;var order=1;if(sortDirection==="desc"){order=-1}return order*(titleA||"").toLowerCase().localeCompare((titleB||"").toLowerCase())})}var startIndex=_this.state.page*_this.state.perPage;var lastIndex=startIndex+_this.state.perPage;return items.filter(function(item){return _this.state.filteredTypes.length===0||_this.state.filteredTypes.includes(item.type)}).slice(startIndex,lastIndex)});_defineProperty(_assertThisInitialized(_this),"fetchItems",function(){_this.setState({isFetchingItems:true},_this.debouncedFetch.bind(null,_this.state.query))});_this.state={items:[],isFetchingItems:false,page:0,perPage:props.initialPageSize||props.fixedPageSize||10,query:"",filterOpen:false,filteredTypes:[],sortOpen:false};return _this}_createClass(SavedObjectFinder,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.isComponentMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.isComponentMounted=true;this.fetchItems()}},{key:"render",value:function render(){return _react.default.createElement(_react.default.Fragment,null,this.renderSearchBar(),this.renderListing())}},{key:"getSavedObjectMetaDataMap",value:function getSavedObjectMetaDataMap(){return this.props.savedObjectMetaData.reduce(function(map,metaData){return _objectSpread({},map,_defineProperty({},metaData.type,metaData))},{})}},{key:"getPageCount",value:function getPageCount(){var _this2=this;return Math.ceil((this.state.filteredTypes.length===0?this.state.items.length:this.state.items.filter(function(item){return _this2.state.filteredTypes.length===0||_this2.state.filteredTypes.includes(item.type)}).length)/this.state.perPage)}},{key:"getAvailableSavedObjectMetaData",value:function getAvailableSavedObjectMetaData(){var typesInItems=new Set;this.state.items.forEach(function(item){typesInItems.add(item.type)});return this.props.savedObjectMetaData.filter(function(metaData){return typesInItems.has(metaData.type)})}},{key:"getSortOptions",value:function getSortOptions(){var _this3=this;var sortOptions=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"asc",icon:this.state.sortDirection==="asc"||this.state.query===""&&this.state.sortDirection!=="desc"?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:"asc"})}},_i18n.i18n.translate("common.ui.savedObjects.finder.sortAsc",{defaultMessage:"Ascending"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"desc",icon:this.state.sortDirection==="desc"?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:"desc"})}},_i18n.i18n.translate("common.ui.savedObjects.finder.sortDesc",{defaultMessage:"Descending"}))];if(this.state.query){sortOptions.push(_react.default.createElement(_eui.EuiContextMenuItem,{key:"auto",icon:!this.state.sortDirection?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:undefined})}},_i18n.i18n.translate("common.ui.savedObjects.finder.sortAuto",{defaultMessage:"Best match"})))}return sortOptions}},{key:"renderSearchBar",value:function renderSearchBar(){var _this4=this;var availableSavedObjectMetaData=this.getAvailableSavedObjectMetaData();return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFieldSearch,{placeholder:_i18n.i18n.translate("common.ui.savedObjects.finder.searchPlaceholder",{defaultMessage:"Search…"}),fullWidth:true,value:this.state.query,onChange:function onChange(e){_this4.setState({query:e.target.value},_this4.fetchItems)},"data-test-subj":"savedObjectFinderSearchInput",isLoading:this.state.isFetchingItems})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFilterGroup,null,_react.default.createElement(_eui.EuiPopover,{id:"addPanelSortPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.sortOpen,closePopover:function closePopover(){return _this4.setState({sortOpen:false})},button:_react.default.createElement(_eui.EuiFilterButton,{onClick:function onClick(){return _this4.setState(function(_ref4){var sortOpen=_ref4.sortOpen;return{sortOpen:!sortOpen}})},iconType:"arrowDown",isSelected:this.state.sortOpen,"data-test-subj":"savedObjectFinderSortButton"},_i18n.i18n.translate("common.ui.savedObjects.finder.sortButtonLabel",{defaultMessage:"Sort"}))},_react.default.createElement(FixedEuiContextMenuPanel,{watchedItemProps:["icon","disabled"],items:this.getSortOptions()})),this.props.showFilter&&_react.default.createElement(_eui.EuiPopover,{id:"addPanelFilterPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.filterOpen,closePopover:function closePopover(){return _this4.setState({filterOpen:false})},button:_react.default.createElement(_eui.EuiFilterButton,{onClick:function onClick(){return _this4.setState(function(_ref5){var filterOpen=_ref5.filterOpen;return{filterOpen:!filterOpen}})},iconType:"arrowDown","data-test-subj":"savedObjectFinderFilterButton",isSelected:this.state.filterOpen,numFilters:this.props.savedObjectMetaData.length,hasActiveFilters:this.state.filteredTypes.length>0,numActiveFilters:this.state.filteredTypes.length},_i18n.i18n.translate("common.ui.savedObjects.finder.filterButtonLabel",{defaultMessage:"Types"}))},_react.default.createElement(FixedEuiContextMenuPanel,{watchedItemProps:["icon","disabled"],items:this.props.savedObjectMetaData.map(function(metaData){return _react.default.createElement(_eui.EuiContextMenuItem,{key:metaData.type,disabled:!availableSavedObjectMetaData.includes(metaData),icon:_this4.state.filteredTypes.includes(metaData.type)?"check":"empty","data-test-subj":"savedObjectFinderFilter-".concat(metaData.type),onClick:function onClick(){_this4.setState(function(_ref6){var filteredTypes=_ref6.filteredTypes;return{filteredTypes:filteredTypes.includes(metaData.type)?filteredTypes.filter(function(t){return t!==metaData.type}):[].concat(_toConsumableArray(filteredTypes),[metaData.type]),page:0}})}},metaData.name)})})))))}},{key:"renderListing",value:function renderListing(){var _this5=this;var items=this.state.items.length===0?[]:this.getPageOfItems();var _this$props=this.props,onChoose=_this$props.onChoose,savedObjectMetaData=_this$props.savedObjectMetaData;return _react.default.createElement(_react.default.Fragment,null,this.state.isFetchingItems&&this.state.items.length===0&&_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiLoadingSpinner,{"data-test-subj":"savedObjectFinderLoadingIndicator"}))),items.length>0?_react.default.createElement(FixedEuiListGroup,{"data-test-subj":"savedObjectFinderItemList",maxWidth:false},items.map(function(item){var currentSavedObjectMetaData=savedObjectMetaData.find(function(metaData){return metaData.type===item.type});var fullName=currentSavedObjectMetaData.getTooltipForSavedObject?currentSavedObjectMetaData.getTooltipForSavedObject(item.savedObject):"".concat(item.title," (").concat(currentSavedObjectMetaData.name,")");var iconType=(currentSavedObjectMetaData||{getIconForSavedObject:function getIconForSavedObject(){return"document"}}).getIconForSavedObject(item.savedObject);return _react.default.createElement(_eui.EuiListGroupItem,{key:item.id,iconType:iconType,label:item.title,onClick:onChoose?function(){onChoose(item.id,item.type,fullName)}:undefined,title:fullName,"data-test-subj":"savedObjectTitle".concat((item.title||"").split(" ").join("-"))})})):!this.state.isFetchingItems&&_react.default.createElement(_eui.EuiEmptyPrompt,{body:this.props.noItemsMessage}),this.getPageCount()>1&&(this.props.fixedPageSize?_react.default.createElement(_eui.EuiPagination,{activePage:this.state.page,pageCount:this.getPageCount(),onPageClick:function onPageClick(page){_this5.setState({page:page})}}):_react.default.createElement(_eui.EuiTablePagination,{activePage:this.state.page,pageCount:this.getPageCount(),onChangePage:function onChangePage(page){_this5.setState({page:page})},onChangeItemsPerPage:function onChangeItemsPerPage(perPage){_this5.setState({perPage:perPage})},itemsPerPage:this.state.perPage,itemsPerPageOptions:[5,10,15,25]})))}}]);return SavedObjectFinder}(_react.default.Component);exports.SavedObjectFinder=SavedObjectFinder;_defineProperty(SavedObjectFinder,"propTypes",{onChoose:_propTypes.default.func,noItemsMessage:_propTypes.default.node,savedObjectMetaData:_propTypes.default.array.isRequired,initialPageSize:_propTypes.default.oneOf([5,10,15,25]),fixedPageSize:_propTypes.default.number,showFilter:_propTypes.default.bool})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exit_full_screen_button=__webpack_require__(1598);Object.keys(_exit_full_screen_button).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _exit_full_screen_button[key]}})});var _context=__webpack_require__(679);Object.keys(_context).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _context[key]}})});var _overlays=__webpack_require__(680);Object.keys(_overlays).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _overlays[key]}})});var _ui_settings=__webpack_require__(1608);Object.keys(_ui_settings).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ui_settings[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(8);var _=__webpack_require__(40);var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core);exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core);exports.start=start},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createDashboardEditUrl=createDashboardEditUrl;exports.DashboardConstants=void 0;var DashboardConstants={ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM:"addToDashboard",NEW_VISUALIZATION_ID_PARAM:"addVisualization",LANDING_PAGE_PATH:"/dashboards",CREATE_NEW_DASHBOARD_URL:"/dashboard"};exports.DashboardConstants=DashboardConstants;function createDashboardEditUrl(id){return"/dashboard/".concat(id)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectProvider=SavedObjectProvider;var _angular=_interopRequireDefault(__webpack_require__(17));var _lodash=_interopRequireDefault(__webpack_require__(1));var _errors=__webpack_require__(25);var _mapping_setup=__webpack_require__(555);var _search_source=__webpack_require__(355);var _find_object_by_title=__webpack_require__(558);var _saved_objects_client_provider=__webpack_require__(556);var _migrate_legacy_query=__webpack_require__(126);var _persisted_log=__webpack_require__(68);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}var OVERWRITE_REJECTED=_i18n.i18n.translate("common.ui.savedObjects.overwriteRejectedDescription",{defaultMessage:"Overwrite confirmation was rejected"});var SAVE_DUPLICATE_REJECTED=_i18n.i18n.translate("common.ui.savedObjects.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});function isErrorNonFatal(error){if(!error)return false;return error.message===OVERWRITE_REJECTED||error.message===SAVE_DUPLICATE_REJECTED}function SavedObjectProvider(Promise,Private,confirmModalPromise,indexPatterns){var savedObjectsClient=Private(_saved_objects_client_provider.SavedObjectsClientProvider);var SearchSource=Private(_search_source.SearchSourceProvider);function SavedObject(config){var _this=this;if(!_lodash.default.isObject(config))config={};var esType=config.type;this.getDisplayName=function(){return esType};this.getEsType=function(){return esType};this.isSaving=false;this.defaults=config.defaults||{};var mapping=(0,_mapping_setup.expandShorthand)(config.mapping);var afterESResp=config.afterESResp||_lodash.default.noop;var customInit=config.init||_lodash.default.noop;var extractReferences=config.extractReferences;var injectReferences=config.injectReferences;this.searchSource=config.searchSource?new SearchSource:undefined;this.id=config.id||void 0;this.migrationVersion=config.migrationVersion;this.copyOnSave=false;var parseSearchSource=function parseSearchSource(searchSourceJson,references){if(!_this.searchSource)return;var searchSourceValues;try{searchSourceValues=JSON.parse(searchSourceJson)}catch(e){throw new _errors.InvalidJSONProperty("Invalid JSON in ".concat(esType,' "').concat(_this.id,'". ').concat(e.message," JSON: ").concat(searchSourceJson))}if(!searchSourceValues||_typeof(searchSourceValues)!=="object"){throw new _errors.InvalidJSONProperty("Invalid searchSourceJSON in ".concat(esType,' "').concat(_this.id,'".'))}if(searchSourceValues.indexRefName){var reference=references.find(function(reference){return reference.name===searchSourceValues.indexRefName});if(!reference){throw new Error("Could not find reference for ".concat(searchSourceValues.indexRefName," on ").concat(_this.getEsType()," ").concat(_this.id))}searchSourceValues.index=reference.id;delete searchSourceValues.indexRefName}if(searchSourceValues.filter){searchSourceValues.filter.forEach(function(filterRow){if(!filterRow.meta||!filterRow.meta.indexRefName){return}var reference=references.find(function(reference){return reference.name===filterRow.meta.indexRefName});if(!reference){throw new Error("Could not find reference for ".concat(filterRow.meta.indexRefName," on ").concat(_this.getEsType()))}filterRow.meta.index=reference.id;delete filterRow.meta.indexRefName})}var searchSourceFields=_this.searchSource.getFields();var fnProps=_lodash.default.transform(searchSourceFields,function(dynamic,val,name){if(_lodash.default.isFunction(val))dynamic[name]=val},{});_this.searchSource.setFields(_lodash.default.defaults(searchSourceValues,fnProps));if(!_lodash.default.isUndefined(_this.searchSource.getOwnField("query"))){_this.searchSource.setField("query",(0,_migrate_legacy_query.migrateLegacyQuery)(_this.searchSource.getOwnField("query")))}};this.hydrateIndexPattern=function(id){if(!_this.searchSource){return Promise.resolve(null)}if(config.clearSavedIndexPattern){_this.searchSource.setField("index",null);return Promise.resolve(null)}var index=id||config.indexPattern||_this.searchSource.getOwnField("index");if(!index){return Promise.resolve(null)}if(typeof index==="string"){index=indexPatterns.get(index)}return Promise.resolve(index).then(function(indexPattern){_this.searchSource.setField("index",indexPattern)})};this.init=_lodash.default.once(function(){if(!esType)throw new Error("You must define a type name to use SavedObject objects.");return Promise.resolve().then(function(){if(!_this.id){_lodash.default.assign(_this,_this.defaults);return _this.hydrateIndexPattern().then(function(){return afterESResp.call(_this)})}return savedObjectsClient.get(esType,_this.id).then(function(resp){return{_id:resp.id,_type:resp.type,_source:_lodash.default.cloneDeep(resp.attributes),references:resp.references,found:resp._version?true:false}}).then(_this.applyESResp).catch(_this.applyEsResp)}).then(function(){return customInit.call(_this)}).then(function(){return _this})});this.applyESResp=function(resp){_this._source=_lodash.default.cloneDeep(resp._source);if(resp.found!=null&&!resp.found){throw new _errors.SavedObjectNotFound(esType,_this.id)}var meta=resp._source.kibanaSavedObjectMeta||{};delete resp._source.kibanaSavedObjectMeta;if(!config.indexPattern&&_this._source.indexPattern){config.indexPattern=_this._source.indexPattern;delete _this._source.indexPattern}_lodash.default.defaults(_this._source,_this.defaults);_lodash.default.forOwn(mapping,function(fieldMapping,fieldName){if(fieldMapping._deserialize){_this._source[fieldName]=fieldMapping._deserialize(_this._source[fieldName],resp,fieldName,fieldMapping)}});_lodash.default.assign(_this,_this._source);_this.lastSavedTitle=_this.title;return Promise.try(function(){parseSearchSource(meta.searchSourceJSON,resp.references);return _this.hydrateIndexPattern()}).then(function(){if(injectReferences&&resp.references&&resp.references.length>0){injectReferences(_this,resp.references)}return _this}).then(function(){return Promise.cast(afterESResp.call(_this,resp))})};this._serialize=function(){var attributes={};var references=[];_lodash.default.forOwn(mapping,function(fieldMapping,fieldName){if(_this[fieldName]!=null){attributes[fieldName]=fieldMapping._serialize?fieldMapping._serialize(_this[fieldName]):_this[fieldName]}});if(_this.searchSource){var searchSourceFields=_lodash.default.omit(_this.searchSource.getFields(),["sort","size"]);if(searchSourceFields.index){var indexId=typeof searchSourceFields.index==="string"?searchSourceFields.index:searchSourceFields.index.id;var refName="kibanaSavedObjectMeta.searchSourceJSON.index";references.push({name:refName,type:"index-pattern",id:indexId});searchSourceFields=_objectSpread({},searchSourceFields,{indexRefName:refName,index:undefined})}if(searchSourceFields.filter){searchSourceFields=_objectSpread({},searchSourceFields,{filter:searchSourceFields.filter.map(function(filterRow,i){if(!filterRow.meta||!filterRow.meta.index){return filterRow}var refName="kibanaSavedObjectMeta.searchSourceJSON.filter[".concat(i,"].meta.index");references.push({name:refName,type:"index-pattern",id:filterRow.meta.index});return _objectSpread({},filterRow,{meta:_objectSpread({},filterRow.meta,{indexRefName:refName,index:undefined})})})})}attributes.kibanaSavedObjectMeta={searchSourceJSON:_angular.default.toJson(searchSourceFields)}}return{attributes:attributes,references:references}};this.isTitleChanged=function(){return _this._source&&_this._source.title!==_this.title};this.creationOpts=function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _objectSpread({id:_this.id,migrationVersion:_this.migrationVersion},opts)};var createSource=function createSource(source){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return savedObjectsClient.create(esType,source,options).catch(function(err){if(_lodash.default.get(err,"res.status")===409){var confirmMessage=_i18n.i18n.translate("common.ui.savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:_this.title}});return confirmModalPromise(confirmMessage,{confirmButtonText:_i18n.i18n.translate("common.ui.savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"}),title:_i18n.i18n.translate("common.ui.savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:_this.getDisplayName()}})}).then(function(){return savedObjectsClient.create(esType,source,_this.creationOpts(_objectSpread({overwrite:true},options)))}).catch(function(){return Promise.reject(new Error(OVERWRITE_REJECTED))})}return Promise.reject(err)})};var displayDuplicateTitleConfirmModal=function displayDuplicateTitleConfirmModal(){var confirmMessage=_i18n.i18n.translate("common.ui.savedObjects.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:"A {name} with the title '{title}' already exists. Would you like to save anyway?",values:{title:_this.title,name:_this.getDisplayName()}});return confirmModalPromise(confirmMessage,{confirmButtonText:_i18n.i18n.translate("common.ui.savedObjects.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save {name}",values:{name:_this.getDisplayName()}})}).catch(function(){return Promise.reject(new Error(SAVE_DUPLICATE_REJECTED))})};var checkForDuplicateTitle=function checkForDuplicateTitle(isTitleDuplicateConfirmed,onTitleDuplicate){if(isTitleDuplicateConfirmed){return Promise.resolve()}if(_this.title===_this.lastSavedTitle&&!_this.copyOnSave){return Promise.resolve()}return(0,_find_object_by_title.findObjectByTitle)(savedObjectsClient,_this.getEsType(),_this.title).then(function(duplicate){if(!duplicate)return true;if(duplicate.id===_this.id)return true;if(onTitleDuplicate){onTitleDuplicate();return Promise.reject(new Error(SAVE_DUPLICATE_REJECTED))}return displayDuplicateTitleConfirmModal()})};this.save=function(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$confirmOverwrite=_ref.confirmOverwrite,confirmOverwrite=_ref$confirmOverwrite===void 0?false:_ref$confirmOverwrite,_ref$isTitleDuplicate=_ref.isTitleDuplicateConfirmed,isTitleDuplicateConfirmed=_ref$isTitleDuplicate===void 0?false:_ref$isTitleDuplicate,onTitleDuplicate=_ref.onTitleDuplicate;var originalId=_this.id;if(_this.copyOnSave){_this.id=null}var _this$_serialize=_this._serialize(),attributes=_this$_serialize.attributes,references=_this$_serialize.references;if(extractReferences){var _extractReferences=extractReferences({attributes:attributes,references:references});attributes=_extractReferences.attributes;references=_extractReferences.references}if(!references)throw new Error("References not returned from extractReferences");_this.isSaving=true;return checkForDuplicateTitle(isTitleDuplicateConfirmed,onTitleDuplicate).then(function(){if(confirmOverwrite){return createSource(attributes,_this.creationOpts({references:references}))}else{return savedObjectsClient.create(esType,attributes,_this.creationOpts({references:references,overwrite:true}))}}).then(function(resp){_this.id=resp.id}).then(function(){if(_this.showInRecentlyAccessed&&_this.getFullPath){_persisted_log.recentlyAccessed.add(_this.getFullPath(),_this.title,_this.id)}_this.isSaving=false;_this.lastSavedTitle=_this.title;return _this.id}).catch(function(err){_this.isSaving=false;_this.id=originalId;if(isErrorNonFatal(err)){return}return Promise.reject(err)})};this.destroy=function(){if(_this.searchSource){_this.searchSource.cancelQueued()}};this.delete=function(){return savedObjectsClient.delete(esType,_this.id)}}return SavedObject}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1819);var context=__webpack_require__(1822);context.keys().forEach(function(key){return context(key)})},,,,,,,,function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty2(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.ContextContainer=void 0;var _lodash=__webpack_require__(1);var _=__webpack_require__(56);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ContextContainer=function(){function ContextContainer(pluginDependencies,coreId){var _this=this;_classCallCheck(this,ContextContainer);this.pluginDependencies=pluginDependencies;this.coreId=coreId;_defineProperty(this,"contextProviders",new Map);_defineProperty(this,"contextNamesBySource",void 0);_defineProperty(this,"registerContext",function(source,contextName,provider){if(_this.contextProviders.has(contextName)){throw new Error("Context provider for ".concat(contextName," has already been registered."))}if(source!==_this.coreId&&!_this.pluginDependencies.has(source)){throw new Error("Cannot register context for unknown plugin: ".concat(source.toString()))}_this.contextProviders.set(contextName,{provider:provider,source:source});_this.contextNamesBySource.set(source,[].concat(_toConsumableArray(_this.contextNamesBySource.get(source)||[]),[contextName]));return _this});_defineProperty(this,"createHandler",function(source,handler){if(source!==_this.coreId&&!_this.pluginDependencies.has(source)){throw new Error("Cannot create handler for unknown plugin: ".concat(source.toString()))}return _asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _len,args,_key,context,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:for(_len=_args.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=_args[_key]}_context.next=3;return _this.buildContext.apply(_this,[source].concat(args));case 3:context=_context.sent;return _context.abrupt("return",handler.apply(void 0,[context].concat(args)));case 5:case"end":return _context.stop()}}},_callee)}))});this.contextNamesBySource=new Map([[coreId,[]]])}_createClass(ContextContainer,[{key:"buildContext",value:function(){var _buildContext=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(source){var _this2=this;var _len2,contextArgs,_key2,contextsToBuild,_args3=arguments;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:for(_len2=_args3.length,contextArgs=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){contextArgs[_key2-1]=_args3[_key2]}contextsToBuild=new Set(this.getContextNamesForSource(source));return _context3.abrupt("return",_toConsumableArray(this.contextProviders).filter(function(_ref2){var _ref3=_slicedToArray(_ref2,1),contextName=_ref3[0];return contextsToBuild.has(contextName)}).reduce(function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(contextPromise,_ref4){var _ref6,contextName,_ref6$,provider,providerSource,resolvedContext,exposedContext;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref6=_slicedToArray(_ref4,2),contextName=_ref6[0],_ref6$=_ref6[1],provider=_ref6$.provider,providerSource=_ref6$.source;_context2.next=3;return contextPromise;case 3:resolvedContext=_context2.sent;exposedContext=(0,_.pick)(resolvedContext,_toConsumableArray(_this2.getContextNamesForSource(providerSource)));_context2.t0=_objectSpread;_context2.t1={};_context2.t2=resolvedContext;_context2.t3=_defineProperty2;_context2.t4={};_context2.t5=contextName;_context2.next=13;return provider.apply(void 0,[exposedContext].concat(contextArgs));case 13:_context2.t6=_context2.sent;_context2.t7=(0,_context2.t3)(_context2.t4,_context2.t5,_context2.t6);return _context2.abrupt("return",(0,_context2.t0)(_context2.t1,_context2.t2,_context2.t7));case 16:case"end":return _context2.stop()}}},_callee2)}));return function(_x2,_x3){return _ref5.apply(this,arguments)}}(),Promise.resolve({})));case 3:case"end":return _context3.stop()}}},_callee3,this)}));function buildContext(_x){return _buildContext.apply(this,arguments)}return buildContext}()},{key:"getContextNamesForSource",value:function getContextNamesForSource(source){if(source===this.coreId){return this.getContextNamesForCore()}else{return this.getContextNamesForPluginId(source)}}},{key:"getContextNamesForCore",value:function getContextNamesForCore(){return new Set(this.contextNamesBySource.get(this.coreId))}},{key:"getContextNamesForPluginId",value:function getContextNamesForPluginId(pluginId){var _this3=this;var pluginDeps=this.pluginDependencies.get(pluginId);if(!pluginDeps){throw new Error("Cannot create context for unknown plugin: ".concat(pluginId.toString()))}return new Set([].concat(_toConsumableArray(this.contextNamesBySource.get(this.coreId)),_toConsumableArray(this.contextNamesBySource.get(pluginId)||[]),_toConsumableArray((0,_lodash.flatten)(pluginDeps.map(function(p){return _this3.contextNamesBySource.get(p)||[]})))))}}]);return ContextContainer}();exports.ContextContainer=ContextContainer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"shareWeakReplay",{enumerable:true,get:function get(){return _share_weak_replay.shareWeakReplay}});Object.defineProperty(exports,"Sha256",{enumerable:true,get:function get(){return _crypto.Sha256}});var _share_weak_replay=__webpack_require__(814);var _crypto=__webpack_require__(815)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.BinderBase=void 0;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BinderBase=function(){function BinderBase(){_classCallCheck(this,BinderBase);_defineProperty(this,"disposal",[])}_createClass(BinderBase,[{key:"on",value:function on(emitter){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var on=emitter.on||emitter.addListener;var off=emitter.off||emitter.removeListener;on.apply(emitter,args);this.disposal.push(function(){return off.apply(emitter,args)})}},{key:"destroy",value:function destroy(){var destroyers=this.disposal;this.disposal=[];destroyers.forEach(function(fn){return fn()})}}]);return BinderBase}();exports.BinderBase=BinderBase},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.pkg=void 0;var _path=__webpack_require__(516);var pkg=_objectSpread({__filename:390,__dirname:(0,_path.dirname)(390)},__webpack_require__(390));exports.pkg=pkg},function(module){module.exports=JSON.parse('{"name":"kibana","description":"Kibana is a browser based analytics and search dashboard for Elasticsearch. Kibana is a snap to setup and start using. Kibana strives to be easy to get started with, while also being flexible and powerful, just like Elasticsearch.","keywords":["kibana","elasticsearch","logstash","analytics","visualizations","dashboards","dashboarding"],"version":"7.4.2","branch":"7.4","build":{"number":26506,"sha":"d7f39418dcaf7a243158b89f84bb82f39b04e5e5","distributable":true,"release":true},"repository":{"type":"git","url":"https://github.com/elastic/kibana.git"},"engines":{"node":"10.15.2"}}')},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(exports,"__esModule",{value:true});exports.getKbnFieldType=getKbnFieldType;exports.castEsToKbnFieldTypeName=castEsToKbnFieldTypeName;exports.getKbnTypeNames=getKbnTypeNames;exports.KBN_FIELD_TYPES=exports.KbnFieldType=void 0;var KbnFieldType=function KbnFieldType(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,KbnFieldType);var name=options.name,_options$sortable=options.sortable,sortable=_options$sortable===void 0?false:_options$sortable,_options$filterable=options.filterable,filterable=_options$filterable===void 0?false:_options$filterable,_options$esTypes=options.esTypes,esTypes=_options$esTypes===void 0?[]:_options$esTypes;Object.defineProperties(this,{name:{value:name},sortable:{value:sortable},filterable:{value:filterable},esTypes:{value:Object.freeze(esTypes.slice())}})};exports.KbnFieldType=KbnFieldType;var KBN_FIELD_TYPES=[new KbnFieldType({name:"string",sortable:true,filterable:true,esTypes:["string","text","keyword","_type","_id"]}),new KbnFieldType({name:"number",sortable:true,filterable:true,esTypes:["float","half_float","scaled_float","double","integer","long","short","byte","token_count"]}),new KbnFieldType({name:"date",sortable:true,filterable:true,esTypes:["date","date_nanos"]}),new KbnFieldType({name:"ip",sortable:true,filterable:true,esTypes:["ip"]}),new KbnFieldType({name:"boolean",sortable:true,filterable:true,esTypes:["boolean"]}),new KbnFieldType({name:"geo_point",esTypes:["geo_point"]}),new KbnFieldType({name:"object",esTypes:["object"]}),new KbnFieldType({name:"nested",esTypes:["nested"]}),new KbnFieldType({name:"geo_shape",esTypes:["geo_shape"]}),new KbnFieldType({name:"attachment",esTypes:["attachment"]}),new KbnFieldType({name:"murmur3",esTypes:["murmur3"]}),new KbnFieldType({name:"_source",esTypes:["_source"]}),new KbnFieldType({name:"unknown"}),new KbnFieldType({name:"conflict"})];exports.KBN_FIELD_TYPES=KBN_FIELD_TYPES;function getKbnFieldType(typeName){return KBN_FIELD_TYPES.find(function(type){return type.name===typeName})}function castEsToKbnFieldTypeName(esType){var type=KBN_FIELD_TYPES.find(function(type){return type.esTypes.includes(esType)});return type?type.name:"unknown"}function getKbnTypeNames(){return KBN_FIELD_TYPES.map(function(type){return type.name})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StateProvider=StateProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(2);var _angular=_interopRequireDefault(__webpack_require__(17));var _risonNode=_interopRequireDefault(__webpack_require__(67));var _diff_object=__webpack_require__(894);var _events=__webpack_require__(520);var _notify=__webpack_require__(9);__webpack_require__(901);var _legacy_class=__webpack_require__(29);var _function=__webpack_require__(394);var _state_storage=__webpack_require__(902);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StateProvider(Private,$rootScope,$location,stateManagementConfig,config,kbnUrl){var Events=Private(_events.EventsProvider);(0,_legacy_class.createLegacyClass)(State).inherits(Events);function State(urlParam,defaults){var _this=this;var hashedItemStore=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_state_storage.HashedItemStoreSingleton;State.Super.call(this);this.setDefaults(defaults);this._urlParam=urlParam||"_s";this._hashedItemStore=hashedItemStore;this._cleanUpListeners=_lodash.default.partial(_function.callEach,[$rootScope.$on("$routeUpdate",function(){_this.fetch()}),$rootScope.$on("$routeChangeStart",function(){if(!_this._persistAcrossApps){_this.destroy()}}),$rootScope.$on("$routeChangeSuccess",function(){if(_this._persistAcrossApps){_this.fetch()}})]);this.fetch()}State.prototype._readFromURL=function(){var search=$location.search();var urlVal=search[this._urlParam];if(!urlVal){return null}if((0,_state_storage.isStateHash)(urlVal)){return this._parseStateHash(urlVal)}var risonEncoded;var unableToParse;try{risonEncoded=_risonNode.default.decode(urlVal)}catch(e){unableToParse=true}if(unableToParse){_notify.toastNotifications.addDanger(_i18n.i18n.translate("common.ui.stateManagement.unableToParseUrlErrorMessage",{defaultMessage:"Unable to parse URL"}));search[this._urlParam]=this.toQueryParam(this._defaults);$location.search(search).replace()}if(!risonEncoded){return null}if(this.isHashingEnabled()){search[this._urlParam]=this.toQueryParam(risonEncoded);$location.search(search).replace()}return risonEncoded};State.prototype.fetch=function(){if(!stateManagementConfig.enabled){return}var stash=this._readFromURL();if(stash===null){if(this._persistAcrossApps){return this.save()}else{stash={}}}_lodash.default.defaults(stash,this._defaults);var diffResults=(0,_diff_object.applyDiff)(this,stash);if(diffResults.keys.length){this.emit("fetch_with_changes",diffResults.keys)}};State.prototype.save=function(replace){if(!stateManagementConfig.enabled){return}var stash=this._readFromURL();var state=this.toObject();replace=replace||false;if(!stash){replace=true;stash={}}var diffResults=(0,_diff_object.applyDiff)(stash,_lodash.default.defaults({},state,this._defaults));if(diffResults.keys.length){this.emit("save_with_changes",diffResults.keys)}var search=$location.search();search[this._urlParam]=this.toQueryParam(state);if(replace){$location.search(search).replace()}else{$location.search(search)}};State.prototype.replace=function(){if(!stateManagementConfig.enabled){return}this.save(true)};State.prototype.reset=function(){if(!stateManagementConfig.enabled){return}kbnUrl.removeParam(this.getQueryParamName());var diffResults=(0,_diff_object.applyDiff)(this,this._defaults);if(diffResults.keys.length){this.emit("reset_with_changes",diffResults.keys)}this.save()};State.prototype.destroy=function(){this.off();this._cleanUpListeners()};State.prototype.setDefaults=function(defaults){this._defaults=defaults||{}};State.prototype._parseStateHash=function(stateHash){var json=this._hashedItemStore.getItem(stateHash);if(json===null){_notify.toastNotifications.addDanger(_i18n.i18n.translate("common.ui.stateManagement.unableToRestoreUrlErrorMessage",{defaultMessage:"Unable to completely restore the URL, be sure to use the share functionality."}))}return JSON.parse(json)};State.prototype.translateHashToRison=function(stateHashOrRison){if((0,_state_storage.isStateHash)(stateHashOrRison)){return _risonNode.default.encode(this._parseStateHash(stateHashOrRison))}return stateHashOrRison};State.prototype.isHashingEnabled=function(){return!!config.get("state:storeInSessionStorage")};State.prototype.toQueryParam=function(){var _this2=this;var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.toObject();if(!this.isHashingEnabled()){return _risonNode.default.encode(state)}var json=_angular.default.toJson(state);var hash=(0,_state_storage.createStateHash)(json,function(hash){return _this2._hashedItemStore.getItem(hash)});var isItemSet=this._hashedItemStore.setItem(hash,json);if(isItemSet){return hash}var message=_i18n.i18n.translate("common.ui.stateManagement.unableToStoreHistoryInSessionErrorMessage",{defaultMessage:"Kibana is unable to store history items in your session "+"because it is full and there don't seem to be items any items safe "+"to delete.\n\n"+"This can usually be fixed by moving to a fresh tab, but could "+"be caused by a larger issue. If you are seeing this message regularly, "+"please file an issue at {gitHubIssuesUrl}.",values:{gitHubIssuesUrl:"https://github.com/elastic/kibana/issues"}});(0,_notify.fatalError)(new Error(message))};State.prototype.getQueryParamName=function(){return this._urlParam};return State}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleEmitter=SimpleEmitter;var _lodash=_interopRequireDefault(__webpack_require__(1));var _base_object=__webpack_require__(900);var _legacy_class=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(SimpleEmitter).inherits(_base_object.BaseObject);function SimpleEmitter(){this._listeners={}}SimpleEmitter.prototype.on=function(name,handler){var handlers=this._listeners[name];if(!handlers)handlers=this._listeners[name]=[];handlers.push(handler);return this};SimpleEmitter.prototype.off=function(name,handler){if(!this._listeners[name]){return this}if(handler)_lodash.default.pull(this._listeners[name],handler);else this._listeners[name]=null;return this};SimpleEmitter.prototype.removeAllListeners=function(){this._listeners={};return this};SimpleEmitter.prototype.emit=_lodash.default.restParam(function(name,args){if(!this._listeners[name])return this;var listeners=this.listeners(name);var i=-1;while(++i<listeners.length){listeners[i].apply(this,args)}return this});SimpleEmitter.prototype.activeEvents=function(){return _lodash.default.reduce(this._listeners,function(active,listeners,name){return active.concat(_lodash.default.size(listeners)?name:[])},[])};SimpleEmitter.prototype.listeners=function(name){return this._listeners[name]?this._listeners[name].slice(0):[]};SimpleEmitter.prototype.listenerCount=function(name){if(name){return _lodash.default.size(this._listeners[name])}return _lodash.default.reduce(this._listeners,function(count,handlers){return count+_lodash.default.size(handlers)},0)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.callEach=callEach;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function callEach(arr){return _lodash.default.map(arr,function(fn){return _lodash.default.isFunction(fn)?fn():undefined})}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(906)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.move=move;exports.organizeBy=organizeBy;exports.pushAll=pushAll;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function move(objs,obj,below,qualifier){var origI=_lodash.default.isNumber(obj)?obj:objs.indexOf(obj);if(origI===-1){return objs}if(_lodash.default.isNumber(below)){objs.splice(below,0,objs.splice(origI,1)[0]);return objs}below=!!below;qualifier=_lodash.default.callback(qualifier);var above=!below;var finder=below?_lodash.default.findIndex:_lodash.default.findLastIndex;var targetI=finder(objs,function(otherAgg,otherI){if(below&&otherI<=origI){return}if(above&&otherI>=origI){return}return!!qualifier(otherAgg,otherI)});if(targetI===-1){return objs}objs.splice(targetI,0,objs.splice(origI,1)[0]);return objs}function organizeBy(collection,callback){var buckets={};var prop=typeof callback==="function"?false:callback;function add(key,obj){if(!buckets[key]){buckets[key]=[]}buckets[key].push(obj)}_lodash.default.each(collection,function(obj){var keys=prop===false?callback(obj):obj[prop];if(!Array.isArray(keys)){add(keys,obj);return}var length=keys.length;while(length-- >0){add(keys[length],obj)}});return buckets}function pushAll(source,dest){var start=dest.length;var adding=source.length;dest.length=start+adding;var i=-1;while(++i<adding){dest[start+i]=source[i]}return dest}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2727)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateBounds=calculateBounds;exports.getTime=getTime;var _datemath=_interopRequireDefault(__webpack_require__(55));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function calculateBounds(timeRange){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return{min:_datemath.default.parse(timeRange.from,{forceNow:options.forceNow}),max:_datemath.default.parse(timeRange.to,{roundUp:true,forceNow:options.forceNow})}}function getTime(indexPattern,timeRange,forceNow){if(!indexPattern){return}var timefield=indexPattern.fields.find(function(field){return field.name===indexPattern.timeFieldName});if(!timefield){return}var bounds=calculateBounds(timeRange,{forceNow:forceNow});if(!bounds){return}var filter={range:_defineProperty({},timefield.name,{format:"strict_date_optional_time"})};if(bounds.min){filter.range[timefield.name].gte=bounds.min.toISOString()}if(bounds.max){filter.range[timefield.name].lte=bounds.max.toISOString()}return filter}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DataAdapter",{enumerable:true,get:function get(){return _data.DataAdapter}});Object.defineProperty(exports,"FormattedData",{enumerable:true,get:function get(){return _data.FormattedData}});Object.defineProperty(exports,"RequestAdapter",{enumerable:true,get:function get(){return _request.RequestAdapter}});Object.defineProperty(exports,"RequestStatus",{enumerable:true,get:function get(){return _request.RequestStatus}});var _data=__webpack_require__(974);var _request=__webpack_require__(977)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestStatus=void 0;var RequestStatus;exports.RequestStatus=RequestStatus;(function(RequestStatus){RequestStatus[RequestStatus["PENDING"]=0]="PENDING";RequestStatus[RequestStatus["OK"]=1]="OK";RequestStatus[RequestStatus["ERROR"]=2]="ERROR"})(RequestStatus||(exports.RequestStatus=RequestStatus={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getQueryLog=getQueryLog;var _persisted_log=__webpack_require__(68);function getQueryLog(uiSettings,appName,language){return new _persisted_log.PersistedLog("typeahead:".concat(appName,"-").concat(language),{maxLength:uiSettings.get("history:limit"),filterDuplicates:true})}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getHighlightHtml=getHighlightHtml;var _lodash=_interopRequireDefault(__webpack_require__(1));var _highlight_tags=__webpack_require__(552);var _html_tags=__webpack_require__(1006);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getHighlightHtml(fieldValue,highlights){var highlightHtml=_typeof(fieldValue)==="object"?JSON.stringify(fieldValue):fieldValue;_lodash.default.each(highlights,function(highlight){var escapedHighlight=_lodash.default.escape(highlight);var untaggedHighlight=escapedHighlight.split(_highlight_tags.highlightTags.pre).join("").split(_highlight_tags.highlightTags.post).join("");var taggedHighlight=escapedHighlight.split(_highlight_tags.highlightTags.pre).join(_html_tags.htmlTags.pre).split(_highlight_tags.highlightTags.post).join(_html_tags.htmlTags.post);highlightHtml=highlightHtml.split(untaggedHighlight).join(taggedHighlight)});return highlightHtml}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.flattenHitWrapper=flattenHitWrapper;exports.createFlattenHitWrapper=createFlattenHitWrapper;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function flattenHit(indexPattern,hit,deep){var flat={};var fields=indexPattern.fields.byName;(function flatten(obj,keyPrefix){keyPrefix=keyPrefix?keyPrefix+".":"";_lodash.default.forOwn(obj,function(val,key){key=keyPrefix+key;if(deep){var isNestedField=fields[key]&&fields[key].type==="nested";var isArrayOfObjects=Array.isArray(val)&&_lodash.default.isPlainObject(_lodash.default.first(val));if(isArrayOfObjects&&!isNestedField){_lodash.default.each(val,function(v){return flatten(v,key)});return}}else if(flat[key]!==void 0){return}var hasValidMapping=fields[key]&&fields[key].type!=="conflict";var isValue=!_lodash.default.isPlainObject(val);if(hasValidMapping||isValue){if(!flat[key]){flat[key]=val}else if(Array.isArray(flat[key])){flat[key].push(val)}else{flat[key]=[flat[key],val]}return}flatten(val,key)})})(hit._source);return flat}function decorateFlattenedWrapper(hit,metaFields){return function(flattened){_lodash.default.each(metaFields,function(meta){if(meta==="_source")return;flattened[meta]=hit[meta]});_lodash.default.forOwn(hit.fields,function(val,key){if(key[0]==="_"&&!_lodash.default.contains(metaFields,key))return;flattened[key]=Array.isArray(val)&&val.length===1?val[0]:val});return flattened}}function flattenHitWrapper(indexPattern){var metaFields=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var cache=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new WeakMap;return function cachedFlatten(hit){var deep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var decorateFlattened=decorateFlattenedWrapper(hit,metaFields);var cached=cache.get(hit);var flattened=cached||flattenHit(indexPattern,hit,deep);if(!cached){cache.set(hit,_objectSpread({},flattened))}return decorateFlattened(flattened)}}function createFlattenHitWrapper(){var cache=new WeakMap;return _lodash.default.partial(flattenHitWrapper,_lodash.default,_lodash.default,cache)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.NoDefaultIndexPattern=exports.NoDefinedIndexPatterns=exports.IndexPatternMissingIndices=exports.IndexPatternAlreadyExists=void 0;var _errors=__webpack_require__(25);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var IndexPatternAlreadyExists=function(_KbnError){_inherits(IndexPatternAlreadyExists,_KbnError);function IndexPatternAlreadyExists(name){_classCallCheck(this,IndexPatternAlreadyExists);return _possibleConstructorReturn(this,_getPrototypeOf(IndexPatternAlreadyExists).call(this,'An index pattern of "'.concat(name,'" already exists'),IndexPatternAlreadyExists))}return IndexPatternAlreadyExists}(_errors.KbnError);exports.IndexPatternAlreadyExists=IndexPatternAlreadyExists;var IndexPatternMissingIndices=function(_KbnError2){_inherits(IndexPatternMissingIndices,_KbnError2);function IndexPatternMissingIndices(message){_classCallCheck(this,IndexPatternMissingIndices);var defaultMessage="IndexPattern's configured pattern does not match any indices";return _possibleConstructorReturn(this,_getPrototypeOf(IndexPatternMissingIndices).call(this,message&&message.length?"No matching indices found: ".concat(message):defaultMessage,IndexPatternMissingIndices))}return IndexPatternMissingIndices}(_errors.KbnError);exports.IndexPatternMissingIndices=IndexPatternMissingIndices;var NoDefinedIndexPatterns=function(_KbnError3){_inherits(NoDefinedIndexPatterns,_KbnError3);function NoDefinedIndexPatterns(){_classCallCheck(this,NoDefinedIndexPatterns);return _possibleConstructorReturn(this,_getPrototypeOf(NoDefinedIndexPatterns).call(this,"Define at least one index pattern to continue",NoDefinedIndexPatterns))}return NoDefinedIndexPatterns}(_errors.KbnError);exports.NoDefinedIndexPatterns=NoDefinedIndexPatterns;var NoDefaultIndexPattern=function(_KbnError4){_inherits(NoDefaultIndexPattern,_KbnError4);function NoDefaultIndexPattern(){_classCallCheck(this,NoDefaultIndexPattern);return _possibleConstructorReturn(this,_getPrototypeOf(NoDefaultIndexPattern).call(this,"Please specify a default index pattern",NoDefaultIndexPattern))}return NoDefaultIndexPattern}(_errors.KbnError);exports.NoDefaultIndexPattern=NoDefaultIndexPattern},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FilterService",{enumerable:true,get:function get(){return _filter_service.FilterService}});Object.defineProperty(exports,"FilterSetup",{enumerable:true,get:function get(){return _filter_service.FilterSetup}});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _filter_bar.FilterBar}});Object.defineProperty(exports,"ApplyFiltersPopover",{enumerable:true,get:function get(){return _apply_filters.ApplyFiltersPopover}});var _filter_service=__webpack_require__(1015);var _filter_bar=__webpack_require__(1032);var _apply_filters=__webpack_require__(1041)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GenericComboBox=GenericComboBox;var _eui=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function GenericComboBox(props){var options=props.options,selectedOptions=props.selectedOptions,getLabel=props.getLabel,onChange=props.onChange,otherProps=_objectWithoutProperties(props,["options","selectedOptions","getLabel","onChange"]);var labels=options.map(getLabel);var euiOptions=labels.map(function(label){return{label:label}});var selectedEuiOptions=selectedOptions.map(function(option){return euiOptions[options.indexOf(option)]});var onComboBoxChange=function onComboBoxChange(newOptions){var newValues=newOptions.map(function(_ref){var label=_ref.label;return options[labels.indexOf(label)]});onChange(newValues)};return _react.default.createElement(_eui.EuiComboBox,_extends({options:euiOptions,selectedOptions:selectedEuiOptions,onChange:onComboBoxChange},otherProps))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NUM_BYTES=4;var BYTE_SIZE=256;function throwError(ipAddress){throw Error("Invalid IPv4 address: "+ipAddress)}function isIntegerInRange(integer,min,max){return!isNaN(integer)&&integer>=min&&integer<max&&integer%1===0}var Ipv4Address=function(){function Ipv4Address(ipAddress){_classCallCheck(this,Ipv4Address);_defineProperty(this,"value",void 0);if(typeof ipAddress==="string"){this.value=0;var bytes=ipAddress.split(".");if(bytes.length!==NUM_BYTES){throwError(ipAddress)}for(var i=0;i<bytes.length;i++){var byte=Number(bytes[i]);if(!isIntegerInRange(byte,0,BYTE_SIZE)){throwError(ipAddress)}this.value+=Math.pow(BYTE_SIZE,NUM_BYTES-1-i)*byte}}else{this.value=ipAddress}if(!isIntegerInRange(this.value,0,Math.pow(BYTE_SIZE,NUM_BYTES))){throwError(ipAddress)}}_createClass(Ipv4Address,[{key:"toString",value:function toString(){var value=this.value;var bytes=[];for(var i=0;i<NUM_BYTES;i++){bytes.unshift(value%256);value=Math.floor(value/256)}return bytes.join(".")}},{key:"valueOf",value:function valueOf(){return this.value}}]);return Ipv4Address}();exports.default=Ipv4Address;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"VisProvider",{enumerable:true,get:function get(){return _vis.VisProvider}});var _vis=__webpack_require__(1047)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggParams=AggParams;var _indexed_array=__webpack_require__(59);var _field=__webpack_require__(1048);var _optioned=__webpack_require__(1051);var _string=__webpack_require__(1052);var _json=__webpack_require__(1054);var _base=__webpack_require__(119);var _legacy_class=__webpack_require__(29);var paramTypeMap={field:_field.FieldParamType,optioned:_optioned.OptionedParamType,string:_string.StringParamType,json:_json.JsonParamType,_default:_base.BaseParamType};(0,_legacy_class.createLegacyClass)(AggParams).inherits(_indexed_array.IndexedArray);function AggParams(params){AggParams.Super.call(this,{index:["name"],initialSet:params.map(function(config){var Class=paramTypeMap[config.type]||paramTypeMap._default;return new Class(config)})})}AggParams.prototype.write=function(aggConfig,aggs,locals){var output={params:{}};locals=locals||{};this.forEach(function(param){if(param.write){param.write(aggConfig,output,aggs,locals)}else{output.params[param.name]=aggConfig.params[param.name]}});return output}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldParamEditor=FieldParamEditor;var _lodash=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _utils=__webpack_require__(339);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var label=_i18n.i18n.translate("common.ui.aggTypes.field.fieldLabel",{defaultMessage:"Field"});function FieldParamEditor(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,customError=_ref.customError,customLabel=_ref.customLabel,_ref$indexedFields=_ref.indexedFields,indexedFields=_ref$indexedFields===void 0?[]:_ref$indexedFields,showValidation=_ref.showValidation,value=_ref.value,setTouched=_ref.setTouched,setValidity=_ref.setValidity,setValue=_ref.setValue;var selectedOptions=value?[{label:value.displayName||value.name,target:value}]:[];var onChange=function onChange(options){var selectedOption=(0,_lodash.get)(options,"0.target");if(!(aggParam.required&&!selectedOption)){setValue(selectedOption)}if(aggParam.onChange){aggParam.onChange(agg)}};var errors=customError?[customError]:[];if(!indexedFields.length){errors.push(_i18n.i18n.translate("common.ui.aggTypes.field.noCompatibleFieldsDescription",{defaultMessage:"The index pattern {indexPatternTitle} does not contain any of the following compatible field types: {fieldTypes}",values:{indexPatternTitle:agg.getIndexPattern&&agg.getIndexPattern().title,fieldTypes:getFieldTypesString(agg)}}))}var isValid=!!value&&!errors.length;(0,_react.useEffect)(function(){setValidity(isValid);if(!!errors.length){setTouched()}},[isValid]);(0,_react.useEffect)(function(){if(indexedFields.length!==1){return}var indexedField=indexedFields[0];if(!("options"in indexedField)){setValue(indexedField.target)}else if(indexedField.options.length===1){setValue(indexedField.options[0].target)}},[]);return _react.default.createElement(_eui.EuiFormRow,{label:customLabel||label,isInvalid:showValidation?!isValid:false,fullWidth:true,error:errors,compressed:true},_react.default.createElement(_eui.EuiComboBox,{placeholder:_i18n.i18n.translate("common.ui.aggTypes.field.selectFieldPlaceholder",{defaultMessage:"Select a field"}),options:indexedFields,isDisabled:!indexedFields.length,selectedOptions:selectedOptions,singleSelection:{asPlainText:true},isClearable:false,isInvalid:showValidation?!isValid:false,onChange:onChange,onBlur:setTouched,"data-test-subj":"visDefaultEditorField",fullWidth:true}))}function getFieldTypesString(agg){return(0,_utils.formatListAsProse)((0,_utils.parseCommaSeparatedList)((0,_lodash.get)(agg,"type.params.byName.field.filterFieldTypes")),{inclusive:false})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"aggTypeFilters",{enumerable:true,get:function get(){return _agg_type_filters.aggTypeFilters}});Object.defineProperty(exports,"propFilter",{enumerable:true,get:function get(){return _prop_filter.propFilter}});var _agg_type_filters=__webpack_require__(1049);var _prop_filter=__webpack_require__(1050)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getResponseAggConfigClass=getResponseAggConfigClass;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getResponseAggConfigClass(agg,props){if(agg.$$_ResponseAggConfigClass){return agg.$$_ResponseAggConfigClass}else{return agg.$$_ResponseAggConfigClass=create(agg,props)}}function create(parentAgg,props){function ResponseAggConfig(key){this.key=key;this.parentId=this.id;var subId=String(key);if(subId.indexOf(".")>-1){this.id=this.parentId+"['"+subId.replace(/'/g,"\\'")+"']"}else{this.id=this.parentId+"."+subId}}ResponseAggConfig.prototype=Object.create(parentAgg,{constructor:ResponseAggConfig});_lodash.default.assign(ResponseAggConfig.prototype,props);return ResponseAggConfig}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopAggregateParamEditor=TopAggregateParamEditor;exports.getCompatibleAggs=getCompatibleAggs;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getCompatibleAggs(agg){var _agg$getAggParams$fin=agg.getAggParams().find(function(_ref){var name=_ref.name;return name==="aggregate"}),_agg$getAggParams$fin2=_agg$getAggParams$fin.options,options=_agg$getAggParams$fin2===void 0?[]:_agg$getAggParams$fin2;return options.filter(function(option){return option.isCompatible(agg)})}function TopAggregateParamEditor(_ref2){var agg=_ref2.agg,aggParam=_ref2.aggParam,value=_ref2.value,showValidation=_ref2.showValidation,setValue=_ref2.setValue,setValidity=_ref2.setValidity,setTouched=_ref2.setTouched;var isFirstRun=(0,_react.useRef)(true);var fieldType=agg.params.field&&agg.params.field.type;var emptyValue={text:"",value:"EMPTY_VALUE",disabled:true,hidden:true};var filteredOptions=getCompatibleAggs(agg).map(function(_ref3){var text=_ref3.text,val=_ref3.value;return{text:text,value:val}}).sort(function(a,b){return a.text.toLowerCase().localeCompare(b.text.toLowerCase())});var options=[emptyValue].concat(_toConsumableArray(filteredOptions));var disabled=fieldType&&!filteredOptions.length;var isValid=disabled||!!value;var label=_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.aggregateWithLabel",defaultMessage:"Aggregate with"})," ",_react.default.createElement(_eui.EuiIconTip,{position:"right",type:"questionInCircle",content:_i18n.i18n.translate("common.ui.aggTypes.aggregateWithTooltip",{defaultMessage:"Choose a strategy for combining multiple hits or a multi-valued field into a single metric."})}));(0,_react.useEffect)(function(){setValidity(isValid)},[isValid]);(0,_react.useEffect)(function(){if(isFirstRun.current){isFirstRun.current=false;return}if(value){if(aggParam.options.byValue[value.value]){return}setValue()}if(filteredOptions.length===1){setValue(aggParam.options.byValue[filteredOptions[0].value])}},[fieldType]);var handleChange=function handleChange(event){if(event.target.value===emptyValue.value){setValue()}else{setValue(aggParam.options.byValue[event.target.value])}};return _react.default.createElement(_eui.EuiFormRow,{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,compressed:true},_react.default.createElement(_eui.EuiSelect,{options:options,value:value?value.value:emptyValue.value,onChange:handleChange,fullWidth:true,isInvalid:showValidation?!isValid:false,disabled:disabled,onBlur:setTouched,"data-test-subj":"visDefaultEditorAggregateWith"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SizeParamEditor=SizeParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(1);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function SizeParamEditor(_ref){var disabled=_ref.disabled,iconTip=_ref.iconTip,value=_ref.value,setValue=_ref.setValue,showValidation=_ref.showValidation,setValidity=_ref.setValidity,setTouched=_ref.setTouched;var label=_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.sizeLabel",defaultMessage:"Size"}),iconTip);var isValid=disabled||Number(value)>0;(0,_react.useEffect)(function(){setValidity(isValid)},[isValid]);return _react.default.createElement(_eui.EuiFormRow,{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,compressed:true},_react.default.createElement(_eui.EuiFieldNumber,{value:(0,_lodash.isUndefined)(value)?"":value,onChange:function onChange(ev){return setValue(ev.target.value===""?"":parseFloat(ev.target.value))},fullWidth:true,isInvalid:showValidation?!isValid:false,onBlur:setTouched,min:1,disabled:disabled,"data-test-subj":"sizeParamEditor"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyGetColumns=tabifyGetColumns;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getColumn=function getColumn(agg,i){return{aggConfig:agg,id:"col-".concat(i,"-").concat(agg.id),name:agg.makeLabel()}};function tabifyGetColumns(aggs,minimalColumns){if(minimalColumns){return aggs.map(function(agg,i){return getColumn(agg,i)})}var columns=[];var grouped=_lodash.default.groupBy(aggs,function(agg){return agg.type.type});if(!grouped.buckets){return grouped.metrics.map(function(agg,i){return getColumn(agg,i)})}var columnIndex=0;grouped.buckets.forEach(function(agg){columns.push(getColumn(agg,columnIndex++));grouped.metrics.forEach(function(metric){columns.push(getColumn(metric,columnIndex++))})});return columns}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.legacyResponseHandlerProvider=void 0;var _utilities=__webpack_require__(41);var legacyResponseHandlerProvider=function legacyResponseHandlerProvider(){return{name:"legacy",handler:function handler(table,dimensions){return new Promise(function(resolve){var converted={tables:[]};var split=dimensions.splitColumn||dimensions.splitRow;if(split){converted.direction=dimensions.splitRow?"row":"column";var splitColumnIndex=split[0].accessor;var splitColumnFormatter=(0,_utilities.getFormat)(split[0].format);var splitColumn=table.columns[splitColumnIndex];var splitMap={};var splitIndex=0;table.rows.forEach(function(row,rowIndex){var splitValue=row[splitColumn.id];if(!splitMap.hasOwnProperty(splitValue)){splitMap[splitValue]=splitIndex++;var tableGroup={$parent:converted,title:"".concat(splitColumnFormatter.convert(splitValue),": ").concat(splitColumn.name),name:splitColumn.name,key:splitValue,column:splitColumnIndex,row:rowIndex,table:table,tables:[]};tableGroup.tables.push({$parent:tableGroup,columns:table.columns,rows:[]});converted.tables.push(tableGroup)}var tableIndex=splitMap[splitValue];converted.tables[tableIndex].tables[0].rows.push(row)})}else{converted.tables.push({columns:table.columns,rows:table.rows})}resolve(converted)})}}};exports.legacyResponseHandlerProvider=legacyResponseHandlerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timezoneProvider=timezoneProvider;var _momentTimezone=_interopRequireDefault(__webpack_require__(130));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function timezoneProvider(config){return function(){if(config.isDefault("dateFormat:tz")){var detectedTimezone=_momentTimezone.default.tz.guess();if(detectedTimezone)return detectedTimezone;else return(0,_momentTimezone.default)().format("Z")}else{return config.get("dateFormat:tz","Browser")}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyAggResponse=tabifyAggResponse;var _lodash=_interopRequireDefault(__webpack_require__(1));var _response_writer=__webpack_require__(1172);var _buckets=__webpack_require__(1173);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function tabifyAggResponse(aggs,esResponse){var respOpts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var write=new _response_writer.TabbedAggResponseWriter(aggs,respOpts);var topLevelBucket=_lodash.default.assign({},esResponse.aggregations,{doc_count:esResponse.hits.total});collectBucket(write,topLevelBucket,"",1);return write.response()}function collectBucket(write,bucket,key,aggScale){var column=write.aggStack.shift();var agg=column.aggConfig;var aggInfo=agg.write(write.aggs);aggScale*=aggInfo.metricScale||1;switch(agg.type.type){case"buckets":var buckets=new _buckets.TabifyBuckets(bucket[agg.id],agg.params,write.timeRange);if(buckets.length){buckets.forEach(function(subBucket,key){var bucketValue=agg.getKey(subBucket,key);var hasBucketValue=typeof bucketValue!=="undefined";if(hasBucketValue){write.bucketBuffer.push({id:column.id,value:bucketValue})}collectBucket(write,subBucket,agg.getKey(subBucket,key),aggScale);if(hasBucketValue){write.bucketBuffer.pop()}})}else if(write.partialRows){write.aggStack.unshift(column);passEmptyBuckets(write,bucket,key,aggScale);write.aggStack.shift()}else{write.row()}break;case"metrics":var value=agg.getValue(bucket);if(aggScale!==1){value*=aggScale}write.metricBuffer.push({id:column.id,value:value});if(!write.aggStack.length){write.row()}else{collectBucket(write,bucket,key,aggScale)}write.metricBuffer.pop();break}write.aggStack.unshift(column)}function passEmptyBuckets(write,bucket,key,aggScale){var column=write.aggStack.shift();var agg=column.aggConfig;switch(agg.type.type){case"metrics":write.aggStack.unshift(column);collectBucket(write,bucket,key,aggScale);return;case"buckets":passEmptyBuckets(write,bucket,key,aggScale)}write.aggStack.unshift(column)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={FetchSoonProvider:true};Object.defineProperty(exports,"FetchSoonProvider",{enumerable:true,get:function get(){return _fetch_soon.FetchSoonProvider}});var _fetch_soon=__webpack_require__(1180);var _get_search_params=__webpack_require__(420);Object.keys(_get_search_params).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_search_params[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMSearchParams=getMSearchParams;exports.getSearchParams=getSearchParams;exports.getIgnoreThrottled=getIgnoreThrottled;exports.getMaxConcurrentShardRequests=getMaxConcurrentShardRequests;exports.getPreference=getPreference;exports.getTimeout=getTimeout;function getMSearchParams(config){return{rest_total_hits_as_int:true,ignore_throttled:getIgnoreThrottled(config),max_concurrent_shard_requests:getMaxConcurrentShardRequests(config)}}function getSearchParams(config,sessionId,esShardTimeout){return{rest_total_hits_as_int:true,ignore_unavailable:true,ignore_throttled:getIgnoreThrottled(config),max_concurrent_shard_requests:getMaxConcurrentShardRequests(config),preference:getPreference(config,sessionId),timeout:getTimeout(esShardTimeout)}}function getIgnoreThrottled(config){return!config.get("search:includeFrozen")}function getMaxConcurrentShardRequests(config){var maxConcurrentShardRequests=config.get("courier:maxConcurrentShardRequests");return maxConcurrentShardRequests>0?maxConcurrentShardRequests:undefined}function getPreference(config,sessionId){var setRequestPreference=config.get("courier:setRequestPreference");if(setRequestPreference==="sessionId")return sessionId;return setRequestPreference==="custom"?config.get("courier:customRequestPreference"):undefined}function getTimeout(esShardTimeout){return esShardTimeout>0?"".concat(esShardTimeout,"ms"):undefined}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decodeGeoHash=decodeGeoHash;exports.geohashColumns=geohashColumns;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function decodeGeoHash(geohash){var BITS=[16,8,4,2,1];var BASE32="0123456789bcdefghjkmnpqrstuvwxyz";var isEven=true;var lat=[];var lon=[];lat[0]=-90;lat[1]=90;lon[0]=-180;lon[1]=180;var latErr=90;var lonErr=180;_toConsumableArray(geohash).forEach(function(nextChar){var cd=BASE32.indexOf(nextChar);for(var j=0;j<5;j++){var mask=BITS[j];if(isEven){lonErr=lonErr/=2;refineInterval(lon,cd,mask)}else{latErr=latErr/=2;refineInterval(lat,cd,mask)}isEven=!isEven}});lat[2]=(lat[0]+lat[1])/2;lon[2]=(lon[0]+lon[1])/2;return{latitude:lat,longitude:lon}}function refineInterval(interval,cd,mask){if(cd&mask){interval[0]=(interval[0]+interval[1])/2}else{interval[1]=(interval[0]+interval[1])/2}}function geohashCells(precision,axis){var cells=1;for(var i=1;i<=precision;i+=1){cells*=i%2===axis?4:8}return cells}function geohashColumns(precision){return geohashCells(precision,0)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Data=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _inject_zeros=__webpack_require__(1253);var _ordered_x_keys=__webpack_require__(620);var _labels=__webpack_require__(1258);var _color=__webpack_require__(1262);var _utilities=__webpack_require__(41);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Data=function(){function Data(data,uiState){_classCallCheck(this,Data);this.uiState=uiState;this.data=this.copyDataObj(data);this.type=this.getDataType();this._cleanVisData();this.labels=this._getLabels(this.data);this.color=this.labels?(0,_color.vislibColor)(this.labels,uiState.get("vis.colors")):undefined;this._normalizeOrdered()}_createClass(Data,[{key:"copyDataObj",value:function copyDataObj(data){var copyChart=function copyChart(data){var newData={};Object.keys(data).forEach(function(key){if(key!=="series"){newData[key]=data[key]}else{newData[key]=data[key].map(function(seri){var converter=(0,_utilities.getFormat)(seri.format);var zConverter=(0,_utilities.getFormat)(seri.zFormat);return{id:seri.id,rawId:seri.rawId,label:seri.label,zLabel:seri.zLabel,values:seri.values.map(function(val){var newVal=_lodash.default.clone(val);newVal.extraMetrics=val.extraMetrics;newVal.series=val.series||seri.label;return newVal}),yAxisFormatter:function yAxisFormatter(val){return converter.convert(val)},zAxisFormatter:function zAxisFormatter(val){return zConverter.convert(val)}}})}});var xConverter=(0,_utilities.getFormat)(newData.xAxisFormat);var yConverter=(0,_utilities.getFormat)(newData.yAxisFormat);var zConverter=(0,_utilities.getFormat)(newData.zAxisFormat);newData.xAxisFormatter=function(val){return xConverter.convert(val)};newData.yAxisFormatter=function(val){return yConverter.convert(val)};newData.zAxisFormatter=function(val){return zConverter.convert(val)};return newData};if(!data.series){var newData={};Object.keys(data).forEach(function(key){if(!["rows","columns"].includes(key)){newData[key]=data[key]}else{newData[key]=data[key].map(function(chart){return copyChart(chart)})}});return newData}return copyChart(data)}},{key:"_getLabels",value:function _getLabels(data){if(this.type==="series"){return(0,_labels.labels)(data)}return[]}},{key:"getDataType",value:function getDataType(){var data=this.getVisData();var type;data.forEach(function(obj){if(obj.series){type="series"}else if(obj.slices){type="slices"}else if(obj.geoJson){type="geoJson"}});return type}},{key:"chartData",value:function chartData(){if(!this.data.series){var arr=this.data.rows?this.data.rows:this.data.columns;return _lodash.default.toArray(arr)}return[this.data]}},{key:"shouldBeStacked",value:function shouldBeStacked(seriesConfig){if(!seriesConfig)return false;return seriesConfig.mode==="stacked"}},{key:"getStackedSeries",value:function getStackedSeries(chartConfig,axis,series){var _this=this;var first=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var matchingSeries=[];chartConfig.series.forEach(function(seriArgs,i){var matchingAxis=seriArgs.valueAxis===axis.axisConfig.get("id")||!seriArgs.valueAxis&&first;if(matchingAxis&&(_this.shouldBeStacked(seriArgs)||axis.axisConfig.get("scale.stacked"))){matchingSeries.push(series[i])}});return matchingSeries}},{key:"stackChartData",value:function stackChartData(handler,data,chartConfig){var _this2=this;var stackedData={};handler.valueAxes.forEach(function(axis,i){var id=axis.axisConfig.get("id");stackedData[id]=_this2.getStackedSeries(chartConfig,axis,data,i===0);stackedData[id]=_this2.injectZeros(stackedData[id],handler.visConfig.get("orderBucketsBySum",false));axis.axisConfig.set("stackedSeries",stackedData[id].length);axis.stack(_lodash.default.map(stackedData[id],"values"))});return stackedData}},{key:"stackData",value:function stackData(handler){var _this3=this;var data=this.data;if(data.rows||data.columns){var charts=data.rows?data.rows:data.columns;charts.forEach(function(chart,i){_this3.stackChartData(handler,chart.series,handler.visConfig.get("charts[".concat(i,"]")))})}else{this.stackChartData(handler,data.series,handler.visConfig.get("charts[0]"))}}},{key:"getVisData",value:function getVisData(){var visData;if(this.data.rows){visData=this.data.rows}else if(this.data.columns){visData=this.data.columns}else{visData=[this.data]}return visData}},{key:"getGeoExtents",value:function getGeoExtents(){var visData=this.getVisData();return _lodash.default.reduce(_lodash.default.pluck(visData,"geoJson.properties"),function(minMax,props){return{min:Math.min(props.min,minMax.min),max:Math.max(props.max,minMax.max)}},{min:Infinity,max:-Infinity})}},{key:"pieData",value:function pieData(){if(!this.data.slices){return this.data.rows?this.data.rows:this.data.columns}return[this.data]}},{key:"get",value:function get(thing,def){var source=(this.data.rows||this.data.columns||[this.data])[0];return _lodash.default.get(source,thing,def)}},{key:"hasNullValues",value:function hasNullValues(){var chartData=this.chartData();return chartData.some(function(chart){return chart.series.some(function(obj){return obj.values.some(function(d){return d.y===null})})})}},{key:"flatten",value:function flatten(){return(0,_lodash.default)(this.chartData()).pluck("series").flattenDeep().pluck("values").flattenDeep().value()}},{key:"validateUserDefinedYMin",value:function validateUserDefinedYMin(val){if(!_lodash.default.isNumber(val)){throw new Error("validateUserDefinedYMin expects a number")}return val}},{key:"returnNames",value:function returnNames(array,index,columns){var names=[];var self=this;_lodash.default.forEach(array,function(obj){names.push({label:obj.name,values:[obj.rawData],index:index});if(obj.children){var plusIndex=index+1;_lodash.default.forEach(self.returnNames(obj.children,plusIndex,columns),function(namedObj){names.push(namedObj)})}});return names}},{key:"getNames",value:function getNames(data,columns){var slices=data.slices;if(slices.children){var namedObj=this.returnNames(slices.children,0,columns);return(0,_lodash.default)(namedObj).sortBy(function(obj){return obj.index}).unique(function(d){return d.label}).value()}}},{key:"_cleanVisData",value:function _cleanVisData(){var visData=this.getVisData();if(this.type==="slices"){this._cleanPieChartData(visData)}}},{key:"_cleanPieChartData",value:function _cleanPieChartData(data){var _this4=this;_lodash.default.forEach(data,function(obj){obj.slices=_this4._removeZeroSlices(obj.slices)})}},{key:"_removeZeroSlices",value:function _removeZeroSlices(slices){var _this5=this;if(!slices.children){return slices}slices=_lodash.default.clone(slices);slices.children=slices.children.reduce(function(children,child){if(child.size!==0){return[].concat(_toConsumableArray(children),[_this5._removeZeroSlices(child)])}return children},[]);return slices}},{key:"pieNames",value:function pieNames(data){var self=this;var names=[];_lodash.default.forEach(data,function(obj){var columns=obj.raw?obj.raw.columns:undefined;_lodash.default.forEach(self.getNames(obj,columns),function(name){names.push(name)})});return _lodash.default.uniq(names,"label")}},{key:"injectZeros",value:function injectZeros(data){var orderBucketsBySum=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return(0,_inject_zeros.injectZeros)(data,this.data,orderBucketsBySum)}},{key:"xValues",value:function xValues(){var orderBucketsBySum=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return(0,_ordered_x_keys.orderXValues)(this.data,orderBucketsBySum)}},{key:"getLabels",value:function getLabels(){return(0,_labels.labels)(this.data)}},{key:"getColorFunc",value:function getColorFunc(){if(this.type==="slices"){return this.getPieColorFunc()}var defaultColors=this.uiState.get("vis.defaultColors");var overwriteColors=this.uiState.get("vis.colors");var colors=defaultColors?_lodash.default.defaults({},overwriteColors,defaultColors):overwriteColors;return(0,_color.vislibColor)(this.getLabels(),colors)}},{key:"getPieColorFunc",value:function getPieColorFunc(){return(0,_color.vislibColor)(this.pieNames(this.getVisData()).map(function(d){return d.label}),this.uiState.get("vis.colors"))}},{key:"_normalizeOrdered",value:function _normalizeOrdered(){var data=this.getVisData();var self=this;data.forEach(function(d){if(!d.ordered||!d.ordered.date)return;var missingMin=d.ordered.min==null;var missingMax=d.ordered.max==null;if(missingMax||missingMin){var extent=_d.default.extent(self.xValues());if(missingMin)d.ordered.min=extent[0];if(missingMax)d.ordered.max=extent[1]}})}},{key:"mapDataExtents",value:function mapDataExtents(series){var values=_lodash.default.map(series.rows,function(row){return row[row.length-1]});return[_lodash.default.min(values),_lodash.default.max(values)]}},{key:"maxNumberOfSeries",value:function maxNumberOfSeries(){return this.chartData().reduce(function(max,chart){return Math.max(max,chart.series.length)},0)}}]);return Data}();exports.Data=Data},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _vislib=__webpack_require__(1264);var _default=_vislib.VislibProvider;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Tooltip",{enumerable:true,get:function get(){return _tooltip.Tooltip}});Object.defineProperty(exports,"TooltipProvider",{enumerable:true,get:function get(){return _tooltip.TooltipProvider}});var _tooltip=__webpack_require__(1277)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Chart=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _data_label=__webpack_require__(1280);var _dispatch=__webpack_require__(1281);var _tooltip=__webpack_require__(424);var _utilities=__webpack_require__(41);var _hierarchical_tooltip_formatter=__webpack_require__(630);var _pointseries_tooltip_formatter=__webpack_require__(631);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Chart=function(){function Chart(handler,el,chartData){_classCallCheck(this,Chart);this.handler=handler;this.chartEl=el;this.chartData=chartData;this.tooltips=[];var events=this.events=new _dispatch.Dispatch(handler);var fieldFormatter=(0,_utilities.getFormat)(this.handler.data.get("tooltipFormatter"));var tooltipFormatterProvider=this.handler.visConfig.get("type")==="pie"?(0,_hierarchical_tooltip_formatter.getHierarchicalTooltipFormatter)():(0,_pointseries_tooltip_formatter.getPointSeriesTooltipFormatter)();var tooltipFormatter=tooltipFormatterProvider(fieldFormatter);if(this.handler.visConfig&&this.handler.visConfig.get("addTooltip",false)){var $el=this.handler.el;this.tooltip=new _tooltip.Tooltip("chart",$el,tooltipFormatter,events);this.tooltips.push(this.tooltip)}this._addIdentifier=_lodash.default.bind(this._addIdentifier,this)}_createClass(Chart,[{key:"render",value:function render(){var selection=_d.default.select(this.chartEl);selection.selectAll("*").remove();selection.call(this.draw())}},{key:"_addIdentifier",value:function _addIdentifier(selection,labelProp){labelProp=labelProp||"label";var labels=this.handler.data.labels;function resolveLabel(datum){if(labels.length===1)return labels[0];if(datum[0])return datum[0][labelProp];return datum[labelProp]}selection.each(function(datum){var label=resolveLabel(datum);if(label!=null)(0,_data_label.dataLabel)(this,label)})}},{key:"destroy",value:function destroy(){var selection=_d.default.select(this.chartEl);this.events.removeAllListeners();this.tooltips.forEach(function(tooltip){tooltip.destroy()});selection.remove()}}]);return Chart}();exports.Chart=Chart},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2183)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getHeatmapColors=getHeatmapColors;var _lodash=_interopRequireDefault(__webpack_require__(1));var _colormaps=__webpack_require__(84);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function enforceBounds(x){if(x<0){return 0}else if(x>1){return 1}else{return x}}function interpolateLinearly(x,values){var xValues=[];var rValues=[];var gValues=[];var bValues=[];values.forEach(function(value){xValues.push(value[0]);rValues.push(value[1][0]);gValues.push(value[1][1]);bValues.push(value[1][2])});var i=1;while(xValues[i]<x){i++}var width=Math.abs(xValues[i-1]-xValues[i]);var scalingFactor=(x-xValues[i-1])/width;var r=rValues[i-1]+scalingFactor*(rValues[i]-rValues[i-1]);var g=gValues[i-1]+scalingFactor*(gValues[i]-gValues[i-1]);var b=bValues[i-1]+scalingFactor*(bValues[i]-bValues[i-1]);return[enforceBounds(r),enforceBounds(g),enforceBounds(b)]}function getHeatmapColors(value,colorSchemaName){if(!_lodash.default.isNumber(value)||value<0||value>1){throw new Error("heatmap_color expects a number from 0 to 1 as first parameter")}var colorSchema=_colormaps.vislibColorMaps[colorSchemaName].value;if(!colorSchema){throw new Error("invalid colorSchemaName provided")}var color=interpolateLinearly(value,colorSchema);var r=Math.round(255*color[0]);var g=Math.round(255*color[1]);var b=Math.round(255*color[2]);return"rgb(".concat(r,",").concat(g,",").concat(b,")")}function drawColormap(colorSchema){var width=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var height=arguments.length>2&&arguments[2]!==undefined?arguments[2]:10;var canvas=document.createElement("canvas");canvas.width=width;canvas.height=height;var ctx=canvas.getContext("2d");for(var i=0;i<=width;i++){ctx.fillStyle=getHeatmapColors(i/width,colorSchema);ctx.fillRect(i,0,1,height)}return canvas}getHeatmapColors.prototype.drawColormap=drawColormap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,Plugin:true,Setup:true,Start:true};exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.InspectorPublicPlugin}});Object.defineProperty(exports,"Setup",{enumerable:true,get:function get(){return _plugin.Setup}});Object.defineProperty(exports,"Start",{enumerable:true,get:function get(){return _plugin.Start}});var _plugin=__webpack_require__(1320);var _types=__webpack_require__(1338);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})});function plugin(initializerContext){return new _plugin.InspectorPublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(513)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.buildPipeline=exports.getVisParams=exports.buildVislibDimensions=exports.buildPipelineVisFunction=exports.prepareDimension=exports.prepareValue=exports.prepareString=exports.escapeString=exports.prepareJson=exports.getSchemas=void 0;var _lodash=__webpack_require__(1);var _date_histogram=__webpack_require__(592);var _moment=_interopRequireDefault(__webpack_require__(14));var _utilities=__webpack_require__(41);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}var vislibCharts=["area","gauge","goal","heatmap","histogram","horizontal_bar","line"];var getSchemas=function getSchemas(vis,timeRange){var createSchemaConfig=function createSchemaConfig(accessor,agg){if(agg.type.name==="date_histogram"){agg.params.timeRange=timeRange;(0,_date_histogram.setBounds)(agg,true)}var hasSubAgg=["derivative","moving_avg","serial_diff","cumulative_sum","sum_bucket","avg_bucket","min_bucket","max_bucket"].includes(agg.type.name);var format=(0,_utilities.createFormat)(hasSubAgg?agg.params.customMetric||agg.aggConfigs.byId[agg.params.metricAgg]:agg);var params={};if(agg.type.name==="geohash_grid"){params.precision=agg.params.precision;params.useGeocentroid=agg.params.useGeocentroid}return{accessor:accessor,format:format,params:params,aggType:agg.type.name}};var cnt=0;var schemas={metric:[]};var responseAggs=vis.aggs.getResponseAggs().filter(function(agg){return agg.enabled});var isHierarchical=vis.isHierarchical();var metrics=responseAggs.filter(function(agg){return agg.type.type==="metrics"});responseAggs.forEach(function(agg){var skipMetrics=false;var schemaName=agg.schema?agg.schema.name||agg.schema:null;if(_typeof(schemaName)==="object"){schemaName=null}if(!schemaName){if(agg.type.name==="geo_centroid"){schemaName="geo_centroid"}else{cnt++;return}}if(schemaName==="split"){schemaName="split_".concat(agg.params.row?"row":"column");skipMetrics=responseAggs.length-metrics.length>1}if(!schemas[schemaName]){schemas[schemaName]=[]}if(!isHierarchical||agg.type.type!=="metrics"){schemas[schemaName].push(createSchemaConfig(cnt++,agg))}if(isHierarchical&&(agg.type.type!=="metrics"||metrics.length===responseAggs.length)){metrics.forEach(function(metric){var schemaConfig=createSchemaConfig(cnt++,metric);if(!skipMetrics){schemas.metric.push(schemaConfig)}})}});return schemas};exports.getSchemas=getSchemas;var prepareJson=function prepareJson(variable,data){if(data===undefined){return""}return"".concat(variable,"='").concat(JSON.stringify(data).replace(/\\/g,"\\\\").replace(/'/g,"\\'"),"' ")};exports.prepareJson=prepareJson;var escapeString=function escapeString(data){return data.replace(/\\/g,"\\\\").replace(/'/g,"\\'")};exports.escapeString=escapeString;var prepareString=function prepareString(variable,data){if(data===undefined){return""}return"".concat(variable,"='").concat(escapeString(data),"' ")};exports.prepareString=prepareString;var prepareValue=function prepareValue(variable,data){var raw=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(data===undefined){return""}if(raw){return"".concat(variable,"=").concat(data," ")}switch(_typeof(data)){case"string":return prepareString(variable,data);case"object":return prepareJson(variable,data);default:return"".concat(variable,"=").concat(data," ")}};exports.prepareValue=prepareValue;var prepareDimension=function prepareDimension(variable,data){if(data===undefined){return""}var expr="".concat(variable,"={visdimension ").concat(data.accessor," ");if(data.format){expr+=prepareValue("format",data.format.id);expr+=prepareJson("formatParams",data.format.params)}expr+="} ";return expr};exports.prepareDimension=prepareDimension;var adjustVislibDimensionFormmaters=function adjustVislibDimensionFormmaters(vis,dimensions){var visState=vis.getCurrentState();var visConfig=visState.params;var responseAggs=vis.aggs.getResponseAggs().filter(function(agg){return agg.enabled});(dimensions.y||[]).forEach(function(yDimension){var yAgg=responseAggs[yDimension.accessor];var seriesParam=(visConfig.seriesParams||[]).find(function(param){return param.data.id===yAgg.id});if(seriesParam){var usedValueAxis=(visConfig.valueAxes||[]).find(function(valueAxis){return valueAxis.id===seriesParam.valueAxis});if((0,_lodash.get)(usedValueAxis,"scale.mode")==="percentage"){yDimension.format={id:"percent"}}}if((0,_lodash.get)(visConfig,"gauge.percentageMode")===true){yDimension.format={id:"percent"}}})};var buildPipelineVisFunction={vega:function vega(visState){return"vega ".concat(prepareString("spec",visState.params.spec))},input_control_vis:function input_control_vis(visState){return"input_control_vis ".concat(prepareJson("visConfig",visState.params))},metrics:function metrics(visState,schemas){var uiState=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var paramsJson=prepareJson("params",visState.params);var uiStateJson=prepareJson("uiState",uiState);return"tsvb ".concat(paramsJson," ").concat(uiStateJson)},timelion:function timelion(visState){var expression=prepareString("expression",visState.params.expression);var interval=prepareString("interval",visState.params.interval);return"timelion_vis ".concat(expression).concat(interval)},markdown:function markdown(visState){var _visState$params=visState.params,markdown=_visState$params.markdown,fontSize=_visState$params.fontSize,openLinksInNewTab=_visState$params.openLinksInNewTab;var escapedMarkdown="";if(typeof markdown==="string"||markdown instanceof String){escapedMarkdown=escapeString(markdown.toString())}var expr="markdownvis '".concat(escapedMarkdown,"' ");expr+=prepareValue("font","{font size=".concat(fontSize,"}"),true);expr+=prepareValue("openLinksInNewTab",openLinksInNewTab);return expr},table:function table(visState,schemas){var visConfig=_objectSpread({},visState.params,{},buildVisConfig.table(schemas,visState.params));return"kibana_table ".concat(prepareJson("visConfig",visConfig))},metric:function metric(visState,schemas){var _visState$params$metr=visState.params.metric,percentageMode=_visState$params$metr.percentageMode,useRanges=_visState$params$metr.useRanges,colorSchema=_visState$params$metr.colorSchema,metricColorMode=_visState$params$metr.metricColorMode,colorsRange=_visState$params$metr.colorsRange,labels=_visState$params$metr.labels,invertColors=_visState$params$metr.invertColors,style=_visState$params$metr.style;var _buildVisConfig$metri=buildVisConfig.metric(schemas).dimensions,metrics=_buildVisConfig$metri.metrics,bucket=_buildVisConfig$metri.bucket;if((0,_lodash.get)(visState.params,"metric.percentageMode")===true){metrics.forEach(function(metric){metric.format={id:"percent"}})}var expr="metricvis ";expr+=prepareValue("percentage",percentageMode);expr+=prepareValue("colorScheme",colorSchema);expr+=prepareValue("colorMode",metricColorMode);expr+=prepareValue("useRanges",useRanges);expr+=prepareValue("invertColors",invertColors);expr+=prepareValue("showLabels",labels&&labels.show);if(style){expr+=prepareValue("bgFill",style.bgFill);expr+=prepareValue("font","{font size=".concat(style.fontSize,"}"),true);expr+=prepareValue("subText",style.subText);expr+=prepareDimension("bucket",bucket)}if(colorsRange){colorsRange.forEach(function(range){expr+=prepareValue("colorRange","{range from=".concat(range.from," to=").concat(range.to,"}"),true)})}metrics.forEach(function(metric){expr+=prepareDimension("metric",metric)});return expr},tagcloud:function tagcloud(visState,schemas){var _visState$params2=visState.params,scale=_visState$params2.scale,orientation=_visState$params2.orientation,minFontSize=_visState$params2.minFontSize,maxFontSize=_visState$params2.maxFontSize,showLabel=_visState$params2.showLabel;var _buildVisConfig$tagcl=buildVisConfig.tagcloud(schemas),metric=_buildVisConfig$tagcl.metric,bucket=_buildVisConfig$tagcl.bucket;var expr="tagcloud metric={visdimension ".concat(metric.accessor,"} ");expr+=prepareValue("scale",scale);expr+=prepareValue("orientation",orientation);expr+=prepareValue("minFontSize",minFontSize);expr+=prepareValue("maxFontSize",maxFontSize);expr+=prepareValue("showLabel",showLabel);expr+=prepareDimension("bucket",bucket);return expr},region_map:function region_map(visState,schemas){var visConfig=_objectSpread({},visState.params,{},buildVisConfig.region_map(schemas));return"regionmap ".concat(prepareJson("visConfig",visConfig))},tile_map:function tile_map(visState,schemas){var visConfig=_objectSpread({},visState.params,{},buildVisConfig.tile_map(schemas));return"tilemap ".concat(prepareJson("visConfig",visConfig))},pie:function pie(visState,schemas){var visConfig=_objectSpread({},visState.params,{},buildVisConfig.pie(schemas));return"kibana_pie ".concat(prepareJson("visConfig",visConfig))}};exports.buildPipelineVisFunction=buildPipelineVisFunction;var buildVisConfig={table:function table(schemas){var visParams=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var visConfig={};var metrics=schemas.metric;var buckets=schemas.bucket||[];visConfig.dimensions={metrics:metrics,buckets:buckets,splitRow:schemas.split_row,splitColumn:schemas.split_column};if(visParams.showMetricsAtAllLevels===false&&visParams.showPartialRows===true){var metricsPerBucket=metrics.length/buckets.length;visConfig.dimensions.metrics.splice(0,metricsPerBucket*buckets.length-metricsPerBucket)}return visConfig},metric:function metric(schemas){var visConfig={dimensions:{}};visConfig.dimensions.metrics=schemas.metric;if(schemas.group){visConfig.dimensions.bucket=schemas.group[0]}return visConfig},tagcloud:function tagcloud(schemas){var visConfig={};visConfig.metric=schemas.metric[0];if(schemas.segment){visConfig.bucket=schemas.segment[0]}return visConfig},region_map:function region_map(schemas){var visConfig={};visConfig.metric=schemas.metric[0];if(schemas.segment){visConfig.bucket=schemas.segment[0]}return visConfig},tile_map:function tile_map(schemas){var visConfig={};visConfig.dimensions={metric:schemas.metric[0],geohash:schemas.segment?schemas.segment[0]:null,geocentroid:schemas.geo_centroid?schemas.geo_centroid[0]:null};return visConfig},pie:function pie(schemas){var visConfig={};visConfig.dimensions={metric:schemas.metric[0],buckets:schemas.segment,splitRow:schemas.split_row,splitColumn:schemas.split_column};return visConfig}};var buildVislibDimensions=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(vis,params){var schemas,dimensions,xAgg,_xAgg$buckets$getInte,esUnit,esValue,intervalParam,output,searchRequest;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:schemas=getSchemas(vis,params.timeRange);dimensions={x:schemas.segment?schemas.segment[0]:null,y:schemas.metric,z:schemas.radius,width:schemas.width,series:schemas.group,splitRow:schemas.split_row,splitColumn:schemas.split_column};if(!schemas.segment){_context.next=20;break}xAgg=vis.aggs.getResponseAggs()[dimensions.x.accessor];if(!(xAgg.type.name==="date_histogram")){_context.next=12;break}dimensions.x.params.date=true;_xAgg$buckets$getInte=xAgg.buckets.getInterval(),esUnit=_xAgg$buckets$getInte.esUnit,esValue=_xAgg$buckets$getInte.esValue;dimensions.x.params.interval=_moment.default.duration(esValue,esUnit);dimensions.x.params.format=xAgg.buckets.getScaledDateFormat();dimensions.x.params.bounds=xAgg.buckets.getBounds();_context.next=20;break;case 12:if(!(xAgg.type.name==="histogram")){_context.next=20;break}intervalParam=xAgg.type.params.byName.interval;output={params:{}};searchRequest={whenAborted:function whenAborted(fn){if(params.abortSignal){params.abortSignal.addEventListener("abort",fn)}}};_context.next=18;return intervalParam.modifyAggConfigOnSearchRequestStart(xAgg,params.searchSource,searchRequest);case 18:intervalParam.write(xAgg,output);dimensions.x.params.interval=output.params.interval;case 20:adjustVislibDimensionFormmaters(vis,dimensions);return _context.abrupt("return",dimensions);case 22:case"end":return _context.stop()}}},_callee)}));return function buildVislibDimensions(_x,_x2){return _ref.apply(this,arguments)}}();exports.buildVislibDimensions=buildVislibDimensions;var getVisParams=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(vis,params){var schemas,visConfig;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:schemas=getSchemas(vis,params.timeRange);visConfig=(0,_lodash.cloneDeep)(vis.params);if(!buildVisConfig[vis.type.name]){_context2.next=6;break}visConfig=_objectSpread({},visConfig,{},buildVisConfig[vis.type.name](schemas,visConfig));_context2.next=10;break;case 6:if(!vislibCharts.includes(vis.type.name)){_context2.next=10;break}_context2.next=9;return buildVislibDimensions(vis,params);case 9:visConfig.dimensions=_context2.sent;case 10:return _context2.abrupt("return",visConfig);case 11:case"end":return _context2.stop()}}},_callee2)}));return function getVisParams(_x3,_x4){return _ref2.apply(this,arguments)}}();exports.getVisParams=getVisParams;var buildPipeline=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(vis,params){var searchSource,indexPattern,query,filters,visState,uiState,pipeline,schemas,visConfig,_visConfig;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:searchSource=params.searchSource;indexPattern=vis.indexPattern;query=searchSource.getField("query");filters=searchSource.getField("filter");visState=vis.getCurrentState();uiState=vis.getUiState();pipeline="kibana | kibana_context ";if(query){pipeline+=prepareJson("query",query)}if(filters){pipeline+=prepareJson("filters",filters)}if(vis.savedSearchId){pipeline+=prepareString("savedSearchId",vis.savedSearchId)}pipeline+="| ";if(vis.type.requestHandler==="courier"){pipeline+="esaggs\n    ".concat(prepareString("index",indexPattern.id),"\n    metricsAtAllLevels=").concat(vis.isHierarchical(),"\n    partialRows=").concat(vis.type.requiresPartialRows||vis.params.showPartialRows||false,"\n    ").concat(prepareJson("aggConfigs",visState.aggs)," | ")}schemas=getSchemas(vis,params.timeRange);if(!buildPipelineVisFunction[vis.type.name]){_context3.next=17;break}pipeline+=buildPipelineVisFunction[vis.type.name](visState,schemas,uiState);_context3.next=36;break;case 17:if(!vislibCharts.includes(vis.type.name)){_context3.next=25;break}visConfig=visState.params;_context3.next=21;return buildVislibDimensions(vis,params);case 21:visConfig.dimensions=_context3.sent;pipeline+="vislib type='".concat(vis.type.name,"' ").concat(prepareJson("visConfig",visState.params));_context3.next=36;break;case 25:if(!vis.type.toExpression){_context3.next=32;break}_context3.t0=pipeline;_context3.next=29;return vis.type.toExpression(vis,params);case 29:pipeline=_context3.t0+=_context3.sent;_context3.next=36;break;case 32:_visConfig=visState.params;_visConfig.dimensions=schemas;pipeline+="visualization type='".concat(vis.type.name,"'\n    ").concat(prepareJson("visConfig",_visConfig),"\n    metricsAtAllLevels=").concat(vis.isHierarchical(),"\n    partialRows=").concat(vis.type.requiresPartialRows||vis.params.showPartialRows||false," ");if(indexPattern){pipeline+="".concat(prepareString("index",indexPattern.id))}case 36:return _context3.abrupt("return",pipeline);case 37:case"end":return _context3.stop()}}},_callee3)}));return function buildPipeline(_x5,_x6){return _ref3.apply(this,arguments)}}();exports.buildPipeline=buildPipeline},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateLabel=calculateLabel;var _lodash=__webpack_require__(1);var _agg_lookup=__webpack_require__(650);var _i18n=__webpack_require__(2);var paths=["cumulative_sum","derivative","moving_average","avg_bucket","sum_bucket","min_bucket","max_bucket","std_deviation_bucket","variance_bucket","sum_of_squares_bucket","serial_diff","positive_only"];function calculateLabel(metric,metrics){if(!metric)return _i18n.i18n.translate("tsvb.calculateLabel.unknownLabel",{defaultMessage:"Unknown"});if(metric.alias)return metric.alias;if(metric.type==="count")return _i18n.i18n.translate("tsvb.calculateLabel.countLabel",{defaultMessage:"Count"});if(metric.type==="calculation"){return _i18n.i18n.translate("tsvb.calculateLabel.bucketScriptsLabel",{defaultMessage:"Bucket Script"})}if(metric.type==="math")return _i18n.i18n.translate("tsvb.calculateLabel.mathLabel",{defaultMessage:"Math"});if(metric.type==="series_agg"){return _i18n.i18n.translate("tsvb.calculateLabel.seriesAggLabel",{defaultMessage:"Series Agg ({metricFunction})",values:{metricFunction:metric.function}})}if(metric.type==="filter_ratio")return _i18n.i18n.translate("tsvb.calculateLabel.filterRatioLabel",{defaultMessage:"Filter Ratio"});if(metric.type==="static"){return _i18n.i18n.translate("tsvb.calculateLabel.staticValueLabel",{defaultMessage:"Static Value of {metricValue}",values:{metricValue:metric.value}})}if((0,_lodash.includes)(paths,metric.type)){var targetMetric=metrics.find(function(m){return(0,_lodash.startsWith)(metric.field,m.id)});var targetLabel=calculateLabel(targetMetric,metrics);if(targetMetric&&targetMetric.type==="percentile"){var percentileValueMatch=/\[([0-9\.]+)\]$/;var matches=metric.field.match(percentileValueMatch);if(matches){return _i18n.i18n.translate("tsvb.calculateLabel.lookupMetricTypeOfTargetWithAdditionalLabel",{defaultMessage:"{lookupMetricType} of {targetLabel} ({additionalLabel})",values:{lookupMetricType:_agg_lookup.lookup[metric.type],targetLabel:targetLabel,additionalLabel:matches[1]}})}}return _i18n.i18n.translate("tsvb.calculateLabel.lookupMetricTypeOfTargetLabel",{defaultMessage:"{lookupMetricType} of {targetLabel}",values:{lookupMetricType:_agg_lookup.lookup[metric.type],targetLabel:targetLabel}})}return _i18n.i18n.translate("tsvb.calculateLabel.lookupMetricTypeOfMetricFieldRankLabel",{defaultMessage:"{lookupMetricType} of {metricField}",values:{lookupMetricType:_agg_lookup.lookup[metric.type],metricField:metric.field}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateCoordinates=calculateCoordinates;var _reactDom=__webpack_require__(13);var _calc_dimensions=__webpack_require__(1379);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function calculateCoordinates(innerRef,resizeRef,state){var inner=(0,_reactDom.findDOMNode)(innerRef);var resize=(0,_reactDom.findDOMNode)(resizeRef);var scale=state.scale;if(resize.clientWidth-resize.clientHeight<0){scale=resize.clientWidth/inner.clientWidth}else{scale=resize.clientHeight/inner.clientHeight}var _calcDimensions=(0,_calc_dimensions.calcDimensions)(inner,scale),_calcDimensions2=_slicedToArray(_calcDimensions,2),newWidth=_calcDimensions2[0],newHeight=_calcDimensions2[1];if(newWidth>resize.clientWidth){scale=resize.clientWidth/inner.clientWidth}if(newHeight>resize.clientHeight){scale=resize.clientHeight/inner.clientHeight}var _calcDimensions3=(0,_calc_dimensions.calcDimensions)(inner,scale);var _calcDimensions4=_slicedToArray(_calcDimensions3,2);newWidth=_calcDimensions4[0];newHeight=_calcDimensions4[1];var translateX=(newWidth-inner.clientWidth)/2;var translateY=(newHeight-inner.clientHeight)/2;var top=Math.floor((resize.clientHeight-newHeight)/2);var left=Math.floor((resize.clientWidth-newWidth)/2);return{scale:scale,top:top,left:left,translateY:translateY,translateX:translateX}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.newMetricAggFn=void 0;var _uuid=_interopRequireDefault(__webpack_require__(31));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var newMetricAggFn=function newMetricAggFn(){return{id:_uuid.default.v1(),type:"count"}};exports.newMetricAggFn=newMetricAggFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataFormatPicker=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _eui=__webpack_require__(3);var _durations=__webpack_require__(644);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_OUTPUT_PRECISION="2";var DataFormatPickerUI=function(_Component){_inherits(DataFormatPickerUI,_Component);function DataFormatPickerUI(props){var _this;_classCallCheck(this,DataFormatPickerUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(DataFormatPickerUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleCustomChange",function(){_this.props.onChange([{value:_this.custom&&_this.custom.value||""}])});_defineProperty(_assertThisInitialized(_this),"handleChange",function(selectedOptions){if(selectedOptions.length<1){return}if(selectedOptions[0].value==="custom"){_this.handleCustomChange()}else if(selectedOptions[0].value==="duration"){var _this$state=_this.state,from=_this$state.from,to=_this$state.to,decimals=_this$state.decimals;_this.props.onChange([{value:"".concat(from,",").concat(to,",").concat(decimals)}])}else{_this.props.onChange(selectedOptions)}});var _from;var _to;var _decimals;if((0,_durations.isDuration)(props.value)){var _props$value$split=props.value.split(",");var _props$value$split2=_slicedToArray(_props$value$split,3);_from=_props$value$split2[0];_to=_props$value$split2[1];_decimals=_props$value$split2[2]}_this.state={from:_from||"ms",to:_to||"ms",decimals:_decimals||""};return _this}_createClass(DataFormatPickerUI,[{key:"handleDurationChange",value:function handleDurationChange(name){var _this2=this;return function(selectedOptions){if(selectedOptions.length<1){return}var newValue;if(name==="decimals"){newValue=_this2.decimals.value}else{newValue=selectedOptions[0].value}_this2.setState(_defineProperty({},name,newValue),function(){var _this2$state=_this2.state,from=_this2$state.from,to=_this2$state.to,decimals=_this2$state.decimals;_this2.props.onChange([{value:"".concat(from,",").concat(to,",").concat(decimals)}])})}}},{key:"render",value:function render(){var _this3=this;var htmlId=(0,_eui.htmlIdGenerator)();var value=this.props.value||"";var defaultValue=value;if(!_lodash.default.includes(["bytes","number","percent"],value)){defaultValue="custom"}if((0,_durations.isDuration)(value)){defaultValue="duration"}var intl=this.props.intl;var options=[{label:intl.formatMessage({id:"tsvb.dataFormatPicker.bytesLabel",defaultMessage:"Bytes"}),value:"bytes"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.numberLabel",defaultMessage:"Number"}),value:"number"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.percentLabel",defaultMessage:"Percent"}),value:"percent"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.durationLabel",defaultMessage:"Duration"}),value:"duration"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.customLabel",defaultMessage:"Custom"}),value:"custom"}];var selectedOption=options.find(function(option){return defaultValue===option.value});var custom;if(defaultValue==="duration"){var _value$split=value.split(","),_value$split2=_slicedToArray(_value$split,3),from=_value$split2[0],to=_value$split2[1],decimals=_value$split2[2];var selectedFrom=_durations.durationInputOptions.find(function(option){return from===option.value});var selectedTo=_durations.durationOutputOptions.find(function(option){return to===option.value});return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("date"),label:this.props.label},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:options,selectedOptions:selectedOption?[selectedOption]:[],onChange:this.handleChange,singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("from"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.dataFormatPicker.fromLabel",defaultMessage:"From"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:_durations.durationInputOptions,selectedOptions:selectedFrom?[selectedFrom]:[],onChange:this.handleDurationChange("from"),singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("to"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.dataFormatPicker.toLabel",defaultMessage:"To"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:_durations.durationOutputOptions,selectedOptions:selectedTo?[selectedTo]:[],onChange:this.handleDurationChange("to"),singleSelection:{asPlainText:true}}))),selectedTo&&selectedTo.value!=="humanize"&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("decimal"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.dataFormatPicker.decimalPlacesLabel",defaultMessage:"Decimal places"})},_react.default.createElement(_eui.EuiFieldText,{defaultValue:decimals,inputRef:function inputRef(el){return _this3.decimals=el},placeholder:DEFAULT_OUTPUT_PRECISION,onChange:this.handleDurationChange("decimals")}))))}if(defaultValue==="custom"){custom=_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.dataFormatPicker.formatStringLabel",defaultMessage:"Format string"}),helpText:_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.dataFormatPicker.formatStringHelpText",defaultMessage:"See {numeralJsLink}",values:{numeralJsLink:_react.default.createElement(_eui.EuiLink,{href:"http://numeraljs.com/#format",target:"_BLANK"},"Numeral.js")}}))},_react.default.createElement(_eui.EuiFieldText,{defaultValue:value,inputRef:function inputRef(el){return _this3.custom=el},onChange:this.handleCustomChange})))}return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{label:this.props.label},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:options,selectedOptions:selectedOption?[selectedOption]:[],onChange:this.handleChange,singleSelection:{asPlainText:true}}))),custom)}}]);return DataFormatPickerUI}(_react.Component);DataFormatPickerUI.defaultProps={label:_i18n.i18n.translate("tsvb.defaultDataFormatterLabel",{defaultMessage:"Data Formatter"})};DataFormatPickerUI.propTypes={value:_propTypes.default.string,label:_propTypes.default.string,onChange:_propTypes.default.func};var DataFormatPicker=(0,_react2.injectI18n)(DataFormatPickerUI);exports.DataFormatPicker=DataFormatPicker},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1694)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaMapLayer=void 0;var _events=__webpack_require__(48);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var KibanaMapLayer=function(_EventEmitter){_inherits(KibanaMapLayer,_EventEmitter);function KibanaMapLayer(){var _this;_classCallCheck(this,KibanaMapLayer);_this=_possibleConstructorReturn(this,_getPrototypeOf(KibanaMapLayer).call(this));_this._leafletLayer=null;return _this}_createClass(KibanaMapLayer,[{key:"getBounds",value:function(){var _getBounds=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",this._leafletLayer.getBounds());case 1:case"end":return _context.stop()}}},_callee,this)}));function getBounds(){return _getBounds.apply(this,arguments)}return getBounds}()},{key:"addToLeafletMap",value:function addToLeafletMap(leafletMap){this._leafletLayer.addTo(leafletMap)}},{key:"removeFromLeafletMap",value:function removeFromLeafletMap(leafletMap){leafletMap.removeLayer(this._leafletLayer)}},{key:"appendLegendContents",value:function appendLegendContents(){}},{key:"updateExtent",value:function updateExtent(){}},{key:"movePointer",value:function movePointer(){}},{key:"getAttributions",value:function getAttributions(){return this._attribution}}]);return KibanaMapLayer}(_events.EventEmitter);exports.KibanaMapLayer=KibanaMapLayer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScaledCirclesMarkers=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(66));var _lodash=_interopRequireDefault(__webpack_require__(1));var _d=_interopRequireDefault(__webpack_require__(15));var _jquery=_interopRequireDefault(__webpack_require__(12));var _events=__webpack_require__(48);var _truncated_colormaps=__webpack_require__(125);var colorUtil=_interopRequireWildcard(__webpack_require__(661));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ScaledCirclesMarkers=function(_EventEmitter){_inherits(ScaledCirclesMarkers,_EventEmitter);function ScaledCirclesMarkers(featureCollection,featureCollectionMetaData,options,targetZoom,kibanaMap,metricAgg){var _this;_classCallCheck(this,ScaledCirclesMarkers);_this=_possibleConstructorReturn(this,_getPrototypeOf(ScaledCirclesMarkers).call(this));_this._featureCollection=featureCollection;_this._featureCollectionMetaData=featureCollectionMetaData;_this._zoom=targetZoom;_this._metricAgg=metricAgg;_this._valueFormatter=options.valueFormatter||function(x){x};_this._tooltipFormatter=options.tooltipFormatter||function(x){x};_this._label=options.label;_this._colorRamp=options.colorRamp;_this._legendColors=null;_this._legendQuantizer=null;_this._popups=[];var layerOptions={pointToLayer:_this.getMarkerFunction(),style:_this.getStyleFunction(),onEachFeature:function onEachFeature(feature,layer){_this._bindPopup(feature,layer)}};if(!options.isFilteredByCollar){layerOptions.filter=function(feature){var bucketRectBounds=feature.properties.geohash_meta.rectangle;return kibanaMap.isInside(bucketRectBounds)}}_this._leafletLayer=_leaflet.default.geoJson(null,layerOptions);_this._leafletLayer.addData(_this._featureCollection);return _this}_createClass(ScaledCirclesMarkers,[{key:"getLeafletLayer",value:function getLeafletLayer(){return this._leafletLayer}},{key:"getStyleFunction",value:function getStyleFunction(){var min=_lodash.default.get(this._featureCollectionMetaData,"min",0);var max=_lodash.default.get(this._featureCollectionMetaData,"max",1);var quantizeDomain=min!==max?[min,max]:_d.default.scale.quantize().domain();this._legendColors=makeLegendColors(this._colorRamp);this._legendQuantizer=_d.default.scale.quantize().domain(quantizeDomain).range(this._legendColors);return makeStyleFunction(this._legendColors,quantizeDomain)}},{key:"movePointer",value:function movePointer(){}},{key:"getLabel",value:function getLabel(){if(this._popups.length){return this._label}return""}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){var _this2=this;if(!this._legendColors||!this._legendQuantizer){return}var titleText=this.getLabel();var $title=(0,_jquery.default)("<div>").addClass("visMapLegend__title").text(titleText);jqueryDiv.append($title);this._legendColors.forEach(function(color){var labelText=_this2._legendQuantizer.invertExtent(color).map(_this2._valueFormatter).join(" – ");var label=(0,_jquery.default)("<div>");var icon=(0,_jquery.default)("<i>").css({background:color,"border-color":makeColorDarker(color)});var text=(0,_jquery.default)("<span>").text(labelText);label.append(icon);label.append(text);jqueryDiv.append(label)})}},{key:"_bindPopup",value:function _bindPopup(feature,layer){var _this3=this;var popup=layer.on({mouseover:function mouseover(e){var layer=e.target;if(!_leaflet.default.Browser.ie&&!_leaflet.default.Browser.opera){layer.bringToFront()}_this3._showTooltip(feature)},mouseout:function mouseout(){_this3.emit("hideTooltip")}});this._popups.push(popup)}},{key:"_showTooltip",value:function _showTooltip(feature){var content=this._tooltipFormatter(feature);if(!content){return}var latLng=_leaflet.default.latLng(feature.geometry.coordinates[1],feature.geometry.coordinates[0]);this.emit("showTooltip",{content:content,position:latLng})}},{key:"getMarkerFunction",value:function getMarkerFunction(){var _this4=this;var scaleFactor=.6;return function(feature,latlng){var value=feature.properties.value;var scaledRadius=_this4._radiusScale(value)*scaleFactor;return _leaflet.default.circleMarker(latlng).setRadius(scaledRadius)}}},{key:"_radiusScale",value:function _radiusScale(value){var precisionBiasBase=5;var precisionBiasNumerator=200;var precision=_lodash.default.max(this._featureCollection.features.map(function(feature){return String(feature.properties.geohash).length}));var pct=Math.abs(value)/Math.abs(this._featureCollectionMetaData.max);var zoomRadius=.5*Math.pow(2,this._zoom);var precisionScale=precisionBiasNumerator/Math.pow(precisionBiasBase,precision);return Math.pow(pct,.5)*zoomRadius*precisionScale}},{key:"getBounds",value:function getBounds(){return this._leafletLayer.getBounds()}}]);return ScaledCirclesMarkers}(_events.EventEmitter);exports.ScaledCirclesMarkers=ScaledCirclesMarkers;function makeLegendColors(colorRampKey){var colorRamp=_lodash.default.get(_truncated_colormaps.truncatedColorMaps[colorRampKey],"value");return colorUtil.getLegendColors(colorRamp)}function makeColorDarker(color){var amount=1.3;return _d.default.hcl(color).darker(amount).toString()}function makeStyleFunction(legendColors,quantizeDomain){var legendQuantizer=_d.default.scale.quantize().domain(quantizeDomain).range(legendColors);return function(feature){var value=_lodash.default.get(feature,"properties.value");var color=legendQuantizer(value);return{fillColor:color,color:makeColorDarker(color),weight:1.5,opacity:1,fillOpacity:.75}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1574);var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var plugins=[function(Client,config){var CustomAngularConnector=function(_config$connectionCla){_inherits(CustomAngularConnector,_config$connectionCla);function CustomAngularConnector(){var _getPrototypeOf2;var _this;_classCallCheck(this,CustomAngularConnector);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CustomAngularConnector)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"request",_lodash.default.wrap(_this.request,function(request,params,cb){if(String(params.method).toUpperCase()==="GET"){params.query=_lodash.default.defaults({_:Date.now()},params.query)}return request.call(this,params,cb)}));return _this}return CustomAngularConnector}(config.connectionClass);config.connectionClass=CustomAngularConnector}];_modules.uiModules.get("kibana",["elasticsearch","kibana/config"]).service("es",function(esFactory,esUrl,esApiVersion,esRequestTimeout){return esFactory({host:esUrl,log:"info",requestTimeout:esRequestTimeout,apiVersion:esApiVersion,plugins:plugins})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bypassExternalUrlCheck=bypassExternalUrlCheck;exports.VegaBaseView=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _jquery=_interopRequireDefault(__webpack_require__(12));var _moment=_interopRequireDefault(__webpack_require__(14));var _datemath=_interopRequireDefault(__webpack_require__(55));var vega=_interopRequireWildcard(__webpack_require__(397));var vegaLite=_interopRequireWildcard(__webpack_require__(697));var _utils=__webpack_require__(678);var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _vega_tooltip=__webpack_require__(1579);var _esQuery=__webpack_require__(20);var _vega_config_provider=__webpack_require__(677);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}vega.scheme("elastic",_eui.VISUALIZATION_COLORS);var vegaFunctions={kibanaAddFilter:"addFilterHandler",kibanaRemoveFilter:"removeFilterHandler",kibanaRemoveAllFilters:"removeAllFiltersHandler",kibanaSetTimeFilter:"setTimeFilterHandler"};var _loop=function _loop(){var funcName=_Object$keys[_i];if(!vega.expressionFunction(funcName)){vega.expressionFunction(funcName,function handlerFwd(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var view=this.context.dataflow;view.runAfter(function(){var _view$_kibanaView;return(_view$_kibanaView=view._kibanaView).vegaFunctionsHandler.apply(_view$_kibanaView,[funcName].concat(args))})})}};for(var _i=0,_Object$keys=Object.keys(vegaFunctions);_i<_Object$keys.length;_i++){_loop()}var bypassToken=Symbol();function bypassExternalUrlCheck(url){return{url:url,bypassToken:bypassToken}}var VegaBaseView=function(){function VegaBaseView(opts){_classCallCheck(this,VegaBaseView);this._$parentEl=(0,_jquery.default)(opts.parentEl);this._parser=opts.vegaParser;this._serviceSettings=opts.serviceSettings;this._queryfilter=opts.queryfilter;this._timefilter=opts.timefilter;this._findIndex=opts.findIndex;this._view=null;this._vegaViewConfig=null;this._$messages=null;this._destroyHandlers=[];this._initialized=false;this._enableExternalUrls=(0,_vega_config_provider.getEnableExternalUrls)()}_createClass(VegaBaseView,[{key:"init",value:function(){var _init=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this=this;var _iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,warn;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!this._initialized){_context.next=2;break}throw new Error;case 2:this._initialized=true;_context.prev=3;this._$parentEl.empty().addClass("vgaVis").css("flex-direction",this._parser.containerDir);_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=8;for(_iterator=this._parser.warnings[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){warn=_step.value;this._addMessage("warn",warn)}_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](8);_didIteratorError=true;_iteratorError=_context.t0;case 16:_context.prev=16;_context.prev=17;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 19:_context.prev=19;if(!_didIteratorError){_context.next=22;break}throw _iteratorError;case 22:return _context.finish(19);case 23:return _context.finish(16);case 24:if(!this._parser.error){_context.next=27;break}this._addMessage("err",this._parser.error);return _context.abrupt("return");case 27:this._$container=(0,_jquery.default)('<div class="vgaVis__view">').css("height","100%").appendTo(this._$parentEl);this._$controls=(0,_jquery.default)('<div class="vgaVis__controls vgaVis__controls--'.concat(this._parser.controlsDir,'">')).appendTo(this._$parentEl);this._addDestroyHandler(function(){if(_this._$container){_this._$container.remove();_this._$container=null}if(_this._$controls){_this._$controls.remove();_this._$controls=null}if(_this._$messages){_this._$messages.remove();_this._$messages=null}if(_this._view){_this._view.finalize()}_this._view=null});this._vegaViewConfig=this.createViewConfig();_context.next=33;return this._initViewCustomizations();case 33:_context.next=38;break;case 35:_context.prev=35;_context.t1=_context["catch"](3);this.onError(_context.t1);case 38:case"end":return _context.stop()}}},_callee,this,[[3,35],[8,12,16,24],[17,,19,23]])}));function init(){return _init.apply(this,arguments)}return init}()},{key:"createViewConfig",value:function createViewConfig(){var _this2=this;var config={logLevel:vega.Warn,renderer:this._parser.renderer};var loader=vega.loader();var originalSanitize=loader.sanitize.bind(loader);loader.sanitize=function(uri,options){if(uri.bypassToken===bypassToken){uri=uri.url}else if(!_this2._enableExternalUrls){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.baseView.externalUrlsAreNotEnabledErrorMessage",{defaultMessage:"External URLs are not enabled. Add   {enableExternalUrls}   to {kibanaConfigFileName}",values:{enableExternalUrls:"vega.enableExternalUrls: true",kibanaConfigFileName:"kibana.yml"}}))}return originalSanitize(uri,options)};config.loader=loader;return config}},{key:"onError",value:function onError(){this._addMessage("err",_utils.Utils.formatErrorToStr.apply(_utils.Utils,arguments))}},{key:"onWarn",value:function onWarn(){if(!this._parser||!this._parser.hideWarnings){this._addMessage("warn",_utils.Utils.formatWarningToStr.apply(_utils.Utils,arguments))}}},{key:"_addMessage",value:function _addMessage(type,text){if(!this._$messages){this._$messages=(0,_jquery.default)('<ul class="vgaVis__messages">').appendTo(this._$parentEl)}this._$messages.append((0,_jquery.default)('<li class="vgaVis__message vgaVis__message--'.concat(type,'">')).append((0,_jquery.default)('<pre class="vgaVis__messageCode">').text(text)))}},{key:"resize",value:function resize(){if(this._parser.useResize&&this._view&&this.updateVegaSize(this._view)){return this._view.runAsync()}}},{key:"updateVegaSize",value:function updateVegaSize(view){var heightExtraPadding=6;var width=Math.max(0,this._$container.width()-this._parser.paddingWidth);var height=Math.max(0,this._$container.height()-this._parser.paddingHeight)-heightExtraPadding;var adjustedHeight=height+1e-8;if(view.width()!==width||view.height()!==adjustedHeight){view.width(width).height(adjustedHeight);return true}return false}},{key:"setView",value:function setView(view){if(this._view===view)return;if(this._view){this._view.finalize()}this._view=view;if(view){view._kibanaView=this;if(this._parser.tooltips){var tthandler=new _vega_tooltip.TooltipHandler(this._$container[0],view,this._parser.tooltips);this._addDestroyHandler(function(){return tthandler.hideTooltip()})}return view.runAsync()}}},{key:"vegaFunctionsHandler",value:function(){var _vegaFunctionsHandler=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(funcName){var handlerFunc,_len,args,_key,_args2=arguments;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;handlerFunc=vegaFunctions[funcName];if(!(!handlerFunc||!this[handlerFunc])){_context2.next=4;break}throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.baseView.functionIsNotDefinedForGraphErrorMessage",{defaultMessage:"{funcName} is not defined for this graph",values:{funcName:"".concat(funcName,"()")}}));case 4:for(_len=_args2.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=_args2[_key]}_context2.next=7;return this[handlerFunc].apply(this,args);case 7:_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);this.onError(_context2.t0);case 12:case"end":return _context2.stop()}}},_callee2,this,[[0,9]])}));function vegaFunctionsHandler(_x){return _vegaFunctionsHandler.apply(this,arguments)}return vegaFunctionsHandler}()},{key:"addFilterHandler",value:function(){var _addFilterHandler=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(query,index){var indexId,filter;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this._findIndex(index);case 2:indexId=_context3.sent;filter=(0,_esQuery.buildQueryFilter)(query,indexId);_context3.next=6;return this._queryfilter.addFilters(filter);case 6:case"end":return _context3.stop()}}},_callee3,this)}));function addFilterHandler(_x2,_x3){return _addFilterHandler.apply(this,arguments)}return addFilterHandler}()},{key:"removeFilterHandler",value:function(){var _removeFilterHandler=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(query,index){var _this3=this;var $injector,indexId,filter;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _chrome.default.dangerouslyGetActiveInjector();case 2:$injector=_context4.sent;_context4.next=5;return this._findIndex(index);case 5:indexId=_context4.sent;filter=(0,_esQuery.buildQueryFilter)(query,indexId);$injector.get("$rootScope").$evalAsync(function(){try{_this3._queryfilter.removeFilter(filter)}catch(err){_this3.onError(err)}});case 8:case"end":return _context4.stop()}}},_callee4,this)}));function removeFilterHandler(_x4,_x5){return _removeFilterHandler.apply(this,arguments)}return removeFilterHandler}()},{key:"removeAllFiltersHandler",value:function removeAllFiltersHandler(){this._queryfilter.removeAll()}},{key:"setTimeFilterHandler",value:function setTimeFilterHandler(start,end){this._timefilter.setTime(VegaBaseView._parseTimeRange(start,end))}},{key:"setDebugValues",value:function setDebugValues(view,spec,vlspec){if(window){if(window.VEGA_DEBUG===undefined&&console){console.log("%cWelcome to Kibana Vega Plugin!","font-size: 16px; font-weight: bold;");console.log("You can access the Vega view with VEGA_DEBUG. "+"Learn more at https://vega.github.io/vega/docs/api/debugging/.")}var debugObj={};window.VEGA_DEBUG=debugObj;window.VEGA_DEBUG.VEGA_VERSION=vega.version;window.VEGA_DEBUG.VEGA_LITE_VERSION=vegaLite.version;window.VEGA_DEBUG.view=view;window.VEGA_DEBUG.vega_spec=spec;window.VEGA_DEBUG.vegalite_spec=vlspec;this._addDestroyHandler(function(){if(debugObj===window.VEGA_DEBUG){window.VEGA_DEBUG=null}})}}},{key:"destroy",value:function destroy(){if(this._destroyHandlers){this._ongoingDestroy=Promise.all(this._destroyHandlers.map(function(v){return v()}));this._destroyHandlers=null}return this._ongoingDestroy}},{key:"_addDestroyHandler",value:function _addDestroyHandler(handler){if(this._destroyHandlers){this._destroyHandlers.push(handler)}else{handler()}}}],[{key:"_parseTimeRange",value:function _parseTimeRange(start,end){var absStart=(0,_moment.default)(start);var absEnd=(0,_moment.default)(end);var isValidAbsStart=absStart.isValid();var isValidAbsEnd=absEnd.isValid();var mode="absolute";var from;var to;var reverse;if(isValidAbsStart&&isValidAbsEnd){from=absStart;to=absEnd;reverse=absStart.isAfter(absEnd)}else{var startDate=_datemath.default.parse(start);var endDate=_datemath.default.parse(end);if(!startDate||!endDate||!startDate.isValid()||!endDate.isValid()){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.baseView.timeValuesTypeErrorMessage",{defaultMessage:"Error setting time filter: both time values must be either relative or absolute dates. {start}, {end}",values:{start:"start=".concat(JSON.stringify(start)),end:"end=".concat(JSON.stringify(end))}}))}reverse=startDate.isAfter(endDate);if(isValidAbsStart||isValidAbsEnd){from=startDate;to=endDate}else{mode="relative";from=start;to=end}}if(reverse){var _ref=[to,from];from=_ref[0];to=_ref[1]}return{from:from,to:to,mode:mode}}}]);return VegaBaseView}();exports.VegaBaseView=VegaBaseView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _public=__webpack_require__(40);Object.keys(_public).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _public[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _errors=__webpack_require__(109);Object.keys(_errors).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _errors[key]}})});var _embeddables=__webpack_require__(682);Object.keys(_embeddables).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddables[key]}})});var _types=__webpack_require__(89);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})});var _actions=__webpack_require__(110);Object.keys(_actions).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _actions[key]}})});var _triggers=__webpack_require__(684);Object.keys(_triggers).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _triggers[key]}})});var _containers=__webpack_require__(1622);Object.keys(_containers).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _containers[key]}})});var _panel=__webpack_require__(685);Object.keys(_panel).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _panel[key]}})});var _context_menu_actions=__webpack_require__(686);Object.keys(_context_menu_actions).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _context_menu_actions[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Action=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Action=function(){function Action(id){_classCallCheck(this,Action);this.id=id;_defineProperty(this,"order",0);_defineProperty(this,"type",void 0)}_createClass(Action,[{key:"getIconType",value:function getIconType(context){return undefined}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",true);case 1:case"end":return _context.stop()}}},_callee)}));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"getHref",value:function getHref(context){return undefined}}]);return Action}();exports.Action=Action},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_PANEL_HEIGHT=exports.DEFAULT_PANEL_WIDTH=exports.DASHBOARD_GRID_HEIGHT=exports.DASHBOARD_GRID_COLUMN_COUNT=void 0;var DASHBOARD_GRID_COLUMN_COUNT=48;exports.DASHBOARD_GRID_COLUMN_COUNT=DASHBOARD_GRID_COLUMN_COUNT;var DASHBOARD_GRID_HEIGHT=20;exports.DASHBOARD_GRID_HEIGHT=DASHBOARD_GRID_HEIGHT;var DEFAULT_PANEL_WIDTH=DASHBOARD_GRID_COLUMN_COUNT/2;exports.DEFAULT_PANEL_WIDTH=DEFAULT_PANEL_WIDTH;var DEFAULT_PANEL_HEIGHT=15;exports.DEFAULT_PANEL_HEIGHT=DEFAULT_PANEL_HEIGHT},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _registry=__webpack_require__(44);var _default=(0,_registry.uiRegistry)({name:"timelionPanels",index:["name"],order:["name"]});exports.default=_default;module.exports=exports.default},,function(module,exports,__webpack_require__){"use strict";var _panel_registry=_interopRequireDefault(__webpack_require__(444));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(6).get("apps/timelion",[]).directive("chart",function(Private){return{restrict:"A",scope:{seriesList:"=chart",search:"=",interval:"=",rerenderTrigger:"="},link:function link($scope,$elem){var panelRegistry=Private(_panel_registry.default);var panelScope=$scope.$new(true);function render(){panelScope.$destroy();if(!$scope.seriesList)return;$scope.seriesList.render=$scope.seriesList.render||{type:"timechart"};var panelSchema=panelRegistry.byName[$scope.seriesList.render.type];if(!panelSchema){$elem.text(_i18n.i18n.translate("timelion.chart.seriesList.noSchemaWarning",{defaultMessage:"No such panel type: {renderType}",values:{renderType:$scope.seriesList.render.type}}));return}panelScope=$scope.$new(true);panelScope.seriesList=$scope.seriesList;panelScope.interval=$scope.interval;panelScope.search=$scope.search;panelSchema.render(panelScope,$elem)}$scope.$watchGroup(["seriesList","rerenderTrigger"],render)}}})},,function(module,exports,__webpack_require__){__webpack_require__(1754);__webpack_require__(1757);__webpack_require__(1759)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(719);var _vis_types=__webpack_require__(49);var _modules=__webpack_require__(6);var _saved_objects=__webpack_require__(36);var _saved_object_registry=__webpack_require__(91);var _visualizations=__webpack_require__(30);var _visualize_constants=__webpack_require__(92);var _find_list_items=__webpack_require__(1762);var app=_modules.uiModules.get("app/visualize");_saved_object_registry.savedObjectManagementRegistry.register({service:"savedVisualizations",title:"visualizations"});app.service("savedVisualizations",function(SavedVis,Private,kbnUrl,chrome){var visTypes=Private(_vis_types.VisTypesRegistryProvider);var savedObjectClient=Private(_saved_objects.SavedObjectsClientProvider);var saveVisualizationLoader=new _saved_objects.SavedObjectLoader(SavedVis,kbnUrl,chrome,savedObjectClient);saveVisualizationLoader.mapHitSource=function(source,id){source.id=id;source.url=this.urlFor(id);var typeName=source.typeName;if(source.visState){try{typeName=JSON.parse(source.visState).type}catch(e){}}if(!typeName||!visTypes.byName[typeName]){source.error="Unknown visualization type";return source}source.type=visTypes.byName[typeName];source.savedObjectType="visualization";source.icon=source.type.icon;source.image=source.type.image;source.typeTitle=source.type.title;source.isExperimental=source.type.shouldMarkAsExperimentalInUI();source.editUrl="#".concat((0,_visualize_constants.createVisualizeEditUrl)(id));return source};saveVisualizationLoader.urlFor=function(id){return kbnUrl.eval("#/visualize/edit/{{id}}",{id:id})};saveVisualizationLoader.findListItems=function(){var search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return(0,_find_list_items.findListItems)({search:search,size:size,mapSavedObjectApiHits:this.mapSavedObjectApiHits.bind(this),savedObjectsClient:this.savedObjectsClient,visTypes:_visualizations.visualizations.types.visTypeAliasRegistry.get()})};return saveVisualizationLoader})},function(module,exports,__webpack_require__){__webpack_require__(1763)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createNumeralFormat=createNumeralFormat;var _lodash=_interopRequireDefault(__webpack_require__(1));var _numeral=_interopRequireDefault(__webpack_require__(1928));var _languages=_interopRequireDefault(__webpack_require__(1942));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var numeralInst=(0,_numeral.default)();_languages.default.forEach(function(numeralLanguage){_numeral.default.language(numeralLanguage.id,numeralLanguage.lang)});function createNumeralFormat(FieldFormat,opts){var NumeralFormat=function(_FieldFormat){_inherits(NumeralFormat,_FieldFormat);function NumeralFormat(params,getConfig){var _this;_classCallCheck(this,NumeralFormat);_this=_possibleConstructorReturn(this,_getPrototypeOf(NumeralFormat).call(this,params));_this.getConfig=getConfig;return _this}_createClass(NumeralFormat,[{key:"getParamDefaults",value:function getParamDefaults(){if(_lodash.default.has(opts,"getParamDefaults")){return opts.getParamDefaults(this.getConfig)}return{pattern:this.getConfig("format:".concat(opts.id,":defaultPattern"))}}},{key:"_convert",value:function _convert(val){if(val===-Infinity)return"-∞";if(val===+Infinity)return"+∞";if(typeof val!=="number"){val=parseFloat(val)}if(isNaN(val))return"";var previousLocale=_numeral.default.language();var defaultLocale=this.getConfig&&this.getConfig("format:number:defaultLocale")||"en";_numeral.default.language(defaultLocale);var formatted=numeralInst.set(val).format(this.param("pattern"));_numeral.default.language(previousLocale);return opts.afterConvert?opts.afterConvert.call(this,formatted):formatted}}]);return NumeralFormat}(FieldFormat);_defineProperty(NumeralFormat,"id",opts.id);_defineProperty(NumeralFormat,"title",opts.title);_defineProperty(NumeralFormat,"fieldType","number");if(opts.prototype){_lodash.default.assign(NumeralFormat.prototype,opts.prototype)}return NumeralFormat}},,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(1933)},,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ChromeBadge",{enumerable:true,get:function get(){return _chrome_service.ChromeBadge}});Object.defineProperty(exports,"ChromeBreadcrumb",{enumerable:true,get:function get(){return _chrome_service.ChromeBreadcrumb}});Object.defineProperty(exports,"ChromeService",{enumerable:true,get:function get(){return _chrome_service.ChromeService}});Object.defineProperty(exports,"ChromeStart",{enumerable:true,get:function get(){return _chrome_service.ChromeStart}});Object.defineProperty(exports,"InternalChromeStart",{enumerable:true,get:function get(){return _chrome_service.InternalChromeStart}});Object.defineProperty(exports,"ChromeBrand",{enumerable:true,get:function get(){return _chrome_service.ChromeBrand}});Object.defineProperty(exports,"ChromeHelpExtension",{enumerable:true,get:function get(){return _chrome_service.ChromeHelpExtension}});Object.defineProperty(exports,"ChromeNavLink",{enumerable:true,get:function get(){return _nav_links.ChromeNavLink}});Object.defineProperty(exports,"ChromeNavLinks",{enumerable:true,get:function get(){return _nav_links.ChromeNavLinks}});Object.defineProperty(exports,"ChromeNavLinkUpdateableFields",{enumerable:true,get:function get(){return _nav_links.ChromeNavLinkUpdateableFields}});Object.defineProperty(exports,"ChromeRecentlyAccessed",{enumerable:true,get:function get(){return _recently_accessed.ChromeRecentlyAccessed}});Object.defineProperty(exports,"ChromeRecentlyAccessedHistoryItem",{enumerable:true,get:function get(){return _recently_accessed.ChromeRecentlyAccessedHistoryItem}});Object.defineProperty(exports,"ChromeNavControl",{enumerable:true,get:function get(){return _nav_controls.ChromeNavControl}});Object.defineProperty(exports,"ChromeNavControls",{enumerable:true,get:function get(){return _nav_controls.ChromeNavControls}});var _chrome_service=__webpack_require__(802);var _nav_links=__webpack_require__(479);var _recently_accessed=__webpack_require__(481);var _nav_controls=__webpack_require__(482)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ChromeNavLink",{enumerable:true,get:function get(){return _nav_link.ChromeNavLink}});Object.defineProperty(exports,"ChromeNavLinkUpdateableFields",{enumerable:true,get:function get(){return _nav_link.ChromeNavLinkUpdateableFields}});Object.defineProperty(exports,"ChromeNavLinks",{enumerable:true,get:function get(){return _nav_links_service.ChromeNavLinks}});Object.defineProperty(exports,"NavLinksService",{enumerable:true,get:function get(){return _nav_links_service.NavLinksService}});var _nav_link=__webpack_require__(480);var _nav_links_service=__webpack_require__(810)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NavLinkWrapper=void 0;var _utils=__webpack_require__(56);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NavLinkWrapper=function(){function NavLinkWrapper(properties){_classCallCheck(this,NavLinkWrapper);_defineProperty(this,"id",void 0);_defineProperty(this,"properties",void 0);if(!properties||!properties.id){throw new Error("`id` is required.")}this.id=properties.id;this.properties=Object.freeze(properties)}_createClass(NavLinkWrapper,[{key:"update",value:function update(newProps){newProps=(0,_utils.pick)(newProps,["active","disabled","hidden","url","subUrlBase"]);return new NavLinkWrapper(_objectSpread({},this.properties,{},newProps))}}]);return NavLinkWrapper}();exports.NavLinkWrapper=NavLinkWrapper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ChromeRecentlyAccessed",{enumerable:true,get:function get(){return _recently_accessed_service.ChromeRecentlyAccessed}});Object.defineProperty(exports,"ChromeRecentlyAccessedHistoryItem",{enumerable:true,get:function get(){return _recently_accessed_service.ChromeRecentlyAccessedHistoryItem}});Object.defineProperty(exports,"RecentlyAccessedService",{enumerable:true,get:function get(){return _recently_accessed_service.RecentlyAccessedService}});var _recently_accessed_service=__webpack_require__(811)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _nav_controls_service=__webpack_require__(817);Object.keys(_nav_controls_service).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _nav_controls_service[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});Object.defineProperty(exports,"HeaderProps",{enumerable:true,get:function get(){return _header.HeaderProps}});Object.defineProperty(exports,"HeaderWrapper",{enumerable:true,get:function get(){return _header_wrapper.HeaderWrapper}});var _header=__webpack_require__(820);var _header_wrapper=__webpack_require__(825)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.HeaderExtension=void 0;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HeaderExtension=function(_React$Component){_inherits(HeaderExtension,_React$Component);function HeaderExtension(){var _getPrototypeOf2;var _this;_classCallCheck(this,HeaderExtension);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(HeaderExtension)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"ref",_react.default.createRef());_defineProperty(_assertThisInitialized(_this),"unrender",void 0);return _this}_createClass(HeaderExtension,[{key:"componentDidMount",value:function componentDidMount(){this.renderExtension()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.props.extension===prevProps.extension){return}this.unrenderExtension();this.renderExtension()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unrenderExtension()}},{key:"render",value:function render(){return _react.default.createElement("div",{ref:this.ref})}},{key:"renderExtension",value:function renderExtension(){if(!this.ref.current){throw new Error("<HeaderExtension /> mounted without ref")}if(this.props.extension){this.unrender=this.props.extension(this.ref.current)}}},{key:"unrenderExtension",value:function unrenderExtension(){if(this.unrender){this.unrender();this.unrender=undefined}}}]);return HeaderExtension}(_react.default.Component);exports.HeaderExtension=HeaderExtension},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FatalErrorsSetup",{enumerable:true,get:function get(){return _fatal_errors_service.FatalErrorsSetup}});Object.defineProperty(exports,"FatalErrorsService",{enumerable:true,get:function get(){return _fatal_errors_service.FatalErrorsService}});Object.defineProperty(exports,"FatalErrorInfo",{enumerable:true,get:function get(){return _get_error_info.FatalErrorInfo}});var _fatal_errors_service=__webpack_require__(826);var _get_error_info=__webpack_require__(486)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getErrorInfo=getErrorInfo;var _util=__webpack_require__(865);function formatErrorMessage(error){if(typeof error==="string"){return error}if(!error){return(0,_util.inspect)(error)}if(error.resp&&error.resp.error&&error.resp.error.root_cause){return error.resp.error.root_cause.map(function(cause){return cause.reason}).join("\n")}if(error.body&&typeof error.body.message==="string"){return error.body.message}if(error instanceof Error&&error.message){return error.message}return(0,_util.inspect)(error)}function formatStack(err){if(err.stack&&!err.stack.includes(err.message)){return"Error: "+err.message+"\n"+err.stack}return err.stack}function getErrorInfo(error,source){var prefix=source?source+": ":"";return{message:prefix+formatErrorMessage(error),stack:formatStack(error)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={HttpService:true,HttpFetchError:true,HttpInterceptHaltError:true,HttpInterceptController:true};Object.defineProperty(exports,"HttpService",{enumerable:true,get:function get(){return _http_service.HttpService}});Object.defineProperty(exports,"HttpFetchError",{enumerable:true,get:function get(){return _http_fetch_error.HttpFetchError}});Object.defineProperty(exports,"HttpInterceptHaltError",{enumerable:true,get:function get(){return _http_intercept_halt_error.HttpInterceptHaltError}});Object.defineProperty(exports,"HttpInterceptController",{enumerable:true,get:function get(){return _http_intercept_controller.HttpInterceptController}});var _http_service=__webpack_require__(829);var _http_fetch_error=__webpack_require__(489);var _http_intercept_halt_error=__webpack_require__(490);var _http_intercept_controller=__webpack_require__(488);var _types=__webpack_require__(832);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HttpInterceptController=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HttpInterceptController=function(){function HttpInterceptController(){_classCallCheck(this,HttpInterceptController);_defineProperty(this,"_halted",false)}_createClass(HttpInterceptController,[{key:"halt",value:function halt(){this._halted=true}},{key:"halted",get:function get(){return this._halted}}]);return HttpInterceptController}();exports.HttpInterceptController=HttpInterceptController},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.HttpFetchError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var HttpFetchError=function(_Error){_inherits(HttpFetchError,_Error);function HttpFetchError(message,response,body){var _this;_classCallCheck(this,HttpFetchError);_this=_possibleConstructorReturn(this,_getPrototypeOf(HttpFetchError).call(this,message));_this.response=response;_this.body=body;if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),HttpFetchError)}return _this}return HttpFetchError}(_wrapNativeSuper(Error));exports.HttpFetchError=HttpFetchError},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.HttpInterceptHaltError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var HttpInterceptHaltError=function(_Error){_inherits(HttpInterceptHaltError,_Error);function HttpInterceptHaltError(){var _this;_classCallCheck(this,HttpInterceptHaltError);_this=_possibleConstructorReturn(this,_getPrototypeOf(HttpInterceptHaltError).call(this,"HTTP Intercept Halt"));if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),HttpInterceptHaltError)}return _this}return HttpInterceptHaltError}(_wrapNativeSuper(Error));exports.HttpInterceptHaltError=HttpInterceptHaltError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"I18nService",{enumerable:true,get:function get(){return _i18n_service.I18nService}});Object.defineProperty(exports,"I18nStart",{enumerable:true,get:function get(){return _i18n_service.I18nStart}});var _i18n_service=__webpack_require__(833)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"InjectedMetadataService",{enumerable:true,get:function get(){return _injected_metadata_service.InjectedMetadataService}});Object.defineProperty(exports,"InjectedMetadataParams",{enumerable:true,get:function get(){return _injected_metadata_service.InjectedMetadataParams}});Object.defineProperty(exports,"InjectedMetadataSetup",{enumerable:true,get:function get(){return _injected_metadata_service.InjectedMetadataSetup}});Object.defineProperty(exports,"InjectedMetadataStart",{enumerable:true,get:function get(){return _injected_metadata_service.InjectedMetadataStart}});Object.defineProperty(exports,"LegacyNavLink",{enumerable:true,get:function get(){return _injected_metadata_service.LegacyNavLink}});var _injected_metadata_service=__webpack_require__(834)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ErrorToastOptions",{enumerable:true,get:function get(){return _toasts.ErrorToastOptions}});Object.defineProperty(exports,"Toast",{enumerable:true,get:function get(){return _toasts.Toast}});Object.defineProperty(exports,"ToastInput",{enumerable:true,get:function get(){return _toasts.ToastInput}});Object.defineProperty(exports,"ToastsApi",{enumerable:true,get:function get(){return _toasts.ToastsApi}});Object.defineProperty(exports,"NotificationsService",{enumerable:true,get:function get(){return _notifications_service.NotificationsService}});Object.defineProperty(exports,"NotificationsSetup",{enumerable:true,get:function get(){return _notifications_service.NotificationsSetup}});Object.defineProperty(exports,"NotificationsStart",{enumerable:true,get:function get(){return _notifications_service.NotificationsStart}});var _toasts=__webpack_require__(494);var _notifications_service=__webpack_require__(838)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ToastsService",{enumerable:true,get:function get(){return _toasts_service.ToastsService}});Object.defineProperty(exports,"ToastsSetup",{enumerable:true,get:function get(){return _toasts_service.ToastsSetup}});Object.defineProperty(exports,"ToastsStart",{enumerable:true,get:function get(){return _toasts_service.ToastsStart}});Object.defineProperty(exports,"ErrorToastOptions",{enumerable:true,get:function get(){return _toasts_api.ErrorToastOptions}});Object.defineProperty(exports,"ToastsApi",{enumerable:true,get:function get(){return _toasts_api.ToastsApi}});Object.defineProperty(exports,"ToastInput",{enumerable:true,get:function get(){return _toasts_api.ToastInput}});Object.defineProperty(exports,"Toast",{enumerable:true,get:function get(){return _eui.EuiGlobalToastListToast}});var _toasts_service=__webpack_require__(835);var _toasts_api=__webpack_require__(495);var _eui=__webpack_require__(3)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ToastsApi=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var Rx=_interopRequireWildcard(__webpack_require__(16));var _error_toast=__webpack_require__(837);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var normalizeToast=function normalizeToast(toastOrTitle){if(typeof toastOrTitle==="string"){return{title:toastOrTitle}}return toastOrTitle};var ToastsApi=function(){function ToastsApi(deps){_classCallCheck(this,ToastsApi);_defineProperty(this,"toasts$",new Rx.BehaviorSubject([]));_defineProperty(this,"idCounter",0);_defineProperty(this,"uiSettings",void 0);_defineProperty(this,"overlays",void 0);this.uiSettings=deps.uiSettings}_createClass(ToastsApi,[{key:"registerOverlays",value:function registerOverlays(overlays){this.overlays=overlays}},{key:"get$",value:function get$(){return this.toasts$.asObservable()}},{key:"add",value:function add(toastOrTitle){var toast=_objectSpread({id:String(this.idCounter++),toastLifeTimeMs:this.uiSettings.get("notifications:lifetime:info")},normalizeToast(toastOrTitle));this.toasts$.next([].concat(_toConsumableArray(this.toasts$.getValue()),[toast]));return toast}},{key:"remove",value:function remove(toast){var list=this.toasts$.getValue();var listWithoutToast=list.filter(function(t){return t!==toast});if(listWithoutToast.length!==list.length){this.toasts$.next(listWithoutToast)}}},{key:"addSuccess",value:function addSuccess(toastOrTitle){return this.add(_objectSpread({color:"success",iconType:"check"},normalizeToast(toastOrTitle)))}},{key:"addWarning",value:function addWarning(toastOrTitle){return this.add(_objectSpread({color:"warning",iconType:"help",toastLifeTimeMs:this.uiSettings.get("notifications:lifetime:warning")},normalizeToast(toastOrTitle)))}},{key:"addDanger",value:function addDanger(toastOrTitle){return this.add(_objectSpread({color:"danger",iconType:"alert",toastLifeTimeMs:this.uiSettings.get("notifications:lifetime:warning")},normalizeToast(toastOrTitle)))}},{key:"addError",value:function addError(error,options){var message=options.toastMessage||error.message;return this.add({color:"danger",iconType:"alert",title:options.title,toastLifeTimeMs:this.uiSettings.get("notifications:lifetime:error"),text:_react.default.createElement(_error_toast.ErrorToast,{openModal:this.openModal.bind(this),error:error,title:options.title,toastMessage:message})})}},{key:"openModal",value:function openModal(){var _this$overlays;if(!this.overlays){throw new Error("Modal opened before ToastService was started.")}return(_this$overlays=this.overlays).openModal.apply(_this$overlays,arguments)}}]);return ToastsApi}();exports.ToastsApi=ToastsApi},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"OverlayBannerMount",{enumerable:true,get:function get(){return _banners.OverlayBannerMount}});Object.defineProperty(exports,"OverlayBannerUnmount",{enumerable:true,get:function get(){return _banners.OverlayBannerUnmount}});Object.defineProperty(exports,"OverlayBannersStart",{enumerable:true,get:function get(){return _banners.OverlayBannersStart}});Object.defineProperty(exports,"OverlayService",{enumerable:true,get:function get(){return _overlay_service.OverlayService}});Object.defineProperty(exports,"OverlayStart",{enumerable:true,get:function get(){return _overlay_service.OverlayStart}});Object.defineProperty(exports,"OverlayRef",{enumerable:true,get:function get(){return _overlay_service.OverlayRef}});var _banners=__webpack_require__(497);var _overlay_service=__webpack_require__(843)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"OverlayBannerMount",{enumerable:true,get:function get(){return _banners_service.OverlayBannerMount}});Object.defineProperty(exports,"OverlayBannerUnmount",{enumerable:true,get:function get(){return _banners_service.OverlayBannerUnmount}});Object.defineProperty(exports,"OverlayBannersStart",{enumerable:true,get:function get(){return _banners_service.OverlayBannersStart}});Object.defineProperty(exports,"OverlayBannersService",{enumerable:true,get:function get(){return _banners_service.OverlayBannersService}});var _banners_service=__webpack_require__(839)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1863)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={Plugin:true,PluginInitializer:true,PluginInitializerContext:true,PluginOpaqueId:true};Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.Plugin}});Object.defineProperty(exports,"PluginInitializer",{enumerable:true,get:function get(){return _plugin.PluginInitializer}});Object.defineProperty(exports,"PluginInitializerContext",{enumerable:true,get:function get(){return _plugin_context.PluginInitializerContext}});Object.defineProperty(exports,"PluginOpaqueId",{enumerable:true,get:function get(){return _types.PluginOpaqueId}});var _plugins_service=__webpack_require__(846);Object.keys(_plugins_service).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _plugins_service[key]}})});var _plugin=__webpack_require__(500);var _plugin_context=__webpack_require__(501);var _types=__webpack_require__(502)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PluginWrapper=void 0;var _plugin_loader=__webpack_require__(847);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PluginWrapper=function(){function PluginWrapper(discoveredPlugin,opaqueId,initializerContext){_classCallCheck(this,PluginWrapper);this.discoveredPlugin=discoveredPlugin;this.opaqueId=opaqueId;this.initializerContext=initializerContext;_defineProperty(this,"name",void 0);_defineProperty(this,"configPath",void 0);_defineProperty(this,"requiredPlugins",void 0);_defineProperty(this,"optionalPlugins",void 0);_defineProperty(this,"initializer",void 0);_defineProperty(this,"instance",void 0);this.name=discoveredPlugin.id;this.configPath=discoveredPlugin.configPath;this.requiredPlugins=discoveredPlugin.requiredPlugins;this.optionalPlugins=discoveredPlugin.optionalPlugins}_createClass(PluginWrapper,[{key:"load",value:function(){var _load=_asyncToGenerator(regeneratorRuntime.mark(function _callee(addBasePath){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_plugin_loader.loadPluginBundle)(addBasePath,this.name);case 2:this.initializer=_context.sent;case 3:case"end":return _context.stop()}}},_callee,this)}));function load(_x){return _load.apply(this,arguments)}return load}()},{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(setupContext,plugins){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.createPluginInstance();case 2:this.instance=_context2.sent;_context2.next=5;return this.instance.setup(setupContext,plugins);case 5:return _context2.abrupt("return",_context2.sent);case 6:case"end":return _context2.stop()}}},_callee2,this)}));function setup(_x2,_x3){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function(){var _start=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(startContext,plugins){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(this.instance===undefined)){_context3.next=2;break}throw new Error('Plugin "'.concat(this.name,"\" can't be started since it isn't set up."));case 2:_context3.next=4;return this.instance.start(startContext,plugins);case 4:return _context3.abrupt("return",_context3.sent);case 5:case"end":return _context3.stop()}}},_callee3,this)}));function start(_x4,_x5){return _start.apply(this,arguments)}return start}()},{key:"stop",value:function stop(){if(this.instance===undefined){throw new Error('Plugin "'.concat(this.name,"\" can't be stopped since it isn't set up."))}if(typeof this.instance.stop==="function"){this.instance.stop()}this.instance=undefined}},{key:"createPluginInstance",value:function(){var _createPluginInstance=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var instance;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(this.initializer===undefined)){_context4.next=2;break}throw new Error('Plugin "'.concat(this.name,"\" can't be setup since its bundle isn't loaded."));case 2:instance=this.initializer(this.initializerContext);if(!(typeof instance.setup!=="function")){_context4.next=7;break}throw new Error('Instance of plugin "'.concat(this.name,'" does not define "setup" function.'));case 7:if(!(typeof instance.start!=="function")){_context4.next=9;break}throw new Error('Instance of plugin "'.concat(this.name,'" does not define "start" function.'));case 9:return _context4.abrupt("return",instance);case 10:case"end":return _context4.stop()}}},_callee4,this)}));function createPluginInstance(){return _createPluginInstance.apply(this,arguments)}return createPluginInstance}()}]);return PluginWrapper}();exports.PluginWrapper=PluginWrapper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createPluginInitializerContext=createPluginInitializerContext;exports.createPluginSetupContext=createPluginSetupContext;exports.createPluginStartContext=createPluginStartContext;var _lodash=__webpack_require__(1);function createPluginInitializerContext(coreContext,opaqueId,pluginManifest){return{opaqueId:opaqueId}}function createPluginSetupContext(coreContext,deps,plugin){return{context:(0,_lodash.omit)(deps.context,"setCurrentPlugin"),fatalErrors:deps.fatalErrors,http:deps.http,notifications:deps.notifications,uiSettings:deps.uiSettings}}function createPluginStartContext(coreContext,deps,plugin){return{application:{capabilities:deps.application.capabilities},docLinks:deps.docLinks,http:deps.http,chrome:(0,_lodash.omit)(deps.chrome,"getComponent"),i18n:deps.i18n,notifications:deps.notifications,overlays:deps.overlays,uiSettings:deps.uiSettings,savedObjects:deps.savedObjects}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={PluginOpaqueId:true};Object.defineProperty(exports,"PluginOpaqueId",{enumerable:true,get:function get(){return _types.PluginOpaqueId}});var _types=__webpack_require__(848);var _types2=__webpack_require__(849);Object.keys(_types2).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types2[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UiSettingsService",{enumerable:true,get:function get(){return _ui_settings_service.UiSettingsService}});Object.defineProperty(exports,"UiSettingsClient",{enumerable:true,get:function get(){return _ui_settings_client.UiSettingsClient}});Object.defineProperty(exports,"UiSettingsClientContract",{enumerable:true,get:function get(){return _ui_settings_client.UiSettingsClientContract}});Object.defineProperty(exports,"UiSettingsState",{enumerable:true,get:function get(){return _types.UiSettingsState}});var _ui_settings_service=__webpack_require__(850);var _ui_settings_client=__webpack_require__(504);var _types=__webpack_require__(852)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UiSettingsClient=void 0;var _lodash=__webpack_require__(1);var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UiSettingsClient=function(){function UiSettingsClient(params){_classCallCheck(this,UiSettingsClient);_defineProperty(this,"update$",new Rx.Subject);_defineProperty(this,"saved$",new Rx.Subject);_defineProperty(this,"updateErrors$",new Rx.Subject);_defineProperty(this,"api",void 0);_defineProperty(this,"defaults",void 0);_defineProperty(this,"cache",void 0);this.api=params.api;this.defaults=(0,_lodash.cloneDeep)(params.defaults);this.cache=(0,_lodash.defaultsDeep)({},this.defaults,(0,_lodash.cloneDeep)(params.initialSettings))}_createClass(UiSettingsClient,[{key:"getAll",value:function getAll(){return(0,_lodash.cloneDeep)(this.cache)}},{key:"get",value:function get(key,defaultOverride){var declared=this.isDeclared(key);if(!declared&&defaultOverride!==undefined){return defaultOverride}if(!declared){throw new Error('Unexpected `config.get("'.concat(key,'")` call on unrecognized configuration setting "').concat(key,'".\nSetting an initial value via `config.set("').concat(key,'", value)` before attempting to retrieve\nany custom setting value for "').concat(key,'" may fix this issue.\nYou can use `config.get("').concat(key,'", defaultValue)`, which will just return\n`defaultValue` when the key is unrecognized.'))}var type=this.cache[key].type;var userValue=this.cache[key].userValue;var defaultValue=defaultOverride!==undefined?defaultOverride:this.cache[key].value;var value=userValue==null?defaultValue:userValue;if(type==="json"){return JSON.parse(value)}if(type==="number"){return parseFloat(value)}return value}},{key:"get$",value:function get$(key,defaultOverride){var _this=this;return Rx.concat(Rx.defer(function(){return Rx.of(_this.get(key,defaultOverride))}),this.update$.pipe((0,_operators.filter)(function(update){return update.key===key}),(0,_operators.map)(function(){return _this.get(key,defaultOverride)})))}},{key:"set",value:function(){var _set=_asyncToGenerator(regeneratorRuntime.mark(function _callee(key,val){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.update(key,val);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}},_callee,this)}));function set(_x,_x2){return _set.apply(this,arguments)}return set}()},{key:"remove",value:function(){var _remove=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(key){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.update(key,null);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}},_callee2,this)}));function remove(_x3){return _remove.apply(this,arguments)}return remove}()},{key:"isDeclared",value:function isDeclared(key){return key in this.cache}},{key:"isDefault",value:function isDefault(key){return!this.isDeclared(key)||this.cache[key].userValue==null}},{key:"isCustom",value:function isCustom(key){return this.isDeclared(key)&&!("value"in this.cache[key])}},{key:"isOverridden",value:function isOverridden(key){return this.isDeclared(key)&&Boolean(this.cache[key].isOverridden)}},{key:"overrideLocalDefault",value:function overrideLocalDefault(key,newDefault){var prevDefault=this.defaults[key]?this.defaults[key].value:undefined;this.defaults[key]=_objectSpread({},this.defaults[key]||{},{value:newDefault});this.cache[key]=_objectSpread({},this.cache[key]||{},{value:newDefault});if(this.cache[key].userValue==null){this.update$.next({key:key,newValue:newDefault,oldValue:prevDefault});this.saved$.next({key:key,newValue:newDefault,oldValue:prevDefault})}}},{key:"getUpdate$",value:function getUpdate$(){return this.update$.asObservable()}},{key:"getSaved$",value:function getSaved$(){return this.saved$.asObservable()}},{key:"getUpdateErrors$",value:function getUpdateErrors$(){return this.updateErrors$.asObservable()}},{key:"stop",value:function stop(){this.update$.complete();this.saved$.complete()}},{key:"assertUpdateAllowed",value:function assertUpdateAllowed(key){if(this.isOverridden(key)){throw new Error('Unable to update "'.concat(key,'" because its value is overridden by the Kibana server'))}}},{key:"update",value:function(){var _update=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(key,newVal){var declared,defaults,oldVal,unchanged,initialVal,_ref,settings;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.assertUpdateAllowed(key);declared=this.isDeclared(key);defaults=this.defaults;oldVal=declared?this.cache[key].userValue:undefined;unchanged=oldVal===newVal;if(!unchanged){_context3.next=7;break}return _context3.abrupt("return",true);case 7:initialVal=declared?this.get(key):undefined;this.setLocally(key,newVal);_context3.prev=9;_context3.next=12;return this.api.batchSet(key,newVal);case 12:_ref=_context3.sent;settings=_ref.settings;this.cache=(0,_lodash.defaultsDeep)({},defaults,settings);this.saved$.next({key:key,newValue:newVal,oldValue:initialVal});return _context3.abrupt("return",true);case 19:_context3.prev=19;_context3.t0=_context3["catch"](9);this.setLocally(key,initialVal);this.updateErrors$.next(_context3.t0);return _context3.abrupt("return",false);case 24:case"end":return _context3.stop()}}},_callee3,this,[[9,19]])}));function update(_x4,_x5){return _update.apply(this,arguments)}return update}()},{key:"setLocally",value:function setLocally(key,newValue){this.assertUpdateAllowed(key);if(!this.isDeclared(key)){this.cache[key]={}}var oldValue=this.get(key);if(newValue===null){delete this.cache[key].userValue}else{var type=this.cache[key].type;if(type==="json"&&typeof newValue!=="string"){this.cache[key].userValue=JSON.stringify(newValue)}else{this.cache[key].userValue=newValue}}this.update$.next({key:key,newValue:newValue,oldValue:oldValue})}}]);return UiSettingsClient}();exports.UiSettingsClient=UiSettingsClient},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ApplicationService",{enumerable:true,get:function get(){return _application_service.ApplicationService}});Object.defineProperty(exports,"ApplicationSetup",{enumerable:true,get:function get(){return _application_service.ApplicationSetup}});Object.defineProperty(exports,"ApplicationStart",{enumerable:true,get:function get(){return _application_service.ApplicationStart}});Object.defineProperty(exports,"Capabilities",{enumerable:true,get:function get(){return _capabilities.Capabilities}});var _application_service=__webpack_require__(853);var _capabilities=__webpack_require__(506)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Capabilities",{enumerable:true,get:function get(){return _capabilities_service.Capabilities}});Object.defineProperty(exports,"CapabilitiesService",{enumerable:true,get:function get(){return _capabilities_service.CapabilitiesService}});var _capabilities_service=__webpack_require__(854)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DocLinksService",{enumerable:true,get:function get(){return _doc_links_service.DocLinksService}});Object.defineProperty(exports,"DocLinksStart",{enumerable:true,get:function get(){return _doc_links_service.DocLinksStart}});var _doc_links_service=__webpack_require__(855)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsClient=void 0;var _lodash=__webpack_require__(1);var _url=__webpack_require__(38);var _error_auto_create_index=__webpack_require__(857);var _simple_saved_object=__webpack_require__(510);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var join=function join(){for(var _len=arguments.length,uriComponents=new Array(_len),_key=0;_key<_len;_key++){uriComponents[_key]=arguments[_key]}return uriComponents.filter(function(comp){return Boolean(comp)}).map(encodeURIComponent).join("/")};var BATCH_INTERVAL=100;var API_BASE_URL="/api/saved_objects/";var SavedObjectsClient=function(){function SavedObjectsClient(http){var _this=this;_classCallCheck(this,SavedObjectsClient);_defineProperty(this,"http",void 0);_defineProperty(this,"batchQueue",void 0);_defineProperty(this,"processBatchQueue",(0,_lodash.throttle)(function(){var queue=(0,_lodash.cloneDeep)(_this.batchQueue);_this.batchQueue=[];_this.bulkGet(queue).then(function(_ref){var savedObjects=_ref.savedObjects;queue.forEach(function(queueItem){var foundObject=savedObjects.find(function(savedObject){return savedObject.id===queueItem.id&&savedObject.type===queueItem.type});if(!foundObject){return queueItem.resolve(_this.createSavedObject((0,_lodash.pick)(queueItem,["id","type"])))}queueItem.resolve(foundObject)})}).catch(function(err){queue.forEach(function(queueItem){queueItem.reject(err)})})},BATCH_INTERVAL,{leading:false}));_defineProperty(this,"create",function(type,attributes){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!type||!attributes){return Promise.reject(new Error("requires type and attributes"))}var path=_this.getPath([type,options.id]);var query={overwrite:options.overwrite};var createRequest=_this.savedObjectsFetch(path,{method:"POST",query:query,body:JSON.stringify({attributes:attributes,migrationVersion:options.migrationVersion,references:options.references})});return createRequest.then(function(resp){return _this.createSavedObject(resp)}).catch(function(error){if((0,_error_auto_create_index.isAutoCreateIndexError)(error)){(0,_error_auto_create_index.showAutoCreateIndexErrorPage)()}throw error})});_defineProperty(this,"bulkCreate",function(){var objects=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{overwrite:false};var path=_this.getPath(["_bulk_create"]);var query={overwrite:options.overwrite};var request=_this.savedObjectsFetch(path,{method:"POST",query:query,body:JSON.stringify(objects)});return request.then(function(resp){resp.saved_objects=resp.saved_objects.map(function(d){return _this.createSavedObject(d)});return renameKeys({saved_objects:"savedObjects"},resp)})});_defineProperty(this,"delete",function(type,id){if(!type||!id){return Promise.reject(new Error("requires type and id"))}return _this.savedObjectsFetch(_this.getPath([type,id]),{method:"DELETE"})});_defineProperty(this,"find",function(options){var path=_this.getPath(["_find"]);var renameMap={defaultSearchOperator:"default_search_operator",fields:"fields",hasReference:"has_reference",page:"page",perPage:"per_page",search:"search",searchFields:"search_fields",sortField:"sort_field",type:"type"};var renamedQuery=renameKeys(renameMap,options);var query=_lodash.pick.apply(null,[renamedQuery].concat(_toConsumableArray(Object.values(renameMap))));var request=_this.savedObjectsFetch(path,{method:"GET",query:query});return request.then(function(resp){resp.saved_objects=resp.saved_objects.map(function(d){return _this.createSavedObject(d)});return renameKeys({saved_objects:"savedObjects",total:"total",per_page:"perPage",page:"page"},resp)})});_defineProperty(this,"get",function(type,id){if(!type||!id){return Promise.reject(new Error("requires type and id"))}return new Promise(function(resolve,reject){_this.batchQueue.push({type:type,id:id,resolve:resolve,reject:reject});_this.processBatchQueue()})});_defineProperty(this,"bulkGet",function(){var objects=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var path=_this.getPath(["_bulk_get"]);var filteredObjects=objects.map(function(obj){return(0,_lodash.pick)(obj,["id","type"])});var request=_this.savedObjectsFetch(path,{method:"POST",body:JSON.stringify(filteredObjects)});return request.then(function(resp){resp.saved_objects=resp.saved_objects.map(function(d){return _this.createSavedObject(d)});return renameKeys({saved_objects:"savedObjects"},resp)})});this.http=http;this.batchQueue=[]}_createClass(SavedObjectsClient,[{key:"update",value:function update(type,id,attributes){var _this2=this;var _ref2=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},version=_ref2.version,migrationVersion=_ref2.migrationVersion,references=_ref2.references;if(!type||!id||!attributes){return Promise.reject(new Error("requires type, id and attributes"))}var path=this.getPath([type,id]);var body={attributes:attributes,migrationVersion:migrationVersion,references:references,version:version};return this.savedObjectsFetch(path,{method:"PUT",body:JSON.stringify(body)}).then(function(resp){return _this2.createSavedObject(resp)})}},{key:"createSavedObject",value:function createSavedObject(options){return new _simple_saved_object.SimpleSavedObject(this,options)}},{key:"getPath",value:function getPath(path){return(0,_url.resolve)(API_BASE_URL,join.apply(void 0,_toConsumableArray(path)))}},{key:"savedObjectsFetch",value:function savedObjectsFetch(path,_ref3){var method=_ref3.method,query=_ref3.query,body=_ref3.body;return this.http.fetch(path,{method:method,query:query,body:body}).catch(function(err){var kfetchError=Object.assign(err,{res:err.response});delete kfetchError.response;return Promise.reject(kfetchError)})}}]);return SavedObjectsClient}();exports.SavedObjectsClient=SavedObjectsClient;var renameKeys=function renameKeys(keysMap,obj){return Object.keys(obj).reduce(function(acc,key){return _objectSpread({},acc,{},_defineProperty({},keysMap[key]||key,obj[key]))},{})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RouteSetupManager=exports.WAIT_FOR_URL_CHANGE_TOKEN=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _promises=__webpack_require__(57);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var WAIT_FOR_URL_CHANGE_TOKEN=new Error("WAIT_FOR_URL_CHANGE_TOKEN");exports.WAIT_FOR_URL_CHANGE_TOKEN=WAIT_FOR_URL_CHANGE_TOKEN;var RouteSetupManager=function(){function RouteSetupManager(){_classCallCheck(this,RouteSetupManager);this.setupWork=[];this.onSetupComplete=[];this.onSetupError=[];this.onWorkComplete=[];this.onWorkError=[]}_createClass(RouteSetupManager,[{key:"addSetupWork",value:function addSetupWork(fn){this.setupWork.push(fn)}},{key:"afterSetupWork",value:function afterSetupWork(onComplete,onError){this.onSetupComplete.push(onComplete);this.onSetupError.push(onError)}},{key:"afterWork",value:function afterWork(onComplete,onError){this.onWorkComplete.push(onComplete);this.onWorkError.push(onError)}},{key:"doWork",value:function doWork(Promise,$injector,userWork){var _this=this;var invokeEach=function invokeEach(arr,locals){return Promise.map(arr,function(fn){if(!fn)return;return $injector.invoke(fn,null,locals)})};var callErrorHandlers=function callErrorHandlers(handlers,origError){if(!_lodash.default.size(handlers))throw origError;handlers=handlers.slice(0);var next=function next(err){if(!handlers.length)throw err;var handler=handlers.shift();if(!handler)return next(err);return Promise.try(function(){return $injector.invoke(handler,null,{err:err})}).catch(next)};return next(origError)};return invokeEach(this.setupWork).then(function(){return invokeEach(_this.onSetupComplete)},function(err){return callErrorHandlers(_this.onSetupError,err)}).then(function(){var defer=(0,_promises.createDefer)(Promise);userWork.resolveWhenFull(defer);return defer.promise.then(function(){return Promise.all(userWork.doWork())})}).catch(function(error){if(error===WAIT_FOR_URL_CHANGE_TOKEN){return Promise.halt()}throw error}).then(function(){return invokeEach(_this.onWorkComplete)},function(err){return callErrorHandlers(_this.onWorkError,err)})}}]);return RouteSetupManager}();exports.RouteSetupManager=RouteSetupManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleSavedObject=void 0;var _lodash=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SimpleSavedObject=function(){function SimpleSavedObject(client,_ref){var id=_ref.id,type=_ref.type,version=_ref.version,attributes=_ref.attributes,error=_ref.error,references=_ref.references,migrationVersion=_ref.migrationVersion;_classCallCheck(this,SimpleSavedObject);this.client=client;_defineProperty(this,"attributes",void 0);_defineProperty(this,"_version",void 0);_defineProperty(this,"id",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"migrationVersion",void 0);_defineProperty(this,"error",void 0);_defineProperty(this,"references",void 0);this.id=id;this.type=type;this.attributes=attributes||{};this.references=references||[];this._version=version;this.migrationVersion=migrationVersion;if(error){this.error=error}}_createClass(SimpleSavedObject,[{key:"get",value:function get(key){return(0,_lodash.get)(this.attributes,key)}},{key:"set",value:function set(key,value){return(0,_lodash.set)(this.attributes,key,value)}},{key:"has",value:function has(key){return(0,_lodash.has)(this.attributes,key)}},{key:"save",value:function save(){if(this.id){return this.client.update(this.type,this.id,this.attributes,{migrationVersion:this.migrationVersion,references:this.references})}else{return this.client.create(this.type,this.attributes,{migrationVersion:this.migrationVersion,references:this.references})}}},{key:"delete",value:function _delete(){return this.client.delete(this.type,this.id)}}]);return SimpleSavedObject}();exports.SimpleSavedObject=SimpleSavedObject},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsService=void 0;var _saved_objects_client=__webpack_require__(508);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SavedObjectsService=function(){function SavedObjectsService(){_classCallCheck(this,SavedObjectsService)}_createClass(SavedObjectsService,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case"end":return _context.stop()}}},_callee)}));function setup(){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function(){var _start=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref){var http;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:http=_ref.http;return _context2.abrupt("return",{client:new _saved_objects_client.SavedObjectsClient(http)});case 2:case"end":return _context2.stop()}}},_callee2)}));function start(_x){return _start.apply(this,arguments)}return start}()},{key:"stop",value:function(){var _stop=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:case"end":return _context3.stop()}}},_callee3)}));function stop(){return _stop.apply(this,arguments)}return stop}()}]);return SavedObjectsService}();exports.SavedObjectsService=SavedObjectsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ContextService",{enumerable:true,get:function get(){return _context_service.ContextService}});Object.defineProperty(exports,"ContextSetup",{enumerable:true,get:function get(){return _context_service.ContextSetup}});Object.defineProperty(exports,"IContextContainer",{enumerable:true,get:function get(){return _context.IContextContainer}});Object.defineProperty(exports,"IContextProvider",{enumerable:true,get:function get(){return _context.IContextProvider}});Object.defineProperty(exports,"IContextHandler",{enumerable:true,get:function get(){return _context.IContextHandler}});var _context_service=__webpack_require__(867);var _context=__webpack_require__(386)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.metadata=void 0;var _new_platform=__webpack_require__(8);var metadata=_new_platform.npSetup.core.injectedMetadata.getLegacyMetadata();exports.metadata=metadata},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GlobalStateProvider=GlobalStateProvider;var _query_string=__webpack_require__(874);var _state=__webpack_require__(392);var _modules=__webpack_require__(6);var _legacy_class=__webpack_require__(29);var _module=_modules.uiModules.get("kibana/global_state");function GlobalStateProvider(Private){var State=Private(_state.StateProvider);(0,_legacy_class.createLegacyClass)(GlobalState).inherits(State);function GlobalState(defaults){GlobalState.Super.call(this,"_g",defaults)}GlobalState.prototype._persistAcrossApps=true;GlobalState.prototype.removeFromUrl=function(url){return _query_string.QueryString.replaceParamInUrl(url,this._urlParam,null)};return new GlobalState}_module.service("globalState",function(Private){return Private(GlobalStateProvider)})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2474)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(452)},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getFlattenedObject=getFlattenedObject;function shouldReadKeys(value){return _typeof(value)==="object"&&value!==null&&!Array.isArray(value)}function getFlattenedObject(rootValue){if(!shouldReadKeys(rootValue)){throw new TypeError("Root value is not flatten-able, received ".concat(rootValue))}var result={};(function flatten(prefix,object){for(var _i=0,_Object$entries=Object.entries(object);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];var path=prefix?"".concat(prefix,".").concat(key):key;if(shouldReadKeys(value)){flatten(path,value)}else{result[path]=value}}})("",rootValue);return result}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"concatStreamProviders",{enumerable:true,get:function get(){return _concat_stream_providers.concatStreamProviders}});Object.defineProperty(exports,"createIntersperseStream",{enumerable:true,get:function get(){return _intersperse_stream.createIntersperseStream}});Object.defineProperty(exports,"createSplitStream",{enumerable:true,get:function get(){return _split_stream.createSplitStream}});Object.defineProperty(exports,"createListStream",{enumerable:true,get:function get(){return _list_stream.createListStream}});Object.defineProperty(exports,"createReduceStream",{enumerable:true,get:function get(){return _reduce_stream.createReduceStream}});Object.defineProperty(exports,"createPromiseFromStreams",{enumerable:true,get:function get(){return _promise_from_streams.createPromiseFromStreams}});Object.defineProperty(exports,"createConcatStream",{enumerable:true,get:function get(){return _concat_stream.createConcatStream}});Object.defineProperty(exports,"createMapStream",{enumerable:true,get:function get(){return _map_stream.createMapStream}});Object.defineProperty(exports,"createReplaceStream",{enumerable:true,get:function get(){return _replace_stream.createReplaceStream}});Object.defineProperty(exports,"createFilterStream",{enumerable:true,get:function get(){return _filter_stream.createFilterStream}});var _concat_stream_providers=__webpack_require__(881);var _intersperse_stream=__webpack_require__(882);var _split_stream=__webpack_require__(883);var _list_stream=__webpack_require__(884);var _reduce_stream=__webpack_require__(519);var _promise_from_streams=__webpack_require__(885);var _concat_stream=__webpack_require__(886);var _map_stream=__webpack_require__(887);var _replace_stream=__webpack_require__(888);var _filter_stream=__webpack_require__(889)},function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});exports.createReduceStream=createReduceStream;var _stream=__webpack_require__(62);function createReduceStream(reducer,initial){var i=-1;var value=initial;var failed=false;if(typeof reducer!=="function"){throw new TypeError("reducer must be a function")}return new _stream.Transform({readableObjectMode:true,writableObjectMode:true,transform:function(){var _transform=_asyncToGenerator(regeneratorRuntime.mark(function _callee(chunk,enc,callback){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!failed){_context.next=3;break}return _context.abrupt("return",callback());case 3:i+=1;if(!(i===0&&initial===undefined)){_context.next=8;break}value=chunk;_context.next=11;break;case 8:_context.next=10;return reducer(value,chunk,enc);case 10:value=_context.sent;case 11:callback();_context.next=18;break;case 14:_context.prev=14;_context.t0=_context["catch"](0);failed=true;callback(_context.t0);case 18:case"end":return _context.stop()}}},_callee,null,[[0,14]])}));function transform(_x,_x2,_x3){return _transform.apply(this,arguments)}return transform}(),flush:function flush(callback){if(!failed){this.push(value)}callback()}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EventsProvider=EventsProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _notify=__webpack_require__(9);var _simple_emitter=__webpack_require__(393);var _legacy_class=__webpack_require__(29);var _promises=__webpack_require__(57);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var location="EventEmitter";function EventsProvider(Promise){(0,_legacy_class.createLegacyClass)(Events).inherits(_simple_emitter.SimpleEmitter);function Events(){Events.Super.call(this);this._listeners={};this._emitChain=Promise.resolve()}Events.prototype.on=function(name,handler){if(!Array.isArray(this._listeners[name])){this._listeners[name]=[]}var listener={handler:handler};this._listeners[name].push(listener);(function rebuildDefer(){listener.defer=(0,_promises.createDefer)(Promise);listener.resolved=listener.defer.promise.then(function(args){rebuildDefer();Promise.resolve(handler.apply(handler,args)).catch(function(error){return(0,_notify.fatalError)(error,location)});return null})})();return this};Events.prototype.off=function(name,handler){if(!name&&!handler){return this.removeAllListeners()}if(!this._listeners[name])return this;if(!handler){delete this._listeners[name]}else{this._listeners[name]=_lodash.default.filter(this._listeners[name],function(listener){return handler!==listener.handler})}return this};Events.prototype.emit=function(name){var self=this;var args=_lodash.default.rest(arguments);if(!self._listeners[name]){return self._emitChain}return Promise.map(self._listeners[name],function(listener){return self._emitChain=self._emitChain.then(function(){if(!self._listeners[name]||self._listeners[name].indexOf(listener)<0)return;listener.defer.resolve(args);return listener.resolved})})};Events.prototype.listeners=function(name){return _lodash.default.pluck(this._listeners[name],"handler")};return Events}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addFatalErrorCallback=addFatalErrorCallback;exports.fatalError=fatalError;var _new_platform=__webpack_require__(8);var _format_angular_http_error=__webpack_require__(522);function addFatalErrorCallback(callback){_new_platform.npSetup.core.fatalErrors.get$().subscribe(function(){callback()})}function fatalError(error,location){if((0,_format_angular_http_error.isAngularHttpError)(error)){error=(0,_format_angular_http_error.formatAngularHttpError)(error)}_new_platform.npSetup.core.fatalErrors.add(error,location)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAngularHttpError=isAngularHttpError;exports.formatAngularHttpError=formatAngularHttpError;var _i18n=__webpack_require__(2);function isAngularHttpError(error){return error&&typeof error.status==="number"&&typeof error.statusText==="string"&&error.data&&typeof error.data.message==="string"}function formatAngularHttpError(error){if(error.status===-1){return _i18n.i18n.translate("common.ui.notify.fatalError.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. "+"Please check if the Kibana server is running and that your browser has a working connection, "+"or contact your system administrator."})}return _i18n.i18n.translate("common.ui.notify.fatalError.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:error.status,errStatusText:error.statusText,errMessage:error.data.message}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"toastNotifications",{enumerable:true,get:function get(){return _toasts.toastNotifications}});Object.defineProperty(exports,"Toast",{enumerable:true,get:function get(){return _toast_notifications.Toast}});Object.defineProperty(exports,"ToastInput",{enumerable:true,get:function get(){return _toast_notifications.ToastInput}});var _toasts=__webpack_require__(895);var _toast_notifications=__webpack_require__(524)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Toast",{enumerable:true,get:function get(){return _public.Toast}});Object.defineProperty(exports,"ToastInput",{enumerable:true,get:function get(){return _public.ToastInput}});exports.ToastNotifications=void 0;var _public=__webpack_require__(79);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ToastNotifications=function ToastNotifications(toasts){var _this=this;_classCallCheck(this,ToastNotifications);this.toasts=toasts;_defineProperty(this,"list",[]);_defineProperty(this,"onChangeCallback",void 0);_defineProperty(this,"onChange",function(callback){_this.onChangeCallback=callback});_defineProperty(this,"add",function(toastOrTitle){return _this.toasts.add(toastOrTitle)});_defineProperty(this,"remove",function(toast){return _this.toasts.remove(toast)});_defineProperty(this,"addSuccess",function(toastOrTitle){return _this.toasts.addSuccess(toastOrTitle)});_defineProperty(this,"addWarning",function(toastOrTitle){return _this.toasts.addWarning(toastOrTitle)});_defineProperty(this,"addDanger",function(toastOrTitle){return _this.toasts.addDanger(toastOrTitle)});_defineProperty(this,"addError",function(error,options){return _this.toasts.addError(error,options)});toasts.get$().subscribe(function(list){_this.list=list;if(_this.onChangeCallback){_this.onChangeCallback()}})};exports.ToastNotifications=ToastNotifications},function(module,exports,__webpack_require__){"use strict";__webpack_require__(907)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Storage=void 0;var _angular=_interopRequireDefault(__webpack_require__(17));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Storage=function Storage(store){var _this=this;_classCallCheck(this,Storage);_defineProperty(this,"store",void 0);_defineProperty(this,"get",function(key){if(!_this.store){return null}var storageItem=_this.store.getItem(key);if(storageItem===null){return null}try{return JSON.parse(storageItem)}catch(error){return null}});_defineProperty(this,"set",function(key,value){try{return _this.store.setItem(key,_angular.default.toJson(value))}catch(e){return false}});_defineProperty(this,"remove",function(key){return _this.store.removeItem(key)});_defineProperty(this,"clear",function(){return _this.store.clear()});this.store=store};exports.Storage=Storage},function(module,exports,__webpack_require__){"use strict";__webpack_require__(909)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(81);var _eui=__webpack_require__(3);var _modules=__webpack_require__(6);var app=_modules.uiModules.get("app/kibana",["react"]);app.directive("confirmModal",function(reactDirective){return reactDirective(_eui.EuiConfirmModal)});app.directive("icon",function(reactDirective){return reactDirective(_eui.EuiIcon)});app.directive("iconTip",function(reactDirective){return reactDirective(_eui.EuiIconTip,["content","type","position","title","color"])})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getUnhashableStatesProvider=getUnhashableStatesProvider;function getUnhashableStatesProvider(getAppState,globalState){return function getUnhashableStates(){return[getAppState(),globalState].filter(Boolean)}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2170)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unhashQueryString=unhashQueryString;var _lodash=__webpack_require__(1);function unhashQueryString(parsedQueryString,states){return(0,_lodash.mapValues)(parsedQueryString,function(val,key){var state=states.find(function(s){return key===s.getQueryParamName()});return state?state.translateHashToRison(val):val})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PersistedState=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _toPath=_interopRequireDefault(__webpack_require__(530));var _errors=__webpack_require__(25);var _simple_emitter=__webpack_require__(393);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function prepSetParams(key,value,path){if(_lodash.default.isUndefined(value)&&(_lodash.default.isPlainObject(key)||path.length>0)){value=key;key=undefined}return{value:_lodash.default.cloneDeep(value),key:key}}var PersistedState=function(){function PersistedState(value,path){var _this=this;var EmitterClass=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_simple_emitter.SimpleEmitter;_classCallCheck(this,PersistedState);EmitterClass.call(this);this._path=this._setPath(path);_lodash.default.forOwn(EmitterClass.prototype,function(method,methodName){_this[methodName]=function(){return EmitterClass.prototype[methodName].apply(this,arguments)}});if(!this._path.length&&value&&!_lodash.default.isPlainObject(value)){throw new _errors.PersistedStateError("State value must be a plain object")}value=value||this._getDefault();this.set(value);this._initialized=true}_createClass(PersistedState,[{key:"get",value:function get(key,def){return _lodash.default.cloneDeep(this._get(key,def))}},{key:"set",value:function set(key,value){var params=prepSetParams(key,value,this._path);var val=this._set(params.key,params.value);this.emit("set");return val}},{key:"setSilent",value:function setSilent(key,value){var params=prepSetParams(key,value,this._path);return this._set(params.key,params.value,true)}},{key:"clearAllKeys",value:function clearAllKeys(){var _this2=this;Object.getOwnPropertyNames(this._changedState).forEach(function(key){_this2.set(key,null)})}},{key:"reset",value:function reset(path){var keyPath=this._getIndex(path);var origValue=_lodash.default.get(this._defaultState,keyPath);var currentValue=_lodash.default.get(this._mergedState,keyPath);if(_lodash.default.isUndefined(origValue)){this._cleanPath(path,this._mergedState)}else{_lodash.default.set(this._mergedState,keyPath,origValue)}this._cleanPath(path,this._changedState);if(!_lodash.default.isEqual(currentValue,origValue))this.emit("change")}},{key:"getChanges",value:function getChanges(){return _lodash.default.cloneDeep(this._changedState)}},{key:"toJSON",value:function toJSON(){return this.get()}},{key:"toString",value:function toString(){return JSON.stringify(this.toJSON())}},{key:"fromString",value:function fromString(input){return this.set(JSON.parse(input))}},{key:"_getIndex",value:function _getIndex(key){if(_lodash.default.isUndefined(key))return this._path;return(this._path||[]).concat((0,_toPath.default)(key))}},{key:"_getPartialIndex",value:function _getPartialIndex(key){var keyPath=this._getIndex(key);return keyPath.slice(this._path.length)}},{key:"_cleanPath",value:function _cleanPath(path,stateTree){var partialPath=this._getPartialIndex(path);var remove=true;while(partialPath.length>0){var lastKey=partialPath.splice(partialPath.length-1,1)[0];var statePath=this._path.concat(partialPath);var stateVal=statePath.length>0?_lodash.default.get(stateTree,statePath):stateTree;if(!_lodash.default.isPlainObject(stateVal))return;if(remove)delete stateVal[lastKey];if(Object.keys(stateVal).length>0)remove=false}}},{key:"_getDefault",value:function _getDefault(){return this._hasPath()?undefined:{}}},{key:"_setPath",value:function _setPath(path){var isString=_lodash.default.isString(path);var isArray=Array.isArray(path);if(!isString&&!isArray)return[];return isString?[this._getIndex(path)]:path}},{key:"_hasPath",value:function _hasPath(){return this._path.length>0}},{key:"_get",value:function _get(key,def){if(!this._hasPath()&&_lodash.default.isUndefined(key)){return this._mergedState}return _lodash.default.get(this._mergedState,this._getIndex(key),def)}},{key:"_set",value:function _set(key,value,silent){var self=this;var stateChanged=false;var initialState=!this._initialized;var keyPath=this._getIndex(key);var hasKeyPath=keyPath.length>0;if(initialState){this._changedState={};if(!this._hasPath()&&_lodash.default.isUndefined(key))this._defaultState=value;else this._defaultState=_lodash.default.set({},keyPath,value)}if(!initialState){if(!this._hasPath()&&_lodash.default.isUndefined(key)){stateChanged=!_lodash.default.isEqual(this._changedState,value);this._changedState=value;this._mergedState=_lodash.default.cloneDeep(value)}else{var curVal=hasKeyPath?this.get(keyPath):this._mergedState;stateChanged=!_lodash.default.isEqual(curVal,value);if(Array.isArray(_lodash.default.get(this._mergedState,keyPath))){if(hasKeyPath)_lodash.default.set(this._mergedState,keyPath,undefined);else this._mergedState=undefined}if(hasKeyPath){_lodash.default.set(this._changedState,keyPath,value)}else{this._changedState=_lodash.default.isPlainObject(value)?value:{}}}}var targetObj=this._mergedState||_lodash.default.cloneDeep(this._defaultState);var sourceObj=_lodash.default.merge({},this._changedState);var mergeMethod=function mergeMethod(targetValue,sourceValue,mergeKey){if(!initialState&&_lodash.default.isEqual(keyPath,self._getIndex(mergeKey))){return!_lodash.default.isUndefined(sourceValue)?sourceValue:targetValue}};this._mergedState=_lodash.default.merge(targetObj,sourceObj,mergeMethod);if(_lodash.default.isEqual(this._mergedState,this._defaultState))this._changedState={};if(!silent&&stateChanged)this.emit("change",key);return this}}]);return PersistedState}();exports.PersistedState=PersistedState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"MarkdownSimple",{enumerable:true,get:function get(){return _markdown_simple.MarkdownSimple}});Object.defineProperty(exports,"Markdown",{enumerable:true,get:function get(){return _markdown.Markdown}});var _markdown_simple=__webpack_require__(928);var _markdown=__webpack_require__(929)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlOverflowService=exports.IE_REGEX=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var URL_MAX_IE=2e3;var URL_MAX_OTHERS=25e3;var IE_REGEX=/(; ?MSIE |Edge\/\d|Trident\/[\d+\.]+;.*rv:*11\.\d+)/;exports.IE_REGEX=IE_REGEX;var UrlOverflowService=function(){function UrlOverflowService(){var _this=this;_classCallCheck(this,UrlOverflowService);var key="error/url-overflow/url";var store=window.sessionStorage||{getItem:function getItem(){},setItem:function setItem(){},removeItem:function removeItem(){}};this._ieLike=IE_REGEX.test(window.navigator.userAgent);this._val=store.getItem(key);this._sync=function(){if(_this._val==null)store.removeItem(key);else store.setItem(key,_this._val)}}_createClass(UrlOverflowService,[{key:"failLength",value:function failLength(){return this._ieLike?URL_MAX_IE:URL_MAX_OTHERS}},{key:"set",value:function set(v){this._val=v;this._sync()}},{key:"get",value:function get(){return this._val}},{key:"check",value:function check(absUrl){if(!this.get()){var urlLength=absUrl.length;var remaining=this.failLength()-urlLength;if(remaining>0){return remaining}this.set(absUrl)}throw new Error("\n      The URL has gotten too big and kibana can no longer\n      continue. Please refresh to return to your previous state.\n    ")}},{key:"clear",value:function clear(){this._val=undefined;this._sync()}}]);return UrlOverflowService}();exports.UrlOverflowService=UrlOverflowService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.absoluteToParsedUrl=absoluteToParsedUrl;var _url=__webpack_require__(38);var _extract_app_path_and_id=__webpack_require__(938);var _kibana_parsed_url=__webpack_require__(536);function absoluteToParsedUrl(absoluteUrl){var basePath=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var _extractAppPathAndId=(0,_extract_app_path_and_id.extractAppPathAndId)(absoluteUrl,basePath),appPath=_extractAppPathAndId.appPath,appId=_extractAppPathAndId.appId;var _parse=(0,_url.parse)(absoluteUrl),hostname=_parse.hostname,port=_parse.port,protocol=_parse.protocol;return new _kibana_parsed_url.KibanaParsedUrl({basePath:basePath,appId:appId,appPath:appPath,hostname:hostname,port:port,protocol:protocol})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaParsedUrl=void 0;var _url=__webpack_require__(38);var _utils=__webpack_require__(56);var _prepend_path=__webpack_require__(939);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KibanaParsedUrl=function(){function KibanaParsedUrl(options){_classCallCheck(this,KibanaParsedUrl);_defineProperty(this,"appId",void 0);_defineProperty(this,"appPath",void 0);_defineProperty(this,"basePath",void 0);_defineProperty(this,"hostname",void 0);_defineProperty(this,"protocol",void 0);_defineProperty(this,"port",void 0);var appId=options.appId,_options$basePath=options.basePath,basePath=_options$basePath===void 0?"":_options$basePath,_options$appPath=options.appPath,appPath=_options$appPath===void 0?"":_options$appPath,hostname=options.hostname,protocol=options.protocol,port=options.port;var hostOrProtocolSpecified=hostname||protocol||port;this.basePath=basePath;this.appId=appId;this.appPath=appPath;this.hostname=hostOrProtocolSpecified?hostname:window.location.hostname;this.port=hostOrProtocolSpecified?port:window.location.port;this.protocol=hostOrProtocolSpecified?protocol:window.location.protocol}_createClass(KibanaParsedUrl,[{key:"getGlobalState",value:function getGlobalState(){if(!this.appPath){return""}var parsedUrl=(0,_url.parse)(this.appPath,true);var query=parsedUrl.query||{};return query._g||""}},{key:"setGlobalState",value:function setGlobalState(newGlobalState){if(!this.appPath){return}this.appPath=(0,_utils.modifyUrl)(this.appPath,function(parsed){parsed.query._g=newGlobalState})}},{key:"addQueryParameter",value:function addQueryParameter(name,val){this.appPath=(0,_utils.modifyUrl)(this.appPath,function(parsed){parsed.query[name]=val})}},{key:"getHashedAppPath",value:function getHashedAppPath(){return"#".concat(this.appPath)}},{key:"getAppBasePath",value:function getAppBasePath(){return"/".concat(this.appId)}},{key:"getAppRootPath",value:function getAppRootPath(){return"/app".concat(this.getAppBasePath()).concat(this.getHashedAppPath())}},{key:"getRootRelativePath",value:function getRootRelativePath(){return(0,_prepend_path.prependPath)(this.getAppRootPath(),this.basePath)}},{key:"getAbsoluteUrl",value:function getAbsoluteUrl(){var _this=this;return(0,_utils.modifyUrl)(this.getRootRelativePath(),function(parsed){parsed.protocol=_this.protocol;parsed.port=_this.port;parsed.hostname=_this.hostname})}}]);return KibanaParsedUrl}();exports.KibanaParsedUrl=KibanaParsedUrl},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Type=Type;var _lodash=__webpack_require__(1);function getType(node){if(node==null)return"null";if(_typeof(node)==="object"){if(!node.type)throw new Error("Objects must have a type property");return node.type}return _typeof(node)}function Type(config){var _this=this;this.name=config.name;this.help=config.help||"";this.validate=config.validate||function validate(){};this.create=config.create;this.serialize=config.serialize;this.deserialize=config.deserialize;var getToFn=function getToFn(type){return(0,_lodash.get)(config,["to",type])||(0,_lodash.get)(config,["to","*"])};var getFromFn=function getFromFn(type){return(0,_lodash.get)(config,["from",type])||(0,_lodash.get)(config,["from","*"])};this.castsTo=function(type){return typeof getToFn(type)==="function"};this.castsFrom=function(type){return typeof getFromFn(type)==="function"};this.to=function(node,toTypeName,types){var typeName=getType(node);if(typeName!==_this.name){throw new Error("Can not cast object of type '".concat(typeName,"' using '").concat(_this.name,"'"))}else if(!_this.castsTo(toTypeName)){throw new Error("Can not cast '".concat(typeName,"' to '").concat(toTypeName,"'"))}return getToFn(toTypeName)(node,types)};this.from=function(node,types){var typeName=getType(node);if(!_this.castsFrom(typeName))throw new Error("Can not cast '".concat(_this.name,"' from ").concat(typeName));return getFromFn(typeName)(node,types)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timeHistory=exports.TimeHistory=void 0;var _moment=_interopRequireDefault(__webpack_require__(14));var _persisted_log=__webpack_require__(68);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TimeHistory=function(){function TimeHistory(){_classCallCheck(this,TimeHistory);_defineProperty(this,"history",void 0);var historyOptions={maxLength:10,filterDuplicates:true,isDuplicate:function isDuplicate(oldItem,newItem){return oldItem.from===newItem.from&&oldItem.to===newItem.to}};this.history=new _persisted_log.PersistedLog("kibana.timepicker.timeHistory",historyOptions)}_createClass(TimeHistory,[{key:"add",value:function add(time){if(!time){return}var justStringsTime={from:_moment.default.isMoment(time.from)?time.from.toISOString():time.from,to:_moment.default.isMoment(time.to)?time.to.toISOString():time.to};this.history.add(justStringsTime)}},{key:"get",value:function get(){return this.history.get()}}]);return TimeHistory}();exports.TimeHistory=TimeHistory;var timeHistory=new TimeHistory;exports.timeHistory=timeHistory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PersistedLog=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);var _storage=__webpack_require__(97);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var localStorage=new _storage.Storage(window.localStorage);var defaultIsDuplicate=function defaultIsDuplicate(oldItem,newItem){return _lodash.default.isEqual(oldItem,newItem)};var PersistedLog=function(){function PersistedLog(name){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var storage=arguments.length>2&&arguments[2]!==undefined?arguments[2]:localStorage;_classCallCheck(this,PersistedLog);_defineProperty(this,"name",void 0);_defineProperty(this,"maxLength",void 0);_defineProperty(this,"filterDuplicates",void 0);_defineProperty(this,"isDuplicate",void 0);_defineProperty(this,"storage",void 0);_defineProperty(this,"items",void 0);_defineProperty(this,"update$",new Rx.BehaviorSubject(undefined));this.name=name;this.maxLength=typeof options.maxLength==="string"?this.maxLength=parseInt(options.maxLength,10):options.maxLength;this.filterDuplicates=options.filterDuplicates||false;this.isDuplicate=options.isDuplicate||defaultIsDuplicate;this.storage=storage;this.items=this.storage.get(this.name)||[];if(this.maxLength!==undefined&&!isNaN(this.maxLength)){this.items=_lodash.default.take(this.items,this.maxLength)}}_createClass(PersistedLog,[{key:"add",value:function add(val){var _this=this;if(val==null){return this.items}if(this.filterDuplicates){_lodash.default.remove(this.items,function(item){return _this.isDuplicate(item,val)})}this.items.unshift(val);if(this.maxLength&&!isNaN(this.maxLength)){this.items=_lodash.default.take(this.items,this.maxLength)}this.storage.set(this.name,this.items);this.update$.next(undefined);return this.items}},{key:"get",value:function get(){return _lodash.default.cloneDeep(this.items)}},{key:"get$",value:function get$(){var _this2=this;return this.update$.pipe((0,_operators.map)(function(){return _this2.get()}))}}]);return PersistedLog}();exports.PersistedLog=PersistedLog},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ExpressionsService",{enumerable:true,get:function get(){return _expressions_service.ExpressionsService}});Object.defineProperty(exports,"ExpressionsSetup",{enumerable:true,get:function get(){return _expressions_service.ExpressionsSetup}});Object.defineProperty(exports,"ExpressionRenderer",{enumerable:true,get:function get(){return _expression_renderer.ExpressionRenderer}});Object.defineProperty(exports,"ExpressionRendererProps",{enumerable:true,get:function get(){return _expression_renderer.ExpressionRendererProps}});Object.defineProperty(exports,"ExpressionRunner",{enumerable:true,get:function get(){return _expression_runner.ExpressionRunner}});var _expressions_service=__webpack_require__(973);var _expression_renderer=__webpack_require__(541);var _expression_runner=__webpack_require__(542)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createRenderer=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var createRenderer=function createRenderer(run){return function(_ref){var expression=_ref.expression,onRenderFailure=_ref.onRenderFailure,options=_objectWithoutProperties(_ref,["expression","onRenderFailure"]);var mountpoint=(0,_react.useRef)(null);(0,_react.useEffect)(function(){if(mountpoint.current){run(expression,_objectSpread({},options,{element:mountpoint.current})).catch(function(result){if(onRenderFailure){onRenderFailure(result)}})}},[expression,mountpoint.current]);return _react.default.createElement("div",{ref:function ref(el){mountpoint.current=el}})}};exports.createRenderer=createRenderer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createRunFn=void 0;var _common=__webpack_require__(370);var _adapters=__webpack_require__(115);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var createRunFn=function createRunFn(renderersRegistry,interpreterPromise){return function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(expressionOrAst,_ref){var element,context,getInitialContext,interpreter,ast,response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:element=_ref.element,context=_ref.context,getInitialContext=_ref.getInitialContext;_context.next=3;return interpreterPromise;case 3:interpreter=_context.sent;ast=typeof expressionOrAst==="string"?(0,_common.fromExpression)(expressionOrAst):expressionOrAst;_context.next=7;return interpreter.interpretAst(ast,context||{type:"null"},{getInitialContext:getInitialContext||function(){return{}},inspectorAdapters:{requests:new _adapters.RequestAdapter,data:new _adapters.DataAdapter}});case 7:response=_context.sent;if(!(response.type==="error")){_context.next=10;break}throw response;case 10:if(!element){_context.next=16;break}if(!(response.type==="render"&&response.as&&renderersRegistry.get(response.as)!==null)){_context.next=15;break}renderersRegistry.get(response.as).render(element,response.value,{onDestroy:function onDestroy(fn){},done:function done(){}});_context.next=16;break;case 15:throw response;case 16:return _context.abrupt("return",response);case 17:case"end":return _context.stop()}}},_callee)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()};exports.createRunFn=createRunFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={SearchService:true,SearchSetup:true};Object.defineProperty(exports,"SearchService",{enumerable:true,get:function get(){return _search_service.SearchService}});Object.defineProperty(exports,"SearchSetup",{enumerable:true,get:function get(){return _search_service.SearchSetup}});var _search_service=__webpack_require__(981);var _search_bar=__webpack_require__(982);Object.keys(_search_bar).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _search_bar[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedQueryService=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var createSavedQueryService=function createSavedQueryService(savedObjectsClient){var saveQuery=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(attributes){var _ref2,_ref2$overwrite,overwrite,query,queryObject,rawQueryResponse,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref2=_args.length>1&&_args[1]!==undefined?_args[1]:{},_ref2$overwrite=_ref2.overwrite,overwrite=_ref2$overwrite===void 0?false:_ref2$overwrite;if(attributes.title.length){_context.next=3;break}throw new Error("Cannot create saved query without a title");case 3:query={query:typeof attributes.query.query==="string"?attributes.query.query:JSON.stringify(attributes.query.query),language:attributes.query.language};queryObject={title:attributes.title.trim(),description:attributes.description,query:query};if(attributes.filters){queryObject.filters=attributes.filters}if(attributes.timefilter){queryObject.timefilter=attributes.timefilter}if(overwrite){_context.next=13;break}_context.next=10;return savedObjectsClient.create("query",queryObject,{id:attributes.title});case 10:rawQueryResponse=_context.sent;_context.next=16;break;case 13:_context.next=15;return savedObjectsClient.create("query",queryObject,{id:attributes.title,overwrite:true});case 15:rawQueryResponse=_context.sent;case 16:if(!rawQueryResponse.error){_context.next=18;break}throw new Error(rawQueryResponse.error.message);case 18:return _context.abrupt("return",parseSavedQueryObject(rawQueryResponse));case 19:case"end":return _context.stop()}}},_callee)}));return function saveQuery(_x){return _ref.apply(this,arguments)}}();var getAllSavedQueries=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var count,response;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getSavedQueryCount();case 2:count=_context2.sent;_context2.next=5;return savedObjectsClient.find({type:"query",perPage:count,page:1});case 5:response=_context2.sent;return _context2.abrupt("return",response.savedObjects.map(function(savedObject){return parseSavedQueryObject(savedObject)}));case 7:case"end":return _context2.stop()}}},_callee2)}));return function getAllSavedQueries(){return _ref3.apply(this,arguments)}}();var findSavedQueries=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var searchText,perPage,activePage,response,_args3=arguments;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:searchText=_args3.length>0&&_args3[0]!==undefined?_args3[0]:"";perPage=_args3.length>1&&_args3[1]!==undefined?_args3[1]:50;activePage=_args3.length>2&&_args3[2]!==undefined?_args3[2]:1;_context3.next=5;return savedObjectsClient.find({type:"query",search:searchText,searchFields:["title^5","description"],sortField:"_score",perPage:perPage,page:activePage});case 5:response=_context3.sent;return _context3.abrupt("return",response.savedObjects.map(function(savedObject){return parseSavedQueryObject(savedObject)}));case 7:case"end":return _context3.stop()}}},_callee3)}));return function findSavedQueries(){return _ref4.apply(this,arguments)}}();var getSavedQuery=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(id){var response;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return savedObjectsClient.get("query",id);case 2:response=_context4.sent;return _context4.abrupt("return",parseSavedQueryObject(response));case 4:case"end":return _context4.stop()}}},_callee4)}));return function getSavedQuery(_x2){return _ref5.apply(this,arguments)}}();var deleteSavedQuery=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(id){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return savedObjectsClient.delete("query",id);case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}}},_callee5)}));return function deleteSavedQuery(_x3){return _ref6.apply(this,arguments)}}();var parseSavedQueryObject=function parseSavedQueryObject(savedQuery){var queryString;try{queryString=JSON.parse(savedQuery.attributes.query.query)}catch(error){queryString=savedQuery.attributes.query.query}var savedQueryItems={title:savedQuery.attributes.title||"",description:savedQuery.attributes.description||"",query:{query:queryString,language:savedQuery.attributes.query.language}};if(savedQuery.attributes.filters){savedQueryItems.filters=savedQuery.attributes.filters}if(savedQuery.attributes.timefilter){savedQueryItems.timefilter=savedQuery.attributes.timefilter}return{id:savedQuery.id,attributes:savedQueryItems}};var getSavedQueryCount=function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var response;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return savedObjectsClient.find({type:"query",perPage:0,page:1});case 2:response=_context6.sent;return _context6.abrupt("return",response.total);case 4:case"end":return _context6.stop()}}},_callee6)}));return function getSavedQueryCount(){return _ref7.apply(this,arguments)}}();return{saveQuery:saveQuery,getAllSavedQueries:getAllSavedQueries,findSavedQueries:findSavedQueries,getSavedQuery:getSavedQuery,deleteSavedQuery:deleteSavedQuery,getSavedQueryCount:getSavedQueryCount}};exports.createSavedQueryService=createSavedQueryService},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2100)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _query_service=__webpack_require__(988);Object.keys(_query_service).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _query_service[key]}})})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.QueryBarInput=exports.QueryBarInputUI=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _autocomplete_providers=__webpack_require__(993);var _lodash=__webpack_require__(1);var _kfetch=__webpack_require__(39);var _lib=__webpack_require__(996);var _language_switcher=__webpack_require__(998);var _suggestions_component=__webpack_require__(999);var _get_query_log=__webpack_require__(401);var _fetch_index_patterns=__webpack_require__(1001);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KEY_CODES={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27,TAB:9,HOME:36,END:35};var recentSearchType="recentSearch";var QueryBarInputUI=function(_Component){_inherits(QueryBarInputUI,_Component);function QueryBarInputUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,QueryBarInputUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(QueryBarInputUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSuggestionsVisible:false,index:null,suggestions:[],suggestionLimit:50,selectionStart:null,selectionEnd:null,indexPatterns:[]});_defineProperty(_assertThisInitialized(_this),"inputRef",null);_defineProperty(_assertThisInitialized(_this),"persistedLog",void 0);_defineProperty(_assertThisInitialized(_this),"componentIsUnmounting",false);_defineProperty(_assertThisInitialized(_this),"getQueryString",function(){return(0,_lib.toUser)(_this.props.query.query)});_defineProperty(_assertThisInitialized(_this),"fetchIndexPatterns",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var stringPatterns,objectPatterns,objectPatternsFromStrings;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:stringPatterns=_this.props.indexPatterns.filter(function(indexPattern){return typeof indexPattern==="string"});objectPatterns=_this.props.indexPatterns.filter(function(indexPattern){return typeof indexPattern!=="string"});_context.next=4;return(0,_fetch_index_patterns.fetchIndexPatterns)(_this.props.savedObjectsClient,stringPatterns,_this.props.uiSettings);case 4:objectPatternsFromStrings=_context.sent;_this.setState({indexPatterns:[].concat(_toConsumableArray(objectPatterns),_toConsumableArray(objectPatternsFromStrings))});case 6:case"end":return _context.stop()}}},_callee)})));_defineProperty(_assertThisInitialized(_this),"getSuggestions",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var uiSettings,language,queryString,recentSearchSuggestions,autocompleteProvider,indexPatterns,getAutocompleteSuggestions,_this$inputRef,selectionStart,selectionEnd,suggestions;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.inputRef){_context2.next=2;break}return _context2.abrupt("return");case 2:uiSettings=_this.props.uiSettings;language=_this.props.query.language;queryString=_this.getQueryString();recentSearchSuggestions=_this.getRecentSearchSuggestions(queryString);autocompleteProvider=(0,_autocomplete_providers.getAutocompleteProvider)(language);if(!(!autocompleteProvider||!Array.isArray(_this.state.indexPatterns)||(0,_lodash.compact)(_this.state.indexPatterns).length===0)){_context2.next=9;break}return _context2.abrupt("return",recentSearchSuggestions);case 9:indexPatterns=_this.state.indexPatterns;getAutocompleteSuggestions=autocompleteProvider({config:uiSettings,indexPatterns:indexPatterns});_this$inputRef=_this.inputRef,selectionStart=_this$inputRef.selectionStart,selectionEnd=_this$inputRef.selectionEnd;if(!(selectionStart===null||selectionEnd===null)){_context2.next=14;break}return _context2.abrupt("return");case 14:_context2.next=16;return getAutocompleteSuggestions({query:queryString,selectionStart:selectionStart,selectionEnd:selectionEnd});case 16:suggestions=_context2.sent;return _context2.abrupt("return",[].concat(_toConsumableArray(suggestions),_toConsumableArray(recentSearchSuggestions)));case 18:case"end":return _context2.stop()}}},_callee2)})));_defineProperty(_assertThisInitialized(_this),"getRecentSearchSuggestions",function(query){if(!_this.persistedLog){return[]}var recentSearches=_this.persistedLog.get();var matchingRecentSearches=recentSearches.filter(function(recentQuery){var recentQueryString=_typeof(recentQuery)==="object"?(0,_lib.toUser)(recentQuery):recentQuery;return recentQueryString.includes(query)});return matchingRecentSearches.map(function(recentSearch){var text=(0,_lib.toUser)(recentSearch);var start=0;var end=query.length;return{type:recentSearchType,text:text,start:start,end:end}})});_defineProperty(_assertThisInitialized(_this),"updateSuggestions",(0,_lodash.debounce)(_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var suggestions;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.getSuggestions();case 2:_context3.t0=_context3.sent;if(_context3.t0){_context3.next=5;break}_context3.t0=[];case 5:suggestions=_context3.t0;if(!_this.componentIsUnmounting){_this.setState({suggestions:suggestions})}case 7:case"end":return _context3.stop()}}},_callee3)})),100));_defineProperty(_assertThisInitialized(_this),"onSubmit",function(query){if(_this.props.onSubmit){if(_this.persistedLog){_this.persistedLog.add(query.query)}_this.props.onSubmit({query:(0,_lib.fromUser)(query.query),language:query.language})}});_defineProperty(_assertThisInitialized(_this),"onChange",function(query){_this.updateSuggestions();if(_this.props.onChange){_this.props.onChange({query:(0,_lib.fromUser)(query.query),language:query.language})}});_defineProperty(_assertThisInitialized(_this),"onQueryStringChange",function(value){_this.setState({isSuggestionsVisible:true,index:null,suggestionLimit:50});_this.onChange({query:value,language:_this.props.query.language})});_defineProperty(_assertThisInitialized(_this),"onInputChange",function(event){_this.onQueryStringChange(event.target.value)});_defineProperty(_assertThisInitialized(_this),"onClickInput",function(event){if(event.target instanceof HTMLInputElement){_this.onQueryStringChange(event.target.value)}});_defineProperty(_assertThisInitialized(_this),"onKeyUp",function(event){if([KEY_CODES.LEFT,KEY_CODES.RIGHT,KEY_CODES.HOME,KEY_CODES.END].includes(event.keyCode)){_this.setState({isSuggestionsVisible:true});if(event.target instanceof HTMLInputElement){_this.onQueryStringChange(event.target.value)}}});_defineProperty(_assertThisInitialized(_this),"onKeyDown",function(event){if(event.target instanceof HTMLInputElement){var _this$state=_this.state,isSuggestionsVisible=_this$state.isSuggestionsVisible,index=_this$state.index;var preventDefault=event.preventDefault.bind(event);var target=event.target,key=event.key,metaKey=event.metaKey;var value=target.value,selectionStart=target.selectionStart,selectionEnd=target.selectionEnd;var updateQuery=function updateQuery(query,newSelectionStart,newSelectionEnd){_this.onQueryStringChange(query);_this.setState({selectionStart:newSelectionStart,selectionEnd:newSelectionEnd})};switch(event.keyCode){case KEY_CODES.DOWN:event.preventDefault();if(isSuggestionsVisible&&index!==null){_this.incrementIndex(index)}else{_this.setState({isSuggestionsVisible:true,index:0})}break;case KEY_CODES.UP:event.preventDefault();if(isSuggestionsVisible&&index!==null){_this.decrementIndex(index)}break;case KEY_CODES.ENTER:if(!_this.props.bubbleSubmitEvent){event.preventDefault()}if(isSuggestionsVisible&&index!==null&&_this.state.suggestions[index]){event.preventDefault();_this.selectSuggestion(_this.state.suggestions[index])}else{_this.onSubmit(_this.props.query);_this.setState({isSuggestionsVisible:false})}break;case KEY_CODES.ESC:event.preventDefault();_this.setState({isSuggestionsVisible:false,index:null});break;case KEY_CODES.TAB:_this.setState({isSuggestionsVisible:false,index:null});break;default:if(selectionStart!==null&&selectionEnd!==null){(0,_lib.matchPairs)({value:value,selectionStart:selectionStart,selectionEnd:selectionEnd,key:key,metaKey:metaKey,updateQuery:updateQuery,preventDefault:preventDefault})}break}}});_defineProperty(_assertThisInitialized(_this),"selectSuggestion",function(_ref4){var type=_ref4.type,text=_ref4.text,start=_ref4.start,end=_ref4.end;if(!_this.inputRef){return}var query=_this.getQueryString();var _this$inputRef2=_this.inputRef,selectionStart=_this$inputRef2.selectionStart,selectionEnd=_this$inputRef2.selectionEnd;if(selectionStart===null||selectionEnd===null){return}var value=query.substr(0,selectionStart)+query.substr(selectionEnd);var newQueryString=value.substr(0,start)+text+value.substr(end);_this.onQueryStringChange(newQueryString);if(type===recentSearchType){_this.setState({isSuggestionsVisible:false,index:null});_this.onSubmit({query:newQueryString,language:_this.props.query.language})}});_defineProperty(_assertThisInitialized(_this),"increaseLimit",function(){_this.setState({suggestionLimit:_this.state.suggestionLimit+50})});_defineProperty(_assertThisInitialized(_this),"incrementIndex",function(currentIndex){var nextIndex=currentIndex+1;if(currentIndex===null||nextIndex>=_this.state.suggestions.length){nextIndex=0}_this.setState({index:nextIndex})});_defineProperty(_assertThisInitialized(_this),"decrementIndex",function(currentIndex){var previousIndex=currentIndex-1;if(previousIndex<0){_this.setState({index:_this.state.suggestions.length-1})}else{_this.setState({index:previousIndex})}});_defineProperty(_assertThisInitialized(_this),"onSelectLanguage",function(language){(0,_kfetch.kfetch)({pathname:"/api/kibana/kql_opt_in_telemetry",method:"POST",body:JSON.stringify({opt_in:language==="kuery"})});_this.props.store.set("kibana.userQueryLanguage",language);var newQuery={query:"",language:language};_this.onChange(newQuery);_this.onSubmit(newQuery)});_defineProperty(_assertThisInitialized(_this),"onOutsideClick",function(){if(_this.state.isSuggestionsVisible){_this.setState({isSuggestionsVisible:false,index:null})}});_defineProperty(_assertThisInitialized(_this),"onClickSuggestion",function(suggestion){if(!_this.inputRef){return}_this.selectSuggestion(suggestion);_this.inputRef.focus()});_defineProperty(_assertThisInitialized(_this),"onMouseEnterSuggestion",function(index){_this.setState({index:index})});return _this}_createClass(QueryBarInputUI,[{key:"componentDidMount",value:function componentDidMount(){var parsedQuery=(0,_lib.fromUser)((0,_lib.toUser)(this.props.query.query));if(!(0,_lodash.isEqual)(this.props.query.query,parsedQuery)){this.onChange(_objectSpread({},this.props.query,{query:parsedQuery}))}this.persistedLog=this.props.persistedLog?this.props.persistedLog:(0,_get_query_log.getQueryLog)(this.props.uiSettings,this.props.appName,this.props.query.language);this.fetchIndexPatterns().then(this.updateSuggestions)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var parsedQuery=(0,_lib.fromUser)((0,_lib.toUser)(this.props.query.query));if(!(0,_lodash.isEqual)(this.props.query.query,parsedQuery)){this.onChange(_objectSpread({},this.props.query,{query:parsedQuery}))}this.persistedLog=this.props.persistedLog?this.props.persistedLog:(0,_get_query_log.getQueryLog)(this.props.uiSettings,this.props.appName,this.props.query.language);if(!(0,_lodash.isEqual)(prevProps.indexPatterns,this.props.indexPatterns)){this.fetchIndexPatterns().then(this.updateSuggestions)}else if(!(0,_lodash.isEqual)(prevProps.query,this.props.query)){this.updateSuggestions()}if(this.state.selectionStart!==null&&this.state.selectionEnd!==null){if(this.inputRef){this.inputRef.setSelectionRange(this.state.selectionStart,this.state.selectionEnd)}this.setState({selectionStart:null,selectionEnd:null})}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.updateSuggestions.cancel();this.componentIsUnmounting=true}},{key:"render",value:function render(){var _this2=this;var rest=(0,_lodash.omit)(this.props,["indexPatterns","intl","query","appName","disableAutoFocus","screenTitle","prepend","store","persistedLog","bubbleSubmitEvent","languageSwitcherPopoverAnchorPosition","onChange","onSubmit","uiSettings","savedObjectsClient"]);return _react.default.createElement(_eui.EuiOutsideClickDetector,{onOutsideClick:this.onOutsideClick},_react.default.createElement("div",{style:{position:"relative"},role:"combobox","aria-haspopup":"true","aria-expanded":this.state.isSuggestionsVisible,"aria-owns":"kbnTypeahead__items","aria-controls":"kbnTypeahead__items"},_react.default.createElement("div",{role:"search"},_react.default.createElement("div",{className:"kuiLocalSearchAssistedInput"},_react.default.createElement(_eui.EuiFieldText,_extends({placeholder:this.props.intl.formatMessage({id:"data.query.queryBar.searchInputPlaceholder",defaultMessage:"Search"}),value:this.getQueryString(),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onChange:this.onInputChange,onClick:this.onClickInput,fullWidth:true,autoFocus:!this.props.disableAutoFocus,inputRef:function inputRef(node){if(node){_this2.inputRef=node}},autoComplete:"off",spellCheck:false,"aria-label":this.props.screenTitle?this.props.intl.formatMessage({id:"data.query.queryBar.searchInputAriaLabel",defaultMessage:"You are on search box of {previouslyTranslatedPageTitle} page. Start typing to search and filter the {pageType}"},{previouslyTranslatedPageTitle:this.props.screenTitle,pageType:this.props.appName}):undefined,type:"text","data-test-subj":"queryInput","aria-autocomplete":"list","aria-controls":"kbnTypeahead__items","aria-activedescendant":this.state.isSuggestionsVisible?"suggestion-"+this.state.index:"",role:"textbox",prepend:this.props.prepend,append:_react.default.createElement(_language_switcher.QueryLanguageSwitcher,{language:this.props.query.language,anchorPosition:this.props.languageSwitcherPopoverAnchorPosition,onSelectLanguage:this.onSelectLanguage})},rest)))),_react.default.createElement(_suggestions_component.SuggestionsComponent,{show:this.state.isSuggestionsVisible,suggestions:this.state.suggestions.slice(0,this.state.suggestionLimit),index:this.state.index,onClick:this.onClickSuggestion,onMouseEnter:this.onMouseEnterSuggestion,loadMore:this.increaseLimit})))}}]);return QueryBarInputUI}(_react.Component);exports.QueryBarInputUI=QueryBarInputUI;var QueryBarInput=(0,_react2.injectI18n)(QueryBarInputUI);exports.QueryBarInput=QueryBarInput},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromUser=fromUser;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function fromUser(userInput){var matchAll="";if(_lodash.default.isObject(userInput)){return userInput}userInput=userInput||"";if(typeof userInput==="string"){var trimmedUserInput=userInput.trim();if(trimmedUserInput.length===0){return matchAll}if(trimmedUserInput[0]==="{"){try{return JSON.parse(trimmedUserInput)}catch(e){return userInput}}else{return userInput}}}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.toUser=toUser;var _angular=_interopRequireDefault(__webpack_require__(17));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function toUser(text){if(text==null){return""}if(_typeof(text)==="object"){if(text.match_all){return""}if(text.query_string){return toUser(text.query_string.query)}return _angular.default.toJson(text)}return""+text}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _field_list=__webpack_require__(1003);Object.keys(_field_list).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field_list[key]}})});var _field=__webpack_require__(551);Object.keys(_field).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Field=void 0;var _obj_define=__webpack_require__(1004);var _field_formats=__webpack_require__(32);var _notify=__webpack_require__(9);var _i18n=__webpack_require__(2);var _kbn_field_types=__webpack_require__(391);var _field_format=__webpack_require__(344);var _shorten_dotted_string=__webpack_require__(117);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Field=function Field(indexPattern,spec){var shortDotsEnable=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,Field);_defineProperty(this,"name",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"script",void 0);_defineProperty(this,"lang",void 0);_defineProperty(this,"count",void 0);_defineProperty(this,"esTypes",void 0);_defineProperty(this,"aggregatable",void 0);_defineProperty(this,"filterable",void 0);_defineProperty(this,"searchable",void 0);_defineProperty(this,"sortable",void 0);_defineProperty(this,"visualizable",void 0);_defineProperty(this,"scripted",void 0);_defineProperty(this,"parent",void 0);_defineProperty(this,"subType",void 0);_defineProperty(this,"displayName",void 0);_defineProperty(this,"format",void 0);_defineProperty(this,"routes",{edit:"/management/kibana/index_patterns/{{indexPattern.id}}/field/{{name}}"});_defineProperty(this,"$$spec",void 0);if(spec instanceof Field)spec=spec.$$spec;var obj=new _obj_define.ObjDefine(spec,Field.prototype);if(spec.name==="_source"){spec.type="_source"}var type=(0,_kbn_field_types.getKbnFieldType)(spec.type);if(spec.type&&!type){var title=_i18n.i18n.translate("data.indexPatterns.unknownFieldHeader",{values:{type:spec.type},defaultMessage:"Unknown field type {type}"});var text=_i18n.i18n.translate("data.indexPatterns.unknownFieldErrorMessage",{values:{name:spec.name,title:indexPattern.title},defaultMessage:"Field {name} in indexPattern {title} is using an unknown field type."});_notify.toastNotifications.addDanger({title:title,text:text})}if(!type)type=(0,_kbn_field_types.getKbnFieldType)("unknown");var format=spec.format;if(!format||!(format instanceof _field_format.FieldFormat)){format=indexPattern.fieldFormatMap[spec.name]||_field_formats.fieldFormats.getDefaultInstance(spec.type,spec.esTypes)}var indexed=!!spec.indexed;var scripted=!!spec.scripted;var searchable=!!spec.searchable||scripted;var aggregatable=!!spec.aggregatable||scripted;var readFromDocValues=!!spec.readFromDocValues&&!scripted;var sortable=spec.name==="_score"||(indexed||aggregatable)&&type.sortable;var filterable=spec.name==="_id"||scripted||(indexed||searchable)&&type.filterable;var visualizable=aggregatable;this.name="";obj.fact("name");this.type="";obj.fact("type");obj.fact("esTypes");obj.writ("count",spec.count||0);obj.fact("scripted",scripted);obj.writ("script",scripted?spec.script:null);obj.writ("lang",scripted?spec.lang||"painless":null);obj.fact("searchable",searchable);obj.fact("aggregatable",aggregatable);obj.fact("readFromDocValues",readFromDocValues);obj.comp("format",format);obj.comp("sortable",sortable);obj.comp("filterable",filterable);obj.comp("visualizable",visualizable);obj.comp("indexPattern",indexPattern);obj.comp("displayName",shortDotsEnable?(0,_shorten_dotted_string.shortenDottedString)(spec.name):spec.name);this.$$spec=spec;obj.comp("$$spec",spec);obj.writ("conflictDescriptions");obj.fact("parent");obj.fact("subType");return obj.create()};exports.Field=Field;Field.prototype.routes={edit:"/management/kibana/index_patterns/{{indexPattern.id}}/field/{{name}}"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.highlightTags=void 0;var highlightTags={pre:"@kibana-highlighted-field@",post:"@/kibana-highlighted-field@"};exports.highlightTags=highlightTags},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatHitProvider=formatHitProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var formattedCache=new WeakMap;var partialFormattedCache=new WeakMap;function formatHitProvider(indexPattern,defaultFormat){function convert(hit,val,fieldName){var type=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"html";var field=indexPattern.fields.byName[fieldName];if(!field)return defaultFormat.convert(val,type);var parsedUrl={origin:window.location.origin,pathname:window.location.pathname};return field.format.getConverterFor(type)(val,field,hit,parsedUrl)}function formatHit(hit){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"html";if(type==="text"){var flattened=indexPattern.flattenHit(hit);var result={};for(var _i=0,_Object$entries=Object.entries(flattened);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];result[key]=convert(hit,value,key,type)}return result}var cached=formattedCache.get(hit);if(cached){return cached}var partials=partialFormattedCache.get(hit)||{};partialFormattedCache.set(hit,partials);var cache={};formattedCache.set(hit,cache);_lodash.default.forOwn(indexPattern.flattenHit(hit),function(val,fieldName){if(!fieldName){return}var formatted=partials[fieldName]==null?convert(hit,val,fieldName):partials[fieldName];cache[fieldName]=partials[fieldName]=formatted});return cache}formatHit.formatField=function(hit,fieldName){var partials=partialFormattedCache.get(hit);if(partials&&partials[fieldName]!=null){return partials[fieldName]}if(!partials){partials={};partialFormattedCache.set(hit,partials)}var val=fieldName==="_source"?hit._source:indexPattern.flattenHit(hit)[fieldName];return convert(hit,val,fieldName)};return formatHit}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPattern=void 0;var _lodash=_interopRequireWildcard(__webpack_require__(1));var _i18n=__webpack_require__(2);var _react=__webpack_require__(5);var _eui=__webpack_require__(3);var _react2=_interopRequireDefault(__webpack_require__(0));var _chrome=_interopRequireDefault(__webpack_require__(7));var _errors=__webpack_require__(25);var _field_formats=__webpack_require__(32);var _mapping_setup=__webpack_require__(555);var _notify=__webpack_require__(9);var _saved_objects=__webpack_require__(36);var _errors2=__webpack_require__(404);var _fields=__webpack_require__(550);var _fields_fetcher=__webpack_require__(1011);var _utils=__webpack_require__(559);var _format_hit=__webpack_require__(553);var _flatten_hit=__webpack_require__(403);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MAX_ATTEMPTS_TO_RESOLVE_CONFLICTS=3;var type="index-pattern";var IndexPattern=function(){function IndexPattern(id,getConfig,savedObjectsClient,apiClient,patternCache){var _this=this;_classCallCheck(this,IndexPattern);_defineProperty(this,"id",void 0);_defineProperty(this,"title","");_defineProperty(this,"type",void 0);_defineProperty(this,"fieldFormatMap",void 0);_defineProperty(this,"typeMeta",void 0);_defineProperty(this,"fields",void 0);_defineProperty(this,"timeFieldName",void 0);_defineProperty(this,"intervalName",void 0);_defineProperty(this,"formatHit",void 0);_defineProperty(this,"formatField",void 0);_defineProperty(this,"flattenHit",void 0);_defineProperty(this,"metaFields",void 0);_defineProperty(this,"version",void 0);_defineProperty(this,"savedObjectsClient",void 0);_defineProperty(this,"patternCache",void 0);_defineProperty(this,"getConfig",void 0);_defineProperty(this,"sourceFilters",void 0);_defineProperty(this,"originalBody",{});_defineProperty(this,"fieldsFetcher",void 0);_defineProperty(this,"shortDotsEnable",false);_defineProperty(this,"mapping",(0,_mapping_setup.expandShorthand)({title:"text",timeFieldName:"keyword",intervalName:"keyword",fields:"json",sourceFilters:"json",fieldFormatMap:{type:"text",_serialize:function _serialize(){var map=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var serialized=_lodash.default.transform(map,_this.serializeFieldFormatMap);return _lodash.default.isEmpty(serialized)?undefined:JSON.stringify(serialized)},_deserialize:function _deserialize(){var map=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"{}";return _lodash.default.mapValues(JSON.parse(map),function(mapping){return _this.deserializeFieldFormatMap(mapping)})}},type:"keyword",typeMeta:"json"}));this.id=id;this.savedObjectsClient=savedObjectsClient;this.patternCache=patternCache;this.getConfig=getConfig;this.shortDotsEnable=this.getConfig("shortDots:enable");this.metaFields=this.getConfig("metaFields");this.fields=new _fields.FieldList(this,[],this.shortDotsEnable);this.fieldsFetcher=(0,_fields_fetcher.createFieldsFetcher)(this,apiClient,this.getConfig("metaFields"));this.flattenHit=(0,_flatten_hit.flattenHitWrapper)(this,this.getConfig("metaFields"));this.formatHit=(0,_format_hit.formatHitProvider)(this,_field_formats.fieldFormats.getDefaultInstance("string"));this.formatField=this.formatHit.formatField}_createClass(IndexPattern,[{key:"serializeFieldFormatMap",value:function serializeFieldFormatMap(flat,format,field){if(format&&field){flat[field]=format}}},{key:"deserializeFieldFormatMap",value:function deserializeFieldFormatMap(mapping){var FieldFormat=_field_formats.fieldFormats.byId[mapping.id];return FieldFormat&&new FieldFormat(mapping.params,this.getConfig)}},{key:"initFields",value:function initFields(input){var newValue=input||this.fields;this.fields=new _fields.FieldList(this,newValue,this.shortDotsEnable)}},{key:"isFieldRefreshRequired",value:function isFieldRefreshRequired(){if(!this.fields){return true}return this.fields.every(function(field){var hasFieldCaps="aggregatable"in field&&"searchable"in field;var hasDocValuesFlag="readFromDocValues"in field;return!hasFieldCaps||!hasDocValuesFlag})}},{key:"indexFields",value:function(){var _indexFields=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var forceFieldRefresh,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:forceFieldRefresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(this.id){_context.next=3;break}return _context.abrupt("return");case 3:if(!(forceFieldRefresh||this.isFieldRefreshRequired())){_context.next=6;break}_context.next=6;return this.refreshFields();case 6:this.initFields();case 7:case"end":return _context.stop()}}},_callee,this)}));function indexFields(){return _indexFields.apply(this,arguments)}return indexFields}()},{key:"updateFromElasticSearch",value:function(){var _updateFromElasticSearch=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(response){var forceFieldRefresh,warningTitle,warningText,$injector,kbnUrl,_args2=arguments;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:forceFieldRefresh=_args2.length>1&&_args2[1]!==undefined?_args2[1]:false;if(response.found){_context2.next=3;break}throw new _errors.SavedObjectNotFound(type,this.id,"#/management/kibana/index_pattern");case 3:_lodash.default.forOwn(this.mapping,function(fieldMapping,name){if(!fieldMapping._deserialize||!name){return}response._source[name]=fieldMapping._deserialize(response._source[name])});_lodash.default.assign(this,response._source);if(!this.title&&this.id){this.title=this.id}if(!this.isUnsupportedTimePattern()){_context2.next=14;break}warningTitle=_i18n.i18n.translate("data.indexPatterns.warningTitle",{defaultMessage:"Support for time interval index patterns removed"});warningText=_i18n.i18n.translate("data.indexPatterns.warningText",{defaultMessage:"Currently querying all indices matching {index}. {title} should be migrated to a wildcard-based index pattern.",values:{title:this.title,index:this.getIndex()}});_context2.next=11;return _chrome.default.dangerouslyGetActiveInjector();case 11:$injector=_context2.sent;kbnUrl=$injector.get("kbnUrl");_notify.toastNotifications.addWarning({title:warningTitle,text:_react2.default.createElement("div",null,_react2.default.createElement("p",null,warningText),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{size:"s",href:kbnUrl.getRouteHref(this,"edit")},_react2.default.createElement(_react.FormattedMessage,{id:"data.indexPatterns.editIndexPattern",defaultMessage:"Edit index pattern"})))))});case 14:return _context2.abrupt("return",this.indexFields(forceFieldRefresh));case 15:case"end":return _context2.stop()}}},_callee2,this)}));function updateFromElasticSearch(_x){return _updateFromElasticSearch.apply(this,arguments)}return updateFromElasticSearch}()},{key:"getComputedFields",value:function getComputedFields(){var scriptFields={};if(!this.fields){return{storedFields:["*"],scriptFields:scriptFields,docvalueFields:[]}}var docvalueFields=(0,_lodash.reject)(this.fields.byType.date,"scripted").map(function(dateField){return{field:dateField.name,format:dateField.esTypes&&dateField.esTypes.indexOf("date_nanos")!==-1?"strict_date_time":"date_time"}});(0,_lodash.each)(this.getScriptedFields(),function(field){scriptFields[field.name]={script:{source:field.script,lang:field.lang}}});return{storedFields:["*"],scriptFields:scriptFields,docvalueFields:docvalueFields}}},{key:"init",value:function(){var _init=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var forceFieldRefresh,savedObject,response,_args3=arguments;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:forceFieldRefresh=_args3.length>0&&_args3[0]!==undefined?_args3[0]:false;if(this.id){_context3.next=3;break}return _context3.abrupt("return",this);case 3:_context3.next=5;return this.savedObjectsClient.get(type,this.id);case 5:savedObject=_context3.sent;this.version=savedObject._version;response={_id:savedObject.id,_type:savedObject.type,_source:_lodash.default.cloneDeep(savedObject.attributes),found:savedObject._version?true:false};this.originalBody=this.prepBody();_context3.next=11;return this.updateFromElasticSearch(response,forceFieldRefresh);case 11:this.originalBody=this.prepBody();return _context3.abrupt("return",this);case 13:case"end":return _context3.stop()}}},_callee3,this)}));function init(){return _init.apply(this,arguments)}return init}()},{key:"migrate",value:function migrate(newTitle){var _this2=this;return this.savedObjectsClient.update(type,this.id,{title:newTitle,intervalName:null}).then(function(_ref){var _ref$attributes=_ref.attributes,title=_ref$attributes.title,intervalName=_ref$attributes.intervalName;_this2.title=title;_this2.intervalName=intervalName}).then(function(){return _this2})}},{key:"getSourceFiltering",value:function getSourceFiltering(){return{excludes:this.sourceFilters&&this.sourceFilters.map(function(filter){return filter.value})||[]}}},{key:"addScriptedField",value:function(){var _addScriptedField=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(name,script){var fieldType,lang,scriptedFields,names,_args4=arguments;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fieldType=_args4.length>2&&_args4[2]!==undefined?_args4[2]:"string";lang=_args4.length>3?_args4[3]:undefined;scriptedFields=this.getScriptedFields();names=_lodash.default.pluck(scriptedFields,"name");if(!_lodash.default.contains(names,name)){_context4.next=6;break}throw new _errors.DuplicateField(name);case 6:this.fields.push(new _fields.Field(this,{name:name,script:script,fieldType:fieldType,scripted:true,lang:lang,aggregatable:true,filterable:true,searchable:true}));_context4.next=9;return this.save();case 9:case"end":return _context4.stop()}}},_callee4,this)}));function addScriptedField(_x2,_x3){return _addScriptedField.apply(this,arguments)}return addScriptedField}()},{key:"removeScriptedField",value:function removeScriptedField(name){var fieldIndex=_lodash.default.findIndex(this.fields,{name:name,scripted:true});if(fieldIndex>-1){this.fields.splice(fieldIndex,1);delete this.fieldFormatMap[name];return this.save()}}},{key:"popularizeField",value:function(){var _popularizeField=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(fieldName){var unit,field,count,_args5=arguments;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:unit=_args5.length>1&&_args5[1]!==undefined?_args5[1]:1;field=this.fields.byName[fieldName];if(field){_context5.next=4;break}return _context5.abrupt("return");case 4:count=Math.max((field.count||0)+unit,0);if(!(field.count===count)){_context5.next=7;break}return _context5.abrupt("return");case 7:field.count=count;_context5.next=10;return this.save();case 10:case"end":return _context5.stop()}}},_callee5,this)}));function popularizeField(_x4){return _popularizeField.apply(this,arguments)}return popularizeField}()},{key:"getNonScriptedFields",value:function getNonScriptedFields(){return _lodash.default.where(this.fields,{scripted:false})}},{key:"getScriptedFields",value:function getScriptedFields(){return _lodash.default.where(this.fields,{scripted:true})}},{key:"getIndex",value:function getIndex(){if(!this.isUnsupportedTimePattern()){return this.title}var regex=/\[[^\]]*]/g;var splits=this.title.split(regex);var matches=this.title.match(regex)||[];return splits.map(function(split,i){var match=i>=matches.length?"":matches[i].replace(/[\[\]]/g,"");return"".concat(split.length?"*":"").concat(match)}).join("")}},{key:"isUnsupportedTimePattern",value:function isUnsupportedTimePattern(){return!!this.intervalName}},{key:"isTimeBased",value:function isTimeBased(){return!!this.timeFieldName&&(!this.fields||!!this.getTimeField())}},{key:"isTimeNanosBased",value:function isTimeNanosBased(){var timeField=this.getTimeField();return timeField&&timeField.esTypes&&timeField.esTypes.indexOf("date_nanos")!==-1}},{key:"isTimeBasedWildcard",value:function isTimeBasedWildcard(){return this.isTimeBased()&&this.isWildcard()}},{key:"getTimeField",value:function getTimeField(){if(!this.timeFieldName||!this.fields||!this.fields.byName)return;return this.fields.byName[this.timeFieldName]}},{key:"getFieldByName",value:function getFieldByName(name){if(!this.fields||!this.fields.byName)return;return this.fields.byName[name]}},{key:"isWildcard",value:function isWildcard(){return _lodash.default.includes(this.title,"*")}},{key:"prepBody",value:function prepBody(){var _this3=this;var body={};_lodash.default.forOwn(this.mapping,function(fieldMapping,fieldName){if(!fieldName||_this3[fieldName]==null)return;body[fieldName]=fieldMapping._serialize?fieldMapping._serialize(_this3[fieldName]):_this3[fieldName]});return body}},{key:"create",value:function(){var _create2=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var _this4=this;var allowOverride,_create,potentialDuplicateByTitle,_args7=arguments;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:allowOverride=_args7.length>0&&_args7[0]!==undefined?_args7[0]:false;_create=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(duplicateId){var duplicatePattern,body,response;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!duplicateId){_context6.next=4;break}duplicatePattern=new IndexPattern(duplicateId,_this4.getConfig,_this4.savedObjectsClient,_this4.patternCache,_this4.fieldsFetcher);_context6.next=4;return duplicatePattern.destroy();case 4:body=_this4.prepBody();_context6.next=7;return _this4.savedObjectsClient.create(type,body,{id:_this4.id});case 7:response=_context6.sent;_this4.id=response.id;return _context6.abrupt("return",response.id);case 10:case"end":return _context6.stop()}}},_callee6)}));return function _create(_x5){return _ref2.apply(this,arguments)}}();_context7.next=4;return(0,_saved_objects.findObjectByTitle)(this.savedObjectsClient,type,this.title);case 4:potentialDuplicateByTitle=_context7.sent;if(potentialDuplicateByTitle){_context7.next=9;break}_context7.next=8;return _create();case 8:return _context7.abrupt("return",_context7.sent);case 9:if(allowOverride){_context7.next=11;break}return _context7.abrupt("return",false);case 11:_context7.next=13;return _create(potentialDuplicateByTitle.id);case 13:return _context7.abrupt("return",_context7.sent);case 14:case"end":return _context7.stop()}}},_callee7,this)}));function create(){return _create2.apply(this,arguments)}return create}()},{key:"save",value:function(){var _save=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var _this5=this;var saveAttempts,body,originalChangedKeys,_args8=arguments;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:saveAttempts=_args8.length>0&&_args8[0]!==undefined?_args8[0]:0;if(this.id){_context8.next=3;break}return _context8.abrupt("return");case 3:body=this.prepBody();originalChangedKeys=Object.keys(body).filter(function(key){return body[key]!==_this5.originalBody[key]});return _context8.abrupt("return",this.savedObjectsClient.update(type,this.id,body,{version:this.version}).then(function(resp){_this5.id=resp.id;_this5.version=resp._version}).catch(function(err){if(_lodash.default.get(err,"res.status")===409&&saveAttempts++<MAX_ATTEMPTS_TO_RESOLVE_CONFLICTS){var samePattern=new IndexPattern(_this5.id,_this5.getConfig,_this5.savedObjectsClient,_this5.patternCache,_this5.fieldsFetcher);return samePattern.init().then(function(){var updatedBody=samePattern.prepBody();var serverChangedKeys=Object.keys(updatedBody).filter(function(key){return updatedBody[key]!==body[key]&&_this5.originalBody[key]!==updatedBody[key]});var unresolvedCollision=false;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=originalChangedKeys[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var originalKey=_step.value;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=serverChangedKeys[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var serverKey=_step2.value;if(originalKey===serverKey){unresolvedCollision=true;break}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}if(unresolvedCollision){var message=_i18n.i18n.translate("data.indexPatterns.unableWriteLabel",{defaultMessage:"Unable to write index pattern! Refresh the page to get the most up to date changes for this index pattern."});_notify.toastNotifications.addDanger(message);throw err}serverChangedKeys.forEach(function(key){_this5[key]=samePattern[key]});_this5.version=samePattern.version;_this5.patternCache.clear(_this5.id);return _this5.save(saveAttempts)})}throw err}));case 6:case"end":return _context8.stop()}}},_callee8,this)}));function save(){return _save.apply(this,arguments)}return save}()},{key:"_fetchFields",value:function(){var _fetchFields2=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){var fields,scripted,all;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.fieldsFetcher.fetch(this);case 2:fields=_context9.sent;scripted=this.getScriptedFields();all=fields.concat(scripted);_context9.next=7;return this.initFields(all);case 7:case"end":return _context9.stop()}}},_callee9,this)}));function _fetchFields(){return _fetchFields2.apply(this,arguments)}return _fetchFields}()},{key:"refreshFields",value:function refreshFields(){var _this6=this;return this._fetchFields().then(function(){return _this6.save()}).catch(function(err){if(err instanceof _errors2.IndexPatternMissingIndices){_notify.toastNotifications.addDanger(err.message);return[]}_notify.toastNotifications.addError(err,{title:_i18n.i18n.translate("data.indexPatterns.fetchFieldErrorTitle",{defaultMessage:"Error fetching fields"})});throw err})}},{key:"toJSON",value:function toJSON(){return this.id}},{key:"toString",value:function toString(){return""+this.toJSON()}},{key:"destroy",value:function destroy(){this.patternCache.clear(this.id);if(this.id){return this.savedObjectsClient.delete(type,this.id)}}},{key:"routes",get:function get(){return(0,_utils.getRoutes)()}}]);return IndexPattern}();exports.IndexPattern=IndexPattern},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.expandShorthand=void 0;var _lodash=__webpack_require__(1);var json={_serialize:function _serialize(val){if(val!=null)return JSON.stringify(val)},_deserialize:function _deserialize(val){if(val!=null)return JSON.parse(val)}};var expandShorthand=function expandShorthand(sh){return(0,_lodash.mapValues)(sh||{},function(val){if(typeof val==="string")val={type:val};if(val.type==="json"){val.type="text";val._serialize=json._serialize;val._deserialize=json._deserialize}return val})};exports.expandShorthand=expandShorthand},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsClientProvider=SavedObjectsClientProvider;var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SavedObjectsClientProvider(Promise){var savedObjectsClient=_chrome.default.getSavedObjectsClient();return{create:function create(){return Promise.resolve(savedObjectsClient.create.apply(savedObjectsClient,arguments))},bulkCreate:function bulkCreate(){return Promise.resolve(savedObjectsClient.bulkCreate.apply(savedObjectsClient,arguments))},delete:function _delete(){return Promise.resolve(savedObjectsClient.delete.apply(savedObjectsClient,arguments))},find:function find(){return Promise.resolve(savedObjectsClient.find.apply(savedObjectsClient,arguments))},get:function get(){return Promise.resolve(savedObjectsClient.get.apply(savedObjectsClient,arguments))},bulkGet:function bulkGet(){return Promise.resolve(savedObjectsClient.bulkGet.apply(savedObjectsClient,arguments))},update:function update(){return Promise.resolve(savedObjectsClient.update.apply(savedObjectsClient,arguments))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringUtils=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var StringUtils=function(){function StringUtils(){_classCallCheck(this,StringUtils)}_createClass(StringUtils,null,[{key:"upperFirst",value:function upperFirst(str){return str?str.charAt(0).toUpperCase()+str.slice(1):""}}]);return StringUtils}();exports.StringUtils=StringUtils},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findObjectByTitle=findObjectByTitle;var _lodash=__webpack_require__(1);function findObjectByTitle(savedObjectsClient,type,title){if(!title){return Promise.resolve()}return savedObjectsClient.find({type:type,perPage:10,search:'"'.concat(title,'"'),searchFields:["title"],fields:["title"]}).then(function(response){var match=(0,_lodash.find)(response.savedObjects,function(obj){return obj.get("title").toLowerCase()===title.toLowerCase()});return match})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateIndexPattern=validateIndexPattern;exports.isFilterable=isFilterable;exports.getFromSavedObject=getFromSavedObject;exports.getRoutes=getRoutes;exports.mockIndexPattern=exports.mockFields=exports.INDEX_PATTERN_ILLEGAL_CHARACTERS=exports.INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE=exports.CONTAINS_SPACES=exports.ILLEGAL_CHARACTERS=void 0;var _lodash=__webpack_require__(1);var _kbn_field_types=__webpack_require__(391);var ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS";exports.ILLEGAL_CHARACTERS=ILLEGAL_CHARACTERS;var CONTAINS_SPACES="CONTAINS_SPACES";exports.CONTAINS_SPACES=CONTAINS_SPACES;var INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE=["\\","/","?",'"',"<",">","|"];exports.INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE=INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE;var INDEX_PATTERN_ILLEGAL_CHARACTERS=INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE.concat(" ");exports.INDEX_PATTERN_ILLEGAL_CHARACTERS=INDEX_PATTERN_ILLEGAL_CHARACTERS;function findIllegalCharacters(indexPattern){var illegalCharacters=INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE.reduce(function(chars,char){if(indexPattern.includes(char)){chars.push(char)}return chars},[]);return illegalCharacters}function indexPatternContainsSpaces(indexPattern){return indexPattern.includes(" ")}function validateIndexPattern(indexPattern){var errors={};var illegalCharacters=findIllegalCharacters(indexPattern);if(illegalCharacters.length){errors[ILLEGAL_CHARACTERS]=illegalCharacters}if(indexPatternContainsSpaces(indexPattern)){errors[CONTAINS_SPACES]=true}return errors}var filterableTypes=_kbn_field_types.KBN_FIELD_TYPES.filter(function(type){return type.filterable}).map(function(type){return type.name});function isFilterable(field){return field.name==="_id"||field.scripted||field.searchable&&filterableTypes.includes(field.type)}function getFromSavedObject(savedObject){if((0,_lodash.get)(savedObject,"attributes.fields")===undefined){return}return{id:savedObject.id,fields:JSON.parse(savedObject.attributes.fields),title:savedObject.attributes.title}}function getRoutes(){return{edit:"/management/kibana/index_patterns/{{id}}",addField:"/management/kibana/index_patterns/{{id}}/create-field",indexedFields:"/management/kibana/index_patterns/{{id}}?_a=(tab:indexedFields)",scriptedFields:"/management/kibana/index_patterns/{{id}}?_a=(tab:scriptedFields)",sourceFilters:"/management/kibana/index_patterns/{{id}}?_a=(tab:sourceFilters)"}}var mockFields=[{name:"machine.os",esTypes:["text"],type:"string",aggregatable:false,searchable:false,filterable:true},{name:"machine.os.raw",type:"string",esTypes:["keyword"],aggregatable:true,searchable:true,filterable:true},{name:"not.filterable",type:"string",esTypes:["text"],aggregatable:true,searchable:false,filterable:false},{name:"bytes",type:"number",esTypes:["long"],aggregatable:true,searchable:true,filterable:true},{name:"@timestamp",type:"date",esTypes:["date"],aggregatable:true,searchable:true,filterable:true},{name:"clientip",type:"ip",esTypes:["ip"],aggregatable:true,searchable:true,filterable:true},{name:"bool.field",type:"boolean",esTypes:["boolean"],aggregatable:true,searchable:true,filterable:true}];exports.mockFields=mockFields;var mockIndexPattern={id:"logstash-*",fields:mockFields,title:"logstash-*",timeFieldName:"@timestamp"};exports.mockIndexPattern=mockIndexPattern},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsApiClient=void 0;var _kfetch=__webpack_require__(39);var _errors=__webpack_require__(404);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function request(url,query){return(0,_kfetch.kfetch)({method:"GET",pathname:url,query:query}).catch(function(resp){if(resp.body.statusCode===404&&resp.body.statuscode==="no_matching_indices"){throw new _errors.IndexPatternMissingIndices(resp.body.message)}throw new Error(resp.body.message||resp.body.error||"".concat(resp.body.statusCode," Response"))})}var API_BASE_URL="/api/index_patterns/";var IndexPatternsApiClient=function(){function IndexPatternsApiClient(){_classCallCheck(this,IndexPatternsApiClient)}_createClass(IndexPatternsApiClient,[{key:"_getUrl",value:function _getUrl(path){return API_BASE_URL+path.filter(Boolean).map(encodeURIComponent).join("/")}},{key:"getFieldsForTimePattern",value:function getFieldsForTimePattern(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var pattern=options.pattern,lookBack=options.lookBack,metaFields=options.metaFields;var url=this._getUrl(["_fields_for_time_pattern"]);return request(url,{pattern:pattern,look_back:lookBack,meta_fields:metaFields}).then(function(resp){return resp.fields})}},{key:"getFieldsForWildcard",value:function getFieldsForWildcard(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var pattern=options.pattern,metaFields=options.metaFields,type=options.type,params=options.params;var url;var query;if(type){url=this._getUrl([type,"_fields_for_wildcard"]);query={pattern:pattern,meta_fields:metaFields,params:JSON.stringify(params)}}else{url=this._getUrl(["_fields_for_wildcard"]);query={pattern:pattern,meta_fields:metaFields}}return request(url,query).then(function(resp){return resp.fields})}}]);return IndexPatternsApiClient}();exports.IndexPatternsApiClient=IndexPatternsApiClient},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FilterManager",{enumerable:true,get:function get(){return _filter_manager.FilterManager}});Object.defineProperty(exports,"FilterStateManager",{enumerable:true,get:function get(){return _filter_state_manager.FilterStateManager}});Object.defineProperty(exports,"uniqFilters",{enumerable:true,get:function get(){return _uniq_filters.uniqFilters}});Object.defineProperty(exports,"onlyDisabledFiltersChanged",{enumerable:true,get:function get(){return _only_disabled.onlyDisabledFiltersChanged}});var _filter_manager=__webpack_require__(562);var _filter_state_manager=__webpack_require__(1031);var _uniq_filters=__webpack_require__(565);var _only_disabled=__webpack_require__(566)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterManager=void 0;var _esQuery=__webpack_require__(20);var _lodash=_interopRequireDefault(__webpack_require__(1));var _rxjs=__webpack_require__(16);var _compare_filters=__webpack_require__(563);var _map_and_flatten_filters=__webpack_require__(564);var _uniq_filters=__webpack_require__(565);var _extract_time_filter=__webpack_require__(1029);var _change_time_filter=__webpack_require__(1030);var _only_disabled=__webpack_require__(566);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterManager=function(){function FilterManager(indexPatterns,uiSettings){_classCallCheck(this,FilterManager);_defineProperty(this,"indexPatterns",void 0);_defineProperty(this,"filters",[]);_defineProperty(this,"updated$",new _rxjs.Subject);_defineProperty(this,"fetch$",new _rxjs.Subject);_defineProperty(this,"uiSettings",void 0);this.indexPatterns=indexPatterns;this.uiSettings=uiSettings}_createClass(FilterManager,[{key:"mergeIncomingFilters",value:function mergeIncomingFilters(partitionedFilters){var globalFilters=partitionedFilters.globalFilters;var appFilters=partitionedFilters.appFilters;_lodash.default.each(appFilters,function(filter,i){var match=_lodash.default.find(globalFilters,function(globalFilter){return(0,_compare_filters.compareFilters)(globalFilter,filter)});if(!match)return;_lodash.default.assign(match.meta,filter.meta);appFilters.splice(i,1)});return FilterManager.mergeFilters(appFilters,globalFilters)}},{key:"handleStateUpdate",value:function handleStateUpdate(newFilters){newFilters.sort(function(_ref,_ref2){var a=_ref.$state;var b=_ref2.$state;return a.store===_esQuery.FilterStateStore.GLOBAL_STATE&&b.store!==_esQuery.FilterStateStore.GLOBAL_STATE?-1:1});var filtersUpdated=!_lodash.default.isEqual(this.filters,newFilters);var updatedOnlyDisabledFilters=(0,_only_disabled.onlyDisabledFiltersChanged)(newFilters,this.filters);this.filters=newFilters;if(filtersUpdated){this.updated$.next();if(!updatedOnlyDisabledFilters){this.fetch$.next()}}}},{key:"getFilters",value:function getFilters(){return _lodash.default.cloneDeep(this.filters)}},{key:"getAppFilters",value:function getAppFilters(){var _this$getPartitionedF=this.getPartitionedFilters(),appFilters=_this$getPartitionedF.appFilters;return appFilters}},{key:"getGlobalFilters",value:function getGlobalFilters(){var _this$getPartitionedF2=this.getPartitionedFilters(),globalFilters=_this$getPartitionedF2.globalFilters;return globalFilters}},{key:"getPartitionedFilters",value:function getPartitionedFilters(){return FilterManager.partitionFilters(this.getFilters())}},{key:"getUpdates$",value:function getUpdates$(){return this.updated$.asObservable()}},{key:"getFetches$",value:function getFetches$(){return this.fetch$.asObservable()}},{key:"addFilters",value:function(){var _addFilters=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filters,pinFilterStatus){var _currentFilters$appFi,_currentFilters$globa;var store,mappedFilters,newPartitionedFilters,currentFilters,newFilters;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!Array.isArray(filters)){filters=[filters]}if(!(filters.length===0)){_context.next=3;break}return _context.abrupt("return");case 3:if(pinFilterStatus===undefined){pinFilterStatus=this.uiSettings.get("filters:pinnedByDefault")}store=pinFilterStatus?_esQuery.FilterStateStore.GLOBAL_STATE:_esQuery.FilterStateStore.APP_STATE;FilterManager.setFiltersStore(filters,store);_context.next=8;return(0,_map_and_flatten_filters.mapAndFlattenFilters)(this.indexPatterns,filters);case 8:mappedFilters=_context.sent;newPartitionedFilters=FilterManager.partitionFilters(mappedFilters);currentFilters=this.getPartitionedFilters();(_currentFilters$appFi=currentFilters.appFilters).push.apply(_currentFilters$appFi,_toConsumableArray(newPartitionedFilters.appFilters));(_currentFilters$globa=currentFilters.globalFilters).push.apply(_currentFilters$globa,_toConsumableArray(newPartitionedFilters.globalFilters));newFilters=this.mergeIncomingFilters(currentFilters);this.handleStateUpdate(newFilters);case 15:case"end":return _context.stop()}}},_callee,this)}));function addFilters(_x,_x2){return _addFilters.apply(this,arguments)}return addFilters}()},{key:"setFilters",value:function(){var _setFilters=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(newFilters){var mappedFilters,newPartitionedFilters,mergedFilters;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_map_and_flatten_filters.mapAndFlattenFilters)(this.indexPatterns,newFilters);case 2:mappedFilters=_context2.sent;newPartitionedFilters=FilterManager.partitionFilters(mappedFilters);mergedFilters=this.mergeIncomingFilters(newPartitionedFilters);this.handleStateUpdate(mergedFilters);case 6:case"end":return _context2.stop()}}},_callee2,this)}));function setFilters(_x3){return _setFilters.apply(this,arguments)}return setFilters}()},{key:"removeFilter",value:function removeFilter(filter){var filterIndex=_lodash.default.findIndex(this.filters,function(item){return _lodash.default.isEqual(item.meta,filter.meta)&&_lodash.default.isEqual(item.query,filter.query)});if(filterIndex>=0){var newFilters=_lodash.default.cloneDeep(this.filters);newFilters.splice(filterIndex,1);this.handleStateUpdate(newFilters)}}},{key:"removeAll",value:function(){var _removeAll=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.setFilters([]);case 2:case"end":return _context3.stop()}}},_callee3,this)}));function removeAll(){return _removeAll.apply(this,arguments)}return removeAll}()},{key:"addFiltersAndChangeTimeFilter",value:function(){var _addFiltersAndChangeTimeFilter=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(filters){var timeFilter;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return(0,_extract_time_filter.extractTimeFilter)(this.indexPatterns,filters);case 2:timeFilter=_context4.sent;if(timeFilter)(0,_change_time_filter.changeTimeFilter)(timeFilter);return _context4.abrupt("return",this.addFilters(filters.filter(function(filter){return filter!==timeFilter})));case 5:case"end":return _context4.stop()}}},_callee4,this)}));function addFiltersAndChangeTimeFilter(_x4){return _addFiltersAndChangeTimeFilter.apply(this,arguments)}return addFiltersAndChangeTimeFilter}()}],[{key:"mergeFilters",value:function mergeFilters(appFilters,globalFilters){return(0,_uniq_filters.uniqFilters)(appFilters.reverse().concat(globalFilters.reverse())).reverse()}},{key:"partitionFilters",value:function partitionFilters(filters){var _$partition=_lodash.default.partition(filters,_esQuery.isFilterPinned),_$partition2=_slicedToArray(_$partition,2),globalFilters=_$partition2[0],appFilters=_$partition2[1];return{globalFilters:globalFilters,appFilters:appFilters}}},{key:"setFiltersStore",value:function setFiltersStore(filters,store){_lodash.default.map(filters,function(filter){if(filter.$state===undefined){filter.$state={store:store}}})}}]);return FilterManager}();exports.FilterManager=FilterManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.compareFilters=compareFilters;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var excludedAttributes;var comparators;function compareFilters(first,second,comparatorOptions){excludedAttributes=["$$hashKey","meta"];comparators=_lodash.default.defaults(comparatorOptions||{},{state:false,negate:false,disabled:false});if(!comparators.state)excludedAttributes.push("$state");return _lodash.default.isEqual(mapFilter(first),mapFilter(second))}function mapFilter(filter){var cleaned=_lodash.default.omit(filter,excludedAttributes);if(comparators.negate)cleaned.negate=filter.meta&&!!filter.meta.negate;if(comparators.disabled)cleaned.disabled=filter.meta&&!!filter.meta.disabled;return cleaned}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapAndFlattenFilters=mapAndFlattenFilters;var _lodash=_interopRequireDefault(__webpack_require__(1));var _map_filter=__webpack_require__(1016);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function mapAndFlattenFilters(indexPatterns,filters){var flattened=(0,_lodash.default)(filters).flatten().compact().map(function(item){return(0,_map_filter.mapFilter)(indexPatterns,item)}).value();return Promise.all(flattened)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uniqFilters=uniqFilters;var _lodash=_interopRequireDefault(__webpack_require__(1));var _dedup_filters=__webpack_require__(1028);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function uniqFilters(filters,comparatorOptions){var results=[];_lodash.default.each(filters,function(filter){results=_lodash.default.union(results,(0,_dedup_filters.dedupFilters)(results,[filter],comparatorOptions))});return results}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onlyDisabledFiltersChanged=onlyDisabledFiltersChanged;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isEnabled=function isEnabled(filter){return filter&&filter.meta&&!filter.meta.disabled};function onlyDisabledFiltersChanged(newFilters,oldFilters){var newEnabledFilters=_lodash.default.filter(newFilters||[],isEnabled);var oldEnabledFilters=_lodash.default.filter(oldFilters||[],isEnabled);return _lodash.default.isEqual(oldEnabledFilters,newEnabledFilters)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterEditor=void 0;var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react=__webpack_require__(5);var _lodash=__webpack_require__(1);var _react2=_interopRequireWildcard(__webpack_require__(0));var _generic_combo_box=__webpack_require__(406);var _filter_editor_utils=__webpack_require__(568);var _phrase_value_input=__webpack_require__(1034);var _phrases_values_input=__webpack_require__(1037);var _range_value_input=__webpack_require__(1038);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterEditorUI=function(_Component){_inherits(FilterEditorUI,_Component);function FilterEditorUI(props){var _this;_classCallCheck(this,FilterEditorUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(FilterEditorUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"toggleCustomEditor",function(){var isCustomEditorOpen=!_this.state.isCustomEditorOpen;_this.setState({isCustomEditorOpen:isCustomEditorOpen})});_defineProperty(_assertThisInitialized(_this),"onIndexPatternChange",function(_ref){var _ref2=_slicedToArray(_ref,1),selectedIndexPattern=_ref2[0];var selectedField=undefined;var selectedOperator=undefined;var params=undefined;_this.setState({selectedIndexPattern:selectedIndexPattern,selectedField:selectedField,selectedOperator:selectedOperator,params:params})});_defineProperty(_assertThisInitialized(_this),"onFieldChange",function(_ref3){var _ref4=_slicedToArray(_ref3,1),selectedField=_ref4[0];var selectedOperator=undefined;var params=undefined;_this.setState({selectedField:selectedField,selectedOperator:selectedOperator,params:params})});_defineProperty(_assertThisInitialized(_this),"onOperatorChange",function(_ref5){var _ref6=_slicedToArray(_ref5,1),selectedOperator=_ref6[0];var params=(0,_lodash.get)(_this.state.selectedOperator,"type")===(0,_lodash.get)(selectedOperator,"type")?_this.state.params:undefined;_this.setState({selectedOperator:selectedOperator,params:params})});_defineProperty(_assertThisInitialized(_this),"onCustomLabelSwitchChange",function(event){var useCustomLabel=event.target.checked;var customLabel=event.target.checked?"":null;_this.setState({useCustomLabel:useCustomLabel,customLabel:customLabel})});_defineProperty(_assertThisInitialized(_this),"onCustomLabelChange",function(event){var customLabel=event.target.value;_this.setState({customLabel:customLabel})});_defineProperty(_assertThisInitialized(_this),"onParamsChange",function(params){_this.setState({params:params})});_defineProperty(_assertThisInitialized(_this),"onQueryDslChange",function(queryDsl){_this.setState({queryDsl:queryDsl})});_defineProperty(_assertThisInitialized(_this),"onSubmit",function(){var _this$state=_this.state,indexPattern=_this$state.selectedIndexPattern,field=_this$state.selectedField,operator=_this$state.selectedOperator,params=_this$state.params,useCustomLabel=_this$state.useCustomLabel,customLabel=_this$state.customLabel,isCustomEditorOpen=_this$state.isCustomEditorOpen,queryDsl=_this$state.queryDsl;var $state=_this.props.filter.$state;if(!$state||!$state.store){return}var alias=useCustomLabel?customLabel:null;if(isCustomEditorOpen){var _this$props$filter$me=_this.props.filter.meta,index=_this$props$filter$me.index,disabled=_this$props$filter$me.disabled,negate=_this$props$filter$me.negate;var newIndex=index||_this.props.indexPatterns[0].id;var body=JSON.parse(queryDsl);var _filter=(0,_filter_editor_utils.buildCustomFilter)(newIndex,body,disabled,negate,alias,$state.store);_this.props.onSubmit(_filter)}else if(indexPattern&&field&&operator){var _filter2=(0,_filter_editor_utils.buildFilter)(indexPattern,field,operator,_this.props.filter.meta.disabled,params,alias,$state.store);_this.props.onSubmit(_filter2)}});_this.state={selectedIndexPattern:_this.getIndexPatternFromFilter(),selectedField:_this.getFieldFromFilter(),selectedOperator:_this.getSelectedOperator(),params:(0,_filter_editor_utils.getFilterParams)(props.filter),useCustomLabel:props.filter.meta.alias!==null,customLabel:props.filter.meta.alias,queryDsl:JSON.stringify((0,_filter_editor_utils.getQueryDslFromFilter)(props.filter),null,2),isCustomEditorOpen:_this.isUnknownFilterType()};return _this}_createClass(FilterEditorUI,[{key:"render",value:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editFilterPopupTitle",defaultMessage:"Edit filter"})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:this.toggleCustomEditor},this.state.isCustomEditorOpen?_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editFilterValuesButtonLabel",defaultMessage:"Edit filter values"}):_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editQueryDslButtonLabel",defaultMessage:"Edit as Query DSL"}))))),_react2.default.createElement("div",{className:"globalFilterItem__editorForm"},_react2.default.createElement(_eui.EuiForm,null,this.renderIndexPatternInput(),this.state.isCustomEditorOpen?this.renderCustomEditor():this.renderRegularEditor(),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiSwitch,{id:"filterEditorCustomLabelSwitch",label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelSwitchLabel",defaultMessage:"Create custom label?"}),checked:this.state.useCustomLabel,onChange:this.onCustomLabelSwitchChange}),this.state.useCustomLabel&&_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelInputLabel",defaultMessage:"Custom label"})},_react2.default.createElement(_eui.EuiFieldText,{value:"".concat(this.state.customLabel),onChange:this.onCustomLabelChange}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{direction:"rowReverse",alignItems:"center",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:this.onSubmit,isDisabled:!this.isFilterValid(),"data-test-subj":"saveFilter"},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.saveButtonLabel",defaultMessage:"Save"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{flush:"right",onClick:this.props.onCancel,"data-test-subj":"cancelSaveFilter"},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.cancelButtonLabel",defaultMessage:"Cancel"}))),_react2.default.createElement(_eui.EuiFlexItem,null)))))}},{key:"renderIndexPatternInput",value:function renderIndexPatternInput(){if(this.props.indexPatterns.length<=1){return""}var selectedIndexPattern=this.state.selectedIndexPattern;return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.indexPatternSelectLabel",defaultMessage:"Index Pattern"})},_react2.default.createElement(IndexPatternComboBox,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterBar.indexPatternSelectPlaceholder",defaultMessage:"Select an index pattern"}),options:this.props.indexPatterns,selectedOptions:selectedIndexPattern?[selectedIndexPattern]:[],getLabel:function getLabel(indexPattern){return indexPattern.title},onChange:this.onIndexPatternChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterIndexPatternsSelect"}))))}},{key:"renderRegularEditor",value:function renderRegularEditor(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{style:{maxWidth:"188px"}},this.renderFieldInput()),_react2.default.createElement(_eui.EuiFlexItem,{style:{maxWidth:"188px"}},this.renderOperatorInput())),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement("div",{"data-test-subj":"filterParams"},this.renderParamsEditor()))}},{key:"renderFieldInput",value:function renderFieldInput(){var _this$state2=this.state,selectedIndexPattern=_this$state2.selectedIndexPattern,selectedField=_this$state2.selectedField;var fields=selectedIndexPattern?(0,_filter_editor_utils.getFilterableFields)(selectedIndexPattern):[];return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectLabel",defaultMessage:"Field"})},_react2.default.createElement(FieldComboBox,{id:"fieldInput",isDisabled:!selectedIndexPattern,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectPlaceholder",defaultMessage:"Select a field"}),options:fields,selectedOptions:selectedField?[selectedField]:[],getLabel:function getLabel(field){return field.name},onChange:this.onFieldChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterFieldSuggestionList"}))}},{key:"renderOperatorInput",value:function renderOperatorInput(){var _this$state3=this.state,selectedField=_this$state3.selectedField,selectedOperator=_this$state3.selectedOperator;var operators=selectedField?(0,_filter_editor_utils.getOperatorOptions)(selectedField):[];return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectLabel",defaultMessage:"Operator"})},_react2.default.createElement(OperatorComboBox,{isDisabled:!selectedField,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholder",defaultMessage:"Select an operator"}),options:operators,selectedOptions:selectedOperator?[selectedOperator]:[],getLabel:function getLabel(_ref7){var message=_ref7.message;return message},onChange:this.onOperatorChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterOperatorList"}))}},{key:"renderCustomEditor",value:function renderCustomEditor(){return _react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.filter.filterEditor.queryDslLabel",{defaultMessage:"Elasticsearch Query DSL"})},_react2.default.createElement(_eui.EuiCodeEditor,{value:this.state.queryDsl,onChange:this.onQueryDslChange,mode:"json",width:"100%",height:"250px"}))}},{key:"renderParamsEditor",value:function renderParamsEditor(){var indexPattern=this.state.selectedIndexPattern;if(!indexPattern||!this.state.selectedOperator){return""}switch(this.state.selectedOperator.type){case"exists":return"";case"phrase":return _react2.default.createElement(_phrase_value_input.PhraseValueInput,{indexPattern:indexPattern,field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,"data-test-subj":"phraseValueInput",uiSettings:this.props.uiSettings});case"phrases":return _react2.default.createElement(_phrases_values_input.PhrasesValuesInput,{indexPattern:indexPattern,field:this.state.selectedField,values:this.state.params,onChange:this.onParamsChange,uiSettings:this.props.uiSettings});case"range":return _react2.default.createElement(_range_value_input.RangeValueInput,{field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange})}}},{key:"isUnknownFilterType",value:function isUnknownFilterType(){var type=this.props.filter.meta.type;return!!type&&!["phrase","phrases","range","exists"].includes(type)}},{key:"getIndexPatternFromFilter",value:function getIndexPatternFromFilter(){return(0,_filter_editor_utils.getIndexPatternFromFilter)(this.props.filter,this.props.indexPatterns)}},{key:"getFieldFromFilter",value:function getFieldFromFilter(){var indexPattern=this.getIndexPatternFromFilter();return indexPattern&&(0,_filter_editor_utils.getFieldFromFilter)(this.props.filter,indexPattern)}},{key:"getSelectedOperator",value:function getSelectedOperator(){return(0,_filter_editor_utils.getOperatorFromFilter)(this.props.filter)}},{key:"isFilterValid",value:function isFilterValid(){var _this$state4=this.state,isCustomEditorOpen=_this$state4.isCustomEditorOpen,queryDsl=_this$state4.queryDsl,indexPattern=_this$state4.selectedIndexPattern,field=_this$state4.selectedField,operator=_this$state4.selectedOperator,params=_this$state4.params;if(isCustomEditorOpen){try{return Boolean(JSON.parse(queryDsl))}catch(e){return false}}return(0,_filter_editor_utils.isFilterValid)(indexPattern,field,operator,params)}}]);return FilterEditorUI}(_react2.Component);function IndexPatternComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}function FieldComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}function OperatorComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var FilterEditor=(0,_react.injectI18n)(FilterEditorUI);exports.FilterEditor=FilterEditor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getIndexPatternFromFilter=getIndexPatternFromFilter;exports.getFieldFromFilter=getFieldFromFilter;exports.getOperatorFromFilter=getOperatorFromFilter;exports.getQueryDslFromFilter=getQueryDslFromFilter;exports.getFilterableFields=getFilterableFields;exports.getOperatorOptions=getOperatorOptions;exports.getFilterParams=getFilterParams;exports.validateParams=validateParams;exports.isFilterValid=isFilterValid;exports.buildFilter=buildFilter;exports.buildCustomFilter=buildCustomFilter;var _datemath=_interopRequireDefault(__webpack_require__(55));var _esQuery=__webpack_require__(20);var _lodash=__webpack_require__(1);var _ipv4_address=_interopRequireDefault(__webpack_require__(407));var _index_patterns=__webpack_require__(343);var _filter_operators=__webpack_require__(569);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function getIndexPatternFromFilter(filter,indexPatterns){return indexPatterns.find(function(indexPattern){return indexPattern.id===filter.meta.index})}function getFieldFromFilter(filter,indexPattern){return indexPattern.fields.find(function(field){return field.name===filter.meta.key})}function getOperatorFromFilter(filter){return _filter_operators.FILTER_OPERATORS.find(function(operator){return filter.meta.type===operator.type&&filter.meta.negate===operator.negate})}function getQueryDslFromFilter(filter){return(0,_lodash.omit)(filter,["$state","meta"])}function getFilterableFields(indexPattern){return indexPattern.fields.filter(_index_patterns.isFilterable)}function getOperatorOptions(field){return _filter_operators.FILTER_OPERATORS.filter(function(operator){return!operator.fieldTypes||operator.fieldTypes.includes(field.type)})}function getFilterParams(filter){switch(filter.meta.type){case"phrase":return filter.meta.params.query;case"phrases":return filter.meta.params;case"range":return{from:filter.meta.params.gte,to:filter.meta.params.lt}}}function validateParams(params,type){switch(type){case"date":var moment=typeof params==="string"?_datemath.default.parse(params):null;return Boolean(typeof params==="string"&&moment&&moment.isValid());case"ip":try{return Boolean(new _ipv4_address.default(params))}catch(e){return false}default:return true}}function isFilterValid(indexPattern,field,operator,params){if(!indexPattern||!field||!operator){return false}switch(operator.type){case"phrase":return validateParams(params,field.type);case"phrases":if(!Array.isArray(params)||!params.length){return false}return params.every(function(phrase){return validateParams(phrase,field.type)});case"range":if(_typeof(params)!=="object"){return false}return validateParams(params.from,field.type)||validateParams(params.to,field.type);case"exists":return true;default:throw new Error("Unknown operator type: ".concat(operator.type))}}function buildFilter(indexPattern,field,operator,disabled,params,alias,store){var filter=buildBaseFilter(indexPattern,field,operator,params);filter.meta.alias=alias;filter.meta.negate=operator.negate;filter.meta.disabled=disabled;filter.$state={store:store};return filter}function buildBaseFilter(indexPattern,field,operator,params){switch(operator.type){case"phrase":return(0,_esQuery.buildPhraseFilter)(field,params,indexPattern);case"phrases":return(0,_esQuery.buildPhrasesFilter)(field,params,indexPattern);case"range":var newParams={gte:params.from,lt:params.to};return(0,_esQuery.buildRangeFilter)(field,newParams,indexPattern);case"exists":return(0,_esQuery.buildExistsFilter)(field,indexPattern);default:throw new Error("Unknown operator type: ".concat(operator.type))}}function buildCustomFilter(index,queryDsl,disabled,negate,alias,store){var meta={index:index,type:"custom",disabled:disabled,negate:negate,alias:alias};var filter=_objectSpread({},queryDsl,{meta:meta});filter.$state={store:store};return filter}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FILTER_OPERATORS=exports.doesNotExistOperator=exports.existsOperator=exports.isNotBetweenOperator=exports.isBetweenOperator=exports.isNotOneOfOperator=exports.isOneOfOperator=exports.isNotOperator=exports.isOperator=void 0;var _i18n=__webpack_require__(2);var isOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isOperatorOptionLabel",{defaultMessage:"is"}),type:"phrase",negate:false};exports.isOperator=isOperator;var isNotOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotOperatorOptionLabel",{defaultMessage:"is not"}),type:"phrase",negate:true};exports.isNotOperator=isNotOperator;var isOneOfOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isOneOfOperatorOptionLabel",{defaultMessage:"is one of"}),type:"phrases",negate:false,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};exports.isOneOfOperator=isOneOfOperator;var isNotOneOfOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotOneOfOperatorOptionLabel",{defaultMessage:"is not one of"}),type:"phrases",negate:true,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};exports.isNotOneOfOperator=isNotOneOfOperator;var isBetweenOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isBetweenOperatorOptionLabel",{defaultMessage:"is between"}),type:"range",negate:false,fieldTypes:["number","date","ip"]};exports.isBetweenOperator=isBetweenOperator;var isNotBetweenOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotBetweenOperatorOptionLabel",{defaultMessage:"is not between"}),type:"range",negate:true,fieldTypes:["number","date","ip"]};exports.isNotBetweenOperator=isNotBetweenOperator;var existsOperator={message:_i18n.i18n.translate("data.filter.filterEditor.existsOperatorOptionLabel",{defaultMessage:"exists"}),type:"exists",negate:false};exports.existsOperator=existsOperator;var doesNotExistOperator={message:_i18n.i18n.translate("data.filter.filterEditor.doesNotExistOperatorOptionLabel",{defaultMessage:"does not exist"}),type:"exists",negate:true};exports.doesNotExistOperator=doesNotExistOperator;var FILTER_OPERATORS=[isOperator,isNotOperator,isOneOfOperator,isNotOneOfOperator,isBetweenOperator,isNotBetweenOperator,existsOperator,doesNotExistOperator];exports.FILTER_OPERATORS=FILTER_OPERATORS},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseSuggestor=void 0;var _react=__webpack_require__(0);var _value_suggestions=__webpack_require__(1035);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PhraseSuggestor=function(_Component){_inherits(PhraseSuggestor,_Component);function PhraseSuggestor(){var _getPrototypeOf2;var _this;_classCallCheck(this,PhraseSuggestor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PhraseSuggestor)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{suggestions:[],isLoading:false});_defineProperty(_assertThisInitialized(_this),"onSearchChange",function(value){_this.updateSuggestions("".concat(value))});return _this}_createClass(PhraseSuggestor,[{key:"componentDidMount",value:function componentDidMount(){this.updateSuggestions()}},{key:"isSuggestingValues",value:function isSuggestingValues(){var shouldSuggestValues=this.props.uiSettings.get("filterEditor:suggestValues");var field=this.props.field;return shouldSuggestValues&&field&&field.aggregatable&&field.type==="string"}},{key:"updateSuggestions",value:function(){var _updateSuggestions=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var value,_ref,indexPattern,field,suggestions,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:value=_args.length>0&&_args[0]!==undefined?_args[0]:"";_ref=this.props,indexPattern=_ref.indexPattern,field=_ref.field;if(!(!field||!this.isSuggestingValues())){_context.next=4;break}return _context.abrupt("return");case 4:this.setState({isLoading:true});_context.next=7;return(0,_value_suggestions.getSuggestions)(indexPattern.title,field,value);case 7:suggestions=_context.sent;this.setState({suggestions:suggestions,isLoading:false});case 9:case"end":return _context.stop()}}},_callee,this)}));function updateSuggestions(){return _updateSuggestions.apply(this,arguments)}return updateSuggestions}()}]);return PhraseSuggestor}(_react.Component);exports.PhraseSuggestor=PhraseSuggestor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ValueInputType=void 0;var _eui=__webpack_require__(3);var _react=__webpack_require__(5);var _lodash=__webpack_require__(1);var _react2=_interopRequireWildcard(__webpack_require__(0));var _filter_editor_utils=__webpack_require__(568);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ValueInputTypeUI=function(_Component){_inherits(ValueInputTypeUI,_Component);function ValueInputTypeUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,ValueInputTypeUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ValueInputTypeUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onBoolChange",function(event){var boolValue=event.target.value==="true";_this.props.onChange(boolValue)});_defineProperty(_assertThisInitialized(_this),"onChange",function(event){var params=event.target.value;_this.props.onChange(params)});return _this}_createClass(ValueInputTypeUI,[{key:"render",value:function render(){var value=this.props.value;var inputElement;switch(this.props.type){case"string":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange});break;case"number":inputElement=_react2.default.createElement(_eui.EuiFieldNumber,{placeholder:this.props.placeholder,value:typeof value==="string"?parseFloat(value):value,onChange:this.onChange});break;case"date":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,isInvalid:!(0,_lodash.isEmpty)(value)&&!(0,_filter_editor_utils.validateParams)(value,this.props.type)});break;case"ip":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,isInvalid:!(0,_lodash.isEmpty)(value)&&!(0,_filter_editor_utils.validateParams)(value,this.props.type)});break;case"boolean":inputElement=_react2.default.createElement(_eui.EuiSelect,{options:[{value:undefined,text:this.props.placeholder},{value:"true",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.trueOptionLabel",defaultMessage:"true"})},{value:"false",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.falseOptionLabel",defaultMessage:"false"})}],value:value,onChange:this.onBoolChange});break;default:break}return inputElement}}]);return ValueInputTypeUI}(_react2.Component);var ValueInputType=(0,_react.injectI18n)(ValueInputTypeUI);exports.ValueInputType=ValueInputType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterDisplayText=getFilterDisplayText;exports.FilterView=void 0;var _eui=__webpack_require__(3);var _esQuery=__webpack_require__(20);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _filter_operators=__webpack_require__(569);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FilterView=function FilterView(_ref){var filter=_ref.filter,iconOnClick=_ref.iconOnClick,onClick=_ref.onClick,rest=_objectWithoutProperties(_ref,["filter","iconOnClick","onClick"]);var title="Filter: ".concat(getFilterDisplayText(filter),". ").concat(_i18n.i18n.translate("data.filter.filterBar.moreFilterActionsMessage",{defaultMessage:"Select for more filter actions."}));if((0,_esQuery.isFilterPinned)(filter)){title="".concat(_i18n.i18n.translate("data.filter.filterBar.pinnedFilterPrefix",{defaultMessage:"Pinned"})," ").concat(title)}if(filter.meta.disabled){title="".concat(_i18n.i18n.translate("data.filter.filterBar.disabledFilterPrefix",{defaultMessage:"Disabled"})," ").concat(title)}return _react.default.createElement(_eui.EuiBadge,_extends({title:title,iconType:"cross",iconSide:"right",closeButtonProps:{tabIndex:-1},iconOnClick:iconOnClick,iconOnClickAriaLabel:_i18n.i18n.translate("data.filter.filterBar.filterItemBadgeIconAriaLabel",{defaultMessage:"Delete"}),onClick:onClick,onClickAriaLabel:_i18n.i18n.translate("data.filter.filterBar.filterItemBadgeAriaLabel",{defaultMessage:"Filter actions"})},rest),_react.default.createElement("span",null,getFilterDisplayText(filter)))};exports.FilterView=FilterView;function getFilterDisplayText(filter){var prefix=filter.meta.negate?" ".concat(_i18n.i18n.translate("data.filter.filterBar.negatedFilterPrefix",{defaultMessage:"NOT "})):"";if(filter.meta.alias!==null){return"".concat(prefix).concat(filter.meta.alias)}switch(filter.meta.type){case"exists":return"".concat(prefix).concat(filter.meta.key," ").concat(_filter_operators.existsOperator.message);case"geo_bounding_box":return"".concat(prefix).concat(filter.meta.key,": ").concat(filter.meta.value);case"geo_polygon":return"".concat(prefix).concat(filter.meta.key,": ").concat(filter.meta.value);case"phrase":return"".concat(prefix).concat(filter.meta.key,": ").concat(filter.meta.value);case"phrases":return"".concat(prefix).concat(filter.meta.key," ").concat(_filter_operators.isOneOfOperator.message," ").concat(filter.meta.value);case"query_string":return"".concat(prefix).concat(filter.meta.value);case"range":return"".concat(prefix).concat(filter.meta.key,": ").concat(filter.meta.value);default:return"".concat(prefix).concat(JSON.stringify(filter.query))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"dateHistogramInterval",{enumerable:true,get:function get(){return _date_histogram_interval.dateHistogramInterval}});Object.defineProperty(exports,"isValidEsInterval",{enumerable:true,get:function get(){return _parse_es_interval.isValidEsInterval}});Object.defineProperty(exports,"InvalidEsCalendarIntervalError",{enumerable:true,get:function get(){return _parse_es_interval.InvalidEsCalendarIntervalError}});Object.defineProperty(exports,"InvalidEsIntervalFormatError",{enumerable:true,get:function get(){return _parse_es_interval.InvalidEsIntervalFormatError}});Object.defineProperty(exports,"parseEsInterval",{enumerable:true,get:function get(){return _parse_es_interval.parseEsInterval}});Object.defineProperty(exports,"ParsedInterval",{enumerable:true,get:function get(){return _parse_es_interval.ParsedInterval}});var _date_histogram_interval=__webpack_require__(1043);var _parse_es_interval=__webpack_require__(574)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"parseEsInterval",{enumerable:true,get:function get(){return _parse_es_interval.parseEsInterval}});Object.defineProperty(exports,"ParsedInterval",{enumerable:true,get:function get(){return _parse_es_interval.ParsedInterval}});Object.defineProperty(exports,"InvalidEsCalendarIntervalError",{enumerable:true,get:function get(){return _invalid_es_calendar_interval_error.InvalidEsCalendarIntervalError}});Object.defineProperty(exports,"InvalidEsIntervalFormatError",{enumerable:true,get:function get(){return _invalid_es_interval_format_error.InvalidEsIntervalFormatError}});Object.defineProperty(exports,"isValidEsInterval",{enumerable:true,get:function get(){return _is_valid_es_interval.isValidEsInterval}});var _parse_es_interval=__webpack_require__(575);var _invalid_es_calendar_interval_error=__webpack_require__(576);var _invalid_es_interval_format_error=__webpack_require__(577);var _is_valid_es_interval=__webpack_require__(1044)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseEsInterval=parseEsInterval;var _datemath=_interopRequireDefault(__webpack_require__(55));var _invalid_es_calendar_interval_error=__webpack_require__(576);var _invalid_es_interval_format_error=__webpack_require__(577);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ES_INTERVAL_STRING_REGEX=new RegExp("^([1-9][0-9]*)\\s*("+_datemath.default.units.join("|")+")$");function parseEsInterval(interval){var matches=String(interval).trim().match(ES_INTERVAL_STRING_REGEX);if(!matches){throw new _invalid_es_interval_format_error.InvalidEsIntervalFormatError(interval)}var value=parseFloat(matches[1]);var unit=matches[2];var type=_datemath.default.unitsMap[unit].type;if(type==="calendar"&&value!==1){throw new _invalid_es_calendar_interval_error.InvalidEsCalendarIntervalError(interval,value,unit,type)}return{value:value,unit:unit,type:type==="mixed"&&value===1||type==="calendar"?"calendar":"fixed"}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidEsCalendarIntervalError=void 0;var _i18n=__webpack_require__(2);var InvalidEsCalendarIntervalError=function(_Error){_inherits(InvalidEsCalendarIntervalError,_Error);function InvalidEsCalendarIntervalError(interval,value,unit,type){var _this;_classCallCheck(this,InvalidEsCalendarIntervalError);_this=_possibleConstructorReturn(this,_getPrototypeOf(InvalidEsCalendarIntervalError).call(this,_i18n.i18n.translate("data.parseEsInterval.invalidEsCalendarIntervalErrorMessage",{defaultMessage:"Invalid calendar interval: {interval}, value must be 1",values:{interval:interval}})));_this.interval=interval;_this.value=value;_this.unit=unit;_this.type=type;_this.name="InvalidEsCalendarIntervalError";_this.value=value;_this.unit=unit;_this.type=type;if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),InvalidEsCalendarIntervalError)}Object.setPrototypeOf(_assertThisInitialized(_this),InvalidEsCalendarIntervalError.prototype);return _this}return InvalidEsCalendarIntervalError}(_wrapNativeSuper(Error));exports.InvalidEsCalendarIntervalError=InvalidEsCalendarIntervalError},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidEsIntervalFormatError=void 0;var _i18n=__webpack_require__(2);var InvalidEsIntervalFormatError=function(_Error){_inherits(InvalidEsIntervalFormatError,_Error);function InvalidEsIntervalFormatError(interval){var _this;_classCallCheck(this,InvalidEsIntervalFormatError);_this=_possibleConstructorReturn(this,_getPrototypeOf(InvalidEsIntervalFormatError).call(this,_i18n.i18n.translate("data.parseEsInterval.invalidEsIntervalFormatErrorMessage",{defaultMessage:"Invalid interval format: {interval}",values:{interval:interval}})));_this.interval=interval;_this.name="InvalidEsIntervalFormatError";if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),InvalidEsIntervalFormatError)}Object.setPrototypeOf(_assertThisInitialized(_this),InvalidEsIntervalFormatError.prototype);return _this}return InvalidEsIntervalFormatError}(_wrapNativeSuper(Error));exports.InvalidEsIntervalFormatError=InvalidEsIntervalFormatError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggConfigs=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _indexed_array=__webpack_require__(59);var _agg_config=__webpack_require__(118);var _agg_groups=__webpack_require__(61);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function removeParentAggs(obj){for(var prop in obj){if(prop==="parentAggs")delete obj[prop];else if(_typeof(obj[prop])==="object")removeParentAggs(obj[prop])}}function parseParentAggs(dslLvlCursor,dsl){if(dsl.parentAggs){_lodash.default.each(dsl.parentAggs,function(agg,key){dslLvlCursor[key]=agg;parseParentAggs(dslLvlCursor,agg)})}}var AggConfigs=function(_IndexedArray){_inherits(AggConfigs,_IndexedArray);function AggConfigs(indexPattern){var _this;var configStates=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var schemas=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,AggConfigs);configStates=_agg_config.AggConfig.ensureIds(configStates);_this=_possibleConstructorReturn(this,_getPrototypeOf(AggConfigs).call(this,{index:["id"],group:["schema.group","type.name","type.type","schema.name"]}));_this.indexPattern=indexPattern;_this.schemas=schemas;configStates.forEach(function(params){return _this.createAggConfig(params)});if(_this.schemas){_this.initializeDefaultsFromSchemas(schemas)}return _this}_createClass(AggConfigs,[{key:"initializeDefaultsFromSchemas",value:function initializeDefaultsFromSchemas(schemas){var _this2=this;(0,_lodash.default)(schemas).filter(function(schema){return Array.isArray(schema.defaults)&&schema.defaults.length>0}).each(function(schema){if(!_this2.bySchemaName[schema.name]){var defaults=schema.defaults.slice(0,schema.max);_lodash.default.each(defaults,function(defaultState){var state=_lodash.default.defaults({id:_agg_config.AggConfig.nextId(_this2)},defaultState);_this2.push(new _agg_config.AggConfig(_this2,state))})}}).commit()}},{key:"setTimeRange",value:function setTimeRange(timeRange){this.timeRange=timeRange;var updateAggTimeRange=function updateAggTimeRange(agg){_lodash.default.each(agg.params,function(param){if(param instanceof _agg_config.AggConfig){updateAggTimeRange(param)}});if(_lodash.default.get(agg,"type.name")==="date_histogram"){agg.params.timeRange=timeRange}};this.forEach(updateAggTimeRange)}},{key:"clone",value:function clone(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$enabledOnly=_ref.enabledOnly,enabledOnly=_ref$enabledOnly===void 0?true:_ref$enabledOnly;var filterAggs=function filterAggs(agg){if(!enabledOnly)return true;return agg.enabled};var aggConfigs=new AggConfigs(this.indexPattern,this.raw.filter(filterAggs),this.schemas);return aggConfigs}},{key:"createAggConfig",value:function createAggConfig(params){var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref2$addToAggConfigs=_ref2.addToAggConfigs,addToAggConfigs=_ref2$addToAggConfigs===void 0?true:_ref2$addToAggConfigs;var aggConfig;if(params instanceof _agg_config.AggConfig){aggConfig=params;params.parent=this}else{aggConfig=new _agg_config.AggConfig(this,params)}if(addToAggConfigs){this.push(aggConfig)}return aggConfig}},{key:"jsonDataEquals",value:function jsonDataEquals(aggConfigs){if(aggConfigs.length!==this.length){return false}for(var i=0;i<this.length;i+=1){if(!_lodash.default.isEqual(aggConfigs[i].toJSON(),this[i].toJSON())){return false}}return true}},{key:"toDsl",value:function toDsl(){var _this3=this;var hierarchical=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dslTopLvl={};var dslLvlCursor;var nestedMetrics;if(hierarchical){nestedMetrics=(0,_lodash.default)(this.byTypeType.metrics).filter(function(agg){return agg.type.name!=="count"}).map(function(agg){return{config:agg,dsl:agg.toDsl(_this3)}}).value()}this.getRequestAggs().filter(function(config){return!config.type.hasNoDsl}).forEach(function(config,i,list){if(!dslLvlCursor){dslLvlCursor=dslTopLvl}else{var prevConfig=list[i-1];var prevDsl=dslLvlCursor[prevConfig.id];dslLvlCursor=prevDsl.aggs||dslLvlCursor}var dsl=dslLvlCursor[config.id]=config.toDsl(_this3);var subAggs;parseParentAggs(dslLvlCursor,dsl);if(config.type.type===_agg_groups.AggGroupNames.Buckets&&i<list.length-1){subAggs=dsl.aggs||(dsl.aggs={})}if(subAggs&&nestedMetrics){nestedMetrics.forEach(function(agg){subAggs[agg.config.id]=agg.dsl;if(agg.dsl.parentAggs){Object.entries(agg.dsl.parentAggs).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2),parentAggId=_ref4[0],parentAgg=_ref4[1];subAggs[parentAggId]=parentAgg})}})}});removeParentAggs(dslTopLvl);return dslTopLvl}},{key:"getRequestAggs",value:function getRequestAggs(){var aggregations=this.reduce(function(requestValuesAggs,agg){var aggs=agg.getRequestAggs();return aggs?requestValuesAggs.concat(aggs):requestValuesAggs},[]);return _lodash.default.sortBy(aggregations,function(agg){return agg.type.type===_agg_groups.AggGroupNames.Metrics?1:0})}},{key:"getResponseAggs",value:function getResponseAggs(){return this.getRequestAggs().reduce(function(responseValuesAggs,agg){var aggs=agg.getResponseAggs();return aggs?responseValuesAggs.concat(aggs):responseValuesAggs},[])}},{key:"getResponseAggById",value:function getResponseAggById(id){id=String(id);var reqAgg=_lodash.default.find(this.getRequestAggs(),function(agg){return id.substr(0,String(agg.id).length)===agg.id});if(!reqAgg)return;return _lodash.default.find(reqAgg.getResponseAggs(),{id:id})}},{key:"onSearchRequestStart",value:function onSearchRequestStart(searchSource,searchRequest){return Promise.all(this.getRequestAggs().map(function(agg){return agg.onSearchRequestStart(searchSource,searchRequest)}))}}]);return AggConfigs}(_indexed_array.IndexedArray);exports.AggConfigs=AggConfigs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidJson=isValidJson;exports.isValidInterval=isValidInterval;var _common=__webpack_require__(573);var _least_common_interval=__webpack_require__(580);function isValidJson(value){if(!value||value.length===0){return true}var trimmedValue=value.trim();if(trimmedValue.length===0){return true}if(trimmedValue[0]==="{"||trimmedValue[0]==="["){try{JSON.parse(trimmedValue);return true}catch(e){return false}}else{return false}}function isValidInterval(value,baseInterval){if(baseInterval){return _parseWithBase(value,baseInterval)}else{return(0,_common.isValidEsInterval)(value)}}function _parseWithBase(value,baseInterval){try{var interval=(0,_least_common_interval.leastCommonInterval)(baseInterval,value);return interval===value.replace(/\s/g,"")}catch(e){return false}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.leastCommonInterval=leastCommonInterval;var _datemath=_interopRequireDefault(__webpack_require__(55));var _math=__webpack_require__(581);var _public=__webpack_require__(24);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function leastCommonInterval(a,b){var unitsMap=_datemath.default.unitsMap,unitsDesc=_datemath.default.unitsDesc;var aInt=(0,_public.parseEsInterval)(a);var bInt=(0,_public.parseEsInterval)(b);if(a===b){return a}var aUnit=unitsMap[aInt.unit];var bUnit=unitsMap[bInt.unit];if(aInt.type!==bInt.type){throw Error("Incompatible intervals: ".concat(a," (").concat(aInt.type,"), ").concat(b," (").concat(bInt.type,")"))}if(aInt.type==="calendar"||bInt.type==="calendar"){return aUnit.weight>bUnit.weight?"".concat(aInt.value).concat(aInt.unit):"".concat(bInt.value).concat(bInt.unit)}var aMs=aInt.value*aUnit.base;var bMs=bInt.value*bUnit.base;var lcmMs=(0,_math.leastCommonMultiple)(aMs,bMs);if(lcmMs===bMs){return b.replace(/\s/g,"")}if(lcmMs===aMs){return a.replace(/\s/g,"")}var lcmUnit=unitsDesc.find(function(unit){var unitInfo=unitsMap[unit];return!!(unitInfo.type!=="calendar"&&lcmMs%unitInfo.base===0)});if(!lcmUnit){throw Error("Unable to find common interval for: ".concat(a,", ").concat(b))}return"".concat(lcmMs/unitsMap[lcmUnit].base).concat(lcmUnit)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.greatestCommonDivisor=greatestCommonDivisor;exports.leastCommonMultiple=leastCommonMultiple;function greatestCommonDivisor(a,b){return a===0?Math.abs(b):greatestCommonDivisor(b%a,a)}function leastCommonMultiple(a,b){return Math.abs(a*b/greatestCommonDivisor(a,b))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggType=AggType;var _lodash=_interopRequireDefault(__webpack_require__(1));var _agg_params=__webpack_require__(409);var _field_formats=__webpack_require__(32);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AggType(config){this.name=config.name;this.dslName=config.dslName||config.name;this.title=config.title;this.makeLabel=config.makeLabel||_lodash.default.constant(this.name);this.ordered=config.ordered;this.hasNoDsl=!!config.hasNoDsl;this.createFilter=config.createFilter;this.params=config.params||[];if(!(this.params instanceof _agg_params.AggParams)){this.params.push({name:"json",type:"json",advanced:true});if(config.customLabels!==false){this.params.push({name:"customLabel",displayName:_i18n.i18n.translate("common.ui.aggTypes.string.customLabel",{defaultMessage:"Custom label"}),type:"string",write:_lodash.default.noop})}this.params=new _agg_params.AggParams(this.params)}this.getRequestAggs=config.getRequestAggs||_lodash.default.noop;this.getResponseAggs=config.getResponseAggs||_lodash.default.noop;this.decorateAggConfig=config.decorateAggConfig||null;this.postFlightRequest=config.postFlightRequest||_lodash.default.identity;if(config.getFormat){this.getFormat=config.getFormat}}AggType.prototype.getFormat=function(agg){var field=agg.getField();return field?field.format:_field_formats.fieldFormats.getDefaultInstance("string")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.percentilesMetricAgg=void 0;var _ordinal_suffix=__webpack_require__(1060);var _percentiles=__webpack_require__(1061);var _metric_agg_type=__webpack_require__(23);var _get_response_agg_config_class=__webpack_require__(412);var _percentiles_get_value=__webpack_require__(585);var _i18n=__webpack_require__(2);var valueProps={makeLabel:function makeLabel(){var label=this.params.customLabel||this.getFieldDisplayName();return _i18n.i18n.translate("common.ui.aggTypes.metrics.percentiles.valuePropsLabel",{defaultMessage:"{percentile} percentile of {label}",values:{percentile:(0,_ordinal_suffix.ordinalSuffix)(this.key),label:label}})}};var percentilesMetricAgg=new _metric_agg_type.MetricAggType({name:"percentiles",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.percentilesTitle",{defaultMessage:"Percentiles"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("common.ui.aggTypes.metrics.percentilesLabel",{defaultMessage:"Percentiles of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:"number"},{name:"percents",editorComponent:_percentiles.PercentilesEditor,default:[1,5,25,50,75,95,99]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,valueProps);return agg.params.percents.map(function(percent){return new ValueAggConfig(percent)})},getValue:_percentiles_get_value.getPercentileValue});exports.percentilesMetricAgg=percentilesMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NumberList",{enumerable:true,get:function get(){return _number_list.NumberList}});var _number_list=__webpack_require__(1062)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPercentileValue=getPercentileValue;var _lodash=__webpack_require__(1);function getPercentileValue(agg,bucket){var values=bucket[agg.parentId]&&bucket[agg.parentId].values;var percentile=(0,_lodash.find)(values,function(value){return agg.key===value.key});return percentile?percentile.value:NaN}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OrderParamEditor=OrderParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function OrderParamEditor(_ref){var aggParam=_ref.aggParam,value=_ref.value,showValidation=_ref.showValidation,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched;var label=_i18n.i18n.translate("common.ui.aggTypes.orderLabel",{defaultMessage:"Order"});var isValid=!!value;(0,_react.useEffect)(function(){setValidity(isValid)},[isValid]);return _react.default.createElement(_eui.EuiFormRow,{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,compressed:true},_react.default.createElement(_eui.EuiSelect,{options:aggParam.options.raw,value:value&&value.value,onChange:function onChange(ev){return setValue(aggParam.options.byValue[ev.target.value])},fullWidth:true,isInvalid:showValidation?!isValid:false,onBlur:setTouched}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"aggTypeFieldFilters",{enumerable:true,get:function get(){return _field_filters.aggTypeFieldFilters}});var _field_filters=__webpack_require__(1070)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.wrapWithInlineComp=void 0;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var wrapWithInlineComp=function wrapWithInlineComp(Component){return function(props){return _react.default.createElement("div",{className:"visEditorAggParam--half visEditorAggParam--half-".concat(props.aggParam.name)},_react.default.createElement(Component,props))}};exports.wrapWithInlineComp=wrapWithInlineComp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DefaultEditorAggParams=DefaultEditorAggParams;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _agg_types=__webpack_require__(347);var _agg_select=__webpack_require__(1083);var _agg_param=__webpack_require__(1084);var _agg_params_helper=__webpack_require__(1085);var _agg_params_state=__webpack_require__(1086);var _editor_config_providers=__webpack_require__(1087);var _use_unmount=__webpack_require__(1088);var _agg_groups=__webpack_require__(61);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var FIXED_VALUE_PROP="fixedValue";var DEFAULT_PROP="default";function DefaultEditorAggParams(_ref){var agg=_ref.agg,aggError=_ref.aggError,_ref$aggIndex=_ref.aggIndex,aggIndex=_ref$aggIndex===void 0?0:_ref$aggIndex,_ref$aggIsTooLow=_ref.aggIsTooLow,aggIsTooLow=_ref$aggIsTooLow===void 0?false:_ref$aggIsTooLow,className=_ref.className,disabledParams=_ref.disabledParams,groupName=_ref.groupName,formIsTouched=_ref.formIsTouched,indexPattern=_ref.indexPattern,metricAggs=_ref.metricAggs,_ref$state=_ref.state,state=_ref$state===void 0?{}:_ref$state,onAggParamsChange=_ref.onAggParamsChange,onAggTypeChange=_ref.onAggTypeChange,setTouched=_ref.setTouched,setValidity=_ref.setValidity;var groupedAggTypeOptions=(0,_agg_params_helper.getAggTypeOptions)(agg,indexPattern,groupName);var errors=(0,_agg_params_helper.getError)(agg,aggIsTooLow);var editorConfig=(0,_react.useMemo)(function(){return _editor_config_providers.editorConfigProviders.getConfigForAgg(_agg_types.aggTypes.byType[groupName],indexPattern,agg)},[groupName,agg.type]);var params=(0,_agg_params_helper.getAggParamsToRender)({agg:agg,editorConfig:editorConfig,metricAggs:metricAggs,state:state});var allParams=[].concat(_toConsumableArray(params.basic),_toConsumableArray(params.advanced));var _useReducer=(0,_react.useReducer)(_agg_params_state.aggParamsReducer,allParams,_agg_params_state.initAggParamsState),_useReducer2=_slicedToArray(_useReducer,2),paramsState=_useReducer2[0],onChangeParamsState=_useReducer2[1];var _useReducer3=(0,_react.useReducer)(_agg_params_state.aggTypeReducer,{touched:false,valid:true}),_useReducer4=_slicedToArray(_useReducer3,2),aggType=_useReducer4[0],onChangeAggType=_useReducer4[1];var isFormValid=!errors.length&&aggType.valid&&Object.entries(paramsState).every(function(_ref2){var _ref3=_slicedToArray(_ref2,2),paramState=_ref3[1];return paramState.valid});var isAllInvalidParamsTouched=!!errors.length||(0,_agg_params_helper.isInvalidParamsTouched)(agg.type,aggType,paramsState);(0,_use_unmount.useUnmount)(function(){return setValidity(true)});(0,_react.useEffect)(function(){Object.entries(editorConfig).forEach(function(_ref4){var _ref5=_slicedToArray(_ref4,2),param=_ref5[0],paramConfig=_ref5[1];var paramOptions=agg.type.params.find(function(paramOption){return paramOption.name===param});var hasFixedValue=paramConfig.hasOwnProperty(FIXED_VALUE_PROP);var hasDefault=paramConfig.hasOwnProperty(DEFAULT_PROP);if(hasFixedValue||hasDefault){var newValue;var property=FIXED_VALUE_PROP;var typedParamConfig=paramConfig;if(hasDefault){property=DEFAULT_PROP;typedParamConfig=paramConfig}if(paramOptions&&paramOptions.deserialize){newValue=paramOptions.deserialize(typedParamConfig[property])}else{newValue=typedParamConfig[property]}onAggParamsChange(agg.params,param,newValue)}})},[editorConfig]);(0,_react.useEffect)(function(){setTouched(false)},[agg.type]);(0,_react.useEffect)(function(){setValidity(isFormValid)},[isFormValid,agg.type]);(0,_react.useEffect)(function(){setTouched(isAllInvalidParamsTouched)},[isAllInvalidParamsTouched]);var renderParam=function renderParam(paramInstance,model){return _react.default.createElement(_agg_param.DefaultEditorAggParam,_extends({key:"".concat(paramInstance.aggParam.name).concat(agg.type?agg.type.name:""),disabled:disabledParams&&disabledParams.includes(paramInstance.aggParam.name),showValidation:formIsTouched||model.touched,onChange:onAggParamsChange,setValidity:function setValidity(valid){onChangeParamsState({type:_agg_params_state.AGG_PARAMS_ACTION_KEYS.VALID,paramName:paramInstance.aggParam.name,payload:valid})},setTouched:function setTouched(){var isTouched=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;onChangeParamsState({type:_agg_params_state.AGG_PARAMS_ACTION_KEYS.TOUCHED,paramName:paramInstance.aggParam.name,payload:isTouched})},subAggParams:{onAggParamsChange:onAggParamsChange,onAggTypeChange:onAggTypeChange,formIsTouched:formIsTouched}},paramInstance))};return _react.default.createElement(_eui.EuiForm,{className:className,isInvalid:!!errors.length,error:errors,"data-test-subj":"visAggEditorParams"},_react.default.createElement(_agg_select.DefaultEditorAggSelect,{aggError:aggError,id:agg.id,indexPattern:indexPattern,value:agg.type,aggTypeOptions:groupedAggTypeOptions,isSubAggregation:aggIndex>=1&&groupName===_agg_groups.AggGroupNames.Buckets,showValidation:formIsTouched||aggType.touched,setValue:function setValue(value){onAggTypeChange(agg,value);onChangeParamsState({type:_agg_params_state.AGG_PARAMS_ACTION_KEYS.RESET})},setTouched:function setTouched(){return onChangeAggType({type:_agg_params_state.AGG_TYPE_ACTION_KEYS.TOUCHED,payload:true})},setValidity:function setValidity(valid){return onChangeAggType({type:_agg_params_state.AGG_TYPE_ACTION_KEYS.VALID,payload:valid})}}),params.basic.map(function(param){var model=paramsState[param.aggParam.name]||{touched:false,valid:true};return renderParam(param,model)}),params.advanced.length?_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiAccordion,{id:"advancedAccordion",buttonContent:_i18n.i18n.translate("common.ui.vis.editors.advancedToggle.advancedLinkLabel",{defaultMessage:"Advanced"})},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),params.advanced.map(function(param){var model=paramsState[param.aggParam.name]||{touched:false,valid:true};return renderParam(param,model)}))):null)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.groupAndSortBy=groupAndSortBy;function groupAndSortBy(objects,groupBy,labelName){var groupedOptions=objects.reduce(function(array,obj){var group=array.find(function(element){return element.label===obj[groupBy]});var option={label:obj[labelName],target:obj};if(group&&group.options){group.options.push(option)}else{array.push({label:obj[groupBy],options:[option]})}return array},[]);groupedOptions.sort(sortByLabel);groupedOptions.forEach(function(group){if(Array.isArray(group.options)){group.options.sort(sortByLabel)}});if(groupedOptions.length===1&&!groupedOptions[0].label){return groupedOptions[0].options||[]}return groupedOptions}function sortByLabel(a,b){return(a.label||"").toLowerCase().localeCompare((b.label||"").toLowerCase())}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.forwardModifyAggConfigOnSearchRequestStart=forwardModifyAggConfigOnSearchRequestStart;function forwardModifyAggConfigOnSearchRequestStart(paramName){return function(aggConfig){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}if(!aggConfig||!aggConfig.params){return}var nestedAggConfig=aggConfig.params[paramName];if(nestedAggConfig&&nestedAggConfig.type&&nestedAggConfig.type.params){nestedAggConfig.type.params.forEach(function(param){if(param.modifyAggConfigOnSearchRequestStart){param.modifyAggConfigOnSearchRequestStart.apply(param,[nestedAggConfig].concat(args))}})}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setBounds=setBounds;exports.dateHistogramBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _chrome=_interopRequireDefault(__webpack_require__(7));var _momentTimezone=_interopRequireDefault(__webpack_require__(130));var _bucket_agg_type=__webpack_require__(50);var _time_buckets=__webpack_require__(1096);var _date_histogram=__webpack_require__(1100);var _interval_options=__webpack_require__(594);var _time_interval=__webpack_require__(1101);var _timefilter=__webpack_require__(22);var _drop_partials=__webpack_require__(1102);var _public=__webpack_require__(24);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var config=_chrome.default.getUiSettingsClient();var detectedTimezone=_momentTimezone.default.tz.guess();var tzOffset=(0,_momentTimezone.default)().format("Z");function getInterval(agg){return _lodash.default.get(agg,["params","interval"])}function setBounds(agg,force){if(agg.buckets._alreadySet&&!force)return;agg.buckets._alreadySet=true;var bounds=agg.params.timeRange?_timefilter.timefilter.calculateBounds(agg.params.timeRange):null;agg.buckets.setBounds(agg.fieldIsTimeField()&&bounds)}var dateHistogramBucketAgg=new _bucket_agg_type.BucketAggType({name:"date_histogram",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.dateHistogramTitle",{defaultMessage:"Date Histogram"}),ordered:{date:true},makeLabel:function makeLabel(agg){var output=this.params.write(agg);var field=agg.getFieldDisplayName();return _i18n.i18n.translate("common.ui.aggTypes.buckets.dateHistogramLabel",{defaultMessage:"{fieldName} per {intervalDescription}",values:{fieldName:field,intervalDescription:output.metricScaleText||output.bucketInterval.description}})},createFilter:_date_histogram.createFilterDateHistogram,decorateAggConfig:function decorateAggConfig(){var buckets;return{buckets:{configurable:true,get:function get(){if(buckets)return buckets;buckets=new _time_buckets.TimeBuckets;buckets.setInterval(getInterval(this));setBounds(this);return buckets}}}},getFormat:function getFormat(agg){return agg.buckets.getScaledDateFormatter()},params:[{name:"field",type:"field",filterFieldTypes:"date",default:function _default(agg){return agg.getIndexPattern().timeFieldName},onChange:function onChange(agg){if(_lodash.default.get(agg,"params.interval")==="auto"&&!agg.fieldIsTimeField()){delete agg.params.interval}setBounds(agg,true)}},{name:"timeRange",default:null,write:_lodash.default.noop},{name:"useNormalizedEsInterval",default:true,write:_lodash.default.noop},{name:"interval",editorComponent:_time_interval.TimeIntervalParamEditor,deserialize:function deserialize(state,agg){if(state==="custom"){return _lodash.default.get(agg,"params.customInterval")}var interval=_lodash.default.find(_interval_options.intervalOptions,{val:state});if(!interval&&state==="year"){return"y"}return state},default:"auto",options:_interval_options.intervalOptions,modifyAggConfigOnSearchRequestStart:function modifyAggConfigOnSearchRequestStart(agg){setBounds(agg,true)},write:function write(agg,output,aggs){setBounds(agg,true);agg.buckets.setInterval(getInterval(agg));var useNormalizedEsInterval=agg.params.useNormalizedEsInterval;var interval=agg.buckets.getInterval(useNormalizedEsInterval);output.bucketInterval=interval;if(interval.expression==="0ms"){return}output.params=_objectSpread({},output.params,{},(0,_public.dateHistogramInterval)(interval.expression));var scaleMetrics=interval.scaled&&interval.scale<1;if(scaleMetrics&&aggs){var metrics=aggs.filter(function(agg){return agg.type&&agg.type.type==="metrics"});var all=_lodash.default.every(metrics,function(agg){return agg.type.isScalable()});if(all){output.metricScale=interval.scale;output.metricScaleText=interval.preScaled.description}}}},{name:"time_zone",default:undefined,serialize:function serialize(){return undefined},write:function write(agg,output){var tz=agg.params.time_zone;if(!tz&&agg.params.field){tz=_lodash.default.get(agg.getIndexPattern(),["typeMeta","aggs","date_histogram",agg.params.field.name,"time_zone"])}if(!tz){var isDefaultTimezone=config.isDefault("dateFormat:tz");tz=isDefaultTimezone?detectedTimezone||tzOffset:config.get("dateFormat:tz")}output.params.time_zone=tz}},{name:"drop_partials",default:false,write:_lodash.default.noop,editorComponent:_drop_partials.DropPartialsParamEditor,shouldShow:function shouldShow(agg){var field=agg.params.field;return field&&field.name&&field.name===agg.getIndexPattern().timeFieldName}},{name:"format"},{name:"min_doc_count",default:1},{name:"extended_bounds",default:{},write:function write(agg,output){var val=agg.params.extended_bounds;if(val.min!=null||val.max!=null){output.params.extended_bounds={min:(0,_momentTimezone.default)(val.min).valueOf(),max:(0,_momentTimezone.default)(val.max).valueOf()};return}}}]});exports.dateHistogramBucketAgg=dateHistogramBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseInterval=parseInterval;var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(14));var _datemath=_interopRequireDefault(__webpack_require__(55));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INTERVAL_STRING_RE=new RegExp("^([0-9\\.]*)\\s*("+_datemath.default.units.join("|")+")$");function parseInterval(interval){var matches=String(interval).trim().match(INTERVAL_STRING_RE);if(!matches)return null;try{var value=parseFloat(matches[1])||1;var unit=matches[2];var duration=_moment.default.duration(value,unit);var selectedUnit=_lodash.default.find(_datemath.default.units,function(unit){return Math.abs(duration.as(unit))>=1});return _moment.default.duration(duration.as(selectedUnit),selectedUnit)}catch(e){return null}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.intervalOptions=void 0;var _i18n=__webpack_require__(2);var intervalOptions=[{display:_i18n.i18n.translate("common.ui.aggTypes.buckets.intervalOptions.autoDisplayName",{defaultMessage:"Auto"}),val:"auto",enabled:function enabled(agg){return agg.fieldIsTimeField()}},{display:_i18n.i18n.translate("common.ui.aggTypes.buckets.intervalOptions.millisecondDisplayName",{defaultMessage:"Millisecond"}),val:"ms"},{display:_i18n.i18n.translate("common.ui.aggTypes.buckets.intervalOptions.secondDisplayName",{defaultMessage:"Second"}),val:"s"},{display:_i18n.i18n.translate("common.ui.aggTypes.buckets.intervalOptions.minuteDisplayName",{defaultMessage:"Minute"}),val:"m"},{display:_i18n.i18n.translate("common.ui.aggTypes.buckets.intervalOptions.hourlyDisplayName",{defaultMessage:"Hourly"}),val:"h"},{display:_i18n.i18n.translate("common.ui.aggTypes.buckets.intervalOptions.dailyDisplayName",{defaultMessage:"Daily"}),val:"d"},{display:_i18n.i18n.translate("common.ui.aggTypes.buckets.intervalOptions.weeklyDisplayName",{defaultMessage:"Weekly"}),val:"w"},{display:_i18n.i18n.translate("common.ui.aggTypes.buckets.intervalOptions.monthlyDisplayName",{defaultMessage:"Monthly"}),val:"M"},{display:_i18n.i18n.translate("common.ui.aggTypes.buckets.intervalOptions.yearlyDisplayName",{defaultMessage:"Yearly"}),val:"y"}];exports.intervalOptions=intervalOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangesParamEditor=RangesParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var FROM_PLACEHOLDER="−∞";var TO_PLACEHOLDER="+∞";var generateId=(0,_eui.htmlIdGenerator)();var isEmpty=function isEmpty(value){return value===undefined||value===null};function RangesParamEditor(_ref){var addRangeValues=_ref.addRangeValues,_ref$dataTestSubj=_ref.dataTestSubj,dataTestSubj=_ref$dataTestSubj===void 0?"range":_ref$dataTestSubj,error=_ref.error,_ref$value=_ref.value,value=_ref$value===void 0?[]:_ref$value,hidePlaceholders=_ref.hidePlaceholders,setValue=_ref.setValue,setTouched=_ref.setTouched,setValidity=_ref.setValidity,validateRange=_ref.validateRange;var _useState=(0,_react.useState)(function(){return value.map(function(range){return _objectSpread({},range,{id:generateId()})})}),_useState2=_slicedToArray(_useState,2),ranges=_useState2[0],setRanges=_useState2[1];(0,_react.useEffect)(function(){if(!value.length){onAddRange()}},[]);(0,_react.useEffect)(function(){if(value.length!==ranges.length||value.some(function(range,index){return!(0,_lodash.isEqual)(range,(0,_lodash.omit)(ranges[index],"id"))})){setRanges(value.map(function(range){return _objectSpread({},range,{id:generateId()})}))}},[value]);var updateRanges=function updateRanges(rangeValues){setValue(rangeValues.map(function(range){return(0,_lodash.omit)(range,"id")}));setRanges(rangeValues);if(setTouched){setTouched(true)}};var onAddRange=function onAddRange(){return addRangeValues?updateRanges([].concat(_toConsumableArray(ranges),[_objectSpread({},addRangeValues(),{id:generateId()})])):updateRanges([].concat(_toConsumableArray(ranges),[{id:generateId()}]))};var onRemoveRange=function onRemoveRange(id){return updateRanges(ranges.filter(function(range){return range.id!==id}))};var onChangeRange=function onChangeRange(id,key,newValue){return updateRanges(ranges.map(function(range){return range.id===id?_objectSpread({},range,_defineProperty({},key,newValue===""?undefined:parseFloat(newValue))):range}))};var hasInvalidRange=validateRange&&ranges.some(function(_ref2,index){var from=_ref2.from,to=_ref2.to,id=_ref2.id;var _validateRange=validateRange({from:from,to:to},index),_validateRange2=_slicedToArray(_validateRange,2),isFromValid=_validateRange2[0],isToValid=_validateRange2[1];return!isFromValid||!isToValid});(0,_react.useEffect)(function(){if(setValidity){setValidity(!hasInvalidRange)}},[hasInvalidRange,setValidity]);return _react.default.createElement(_eui.EuiFormRow,{compressed:true,fullWidth:true},_react.default.createElement(_react.default.Fragment,null,ranges.map(function(_ref3,index){var from=_ref3.from,to=_ref3.to,id=_ref3.id;var deleteBtnTitle=_i18n.i18n.translate("common.ui.aggTypes.ranges.removeRangeButtonAriaLabel",{defaultMessage:"Remove the range of {from} to {to}",values:{from:isEmpty(from)?FROM_PLACEHOLDER:from,to:isEmpty(to)?TO_PLACEHOLDER:to}});var isFromValid=true;var isToValid=true;if(validateRange){var _validateRange3=validateRange({from:from,to:to},index);var _validateRange4=_slicedToArray(_validateRange3,2);isFromValid=_validateRange4[0];isToValid=_validateRange4[1]}return _react.default.createElement(_react.Fragment,{key:id},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:false},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldNumber,{"aria-label":_i18n.i18n.translate("common.ui.aggTypes.ranges.fromLabel",{defaultMessage:"From"}),"data-test-subj":"".concat(dataTestSubj).concat(index,"__from"),value:isEmpty(from)?"":from,placeholder:hidePlaceholders?undefined:FROM_PLACEHOLDER,onChange:function onChange(ev){return onChangeRange(id,"from",ev.target.value)},fullWidth:true,compressed:true,isInvalid:!isFromValid})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:"sortRight",color:"subdued"})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldNumber,{"aria-label":_i18n.i18n.translate("common.ui.aggTypes.ranges.toLabel",{defaultMessage:"To"}),"data-test-subj":"".concat(dataTestSubj).concat(index,"__to"),value:isEmpty(to)?"":to,placeholder:hidePlaceholders?undefined:TO_PLACEHOLDER,onChange:function onChange(ev){return onChangeRange(id,"to",ev.target.value)},fullWidth:true,compressed:true,isInvalid:!isToValid})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{title:deleteBtnTitle,"aria-label":deleteBtnTitle,disabled:value.length===1,color:"danger",iconType:"trash",onClick:function onClick(){return onRemoveRange(id)}}))),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}))}),hasInvalidRange&&error&&_react.default.createElement(_eui.EuiFormErrorText,null,error),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"plusInCircleFilled",onClick:onAddRange,size:"xs"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.ranges.addRangeButtonLabel",defaultMessage:"Add range"})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateRange=void 0;var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var dateRange={toString:function toString(range,format){if(!range.from){return"Before "+format(range.to)}else if(!range.to){return"After "+format(range.from)}else{return format(range.from)+" to "+format(range.to)}},parse:function parse(rangeString,format){var chunks=rangeString.split(" to ");if(chunks.length===2)return{from:(0,_moment.default)(chunks[0],format),to:(0,_moment.default)(chunks[1],format)};chunks=rangeString.split("Before ");if(chunks.length===2)return{to:(0,_moment.default)(chunks[1],format)};chunks=rangeString.split("After ");if(chunks.length===2)return{from:(0,_moment.default)(chunks[1],format)};throw new Error("Error attempting to parse date range: "+rangeString)}};exports.dateRange=dateRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CidrMask=void 0;var _ipv4_address=_interopRequireDefault(__webpack_require__(407));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NUM_BITS=32;function throwError(mask){throw Error("Invalid CIDR mask: "+mask)}var CidrMask=function(){function CidrMask(mask){_classCallCheck(this,CidrMask);_defineProperty(this,"initialAddress",void 0);_defineProperty(this,"prefixLength",void 0);var splits=mask.split("/");if(splits.length!==2){throwError(mask)}this.initialAddress=new _ipv4_address.default(splits[0]);this.prefixLength=Number(splits[1]);if(isNaN(this.prefixLength)||this.prefixLength<1||this.prefixLength>NUM_BITS){throwError(mask)}}_createClass(CidrMask,[{key:"getRange",value:function getRange(){var variableBits=NUM_BITS-this.prefixLength;var fromAddress=this.initialAddress.valueOf()>>variableBits<<variableBits>>>0;var numAddresses=Math.pow(2,variableBits);return{from:new _ipv4_address.default(fromAddress).toString(),to:new _ipv4_address.default(fromAddress+numAddresses-1).toString()}}},{key:"toString",value:function toString(){return this.initialAddress.toString()+"/"+this.prefixLength}}]);return CidrMask}();exports.CidrMask=CidrMask},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IpRangeTypeParamEditor=IpRangeTypeParamEditor;exports.IpRangeTypes=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var IpRangeTypes;exports.IpRangeTypes=IpRangeTypes;(function(IpRangeTypes){IpRangeTypes["MASK"]="mask";IpRangeTypes["FROM_TO"]="fromTo"})(IpRangeTypes||(exports.IpRangeTypes=IpRangeTypes={}));function IpRangeTypeParamEditor(_ref){var agg=_ref.agg,value=_ref.value,setValue=_ref.setValue;var options=[{id:"visEditorIpRangeFromToLabel".concat(agg.id),label:_i18n.i18n.translate("common.ui.aggTypes.ipRanges.fromToButtonLabel",{defaultMessage:"From/to"})},{id:"visEditorIpRangeCidrLabel".concat(agg.id),label:_i18n.i18n.translate("common.ui.aggTypes.ipRanges.cidrMasksButtonLabel",{defaultMessage:"CIDR masks"})}];var onClick=function onClick(optionId){setValue(optionId===options[0].id?IpRangeTypes.FROM_TO:IpRangeTypes.MASK)};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiButtonGroup,{isFullWidth:true,onChange:onClick,idSelected:value===IpRangeTypes.FROM_TO?options[0].id:options[1].id,options:options,legend:_i18n.i18n.translate("common.ui.aggTypes.ipRangesAriaLabel",{defaultMessage:"IP ranges"})}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InputList=InputList;var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(1);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var generateId=(0,_eui.htmlIdGenerator)();var validateValue=function validateValue(inputValue,config){var result={model:inputValue||"",isInvalid:false};if(!inputValue){result.isInvalid=false;return result}try{var _InputObject=config.validateClass;result.model=new _InputObject(inputValue).toString();result.isInvalid=false;return result}catch(e){result.isInvalid=true;return result}};function InputList(_ref){var config=_ref.config,list=_ref.list,onChange=_ref.onChange,setValidity=_ref.setValidity;var _useState=(0,_react.useState)(function(){return list.map(function(item){return _objectSpread({id:generateId()},config.getModelValue(item))})}),_useState2=_slicedToArray(_useState,2),models=_useState2[0],setModels=_useState2[1];var hasInvalidValues=models.some(config.hasInvalidValuesFn);var updateValues=function updateValues(modelList){setModels(modelList);onChange(modelList.map(config.onChangeFn))};var onChangeValue=function onChangeValue(index,value,modelName){var _validateValue=validateValue(value,config),model=_validateValue.model,isInvalid=_validateValue.isInvalid;updateValues(models.map(function(range,arrayIndex){return arrayIndex===index?_objectSpread({},range,_defineProperty({},modelName,{value:value,model:model,isInvalid:isInvalid})):range}))};var onDelete=function onDelete(id){return updateValues(models.filter(function(model){return model.id!==id}))};var onAdd=function onAdd(){return updateValues([].concat(_toConsumableArray(models),[_objectSpread({id:generateId()},config.getModelValue())]))};(0,_react.useEffect)(function(){if(!list.length){updateValues([_objectSpread({id:generateId()},config.defaultValue)])}},[]);(0,_react.useEffect)(function(){setValidity(!hasInvalidValues)},[hasInvalidValues]);(0,_react.useEffect)(function(){if(list.length!==models.length||list.some(function(item,index){var model=(0,_lodash.mapValues)((0,_lodash.pick)(models[index],config.modelNames),"model");return!(0,_lodash.isEqual)(item,(0,_lodash.omit)(model,_lodash.isEmpty))})){setModels(list.map(function(item){return _objectSpread({id:generateId()},config.getModelValue(item))}))}},[list]);return _react.default.createElement(_react.default.Fragment,null,models.map(function(item,index){return _react.default.createElement(_react.Fragment,{key:item.id},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},config.renderInputRow(item,index,onChangeValue),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":config.getRemoveBtnAriaLabel(item),title:config.getRemoveBtnAriaLabel(item),disabled:models.length===1,color:"danger",iconType:"trash",onClick:function onClick(){return onDelete(item.id)}}))),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}))}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"plusInCircleFilled",onClick:onAdd,size:"xs"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.ipRanges.addRangeButtonLabel",defaultMessage:"Add range"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterTerms=createFilterTerms;var _esQuery=__webpack_require__(20);function createFilterTerms(aggConfig,key,params){var field=aggConfig.params.field;var indexPattern=field.indexPattern;if(key==="__other__"){var terms=params.terms;var phraseFilter=(0,_esQuery.buildPhrasesFilter)(field,terms,indexPattern);phraseFilter.meta.negate=true;var filters=[phraseFilter];if(terms.some(function(term){return term==="__missing__"})){filters.push((0,_esQuery.buildExistsFilter)(field,indexPattern))}return filters}else if(key==="__missing__"){var existsFilter=(0,_esQuery.buildExistsFilter)(field,indexPattern);existsFilter.meta.negate=true;return existsFilter}return(0,_esQuery.buildPhraseFilter)(field,key,indexPattern)}},function(module,exports,__webpack_require__){"use strict";(function(global){Object.defineProperty(exports,"__esModule",{value:true});exports.interpretAst=exports.getInterpreter=void 0;__webpack_require__(1132);var _common=__webpack_require__(370);var _new_platform=__webpack_require__(8);var _interpreter2=__webpack_require__(1145);var _registries=__webpack_require__(80);var _ajax_stream=__webpack_require__(1167);var _functions=__webpack_require__(1169);var _visualization=__webpack_require__(1209);var _expression_types=__webpack_require__(605);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var http=_new_platform.npSetup.core.http;var KIBANA_VERSION=_new_platform.npSetup.core.injectedMetadata.getKibanaVersion();var KIBANA_BASE_PATH=_new_platform.npSetup.core.injectedMetadata.getBasePath();global.kbnInterpreter=Object.assign(global.kbnInterpreter||{},(0,_common.registryFactory)(_registries.registries));(0,_common.register)(_registries.registries,{types:_expression_types.typeSpecs,browserFunctions:_functions.functions,renderers:[_visualization.visualization]});var _resolve;var _interpreterPromise;var initialize=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:(0,_interpreter2.initializeInterpreter)({http:http,ajaxStream:(0,_ajax_stream.ajaxStream)(KIBANA_VERSION,KIBANA_BASE_PATH),typesRegistry:_registries.registries.types,functionsRegistry:_registries.registries.browserFunctions}).then(function(interpreter){_resolve({interpreter:interpreter})});case 1:case"end":return _context.stop()}}},_callee)}));return function initialize(){return _ref.apply(this,arguments)}}();var getInterpreter=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!_interpreterPromise){_interpreterPromise=new Promise(function(resolve){return _resolve=resolve});initialize()}_context2.next=3;return _interpreterPromise;case 3:return _context2.abrupt("return",_context2.sent);case 4:case"end":return _context2.stop()}}},_callee2)}));return function getInterpreter(){return _ref2.apply(this,arguments)}}();exports.getInterpreter=getInterpreter;var interpretAst=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _ref4,interpreter,_args3=arguments;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getInterpreter();case 2:_ref4=_context3.sent;interpreter=_ref4.interpreter;_context3.next=6;return interpreter.interpretAst.apply(interpreter,_args3);case 6:return _context3.abrupt("return",_context3.sent);case 7:case"end":return _context3.stop()}}},_callee3)}));return function interpretAst(){return _ref3.apply(this,arguments)}}();exports.interpretAst=interpretAst}).call(this,__webpack_require__(1397))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildHierarchicalData=void 0;var _lodash=__webpack_require__(1);var _utilities=__webpack_require__(41);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var buildHierarchicalData=function buildHierarchicalData(table,_ref){var metric=_ref.metric,_ref$buckets=_ref.buckets,buckets=_ref$buckets===void 0?[]:_ref$buckets;var slices;var names={};var metricColumn=table.columns[metric.accessor];var metricFieldFormatter=metric.format;if(!buckets.length){slices=[{name:metricColumn.name,size:table.rows[0][metricColumn.id]}];names[metricColumn.name]=metricColumn.name}else{slices=[];table.rows.forEach(function(row,rowIndex){var parent;var dataLevel=slices;buckets.forEach(function(bucket){var bucketColumn=table.columns[bucket.accessor];var bucketValueColumn=table.columns[bucket.accessor+1];var bucketFormatter=(0,_utilities.getFormat)(bucket.format);var name=bucketFormatter.convert(row[bucketColumn.id]);var size=row[bucketValueColumn.id];names[name]=name;var slice=dataLevel.find(function(slice){return slice.name===name});if(!slice){slice={name:name,size:size,parent:parent,children:[],rawData:{table:table,row:rowIndex,column:bucket.accessor,value:row[bucketColumn.id]}};dataLevel.push(slice)}parent=slice;dataLevel=slice.children})})}return{hits:table.rows.length,raw:table,names:(0,_lodash.toArray)(names),tooltipFormatter:metricFieldFormatter,slices:{children:_toConsumableArray(slices)}}};exports.buildHierarchicalData=buildHierarchicalData},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildPointSeriesData=void 0;var _get_series=__webpack_require__(1135);var _get_aspects=__webpack_require__(1138);var _init_y_axis=__webpack_require__(1140);var _init_x_axis=__webpack_require__(1141);var _ordered_date_axis=__webpack_require__(1142);var buildPointSeriesData=function buildPointSeriesData(table,dimensions){var chart={aspects:(0,_get_aspects.getAspects)(table,dimensions)};(0,_init_x_axis.initXAxis)(chart,table);(0,_init_y_axis.initYAxis)(chart);if(chart.aspects.x[0].params.date){(0,_ordered_date_axis.orderedDateAxis)(chart)}chart.series=(0,_get_series.getSeries)(table,chart);delete chart.aspects;return chart};exports.buildPointSeriesData=buildPointSeriesData},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimelionRequestHandlerProvider=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _esQuery=__webpack_require__(20);var _timezone=__webpack_require__(417);var _notify=__webpack_require__(9);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TimelionRequestHandlerProvider=function TimelionRequestHandlerProvider(Private,$http,config){var timezone=Private(_timezone.timezoneProvider)();return{name:"timelion",handler:function handler(_ref){var timeRange=_ref.timeRange,filters=_ref.filters,query=_ref.query,visParams=_ref.visParams;return new Promise(function(resolve,reject){var expression=visParams.expression;if(!expression)return;var esQueryConfigs=(0,_esQuery.getEsQueryConfig)(config);var httpResult=$http.post("../api/timelion/run",{sheet:[expression],extended:{es:{filter:(0,_esQuery.buildEsQuery)(undefined,query,filters,esQueryConfigs)}},time:_lodash.default.extend(timeRange,{interval:visParams.interval,timezone:timezone})}).then(function(resp){return resp.data}).catch(function(resp){throw resp.data});httpResult.then(function(resp){resolve(resp)}).catch(function(resp){var err=new Error(resp.message);err.stack=resp.stack;_notify.toastNotifications.addError(err,{title:_i18n.i18n.translate("timelion.requestHandlerErrorTitle",{defaultMessage:"Timelion request error"})});reject(err)})})}}};exports.TimelionRequestHandlerProvider=TimelionRequestHandlerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={typeSpecs:true};exports.typeSpecs=void 0;var _boolean=__webpack_require__(1147);var _datatable=__webpack_require__(1148);Object.keys(_datatable).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _datatable[key]}})});var _error=__webpack_require__(1149);Object.keys(_error).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _error[key]}})});var _filter=__webpack_require__(1150);Object.keys(_filter).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter[key]}})});var _image=__webpack_require__(1151);Object.keys(_image).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _image[key]}})});var _null=__webpack_require__(1152);var _number=__webpack_require__(1153);var _pointseries=__webpack_require__(1154);Object.keys(_pointseries).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _pointseries[key]}})});var _range=__webpack_require__(1155);Object.keys(_range).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _range[key]}})});var _render=__webpack_require__(1156);Object.keys(_render).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _render[key]}})});var _shape=__webpack_require__(1157);var _string=__webpack_require__(1158);var _style=__webpack_require__(1159);Object.keys(_style).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _style[key]}})});var _kibana_context=__webpack_require__(1160);Object.keys(_kibana_context).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _kibana_context[key]}})});var _kibana_datatable=__webpack_require__(1161);Object.keys(_kibana_datatable).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _kibana_datatable[key]}})});var typeSpecs=[_boolean.boolean,_datatable.datatable,_error.error,_filter.filter,_image.image,_number.number,_null.nullType,_pointseries.pointseries,_range.range,_render.render,_shape.shape,_string.string,_style.style,_kibana_context.kibanaContext,_kibana_datatable.kibanaDatatable];exports.typeSpecs=typeSpecs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FUNCTIONS_URL=void 0;var FUNCTIONS_URL="/api/interpreter/fns";exports.FUNCTIONS_URL=FUNCTIONS_URL},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CourierRequestHandlerProvider=void 0;var _lodash=__webpack_require__(1);var _i18n=__webpack_require__(2);var _vis_request_handlers=__webpack_require__(354);var _calculate_object_hash=__webpack_require__(608);var _courier_inspector_utils=__webpack_require__(351);var _tabify=__webpack_require__(418);var _build_tabular_inspector_data=__webpack_require__(1174);var _get_time=__webpack_require__(398);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var CourierRequestHandlerProvider=function CourierRequestHandlerProvider(){return{name:"courier",handler:function(){var _handler=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var searchSource,aggs,timeRange,query,filters,forceFetch,partialRows,metricsAtAllLevels,inspectorAdapters,queryFilter,abortSignal,timeFilterSearchSource,requestSearchSource,reqBody,queryHash,shouldQuery,request,response,resp,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,agg,parsedTimeRange,tabifyParams,tabifyCacheHash,shouldCalculateNewTabify;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchSource=_ref.searchSource,aggs=_ref.aggs,timeRange=_ref.timeRange,query=_ref.query,filters=_ref.filters,forceFetch=_ref.forceFetch,partialRows=_ref.partialRows,metricsAtAllLevels=_ref.metricsAtAllLevels,inspectorAdapters=_ref.inspectorAdapters,queryFilter=_ref.queryFilter,abortSignal=_ref.abortSignal;timeFilterSearchSource=searchSource.createChild({callParentStartHandlers:true});requestSearchSource=timeFilterSearchSource.createChild({callParentStartHandlers:true});aggs.setTimeRange(timeRange);Object.defineProperty(requestSearchSource,"history",{get:function get(){return searchSource.history},set:function set(history){return searchSource.history=history}});requestSearchSource.setField("aggs",function(){return aggs.toDsl(metricsAtAllLevels)});requestSearchSource.onRequestStart(function(searchSource,searchRequest){return aggs.onSearchRequestStart(searchSource,searchRequest)});if(timeRange){timeFilterSearchSource.setField("filter",function(){return(0,_get_time.getTime)(searchSource.getField("index"),timeRange)})}requestSearchSource.setField("filter",filters);requestSearchSource.setField("query",query);_context.next=12;return requestSearchSource.getSearchRequestBody();case 12:reqBody=_context.sent;queryHash=(0,_calculate_object_hash.calculateObjectHash)(reqBody);shouldQuery=forceFetch||searchSource.lastQuery!==queryHash;if(!shouldQuery){_context.next=36;break}inspectorAdapters.requests.reset();request=inspectorAdapters.requests.start(_i18n.i18n.translate("common.ui.vis.courier.inspector.dataRequest.title",{defaultMessage:"Data"}),{description:_i18n.i18n.translate("common.ui.vis.courier.inspector.dataRequest.description",{defaultMessage:"This request queries Elasticsearch to fetch the data for the visualization."})});request.stats((0,_courier_inspector_utils.getRequestInspectorStats)(requestSearchSource));_context.prev=19;if(abortSignal){abortSignal.addEventListener("abort",function(){return requestSearchSource.cancelQueued()})}_context.next=23;return requestSearchSource.fetch();case 23:response=_context.sent;searchSource.lastQuery=queryHash;request.stats((0,_courier_inspector_utils.getResponseInspectorStats)(searchSource,response)).ok({json:response});searchSource.rawResponse=response;_context.next=33;break;case 29:_context.prev=29;_context.t0=_context["catch"](19);request.error({json:_context.t0});throw _context.t0;case 33:_context.prev=33;requestSearchSource.getSearchRequestBody().then(function(req){request.json(req)});return _context.finish(33);case 36:resp=searchSource.rawResponse;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=40;_iterator=aggs[Symbol.iterator]();case 42:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=51;break}agg=_step.value;if(!(0,_lodash.has)(agg,"type.postFlightRequest")){_context.next=48;break}_context.next=47;return agg.type.postFlightRequest(resp,aggs,agg,requestSearchSource,inspectorAdapters,abortSignal);case 47:resp=_context.sent;case 48:_iteratorNormalCompletion=true;_context.next=42;break;case 51:_context.next=57;break;case 53:_context.prev=53;_context.t1=_context["catch"](40);_didIteratorError=true;_iteratorError=_context.t1;case 57:_context.prev=57;_context.prev=58;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 60:_context.prev=60;if(!_didIteratorError){_context.next=63;break}throw _iteratorError;case 63:return _context.finish(60);case 64:return _context.finish(57);case 65:searchSource.finalResponse=resp;parsedTimeRange=timeRange?(0,_get_time.getTime)(aggs.indexPattern,timeRange):null;tabifyParams={metricsAtAllLevels:metricsAtAllLevels,partialRows:partialRows,timeRange:parsedTimeRange?parsedTimeRange.range:undefined};tabifyCacheHash=(0,_calculate_object_hash.calculateObjectHash)(_objectSpread({tabifyAggs:aggs},tabifyParams));shouldCalculateNewTabify=shouldQuery||searchSource.lastTabifyHash!==tabifyCacheHash;if(shouldCalculateNewTabify){searchSource.lastTabifyHash=tabifyCacheHash;searchSource.tabifiedResponse=(0,_tabify.tabifyAggResponse)(aggs,searchSource.finalResponse,tabifyParams)}inspectorAdapters.data.setTabularLoader(function(){return(0,_build_tabular_inspector_data.buildTabularInspectorData)(searchSource.tabifiedResponse,queryFilter)},{returnsFormattedValues:true});return _context.abrupt("return",searchSource.tabifiedResponse);case 73:case"end":return _context.stop()}}},_callee,null,[[19,29,33,36],[40,53,57,65],[58,,60,64]])}));function handler(_x){return _handler.apply(this,arguments)}return handler}()}};exports.CourierRequestHandlerProvider=CourierRequestHandlerProvider;_vis_request_handlers.VisRequestHandlersRegistryProvider.register(CourierRequestHandlerProvider)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateObjectHash=void 0;function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function pad(hash,len){while(hash.length<len){hash="0"+hash}return hash}function fold(hash,text){var i;var chr;var len;if(text.length===0){return hash}for(i=0,len=text.length;i<len;i++){chr=text.charCodeAt(i);hash=(hash<<5)-hash+chr;hash|=0}return hash<0?hash*-2:hash}function foldObject(hash,o,seen){return Object.keys(o).sort().reduce(foldKey,hash);function foldKey(hash,key){return foldValue(hash,o[key],key,seen)}}function foldValue(input,value,key,seen){var hash=fold(fold(fold(input,key),toString(value)),_typeof(value));if(value===null){return fold(hash,"null")}if(value===undefined){return fold(hash,"undefined")}if(_typeof(value)==="object"){if(key==="vis"&&value.constructor.name==="Vis"){return hash}if(seen.indexOf(value)!==-1){return fold(hash,"[Circular]"+key)}seen.push(value);return foldObject(hash,value,seen)}return fold(hash,value.toString())}function toString(o){return Object.prototype.toString.call(o)}function sum(o){return pad(foldValue(0,o,"",[]).toString(16),8)}var calculateObjectHash=sum;exports.calculateObjectHash=calculateObjectHash},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchRequestProvider",{enumerable:true,get:function get(){return _search_request.SearchRequestProvider}});var _search_request=__webpack_require__(1177)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"assignSearchRequestsToSearchStrategies",{enumerable:true,get:function get(){return _search_strategy_registry.assignSearchRequestsToSearchStrategies}});Object.defineProperty(exports,"addSearchStrategy",{enumerable:true,get:function get(){return _search_strategy_registry.addSearchStrategy}});Object.defineProperty(exports,"hasSearchStategyForIndexPattern",{enumerable:true,get:function get(){return _search_strategy_registry.hasSearchStategyForIndexPattern}});Object.defineProperty(exports,"isDefaultTypeIndexPattern",{enumerable:true,get:function get(){return _is_default_type_index_pattern.isDefaultTypeIndexPattern}});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search_error.SearchError}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search_error.getSearchErrorType}});var _search_strategy_registry=__webpack_require__(611);var _is_default_type_index_pattern=__webpack_require__(612);var _search_error=__webpack_require__(356)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hasSearchStategyForIndexPattern=exports.assignSearchRequestsToSearchStrategies=exports.addSearchStrategy=void 0;var _no_op_search_strategy=__webpack_require__(1186);var searchStrategies=[];var addSearchStrategy=function addSearchStrategy(searchStrategy){if(searchStrategies.includes(searchStrategy)){return}searchStrategies.push(searchStrategy)};exports.addSearchStrategy=addSearchStrategy;var getSearchStrategyByViability=function getSearchStrategyByViability(indexPattern){return searchStrategies.find(function(searchStrategy){return searchStrategy.isViable(indexPattern)})};var getSearchStrategyById=function getSearchStrategyById(searchStrategyId){return searchStrategies.find(function(searchStrategy){return searchStrategy.id===searchStrategyId})};var getSearchStrategyForSearchRequest=function getSearchStrategyForSearchRequest(searchRequest){var preferredSearchStrategyId=searchRequest.source.getPreferredSearchStrategyId();if(preferredSearchStrategyId!=null){return getSearchStrategyById(preferredSearchStrategyId)}var indexPattern=searchRequest.source.getField("index");var viableSearchStrategy=getSearchStrategyByViability(indexPattern);if(viableSearchStrategy){return viableSearchStrategy}return _no_op_search_strategy.noOpSearchStrategy};var assignSearchRequestsToSearchStrategies=function assignSearchRequestsToSearchStrategies(searchRequests){var searchStrategiesWithRequests=[];var searchStrategyById={};searchRequests.forEach(function(searchRequest){var matchingSearchStrategy=getSearchStrategyForSearchRequest(searchRequest);var id=matchingSearchStrategy.id;var searchStrategyWithRequest=searchStrategyById[id];if(!searchStrategyWithRequest){searchStrategyWithRequest={searchStrategy:matchingSearchStrategy,searchRequests:[]};searchStrategyById[id]=searchStrategyWithRequest;searchStrategiesWithRequests.push(searchStrategyWithRequest)}searchStrategyWithRequest.searchRequests.push(searchRequest)});return searchStrategiesWithRequests};exports.assignSearchRequestsToSearchStrategies=assignSearchRequestsToSearchStrategies;var hasSearchStategyForIndexPattern=function hasSearchStategyForIndexPattern(indexPattern){return Boolean(getSearchStrategyByViability(indexPattern))};exports.hasSearchStategyForIndexPattern=hasSearchStategyForIndexPattern},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDefaultTypeIndexPattern=void 0;var isDefaultTypeIndexPattern=function isDefaultTypeIndexPattern(indexPattern){return!indexPattern.type};exports.isDefaultTypeIndexPattern=isDefaultTypeIndexPattern},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFailurePropsForSummary=getFailurePropsForSummary;exports.getFailureSummaryText=getFailureSummaryText;exports.getFailureSummaryDetailsText=getFailureSummaryDetailsText;exports.ShardFailureDescriptionHeader=ShardFailureDescriptionHeader;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFailurePropsForSummary(failure){var failureDetailProps=["shard","index","node"];return failureDetailProps.filter(function(key){return typeof failure[key]==="number"||typeof failure[key]==="string"}).map(function(key){return{key:key,value:String(failure[key])}})}function getFailureSummaryText(failure,failureDetails){var failureName=failure.reason.type;var displayDetails=typeof failureDetails==="string"?failureDetails:getFailureSummaryDetailsText(failure);return _i18n.i18n.translate("common.ui.courier.fetch.shardsFailedModal.failureHeader",{defaultMessage:"{failureName} at {failureDetails}",values:{failureName:failureName,failureDetails:displayDetails},description:'Summary of shard failures, e.g. "IllegalArgumentException at shard 0 node xyz"'})}function getFailureSummaryDetailsText(failure){return getFailurePropsForSummary(failure).map(function(_ref){var key=_ref.key,value=_ref.value;return"".concat(key,": ").concat(value)}).join(", ")}function ShardFailureDescriptionHeader(props){var failureDetails=getFailurePropsForSummary(props).map(function(kv){return _react.default.createElement("span",{className:"shardFailureModal__keyValueTitle",key:kv.key},_react.default.createElement(_eui.EuiCode,null,kv.key)," ",kv.value)});return _react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h2",null,getFailureSummaryText(props,""),failureDetails))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldWildcardProvider",{enumerable:true,get:function get(){return _field_wildcard.FieldWildcardProvider}});var _field_wildcard=__webpack_require__(1197)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fonts=exports.palatino=exports.optima=exports.openSans=exports.myriad=exports.lucidaGrande=exports.hoeflerText=exports.helveticaNeue=exports.gillSans=exports.futura=exports.didot=exports.chalkboard=exports.brushScript=exports.bookAntiqua=exports.baskerville=exports.arial=exports.americanTypewriter=void 0;function createFont(font){return font}var americanTypewriter=createFont({label:"American Typewriter",value:"'American Typewriter', 'Courier New', Courier, Monaco, mono"});exports.americanTypewriter=americanTypewriter;var arial=createFont({label:"Arial",value:"Arial, sans-serif"});exports.arial=arial;var baskerville=createFont({label:"Baskerville",value:"Baskerville, Georgia, Garamond, 'Times New Roman', Times, serif"});exports.baskerville=baskerville;var bookAntiqua=createFont({label:"Book Antiqua",value:"'Book Antiqua', Georgia, Garamond, 'Times New Roman', Times, serif"});exports.bookAntiqua=bookAntiqua;var brushScript=createFont({label:"Brush Script",value:"'Brush Script MT', 'Comic Sans', sans-serif"});exports.brushScript=brushScript;var chalkboard=createFont({label:"Chalkboard",value:"Chalkboard, 'Comic Sans', sans-serif"});exports.chalkboard=chalkboard;var didot=createFont({label:"Didot",value:"Didot, Georgia, Garamond, 'Times New Roman', Times, serif"});exports.didot=didot;var futura=createFont({label:"Futura",value:"Futura, Impact, Helvetica, Arial, sans-serif"});exports.futura=futura;var gillSans=createFont({label:"Gill Sans",value:"'Gill Sans', 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Helvetica, Arial, sans-serif"});exports.gillSans=gillSans;var helveticaNeue=createFont({label:"Helvetica Neue",value:"'Helvetica Neue', Helvetica, Arial, sans-serif"});exports.helveticaNeue=helveticaNeue;var hoeflerText=createFont({label:"Hoefler Text",value:"'Hoefler Text', Garamond, Georgia, 'Times New Roman', Times, serif"});exports.hoeflerText=hoeflerText;var lucidaGrande=createFont({label:"Lucida Grande",value:"'Lucida Grande', 'Lucida Sans Unicode', Lucida, Verdana, Helvetica, Arial, sans-serif"});exports.lucidaGrande=lucidaGrande;var myriad=createFont({label:"Myriad",value:"Myriad, Helvetica, Arial, sans-serif"});exports.myriad=myriad;var openSans=createFont({label:"Open Sans",value:"'Open Sans', Helvetica, Arial, sans-serif"});exports.openSans=openSans;var optima=createFont({label:"Optima",value:"Optima, 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Helvetica, Arial, sans-serif"});exports.optima=optima;var palatino=createFont({label:"Palatino",value:"Palatino, 'Book Antiqua', Georgia, Garamond, 'Times New Roman', Times, serif"});exports.palatino=palatino;var fonts=[americanTypewriter,arial,baskerville,bookAntiqua,brushScript,chalkboard,didot,futura,gillSans,helveticaNeue,hoeflerText,lucidaGrande,myriad,openSans,optima,palatino];exports.fonts=fonts},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visualizationLoader=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(13);var _visualization=__webpack_require__(1210);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderVisualization(element,vis,visData,visParams,uiState,params){return new Promise(function(resolve){var listenOnChange=_lodash.default.get(params,"listenOnChange",false);(0,_reactDom.render)(_react.default.createElement(_visualization.Visualization,{vis:vis,visData:visData,visParams:visParams,uiState:uiState,listenOnChange:listenOnChange,onInit:resolve}),element)})}function destroy(element){if(element){(0,_reactDom.unmountComponentAtNode)(element)}}var visualizationLoader={render:renderVisualization,destroy:destroy};exports.visualizationLoader=visualizationLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.memoizeLast=memoizeLast;var neverCalled=Symbol();function memoizeLast(func){var prevCall=neverCalled;var memoizedFunction=function memoizedFunction(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(prevCall!==neverCalled&&prevCall.this===this&&prevCall.args.length===args.length&&prevCall.args.every(function(arg,index){return arg===args[index]})){return prevCall.returnValue}prevCall={args:args,this:this,returnValue:func.apply(this,args)};return prevCall.returnValue};return memoizedFunction}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RenderCompleteHelper=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var attributeName="data-render-complete";var RenderCompleteHelper=function RenderCompleteHelper(element){var _this=this;_classCallCheck(this,RenderCompleteHelper);this.element=element;_defineProperty(this,"destroy",function(){_this.element.removeEventListener("renderStart",_this.start);_this.element.removeEventListener("renderComplete",_this.complete)});_defineProperty(this,"setup",function(){_this.element.setAttribute(attributeName,"false");_this.element.addEventListener("renderStart",_this.start);_this.element.addEventListener("renderComplete",_this.complete)});_defineProperty(this,"disable",function(){_this.element.setAttribute(attributeName,"disabled");_this.destroy()});_defineProperty(this,"start",function(){_this.element.setAttribute(attributeName,"false");return true});_defineProperty(this,"complete",function(){_this.element.setAttribute(attributeName,"true");return true});this.setup()};exports.RenderCompleteHelper=RenderCompleteHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ResizeChecker",{enumerable:true,get:function get(){return _resize_checker.ResizeChecker}});var _resize_checker=__webpack_require__(1213)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.orderXValues=orderXValues;var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(14));var _uniq_keys=__webpack_require__(1254);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function orderXValues(obj){var orderBucketsBySum=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!_lodash.default.isObject(obj)){throw new Error("orderXValues expects an object")}var uniqKeys=(0,_uniq_keys.getUniqKeys)(obj);var uniqKeysPairs=_toConsumableArray(uniqKeys.entries());var interval=_lodash.default.get(obj,"ordered.interval");var dateInterval=_moment.default.isDuration(interval)?interval:false;return(0,_lodash.default)(uniqKeysPairs).sortBy(function(d){if(d[1].isDate||d[1].isOrdered){return+d[0]}return orderBucketsBySum?-d[1].sum:d[1].index}).map(function(d,i,list){if(!d[1].isNumber)return d[0];var val=+d[0];if(interval==null)return val;var gapEdge=parseFloat(_lodash.default.get(list,[i+1,0]));if(isNaN(gapEdge))return val;var vals=[];var next=val;if(dateInterval){next=(0,_moment.default)(val);while(next<gapEdge){vals.push(next.valueOf());next.add(dateInterval)}}else{while(next<gapEdge){vals.push(next);next+=interval}}return vals}).flatten().value()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mappedColors=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _d=_interopRequireDefault(__webpack_require__(15));var _chrome=_interopRequireDefault(__webpack_require__(7));var _color_palette=__webpack_require__(1263);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var standardizeColor=function standardizeColor(color){return _d.default.rgb(color).toString()};var config=_chrome.default.getUiSettingsClient();function getConfigColorMapping(){return _lodash.default.mapValues(config.get("visualization:colorMapping"),standardizeColor)}var MappedColors=function(){function MappedColors(){_classCallCheck(this,MappedColors);this.oldMap={};this.mapping={}}_createClass(MappedColors,[{key:"get",value:function get(key){return getConfigColorMapping()[key]||this.mapping[key]}},{key:"flush",value:function flush(){this.oldMap=_lodash.default.clone(this.mapping);this.mapping={}}},{key:"purge",value:function purge(){this.oldMap={};this.mapping={}}},{key:"mapKeys",value:function mapKeys(keys){var _this=this;var configMapping=getConfigColorMapping();var configColors=_lodash.default.values(configMapping);var oldColors=_lodash.default.values(this.oldMap);var keysToMap=[];_lodash.default.each(keys,function(key){if(configMapping[key])delete _this.mapping[key];if(_lodash.default.contains(configColors,_this.mapping[key]))keysToMap.push(key);if(_this.oldMap[key])_this.mapping[key]=_this.oldMap[key];if(_this.get(key)==null)keysToMap.push(key)});var allColors=(0,_lodash.default)(this.mapping).values().union(configColors).union(oldColors).value();var colorPalette=(0,_color_palette.createColorPalette)(allColors.length+keysToMap.length);var newColors=_lodash.default.difference(colorPalette,allColors);while(keysToMap.length>newColors.length){newColors=newColors.concat(_lodash.default.sample(allColors,keysToMap.length-newColors.length))}_lodash.default.merge(this.mapping,_lodash.default.zipObject(keysToMap,newColors))}}]);return MappedColors}();var mappedColors=new MappedColors;exports.mappedColors=mappedColors},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.seedColors=void 0;var seedColors=["#00a69b","#57c17b","#6f87d8","#663db8","#bc52bc","#9e3533","#daa05d"];exports.seedColors=seedColors},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.vislibPieConfig=vislibPieConfig;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function vislibPieConfig(config){if(!config.chart){config.chart=_lodash.default.defaults({},config,{type:"pie",labels:{show:false,truncate:100}})}return config}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.vislibPointSeriesTypes=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createSeriesFromParams=function createSeriesFromParams(cfg,seri){var seriId=seri.id&&seri.id.indexOf(".")!==-1?seri.id.split(".")[0]:seri.id;var matchingSeriesParams=cfg.seriesParams?cfg.seriesParams.find(function(seriConfig){return seriId===seriConfig.data.id}):null;var interpolate=cfg.smoothLines?"cardinal":cfg.interpolate;if(!matchingSeriesParams){var seriesParams0=Array.isArray(cfg.seriesParams)&&cfg.seriesParams[0]?cfg.seriesParams[0]:cfg;var stacked=["stacked","percentage","wiggle","silhouette"].includes(cfg.mode);return{show:true,type:cfg.type||"line",mode:stacked?"stacked":"normal",interpolate:interpolate,drawLinesBetweenPoints:seriesParams0.drawLinesBetweenPoints,showCircles:seriesParams0.showCircles,radiusRatio:cfg.radiusRatio,data:seri}}return _objectSpread({},matchingSeriesParams,{data:seri,radiusRatio:cfg.radiusRatio})};var createSeries=function createSeries(cfg,series){return{type:"point_series",addTimeMarker:cfg.addTimeMarker,series:_lodash.default.map(series,function(seri){return createSeriesFromParams(cfg,seri)})}};var createCharts=function createCharts(cfg,data){if(data.rows||data.columns){var charts=data.rows?data.rows:data.columns;return charts.map(function(chart){return createSeries(cfg,chart.series)})}return[createSeries(cfg,data.series)]};function create(opts){opts=opts||{};return function(cfg,data){var isUserDefinedYAxis=cfg.setYExtents;var defaultYExtents=cfg.defaultYExtents;var config=_lodash.default.cloneDeep(cfg);_lodash.default.defaultsDeep(config,{chartTitle:{},mode:"normal"},opts);config.type="point_series";if(!config.tooltip){config.tooltip={show:cfg.addTooltip}}if(!config.valueAxes){var mode=config.mode;if(["stacked","overlap"].includes(mode))mode="normal";config.valueAxes=[{id:"ValueAxis-1",type:"value",scale:{type:config.scale,setYExtents:config.setYExtents,defaultYExtents:config.defaultYExtents,boundsMargin:defaultYExtents?config.boundsMargin:0,min:isUserDefinedYAxis?config.yAxis.min:undefined,max:isUserDefinedYAxis?config.yAxis.max:undefined,mode:mode},labels:{axisFormatter:data.data.yAxisFormatter||data.get("yAxisFormatter")},title:{text:data.get("yAxisLabel")}}]}else{config.valueAxes.forEach(function(axis){if(axis.labels){axis.labels.axisFormatter=data.data.yAxisFormatter||data.get("yAxisFormatter")}})}if(!config.categoryAxes){config.categoryAxes=[{id:"CategoryAxis-1",type:"category",labels:{axisFormatter:data.data.xAxisFormatter||data.get("xAxisFormatter")},scale:{expandLastBucket:opts.expandLastBucket},title:{text:data.get("xAxisLabel")}}]}else{var categoryAxis1=config.categoryAxes.find(function(categoryAxis){return categoryAxis.id==="CategoryAxis-1"});if(categoryAxis1){categoryAxis1.title.text=data.get("xAxisLabel")}}if(!config.charts){config.charts=createCharts(cfg,data.data)}if(typeof config.enableHover==="undefined")config.enableHover=true;return config}}var vislibPointSeriesTypes={line:create(),column:create({expandLastBucket:true}),area:create({alerts:[{type:"warning",msg:"Positive and negative values are not accurately represented by stacked "+'area charts. Either changing the chart mode to "overlap" or using a '+"bar chart is recommended.",test:function test(vis,data){if(!data.shouldBeStacked()||data.maxNumberOfSeries()<2)return;var hasPos=data.getYMax(data._getY)>0;var hasNeg=data.getYMin(data._getY)<0;return hasPos&&hasNeg}},{type:"warning",msg:"Parts of or the entire area chart might not be displayed due to null "+"values in the data. A line chart is recommended when displaying data "+"with null values.",test:function test(vis,data){return data.hasNullValues()}}]}),heatmap:function heatmap(cfg,data){var defaults=create()(cfg,data);var hasCharts=defaults.charts.length;var tooManySeries=defaults.charts.length&&defaults.charts[0].series.length>cfg.heatmapMaxBuckets;if(hasCharts&&tooManySeries){defaults.error=_i18n.i18n.translate("common.ui.vislib.heatmap.maxBucketsText",{defaultMessage:"There are too many series defined ({nr}). The configured maximum is {max}.",values:{max:cfg.heatmapMaxBuckets,nr:defaults.charts[0].series.length},description:"This message appears at heatmap visualizations"})}defaults.valueAxes[0].show=false;defaults.categoryAxes[0].style={rangePadding:0,rangeOuterPadding:0};defaults.categoryAxes.push({id:"CategoryAxis-2",type:"category",position:"left",values:data.getLabels(),scale:{inverted:true},labels:{filter:false,axisFormatter:function axisFormatter(val){return val}},style:{rangePadding:0,rangeOuterPadding:0},title:{text:data.get("zAxisLabel")||""}});return defaults}};exports.vislibPointSeriesTypes=vislibPointSeriesTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.vislibTypesConfig=void 0;var _point_series=__webpack_require__(624);var _pie=__webpack_require__(623);var _gauge=__webpack_require__(1265);var vislibTypesConfig={histogram:_point_series.vislibPointSeriesTypes.column,horizontal_bar:_point_series.vislibPointSeriesTypes.column,line:_point_series.vislibPointSeriesTypes.line,pie:_pie.vislibPieConfig,area:_point_series.vislibPointSeriesTypes.area,point_series:_point_series.vislibPointSeriesTypes.line,heatmap:_point_series.vislibPointSeriesTypes.heatmap,gauge:_gauge.vislibGaugeConfig,goal:_gauge.vislibGaugeConfig,metric:_gauge.vislibGaugeConfig};exports.vislibTypesConfig=vislibTypesConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.layoutTypes=void 0;var _column_layout=__webpack_require__(1266);var _pie_layout=__webpack_require__(1271);var _gauge_layout=__webpack_require__(1274);var layoutTypes={pie:_pie_layout.pieLayout,gauge:_gauge_layout.gaugeLayout,goal:_gauge_layout.gaugeLayout,metric:_gauge_layout.gaugeLayout,point_series:_column_layout.columnLayout};exports.layoutTypes=layoutTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visTypes=void 0;var _point_series=__webpack_require__(1276);var _pie_chart=__webpack_require__(1292);var _gauge_chart=__webpack_require__(1293);var visTypes={pie:_pie_chart.PieChart,point_series:_point_series.PointSeries,gauge:_gauge_chart.GaugeChart,goal:_gauge_chart.GaugeChart,metric:_gauge_chart.GaugeChart};exports.visTypes=visTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Binder",{enumerable:true,get:function get(){return _binder.Binder}});var _binder=__webpack_require__(1278)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2608)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HierarchicalTooltipFormatterProvider=HierarchicalTooltipFormatterProvider;exports.setHierarchicalTooltipFormatter=exports.getHierarchicalTooltipFormatter=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));var _collect_branch=__webpack_require__(1282);var _numeral=_interopRequireDefault(__webpack_require__(429));var _hierarchical_tooltip=_interopRequireDefault(__webpack_require__(1283));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HierarchicalTooltipFormatterProvider($rootScope,$compile,$sce){var $tooltip=(0,_jquery.default)(_hierarchical_tooltip.default);var $tooltipScope=$rootScope.$new();$compile($tooltip)($tooltipScope);return function(metricFieldFormatter){return function(event){var datum=event.datum;$tooltipScope.rows=(0,_collect_branch.collectBranch)(datum);_lodash.default.forEachRight($tooltipScope.rows,function(row){row.spacer=$sce.trustAsHtml(_lodash.default.repeat("&nbsp;",row.depth));var percent;if(row.item.percentOfGroup!=null){percent=row.item.percentOfGroup}row.metric=metricFieldFormatter?metricFieldFormatter.convert(row.metric):row.metric;if(percent!=null){row.metric+=" ("+(0,_numeral.default)(percent).format("0.[00]%")+")"}return row});$tooltipScope.$apply();return $tooltip[0].outerHTML}}}var _tooltipFormatter;var getHierarchicalTooltipFormatter=function getHierarchicalTooltipFormatter(){if(!_tooltipFormatter){throw new Error("tooltip formatter not initialized")}return _tooltipFormatter};exports.getHierarchicalTooltipFormatter=getHierarchicalTooltipFormatter;var setHierarchicalTooltipFormatter=function setHierarchicalTooltipFormatter(Private){_tooltipFormatter=Private(HierarchicalTooltipFormatterProvider)};exports.setHierarchicalTooltipFormatter=setHierarchicalTooltipFormatter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeriesTooltipFormatterProvider=PointSeriesTooltipFormatterProvider;exports.setPointSeriesTooltipFormatter=exports.getPointSeriesTooltipFormatter=void 0;var _jquery=_interopRequireDefault(__webpack_require__(12));var _pointseries_tooltip=_interopRequireDefault(__webpack_require__(1284));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesTooltipFormatterProvider($compile,$rootScope){var $tooltipScope=$rootScope.$new();var $tooltip=(0,_jquery.default)(_pointseries_tooltip.default);$compile($tooltip)($tooltipScope);return function(){return function tooltipFormatter(event){var data=event.data;var datum=event.datum;if(!datum)return"";var details=$tooltipScope.details=[];var currentSeries=data.series&&data.series.find(function(serie){return serie.rawId===datum.seriesId});var addDetail=function addDetail(label,value){return details.push({label:label,value:value})};if(datum.extraMetrics){datum.extraMetrics.forEach(function(metric){addDetail(metric.label,metric.value)})}if(datum.x){addDetail(data.xAxisLabel,data.xAxisFormatter(datum.x))}if(datum.y){var value=datum.yScale?datum.yScale*datum.y:datum.y;addDetail(currentSeries.label,currentSeries.yAxisFormatter(value))}if(datum.z){addDetail(currentSeries.zLabel,currentSeries.zAxisFormatter(datum.z))}if(datum.series&&datum.parent){var dimension=datum.parent;addDetail(dimension.title,datum.series)}if(datum.tableRaw){addDetail(datum.tableRaw.title,datum.tableRaw.value)}$tooltipScope.$apply();return $tooltip[0].outerHTML}}}var _tooltipFormatter;var getPointSeriesTooltipFormatter=function getPointSeriesTooltipFormatter(){if(!_tooltipFormatter){throw new Error("tooltip formatter not initialized")}return _tooltipFormatter};exports.getPointSeriesTooltipFormatter=getPointSeriesTooltipFormatter;var setPointSeriesTooltipFormatter=function setPointSeriesTooltipFormatter(Private){_tooltipFormatter=Private(PointSeriesTooltipFormatterProvider)};exports.setPointSeriesTooltipFormatter=setPointSeriesTooltipFormatter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.truncateLabel=void 0;var _jquery=_interopRequireDefault(__webpack_require__(12));var _d=_interopRequireDefault(__webpack_require__(15));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var truncateLabel=function truncateLabel(text,size){var node=_d.default.select(text).node();var str=(0,_jquery.default)(node).text();if(size===0)return str;if(size>=str.length)return str;return str.substr(0,size)+"…"};exports.truncateLabel=truncateLabel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Axis=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));var _error_handler=__webpack_require__(634);var _axis_title=__webpack_require__(1301);var _axis_labels=__webpack_require__(1302);var _axis_scale=__webpack_require__(1303);var _axis_config=__webpack_require__(1305);var _errors=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Axis=function(_ErrorHandler){_inherits(Axis,_ErrorHandler);function Axis(visConfig,axisConfigArgs){var _this;_classCallCheck(this,Axis);_this=_possibleConstructorReturn(this,_getPrototypeOf(Axis).call(this));_this.visConfig=visConfig;_this.axisConfig=new _axis_config.AxisConfig(_this.visConfig,axisConfigArgs);if(_this.axisConfig.get("type")==="category"){_this.values=_this.axisConfig.values;_this.ordered=_this.axisConfig.ordered}_this.axisScale=new _axis_scale.AxisScale(_this.axisConfig,visConfig);_this.axisTitle=new _axis_title.AxisTitle(_this.axisConfig);_this.axisLabels=new _axis_labels.AxisLabels(_this.axisConfig,_this.axisScale);_this.stack=_d.default.layout.stack().x(function(d){return d.x}).y(function(d){if(typeof _this.axisConfig.get("scale.offset")==="function"&&_this.axisConfig.get("scale.offset").name==="expand"){return Math.abs(d.y)}return d.y}).offset(_this.axisConfig.get("scale.offset","zero"));var stackedMode=["normal","grouped"].includes(_this.axisConfig.get("scale.mode"));if(stackedMode){_this.stack=_this._stackNegAndPosVals}return _this}_createClass(Axis,[{key:"_stackNegAndPosVals",value:function _stackNegAndPosVals(data){var cache={};data.forEach(function(series){series.forEach(function(value){if(!cache[value.x])cache[value.x]=[0,0];value.y0=cache[value.x][value.y<0?0:1];cache[value.x][value.y<0?0:1]+=value.y})});return data}},{key:"render",value:function render(){var elSelector=this.axisConfig.get("elSelector");var rootEl=this.axisConfig.get("rootEl");_d.default.select(rootEl).selectAll(elSelector).call(this.draw())}},{key:"destroy",value:function destroy(){var elSelector=this.axisConfig.get("elSelector");var rootEl=this.axisConfig.get("rootEl");(0,_jquery.default)(rootEl).find(elSelector).find("svg").remove();this.axisTitle.destroy()}},{key:"getAxis",value:function getAxis(length){var scale=this.axisScale.getScale(length);var position=this.axisConfig.get("position");var axisFormatter=this.axisConfig.get("labels.axisFormatter");var d3Axis=_d.default.svg.axis().scale(scale).tickFormat(axisFormatter).orient(position);if(this.axisConfig.isTimeDomain()){d3Axis.tickValues(scale.timezoneCorrectedTicks(this.tickScale(length)))}else{d3Axis.ticks(this.tickScale(length))}return d3Axis}},{key:"getScale",value:function getScale(){return this.axisScale.scale}},{key:"addInterval",value:function addInterval(interval){return this.axisScale.addInterval(interval)}},{key:"substractInterval",value:function substractInterval(interval){return this.axisScale.substractInterval(interval)}},{key:"tickScale",value:function tickScale(length){var yTickScale=_d.default.scale.linear().clamp(true).domain([20,40,1e3]).range([0,3,11]);return Math.ceil(yTickScale(length))}},{key:"getLength",value:function getLength(el){if(this.axisConfig.isHorizontal()){return(0,_jquery.default)(el).width()}else{return(0,_jquery.default)(el).height()}}},{key:"adjustSize",value:function adjustSize(){var config=this.axisConfig;var style=config.get("style");var chartEl=this.visConfig.get("el");var position=config.get("position");var axisPadding=5;return function(selection){var text=selection.selectAll(".tick text");var lengths=[];text.each(function textWidths(){var _this2=this;lengths.push(function(){if(config.isHorizontal()){return _d.default.select(_this2.parentNode).node().getBBox().height}else{return _d.default.select(_this2.parentNode).node().getBBox().width}}())});var length=lengths.length>0?_lodash.default.max(lengths):0;length+=axisPadding;if(config.isHorizontal()){selection.attr("height",Math.ceil(length));if(position==="top"){selection.select("g").attr("transform","translate(0, ".concat(length-parseInt(style.lineWidth),")"));selection.select("path").attr("transform","translate(1,0)")}if(config.get("type")==="value"){var spacerNodes=(0,_jquery.default)(chartEl).find(".visAxis__spacer--y-".concat(position));var elHeight=(0,_jquery.default)(chartEl).find(".visAxis__column--".concat(position)).height();spacerNodes.height(elHeight)}}else{var axisWidth=Math.ceil(length);selection.attr("width",axisWidth);if(position==="left"){selection.select("g").attr("transform","translate(".concat(axisWidth,",0)"))}}}}},{key:"validate",value:function validate(){if(this.axisConfig.isLogScale()&&this.axisConfig.isPercentage()){throw new _errors.VislibError("Can't mix percentage mode with log scale.")}}},{key:"draw",value:function draw(){var svgs=[];var self=this;var config=this.axisConfig;var style=config.get("style");return function(selection){var n=selection[0].length;if(config.get("show")&&self.axisTitle&&["left","top"].includes(config.get("position"))){self.axisTitle.render(selection)}selection.each(function(){var el=this;var div=_d.default.select(el);var width=(0,_jquery.default)(el).width();var height=(0,_jquery.default)(el).height();var length=self.getLength(el,n);self.validate();var axis=self.getAxis(length);if(config.get("show")){var svg=div.append("svg").attr("focusable","false").attr("width",width).attr("height",height);svgs.push(svg);var axisClass=self.axisConfig.isHorizontal()?"x":"y";svg.append("g").attr("class","".concat(axisClass," axis ").concat(config.get("id"))).call(axis);var container=svg.select("g.axis").node();if(container){svg.select("path").style("stroke",style.color).style("stroke-width",style.lineWidth).style("stroke-opacity",style.opacity);svg.selectAll("line").style("stroke",style.tickColor).style("stroke-width",style.tickWidth).style("stroke-opacity",style.opacity)}if(self.axisLabels)self.axisLabels.render(svg)}});if(self.axisTitle&&["right","bottom"].includes(config.get("position"))){self.axisTitle.render(selection)}svgs.forEach(function(svg){return svg.call(self.adjustSize())})}}}]);return Axis}(_error_handler.ErrorHandler);exports.Axis=Axis},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _errors=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var ErrorHandler=function(){function ErrorHandler(){_classCallCheck(this,ErrorHandler)}_createClass(ErrorHandler,[{key:"validateWidthandHeight",value:function validateWidthandHeight(width,height){var badWidth=_lodash.default.isNaN(width)||width<=0;var badHeight=_lodash.default.isNaN(height)||height<=0;if(badWidth||badHeight){throw new _errors.ContainerTooSmall}}}]);return ErrorHandler}();exports.ErrorHandler=ErrorHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ChartTitle=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _error_handler=__webpack_require__(634);var _tooltip=__webpack_require__(424);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ChartTitle=function(_ErrorHandler){_inherits(ChartTitle,_ErrorHandler);function ChartTitle(visConfig){var _this;_classCallCheck(this,ChartTitle);_this=_possibleConstructorReturn(this,_getPrototypeOf(ChartTitle).call(this));_this.el=visConfig.get("el");_this.tooltip=new _tooltip.Tooltip("chart-title",_this.el,function(d){return"<p>"+_lodash.default.escape(d.label)+"</p>"});return _this}_createClass(ChartTitle,[{key:"render",value:function render(){var el=_d.default.select(this.el).select(".chart-title").node();var width=el?el.clientWidth:0;var height=el?el.clientHeight:0;return _d.default.select(this.el).selectAll(".chart-title").call(this.draw(width,height))}},{key:"truncate",value:function truncate(size){var self=this;return function(selection){selection.each(function(){var text=_d.default.select(this);var n=text[0].length;var maxWidth=size/n*.9;var length=this.getComputedTextLength();var str;var avg;var end;if(length>maxWidth){str=text.text();avg=length/str.length;end=Math.floor(maxWidth/avg)-5;str=str.substr(0,end)+"...";self.addMouseEvents(text);return text.text(str)}return text.text()})}}},{key:"addMouseEvents",value:function addMouseEvents(target){if(this.tooltip){return target.call(this.tooltip.render())}}},{key:"draw",value:function draw(width,height){var self=this;return function(selection){selection.each(function(){var div=_d.default.select(this);var dataType=this.parentNode.__data__.rows?"rows":"columns";var size=dataType==="rows"?height:width;var txtHtOffset=11;self.validateWidthandHeight(width,height);div.append("svg").attr("focusable","false").attr("width",width).attr("height",height).append("text").attr("transform",function(){if(dataType==="rows"){return"translate("+txtHtOffset+","+height/2+")rotate(270)"}return"translate("+width/2+","+txtHtOffset+")"}).attr("text-anchor","middle").text(function(d){return d.label});div.selectAll("text").call(self.truncate(size))})}}}]);return ChartTitle}(_error_handler.ErrorHandler);exports.ChartTitle=ChartTitle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMetricsRequestHandler=void 0;var _validate_interval=__webpack_require__(1314);var _timezone=__webpack_require__(417);var _timefilter=__webpack_require__(22);var _kfetch=__webpack_require__(39);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var createMetricsRequestHandler=function createMetricsRequestHandler(config){var timezone=(0,_timezone.timezoneProvider)(config)();return function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var uiState,timeRange,filters,query,visParams,uiStateObj,parsedTimeRange,scaledDataFormat,dateFormat,maxBuckets,resp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:uiState=_ref.uiState,timeRange=_ref.timeRange,filters=_ref.filters,query=_ref.query,visParams=_ref.visParams;uiStateObj=uiState.get(visParams.type,{});parsedTimeRange=_timefilter.timefilter.calculateBounds(timeRange);scaledDataFormat=config.get("dateFormat:scaled");dateFormat=config.get("dateFormat");if(!(visParams&&visParams.id&&!visParams.isModelInvalid)){_context.next=18;break}_context.prev=6;maxBuckets=config.get("metrics:max_buckets");(0,_validate_interval.validateInterval)(parsedTimeRange,visParams,maxBuckets);_context.next=11;return(0,_kfetch.kfetch)({pathname:"/api/metrics/vis/data",method:"POST",body:JSON.stringify({timerange:_objectSpread({timezone:timezone},parsedTimeRange),query:query,filters:filters,panels:[visParams],state:uiStateObj})});case 11:resp=_context.sent;return _context.abrupt("return",_objectSpread({dateFormat:dateFormat,scaledDataFormat:scaledDataFormat,timezone:timezone},resp));case 15:_context.prev=15;_context.t0=_context["catch"](6);return _context.abrupt("return",Promise.reject(_context.t0));case 18:return _context.abrupt("return",Promise.resolve({}));case 19:case"end":return _context.stop()}}},_callee,null,[[6,15]])}));return function(_x){return _ref2.apply(this,arguments)}}()};exports.createMetricsRequestHandler=createMetricsRequestHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.INTERVAL_STRING_RE=exports.GTE_INTERVAL_RE=void 0;var _datemath=_interopRequireDefault(__webpack_require__(55));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GTE_INTERVAL_RE=new RegExp("^>=([\\d\\.]+\\s*(".concat(_datemath.default.units.join("|"),"))$"));exports.GTE_INTERVAL_RE=GTE_INTERVAL_RE;var INTERVAL_STRING_RE=new RegExp("^([\\d\\.]+)\\s*(".concat(_datemath.default.units.join("|"),")$"));exports.INTERVAL_STRING_RE=INTERVAL_STRING_RE},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchFields=fetchFields;exports.fetchIndexPatternFields=fetchIndexPatternFields;var _kfetch=__webpack_require__(39);var _notify=__webpack_require__(9);var _i18n=__webpack_require__(2);var _extract_index_patterns=__webpack_require__(639);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function fetchFields(){return _fetchFields.apply(this,arguments)}function _fetchFields(){_fetchFields=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPatterns,patterns,indexFields,fields,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPatterns=_args.length>0&&_args[0]!==undefined?_args[0]:["*"];patterns=Array.isArray(indexPatterns)?indexPatterns:[indexPatterns];_context.prev=2;_context.next=5;return Promise.all(patterns.map(function(pattern){return(0,_kfetch.kfetch)({method:"GET",pathname:"/api/metrics/fields",query:{index:pattern}})}));case 5:indexFields=_context.sent;fields=patterns.reduce(function(cumulatedFields,currentPattern,index){return _objectSpread({},cumulatedFields,_defineProperty({},currentPattern,indexFields[index]))},{});return _context.abrupt("return",fields);case 10:_context.prev=10;_context.t0=_context["catch"](2);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("tsvb.fetchFields.loadIndexPatternFieldsErrorMessage",{defaultMessage:"Unable to load index_pattern fields"}),text:_context.t0.message});case 13:case"end":return _context.stop()}}},_callee,null,[[2,10]])}));return _fetchFields.apply(this,arguments)}function fetchIndexPatternFields(_x){return _fetchIndexPatternFields.apply(this,arguments)}function _fetchIndexPatternFields(){_fetchIndexPatternFields=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref){var params,_ref$fields,fields,indexPatterns;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:params=_ref.params,_ref$fields=_ref.fields,fields=_ref$fields===void 0?{}:_ref$fields;indexPatterns=(0,_extract_index_patterns.extractIndexPatterns)(params,fields);_context2.next=4;return fetchFields(indexPatterns);case 4:return _context2.abrupt("return",_context2.sent);case 5:case"end":return _context2.stop()}}},_callee2)}));return _fetchIndexPatternFields.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractIndexPatterns=extractIndexPatterns;var _lodash=__webpack_require__(1);function extractIndexPatterns(panel){var excludedFields=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var patterns=[];if(!excludedFields[panel.index_pattern]){patterns.push(panel.index_pattern)}panel.series.forEach(function(series){var indexPattern=series.series_index_pattern;if(indexPattern&&series.override_index_pattern&&!excludedFields[indexPattern]){patterns.push(indexPattern)}});if(panel.annotations){panel.annotations.forEach(function(item){var indexPattern=item.index_pattern;if(indexPattern&&!excludedFields[indexPattern]){patterns.push(indexPattern)}})}if(patterns.length===0){patterns.push("")}return(0,_lodash.uniq)(patterns).sort()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisEditor=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);var _lodash=__webpack_require__(1);var _esQuery=__webpack_require__(20);var _vis_editor_visualization=__webpack_require__(1317);var _visualization=__webpack_require__(1346);var _vis_picker=__webpack_require__(1390);var _panel_config=__webpack_require__(1391);var _create_brush_handler=__webpack_require__(1461);var _fetch_fields=__webpack_require__(638);var _extract_index_patterns=__webpack_require__(639);var _new_platform=__webpack_require__(8);var _storage=__webpack_require__(97);var _query_input_bar_context=__webpack_require__(658);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var localStorage=new _storage.Storage(window.localStorage);var VIS_STATE_DEBOUNCE_DELAY=200;var APP_NAME="VisEditor";var VisEditor=function(_Component){_inherits(VisEditor,_Component);function VisEditor(props){var _this;_classCallCheck(this,VisEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(VisEditor).call(this,props));_defineProperty(_assertThisInitialized(_this),"getConfig",function(){var _this$props$config;return(_this$props$config=_this.props.config).get.apply(_this$props$config,arguments)});_defineProperty(_assertThisInitialized(_this),"handleUiState",function(field,value){_this.props.vis.uiStateVal(field,value)});_defineProperty(_assertThisInitialized(_this),"updateVisState",(0,_lodash.debounce)(function(){_this.props.vis.params=_this.state.model;_this.props.vis.updateState()},VIS_STATE_DEBOUNCE_DELAY));_defineProperty(_assertThisInitialized(_this),"isValidKueryQuery",function(filterQuery){if(filterQuery&&filterQuery.language==="kuery"){try{var queryOptions=_this.coreContext.uiSettings.get("query:allowLeadingWildcards");(0,_esQuery.fromKueryExpression)(filterQuery.query,{allowLeadingWildcards:queryOptions})}catch(error){return false}}return true});_defineProperty(_assertThisInitialized(_this),"handleChange",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(partialModel){var hasTypeChanged,nextModel,dirty,extractedIndexPatterns;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(0,_lodash.isEmpty)(partialModel)){_context.next=2;break}return _context.abrupt("return");case 2:hasTypeChanged=partialModel.type&&_this.state.model.type!==partialModel.type;nextModel=_objectSpread({},_this.state.model,{},partialModel);dirty=true;if(_this.state.autoApply||hasTypeChanged){_this.updateVisState();dirty=false}if(_this.props.isEditorMode){extractedIndexPatterns=(0,_extract_index_patterns.extractIndexPatterns)(nextModel);if(!(0,_lodash.isEqual)(_this.state.extractedIndexPatterns,extractedIndexPatterns)){(0,_fetch_fields.fetchFields)(extractedIndexPatterns).then(function(visFields){return _this.setState({visFields:visFields,extractedIndexPatterns:extractedIndexPatterns})})}}_this.setState({dirty:dirty,model:nextModel});case 8:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"handleCommit",function(){_this.updateVisState();_this.setState({dirty:false})});_defineProperty(_assertThisInitialized(_this),"handleAutoApplyToggle",function(event){_this.setState({autoApply:event.target.checked})});_defineProperty(_assertThisInitialized(_this),"onDataChange",function(_ref2){var visData=_ref2.visData;_this.visDataSubject.next(visData)});var vis=props.vis;_this.appState=vis.API.getAppState();_this.state={model:props.visParams,dirty:false,autoApply:true,visFields:props.visFields,extractedIndexPatterns:[""]};_this.onBrush=(0,_create_brush_handler.brushHandler)(props.vis.API.timeFilter);_this.visDataSubject=new Rx.BehaviorSubject(_this.props.visData);_this.visData$=_this.visDataSubject.asObservable().pipe((0,_operators.share)());_this.coreContext={appName:APP_NAME,uiSettings:_new_platform.npStart.core.uiSettings,savedObjectsClient:_new_platform.npStart.core.savedObjects.client,store:localStorage};return _this}_createClass(VisEditor,[{key:"render",value:function render(){if(!this.props.isEditorMode){if(!this.props.visParams||!this.props.visData){return null}return _react.default.createElement(_visualization.Visualization,{dateFormat:this.props.config.get("dateFormat"),onBrush:this.onBrush,onUiState:this.handleUiState,uiState:this.uiState,model:this.props.visParams,visData:this.props.visData,getConfig:this.getConfig})}var model=this.state.model;if(model){return _react.default.createElement("div",{className:"tvbEditor","data-test-subj":"tvbVisEditor"},_react.default.createElement("div",{className:"tvbEditor--hideForReporting"},_react.default.createElement(_vis_picker.VisPicker,{model:model,onChange:this.handleChange})),_react.default.createElement(_vis_editor_visualization.VisEditorVisualization,{dirty:this.state.dirty,autoApply:this.state.autoApply,model:model,appState:this.appState,savedObj:this.props.savedObj,timeRange:this.props.timeRange,uiState:this.uiState,onCommit:this.handleCommit,onToggleAutoApply:this.handleAutoApplyToggle,title:this.props.vis.title,description:this.props.vis.description,onDataChange:this.onDataChange}),_react.default.createElement("div",{className:"tvbEditor--hideForReporting"},_react.default.createElement(_query_input_bar_context.CoreStartContextProvider,{value:this.coreContext},_react.default.createElement(_panel_config.PanelConfig,{fields:this.state.visFields,model:model,visData$:this.visData$,dateFormat:this.props.config.get("dateFormat"),onChange:this.handleChange,getConfig:this.getConfig}))))}return null}},{key:"componentDidMount",value:function componentDidMount(){this.props.renderComplete()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.updateVisState.cancel()}},{key:"uiState",get:function get(){return this.props.vis.getUiState()}}]);return VisEditor}(_react.Component);exports.VisEditor=VisEditor;VisEditor.defaultProps={visData:{}};VisEditor.propTypes={vis:_propTypes.default.object,visData:_propTypes.default.object,visFields:_propTypes.default.object,renderComplete:_propTypes.default.func,config:_propTypes.default.object,isEditorMode:_propTypes.default.bool,savedObj:_propTypes.default.object,timeRange:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Inspector",{enumerable:true,get:function get(){return _inspector.Inspector}});Object.defineProperty(exports,"viewRegistry",{enumerable:true,get:function get(){return _view_registry.viewRegistry}});Object.defineProperty(exports,"Adapters",{enumerable:true,get:function get(){return _types.Adapters}});var _inspector=__webpack_require__(1319);var _view_registry=__webpack_require__(1339);var _types=__webpack_require__(642)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Adapters",{enumerable:true,get:function get(){return _public.Adapters}});Object.defineProperty(exports,"InspectorViewProps",{enumerable:true,get:function get(){return _public.InspectorViewProps}});Object.defineProperty(exports,"InspectorViewDescription",{enumerable:true,get:function get(){return _public.InspectorViewDescription}});var _public=__webpack_require__(428)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(908)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDuration=exports.outputFormats=exports.inputFormats=exports.durationInputOptions=exports.durationOutputOptions=void 0;var _i18n=__webpack_require__(2);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var durationBaseOptions=[{label:_i18n.i18n.translate("tsvb.durationOptions.millisecondsLabel",{defaultMessage:"Milliseconds"}),value:"ms"},{label:_i18n.i18n.translate("tsvb.durationOptions.secondsLabel",{defaultMessage:"Seconds"}),value:"s"},{label:_i18n.i18n.translate("tsvb.durationOptions.minutesLabel",{defaultMessage:"Minutes"}),value:"m"},{label:_i18n.i18n.translate("tsvb.durationOptions.hoursLabel",{defaultMessage:"Hours"}),value:"h"},{label:_i18n.i18n.translate("tsvb.durationOptions.daysLabel",{defaultMessage:"Days"}),value:"d"},{label:_i18n.i18n.translate("tsvb.durationOptions.weeksLabel",{defaultMessage:"Weeks"}),value:"w"},{label:_i18n.i18n.translate("tsvb.durationOptions.monthsLabel",{defaultMessage:"Months"}),value:"M"},{label:_i18n.i18n.translate("tsvb.durationOptions.yearsLabel",{defaultMessage:"Years"}),value:"Y"}];var durationOutputOptions=[{label:_i18n.i18n.translate("tsvb.durationOptions.humanize",{defaultMessage:"Human readable"}),value:"humanize"}].concat(durationBaseOptions);exports.durationOutputOptions=durationOutputOptions;var durationInputOptions=[{label:_i18n.i18n.translate("tsvb.durationOptions.picosecondsLabel",{defaultMessage:"Picoseconds"}),value:"ps"},{label:_i18n.i18n.translate("tsvb.durationOptions.nanosecondsLabel",{defaultMessage:"Nanoseconds"}),value:"ns"},{label:_i18n.i18n.translate("tsvb.durationOptions.microsecondsLabel",{defaultMessage:"Microseconds"}),value:"us"}].concat(durationBaseOptions);exports.durationInputOptions=durationInputOptions;var inputFormats={ps:"picoseconds",ns:"nanoseconds",us:"microseconds",ms:"milliseconds",s:"seconds",m:"minutes",h:"hours",d:"days",w:"weeks",M:"months",Y:"years"};exports.inputFormats=inputFormats;var outputFormats={humanize:"humanize",ms:"asMilliseconds",s:"asSeconds",m:"asMinutes",h:"asHours",d:"asDays",w:"asWeeks",M:"asMonths",Y:"asYears"};exports.outputFormats=outputFormats;var isDuration=function isDuration(format){var splittedFormat=format.split(",");var _splittedFormat=_slicedToArray(splittedFormat,2),input=_splittedFormat[0],output=_splittedFormat[1];return Boolean(inputFormats[input]&&outputFormats[output])&&splittedFormat.length===3};exports.isDuration=isDuration},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2101)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.eventBus=void 0;var _jquery=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var eventBus=(0,_jquery.default)({});exports.eventBus=eventBus},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.COLORS=void 0;var COLORS={lineColor:"rgba(105,112,125,0.2)",textColor:"rgba(0,0,0,0.4)",textColorReversed:"rgba(255,255,255,0.5)",valueColor:"rgba(0,0,0,0.7)",valueColorReversed:"rgba(255,255,255,0.8)"};exports.COLORS=COLORS},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createLegendSeries=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createLegendSeries=function createLegendSeries(props){return function(row){var index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;function tickFormatter(value){if(_lodash.default.isFunction(props.tickFormatter))return props.tickFormatter(value);return value}var key="tvbLegend__item".concat(row.id).concat(index);var formatter=row.tickFormatter||tickFormatter;var value=formatter(props.seriesValues[row.id]);var classes=["tvbLegend__item"];if(!_lodash.default.includes(props.seriesFilter,row.id))classes.push("disabled");if(row.label==null||row.legend===false)return _react.default.createElement("div",{key:key,style:{display:"none"}});return _react.default.createElement("div",{key:key,className:classes.join(" "),"data-test-subj":"tsvbLegendItem"},_react.default.createElement("button",{onClick:function onClick(event){return props.onToggle(event,row.id)},className:"tvbLegend__button"},_react.default.createElement("span",{className:"tvbLegend__itemLabel",title:"".concat(row.label,": ").concat(value)},_react.default.createElement(_eui.EuiIcon,{size:"m",type:"dot",color:row.color}),_react.default.createElement("span",null,row.label)),_react.default.createElement("span",{className:"tvbLegend__itemValue"},value)))}};exports.createLegendSeries=createLegendSeries},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visWithSplits=visWithSplits;var _react=_interopRequireDefault(__webpack_require__(0));var _get_display_name=__webpack_require__(1377);var _lodash=__webpack_require__(1);var _calculate_label=__webpack_require__(431);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function visWithSplits(WrappedComponent){function SplitVisComponent(props){var model=props.model,visData=props.visData;if(!model||!visData||!visData[model.id])return _react.default.createElement(WrappedComponent,props);if(visData[model.id].series.every(function(s){return s.id.split(":").length===1})){return _react.default.createElement(WrappedComponent,props)}var splitsVisData=visData[model.id].series.reduce(function(acc,series){var _series$id$split=series.id.split(":"),_series$id$split2=_slicedToArray(_series$id$split,2),seriesId=_series$id$split2[0],splitId=_series$id$split2[1];var seriesModel=model.series.find(function(s){return s.id===seriesId});if(!seriesModel||!splitId)return acc;var metric=(0,_lodash.last)(seriesModel.metrics);var label=(0,_calculate_label.calculateLabel)(metric,seriesModel.metrics);if(!acc[splitId]){acc[splitId]={series:[],label:series.label.toString()}}acc[splitId].series.push(_objectSpread({},series,{id:seriesId,color:series.color||seriesModel.color,label:seriesModel.label||label}));return acc},{});var nonSplitSeries=(0,_lodash.first)(visData[model.id].series.filter(function(series){var seriesModel=model.series.find(function(s){return s.id===series.id});if(!seriesModel)return false;return["everything","filter"].includes(seriesModel.split_mode)}));var indexOfNonSplit=nonSplitSeries?(0,_lodash.findIndex)(model.series,function(s){return s.id===nonSplitSeries.id}):null;var rows=Object.keys(splitsVisData).map(function(key){var splitData=splitsVisData[key];var series=splitData.series,label=splitData.label;var newSeries=indexOfNonSplit!=null&&indexOfNonSplit>0?[].concat(_toConsumableArray(series),[nonSplitSeries]):[nonSplitSeries].concat(_toConsumableArray(series));var newVisData=_defineProperty({},model.id,{id:model.id,series:newSeries||series});return _react.default.createElement("div",{key:key,className:"tvbSplitVis__split"},_react.default.createElement(WrappedComponent,{model:model,visData:newVisData,onBrush:props.onBrush,additionalLabel:label,backgroundColor:props.backgroundColor,getConfig:props.getConfig}))});return _react.default.createElement("div",{className:"tvbSplitVis"},rows)}SplitVisComponent.displayName="SplitVisComponent(".concat((0,_get_display_name.getDisplayName)(WrappedComponent),")");return SplitVisComponent}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isBasicAgg=isBasicAgg;exports.createOptions=createOptions;exports.lookup=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var lookup={count:_i18n.i18n.translate("tsvb.aggLookup.countLabel",{defaultMessage:"Count"}),calculation:_i18n.i18n.translate("tsvb.aggLookup.calculationLabel",{defaultMessage:"Calculation"}),std_deviation:_i18n.i18n.translate("tsvb.aggLookup.deviationLabel",{defaultMessage:"Std. Deviation"}),variance:_i18n.i18n.translate("tsvb.aggLookup.varianceLabel",{defaultMessage:"Variance"}),sum_of_squares:_i18n.i18n.translate("tsvb.aggLookup.sumOfSqLabel",{defaultMessage:"Sum of Sq."}),avg:_i18n.i18n.translate("tsvb.aggLookup.averageLabel",{defaultMessage:"Average"}),max:_i18n.i18n.translate("tsvb.aggLookup.maxLabel",{defaultMessage:"Max"}),min:_i18n.i18n.translate("tsvb.aggLookup.minLabel",{defaultMessage:"Min"}),sum:_i18n.i18n.translate("tsvb.aggLookup.sumLabel",{defaultMessage:"Sum"}),percentile:_i18n.i18n.translate("tsvb.aggLookup.percentileLabel",{defaultMessage:"Percentile"}),percentile_rank:_i18n.i18n.translate("tsvb.aggLookup.percentileRankLabel",{defaultMessage:"Percentile Rank"}),cardinality:_i18n.i18n.translate("tsvb.aggLookup.cardinalityLabel",{defaultMessage:"Cardinality"}),value_count:_i18n.i18n.translate("tsvb.aggLookup.valueCountLabel",{defaultMessage:"Value Count"}),derivative:_i18n.i18n.translate("tsvb.aggLookup.derivativeLabel",{defaultMessage:"Derivative"}),cumulative_sum:_i18n.i18n.translate("tsvb.aggLookup.cumulativeSumLabel",{defaultMessage:"Cumulative Sum"}),moving_average:_i18n.i18n.translate("tsvb.aggLookup.movingAverageLabel",{defaultMessage:"Moving Average"}),avg_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallAverageLabel",{defaultMessage:"Overall Average"}),min_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallMinLabel",{defaultMessage:"Overall Min"}),max_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallMaxLabel",{defaultMessage:"Overall Max"}),sum_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallSumLabel",{defaultMessage:"Overall Sum"}),variance_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallVarianceLabel",{defaultMessage:"Overall Variance"}),sum_of_squares_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallSumOfSqLabel",{defaultMessage:"Overall Sum of Sq."}),std_deviation_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallStdDeviationLabel",{defaultMessage:"Overall Std. Deviation"}),series_agg:_i18n.i18n.translate("tsvb.aggLookup.seriesAggLabel",{defaultMessage:"Series Agg"}),math:_i18n.i18n.translate("tsvb.aggLookup.mathLabel",{defaultMessage:"Math"}),serial_diff:_i18n.i18n.translate("tsvb.aggLookup.serialDifferenceLabel",{defaultMessage:"Serial Difference"}),filter_ratio:_i18n.i18n.translate("tsvb.aggLookup.filterRatioLabel",{defaultMessage:"Filter Ratio"}),positive_only:_i18n.i18n.translate("tsvb.aggLookup.positiveOnlyLabel",{defaultMessage:"Positive Only"}),static:_i18n.i18n.translate("tsvb.aggLookup.staticValueLabel",{defaultMessage:"Static Value"}),top_hit:_i18n.i18n.translate("tsvb.aggLookup.topHitLabel",{defaultMessage:"Top Hit"})};exports.lookup=lookup;var pipeline=["calculation","derivative","cumulative_sum","moving_average","avg_bucket","min_bucket","max_bucket","sum_bucket","variance_bucket","sum_of_squares_bucket","std_deviation_bucket","series_agg","math","serial_diff","positive_only"];var byType={_all:lookup,pipeline:pipeline,basic:_lodash.default.omit(lookup,pipeline),metrics:_lodash.default.pick(lookup,["count","avg","min","max","sum","cardinality","value_count"])};function isBasicAgg(item){return _lodash.default.includes(Object.keys(byType.basic),item.type)}function createOptions(){var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"_all";var siblings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var aggs=byType[type];if(!aggs)aggs=byType._all;var enablePipelines=siblings.some(isBasicAgg);if(siblings.length<=1)enablePipelines=false;return(0,_lodash.default)(aggs).map(function(label,value){var disabled=_lodash.default.includes(pipeline,value)?!enablePipelines:false;return{label:disabled?_i18n.i18n.translate("tsvb.aggLookup.addPipelineAggDescription",{defaultMessage:'{label} (use the "+" button to add this pipeline agg)',values:{label:label}}):label,value:value,disabled:disabled}}).value()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.basicAggs=void 0;var basicAggs=["count","avg","max","min","sum","std_deviation","variance","sum_of_squares","value_count","cardinality"];exports.basicAggs=basicAggs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorComponent=ErrorComponent;var _eui=__webpack_require__(3);var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var guidPattern=/\[[[a-f\d-\\]{36}\]/g;function ErrorComponent(props){var error=props.error;var additionalInfo;var type=_lodash.default.get(error,"error.caused_by.type")||_lodash.default.get(error,"error.type");var reason=_lodash.default.get(error,"error.caused_by.reason");var title=_lodash.default.get(error,"error.caused_by.title");if(!reason){reason=_lodash.default.get(error,"message")}if(["runtime_exception","illegal_argument_exception"].includes(type)){reason=_lodash.default.get(error,"error.reason").replace(guidPattern,"")}if(type==="script_exception"){var scriptStack=_lodash.default.get(error,"error.caused_by.script_stack");reason=_lodash.default.get(error,"error.caused_by.caused_by.reason");additionalInfo=_react.default.createElement("div",{className:"tvbError__additional"},_react.default.createElement("div",null,reason),_react.default.createElement("div",{className:"tvbError__stack"},scriptStack.join("\n")))}else if(reason){additionalInfo=_react.default.createElement("div",{className:"tvbError__additional"},reason)}return _react.default.createElement("div",{className:"visError"},_react.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_react.default.createElement(_eui.EuiIcon,{type:"alert",size:"m",color:"danger","aria-hidden":"true"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),title||_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.error.requestForPanelFailedErrorMessage",defaultMessage:"The request for this panel failed"}),additionalInfo))}ErrorComponent.propTypes={error:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertSeriesToVars=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _get_last_value=__webpack_require__(72);var _tick_formatter=__webpack_require__(85);var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var convertSeriesToVars=function convertSeriesToVars(series,model){var dateFormat=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"lll";var getConfig=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var variables={};model.series.forEach(function(seriesModel){series.filter(function(row){return _lodash.default.startsWith(row.id,seriesModel.id)}).forEach(function(row){var varName=[_lodash.default.snakeCase(row.label),_lodash.default.snakeCase(seriesModel.var_name)].filter(function(v){return v}).join(".");var formatter=(0,_tick_formatter.tickFormatter)(seriesModel.formatter,seriesModel.value_template,getConfig);var lastValue=(0,_get_last_value.getLastValue)(row.data);var data={last:{raw:lastValue,formatted:formatter(lastValue)},data:{raw:row.data,formatted:row.data.map(function(point){return[(0,_moment.default)(point[0]).format(dateFormat),formatter(point[1])]})}};_lodash.default.set(variables,varName,data);_lodash.default.set(variables,"".concat(_lodash.default.snakeCase(row.label),".label"),row.label)})});return variables};exports.convertSeriesToVars=convertSeriesToVars},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createNumberHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _detect_ie=__webpack_require__(655);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createNumberHandler=function createNumberHandler(handleChange){return function(name,defaultValue){return function(e){if(!(0,_detect_ie.detectIE)()||e.keyCode===13)e.preventDefault();var value=Number(_lodash.default.get(e,"target.value",defaultValue));if(_lodash.default.isFunction(handleChange)){return handleChange(_defineProperty({},name,value))}}}};exports.createNumberHandler=createNumberHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.detectIE=detectIE;function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10)}var trident=ua.indexOf("Trident/");if(trident>0){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}var edge=ua.indexOf("Edge/");if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10)}return false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CalculationVars=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _add_delete_buttons=__webpack_require__(42);var _collection_actions=__webpack_require__(74);var _metric_select=__webpack_require__(73);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var CalculationVarsUi=function(_Component){_inherits(CalculationVarsUi,_Component);function CalculationVarsUi(props){var _this;_classCallCheck(this,CalculationVarsUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(CalculationVarsUi).call(this,props));_this.renderRow=_this.renderRow.bind(_assertThisInitialized(_this));return _this}_createClass(CalculationVarsUi,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash.default.get(e,"[0].value",_lodash.default.get(e,"target.value"));handleChange(_lodash.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row,i,items){var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,this.props);var handleDelete=_collection_actions.collectionActions.handleDelete.bind(null,this.props,row);var intl=this.props.intl;return _react.default.createElement(_eui.EuiFlexItem,{key:row.id,"data-test-subj":"varRow"},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",responsive:false,gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{className:"tvbAggs__varName","aria-label":intl.formatMessage({id:"tsvb.vars.variableNameAriaLabel",defaultMessage:"Variable name"}),placeholder:intl.formatMessage({id:"tsvb.vars.variableNamePlaceholder",defaultMessage:"Variable name"}),onChange:this.handleChange(row,"name"),value:row.name})),_react.default.createElement(_eui.EuiFlexItem,{className:"tvbAggs__varMetricWrapper"},_react.default.createElement(_metric_select.MetricSelect,{onChange:this.handleChange(row,"field"),metrics:this.props.metrics,metric:this.props.model,value:row.field,includeSiblings:this.props.includeSiblings})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false}))))}},{key:"render",value:function render(){var _this$props=this.props,model=_this$props.model,name=_this$props.name;if(!model[name])return _react.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},rows)}}]);return CalculationVarsUi}(_react.Component);CalculationVarsUi.defaultProps={name:"variables",includeSiblings:false};CalculationVarsUi.propTypes={metrics:_propTypes.default.array,model:_propTypes.default.object,name:_propTypes.default.string,onChange:_propTypes.default.func,includeSiblings:_propTypes.default.bool};var CalculationVars=(0,_react2.injectI18n)(CalculationVarsUi);exports.CalculationVars=CalculationVars},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FormValidationContext=void 0;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FormValidationContext=_react.default.createContext({});exports.FormValidationContext=FormValidationContext},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CoreStartContextProvider=exports.CoreStartContext=void 0;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CoreStartContext=_react.default.createContext(null);exports.CoreStartContext=CoreStartContext;var CoreStartContextProvider=CoreStartContext.Provider;exports.CoreStartContextProvider=CoreStartContextProvider},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1880)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapToLayerWithId=void 0;var _origin=__webpack_require__(87);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var mapToLayerWithId=function mapToLayerWithId(prefix,layer){return _objectSpread({},layer,{layerId:"".concat(prefix,".").concat(layer.name),isEMS:_origin.ORIGIN.EMS===prefix})};exports.mapToLayerWithId=mapToLayerWithId},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLegendColors=getLegendColors;exports.getColor=getColor;function getLegendColors(colorRamp){var numLegendColors=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var colors=[];colors[0]=getColor(colorRamp,0);for(var i=1;i<numLegendColors-1;i++){colors[i]=getColor(colorRamp,Math.floor(colorRamp.length*i/numLegendColors))}colors[numLegendColors-1]=getColor(colorRamp,colorRamp.length-1);return colors}function getColor(colorRamp,i){var color=colorRamp[i][1];var red=Math.floor(color[0]*255);var green=Math.floor(color[1]*255);var blue=Math.floor(color[2]*255);return"rgb(".concat(red,",").concat(green,",").concat(blue,")")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseMapsVisualizationProvider=BaseMapsVisualizationProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(2);var _kibana_map=__webpack_require__(663);var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);__webpack_require__(369);var _notify=__webpack_require__(9);var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var WMS_MINZOOM=0;var WMS_MAXZOOM=22;function BaseMapsVisualizationProvider(serviceSettings){return function(){function BaseMapsVisualization(element,vis){_classCallCheck(this,BaseMapsVisualization);this.vis=vis;this._container=element;this._kibanaMap=null;this._chartData=null;this._baseLayerDirty=true;this._mapIsLoaded=this._makeKibanaMap()}_createClass(BaseMapsVisualization,[{key:"isLoaded",value:function isLoaded(){return this._mapIsLoaded}},{key:"destroy",value:function destroy(){if(this._kibanaMap){this._kibanaMap.destroy();this._kibanaMap=null}}},{key:"render",value:function(){var _render=_asyncToGenerator(regeneratorRuntime.mark(function _callee(esResponse,visParams,status){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this._kibanaMap){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return this._mapIsLoaded;case 4:if(status.resize){this._kibanaMap.resize()}if(!(status.params||status.aggs)){_context.next=9;break}this._params=visParams;_context.next=9;return this._updateParams();case 9:if(!this._hasESResponseChanged(esResponse)){_context.next=12;break}_context.next=12;return this._updateData(esResponse);case 12:if(status.uiState){this._kibanaMap.useUiStateFromVisualization(this.vis)}_context.next=15;return this._whenBaseLayerIsLoaded();case 15:case"end":return _context.stop()}}},_callee,this)}));function render(_x,_x2,_x3){return _render.apply(this,arguments)}return render}()},{key:"_makeKibanaMap",value:function(){var _makeKibanaMap2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this=this;var options,uiState,zoomFromUiState,centerFromUIState;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:options={};uiState=this.vis.getUiState();zoomFromUiState=parseInt(uiState.get("mapZoom"));centerFromUIState=uiState.get("mapCenter");options.zoom=!isNaN(zoomFromUiState)?zoomFromUiState:this.vis.params.mapZoom;options.center=centerFromUIState?centerFromUIState:this.vis.params.mapCenter;this._kibanaMap=new _kibana_map.KibanaMap(this._container,options);this._kibanaMap.setMinZoom(WMS_MINZOOM);this._kibanaMap.setMaxZoom(WMS_MAXZOOM);this._kibanaMap.addLegendControl();this._kibanaMap.addFitControl();this._kibanaMap.persistUiStateForVisualization(this.vis);this._kibanaMap.on("baseLayer:loaded",function(){_this._baseLayerDirty=false});this._kibanaMap.on("baseLayer:loading",function(){_this._baseLayerDirty=true});_context2.next=16;return this._updateBaseLayer();case 16:case"end":return _context2.stop()}}},_callee2,this)}));function _makeKibanaMap(){return _makeKibanaMap2.apply(this,arguments)}return _makeKibanaMap}()},{key:"_tmsConfigured",value:function _tmsConfigured(){var _this$_getMapsParams=this._getMapsParams(),wms=_this$_getMapsParams.wms;var hasTmsBaseLayer=!!wms.selectedTmsLayer;return hasTmsBaseLayer}},{key:"_wmsConfigured",value:function _wmsConfigured(){var _this$_getMapsParams2=this._getMapsParams(),wms=_this$_getMapsParams2.wms;var hasWmsBaseLayer=!!wms.enabled;return hasWmsBaseLayer}},{key:"_updateBaseLayer",value:function(){var _updateBaseLayer2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var emsTileLayerId,mapParams,tmsServices,userConfiguredTmsLayer,initBasemapLayer,selectedTmsLayer;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:emsTileLayerId=_chrome.default.getInjected("emsTileLayerId",true);if(this._kibanaMap){_context3.next=3;break}return _context3.abrupt("return");case 3:mapParams=this._getMapsParams();if(this._tmsConfigured()){_context3.next=19;break}_context3.prev=5;_context3.next=8;return serviceSettings.getTMSServices();case 8:tmsServices=_context3.sent;userConfiguredTmsLayer=tmsServices[0];initBasemapLayer=userConfiguredTmsLayer?userConfiguredTmsLayer:tmsServices.find(function(s){return s.id===emsTileLayerId.bright});if(initBasemapLayer){this._setTmsLayer(initBasemapLayer)}_context3.next=18;break;case 14:_context3.prev=14;_context3.t0=_context3["catch"](5);_notify.toastNotifications.addWarning(_context3.t0.message);return _context3.abrupt("return");case 18:return _context3.abrupt("return");case 19:try{if(this._wmsConfigured()){if(WMS_MINZOOM>this._kibanaMap.getMaxZoomLevel()){this._kibanaMap.setMinZoom(WMS_MINZOOM);this._kibanaMap.setMaxZoom(WMS_MAXZOOM)}this._kibanaMap.setBaseLayer({baseLayerType:"wms",options:_objectSpread({minZoom:WMS_MINZOOM,maxZoom:WMS_MAXZOOM,url:mapParams.wms.url},mapParams.wms.options)})}else if(this._tmsConfigured()){selectedTmsLayer=mapParams.wms.selectedTmsLayer;this._setTmsLayer(selectedTmsLayer)}}catch(tmsLoadingError){_notify.toastNotifications.addWarning(tmsLoadingError.message)}case 20:case"end":return _context3.stop()}}},_callee3,this,[[5,14]])}));function _updateBaseLayer(){return _updateBaseLayer2.apply(this,arguments)}return _updateBaseLayer}()},{key:"_setTmsLayer",value:function(){var _setTmsLayer2=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(tmsLayer){var isDesaturated,isDarkMode,meta,showZoomMessage,options;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this._kibanaMap.setMinZoom(tmsLayer.minZoom);this._kibanaMap.setMaxZoom(tmsLayer.maxZoom);if(this._kibanaMap.getZoomLevel()>tmsLayer.maxZoom){this._kibanaMap.setZoomLevel(tmsLayer.maxZoom)}isDesaturated=this._getMapsParams().isDesaturated;if(typeof isDesaturated!=="boolean"){isDesaturated=true}isDarkMode=_chrome.default.getUiSettingsClient().get("theme:darkMode");_context4.next=8;return serviceSettings.getAttributesForTMSLayer(tmsLayer,isDesaturated,isDarkMode);case 8:meta=_context4.sent;showZoomMessage=serviceSettings.shouldShowZoomMessage(tmsLayer);options=_lodash.default.cloneDeep(tmsLayer);delete options.id;delete options.subdomains;this._kibanaMap.setBaseLayer({baseLayerType:"tms",options:_objectSpread({},options,{showZoomMessage:showZoomMessage},meta)});case 14:case"end":return _context4.stop()}}},_callee4,this)}));function _setTmsLayer(_x4){return _setTmsLayer2.apply(this,arguments)}return _setTmsLayer}()},{key:"_updateData",value:function(){var _updateData2=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:throw new Error(_i18n.i18n.translate("tileMap.baseMapsVisualization.childShouldImplementMethodErrorMessage",{defaultMessage:"Child should implement this method to respond to data-update"}));case 1:case"end":return _context5.stop()}}},_callee5)}));function _updateData(){return _updateData2.apply(this,arguments)}return _updateData}()},{key:"_hasESResponseChanged",value:function _hasESResponseChanged(data){return this._chartData!==data}},{key:"_updateParams",value:function(){var _updateParams2=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var mapParams;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:mapParams=this._getMapsParams();_context6.next=3;return this._updateBaseLayer();case 3:this._kibanaMap.setLegendPosition(mapParams.legendPosition);this._kibanaMap.setShowTooltip(mapParams.addTooltip);this._kibanaMap.useUiStateFromVisualization(this.vis);case 6:case"end":return _context6.stop()}}},_callee6,this)}));function _updateParams(){return _updateParams2.apply(this,arguments)}return _updateParams}()},{key:"_getMapsParams",value:function _getMapsParams(){return _lodash.default.assign({},this.vis.type.visConfig.defaults,{type:this.vis.type.name},this._params)}},{key:"_whenBaseLayerIsLoaded",value:function _whenBaseLayerIsLoaded(){var _this2=this;if(!this._tmsConfigured()){return true}var maxTimeForBaseLayer=1e4;var interval$=Rx.interval(10).pipe((0,_operators.filter)(function(){return!_this2._baseLayerDirty}));var timer$=Rx.timer(maxTimeForBaseLayer);return Rx.race(interval$,timer$).pipe((0,_operators.first)()).toPromise()}}]);return BaseMapsVisualization}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaMap=void 0;var _events=__webpack_require__(48);var _map_messages=__webpack_require__(1478);var _leaflet=_interopRequireDefault(__webpack_require__(66));var _jquery=_interopRequireDefault(__webpack_require__(12));var _lodash=_interopRequireDefault(__webpack_require__(1));var _zoom_to_precision=__webpack_require__(1479);var _i18n=__webpack_require__(2);var _origin=__webpack_require__(87);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function makeFitControl(fitContainer,kibanaMap){var FitControl=_leaflet.default.Control.extend({options:{position:"topleft"},initialize:function initialize(fitContainer,kibanaMap){this._fitContainer=fitContainer;this._kibanaMap=kibanaMap;this._leafletMap=null},onAdd:function onAdd(leafletMap){var _this=this;this._leafletMap=leafletMap;var fitDatBoundsLabel=_i18n.i18n.translate("common.ui.vis.kibanaMap.leaflet.fitDataBoundsAriaLabel",{defaultMessage:"Fit Data Bounds"});(0,_jquery.default)(this._fitContainer).html('<a class="kuiIcon fa-crop" href="#" title="'.concat(fitDatBoundsLabel,'" aria-label="').concat(fitDatBoundsLabel,'"></a>')).on("click",function(e){e.preventDefault();_this._kibanaMap.fitToData()});return this._fitContainer},onRemove:function onRemove(){(0,_jquery.default)(this._fitContainer).off("click")}});return new FitControl(fitContainer,kibanaMap)}function makeLegendControl(container,kibanaMap,position){var LegendControl=_leaflet.default.Control.extend({options:{position:"topright"},initialize:function initialize(container,kibanaMap,position){this._legendContainer=container;this._kibanaMap=kibanaMap;this.options.position=position},updateContents:function updateContents(){this._legendContainer.empty();var $div=(0,_jquery.default)("<div>").addClass("visMapLegend");this._legendContainer.append($div);var layers=this._kibanaMap.getLayers();layers.forEach(function(layer){return layer.appendLegendContents($div)})},onAdd:function onAdd(){var _this2=this;this._layerUpdateHandle=function(){return _this2.updateContents()};this._kibanaMap.on("layers:update",this._layerUpdateHandle);this.updateContents();return this._legendContainer.get(0)},onRemove:function onRemove(){this._kibanaMap.removeListener("layers:update",this._layerUpdateHandle);this._legendContainer.empty()}});return new LegendControl(container,kibanaMap,position)}var KibanaMap=function(_EventEmitter){_inherits(KibanaMap,_EventEmitter);function KibanaMap(containerNode,options){var _this3;_classCallCheck(this,KibanaMap);_this3=_possibleConstructorReturn(this,_getPrototypeOf(KibanaMap).call(this));_defineProperty(_assertThisInitialized(_this3),"getZoomLevel",function(){return _this3._leafletMap.getZoom()});_defineProperty(_assertThisInitialized(_this3),"getMaxZoomLevel",function(){return _this3._leafletMap.getMaxZoom()});_defineProperty(_assertThisInitialized(_this3),"_addMaxZoomMessage",function(layer){var zoomWarningMsg=(0,_map_messages.createZoomWarningMsg)(_this3.getZoomLevel,_this3.getMaxZoomLevel);_this3._leafletMap.on("zoomend",zoomWarningMsg);_this3._containerNode.setAttribute("data-test-subj","zoomWarningEnabled");layer.on("remove",function(){_this3._leafletMap.off("zoomend",zoomWarningMsg);_this3._containerNode.removeAttribute("data-test-subj")})});_this3._containerNode=containerNode;_this3._leafletBaseLayer=null;_this3._baseLayerSettings=null;_this3._baseLayerIsDesaturated=true;_this3._leafletDrawControl=null;_this3._leafletFitControl=null;_this3._leafletLegendControl=null;_this3._legendPosition="topright";_this3._layers=[];_this3._listeners=[];_this3._showTooltip=false;var leafletOptions={minZoom:options.minZoom,maxZoom:options.maxZoom,center:options.center?options.center:[0,0],zoom:options.zoom?options.zoom:2,renderer:_leaflet.default.canvas(),zoomAnimation:false,zoomControl:options.zoomControl===undefined?true:options.zoomControl};_this3._leafletMap=_leaflet.default.map(containerNode,leafletOptions);_this3._leafletMap.attributionControl.setPrefix("");if(!options.scrollWheelZoom){_this3._leafletMap.scrollWheelZoom.disable()}var previousZoom=_this3._leafletMap.getZoom();_this3._leafletMap.on("zoomend",function(){if(previousZoom!==_this3._leafletMap.getZoom()){previousZoom=_this3._leafletMap.getZoom();_this3.emit("zoomchange")}});_this3._leafletMap.on("zoomend",function(){return _this3.emit("zoomend")});_this3._leafletMap.on("dragend",function(){return _this3.emit("dragend")});_this3._leafletMap.on("zoomend",function(){return _this3._updateExtent()});_this3._leafletMap.on("dragend",function(){return _this3._updateExtent()});_this3._leafletMap.on("mousemove",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mousemove",e)})});_this3._leafletMap.on("mouseout",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mouseout",e)})});_this3._leafletMap.on("mousedown",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mousedown",e)})});_this3._leafletMap.on("mouseup",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mouseup",e)})});_this3._leafletMap.on("draw:created",function(event){var drawType=event.layerType;if(drawType==="rectangle"){var bounds=event.layer.getBounds();var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();var southEastLng=southEast.lng;if(southEastLng>180){southEastLng-=360}var northWestLng=northWest.lng;if(northWestLng<-180){northWestLng+=360}var southEastLat=southEast.lat;var northWestLat=northWest.lat;if(southEastLat===northWestLat||southEastLng===northWestLng){return}_this3.emit("drawCreated:rectangle",{bounds:{bottom_right:{lat:southEastLat,lon:southEastLng},top_left:{lat:northWestLat,lon:northWestLng}}})}else if(drawType==="polygon"){var latLongs=event.layer.getLatLngs()[0];_this3.emit("drawCreated:polygon",{points:latLongs.map(function(leafletLatLng){return{lat:leafletLatLng.lat,lon:leafletLatLng.lng}})})}});_this3.resize();return _this3}_createClass(KibanaMap,[{key:"setShowTooltip",value:function setShowTooltip(showTooltip){this._showTooltip=showTooltip}},{key:"getLayers",value:function getLayers(){return this._layers.slice()}},{key:"addLayer",value:function addLayer(kibanaLayer){var _this4=this;var onshowTooltip=function onshowTooltip(event){if(!_this4._showTooltip){return}if(!_this4._popup){_this4._popup=_leaflet.default.responsivePopup({autoPan:false});_this4._popup.setLatLng(event.position);_this4._popup.setContent(event.content);_this4._popup.openOn(_this4._leafletMap)}else{if(!_this4._popup.getLatLng().equals(event.position)){_this4._popup.setLatLng(event.position)}if(_this4._popup.getContent()!==event.content){_this4._popup.setContent(event.content)}}};kibanaLayer.on("showTooltip",onshowTooltip);this._listeners.push({name:"showTooltip",handle:onshowTooltip,layer:kibanaLayer});var onHideTooltip=function onHideTooltip(){_this4._leafletMap.closePopup();_this4._popup=null};kibanaLayer.on("hideTooltip",onHideTooltip);this._listeners.push({name:"hideTooltip",handle:onHideTooltip,layer:kibanaLayer});var onStyleChanged=function onStyleChanged(){if(_this4._leafletLegendControl){_this4._leafletLegendControl.updateContents()}};kibanaLayer.on("styleChanged",onStyleChanged);this._listeners.push({name:"styleChanged",handle:onStyleChanged,layer:kibanaLayer});this._layers.push(kibanaLayer);kibanaLayer.addToLeafletMap(this._leafletMap);this.emit("layers:update");this._addAttributions(kibanaLayer.getAttributions())}},{key:"removeLayer",value:function removeLayer(kibanaLayer){var _this5=this;if(!kibanaLayer){return}this._removeAttributions(kibanaLayer.getAttributions());var index=this._layers.indexOf(kibanaLayer);if(index>=0){this._layers.splice(index,1);kibanaLayer.removeFromLeafletMap(this._leafletMap)}this._listeners.forEach(function(listener){if(listener.layer===kibanaLayer){listener.layer.removeListener(listener.name,listener.handle)}});this._layers.forEach(function(layer){return _this5._addAttributions(layer.getAttributions())});if(this._baseLayerSettings){this._addAttributions(this._baseLayerSettings.options.attribution)}}},{key:"_addAttributions",value:function _addAttributions(attribution){var _this6=this;var attributions=getAttributionArray(attribution);attributions.forEach(function(attribution){_this6._leafletMap.attributionControl.removeAttribution(attribution);_this6._leafletMap.attributionControl.addAttribution(attribution)})}},{key:"_removeAttributions",value:function _removeAttributions(attribution){var _this7=this;var attributions=getAttributionArray(attribution);attributions.forEach(function(attribution){_this7._leafletMap.attributionControl.removeAttribution(attribution)})}},{key:"destroy",value:function destroy(){if(this._leafletFitControl){this._leafletMap.removeControl(this._leafletFitControl)}if(this._leafletDrawControl){this._leafletMap.removeControl(this._leafletDrawControl)}if(this._leafletLegendControl){this._leafletMap.removeControl(this._leafletLegendControl)}this.setBaseLayer(null);var layer;while(this._layers.length){layer=this._layers.pop();layer.removeFromLeafletMap(this._leafletMap)}this._leafletMap.remove();this._containerNode.innerHTML="";this._listeners.forEach(function(listener){return listener.layer.removeListener(listener.name,listener.handle)})}},{key:"getCenter",value:function getCenter(){var center=this._leafletMap.getCenter();return{lon:center.lng,lat:center.lat}}},{key:"setCenter",value:function setCenter(latitude,longitude){var latLong=_leaflet.default.latLng(latitude,longitude);if(latLong.equals&&!latLong.equals(this._leafletMap.getCenter())){this._leafletMap.setView(latLong)}}},{key:"setZoomLevel",value:function setZoomLevel(zoomLevel){if(this._leafletMap.getZoom()!==zoomLevel){this._leafletMap.setZoom(zoomLevel)}}},{key:"getGeohashPrecision",value:function getGeohashPrecision(){return(0,_zoom_to_precision.zoomToPrecision)(this._leafletMap.getZoom(),12,this._leafletMap.getMaxZoom())}},{key:"getLeafletBounds",value:function getLeafletBounds(){return this._leafletMap.getBounds()}},{key:"getMetersPerPixel",value:function getMetersPerPixel(){var pointC=this._leafletMap.latLngToContainerPoint(this._leafletMap.getCenter());var pointX=[pointC.x+1,pointC.y];var pointY=[pointC.x,pointC.y+1];var latLngC=this._leafletMap.containerPointToLatLng(pointC);var latLngX=this._leafletMap.containerPointToLatLng(pointX);var latLngY=this._leafletMap.containerPointToLatLng(pointY);var distanceX=latLngC.distanceTo(latLngX);var distanceY=latLngC.distanceTo(latLngY);return _lodash.default.min([distanceX,distanceY])}},{key:"_getLeafletBounds",value:function _getLeafletBounds(resizeOnFail){var boundsRaw=this._leafletMap.getBounds();var bounds=this._leafletMap.wrapLatLngBounds(boundsRaw);if(!bounds){return null}var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();if(southEast.lng===northWest.lng||southEast.lat===northWest.lat){if(resizeOnFail){this._leafletMap.invalidateSize();return this._getLeafletBounds(false)}else{return null}}else{return bounds}}},{key:"getBounds",value:function getBounds(){var bounds=this._getLeafletBounds(true);if(!bounds){return null}var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();var southEastLng=southEast.lng;var northWestLng=northWest.lng;var southEastLat=southEast.lat;var northWestLat=northWest.lat;return{bottom_right:{lat:southEastLat,lon:southEastLng},top_left:{lat:northWestLat,lon:northWestLng}}}},{key:"setDesaturateBaseLayer",value:function setDesaturateBaseLayer(isDesaturated){if(isDesaturated===this._baseLayerIsDesaturated){return}this._baseLayerIsDesaturated=isDesaturated;this._updateDesaturation();if(this._leafletBaseLayer){this._leafletBaseLayer.redraw()}}},{key:"addDrawControl",value:function addDrawControl(){var drawColor="#000";var drawOptions={draw:{polyline:false,marker:false,circle:false,rectangle:{shapeOptions:{stroke:false,color:drawColor}},polygon:{shapeOptions:{color:drawColor}},circlemarker:false}};this._leafletDrawControl=new _leaflet.default.Control.Draw(drawOptions);this._leafletMap.addControl(this._leafletDrawControl)}},{key:"addFitControl",value:function addFitControl(){if(this._leafletFitControl||!this._leafletMap){return}var fitContainer=_leaflet.default.DomUtil.create("div","leaflet-control leaflet-bar leaflet-control-fit");this._leafletFitControl=makeFitControl(fitContainer,this);this._leafletMap.addControl(this._leafletFitControl)}},{key:"addLegendControl",value:function addLegendControl(){if(this._leafletLegendControl||!this._leafletMap){return}this._updateLegend()}},{key:"setLegendPosition",value:function setLegendPosition(position){if(this._legendPosition===position){if(!this._leafletLegendControl){this._updateLegend()}}else{this._legendPosition=position;this._updateLegend()}}},{key:"_updateLegend",value:function _updateLegend(){if(this._leafletLegendControl){this._leafletMap.removeControl(this._leafletLegendControl)}var $wrapper=(0,_jquery.default)("<div>").addClass("visMapLegend__wrapper");this._leafletLegendControl=makeLegendControl($wrapper,this,this._legendPosition);this._leafletMap.addControl(this._leafletLegendControl)}},{key:"resize",value:function resize(){this._leafletMap.invalidateSize();this._updateExtent()}},{key:"setMinZoom",value:function setMinZoom(zoom){this._leafletMap.setMinZoom(zoom)}},{key:"setMaxZoom",value:function setMaxZoom(zoom){this._leafletMap.setMaxZoom(zoom)}},{key:"getLeafletBaseLayer",value:function getLeafletBaseLayer(){return this._leafletBaseLayer}},{key:"setBaseLayer",value:function setBaseLayer(settings){var _this8=this;if(_lodash.default.isEqual(settings,this._baseLayerSettings)){return}if(settings===null){if(this._leafletBaseLayer&&this._leafletMap){this._removeAttributions(this._baseLayerSettings.options.attribution);this._leafletMap.removeLayer(this._leafletBaseLayer);this._leafletBaseLayer=null;this._baseLayerSettings=null}return}this._baseLayerSettings=settings;if(this._leafletBaseLayer){this._leafletMap.removeLayer(this._leafletBaseLayer);this._leafletBaseLayer=null}var baseLayer;if(settings.baseLayerType==="wms"){baseLayer=this._getWMSBaseLayer(settings.options)}else if(settings.baseLayerType==="tms"){baseLayer=this._getTMSBaseLayer(settings.options)}if(baseLayer){baseLayer.on("tileload",function(){return _this8._updateDesaturation()});baseLayer.on("load",function(){_this8.emit("baseLayer:loaded")});baseLayer.on("loading",function(){_this8.emit("baseLayer:loading")});this._leafletBaseLayer=baseLayer;if(settings.options.showZoomMessage){baseLayer.on("add",function(){_this8._addMaxZoomMessage(baseLayer)})}this._leafletBaseLayer.addTo(this._leafletMap);this._leafletBaseLayer.bringToBack();if(settings.options.minZoom>this._leafletMap.getZoom()){this._leafletMap.setZoom(settings.options.minZoom)}this._addAttributions(settings.options.attribution);this.resize()}}},{key:"isInside",value:function isInside(bucketRectBounds){var mapBounds=this._leafletMap.getBounds();return mapBounds.intersects(bucketRectBounds)}},{key:"fitToData",value:function(){var _fitToData=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var boundsArray,bounds;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(this._leafletMap){_context3.next=2;break}return _context3.abrupt("return");case 2:_context3.next=4;return Promise.all(this._layers.map(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(layer){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return layer.getBounds();case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}()));case 4:boundsArray=_context3.sent;bounds=null;boundsArray.forEach(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(b){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(bounds){bounds.extend(b)}else{bounds=b}case 1:case"end":return _context2.stop()}}},_callee2)}));return function(_x2){return _ref2.apply(this,arguments)}}());if(bounds&&bounds.isValid()){this._leafletMap.fitBounds(bounds)}case 8:case"end":return _context3.stop()}}},_callee3,this)}));function fitToData(){return _fitToData.apply(this,arguments)}return fitToData}()},{key:"_getTMSBaseLayer",value:function _getTMSBaseLayer(options){return _leaflet.default.tileLayer(options.url,{minZoom:options.minZoom,maxZoom:options.maxZoom,subdomains:options.subdomains||[]})}},{key:"_getWMSBaseLayer",value:function _getWMSBaseLayer(options){var wmsOptions={format:options.format||"",layers:options.layers||"",minZoom:options.minZoom,maxZoom:options.maxZoom,styles:options.styles||"",transparent:options.transparent,version:options.version||"1.3.0"};return typeof options.url==="string"&&options.url.length?_leaflet.default.tileLayer.wms(options.url,wmsOptions):null}},{key:"_updateExtent",value:function _updateExtent(){this._layers.forEach(function(layer){return layer.updateExtent()})}},{key:"_updateDesaturation",value:function _updateDesaturation(){var tiles=(0,_jquery.default)("img.leaflet-tile-loaded");if(_lodash.default.get(this._baseLayerSettings,"options.origin")===_origin.ORIGIN.EMS){tiles.addClass("filters-off")}else{if(this._baseLayerIsDesaturated){tiles.removeClass("filters-off")}else if(!this._baseLayerIsDesaturated){tiles.addClass("filters-off")}}}},{key:"persistUiStateForVisualization",value:function persistUiStateForVisualization(visualization){var _this9=this;function persistMapStateInUiState(){var uiState=visualization.getUiState();var centerFromUIState=uiState.get("mapCenter");var zoomFromUiState=parseInt(uiState.get("mapZoom"));if(isNaN(zoomFromUiState)||this.getZoomLevel()!==zoomFromUiState){visualization.uiStateVal("mapZoom",this.getZoomLevel())}var centerFromMap=this.getCenter();if(!centerFromUIState||centerFromMap.lon!==centerFromUIState[1]||centerFromMap.lat!==centerFromUIState[0]){visualization.uiStateVal("mapCenter",[centerFromMap.lat,centerFromMap.lon])}}this._leafletMap.on("resize",function(){visualization.sessionState.mapBounds=_this9.getBounds()});this._leafletMap.on("load",function(){visualization.sessionState.mapBounds=_this9.getBounds()});this.on("dragend",persistMapStateInUiState);this.on("zoomend",persistMapStateInUiState)}},{key:"useUiStateFromVisualization",value:function useUiStateFromVisualization(visualization){var uiState=visualization.getUiState();var zoomFromUiState=parseInt(uiState.get("mapZoom"));var centerFromUIState=uiState.get("mapCenter");if(!isNaN(zoomFromUiState)){this.setZoomLevel(zoomFromUiState)}if(centerFromUIState){this.setCenter(centerFromUIState[0],centerFromUIState[1])}}}]);return KibanaMap}(_events.EventEmitter);exports.KibanaMap=KibanaMap;function getAttributionArray(attribution){var attributionString=attribution||"";var attributions=attributionString.split(/\s*\|\s*/);if(attributions.length===1){attributions=attributions[0].split(",")}return attributions}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SwitchOption=SwitchOption;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SwitchOption(_ref){var dataTestSubj=_ref.dataTestSubj,tooltip=_ref.tooltip,label=_ref.label,disabled=_ref.disabled,paramName=_ref.paramName,_ref$value=_ref.value,value=_ref$value===void 0?false:_ref$value,setValue=_ref.setValue;return _react.default.createElement("div",{className:"visEditorSidebar__switchOptionFormRow"},_react.default.createElement(_eui.EuiToolTip,{content:tooltip,delay:"long",position:"right"},_react.default.createElement(_eui.EuiSwitch,{label:label,checked:value,disabled:disabled,"data-test-subj":dataTestSubj,onChange:function onChange(ev){return setValue(paramName,ev.target.checked)}})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SelectOption=SelectOption;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var emptyValue={text:"",value:"EMPTY_VALUE",disabled:true,hidden:true};function SelectOption(_ref){var disabled=_ref.disabled,helpText=_ref.helpText,id=_ref.id,label=_ref.label,labelAppend=_ref.labelAppend,options=_ref.options,paramName=_ref.paramName,value=_ref.value,setValue=_ref.setValue;return _react.default.createElement(_eui.EuiFormRow,{compressed:true,fullWidth:true,helpText:helpText,id:id,label:label,labelAppend:labelAppend},_react.default.createElement(_eui.EuiSelect,{disabled:disabled,options:[emptyValue].concat(_toConsumableArray(options)),value:value||emptyValue.value,onChange:function onChange(ev){return setValue(paramName,ev.target.value)},fullWidth:true}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WmsOptions=WmsOptions;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);var _notify=__webpack_require__(9);var _components=__webpack_require__(108);var _wms_internal_options=__webpack_require__(1486);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var mapLayerForOption=function mapLayerForOption(_ref){var id=_ref.id;return{text:id,value:id}};function WmsOptions(_ref2){var serviceSettings=_ref2.serviceSettings,stateParams=_ref2.stateParams,setValue=_ref2.setValue,vis=_ref2.vis;var wms=stateParams.wms;var tmsLayers=vis.type.editorConfig.collections.tmsLayers;var _useState=(0,_react.useState)(tmsLayers.map(mapLayerForOption)),_useState2=_slicedToArray(_useState,2),tmsLayerOptions=_useState2[0],setTmsLayersOptions=_useState2[1];var _useState3=(0,_react.useState)([]),_useState4=_slicedToArray(_useState3,2),layers=_useState4[0],setLayers=_useState4[1];var setWmsOption=function setWmsOption(paramName,value){return setValue("wms",_objectSpread({},wms,_defineProperty({},paramName,value)))};var selectTmsLayer=function selectTmsLayer(id){var layer=layers.find(function(l){return l.id===id});if(layer){setWmsOption("selectedTmsLayer",layer)}};(0,_react.useEffect)(function(){serviceSettings.getTMSServices().then(function(services){var newBaseLayers=[].concat(_toConsumableArray(tmsLayers),_toConsumableArray(services.filter(function(service){return!tmsLayers.some(function(_ref3){var id=_ref3.id;return service.id===id})})));setLayers(newBaseLayers);setTmsLayersOptions(newBaseLayers.map(mapLayerForOption));if(!wms.selectedTmsLayer&&newBaseLayers.length){setWmsOption("selectedTmsLayer",newBaseLayers[0])}}).catch(function(error){return _notify.toastNotifications.addWarning(error.message)})},[]);return _react.default.createElement(_eui.EuiPanel,{paddingSize:"s"},_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.baseLayerSettingsTitle",defaultMessage:"Base layer settings"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_components.SwitchOption,{label:_i18n.i18n.translate("tileMap.wmsOptions.wmsMapServerLabel",{defaultMessage:"WMS map server"}),tooltip:_i18n.i18n.translate("tileMap.wmsOptions.useWMSCompliantMapTileServerTip",{defaultMessage:"Use WMS compliant map tile server. For advanced users only."}),paramName:"enabled",value:wms.enabled,setValue:setWmsOption}),!wms.enabled&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_components.SelectOption,{id:"wmsOptionsSelectTmsLayer",label:_i18n.i18n.translate("tileMap.wmsOptions.layersLabel",{defaultMessage:"Layers"}),options:tmsLayerOptions,paramName:"selectedTmsLayer",value:wms.selectedTmsLayer&&wms.selectedTmsLayer.id,setValue:function setValue(param,value){return selectTmsLayer(value)}})),wms.enabled&&_react.default.createElement(_wms_internal_options.WmsInternalOptions,{wms:wms,setValue:setWmsOption}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertToGeoJson=convertToGeoJson;var _decode_geo_hash=__webpack_require__(421);var _grid_dimensions=__webpack_require__(1493);function convertToGeoJson(tabifiedResponse,_ref){var geohash=_ref.geohash,geocentroid=_ref.geocentroid,metric=_ref.metric;var features;var min=Infinity;var max=-Infinity;if(tabifiedResponse&&tabifiedResponse.rows){var table=tabifiedResponse;var geohashColumn=geohash?table.columns[geohash.accessor]:null;if(!geohashColumn){features=[]}else{var metricColumn=table.columns[metric.accessor];var geocentroidColumn=geocentroid?table.columns[geocentroid.accessor]:null;features=table.rows.map(function(row){var geohashValue=row[geohashColumn.id];if(!geohashValue)return false;var geohashLocation=(0,_decode_geo_hash.decodeGeoHash)(geohashValue);var pointCoordinates;if(geocentroidColumn){var location=row[geocentroidColumn.id];pointCoordinates=[location.lon,location.lat]}else{pointCoordinates=[geohashLocation.longitude[2],geohashLocation.latitude[2]]}var rectangle=[[geohashLocation.latitude[0],geohashLocation.longitude[0]],[geohashLocation.latitude[0],geohashLocation.longitude[1]],[geohashLocation.latitude[1],geohashLocation.longitude[1]],[geohashLocation.latitude[1],geohashLocation.longitude[0]]];var centerLatLng=[geohashLocation.latitude[2],geohashLocation.longitude[2]];if(geohash.params.useGeocentroid){pointCoordinates[0]=clampGrid(pointCoordinates[0],geohashLocation.longitude[0],geohashLocation.longitude[1]);pointCoordinates[1]=clampGrid(pointCoordinates[1],geohashLocation.latitude[0],geohashLocation.latitude[1])}var value=row[metricColumn.id];min=Math.min(min,value);max=Math.max(max,value);return{type:"Feature",geometry:{type:"Point",coordinates:pointCoordinates},properties:{geohash:geohashValue,geohash_meta:{center:centerLatLng,rectangle:rectangle},value:value}}}).filter(function(row){return row})}}else{features=[]}var featureCollection={type:"FeatureCollection",features:features};return{featureCollection:featureCollection,meta:{min:min,max:max,geohashPrecision:geohash&&geohash.params.precision,geohashGridDimensionsAtEquator:geohash&&(0,_grid_dimensions.gridDimensions)(geohash.params.precision)}}}function clampGrid(val,min,max){if(val>max)val=max;else if(val<min)val=min;return val}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTableVisResponseHandler=void 0;var _legacy=__webpack_require__(416);var createTableVisResponseHandler=function createTableVisResponseHandler(){return(0,_legacy.legacyResponseHandlerProvider)().handler};exports.createTableVisResponseHandler=createTableVisResponseHandler},function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(2);var _modules=__webpack_require__(6);var _paginate_controls=_interopRequireDefault(__webpack_require__(1536));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("paginate",function($parse,$compile){return{restrict:"E",scope:true,link:{pre:function pre($scope,$el,attrs){if(_lodash.default.isUndefined(attrs.bottomControls))attrs.bottomControls=true;if($el.find("paginate-controls.paginate-bottom").length===0&&attrs.bottomControls){$el.append($compile('<paginate-controls class="paginate-bottom">')($scope))}},post:function post($scope,$el,attrs){if(_lodash.default.isUndefined(attrs.topControls))attrs.topControls=false;if($el.find("paginate-controls.paginate-top").length===0&&attrs.topControls){$el.prepend($compile('<paginate-controls class="paginate-top">')($scope))}var paginate=$scope.paginate;paginate.getList=$parse(attrs.list);paginate.perPageProp=attrs.perPageProp;if(attrs.perPage){paginate.perPage=attrs.perPage;$scope.showSelector=false}else{$scope.showSelector=true}paginate.otherWidthGetter=$parse(attrs.otherWidth);paginate.init()}},controllerAs:"paginate",controller:function controller($scope,$document){var self=this;var ALL=0;var allSizeTitle=_i18n.i18n.translate("common.ui.directives.paginate.size.allDropDownOptionLabel",{defaultMessage:"All"});self.sizeOptions=[{title:"10",value:10},{title:"25",value:25},{title:"100",value:100},{title:allSizeTitle,value:ALL}];self.init=function(){self.perPage=_lodash.default.parseInt(self.perPage)||$scope[self.perPageProp];$scope.$watchMulti(["paginate.perPage",self.perPageProp,self.otherWidthGetter],function(vals,oldVals){var intChanges=vals[0]!==oldVals[0];if(intChanges){if(!setPerPage(self.perPage)){self.renderList()}return}self.perPage=_lodash.default.parseInt(self.perPage)||$scope[self.perPageProp];if(self.perPage==null){self.perPage=ALL;return}self.renderList()});$scope.$watch("page",self.changePage);$scope.$watchCollection(self.getList,function(list){$scope.list=list;self.renderList()})};self.goToPage=function(number){if(number){if(number.hasOwnProperty("number"))number=number.number;$scope.page=$scope.pages[number-1]||$scope.pages[0]}};self.goToTop=function goToTop(){$document.scrollTop(0)};self.renderList=function(){$scope.pages=[];if(!$scope.list)return;var perPage=_lodash.default.parseInt(self.perPage);var count=perPage?Math.ceil($scope.list.length/perPage):1;_lodash.default.times(count,function(i){var page;if(perPage){var start=perPage*i;page=$scope.list.slice(start,start+perPage)}else{page=$scope.list.slice(0)}page.number=i+1;page.i=i;page.count=count;page.first=page.number===1;page.last=page.number===count;page.firstItem=(page.number-1)*perPage+1;page.lastItem=Math.min(page.number*perPage,$scope.list.length);page.prev=$scope.pages[i-1];if(page.prev)page.prev.next=page;$scope.pages.push(page)});if($scope.page&&$scope.page.i<$scope.pages.length){$scope.page=$scope.pages[$scope.page.i]}else{$scope.page=$scope.pages[0]}if($scope.page&&$scope.onPageChanged){$scope.onPageChanged($scope.page)}};self.changePage=function(page){if(!page){$scope.otherPages=null;return}$scope.otherPages=[];var width=+self.otherWidthGetter($scope)||5;var left=page.i-Math.round((width-1)/2);var right=left+width-1;if(left<0){right+=0-left;left=0}var lastI=page.count-1;if(right>lastI){right=lastI;left=right-width+1}for(var i=left;i<=right;i++){var other=$scope.pages[i];if(!other)continue;$scope.otherPages.push(other);if(other.last)$scope.otherPages.containsLast=true;if(other.first)$scope.otherPages.containsFirst=true}if($scope.onPageChanged){$scope.onPageChanged($scope.page)}};function setPerPage(val){var $ppParent=$scope;while($ppParent&&!_lodash.default.has($ppParent,self.perPageProp)){$ppParent=$ppParent.$parent}if($ppParent){$ppParent[self.perPageProp]=val;return true}}}}}).directive("paginateControls",function(){return{restrict:"E",template:_paginate_controls.default}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ValidatedDualRange",{enumerable:true,get:function get(){return _validated_dual_range.ValidatedDualRange}});var _validated_dual_range=__webpack_require__(1554)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1872)},function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(17));var _modules=__webpack_require__(6);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var aceKeyboardModeId=0;_modules.uiModules.get("kibana").factory("kbnUiAceKeyboardModeService",function(){return{initialize:function initialize(scope,element){var uniqueId="kbnUiAceKeyboardHint-".concat(scope.$id,"-").concat(aceKeyboardModeId++);var hint=_angular.default.element('<div\n          class="kbnUiAceKeyboardHint"\n          id="'.concat(uniqueId,'"\n          tabindex="0"\n          role="application"\n        >\n          <p class="kuiText kuiVerticalRhythmSmall">\n            Press Enter to start editing.\n          </p>\n          <p class="kuiText kuiVerticalRhythmSmall">\n            When you&rsquo;re done, press Escape to stop editing.\n          </p>\n        </div>'));var uiAceTextbox=element.find("textarea");function startEditing(){hint.addClass("kbnUiAceKeyboardHint-isInactive");uiAceTextbox.focus()}function enableOverlay(){hint.removeClass("kbnUiAceKeyboardHint-isInactive")}hint.keydown(function(ev){if(ev.keyCode===_eui.keyCodes.ENTER){ev.preventDefault();startEditing()}});uiAceTextbox.blur(function(){enableOverlay()});var isAutoCompleterOpen;document.addEventListener("keydown",function(){var autoCompleter=document.querySelector(".ace_autocomplete");if(!autoCompleter){isAutoCompleterOpen=false;return}isAutoCompleterOpen=autoCompleter.style.display!=="none"},{capture:true});uiAceTextbox.keydown(function(ev){if(ev.keyCode===_eui.keyCodes.ESCAPE){if(!isAutoCompleterOpen){ev.preventDefault();ev.stopPropagation();enableOverlay();hint.focus()}}});hint.click(startEditing);uiAceTextbox.attr("tabindex","-1");element.prepend(hint)}}}).directive("kbnUiAceKeyboardMode",function(kbnUiAceKeyboardModeService){return{restrict:"A",link:function link(scope,element){kbnUiAceKeyboardModeService.initialize(scope,element)}}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1867)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2110)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createVegaRequestHandler=createVegaRequestHandler;var _timefilter=__webpack_require__(22);var _esQuery=__webpack_require__(20);var _vega_parser=__webpack_require__(1573);var _search_cache=__webpack_require__(1582);var _time_cache=__webpack_require__(1584);function createVegaRequestHandler(_ref){var es=_ref.es,uiSettings=_ref.uiSettings,serviceSettings=_ref.serviceSettings;var searchCache=new _search_cache.SearchCache(es,{max:10,maxAge:4*1e3});var timeCache=new _time_cache.TimeCache(_timefilter.timefilter,3*1e3);return function(_ref2){var timeRange=_ref2.timeRange,filters=_ref2.filters,query=_ref2.query,visParams=_ref2.visParams;timeCache.setTimeRange(timeRange);var esQueryConfigs=(0,_esQuery.getEsQueryConfig)(uiSettings);var filtersDsl=(0,_esQuery.buildEsQuery)(undefined,query,filters,esQueryConfigs);var vp=new _vega_parser.VegaParser(visParams.spec,searchCache,timeCache,filtersDsl,serviceSettings);return vp.parseAsync()}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2102)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEnableExternalUrls=exports.getEsShardTimeout=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getEsShardTimeout=function getEsShardTimeout(){return _chrome.default.getInjected("esShardTimeout")};exports.getEsShardTimeout=getEsShardTimeout;var getEnableExternalUrls=function getEnableExternalUrls(){return _chrome.default.getInjected("enableExternalUrls")};exports.getEnableExternalUrls=getEnableExternalUrls},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Utils=void 0;var _jsonStringifyPrettyCompact=_interopRequireDefault(__webpack_require__(674));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Utils=function(){function Utils(){_classCallCheck(this,Utils)}_createClass(Utils,null,[{key:"formatWarningToStr",value:function formatWarningToStr(value){if(arguments.length>=2){try{if(typeof arguments[1]==="string"){value+="\n".concat(arguments[1])}else{value+="\n"+(0,_jsonStringifyPrettyCompact.default)(arguments[1],{maxLength:70})}}catch(err){}}return value}},{key:"formatErrorToStr",value:function formatErrorToStr(error){if(!error){error="ERR"}else if(error instanceof Error){error=error.message}return Utils.formatWarningToStr.apply(Utils,[error].concat(_toConsumableArray(Array.from(arguments).slice(1))))}}]);return Utils}();exports.Utils=Utils},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"context",{enumerable:true,get:function get(){return _context.context}});Object.defineProperty(exports,"createKibanaReactContext",{enumerable:true,get:function get(){return _context.createKibanaReactContext}});Object.defineProperty(exports,"KibanaContextProvider",{enumerable:true,get:function get(){return _context.KibanaContextProvider}});Object.defineProperty(exports,"useKibana",{enumerable:true,get:function get(){return _context.useKibana}});Object.defineProperty(exports,"withKibana",{enumerable:true,get:function get(){return _context.withKibana}});Object.defineProperty(exports,"UseKibana",{enumerable:true,get:function get(){return _context.UseKibana}});Object.defineProperty(exports,"KibanaReactContext",{enumerable:true,get:function get(){return _types.KibanaReactContext}});Object.defineProperty(exports,"KibanaReactContextValue",{enumerable:true,get:function get(){return _types.KibanaReactContextValue}});var _context=__webpack_require__(1601);var _types=__webpack_require__(1607)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _types=__webpack_require__(1602);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})});var _create_react_overlays=__webpack_require__(1603);Object.keys(_create_react_overlays).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _create_react_overlays[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,Plugin:true};exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.DashboardEmbeddableContainerPublicPlugin}});var _plugin=__webpack_require__(1611);var _lib=__webpack_require__(691);Object.keys(_lib).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _lib[key]}})});function plugin(initializerContext){return new _plugin.DashboardEmbeddableContainerPublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EmbeddableOutput",{enumerable:true,get:function get(){return _i_embeddable.EmbeddableOutput}});Object.defineProperty(exports,"EmbeddableInput",{enumerable:true,get:function get(){return _i_embeddable.EmbeddableInput}});Object.defineProperty(exports,"IEmbeddable",{enumerable:true,get:function get(){return _i_embeddable.IEmbeddable}});Object.defineProperty(exports,"Embeddable",{enumerable:true,get:function get(){return _embeddable.Embeddable}});Object.defineProperty(exports,"EmbeddableInstanceConfiguration",{enumerable:true,get:function get(){return _embeddable_factory.EmbeddableInstanceConfiguration}});Object.defineProperty(exports,"EmbeddableFactory",{enumerable:true,get:function get(){return _embeddable_factory.EmbeddableFactory}});Object.defineProperty(exports,"OutputSpec",{enumerable:true,get:function get(){return _embeddable_factory.OutputSpec}});Object.defineProperty(exports,"ErrorEmbeddable",{enumerable:true,get:function get(){return _error_embeddable.ErrorEmbeddable}});Object.defineProperty(exports,"isErrorEmbeddable",{enumerable:true,get:function get(){return _error_embeddable.isErrorEmbeddable}});var _i_embeddable=__webpack_require__(1617);var _embeddable=__webpack_require__(683);var _embeddable_factory=__webpack_require__(1618);var _error_embeddable=__webpack_require__(1619)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Embeddable=void 0;var _lodash=__webpack_require__(1);var Rx=_interopRequireWildcard(__webpack_require__(16));var _types=__webpack_require__(89);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getPanelTitle(input,output){return input.hidePanelTitles?"":input.title===undefined?output.defaultTitle:input.title}var Embeddable=function(){function Embeddable(input,output,parent){var _this=this;_classCallCheck(this,Embeddable);_defineProperty(this,"parent",void 0);_defineProperty(this,"isContainer",false);_defineProperty(this,"type",void 0);_defineProperty(this,"id",void 0);_defineProperty(this,"output",void 0);_defineProperty(this,"input",void 0);_defineProperty(this,"input$",void 0);_defineProperty(this,"output$",void 0);_defineProperty(this,"parentSubscription",void 0);_defineProperty(this,"destoyed",false);this.id=input.id;this.output=_objectSpread({title:getPanelTitle(input,output)},output);this.input=_objectSpread({viewMode:_types.ViewMode.EDIT},input);this.parent=parent;this.input$=new Rx.BehaviorSubject(this.input);this.output$=new Rx.BehaviorSubject(this.output);if(parent){this.parentSubscription=Rx.merge(parent.getInput$(),parent.getOutput$()).subscribe(function(){if(!parent.getInput().panels[_this.id])return;var newInput=parent.getInputForChild(_this.id);_this.onResetInput(newInput)})}}_createClass(Embeddable,[{key:"getIsContainer",value:function getIsContainer(){return this.isContainer===true}},{key:"getInput$",value:function getInput$(){return this.input$.asObservable()}},{key:"getOutput$",value:function getOutput$(){return this.output$.asObservable()}},{key:"getOutput",value:function getOutput(){return this.output}},{key:"getInput",value:function getInput(){return this.input}},{key:"getTitle",value:function getTitle(){return this.output.title}},{key:"getRoot",value:function getRoot(){var root=this;while(root.parent){root=root.parent}return root}},{key:"updateInput",value:function updateInput(changes){if(this.destoyed){throw new Error("Embeddable has been destroyed")}if(this.parent){this.parent.updateInputForChild(this.id,changes)}else{this.onInputChanged(changes)}}},{key:"render",value:function render(domNode){if(this.destoyed){throw new Error("Embeddable has been destroyed")}return}},{key:"getInspectorAdapters",value:function getInspectorAdapters(){return undefined}},{key:"destroy",value:function destroy(){this.destoyed=true;if(this.parentSubscription){this.parentSubscription.unsubscribe()}return}},{key:"updateOutput",value:function updateOutput(outputChanges){var newOutput=_objectSpread({},this.output,{},outputChanges);if(!(0,_lodash.isEqual)(this.output,newOutput)){this.output=newOutput;this.output$.next(this.output)}}},{key:"onResetInput",value:function onResetInput(newInput){if(!(0,_lodash.isEqual)(this.input,newInput)){if(this.input.lastReloadRequestTime!==newInput.lastReloadRequestTime){this.reload()}this.input=newInput;this.input$.next(newInput);this.updateOutput({title:getPanelTitle(this.input,this.output)})}}},{key:"onInputChanged",value:function onInputChanged(changes){var newInput=(0,_lodash.cloneDeep)(_objectSpread({},this.input,{},changes));this.onResetInput(newInput)}}]);return Embeddable}();exports.Embeddable=Embeddable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PANEL_BADGE_TRIGGER=exports.APPLY_FILTER_TRIGGER=exports.CONTEXT_MENU_TRIGGER=void 0;var CONTEXT_MENU_TRIGGER="CONTEXT_MENU_TRIGGER";exports.CONTEXT_MENU_TRIGGER=CONTEXT_MENU_TRIGGER;var APPLY_FILTER_TRIGGER="FILTER_TRIGGER";exports.APPLY_FILTER_TRIGGER=APPLY_FILTER_TRIGGER;var PANEL_BADGE_TRIGGER="PANEL_BADGE_TRIGGER";exports.PANEL_BADGE_TRIGGER=PANEL_BADGE_TRIGGER},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EmbeddablePanel",{enumerable:true,get:function get(){return _embeddable_panel.EmbeddablePanel}});Object.defineProperty(exports,"ADD_PANEL_ACTION_ID",{enumerable:true,get:function get(){return _panel_header.ADD_PANEL_ACTION_ID}});Object.defineProperty(exports,"AddPanelAction",{enumerable:true,get:function get(){return _panel_header.AddPanelAction}});Object.defineProperty(exports,"openAddPanelFlyout",{enumerable:true,get:function get(){return _panel_header.openAddPanelFlyout}});var _embeddable_panel=__webpack_require__(1626);var _panel_header=__webpack_require__(1636)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"buildContextMenuForActions",{enumerable:true,get:function get(){return _build_eui_context_menu_panels.buildContextMenuForActions}});Object.defineProperty(exports,"openContextMenu",{enumerable:true,get:function get(){return _open_context_menu.openContextMenu}});var _build_eui_context_menu_panels=__webpack_require__(1627);var _open_context_menu=__webpack_require__(1628)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"InspectPanelAction",{enumerable:true,get:function get(){return _inspect_panel_action.InspectPanelAction}});Object.defineProperty(exports,"ADD_PANEL_ACTION_ID",{enumerable:true,get:function get(){return _add_panel.ADD_PANEL_ACTION_ID}});Object.defineProperty(exports,"AddPanelAction",{enumerable:true,get:function get(){return _add_panel.AddPanelAction}});Object.defineProperty(exports,"openAddPanelFlyout",{enumerable:true,get:function get(){return _add_panel.openAddPanelFlyout}});Object.defineProperty(exports,"RemovePanelAction",{enumerable:true,get:function get(){return _remove_panel_action.RemovePanelAction}});var _inspect_panel_action=__webpack_require__(688);var _add_panel=__webpack_require__(1629);var _remove_panel_action=__webpack_require__(1631)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectPanelAction=exports.INSPECT_PANEL_ACTION_ID=void 0;var _i18n=__webpack_require__(2);var _actions=__webpack_require__(110);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var INSPECT_PANEL_ACTION_ID="openInspector";exports.INSPECT_PANEL_ACTION_ID=INSPECT_PANEL_ACTION_ID;var InspectPanelAction=function(_Action){_inherits(InspectPanelAction,_Action);function InspectPanelAction(inspector){var _this;_classCallCheck(this,InspectPanelAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(InspectPanelAction).call(this,INSPECT_PANEL_ACTION_ID));_this.inspector=inspector;_defineProperty(_assertThisInitialized(_this),"type",INSPECT_PANEL_ACTION_ID);_this.order=20;return _this}_createClass(InspectPanelAction,[{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("embeddableApi.panel.inspectPanel.displayName",{defaultMessage:"Inspect"})}},{key:"getIconType",value:function getIconType(){return"inspect"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var embeddable;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;return _context.abrupt("return",this.inspector.isAvailable(embeddable.getInspectorAdapters()));case 2:case"end":return _context.stop()}}},_callee,this)}));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var embeddable,adapters,session,originalDestroy;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable;adapters=embeddable.getInspectorAdapters();_context2.next=4;return this.isCompatible({embeddable:embeddable});case 4:_context2.t0=!_context2.sent;if(_context2.t0){_context2.next=7;break}_context2.t0=adapters===undefined;case 7:if(!_context2.t0){_context2.next=9;break}throw new Error("Action not compatible with context");case 9:session=this.inspector.open(adapters,{title:embeddable.getTitle()});originalDestroy=embeddable.destroy;embeddable.destroy=function(){session.close();if(originalDestroy){originalDestroy.call(embeddable)}};session.onClose.finally(function(){embeddable.destroy=originalDestroy});case 13:case"end":return _context2.stop()}}},_callee2,this)}));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return InspectPanelAction}(_actions.Action);exports.InspectPanelAction=InspectPanelAction},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AddPanelAction=exports.ADD_PANEL_ACTION_ID=void 0;var _i18n=__webpack_require__(2);var _types=__webpack_require__(89);var _actions=__webpack_require__(110);var _open_add_panel_flyout=__webpack_require__(690);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ADD_PANEL_ACTION_ID="ADD_PANEL_ACTION_ID";exports.ADD_PANEL_ACTION_ID=ADD_PANEL_ACTION_ID;var AddPanelAction=function(_Action){_inherits(AddPanelAction,_Action);function AddPanelAction(getFactory,getAllFactories,overlays,notifications,SavedObjectFinder){var _this;_classCallCheck(this,AddPanelAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(AddPanelAction).call(this,ADD_PANEL_ACTION_ID));_this.getFactory=getFactory;_this.getAllFactories=getAllFactories;_this.overlays=overlays;_this.notifications=notifications;_this.SavedObjectFinder=SavedObjectFinder;_defineProperty(_assertThisInitialized(_this),"type",ADD_PANEL_ACTION_ID);return _this}_createClass(AddPanelAction,[{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("embeddableApi.addPanel.displayName",{defaultMessage:"Add panel"})}},{key:"getIconType",value:function getIconType(){return"plusInCircleFilled"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var embeddable;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;return _context.abrupt("return",embeddable.getIsContainer()&&embeddable.getInput().viewMode===_types.ViewMode.EDIT);case 2:case"end":return _context.stop()}}},_callee)}));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var embeddable;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable;_context2.t0=!embeddable.getIsContainer();if(_context2.t0){_context2.next=6;break}_context2.next=5;return this.isCompatible({embeddable:embeddable});case 5:_context2.t0=!_context2.sent;case 6:if(!_context2.t0){_context2.next=8;break}throw new Error("Context is incompatible");case 8:(0,_open_add_panel_flyout.openAddPanelFlyout)({embeddable:embeddable,getFactory:this.getFactory,getAllFactories:this.getAllFactories,overlays:this.overlays,notifications:this.notifications,SavedObjectFinder:this.SavedObjectFinder});case 9:case"end":return _context2.stop()}}},_callee2,this)}));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return AddPanelAction}(_actions.Action);exports.AddPanelAction=AddPanelAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.openAddPanelFlyout=openAddPanelFlyout;var _react=_interopRequireDefault(__webpack_require__(0));var _add_panel_flyout=__webpack_require__(1630);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function openAddPanelFlyout(_x){return _openAddPanelFlyout.apply(this,arguments)}function _openAddPanelFlyout(){_openAddPanelFlyout=_asyncToGenerator(regeneratorRuntime.mark(function _callee(options){var embeddable,getFactory,getAllFactories,overlays,notifications,SavedObjectFinder,flyoutSession;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=options.embeddable,getFactory=options.getFactory,getAllFactories=options.getAllFactories,overlays=options.overlays,notifications=options.notifications,SavedObjectFinder=options.SavedObjectFinder;flyoutSession=overlays.openFlyout(_react.default.createElement(_add_panel_flyout.AddPanelFlyout,{container:embeddable,onClose:function onClose(){if(flyoutSession){flyoutSession.close()}},getFactory:getFactory,getAllFactories:getAllFactories,notifications:notifications,SavedObjectFinder:SavedObjectFinder}),{"data-test-subj":"addPanelFlyout"});case 2:case"end":return _context.stop()}}},_callee)}));return _openAddPanelFlyout.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _types=__webpack_require__(1647);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})});var _actions=__webpack_require__(1648);Object.keys(_actions).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _actions[key]}})});var _embeddable=__webpack_require__(692);Object.keys(_embeddable).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddable[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DASHBOARD_CONTAINER_TYPE",{enumerable:true,get:function get(){return _dashboard_container_factory.DASHBOARD_CONTAINER_TYPE}});Object.defineProperty(exports,"DashboardContainerFactory",{enumerable:true,get:function get(){return _dashboard_container_factory.DashboardContainerFactory}});Object.defineProperty(exports,"DashboardContainer",{enumerable:true,get:function get(){return _dashboard_container.DashboardContainer}});Object.defineProperty(exports,"DashboardContainerInput",{enumerable:true,get:function get(){return _dashboard_container.DashboardContainerInput}});Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _panel.createPanelState}});Object.defineProperty(exports,"DashboardPanelState",{enumerable:true,get:function get(){return _types.DashboardPanelState}});Object.defineProperty(exports,"GridData",{enumerable:true,get:function get(){return _types.GridData}});Object.defineProperty(exports,"DASHBOARD_GRID_COLUMN_COUNT",{enumerable:true,get:function get(){return _dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT}});Object.defineProperty(exports,"DEFAULT_PANEL_HEIGHT",{enumerable:true,get:function get(){return _dashboard_constants.DEFAULT_PANEL_HEIGHT}});Object.defineProperty(exports,"DEFAULT_PANEL_WIDTH",{enumerable:true,get:function get(){return _dashboard_constants.DEFAULT_PANEL_WIDTH}});var _dashboard_container_factory=__webpack_require__(693);var _dashboard_container=__webpack_require__(694);var _panel=__webpack_require__(695);var _types=__webpack_require__(1658);var _dashboard_constants=__webpack_require__(443)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardContainerFactory=exports.DASHBOARD_CONTAINER_TYPE=void 0;var _i18n=__webpack_require__(2);var _embeddable_api=__webpack_require__(440);var _dashboard_container=__webpack_require__(694);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DASHBOARD_CONTAINER_TYPE="dashboard";exports.DASHBOARD_CONTAINER_TYPE=DASHBOARD_CONTAINER_TYPE;var DashboardContainerFactory=function(_EmbeddableFactory){_inherits(DashboardContainerFactory,_EmbeddableFactory);function DashboardContainerFactory(options){var _this;_classCallCheck(this,DashboardContainerFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardContainerFactory).call(this,{savedObjectMetaData:options.savedObjectMetaData}));_this.options=options;_defineProperty(_assertThisInitialized(_this),"isContainerType",true);_defineProperty(_assertThisInitialized(_this),"type",DASHBOARD_CONTAINER_TYPE);_defineProperty(_assertThisInitialized(_this),"allowEditing",void 0);var capabilities=options.application.capabilities.dashboard;if(!capabilities||_typeof(capabilities)!=="object"){throw new TypeError("Dashboard capabilities not found.")}_this.allowEditing=!!capabilities.createNew&&!!capabilities.showWriteControls;return _this}_createClass(DashboardContainerFactory,[{key:"isEditable",value:function isEditable(){return this.allowEditing}},{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("dashboardEmbeddableContainer.factory.displayName",{defaultMessage:"dashboard"})}},{key:"getDefaultInput",value:function getDefaultInput(){return{panels:{},isFullScreenMode:false,useMargins:true}}},{key:"create",value:function(){var _create=_asyncToGenerator(regeneratorRuntime.mark(function _callee(initialInput,parent){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new _dashboard_container.DashboardContainer(initialInput,this.options,parent));case 1:case"end":return _context.stop()}}},_callee,this)}));function create(_x,_x2){return _create.apply(this,arguments)}return create}()}]);return DashboardContainerFactory}(_embeddable_api.EmbeddableFactory);exports.DashboardContainerFactory=DashboardContainerFactory},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardContainer=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(13));var _react2=__webpack_require__(5);var _public=__webpack_require__(40);var _dashboard_container_factory=__webpack_require__(693);var _panel=__webpack_require__(695);var _dashboard_viewport=__webpack_require__(1651);var _public2=__webpack_require__(373);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardContainer=function(_Container){_inherits(DashboardContainer,_Container);function DashboardContainer(initialInput,options,parent){var _this;_classCallCheck(this,DashboardContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardContainer).call(this,_objectSpread({panels:{},isFullScreenMode:false,filters:[],useMargins:true},initialInput),{embeddableLoaded:{}},options.embeddable.getEmbeddableFactory,parent));_this.options=options;_defineProperty(_assertThisInitialized(_this),"type",_dashboard_container_factory.DASHBOARD_CONTAINER_TYPE);return _this}_createClass(DashboardContainer,[{key:"createNewPanelState",value:function createNewPanelState(factory){var partial=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var panelState=_get(_getPrototypeOf(DashboardContainer.prototype),"createNewPanelState",this).call(this,factory,partial);return(0,_panel.createPanelState)(panelState,Object.values(this.input.panels))}},{key:"render",value:function render(dom){_reactDom.default.render(_react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_public2.KibanaContextProvider,{services:this.options},_react.default.createElement(_dashboard_viewport.DashboardViewport,{container:this}))),dom)}},{key:"getInheritedInput",value:function getInheritedInput(id){var _this$input=this.input,viewMode=_this$input.viewMode,refreshConfig=_this$input.refreshConfig,timeRange=_this$input.timeRange,query=_this$input.query,hidePanelTitles=_this$input.hidePanelTitles,filters=_this$input.filters;return{filters:filters,hidePanelTitles:hidePanelTitles,query:query,timeRange:timeRange,refreshConfig:refreshConfig,viewMode:viewMode,id:id}}}]);return DashboardContainer}(_public.Container);exports.DashboardContainer=DashboardContainer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _create_panel_state.createPanelState}});var _create_panel_state=__webpack_require__(1650)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createAnalyticsReporter=createAnalyticsReporter;exports.createUiStatsReporter=exports.getTelemetryReporter=exports.setTelemetryReporter=void 0;var _analytics=__webpack_require__(773);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var telemetryReporter;var setTelemetryReporter=function setTelemetryReporter(aTelemetryReporter){telemetryReporter=aTelemetryReporter};exports.setTelemetryReporter=setTelemetryReporter;var getTelemetryReporter=function getTelemetryReporter(){return telemetryReporter};exports.getTelemetryReporter=getTelemetryReporter;var createUiStatsReporter=function createUiStatsReporter(appName){return function(type,eventNames,count){if(telemetryReporter){return telemetryReporter.reportUiStats(appName,type,eventNames,count)}}};exports.createUiStatsReporter=createUiStatsReporter;function createAnalyticsReporter(config){var localStorage=config.localStorage,basePath=config.basePath,$http=config.$http,debug=config.debug;return(0,_analytics.createReporter)({debug:debug,storage:localStorage,http:function(){var _http=_asyncToGenerator(regeneratorRuntime.mark(function _callee(report){var url;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url="".concat(basePath,"/api/telemetry/report");_context.next=3;return $http.post(url,{report:report});case 3:case"end":return _context.stop()}}},_callee)}));function http(_x){return _http.apply(this,arguments)}return http}()})}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2730)},,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=TimelionVisProvider;var _vis_factory=__webpack_require__(45);var _i18n=__webpack_require__(2);var _vis_types=__webpack_require__(49);var _timelion_request_handler=__webpack_require__(604);var _editor_size=__webpack_require__(361);__webpack_require__(1719);__webpack_require__(709);var _timelion_vis=_interopRequireDefault(__webpack_require__(1728));var _timelion_vis_params=_interopRequireDefault(__webpack_require__(1729));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(TimelionVisProvider);function TimelionVisProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);var timelionRequestHandler=Private(_timelion_request_handler.TimelionRequestHandlerProvider);return VisFactory.createAngularVisualization({name:"timelion",title:"Timelion",icon:"visTimelion",description:_i18n.i18n.translate("timelion.timelionDescription",{defaultMessage:"Build time-series using functional expressions"}),visConfig:{defaults:{expression:".es(*)",interval:"auto"},template:_timelion_vis.default},editorConfig:{optionsTemplate:_timelion_vis_params.default,defaultSize:_editor_size.DefaultEditorSize.MEDIUM},requestHandler:timelionRequestHandler.handler,responseHandler:"none",options:{showIndexSelection:false,showQueryBar:false,showFilterBar:false}})}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));var _timelion_interval=_interopRequireDefault(__webpack_require__(1720));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=__webpack_require__(6).get("apps/timelion",[]);app.directive("timelionInterval",function($timeout){return{restrict:"E",scope:{model:"="},template:_timelion_interval.default,link:function link($scope,$elem){$scope.intervalOptions=["auto","1s","1m","1h","1d","1w","1M","1y","other"];$scope.intervalLabels={auto:"auto","1s":"1 second","1m":"1 minute","1h":"1 hour","1d":"1 day","1w":"1 week","1M":"1 month","1y":"1 year",other:"other"};$scope.$watch("model",function(newVal,oldVal){if(newVal!==oldVal||oldVal==null)return;if(_lodash.default.contains($scope.intervalOptions,newVal)){$scope.interval=newVal}else{$scope.interval="other"}if(newVal!=="other"){$scope.otherInterval=newVal}});$scope.$watch("interval",function(newVal,oldVal){if(newVal===oldVal)return;if(newVal==="other"){$scope.otherInterval=oldVal;$scope.model=$scope.otherInterval;$timeout(function(){(0,_jquery.default)("input",$elem).select()},0)}else{$scope.otherInterval=$scope.interval;$scope.model=$scope.interval}});$scope.$watch("otherInterval",function(newVal,oldVal){if(newVal===oldVal)return;$scope.model=newVal})}}})},function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));var _pegjs=_interopRequireDefault(__webpack_require__(1844));var _chain=_interopRequireDefault(__webpack_require__(1722));__webpack_require__(1723);var _timelion_expression_input=_interopRequireDefault(__webpack_require__(1725));var _timelion_expression_input_helpers=__webpack_require__(1726);var _eui=__webpack_require__(3);var _arg_value_suggestions=__webpack_require__(1727);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var Parser=_pegjs.default.generate(_chain.default);var app=__webpack_require__(6).get("apps/timelion",[]);app.directive("timelionExpressionInput",function($http,$timeout,Private){return{restrict:"E",scope:{rows:"=",sheet:"=",updateChart:"&",shouldPopoverSuggestions:"@"},replace:true,template:_timelion_expression_input.default,link:function link(scope,elem){var argValueSuggestions=Private(_arg_value_suggestions.ArgValueSuggestionsProvider);var expressionInput=elem.find("[data-expression-input]");var functionReference={};var suggestibleFunctionLocation={};scope.suggestions=new _timelion_expression_input_helpers.Suggestions;function init(){$http.get("../api/timelion/functions").then(function(resp){Object.assign(functionReference,{byName:_lodash.default.indexBy(resp.data,"name"),list:resp.data})})}function setCaretOffset(caretOffset){$timeout(function(){expressionInput.focus();expressionInput[0].selectionStart=expressionInput[0].selectionEnd=caretOffset;scope.$apply()},0)}function insertSuggestionIntoExpression(suggestionIndex){if(scope.suggestions.isEmpty()){return}var _suggestibleFunctionL=suggestibleFunctionLocation,min=_suggestibleFunctionL.min,max=_suggestibleFunctionL.max;var insertedValue;var insertPositionMinOffset=0;switch(scope.suggestions.type){case _timelion_expression_input_helpers.SUGGESTION_TYPE.FUNCTIONS:{insertedValue="".concat(scope.suggestions.list[suggestionIndex].name,"()");insertPositionMinOffset=1;break}case _timelion_expression_input_helpers.SUGGESTION_TYPE.ARGUMENTS:{insertedValue="".concat(scope.suggestions.list[suggestionIndex].name,"=");break}case _timelion_expression_input_helpers.SUGGESTION_TYPE.ARGUMENT_VALUE:{insertedValue="".concat(scope.suggestions.list[suggestionIndex].name);break}}var updatedExpression=(0,_timelion_expression_input_helpers.insertAtLocation)(insertedValue,scope.sheet,min+insertPositionMinOffset,max);scope.sheet=updatedExpression;var newCaretOffset=min+insertedValue.length;setCaretOffset(newCaretOffset)}function scrollToSuggestionAt(index){var suggestionsList=(0,_jquery.default)("[data-suggestions-list]");var suggestionListItem=(0,_jquery.default)("[data-suggestion-list-item]")[index];suggestionsList.scrollTop(suggestionListItem.offsetTop-suggestionsList[0].offsetTop)}function getCursorPosition(){if(expressionInput.length){return expressionInput[0].selectionStart}return null}function getSuggestions(){return _getSuggestions.apply(this,arguments)}function _getSuggestions(){_getSuggestions=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var suggestions;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_timelion_expression_input_helpers.suggest)(scope.sheet,functionReference.list,Parser,getCursorPosition(),argValueSuggestions);case 2:suggestions=_context.sent;scope.$apply(function(){if(suggestions){scope.suggestions.setList(suggestions.list,suggestions.type);scope.suggestions.show();suggestibleFunctionLocation=suggestions.location;$timeout(function(){var suggestionsList=(0,_jquery.default)("[data-suggestions-list]");suggestionsList.scrollTop(0)},0);return}suggestibleFunctionLocation=undefined;scope.suggestions.reset()});case 4:case"end":return _context.stop()}}},_callee)}));return _getSuggestions.apply(this,arguments)}function isNavigationalKey(keyCode){var keyCodes=_lodash.default.values(_eui.comboBoxKeyCodes);return keyCodes.includes(keyCode)}scope.onFocusInput=function(){$timeout(getSuggestions,0)};scope.onBlurInput=function(){scope.suggestions.hide()};scope.onKeyDownInput=function(e){if(!isNavigationalKey(e.keyCode)){return}switch(e.keyCode){case _eui.comboBoxKeyCodes.UP:if(scope.suggestions.isVisible){e.preventDefault();scope.suggestions.stepForward();scrollToSuggestionAt(scope.suggestions.index)}break;case _eui.comboBoxKeyCodes.DOWN:if(scope.suggestions.isVisible){e.preventDefault();scope.suggestions.stepBackward();scrollToSuggestionAt(scope.suggestions.index)}break;case _eui.comboBoxKeyCodes.TAB:if(scope.suggestions.isEmpty()||scope.suggestions.index<0){scope.suggestions.hide();return}e.preventDefault();insertSuggestionIntoExpression(scope.suggestions.index);break;case _eui.comboBoxKeyCodes.ENTER:if(e.metaKey||e.ctrlKey){e.preventDefault();scope.updateChart()}else if(!scope.suggestions.isEmpty()){e.preventDefault();insertSuggestionIntoExpression(scope.suggestions.index)}break;case _eui.comboBoxKeyCodes.ESCAPE:e.preventDefault();scope.suggestions.hide();break}};scope.onKeyUpInput=function(e){if(!isNavigationalKey(e.keyCode)){getSuggestions()}};scope.onClickExpression=function(){getSuggestions()};scope.onClickSuggestion=function(index){insertSuggestionIntoExpression(index)};scope.getActiveSuggestionId=function(){if(scope.suggestions.isVisible&&scope.suggestions.index>-1){return"timelionSuggestion".concat(scope.suggestions.index)}return""};init()}}})},,,,,,,,function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(2);__webpack_require__(1755);var _modules=__webpack_require__(6);var _saved_objects=__webpack_require__(36);var _saved_object_registry=__webpack_require__(91);var _module=_modules.uiModules.get("app/dashboard");_saved_object_registry.savedObjectManagementRegistry.register({service:"savedDashboards",title:_i18n.i18n.translate("kbn.dashboard.savedDashboardsTitle",{defaultMessage:"dashboards"})});_module.service("savedDashboards",function(Private,SavedDashboard,kbnUrl,chrome){var savedObjectClient=Private(_saved_objects.SavedObjectsClientProvider);return new _saved_objects.SavedObjectLoader(SavedDashboard,kbnUrl,chrome,savedObjectClient)})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1758);__webpack_require__(9);var _modules=__webpack_require__(6);var _saved_objects=__webpack_require__(36);var _saved_object_registry=__webpack_require__(91);var _module=_modules.uiModules.get("discover/saved_searches");_saved_object_registry.savedObjectManagementRegistry.register({service:"savedSearches",title:"searches"});_module.service("savedSearches",function(Private,SavedSearch,kbnUrl,chrome){var savedObjectClient=Private(_saved_objects.SavedObjectsClientProvider);var savedSearchLoader=new _saved_objects.SavedObjectLoader(SavedSearch,kbnUrl,chrome,savedObjectClient);savedSearchLoader.loaderProperties={name:"searches",noun:"Saved Search",nouns:"saved searches"};savedSearchLoader.urlFor=function(id){return kbnUrl.eval("#/discover/{{id}}",{id:id})};return savedSearchLoader})},function(module,exports,__webpack_require__){"use strict";var _vis=__webpack_require__(408);var _i18n=__webpack_require__(2);var _modules=__webpack_require__(6);var _vis_update_state=__webpack_require__(1760);var _visualize_constants=__webpack_require__(92);var _legacy_class=__webpack_require__(29);var _saved_object=__webpack_require__(377);var _saved_visualization_references=__webpack_require__(1761);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}_modules.uiModules.get("app/visualize").factory("SavedVis",function(Promise,savedSearches,Private){var Vis=Private(_vis.VisProvider);var SavedObject=Private(_saved_object.SavedObjectProvider);(0,_legacy_class.createLegacyClass)(SavedVis).inherits(SavedObject);function SavedVis(opts){var self=this;opts=opts||{};if(_typeof(opts)!=="object")opts={id:opts};SavedVis.Super.call(self,{type:SavedVis.type,mapping:SavedVis.mapping,searchSource:SavedVis.searchSource,extractReferences:_saved_visualization_references.extractReferences,injectReferences:_saved_visualization_references.injectReferences,id:opts.id,indexPattern:opts.indexPattern,defaults:{title:_i18n.i18n.translate("kbn.visualize.defaultVisualizationTitle",{defaultMessage:"New Visualization"}),visState:function(){if(!opts.type)return null;var def={};def.type=opts.type;return def}(),uiStateJSON:"{}",description:"",savedSearchId:opts.savedSearchId,version:1},afterESResp:this._afterEsResp});this.showInRecentlyAccessed=true}SavedVis.type="visualization";SavedVis.mapping={title:"text",visState:"json",uiStateJSON:"text",description:"text",savedSearchId:"keyword",version:"integer"};SavedVis.fieldOrder=["title","description"];SavedVis.searchSource=true;SavedVis.prototype.getFullPath=function(){return"/app/kibana#".concat(_visualize_constants.VisualizeConstants.EDIT_PATH,"/").concat(this.id)};SavedVis.prototype._afterEsResp=function(){var self=this;return self._getLinkedSavedSearch().then(function(){self.searchSource.setField("size",0);return self.vis?self._updateVis():self._createVis()})};SavedVis.prototype._getLinkedSavedSearch=Promise.method(function(){var self=this;var linkedSearch=!!self.savedSearchId;var current=self.savedSearch;if(linkedSearch&&current&&current.id===self.savedSearchId){return}if(self.savedSearch){self.searchSource.setParent(self.savedSearch.searchSource.getParent());self.savedSearch.destroy();self.savedSearch=null}if(linkedSearch){return savedSearches.get(self.savedSearchId).then(function(savedSearch){self.savedSearch=savedSearch;self.searchSource.setParent(self.savedSearch.searchSource)})}});SavedVis.prototype._createVis=function(){var self=this;self.visState=(0,_vis_update_state.updateOldState)(self.visState);if(self.visState){self.visState.title=self.title}self.vis=new Vis(self.searchSource.getField("index"),self.visState);self.vis.savedSearchId=self.savedSearchId;return self.vis};SavedVis.prototype._updateVis=function(){var self=this;self.vis.indexPattern=self.searchSource.getField("index");self.visState.title=self.title;self.vis.setState(self.visState);self.vis.savedSearchId=self.savedSearchId};return SavedVis})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noWhiteSpace=noWhiteSpace;var TAGS_WITH_WS=/>\s+</g;function noWhiteSpace(html){return html.replace(TAGS_WITH_WS,"><")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_COLOR=void 0;var DEFAULT_COLOR={range:"".concat(Number.NEGATIVE_INFINITY,":").concat(Number.POSITIVE_INFINITY),regex:"<insert regex>",text:"#000000",background:"#ffffff"};exports.DEFAULT_COLOR=DEFAULT_COLOR},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setBaseTitle=setBaseTitle;exports.docTitle=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var baseTitle=document.title;function setBaseTitle(str){baseTitle=str}var lastChange;function render(){lastChange=lastChange||[];var parts=[lastChange[0]];if(!lastChange[1])parts.push(baseTitle);return(0,_lodash.default)(parts).flattenDeep().compact().join(" - ")}function change(title,complete){lastChange=[title,complete];update()}function reset(){lastChange=null}function update(){document.title=render()}var docTitle={render:render,change:change,reset:reset,update:update};exports.docTitle=docTitle;_modules.uiModules.get("kibana").run(function($rootScope){$rootScope.$on("$routeChangeStart",docTitle.reset);$rootScope.$on("$routeChangeError",docTitle.update);$rootScope.$on("$routeChangeSuccess",docTitle.update)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(1925);__webpack_require__(1931);__webpack_require__(1943);__webpack_require__(378)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ConfirmationButtonTypes",{enumerable:true,get:function get(){return _confirm_modal.ConfirmationButtonTypes}});Object.defineProperty(exports,"ModalOverlay",{enumerable:true,get:function get(){return _modal_overlay.ModalOverlay}});var _confirm_modal=__webpack_require__(759);__webpack_require__(1938);var _modal_overlay=__webpack_require__(760)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConfirmationButtonTypes=void 0;var _angular=_interopRequireDefault(__webpack_require__(17));var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);var _modules=__webpack_require__(6);var _confirm_modal=_interopRequireDefault(__webpack_require__(1936));var _modal_overlay=__webpack_require__(760);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");var ConfirmationButtonTypes={CONFIRM:_eui.EUI_MODAL_CONFIRM_BUTTON,CANCEL:_eui.EUI_MODAL_CANCEL_BUTTON};exports.ConfirmationButtonTypes=ConfirmationButtonTypes;_module.factory("confirmModal",function($rootScope,$compile){var modalPopover;var confirmQueue=[];return function confirmModal(message,customOptions){var defaultOptions={onCancel:_lodash.noop,cancelButtonText:_i18n.i18n.translate("common.ui.modals.cancelButtonLabel",{defaultMessage:"Cancel"}),defaultFocusedButton:ConfirmationButtonTypes.CONFIRM};if(!customOptions.confirmButtonText||!customOptions.onConfirm){throw new Error("Please specify confirmation button text and onConfirm action")}var options=Object.assign(defaultOptions,customOptions);options.onClose=customOptions.onClose||options.onCancel;var confirmScope=$rootScope.$new();confirmScope.message=message;confirmScope.defaultFocusedButton=options.defaultFocusedButton;confirmScope.confirmButtonText=options.confirmButtonText;confirmScope.cancelButtonText=options.cancelButtonText;confirmScope.title=options.title;confirmScope.onConfirm=function(){destroy();options.onConfirm()};confirmScope.onCancel=function(){destroy();options.onCancel()};confirmScope.onClose=function(){destroy();options.onClose()};function showModal(confirmScope){var modalInstance=$compile(_confirm_modal.default)(confirmScope);modalPopover=new _modal_overlay.ModalOverlay(modalInstance)}if(modalPopover){confirmQueue.unshift(confirmScope)}else{showModal(confirmScope)}function destroy(){modalPopover.destroy();modalPopover=undefined;_angular.default.element(document.body).off("keydown");confirmScope.$destroy();if(confirmQueue.length>0){showModal(confirmQueue.pop())}}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ModalOverlay=void 0;var _angular=_interopRequireDefault(__webpack_require__(17));var _modal_overlay=_interopRequireDefault(__webpack_require__(1937));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var ModalOverlay=function(){function ModalOverlay(modalElement){_classCallCheck(this,ModalOverlay);this.overlayElement=_angular.default.element(_modal_overlay.default);this.overlayElement.append(modalElement);_angular.default.element(document.body).append(this.overlayElement)}_createClass(ModalOverlay,[{key:"destroy",value:function destroy(){this.overlayElement.remove()}}]);return ModalOverlay}();exports.ModalOverlay=ModalOverlay},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1944)},,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1697)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ChromeRecentlyAccessed",{enumerable:true,get:function get(){return _recently_accessed.ChromeRecentlyAccessed}});Object.defineProperty(exports,"ChromeNavControls",{enumerable:true,get:function get(){return _nav_controls.ChromeNavControls}});exports.ChromeService=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _rxjs=__webpack_require__(16);var _operators=__webpack_require__(27);var Url=_interopRequireWildcard(__webpack_require__(38));var _i18n=__webpack_require__(2);var _nav_links=__webpack_require__(479);var _recently_accessed=__webpack_require__(481);var _nav_controls=__webpack_require__(482);var _ui=__webpack_require__(818);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IS_COLLAPSED_KEY="core.chrome.isCollapsed";function isEmbedParamInHash(){var _Url$parse=Url.parse(String(window.location.hash).slice(1),true),query=_Url$parse.query;return Boolean(query.embed)}var ChromeService=function(){function ChromeService(_ref){var browserSupportsCsp=_ref.browserSupportsCsp;_classCallCheck(this,ChromeService);_defineProperty(this,"stop$",new _rxjs.ReplaySubject(1));_defineProperty(this,"browserSupportsCsp",void 0);_defineProperty(this,"navControls",new _nav_controls.NavControlsService);_defineProperty(this,"navLinks",new _nav_links.NavLinksService);_defineProperty(this,"recentlyAccessed",new _recently_accessed.RecentlyAccessedService);this.browserSupportsCsp=browserSupportsCsp}_createClass(ChromeService,[{key:"start",value:function(){var _start=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref2){var _this=this;var application,docLinks,http,injectedMetadata,notifications,FORCE_HIDDEN,appTitle$,brand$,isVisible$,isCollapsed$,applicationClasses$,helpExtension$,breadcrumbs$,badge$,navControls,navLinks,recentlyAccessed;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:application=_ref2.application,docLinks=_ref2.docLinks,http=_ref2.http,injectedMetadata=_ref2.injectedMetadata,notifications=_ref2.notifications;FORCE_HIDDEN=isEmbedParamInHash();appTitle$=new _rxjs.BehaviorSubject("Kibana");brand$=new _rxjs.BehaviorSubject({});isVisible$=new _rxjs.BehaviorSubject(true);isCollapsed$=new _rxjs.BehaviorSubject(!!localStorage.getItem(IS_COLLAPSED_KEY));applicationClasses$=new _rxjs.BehaviorSubject(new Set);helpExtension$=new _rxjs.BehaviorSubject(undefined);breadcrumbs$=new _rxjs.BehaviorSubject([]);badge$=new _rxjs.BehaviorSubject(undefined);navControls=this.navControls.start();navLinks=this.navLinks.start({application:application,http:http});_context.next=14;return this.recentlyAccessed.start({http:http});case 14:recentlyAccessed=_context.sent;if(!this.browserSupportsCsp&&injectedMetadata.getCspConfig().warnLegacyBrowsers){notifications.toasts.addWarning(_i18n.i18n.translate("core.chrome.legacyBrowserWarning",{defaultMessage:"Your browser does not meet the security requirements for Kibana."}))}return _context.abrupt("return",{navControls:navControls,navLinks:navLinks,recentlyAccessed:recentlyAccessed,getComponent:function getComponent(){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_ui.LoadingIndicator,{loadingCount$:http.getLoadingCount$()}),_react.default.createElement(_ui.HeaderWrapper,{appTitle$:appTitle$.pipe((0,_operators.takeUntil)(_this.stop$)),badge$:badge$.pipe((0,_operators.takeUntil)(_this.stop$)),basePath:http.basePath,breadcrumbs$:breadcrumbs$.pipe((0,_operators.takeUntil)(_this.stop$)),kibanaDocLink:docLinks.links.kibana,forceAppSwitcherNavigation$:navLinks.getForceAppSwitcherNavigation$(),helpExtension$:helpExtension$.pipe((0,_operators.takeUntil)(_this.stop$)),homeHref:http.basePath.prepend("/app/kibana#/home"),isVisible$:isVisible$.pipe((0,_operators.map)(function(visibility){return FORCE_HIDDEN?false:visibility}),(0,_operators.takeUntil)(_this.stop$)),kibanaVersion:injectedMetadata.getKibanaVersion(),navLinks$:navLinks.getNavLinks$(),recentlyAccessed$:recentlyAccessed.get$(),navControlsLeft$:navControls.getLeft$(),navControlsRight$:navControls.getRight$()}))},setAppTitle:function setAppTitle(appTitle){return appTitle$.next(appTitle)},getBrand$:function getBrand$(){return brand$.pipe((0,_operators.takeUntil)(_this.stop$))},setBrand:function setBrand(brand){brand$.next(Object.freeze({logo:brand.logo,smallLogo:brand.smallLogo}))},getIsVisible$:function getIsVisible$(){return isVisible$.pipe((0,_operators.map)(function(visibility){return FORCE_HIDDEN?false:visibility}),(0,_operators.takeUntil)(_this.stop$))},setIsVisible:function setIsVisible(visibility){isVisible$.next(visibility)},getIsCollapsed$:function getIsCollapsed$(){return isCollapsed$.pipe((0,_operators.takeUntil)(_this.stop$))},setIsCollapsed:function setIsCollapsed(isCollapsed){isCollapsed$.next(isCollapsed);if(isCollapsed){localStorage.setItem(IS_COLLAPSED_KEY,"true")}else{localStorage.removeItem(IS_COLLAPSED_KEY)}},getApplicationClasses$:function getApplicationClasses$(){return applicationClasses$.pipe((0,_operators.map)(function(set){return _toConsumableArray(set)}),(0,_operators.takeUntil)(_this.stop$))},addApplicationClass:function addApplicationClass(className){var update=new Set(_toConsumableArray(applicationClasses$.getValue()));update.add(className);applicationClasses$.next(update)},removeApplicationClass:function removeApplicationClass(className){var update=new Set(_toConsumableArray(applicationClasses$.getValue()));update.delete(className);applicationClasses$.next(update)},getBadge$:function getBadge$(){return badge$.pipe((0,_operators.takeUntil)(_this.stop$))},setBadge:function setBadge(badge){badge$.next(badge)},getBreadcrumbs$:function getBreadcrumbs$(){return breadcrumbs$.pipe((0,_operators.takeUntil)(_this.stop$))},setBreadcrumbs:function setBreadcrumbs(newBreadcrumbs){breadcrumbs$.next(newBreadcrumbs)},getHelpExtension$:function getHelpExtension$(){return helpExtension$.pipe((0,_operators.takeUntil)(_this.stop$))},setHelpExtension:function setHelpExtension(helpExtension){helpExtension$.next(helpExtension)}});case 17:case"end":return _context.stop()}}},_callee,this)}));function start(_x){return _start.apply(this,arguments)}return start}()},{key:"stop",value:function stop(){this.navLinks.stop();this.stop$.next()}}]);return ChromeService}();exports.ChromeService=ChromeService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.assertNever=assertNever;function assertNever(x){throw new Error("Unexpected object: ".concat(x))}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.deepFreeze=deepFreeze;function deepFreeze(object){for(var _i=0,_Object$values=Object.values(object);_i<_Object$values.length;_i++){var value=_Object$values[_i];if(value!==null&&_typeof(value)==="object"){deepFreeze(value)}}return Object.freeze(object)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.get=get;function get(obj,path){if(typeof path==="string"){if(path.includes(".")){throw new Error("Using dots in `get` with a string is not allowed, use array instead")}return obj[path]}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=path[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var key=_step.value;obj=obj[key]}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return obj}},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.mapToObject=mapToObject;function mapToObject(map){var result=Object.create(null);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=map[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];result[key]=value}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return result}},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.merge=merge;function merge(baseObj){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key]}var firstSource=sources[0];if(firstSource===undefined){return baseObj}return sources.slice(1).reduce(function(merged,nextSource){return mergeObjects(merged,nextSource)},mergeObjects(baseObj,firstSource))}var isMergable=function isMergable(obj){return _typeof(obj)==="object"&&obj!==null&&!Array.isArray(obj)};var mergeObjects=function mergeObjects(baseObj,overrideObj){return _toConsumableArray(new Set([].concat(_toConsumableArray(Object.keys(baseObj)),_toConsumableArray(Object.keys(overrideObj))))).reduce(function(merged,key){var baseVal=baseObj[key];var overrideVal=overrideObj[key];if(isMergable(baseVal)&&isMergable(overrideVal)){merged[key]=mergeObjects(baseVal,overrideVal)}else if(overrideVal!==undefined){merged[key]=overrideVal}else if(baseVal!==undefined){merged[key]=baseVal}return merged},{})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pick=pick;function pick(obj,keys){return keys.reduce(function(acc,key){if(obj.hasOwnProperty(key)){acc[key]=obj[key]}return acc},{})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.modifyUrl=modifyUrl;var _url=__webpack_require__(38);function modifyUrl(url,urlModifier){var parsed=(0,_url.parse)(url,true);var meaningfulParts={auth:parsed.auth,hash:parsed.hash,hostname:parsed.hostname,pathname:parsed.pathname,port:parsed.port,protocol:parsed.protocol,query:parsed.query||{},slashes:parsed.slashes};var modifiedParts=urlModifier(meaningfulParts)||meaningfulParts;return(0,_url.format)({auth:modifiedParts.auth,hash:modifiedParts.hash,hostname:modifiedParts.hostname,pathname:modifiedParts.pathname,port:modifiedParts.port,protocol:modifiedParts.protocol,query:modifiedParts.query,slashes:modifiedParts.slashes})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NavLinksService=void 0;var _lodash=__webpack_require__(1);var _rxjs=__webpack_require__(16);var _operators=__webpack_require__(27);var _nav_link=__webpack_require__(480);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NavLinksService=function(){function NavLinksService(){_classCallCheck(this,NavLinksService);_defineProperty(this,"stop$",new _rxjs.ReplaySubject(1))}_createClass(NavLinksService,[{key:"start",value:function start(_ref){var _this=this;var application=_ref.application,http=_ref.http;var legacyAppLinks=application.availableLegacyApps.map(function(app){return[app.id,new _nav_link.NavLinkWrapper(_objectSpread({},app,{legacy:true,baseUrl:relativeToAbsolute(http.basePath.prepend(app.appUrl))}))]});var navLinks$=new _rxjs.BehaviorSubject(new Map(legacyAppLinks));var forceAppSwitcherNavigation$=new _rxjs.BehaviorSubject(false);return{getNavLinks$:function getNavLinks$(){return navLinks$.pipe((0,_operators.map)(sortNavLinks),(0,_operators.takeUntil)(_this.stop$))},get:function get(id){var link=navLinks$.value.get(id);return link&&link.properties},getAll:function getAll(){return sortNavLinks(navLinks$.value)},has:function has(id){return navLinks$.value.has(id)},showOnly:function showOnly(id){if(!this.has(id)){return}navLinks$.next(new Map(_toConsumableArray(navLinks$.value.entries()).filter(function(_ref2){var _ref3=_slicedToArray(_ref2,1),linkId=_ref3[0];return linkId===id})))},update:function update(id,values){if(!this.has(id)){return}navLinks$.next(new Map(_toConsumableArray(navLinks$.value.entries()).map(function(_ref4){var _ref5=_slicedToArray(_ref4,2),linkId=_ref5[0],link=_ref5[1];return[linkId,link.id===id?link.update(values):link]})));return this.get(id)},enableForcedAppSwitcherNavigation:function enableForcedAppSwitcherNavigation(){forceAppSwitcherNavigation$.next(true)},getForceAppSwitcherNavigation$:function getForceAppSwitcherNavigation$(){return forceAppSwitcherNavigation$.asObservable()}}}},{key:"stop",value:function stop(){this.stop$.next()}}]);return NavLinksService}();exports.NavLinksService=NavLinksService;function sortNavLinks(navLinks){return(0,_lodash.sortBy)(_toConsumableArray(navLinks.values()).map(function(link){return link.properties}),"order")}function relativeToAbsolute(url){var a=document.createElement("a");a.setAttribute("href",url);return a.href}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RecentlyAccessedService=void 0;var _persisted_log=__webpack_require__(812);var _create_log_key=__webpack_require__(813);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var RecentlyAccessedService=function(){function RecentlyAccessedService(){_classCallCheck(this,RecentlyAccessedService)}_createClass(RecentlyAccessedService,[{key:"start",value:function(){var _start=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var http,logKey,history;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:http=_ref.http;_context.next=3;return(0,_create_log_key.createLogKey)("recentlyAccessed",http.basePath.get());case 3:logKey=_context.sent;history=new _persisted_log.PersistedLog(logKey,{maxLength:20,isEqual:function isEqual(oldItem,newItem){return oldItem.id===newItem.id}});return _context.abrupt("return",{add:function add(link,label,id){history.add({link:link,label:label,id:id})},get:function get(){return history.get()},get$:function get$(){return history.get$()}});case 6:case"end":return _context.stop()}}},_callee)}));function start(_x){return _start.apply(this,arguments)}return start}()}]);return RecentlyAccessedService}();exports.RecentlyAccessedService=RecentlyAccessedService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PersistedLog=void 0;var _lodash=__webpack_require__(1);var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PersistedLog=function(){function PersistedLog(name,options){var storage=arguments.length>2&&arguments[2]!==undefined?arguments[2]:localStorage;_classCallCheck(this,PersistedLog);_defineProperty(this,"name",void 0);_defineProperty(this,"maxLength",void 0);_defineProperty(this,"isEqual",void 0);_defineProperty(this,"storage",void 0);_defineProperty(this,"items$",void 0);this.name=name;this.maxLength=typeof options.maxLength==="string"?this.maxLength=parseInt(options.maxLength,10):options.maxLength;this.isEqual=options.isEqual||_lodash.isEqual;this.storage=storage;this.items$=new Rx.BehaviorSubject(this.loadItems());if(this.maxLength!==undefined&&!isNaN(this.maxLength)){this.items$.next((0,_lodash.take)(this.items$.value,this.maxLength))}}_createClass(PersistedLog,[{key:"add",value:function add(val){var _this=this;if(val==null){return this.items$.value}var nextItems=[val].concat(_toConsumableArray(_toConsumableArray(this.items$.value).filter(function(item){return!_this.isEqual(item,val)}))).slice(0,this.maxLength);this.storage.setItem(this.name,JSON.stringify(nextItems));this.items$.next(nextItems);return nextItems}},{key:"get",value:function get(){return(0,_lodash.cloneDeep)(this.items$.value)}},{key:"get$",value:function get$(){return this.items$.pipe((0,_operators.map)(function(items){return(0,_lodash.cloneDeep)(items)}))}},{key:"loadItems",value:function loadItems(){try{return JSON.parse(this.storage.getItem(this.name)||"[]")}catch(_unused){return[]}}}]);return PersistedLog}();exports.PersistedLog=PersistedLog},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createLogKey=createLogKey;var _utils=__webpack_require__(387);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function createLogKey(_x,_x2){return _createLogKey.apply(this,arguments)}function _createLogKey(){_createLogKey=_asyncToGenerator(regeneratorRuntime.mark(function _callee(type,optionalIdentifier){var baseKey,protectedIdentifier;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:baseKey="kibana.history.".concat(type);if(optionalIdentifier){_context.next=3;break}return _context.abrupt("return",baseKey);case 3:protectedIdentifier=(new _utils.Sha256).update(optionalIdentifier,"utf8").digest("base64");return _context.abrupt("return","".concat(baseKey,"-").concat(protectedIdentifier));case 5:case"end":return _context.stop()}}},_callee)}));return _createLogKey.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shareWeakReplay=shareWeakReplay;var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function shareWeakReplay(bufferSize){return function(source){var subject;var stop$=new Rx.Subject;return new Rx.Observable(function(observer){if(!subject){subject=new Rx.ReplaySubject(bufferSize)}subject.subscribe(observer).add(function(){if(!subject){return}if(subject.observers.length===0){stop$.next()}if(subject.closed||subject.isStopped){subject=undefined}});if(subject&&subject.observers.length===1){source.pipe((0,_operators.takeUntil)(stop$)).subscribe(subject)}})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Sha256",{enumerable:true,get:function get(){return _sha.Sha256}});var _sha=__webpack_require__(816)},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:true});exports.Sha256=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var W=new Array(64);var Sha256=function(){function Sha256(){_classCallCheck(this,Sha256);_defineProperty(this,"_a",void 0);_defineProperty(this,"_b",void 0);_defineProperty(this,"_c",void 0);_defineProperty(this,"_d",void 0);_defineProperty(this,"_e",void 0);_defineProperty(this,"_f",void 0);_defineProperty(this,"_g",void 0);_defineProperty(this,"_h",void 0);_defineProperty(this,"_block",void 0);_defineProperty(this,"_finalSize",void 0);_defineProperty(this,"_blockSize",void 0);_defineProperty(this,"_len",void 0);_defineProperty(this,"_s",void 0);_defineProperty(this,"_w",void 0);this._a=1779033703;this._b=3144134277;this._c=1013904242;this._d=2773480762;this._e=1359893119;this._f=2600822924;this._g=528734635;this._h=1541459225;this._w=W;var blockSize=64;var finalSize=56;this._block=Buffer.alloc(blockSize);this._finalSize=finalSize;this._blockSize=blockSize;this._len=0;this._s=0}_createClass(Sha256,[{key:"update",value:function update(data,encoding){if(typeof data==="string"){encoding=encoding||"utf8";data=Buffer.from(data,encoding)}var l=this._len+=data.length;var s=this._s||0;var f=0;var buffer=this._block;while(s<l){var t=Math.min(data.length,f+this._blockSize-s%this._blockSize);var _ch=t-f;for(var i=0;i<_ch;i++){buffer[s%this._blockSize+i]=data[i+f]}s+=_ch;f+=_ch;if(s%this._blockSize===0){this._update(buffer)}}this._s=s;return this}},{key:"digest",value:function digest(encoding){var l=this._len*8;this._block[this._len%this._blockSize]=128;this._block.fill(0,this._len%this._blockSize+1);if(l%(this._blockSize*8)>=this._finalSize*8){this._update(this._block);this._block.fill(0)}this._block.writeInt32BE(l,this._blockSize-4);this._update(this._block);var hash=this._hash();return hash.toString(encoding)}},{key:"_update",value:function _update(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;var f=this._f|0;var g=this._g|0;var h=this._h|0;var i;for(i=0;i<16;++i){W[i]=M.readInt32BE(i*4)}for(;i<64;++i){W[i]=gamma1(W[i-2])+W[i-7]+gamma0(W[i-15])+W[i-16]|0}for(var j=0;j<64;++j){var T1=h+sigma1(e)+ch(e,f,g)+K[j]+W[j]|0;var T2=sigma0(a)+maj(a,b,c)|0;h=g;g=f;f=e;e=d+T1|0;d=c;c=b;b=a;a=T1+T2|0}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0;this._f=f+this._f|0;this._g=g+this._g|0;this._h=h+this._h|0}},{key:"_hash",value:function _hash(){var H=Buffer.alloc(32);H.writeInt32BE(this._a,0);H.writeInt32BE(this._b,4);H.writeInt32BE(this._c,8);H.writeInt32BE(this._d,12);H.writeInt32BE(this._e,16);H.writeInt32BE(this._f,20);H.writeInt32BE(this._g,24);H.writeInt32BE(this._h,28);return H}}]);return Sha256}();exports.Sha256=Sha256;function ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}function gamma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10}}).call(this,__webpack_require__(121).Buffer)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NavControlsService=void 0;var _lodash=__webpack_require__(1);var _rxjs=__webpack_require__(16);var _operators=__webpack_require__(27);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NavControlsService=function(){function NavControlsService(){_classCallCheck(this,NavControlsService);_defineProperty(this,"stop$",new _rxjs.ReplaySubject(1))}_createClass(NavControlsService,[{key:"start",value:function start(){var _this=this;var navControlsLeft$=new _rxjs.BehaviorSubject(new Set);var navControlsRight$=new _rxjs.BehaviorSubject(new Set);return{registerLeft:function registerLeft(navControl){return navControlsLeft$.next(new Set([].concat(_toConsumableArray(navControlsLeft$.value.values()),[navControl])))},registerRight:function registerRight(navControl){return navControlsRight$.next(new Set([].concat(_toConsumableArray(navControlsRight$.value.values()),[navControl])))},getLeft$:function getLeft$(){return navControlsLeft$.pipe((0,_operators.map)(function(controls){return(0,_lodash.sortBy)(_toConsumableArray(controls.values()),"order")}),(0,_operators.takeUntil)(_this.stop$))},getRight$:function getRight$(){return navControlsRight$.pipe((0,_operators.map)(function(controls){return(0,_lodash.sortBy)(_toConsumableArray(controls.values()),"order")}),(0,_operators.takeUntil)(_this.stop$))}}}},{key:"stop",value:function stop(){this.stop$.next()}}]);return NavControlsService}();exports.NavControlsService=NavControlsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"LoadingIndicator",{enumerable:true,get:function get(){return _loading_indicator.LoadingIndicator}});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});Object.defineProperty(exports,"HeaderWrapper",{enumerable:true,get:function get(){return _header.HeaderWrapper}});var _loading_indicator=__webpack_require__(819);var _header=__webpack_require__(483)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingIndicator=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(26));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var LoadingIndicator=function(_React$Component){_inherits(LoadingIndicator,_React$Component);function LoadingIndicator(){var _getPrototypeOf2;var _this;_classCallCheck(this,LoadingIndicator);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(LoadingIndicator)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"loadingCountSubscription",void 0);_defineProperty(_assertThisInitialized(_this),"state",{visible:false});return _this}_createClass(LoadingIndicator,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.loadingCountSubscription=this.props.loadingCount$.subscribe(function(count){_this2.setState({visible:count>0})})}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.loadingCountSubscription){this.loadingCountSubscription.unsubscribe();this.loadingCountSubscription=undefined}}},{key:"render",value:function render(){var className=(0,_classnames.default)("kbnLoadingIndicator",this.state.visible?null:"hidden");var testSubj=this.state.visible?"globalLoadingIndicator":"globalLoadingIndicator-hidden";return _react.default.createElement("div",{className:className,"data-test-subj":testSubj},_react.default.createElement("div",{className:"kbnLoadingIndicator__bar essentialAnimation"}))}}]);return LoadingIndicator}(_react.default.Component);exports.LoadingIndicator=LoadingIndicator},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _url=_interopRequireDefault(__webpack_require__(38));var _react=_interopRequireWildcard(__webpack_require__(0));var Rx=_interopRequireWildcard(__webpack_require__(16));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);var _header_badge=__webpack_require__(821);var _header_breadcrumbs=__webpack_require__(822);var _header_help_menu=__webpack_require__(823);var _header_nav_controls=__webpack_require__(824);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TRUNCATE_LIMIT=64;var TRUNCATE_AT=58;function relativeToAbsolute(url){var a=document.createElement("a");a.setAttribute("href",url);return a.href}function extendRecentlyAccessedHistoryItem(navLinks,recentlyAccessed,basePath){var href=relativeToAbsolute(basePath.prepend(recentlyAccessed.link));var navLink=navLinks.find(function(nl){return href.startsWith(nl.subUrlBase||nl.baseUrl)});var titleAndAriaLabel=recentlyAccessed.label;if(navLink){var objectTypeForAriaAppendix=navLink.title;titleAndAriaLabel=_i18n.i18n.translate("core.ui.recentLinks.linkItem.screenReaderLabel",{defaultMessage:"{recentlyAccessedItemLinklabel}, type: {pageType}",values:{recentlyAccessedItemLinklabel:recentlyAccessed.label,pageType:objectTypeForAriaAppendix}})}return _objectSpread({},recentlyAccessed,{href:href,euiIconType:navLink?navLink.euiIconType:undefined,title:titleAndAriaLabel})}function extendNavLink(navLink){return _objectSpread({},navLink,{href:navLink.url&&!navLink.active?navLink.url:navLink.baseUrl})}function findClosestAnchor(element){var current=element;while(current){if(current.tagName==="A"){return current}if(!current.parentElement||current.parentElement===document.body){return undefined}current=current.parentElement}}function truncateRecentItemLabel(label){if(label.length>TRUNCATE_LIMIT){label="".concat(label.substring(0,TRUNCATE_AT),"…")}return label}var HeaderUI=function(_Component){_inherits(HeaderUI,_Component);function HeaderUI(props){var _this;_classCallCheck(this,HeaderUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(HeaderUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"navDrawerRef",(0,_react.createRef)());_defineProperty(_assertThisInitialized(_this),"onNavClick",function(event){var anchor=findClosestAnchor(event.nativeEvent.target);if(!anchor){return}var navLink=_this.state.navLinks.find(function(item){return item.href===anchor.href});if(navLink&&navLink.disabled){event.preventDefault();return}if(!_this.state.forceNavigation||event.isDefaultPrevented()||event.altKey||event.metaKey||event.ctrlKey){return}var toParsed=_url.default.parse(anchor.href);var fromParsed=_url.default.parse(document.location.href);var sameProto=toParsed.protocol===fromParsed.protocol;var sameHost=toParsed.host===fromParsed.host;var samePath=toParsed.path===fromParsed.path;if(sameProto&&sameHost&&samePath){if(toParsed.hash){document.location.reload()}event.stopPropagation()}});_this.state={appTitle:"Kibana",isVisible:true,navLinks:[],recentlyAccessed:[],forceNavigation:false,navControlsLeft:[],navControlsRight:[]};return _this}_createClass(HeaderUI,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.subscription=Rx.combineLatest(this.props.appTitle$,this.props.isVisible$,this.props.forceAppSwitcherNavigation$,this.props.navLinks$,this.props.recentlyAccessed$,Rx.combineLatest(this.props.navControlsLeft$,this.props.navControlsRight$)).subscribe({next:function next(_ref){var _ref2=_slicedToArray(_ref,6),appTitle=_ref2[0],isVisible=_ref2[1],forceNavigation=_ref2[2],navLinks=_ref2[3],recentlyAccessed=_ref2[4],_ref2$=_slicedToArray(_ref2[5],2),navControlsLeft=_ref2$[0],navControlsRight=_ref2$[1];_this2.setState({appTitle:appTitle,isVisible:isVisible,forceNavigation:forceNavigation,navLinks:navLinks.map(function(navLink){return extendNavLink(navLink)}),recentlyAccessed:recentlyAccessed.map(function(ra){return extendRecentlyAccessedHistoryItem(navLinks,ra,_this2.props.basePath)}),navControlsLeft:navControlsLeft,navControlsRight:navControlsRight})}})}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.subscription){this.subscription.unsubscribe()}}},{key:"renderLogo",value:function renderLogo(){var _this$props=this.props,homeHref=_this$props.homeHref,intl=_this$props.intl;return _react.default.createElement(_eui.EuiHeaderLogo,{"data-test-subj":"logo",iconType:"logoKibana",onClick:this.onNavClick,href:homeHref,"aria-label":intl.formatMessage({id:"core.ui.chrome.headerGlobalNav.goHomePageIconAriaLabel",defaultMessage:"Go to home page"})})}},{key:"renderMenuTrigger",value:function renderMenuTrigger(){var _this3=this;return _react.default.createElement(_eui.EuiHeaderSectionItemButton,{"aria-label":"Toggle side navigation",onClick:function onClick(){return _this3.navDrawerRef.current.toggleOpen()}},_react.default.createElement(_eui.EuiIcon,{type:"apps",size:"m"}))}},{key:"render",value:function render(){var _this$props2=this.props,badge$=_this$props2.badge$,basePath=_this$props2.basePath,breadcrumbs$=_this$props2.breadcrumbs$,helpExtension$=_this$props2.helpExtension$,intl=_this$props2.intl,isLocked=_this$props2.isLocked,kibanaDocLink=_this$props2.kibanaDocLink,kibanaVersion=_this$props2.kibanaVersion,onIsLockedUpdate=_this$props2.onIsLockedUpdate;var _this$state=this.state,appTitle=_this$state.appTitle,isVisible=_this$state.isVisible,navControlsLeft=_this$state.navControlsLeft,navControlsRight=_this$state.navControlsRight,navLinks=_this$state.navLinks,recentlyAccessed=_this$state.recentlyAccessed;if(!isVisible){return null}var navLinksArray=navLinks.filter(function(navLink){return!navLink.hidden}).map(function(navLink){return{key:navLink.id,label:navLink.title,href:navLink.href,isDisabled:navLink.disabled,isActive:navLink.active,iconType:navLink.euiIconType,icon:!navLink.euiIconType&&navLink.icon?_react.default.createElement(_eui.EuiImage,{size:"s",alt:"","aria-hidden":true,url:basePath.prepend("/".concat(navLink.icon))}):undefined,"data-test-subj":"navDrawerAppsMenuLink"}});var recentLinksArray=[{label:intl.formatMessage({id:"core.ui.chrome.sideGlobalNav.viewRecentItemsLabel",defaultMessage:"Recently viewed"}),iconType:"clock",isDisabled:recentlyAccessed.length>0?false:true,flyoutMenu:{title:intl.formatMessage({id:"core.ui.chrome.sideGlobalNav.viewRecentItemsFlyoutTitle",defaultMessage:"Recent items"}),listItems:recentlyAccessed.map(function(item){return{label:truncateRecentItemLabel(item.label),title:item.title,"aria-label":item.title,href:item.href,iconType:item.euiIconType}})}}];return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiHeader,null,_react.default.createElement(_eui.EuiHeaderSection,{grow:false},_react.default.createElement(_eui.EuiShowFor,{sizes:["xs","s"]},_react.default.createElement(_eui.EuiHeaderSectionItem,{border:"right"},this.renderMenuTrigger())),_react.default.createElement(_eui.EuiHeaderSectionItem,{border:"right"},this.renderLogo()),_react.default.createElement(_header_nav_controls.HeaderNavControls,{side:"left",navControls:navControlsLeft})),_react.default.createElement(_header_breadcrumbs.HeaderBreadcrumbs,{appTitle:appTitle,breadcrumbs$:breadcrumbs$}),_react.default.createElement(_header_badge.HeaderBadge,{badge$:badge$}),_react.default.createElement(_eui.EuiHeaderSection,{side:"right"},_react.default.createElement(_eui.EuiHeaderSectionItem,null,_react.default.createElement(_header_help_menu.HeaderHelpMenu,{helpExtension$:helpExtension$,kibanaDocLink:kibanaDocLink,kibanaVersion:kibanaVersion})),_react.default.createElement(_header_nav_controls.HeaderNavControls,{side:"right",navControls:navControlsRight}))),_react.default.createElement(_eui.EuiNavDrawer,{ref:this.navDrawerRef,"data-test-subj":"navDrawer",isLocked:isLocked,onIsLockedUpdate:onIsLockedUpdate},_react.default.createElement(_eui.EuiNavDrawerGroup,{listItems:recentLinksArray}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"none"}),_react.default.createElement(_eui.EuiNavDrawerGroup,{"data-test-subj":"navDrawerAppsMenu",listItems:navLinksArray})))}}]);return HeaderUI}(_react.Component);var Header=(0,_react2.injectI18n)(HeaderUI);exports.Header=Header},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.HeaderBadge=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HeaderBadge=function(_Component){_inherits(HeaderBadge,_Component);function HeaderBadge(props){var _this;_classCallCheck(this,HeaderBadge);_this=_possibleConstructorReturn(this,_getPrototypeOf(HeaderBadge).call(this,props));_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_this.state={badge:undefined};return _this}_createClass(HeaderBadge,[{key:"componentDidMount",value:function componentDidMount(){this.subscribe()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.badge$===this.props.badge$){return}this.unsubscribe();this.subscribe()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unsubscribe()}},{key:"render",value:function render(){if(this.state.badge==null){return null}return _react.default.createElement("div",{className:"chrHeaderBadge__wrapper"},_react.default.createElement(_eui.EuiBetaBadge,{"data-test-subj":"headerBadge","data-test-badge-label":this.state.badge.text,tabIndex:0,label:this.state.badge.text,tooltipContent:this.state.badge.tooltip,iconType:this.state.badge.iconType}))}},{key:"subscribe",value:function subscribe(){var _this2=this;this.subscription=this.props.badge$.subscribe(function(badge){_this2.setState({badge:badge})})}},{key:"unsubscribe",value:function unsubscribe(){if(this.subscription){this.subscription.unsubscribe();this.subscription=undefined}}}]);return HeaderBadge}(_react.Component);exports.HeaderBadge=HeaderBadge},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.HeaderBreadcrumbs=void 0;var _classnames=_interopRequireDefault(__webpack_require__(26));var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HeaderBreadcrumbs=function(_Component){_inherits(HeaderBreadcrumbs,_Component);function HeaderBreadcrumbs(props){var _this;_classCallCheck(this,HeaderBreadcrumbs);_this=_possibleConstructorReturn(this,_getPrototypeOf(HeaderBreadcrumbs).call(this,props));_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_this.state={breadcrumbs:[]};return _this}_createClass(HeaderBreadcrumbs,[{key:"componentDidMount",value:function componentDidMount(){this.subscribe()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.breadcrumbs$===this.props.breadcrumbs$){return}this.unsubscribe();this.subscribe()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unsubscribe()}},{key:"render",value:function render(){return _react.default.createElement(_eui.EuiHeaderBreadcrumbs,{breadcrumbs:this.getBreadcrumbs(),"data-test-subj":"breadcrumbs"})}},{key:"subscribe",value:function subscribe(){var _this2=this;this.subscription=this.props.breadcrumbs$.subscribe(function(breadcrumbs){_this2.setState({breadcrumbs:breadcrumbs})})}},{key:"unsubscribe",value:function unsubscribe(){if(this.subscription){this.subscription.unsubscribe();delete this.subscription}}},{key:"getBreadcrumbs",value:function getBreadcrumbs(){var breadcrumbs=this.state.breadcrumbs;if(breadcrumbs.length===0&&this.props.appTitle){breadcrumbs=[{text:this.props.appTitle}]}return breadcrumbs.map(function(breadcrumb,i){return _objectSpread({},breadcrumb,{"data-test-subj":(0,_classnames.default)("breadcrumb",breadcrumb["data-test-subj"],i===0&&"first",i===breadcrumbs.length-1&&"last")})})}}]);return HeaderBreadcrumbs}(_react.Component);exports.HeaderBreadcrumbs=HeaderBreadcrumbs},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.HeaderHelpMenu=void 0;var _react=__webpack_require__(5);var _react2=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _header_extension=__webpack_require__(484);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HeaderHelpMenuUI=function(_Component){_inherits(HeaderHelpMenuUI,_Component);function HeaderHelpMenuUI(props){var _this;_classCallCheck(this,HeaderHelpMenuUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(HeaderHelpMenuUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"onMenuButtonClick",function(){_this.setState({isOpen:!_this.state.isOpen})});_defineProperty(_assertThisInitialized(_this),"closeMenu",function(){_this.setState({isOpen:false})});_this.state={isOpen:false,helpExtension:undefined};return _this}_createClass(HeaderHelpMenuUI,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.subscription=this.props.helpExtension$.subscribe({next:function next(helpExtension){_this2.setState({helpExtension:helpExtension})}})}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.subscription){this.subscription.unsubscribe();this.subscription=undefined}}},{key:"render",value:function render(){var _this$props=this.props,intl=_this$props.intl,kibanaVersion=_this$props.kibanaVersion,useDefaultContent=_this$props.useDefaultContent,kibanaDocLink=_this$props.kibanaDocLink;var helpExtension=this.state.helpExtension;var defaultContent=useDefaultContent?_react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiText,{size:"s"},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"core.ui.chrome.headerGlobalNav.helpMenuHelpDescription",defaultMessage:"Get updates, information, and answers in our documentation."}))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiButton,{iconType:"popout",href:kibanaDocLink,target:"_blank"},_react2.default.createElement(_react.FormattedMessage,{id:"core.ui.chrome.headerGlobalNav.helpMenuGoToDocumentation",defaultMessage:"Go to documentation"}))):null;var button=_react2.default.createElement(_eui.EuiHeaderSectionItemButton,{"aria-expanded":this.state.isOpen,"aria-haspopup":"true","aria-label":intl.formatMessage({id:"core.ui.chrome.headerGlobalNav.helpMenuButtonAriaLabel",defaultMessage:"Help menu"}),onClick:this.onMenuButtonClick},_react2.default.createElement(_eui.EuiIcon,{type:"help",size:"m"}));return _react2.default.createElement(_eui.EuiPopover,{id:"headerHelpMenu",button:button,isOpen:this.state.isOpen,anchorPosition:"downRight",repositionOnScroll:true,closePopover:this.closeMenu,"data-test-subj":"helpMenuButton"},_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_react.FormattedMessage,{id:"core.ui.chrome.headerGlobalNav.helpMenuTitle",defaultMessage:"Help"})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"chrHeaderHelpMenu__version"},_react2.default.createElement(_react.FormattedMessage,{id:"core.ui.chrome.headerGlobalNav.helpMenuVersion",defaultMessage:"v {version}",values:{version:kibanaVersion}})))),_react2.default.createElement("div",{style:{maxWidth:240}},defaultContent,defaultContent&&helpExtension&&_react2.default.createElement(_eui.EuiSpacer,null),helpExtension&&_react2.default.createElement(_header_extension.HeaderExtension,{extension:helpExtension})))}}]);return HeaderHelpMenuUI}(_react2.Component);var HeaderHelpMenu=(0,_react.injectI18n)(HeaderHelpMenuUI);exports.HeaderHelpMenu=HeaderHelpMenu;HeaderHelpMenu.defaultProps={useDefaultContent:true}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.HeaderNavControls=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _header_extension=__webpack_require__(484);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HeaderNavControls=function(_Component){_inherits(HeaderNavControls,_Component);function HeaderNavControls(){var _getPrototypeOf2;var _this;_classCallCheck(this,HeaderNavControls);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(HeaderNavControls)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderNavControl",function(navControl,index){return _react.default.createElement(_eui.EuiHeaderSectionItem,{key:index,border:_this.props.side==="left"?"right":"left"},_react.default.createElement(_header_extension.HeaderExtension,{extension:navControl.mount}))});return _this}_createClass(HeaderNavControls,[{key:"render",value:function render(){var navControls=this.props.navControls;if(!navControls){return null}return navControls.map(this.renderNavControl)}}]);return HeaderNavControls}(_react.Component);exports.HeaderNavControls=HeaderNavControls},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HeaderWrapper=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(26));var _=__webpack_require__(483);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var IS_LOCKED_KEY="core.chrome.isLocked";var HeaderWrapper=function HeaderWrapper(props){var initialIsLocked=localStorage.getItem(IS_LOCKED_KEY);var _useState=(0,_react.useState)(initialIsLocked==="true"),_useState2=_slicedToArray(_useState,2),isLocked=_useState2[0],setIsLocked=_useState2[1];var setIsLockedStored=function setIsLockedStored(locked){localStorage.setItem(IS_LOCKED_KEY,"".concat(locked));setIsLocked(locked)};var className=(0,_classnames.default)("chrHeaderWrapper",{"chrHeaderWrapper--navIsLocked":isLocked},"hide-for-sharing");return _react.default.createElement("div",{className:className,"data-test-subj":"headerGlobalNav"},_react.default.createElement(_.Header,_extends({},props,{onIsLockedUpdate:setIsLockedStored,isLocked:isLocked})))};exports.HeaderWrapper=HeaderWrapper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FatalErrorsService=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(13);var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);var _fatal_errors_screen=__webpack_require__(827);var _get_error_info=__webpack_require__(486);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FatalErrorsService=function(){function FatalErrorsService(rootDomElement,onFirstErrorCb){_classCallCheck(this,FatalErrorsService);this.rootDomElement=rootDomElement;this.onFirstErrorCb=onFirstErrorCb;_defineProperty(this,"errorInfo$",new Rx.ReplaySubject)}_createClass(FatalErrorsService,[{key:"setup",value:function setup(_ref){var _this=this;var i18n=_ref.i18n,injectedMetadata=_ref.injectedMetadata;this.errorInfo$.pipe((0,_operators.first)(),(0,_operators.tap)(function(){_this.onFirstErrorCb();_this.renderError(injectedMetadata,i18n)})).subscribe({error:function(_error){function error(_x){return _error.apply(this,arguments)}error.toString=function(){return _error.toString()};return error}(function(error){console.error("Uncaught error in fatal error service internals",error)})});var fatalErrorsSetup={add:function add(error,source){var errorInfo=(0,_get_error_info.getErrorInfo)(error,source);_this.errorInfo$.next(errorInfo);if(error instanceof Error){console.error(error)}throw error},get$:function get$(){return _this.errorInfo$.asObservable()}};this.setupGlobalErrorHandlers(fatalErrorsSetup);return fatalErrorsSetup}},{key:"renderError",value:function renderError(injectedMetadata,i18n){this.rootDomElement.textContent="";var container=document.createElement("div");this.rootDomElement.appendChild(container);(0,_reactDom.render)(_react.default.createElement(i18n.Context,null,_react.default.createElement(_fatal_errors_screen.FatalErrorsScreen,{buildNumber:injectedMetadata.getKibanaBuildNumber(),kibanaVersion:injectedMetadata.getKibanaVersion(),errorInfo$:this.errorInfo$})),container)}},{key:"setupGlobalErrorHandlers",value:function setupGlobalErrorHandlers(fatalErrorsSetup){if(window.addEventListener){window.addEventListener("unhandledrejection",function(e){console.log("Detected an unhandled Promise rejection.\n".concat(e.reason))})}}}]);return FatalErrorsService}();exports.FatalErrorsService=FatalErrorsService},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FatalErrorsScreen=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FatalErrorsScreen=function(_React$Component){_inherits(FatalErrorsScreen,_React$Component);function FatalErrorsScreen(){var _getPrototypeOf2;var _this;_classCallCheck(this,FatalErrorsScreen);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FatalErrorsScreen)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{errors:[]});_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"onClickGoBack",function(e){e.preventDefault();window.history.back()});_defineProperty(_assertThisInitialized(_this),"onClickClearSession",function(e){e.preventDefault();localStorage.clear();sessionStorage.clear();window.location.hash="";window.location.reload()});return _this}_createClass(FatalErrorsScreen,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.subscription=Rx.merge(Rx.fromEvent(window,"hashchange").pipe((0,_operators.tap)(function(){window.location.reload()})),this.props.errorInfo$.pipe((0,_operators.tap)(function(error){_this2.setState(function(state){return _objectSpread({},state,{errors:[].concat(_toConsumableArray(state.errors),[error])})})}))).subscribe({error:function error(_error){console.error("Uncaught error in fatal error screen internals",_error)}})}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.subscription){this.subscription.unsubscribe();this.subscription=undefined}}},{key:"render",value:function render(){var _this3=this;return _react.default.createElement(_eui.EuiPage,{style:{minHeight:"100vh"}},_react.default.createElement(_eui.EuiPageBody,null,_react.default.createElement(_eui.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center"},_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"alert",iconColor:"danger",title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"core.fatalErrors.somethingWentWrongTitle",defaultMessage:"Something went wrong"})),body:_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"core.fatalErrors.tryRefreshingPageDescription",defaultMessage:"Try refreshing the page. If that doesn't work, go back to the previous page or clear your session data."})),actions:[_react.default.createElement(_eui.EuiButton,{color:"primary",fill:true,onClick:this.onClickClearSession,"data-test-subj":"clearSession"},_react.default.createElement(_react2.FormattedMessage,{id:"core.fatalErrors.clearYourSessionButtonLabel",defaultMessage:"Clear your session"})),_react.default.createElement(_eui.EuiButtonEmpty,{onClick:this.onClickGoBack,"data-test-subj":"goBack"},_react.default.createElement(_react2.FormattedMessage,{id:"core.fatalErrors.goBackButtonLabel",defaultMessage:"Go back"}))]}),this.state.errors.map(function(error,i){return _react.default.createElement(_eui.EuiCallOut,{key:i,title:error.message,color:"danger",iconType:"alert"},_react.default.createElement(_eui.EuiCodeBlock,{language:"bash",className:"eui-textBreakAll"},"Version: ".concat(_this3.props.kibanaVersion)+"\n"+"Build: ".concat(_this3.props.buildNumber)+"\n"+(error.stack?error.stack:"")))}))))}}]);return FatalErrorsScreen}(_react.default.Component);exports.FatalErrorsScreen=FatalErrorsScreen},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HttpService=void 0;var _http_setup=__webpack_require__(830);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HttpService=function(){function HttpService(){_classCallCheck(this,HttpService);_defineProperty(this,"service",void 0)}_createClass(HttpService,[{key:"setup",value:function setup(deps){this.service=(0,_http_setup.setup)(deps.injectedMetadata,deps.fatalErrors);return this.service}},{key:"start",value:function start(deps){return this.service||this.setup(deps)}},{key:"stop",value:function stop(){if(this.service){this.service.stop()}}}]);return HttpService}();exports.HttpService=HttpService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setup=void 0;var _rxjs=__webpack_require__(16);var _operators=__webpack_require__(27);var _lodash=__webpack_require__(1);var _url=__webpack_require__(38);var _http_intercept_controller=__webpack_require__(488);var _http_fetch_error=__webpack_require__(489);var _http_intercept_halt_error=__webpack_require__(490);var _base_path_service=__webpack_require__(831);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var JSON_CONTENT=/^(application\/(json|x-javascript)|text\/(x-)?javascript|x-json)(;.*)?$/;var NDJSON_CONTENT=/^(application\/ndjson)(;.*)?$/;var setup=function setup(injectedMetadata,fatalErrors){var loadingCount$=new _rxjs.BehaviorSubject(0);var stop$=new _rxjs.Subject;var interceptors=new Set;var kibanaVersion=injectedMetadata.getKibanaVersion();var basePath=new _base_path_service.BasePath(injectedMetadata.getBasePath());function intercept(interceptor){interceptors.add(interceptor);return function(){return interceptors.delete(interceptor)}}function removeAllInterceptors(){interceptors.clear()}function createRequest(path,options){var _merge=(0,_lodash.merge)({method:"GET",credentials:"same-origin",prependBasePath:true,headers:{"kbn-version":kibanaVersion,"Content-Type":"application/json"}},options||{}),query=_merge.query,shouldPrependBasePath=_merge.prependBasePath,fetchOptions=_objectWithoutProperties(_merge,["query","prependBasePath"]);var url=(0,_url.format)({pathname:shouldPrependBasePath?basePath.prepend(path):path,query:query});if(options&&options.headers&&"Content-Type"in options.headers&&options.headers["Content-Type"]===undefined){delete fetchOptions.headers["Content-Type"]}return new Request(url,fetchOptions)}function interceptRequest(request,controller){var next=request;return _toConsumableArray(interceptors).reduceRight(function(promise,interceptor){return promise.then(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(current){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!controller.halted){_context.next=2;break}throw new _http_intercept_halt_error.HttpInterceptHaltError;case 2:if(interceptor.request){_context.next=4;break}return _context.abrupt("return",current);case 4:_context.next=6;return interceptor.request(current,controller);case 6:_context.t0=_context.sent;if(_context.t0){_context.next=9;break}_context.t0=current;case 9:next=_context.t0;return _context.abrupt("return",next);case 11:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}(),function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(error){var nextRequest;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(error instanceof _http_intercept_halt_error.HttpInterceptHaltError)){_context2.next=4;break}throw error;case 4:if(!controller.halted){_context2.next=6;break}throw new _http_intercept_halt_error.HttpInterceptHaltError;case 6:if(interceptor.requestError){_context2.next=8;break}throw error;case 8:_context2.next=10;return interceptor.requestError({error:error,request:next},controller);case 10:nextRequest=_context2.sent;if(nextRequest){_context2.next=13;break}throw error;case 13:next=nextRequest;return _context2.abrupt("return",next);case 15:case"end":return _context2.stop()}}},_callee2)}));return function(_x2){return _ref2.apply(this,arguments)}}())},Promise.resolve(request))}function interceptResponse(_x3,_x4){return _interceptResponse.apply(this,arguments)}function _interceptResponse(){_interceptResponse=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(responsePromise,controller){var current,finalHttpResponse;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _toConsumableArray(interceptors).reduce(function(promise,interceptor){return promise.then(function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(httpResponse){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!controller.halted){_context3.next=2;break}throw new _http_intercept_halt_error.HttpInterceptHaltError;case 2:if(interceptor.response){_context3.next=4;break}return _context3.abrupt("return",httpResponse);case 4:_context3.next=6;return interceptor.response(httpResponse,controller);case 6:_context3.t0=_context3.sent;if(_context3.t0){_context3.next=9;break}_context3.t0=httpResponse;case 9:current=_context3.t0;return _context3.abrupt("return",current);case 11:case"end":return _context3.stop()}}},_callee3)}));return function(_x6){return _ref5.apply(this,arguments)}}(),function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(error){var next;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(error instanceof _http_intercept_halt_error.HttpInterceptHaltError)){_context4.next=4;break}throw error;case 4:if(!controller.halted){_context4.next=6;break}throw new _http_intercept_halt_error.HttpInterceptHaltError;case 6:if(interceptor.responseError){_context4.next=8;break}throw error;case 8:_context4.next=10;return interceptor.responseError(_objectSpread({},current,{error:error}),controller);case 10:next=_context4.sent;if(next){_context4.next=13;break}throw error;case 13:return _context4.abrupt("return",next);case 14:case"end":return _context4.stop()}}},_callee4)}));return function(_x7){return _ref6.apply(this,arguments)}}())},responsePromise);case 2:finalHttpResponse=_context5.sent;return _context5.abrupt("return",finalHttpResponse.body);case 4:case"end":return _context5.stop()}}},_callee5)}));return _interceptResponse.apply(this,arguments)}function fetcher(_x5){return _fetcher.apply(this,arguments)}function _fetcher(){_fetcher=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(request){var response,body,contentType,text;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:body=null;_context6.prev=1;_context6.next=4;return window.fetch(request);case 4:response=_context6.sent;_context6.next=10;break;case 7:_context6.prev=7;_context6.t0=_context6["catch"](1);throw new _http_fetch_error.HttpFetchError(_context6.t0.message);case 10:contentType=response.headers.get("Content-Type")||"";_context6.prev=11;if(!NDJSON_CONTENT.test(contentType)){_context6.next=18;break}_context6.next=15;return response.blob();case 15:body=_context6.sent;_context6.next=28;break;case 18:if(!JSON_CONTENT.test(contentType)){_context6.next=24;break}_context6.next=21;return response.json();case 21:body=_context6.sent;_context6.next=28;break;case 24:_context6.next=26;return response.text();case 26:text=_context6.sent;try{body=JSON.parse(text)}catch(err){body=text}case 28:_context6.next=33;break;case 30:_context6.prev=30;_context6.t1=_context6["catch"](11);throw new _http_fetch_error.HttpFetchError(_context6.t1.message,response,body);case 33:if(response.ok){_context6.next=35;break}throw new _http_fetch_error.HttpFetchError(response.statusText,response,body);case 35:return _context6.abrupt("return",{response:response,body:body,request:request});case 36:case"end":return _context6.stop()}}},_callee6,null,[[1,7],[11,30]])}));return _fetcher.apply(this,arguments)}function fetch(path){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var controller=new _http_intercept_controller.HttpInterceptController;var initialRequest=createRequest(path,options);return interceptResponse(interceptRequest(initialRequest,controller).then(fetcher),controller)}function shorthand(method){return function(path){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return fetch(path,_objectSpread({},options,{method:method}))}}function stop(){stop$.next();loadingCount$.complete()}function addLoadingCount(count$){count$.pipe((0,_operators.distinctUntilChanged)(),(0,_operators.tap)(function(count){if(count<0){throw new Error("Observables passed to loadingCount.add() must only emit positive numbers")}}),(0,_operators.takeUntil)(stop$),(0,_operators.endWith)(0),(0,_operators.startWith)(0),(0,_operators.pairwise)(),(0,_operators.map)(function(_ref3){var _ref4=_slicedToArray(_ref3,2),prev=_ref4[0],next=_ref4[1];return next-prev})).subscribe({next:function next(delta){loadingCount$.next(loadingCount$.getValue()+delta)},error:function error(_error){if(fatalErrors){fatalErrors.add(_error)}}})}function getLoadingCount$(){return loadingCount$.pipe((0,_operators.distinctUntilChanged)())}return{stop:stop,basePath:basePath,intercept:intercept,removeAllInterceptors:removeAllInterceptors,fetch:fetch,delete:shorthand("DELETE"),get:shorthand("GET"),head:shorthand("HEAD"),options:shorthand("OPTIONS"),patch:shorthand("PATCH"),post:shorthand("POST"),put:shorthand("PUT"),addLoadingCount:addLoadingCount,getLoadingCount$:getLoadingCount$}};exports.setup=setup},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BasePath=void 0;var _utils=__webpack_require__(56);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BasePath=function BasePath(){var _this=this;var basePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,BasePath);this.basePath=basePath;_defineProperty(this,"get",function(){return _this.basePath});_defineProperty(this,"prepend",function(path){if(!_this.basePath)return path;return(0,_utils.modifyUrl)(path,function(parts){if(!parts.hostname&&parts.pathname&&parts.pathname.startsWith("/")){parts.pathname="".concat(_this.basePath).concat(parts.pathname)}})});_defineProperty(this,"remove",function(path){if(!_this.basePath){return path}if(path===_this.basePath){return"/"}if(path.startsWith("".concat(_this.basePath,"/"))){return path.slice(_this.basePath.length)}return path})};exports.BasePath=BasePath},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.I18nService=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var I18nService=function(){function I18nService(){_classCallCheck(this,I18nService)}_createClass(I18nService,[{key:"getContext",value:function getContext(){var mapping={"euiBasicTable.selectAllRows":_i18n.i18n.translate("core.euiBasicTable.selectAllRows",{defaultMessage:"Select all rows",description:"ARIA and displayed label on a checkbox to select all table rows"}),"euiBasicTable.selectThisRow":_i18n.i18n.translate("core.euiBasicTable.selectThisRow",{defaultMessage:"Select this row",description:"ARIA and displayed label on a checkbox to select a single table row"}),"euiBasicTable.tableDescription":function euiBasicTableTableDescription(_ref){var itemCount=_ref.itemCount;return _i18n.i18n.translate("core.euiBasicTable.tableDescription",{defaultMessage:"Below is a table of {itemCount} items.",values:{itemCount:itemCount},description:"Screen reader text to describe the size of a table"})},"euiBottomBar.screenReaderAnnouncement":_i18n.i18n.translate("core.euiBottomBar.screenReaderAnnouncement",{defaultMessage:"There is a new menu opening with page level controls at the end of the document.",description:"Screen reader announcement that functionality is available in the page document"}),"euiCardSelect.select":_i18n.i18n.translate("core.euiCardSelect.select",{defaultMessage:"Select",description:"Displayed button text when a card option can be selected."}),"euiCardSelect.selected":_i18n.i18n.translate("core.euiCardSelect.selected",{defaultMessage:"Selected",description:"Displayed button text when a card option is selected."}),"euiCardSelect.unavailable":_i18n.i18n.translate("core.euiCardSelect.unavailable",{defaultMessage:"Unavailable",description:"Displayed button text when a card option is unavailable."}),"euiCodeBlock.copyButton":_i18n.i18n.translate("core.euiCodeBlock.copyButton",{defaultMessage:"Copy",description:"ARIA label for a button that copies source code text to the clipboard"}),"euiCodeEditor.startEditing":_i18n.i18n.translate("core.euiCodeEditor.startEditing",{defaultMessage:"Press Enter to start editing."}),"euiCodeEditor.startInteracting":_i18n.i18n.translate("core.euiCodeEditor.startInteracting",{defaultMessage:"Press Enter to start interacting with the code."}),"euiCodeEditor.stopEditing":_i18n.i18n.translate("core.euiCodeEditor.stopEditing",{defaultMessage:"When you're done, press Escape to stop editing."}),"euiCodeEditor.stopInteracting":_i18n.i18n.translate("core.euiCodeEditor.stopInteracting",{defaultMessage:"When you're done, press Escape to stop interacting with the code."}),"euiCollapsedItemActions.allActions":_i18n.i18n.translate("core.euiCollapsedItemActions.allActions",{defaultMessage:"All actions",description:"ARIA label and tooltip content describing a button that expands an actions menu"}),"euiColorPicker.screenReaderAnnouncement":_i18n.i18n.translate("core.euiColorPicker.screenReaderAnnouncement",{defaultMessage:"A popup with a range of selectable colors opened. Tab forward to cycle through colors choices or press escape to close this popup.",description:"Message when the color picker popover is opened. Describes the interaction with the elements in the popover."}),"euiColorPicker.swatchAriaLabel":function euiColorPickerSwatchAriaLabel(_ref2){var swatch=_ref2.swatch;return _i18n.i18n.translate("core.euiColorPicker.swatchAriaLabel",{defaultMessage:"Select {swatch} as the color",values:{swatch:swatch},description:"Screen reader text to describe the action and hex value of the selectable option"})},"euiComboBoxOptionsList.allOptionsSelected":_i18n.i18n.translate("core.euiComboBoxOptionsList.allOptionsSelected",{defaultMessage:"You've selected all available options"}),"euiComboBoxOptionsList.alreadyAdded":function euiComboBoxOptionsListAlreadyAdded(_ref3){var label=_ref3.label;return _react.default.createElement(_react2.FormattedMessage,{id:"core.euiComboBoxOptionsList.alreadyAdded",defaultMessage:"{label} has already been added",values:{label:label}})},"euiComboBoxOptionsList.createCustomOption":function euiComboBoxOptionsListCreateCustomOption(_ref4){var key=_ref4.key,searchValue=_ref4.searchValue;return _react.default.createElement(_react2.FormattedMessage,{id:"core.euiComboBoxOptionsList.createCustomOption",defaultMessage:"Hit {key} to add {searchValue} as a custom option",values:{key:key,searchValue:searchValue}})},"euiComboBoxOptionsList.loadingOptions":_i18n.i18n.translate("core.euiComboBoxOptionsList.loadingOptions",{defaultMessage:"Loading options",description:"Placeholder message while data is asynchronously loaded"}),"euiComboBoxOptionsList.noAvailableOptions":_i18n.i18n.translate("core.euiComboBoxOptionsList.noAvailableOptions",{defaultMessage:"There aren't any options available"}),"euiComboBoxOptionsList.noMatchingOptions":function euiComboBoxOptionsListNoMatchingOptions(_ref5){var searchValue=_ref5.searchValue;return _react.default.createElement(_react2.FormattedMessage,{id:"core.euiComboBoxOptionsList.noMatchingOptions",defaultMessage:"{searchValue} doesn't match any options",values:{searchValue:searchValue}})},"euiComboBoxPill.removeSelection":function euiComboBoxPillRemoveSelection(_ref6){var children=_ref6.children;return _i18n.i18n.translate("core.euiComboBoxPill.removeSelection",{defaultMessage:"Remove {children} from selection in this group",values:{children:children},description:"ARIA label, `children` is the human-friendly value of an option"})},"euiFilterButton.filterBadge":function euiFilterButtonFilterBadge(_ref7){var count=_ref7.count,hasActiveFilters=_ref7.hasActiveFilters;return _i18n.i18n.translate("core.euiFilterButton.filterBadge",{defaultMessage:"${count} ${filterCountLabel} filters",values:{count:count,filterCountLabel:hasActiveFilters?"active":"available"}})},"euiForm.addressFormErrors":_i18n.i18n.translate("core.euiForm.addressFormErrors",{defaultMessage:"Please address the errors in your form."}),"euiFormControlLayoutClearButton.label":_i18n.i18n.translate("core.euiFormControlLayoutClearButton.label",{defaultMessage:"Clear input",description:"ARIA label on a button that removes any entry in a form field"}),"euiHeaderAlert.dismiss":_i18n.i18n.translate("core.euiHeaderAlert.dismiss",{defaultMessage:"Dismiss",description:"ARIA label on a button that dismisses/removes a notification"}),"euiHeaderLinks.appNavigation":_i18n.i18n.translate("core.euiHeaderLinks.appNavigation",{defaultMessage:"App navigation",description:"ARIA label on a `nav` element"}),"euiHeaderLinks.openNavigationMenu":_i18n.i18n.translate("core.euiHeaderLinks.openNavigationMenu",{defaultMessage:"Open navigation menu"}),"euiHue.label":_i18n.i18n.translate("core.euiHue.label",{defaultMessage:'Select the HSV color mode "hue" value'}),"euiModal.closeModal":_i18n.i18n.translate("core.euiModal.closeModal",{defaultMessage:"Closes this modal window"}),"euiPagination.jumpToLastPage":function euiPaginationJumpToLastPage(_ref8){var pageCount=_ref8.pageCount;return _i18n.i18n.translate("core.euiPagination.jumpToLastPage",{defaultMessage:"Jump to the last page, number {pageCount}",values:{pageCount:pageCount}})},"euiPagination.nextPage":_i18n.i18n.translate("core.euiPagination.nextPage",{defaultMessage:"Next page"}),"euiPagination.pageOfTotal":function euiPaginationPageOfTotal(_ref9){var page=_ref9.page,total=_ref9.total;return _i18n.i18n.translate("core.euiPagination.pageOfTotal",{defaultMessage:"Page {page} of {total}",values:{page:page,total:total}})},"euiPagination.previousPage":_i18n.i18n.translate("core.euiPagination.previousPage",{defaultMessage:"Previous page"}),"euiPopover.screenReaderAnnouncement":_i18n.i18n.translate("core.euiPopover.screenReaderAnnouncement",{defaultMessage:"You are in a popup. To exit this popup, hit Escape."}),"euiSaturation.roleDescription":_i18n.i18n.translate("core.euiSaturation.roleDescription",{defaultMessage:"HSV color mode saturation and value selection"}),"euiSaturation.screenReaderAnnouncement":_i18n.i18n.translate("core.euiSaturation.screenReaderAnnouncement",{defaultMessage:'Use the arrow keys to navigate the square color gradient. The coordinates resulting from each key press will be used to calculate HSV color mode "saturation" and "value" numbers, in the range of 0 to 1. Left and right decrease and increase (respectively) the "saturation" value. Up and down decrease and increase (respectively) the "value" value.'}),"euiSelectable.loadingOptions":_i18n.i18n.translate("core.euiSelectable.loadingOptions",{defaultMessage:"Loading options",description:"Placeholder message while data is asynchronously loaded"}),"euiSelectable.noAvailableOptions":_i18n.i18n.translate("core.euiSelectable.noAvailableOptions",{defaultMessage:"There aren't any options available"}),"euiSelectable.noMatchingOptions":function euiSelectableNoMatchingOptions(_ref10){var searchValue=_ref10.searchValue;return _react.default.createElement(_react2.FormattedMessage,{id:"core.euiSelectable.noMatchingOptions",defaultMessage:"{searchValue} doesn't match any options",values:{searchValue:searchValue}})},"euiStat.loadingText":_i18n.i18n.translate("core.euiStat.loadingText",{defaultMessage:"Statistic is loading"}),"euiStep.completeStep":_i18n.i18n.translate("core.euiStep.completeStep",{defaultMessage:"Step",description:"See https://elastic.github.io/eui/#/navigation/steps to know how Step control looks like"}),"euiStep.incompleteStep":_i18n.i18n.translate("core.euiStep.incompleteStep",{defaultMessage:"Incomplete Step"}),"euiStepHorizontal.buttonTitle":function euiStepHorizontalButtonTitle(_ref11){var step=_ref11.step,title=_ref11.title,disabled=_ref11.disabled,isComplete=_ref11.isComplete;return _i18n.i18n.translate("core.euiStepHorizontal.buttonTitle",{defaultMessage:"Step {step}: {title}{titleAppendix, select, completed { is completed} disabled { is disabled} other {}}",values:{step:step,title:title,titleAppendix:disabled?"disabled":isComplete?"completed":""}})},"euiStepHorizontal.step":_i18n.i18n.translate("core.euiStepHorizontal.step",{defaultMessage:"Step",description:"Screen reader text announcing information about a step in some process"}),"euiStepNumber.hasErrors":_i18n.i18n.translate("core.euiStepNumber.hasErrors",{defaultMessage:"has errors",description:"Used as the title attribute on an image or svg icon to indicate a given process step has errors"}),"euiStepNumber.hasWarnings":_i18n.i18n.translate("core.euiStepNumber.hasWarnings",{defaultMessage:"has warnings",description:"Used as the title attribute on an image or svg icon to indicate a given process step has warnings"}),"euiStepNumber.isComplete":_i18n.i18n.translate("core.euiStepNumber.isComplete",{defaultMessage:"complete",description:"Used as the title attribute on an image or svg icon to indicate a given process step is complete"}),"euiSuperDatePicker.showDatesButtonLabel":_i18n.i18n.translate("core.euiSuperDatePicker.showDatesButtonLabel",{defaultMessage:"Show dates",description:"Displayed in a button that shows date picker"}),"euiSuperSelect.screenReaderAnnouncement":function euiSuperSelectScreenReaderAnnouncement(_ref12){var optionsCount=_ref12.optionsCount;return _i18n.i18n.translate("core.euiSuperSelect.screenReaderAnnouncement",{defaultMessage:"You are in a form selector of {optionsCount} items and must select a single option. Use the Up and Down keys to navigate or Escape to close.",values:{optionsCount:optionsCount}})},"euiSuperSelectControl.selectAnOption":function euiSuperSelectControlSelectAnOption(_ref13){var selectedValue=_ref13.selectedValue;return _i18n.i18n.translate("core.euiSuperSelectControl.selectAnOption",{defaultMessage:"Select an option: {selectedValue}, is selected",values:{selectedValue:selectedValue}})},"euiSuperUpdateButton.cannotUpdateTooltip":_i18n.i18n.translate("core.euiSuperUpdateButton.cannotUpdateTooltip",{defaultMessage:"Cannot update",description:"Displayed in a tooltip when updates can't happen"}),"euiSuperUpdateButton.clickToApplyTooltip":_i18n.i18n.translate("core.euiSuperUpdateButton.clickToApplyTooltip",{defaultMessage:"Click to apply",description:"Displayed in a tooltip when there are changes that haven't been applied"}),"euiSuperUpdateButton.refreshButtonLabel":_i18n.i18n.translate("core.euiSuperUpdateButton.refreshButtonLabel",{defaultMessage:"Refresh",description:"Displayed in a button that refreshes based on date picked"}),"euiSuperUpdateButton.updatingButtonLabel":_i18n.i18n.translate("core.euiSuperUpdateButton.updatingButtonLabel",{defaultMessage:"Updating",description:"Displayed in a button that refreshes when updates are happening"}),"euiSuperUpdateButton.updateButtonLabel":_i18n.i18n.translate("core.euiSuperUpdateButton.updateButtonLabel",{defaultMessage:"Update",description:"Displayed in a button that updates based on date picked"}),"euiTablePagination.rowsPerPage":_i18n.i18n.translate("core.euiTablePagination.rowsPerPage",{defaultMessage:"Rows per page",description:"Displayed in a button that toggles a table pagination menu"}),"euiTablePagination.rowsPerPageOption":function euiTablePaginationRowsPerPageOption(_ref14){var rowsPerPage=_ref14.rowsPerPage;return _i18n.i18n.translate("core.euiTablePagination.rowsPerPageOption",{defaultMessage:"{rowsPerPage} rows",description:"Displayed in a button that toggles the number of visible rows",values:{rowsPerPage:rowsPerPage}})},"euiTableSortMobile.sorting":_i18n.i18n.translate("core.euiTableSortMobile.sorting",{defaultMessage:"Sorting",description:"Displayed in a button that toggles a table sorting menu"}),"euiToast.dismissToast":_i18n.i18n.translate("core.euiToast.dismissToast",{defaultMessage:"Dismiss toast"}),"euiToast.newNotification":_i18n.i18n.translate("core.euiToast.newNotification",{defaultMessage:"A new notification appears"}),"euiToast.notification":_i18n.i18n.translate("core.euiToast.notification",{defaultMessage:"Notification",description:"ARIA label on an element containing a notification"})};return{Context:function I18nContext(_ref15){var children=_ref15.children;return _react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_eui.EuiContext,{i18n:{mapping:mapping}},children))}}}},{key:"start",value:function start(){return this.getContext()}},{key:"stop",value:function stop(){}}]);return I18nService}();exports.I18nService=I18nService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InjectedMetadataService=void 0;var _lodash=__webpack_require__(1);var _utils=__webpack_require__(56);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InjectedMetadataService=function(){function InjectedMetadataService(params){_classCallCheck(this,InjectedMetadataService);this.params=params;_defineProperty(this,"state",(0,_utils.deepFreeze)(this.params.injectedMetadata))}_createClass(InjectedMetadataService,[{key:"start",value:function start(){return this.setup()}},{key:"setup",value:function setup(){var _this=this;return{getBasePath:function getBasePath(){return _this.state.basePath},getKibanaVersion:function getKibanaVersion(){return _this.state.version},getCapabilities:function getCapabilities(){return _this.state.capabilities},getCspConfig:function getCspConfig(){return _this.state.csp},getPlugins:function getPlugins(){return _this.state.uiPlugins},getLegacyMetadata:function getLegacyMetadata(){return _this.state.legacyMetadata},getInjectedVar:function getInjectedVar(name,defaultValue){return(0,_lodash.get)(_this.state.vars,name,defaultValue)},getInjectedVars:function getInjectedVars(){return _this.state.vars},getKibanaBuildNumber:function getKibanaBuildNumber(){return _this.state.buildNumber},getKibanaBranch:function getKibanaBranch(){return _this.state.branch}}}}]);return InjectedMetadataService}();exports.InjectedMetadataService=InjectedMetadataService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ToastsService=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(13);var _global_toast_list=__webpack_require__(836);var _toasts_api=__webpack_require__(495);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ToastsService=function(){function ToastsService(){_classCallCheck(this,ToastsService);_defineProperty(this,"api",void 0);_defineProperty(this,"targetDomElement",void 0)}_createClass(ToastsService,[{key:"setup",value:function setup(_ref){var uiSettings=_ref.uiSettings;this.api=new _toasts_api.ToastsApi({uiSettings:uiSettings});return this.api}},{key:"start",value:function start(_ref2){var _this=this;var i18n=_ref2.i18n,overlays=_ref2.overlays,targetDomElement=_ref2.targetDomElement;this.api.registerOverlays(overlays);this.targetDomElement=targetDomElement;(0,_reactDom.render)(_react.default.createElement(i18n.Context,null,_react.default.createElement(_global_toast_list.GlobalToastList,{dismissToast:function dismissToast(toast){return _this.api.remove(toast)},toasts$:this.api.get$()})),targetDomElement);return this.api}},{key:"stop",value:function stop(){if(this.targetDomElement){(0,_reactDom.unmountComponentAtNode)(this.targetDomElement);this.targetDomElement.textContent=""}}}]);return ToastsService}();exports.ToastsService=ToastsService},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.GlobalToastList=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var GlobalToastList=function(_React$Component){_inherits(GlobalToastList,_React$Component);function GlobalToastList(){var _getPrototypeOf2;var _this;_classCallCheck(this,GlobalToastList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(GlobalToastList)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{toasts:[]});_defineProperty(_assertThisInitialized(_this),"subscription",void 0);return _this}_createClass(GlobalToastList,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.subscription=this.props.toasts$.subscribe(function(toasts){_this2.setState({toasts:toasts})})}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.subscription){this.subscription.unsubscribe()}}},{key:"render",value:function render(){return _react.default.createElement(_eui.EuiGlobalToastList,{"data-test-subj":"globalToastList",toasts:this.state.toasts,dismissToast:this.props.dismissToast,toastLifeTimeMs:Infinity})}}]);return GlobalToastList}(_react.default.Component);exports.GlobalToastList=GlobalToastList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorToast=ErrorToast;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function showErrorDialog(_ref){var title=_ref.title,error=_ref.error,openModal=_ref.openModal;var modal=openModal(_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,title)),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiCallOut,{size:"s",color:"danger",iconType:"alert",title:error.message}),error.stack&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiCodeBlock,{isCopyable:true,paddingSize:"s"},error.stack))),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return modal.close()},fill:true},_react.default.createElement(_react2.FormattedMessage,{id:"core.notifications.errorToast.closeModal",defaultMessage:"Close"})))))}function ErrorToast(_ref2){var title=_ref2.title,error=_ref2.error,toastMessage=_ref2.toastMessage,openModal=_ref2.openModal;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",{"data-test-subj":"errorToastMessage"},toastMessage),_react.default.createElement("div",{className:"eui-textRight"},_react.default.createElement(_eui.EuiButton,{size:"s",color:"danger",onClick:function onClick(){return showErrorDialog({title:title,error:error,openModal:openModal})}},_react.default.createElement(_react2.FormattedMessage,{id:"core.toasts.errorToast.seeFullError",defaultMessage:"See the full error"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NotificationsService=void 0;var _i18n=__webpack_require__(2);var _toasts=__webpack_require__(494);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NotificationsService=function(){function NotificationsService(){_classCallCheck(this,NotificationsService);_defineProperty(this,"toasts",void 0);_defineProperty(this,"uiSettingsErrorSubscription",void 0);_defineProperty(this,"targetDomElement",void 0);this.toasts=new _toasts.ToastsService}_createClass(NotificationsService,[{key:"setup",value:function setup(_ref){var uiSettings=_ref.uiSettings;var notificationSetup={toasts:this.toasts.setup({uiSettings:uiSettings})};this.uiSettingsErrorSubscription=uiSettings.getUpdateErrors$().subscribe(function(error){notificationSetup.toasts.addDanger({title:_i18n.i18n.translate("core.notifications.unableUpdateUISettingNotificationMessageTitle",{defaultMessage:"Unable to update UI setting"}),text:error.message})});return notificationSetup}},{key:"start",value:function start(_ref2){var i18nDep=_ref2.i18n,overlays=_ref2.overlays,targetDomElement=_ref2.targetDomElement;this.targetDomElement=targetDomElement;var toastsContainer=document.createElement("div");targetDomElement.appendChild(toastsContainer);return{toasts:this.toasts.start({i18n:i18nDep,overlays:overlays,targetDomElement:toastsContainer})}}},{key:"stop",value:function stop(){this.toasts.stop();if(this.targetDomElement){this.targetDomElement.textContent=""}if(this.uiSettingsErrorSubscription){this.uiSettingsErrorSubscription.unsubscribe()}}}]);return NotificationsService}();exports.NotificationsService=NotificationsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OverlayBannersService=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _rxjs=__webpack_require__(16);var _operators=__webpack_require__(27);var _priority_map=__webpack_require__(840);var _banners_list=__webpack_require__(841);var _user_banner_service=__webpack_require__(842);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OverlayBannersService=function(){function OverlayBannersService(){_classCallCheck(this,OverlayBannersService);_defineProperty(this,"userBanner",new _user_banner_service.UserBannerService)}_createClass(OverlayBannersService,[{key:"start",value:function start(_ref){var i18n=_ref.i18n,uiSettings=_ref.uiSettings;var uniqueId=0;var genId=function genId(){return"".concat(uniqueId++)};var banners$=new _rxjs.BehaviorSubject(new _priority_map.PriorityMap);var service={add:function add(mount){var priority=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var id=genId();var nextBanner={id:id,mount:mount,priority:priority};banners$.next(banners$.value.add(id,nextBanner));return id},remove:function remove(id){if(!banners$.value.has(id)){return false}banners$.next(banners$.value.remove(id));return true},replace:function replace(id,mount){var priority=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!id||!banners$.value.has(id)){return this.add(mount,priority)}var nextId=genId();var nextBanner={id:nextId,mount:mount,priority:priority};banners$.next(banners$.value.remove(id).add(nextId,nextBanner));return nextId},get$:function get$(){return banners$.pipe((0,_operators.map)(function(bannerMap){return _toConsumableArray(bannerMap.values())}))},getComponent:function getComponent(){return _react.default.createElement(_banners_list.BannersList,{banners$:this.get$()})}};this.userBanner.start({banners:service,i18n:i18n,uiSettings:uiSettings});return service}},{key:"stop",value:function stop(){this.userBanner.stop()}}]);return OverlayBannersService}();exports.OverlayBannersService=OverlayBannersService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PriorityMap=void 0;var _lodash=__webpack_require__(1);var _Symbol$iterator;function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}_Symbol$iterator=Symbol.iterator;var PriorityMap=function(){function PriorityMap(map){_classCallCheck(this,PriorityMap);_defineProperty(this,"map",void 0);this.map=map?new Map(sortEntries(map)):new Map}_createClass(PriorityMap,[{key:"add",value:function add(key,value){return new PriorityMap(new Map(sortEntries([].concat(_toConsumableArray(this.map),[[key,value]]))))}},{key:"remove",value:function remove(key){return new PriorityMap(new Map(_toConsumableArray(this.map).filter(function(_ref){var _ref2=_slicedToArray(_ref,1),itemKey=_ref2[0];return itemKey!==key})))}},{key:"has",value:function has(key){return this.map.has(key)}},{key:_Symbol$iterator,value:function value(){return this.map[Symbol.iterator]()}},{key:"values",value:function values(){return this.map.values()}}]);return PriorityMap}();exports.PriorityMap=PriorityMap;var sortEntries=function sortEntries(map){return(0,_lodash.sortBy)(_toConsumableArray(map),"1.priority").reverse()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BannersList=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var BannersList=function BannersList(_ref){var banners$=_ref.banners$;var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),banners=_useState2[0],setBanners=_useState2[1];(0,_react.useEffect)(function(){var subscription=banners$.subscribe(setBanners);return function(){return subscription.unsubscribe()}},[banners$]);if(banners.length===0){return null}return _react.default.createElement("div",{className:"kbnGlobalBannerList"},banners.map(function(banner){return _react.default.createElement(BannerItem,{key:banner.id,banner:banner})}))};exports.BannersList=BannersList;var BannerItem=function BannerItem(_ref2){var banner=_ref2.banner;var element=(0,_react.useRef)(null);(0,_react.useEffect)(function(){return banner.mount(element.current)},[banner]);return _react.default.createElement("div",{"data-test-priority":banner.priority,className:"kbnGlobalBannerList__item",ref:element})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UserBannerService=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(13));var _reactMarkdown=_interopRequireDefault(__webpack_require__(515));var _operators=__webpack_require__(27);var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UserBannerService=function(){function UserBannerService(){_classCallCheck(this,UserBannerService);_defineProperty(this,"settingsSubscription",void 0)}_createClass(UserBannerService,[{key:"start",value:function start(_ref){var banners=_ref.banners,i18n=_ref.i18n,uiSettings=_ref.uiSettings;var id;var timeout;var dismiss=function dismiss(){banners.remove(id);clearTimeout(timeout)};var updateBanner=function updateBanner(){var content=uiSettings.get("notifications:banner");var lifetime=uiSettings.get("notifications:lifetime:banner");if(typeof content!=="string"||content.length===0||typeof lifetime!=="number"){dismiss();return}id=banners.replace(id,function(el){_reactDom.default.render(_react.default.createElement(i18n.Context,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"core.ui.overlays.banner.attentionTitle",defaultMessage:"Attention"}),iconType:"help"},_react.default.createElement(_reactMarkdown.default,{renderers:{root:_react.Fragment}},content.trim()),_react.default.createElement(_eui.EuiButton,{type:"primary",size:"s",onClick:function onClick(){return banners.remove(id)}},_react.default.createElement(_react2.FormattedMessage,{id:"core.ui.overlays.banner.closeButtonLabel",defaultMessage:"Close"})))),el);timeout=setTimeout(dismiss,lifetime);return function(){return _reactDom.default.unmountComponentAtNode(el)}},100)};updateBanner();this.settingsSubscription=uiSettings.getUpdate$().pipe((0,_operators.filter)(function(_ref2){var key=_ref2.key;return key==="notifications:banner"||key==="notifications:lifetime:banner"})).subscribe(function(){return updateBanner()})}},{key:"stop",value:function stop(){if(this.settingsSubscription){this.settingsSubscription.unsubscribe();this.settingsSubscription=undefined}}}]);return UserBannerService}();exports.UserBannerService=UserBannerService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OverlayService=void 0;var _flyout=__webpack_require__(844);var _modal=__webpack_require__(845);var _banners=__webpack_require__(497);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var OverlayService=function(){function OverlayService(){_classCallCheck(this,OverlayService)}_createClass(OverlayService,[{key:"start",value:function start(_ref){var i18n=_ref.i18n,targetDomElement=_ref.targetDomElement,uiSettings=_ref.uiSettings;var flyoutElement=document.createElement("div");var modalElement=document.createElement("div");targetDomElement.appendChild(flyoutElement);targetDomElement.appendChild(modalElement);var flyoutService=new _flyout.FlyoutService(flyoutElement);var modalService=new _modal.ModalService(modalElement);var bannersService=new _banners.OverlayBannersService;return{banners:bannersService.start({i18n:i18n,uiSettings:uiSettings}),openFlyout:flyoutService.openFlyout.bind(flyoutService,i18n),openModal:modalService.openModal.bind(modalService,i18n)}}}]);return OverlayService}();exports.OverlayService=OverlayService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FlyoutService=exports.FlyoutRef=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(13);var _rxjs=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FlyoutRef=function(){function FlyoutRef(){_classCallCheck(this,FlyoutRef);_defineProperty(this,"onClose",void 0);_defineProperty(this,"closeSubject",new _rxjs.Subject);this.onClose=this.closeSubject.toPromise()}_createClass(FlyoutRef,[{key:"close",value:function close(){if(!this.closeSubject.closed){this.closeSubject.next();this.closeSubject.complete()}return this.onClose}}]);return FlyoutRef}();exports.FlyoutRef=FlyoutRef;var FlyoutService=function(){function FlyoutService(targetDomElement){var _this=this;_classCallCheck(this,FlyoutService);this.targetDomElement=targetDomElement;_defineProperty(this,"activeFlyout",null);_defineProperty(this,"openFlyout",function(i18n,flyoutChildren){var flyoutProps=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(_this.activeFlyout){_this.activeFlyout.close();_this.cleanupDom()}var flyout=new FlyoutRef;flyout.onClose.then(function(){if(_this.activeFlyout===flyout){_this.cleanupDom()}});_this.activeFlyout=flyout;(0,_reactDom.render)(_react.default.createElement(i18n.Context,null,_react.default.createElement(_eui.EuiFlyout,_extends({},flyoutProps,{onClose:function onClose(){return flyout.close()}}),flyoutChildren)),_this.targetDomElement);return flyout})}_createClass(FlyoutService,[{key:"cleanupDom",value:function cleanupDom(){(0,_reactDom.unmountComponentAtNode)(this.targetDomElement);this.targetDomElement.innerHTML="";this.activeFlyout=null}}]);return FlyoutService}();exports.FlyoutService=FlyoutService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ModalService=exports.ModalRef=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(13);var _rxjs=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ModalRef=function(){function ModalRef(){_classCallCheck(this,ModalRef);_defineProperty(this,"onClose",void 0);_defineProperty(this,"closeSubject",new _rxjs.Subject);this.onClose=this.closeSubject.toPromise()}_createClass(ModalRef,[{key:"close",value:function close(){if(!this.closeSubject.closed){this.closeSubject.next();this.closeSubject.complete()}return this.onClose}}]);return ModalRef}();exports.ModalRef=ModalRef;var ModalService=function(){function ModalService(targetDomElement){var _this=this;_classCallCheck(this,ModalService);this.targetDomElement=targetDomElement;_defineProperty(this,"activeModal",null);_defineProperty(this,"openModal",function(i18n,modalChildren){var modalProps=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(_this.activeModal){_this.activeModal.close();_this.cleanupDom()}var modal=new ModalRef;modal.onClose.then(function(){if(_this.activeModal===modal){_this.cleanupDom()}});_this.activeModal=modal;(0,_reactDom.render)(_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(i18n.Context,null,_react.default.createElement(_eui.EuiModal,_extends({},modalProps,{onClose:function onClose(){return modal.close()}}),modalChildren))),_this.targetDomElement);return modal})}_createClass(ModalService,[{key:"cleanupDom",value:function cleanupDom(){(0,_reactDom.unmountComponentAtNode)(this.targetDomElement);this.targetDomElement.innerHTML="";this.activeModal=null}}]);return ModalService}();exports.ModalService=ModalService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PluginsService=void 0;var _plugin=__webpack_require__(500);var _plugin_context=__webpack_require__(501);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PluginsService=function(){function PluginsService(coreContext,plugins){var _this=this;_classCallCheck(this,PluginsService);this.coreContext=coreContext;_defineProperty(this,"plugins",new Map);_defineProperty(this,"pluginDependencies",new Map);_defineProperty(this,"satupPlugins",[]);var opaqueIds=new Map(plugins.map(function(p){return[p.id,Symbol(p.id)]}));plugins.forEach(function(_ref){var id=_ref.id,plugin=_ref.plugin;_this.pluginDependencies.set(id,[].concat(_toConsumableArray(plugin.requiredPlugins),_toConsumableArray(plugin.optionalPlugins.filter(function(optPlugin){return opaqueIds.has(optPlugin)}))));_this.plugins.set(id,new _plugin.PluginWrapper(plugin,opaqueIds.get(id),(0,_plugin_context.createPluginInitializerContext)(_this.coreContext,opaqueIds.get(id),plugin)))})}_createClass(PluginsService,[{key:"getOpaqueIds",value:function getOpaqueIds(){var _this2=this;return new Map(_toConsumableArray(this.pluginDependencies).map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),id=_ref3[0],deps=_ref3[1];return[_this2.plugins.get(id).opaqueId,deps.map(function(depId){return _this2.plugins.get(depId).opaqueId})]}))}},{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(deps){var contracts,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_step$value,pluginName,plugin,pluginDepContracts;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.loadPluginBundles(deps.http.basePath.prepend);case 2:contracts=new Map;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=6;_iterator=this.plugins.entries()[Symbol.iterator]();case 8:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=21;break}_step$value=_slicedToArray(_step.value,2),pluginName=_step$value[0],plugin=_step$value[1];pluginDepContracts=_toConsumableArray(this.pluginDependencies.get(pluginName)).reduce(function(depContracts,dependencyName){if(contracts.has(dependencyName)){depContracts[dependencyName]=contracts.get(dependencyName)}return depContracts},{});_context.t0=contracts;_context.t1=pluginName;_context.next=15;return plugin.setup((0,_plugin_context.createPluginSetupContext)(this.coreContext,deps,plugin),pluginDepContracts);case 15:_context.t2=_context.sent;_context.t0.set.call(_context.t0,_context.t1,_context.t2);this.satupPlugins.push(pluginName);case 18:_iteratorNormalCompletion=true;_context.next=8;break;case 21:_context.next=27;break;case 23:_context.prev=23;_context.t3=_context["catch"](6);_didIteratorError=true;_iteratorError=_context.t3;case 27:_context.prev=27;_context.prev=28;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 30:_context.prev=30;if(!_didIteratorError){_context.next=33;break}throw _iteratorError;case 33:return _context.finish(30);case 34:return _context.finish(27);case 35:return _context.abrupt("return",{contracts:contracts});case 36:case"end":return _context.stop()}}},_callee,this,[[6,23,27,35],[28,,30,34]])}));function setup(_x){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function(){var _start=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(deps){var contracts,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,_step2$value,pluginName,plugin,pluginDepContracts;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:contracts=new Map;_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context2.prev=4;_iterator2=this.plugins.entries()[Symbol.iterator]();case 6:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context2.next=18;break}_step2$value=_slicedToArray(_step2.value,2),pluginName=_step2$value[0],plugin=_step2$value[1];pluginDepContracts=_toConsumableArray(this.pluginDependencies.get(pluginName)).reduce(function(depContracts,dependencyName){if(contracts.has(dependencyName)){depContracts[dependencyName]=contracts.get(dependencyName)}return depContracts},{});_context2.t0=contracts;_context2.t1=pluginName;_context2.next=13;return plugin.start((0,_plugin_context.createPluginStartContext)(this.coreContext,deps,plugin),pluginDepContracts);case 13:_context2.t2=_context2.sent;_context2.t0.set.call(_context2.t0,_context2.t1,_context2.t2);case 15:_iteratorNormalCompletion2=true;_context2.next=6;break;case 18:_context2.next=24;break;case 20:_context2.prev=20;_context2.t3=_context2["catch"](4);_didIteratorError2=true;_iteratorError2=_context2.t3;case 24:_context2.prev=24;_context2.prev=25;if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}case 27:_context2.prev=27;if(!_didIteratorError2){_context2.next=30;break}throw _iteratorError2;case 30:return _context2.finish(27);case 31:return _context2.finish(24);case 32:return _context2.abrupt("return",{contracts:contracts});case 33:case"end":return _context2.stop()}}},_callee2,this,[[4,20,24,32],[25,,27,31]])}));function start(_x2){return _start.apply(this,arguments)}return start}()},{key:"stop",value:function(){var _stop=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_iterator3,_step3,pluginName;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context3.prev=3;for(_iterator3=this.satupPlugins.reverse()[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){pluginName=_step3.value;this.plugins.get(pluginName).stop()}_context3.next=11;break;case 7:_context3.prev=7;_context3.t0=_context3["catch"](3);_didIteratorError3=true;_iteratorError3=_context3.t0;case 11:_context3.prev=11;_context3.prev=12;if(!_iteratorNormalCompletion3&&_iterator3.return!=null){_iterator3.return()}case 14:_context3.prev=14;if(!_didIteratorError3){_context3.next=17;break}throw _iteratorError3;case 17:return _context3.finish(14);case 18:return _context3.finish(11);case 19:case"end":return _context3.stop()}}},_callee3,this,[[3,7,11,19],[12,,14,18]])}));function stop(){return _stop.apply(this,arguments)}return stop}()},{key:"loadPluginBundles",value:function loadPluginBundles(addBasePath){return Promise.all(_toConsumableArray(this.plugins.values()).map(function(plugin){return plugin.load(addBasePath)}))}}]);return PluginsService}();exports.PluginsService=PluginsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loadPluginBundle=exports.LOAD_TIMEOUT=void 0;var LOAD_TIMEOUT=120*1e3;exports.LOAD_TIMEOUT=LOAD_TIMEOUT;var loadPluginBundle=function loadPluginBundle(addBasePath,pluginName){var _ref=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},_ref$timeoutMs=_ref.timeoutMs,timeoutMs=_ref$timeoutMs===void 0?LOAD_TIMEOUT:_ref$timeoutMs;return new Promise(function(resolve,reject){var script=document.createElement("script");var coreWindow=window;var bundlePath=addBasePath("/bundles/plugin/".concat(pluginName,".bundle.js"));script.setAttribute("src",bundlePath);script.setAttribute("id","kbn-plugin-".concat(pluginName));script.setAttribute("async","");var cleanupTag=function cleanupTag(){clearTimeout(timeout);script.onload=script.onerror=null};script.onload=function(){cleanupTag();var initializer=coreWindow.__kbnBundles__["plugin/".concat(pluginName)];if(!initializer||typeof initializer!=="function"){reject(new Error('Definition of plugin "'.concat(pluginName,'" should be a function (').concat(bundlePath,").")))}else{resolve(initializer)}};script.onerror=function(){cleanupTag();reject(new Error('Failed to load "'.concat(pluginName,'" bundle (').concat(bundlePath,")")))};var timeout=setTimeout(function(){cleanupTag();reject(new Error('Timeout reached when loading "'.concat(pluginName,'" bundle (').concat(bundlePath,")")))},timeoutMs);document.body.appendChild(script)})};exports.loadPluginBundle=loadPluginBundle},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UiSettingsService=void 0;var _ui_settings_api=__webpack_require__(851);var _ui_settings_client=__webpack_require__(504);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UiSettingsService=function(){function UiSettingsService(){_classCallCheck(this,UiSettingsService);_defineProperty(this,"uiSettingsApi",void 0);_defineProperty(this,"uiSettingsClient",void 0)}_createClass(UiSettingsService,[{key:"setup",value:function setup(_ref){var http=_ref.http,injectedMetadata=_ref.injectedMetadata;this.uiSettingsApi=new _ui_settings_api.UiSettingsApi(http);http.addLoadingCount(this.uiSettingsApi.getLoadingCount$());var legacyMetadata=injectedMetadata.getLegacyMetadata();this.uiSettingsClient=new _ui_settings_client.UiSettingsClient({api:this.uiSettingsApi,defaults:legacyMetadata.uiSettings.defaults,initialSettings:legacyMetadata.uiSettings.user});return this.uiSettingsClient}},{key:"start",value:function start(){return this.uiSettingsClient}},{key:"stop",value:function stop(){if(this.uiSettingsClient){this.uiSettingsClient.stop()}if(this.uiSettingsApi){this.uiSettingsApi.stop()}}}]);return UiSettingsService}();exports.UiSettingsService=UiSettingsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UiSettingsApi=void 0;var _rxjs=__webpack_require__(16);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NOOP_CHANGES={values:{},callback:function callback(){}};var UiSettingsApi=function(){function UiSettingsApi(http){_classCallCheck(this,UiSettingsApi);this.http=http;_defineProperty(this,"pendingChanges",void 0);_defineProperty(this,"sendInProgress",false);_defineProperty(this,"loadingCount$",new _rxjs.BehaviorSubject(0))}_createClass(UiSettingsApi,[{key:"batchSet",value:function batchSet(key,value){var _this=this;return new Promise(function(resolve,reject){var prev=_this.pendingChanges||NOOP_CHANGES;_this.pendingChanges={values:_objectSpread({},prev.values,_defineProperty({},key,value)),callback:function callback(error,resp){prev.callback(error,resp);if(error){reject(error)}else{resolve(resp)}}};_this.flushPendingChanges()})}},{key:"getLoadingCount$",value:function getLoadingCount$(){return this.loadingCount$.asObservable()}},{key:"stop",value:function stop(){this.loadingCount$.complete()}},{key:"hasPendingChanges",value:function hasPendingChanges(){return!!(this.pendingChanges&&this.sendInProgress)}},{key:"flushPendingChanges",value:function(){var _flushPendingChanges=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var changes;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.pendingChanges){_context.next=2;break}return _context.abrupt("return");case 2:if(!this.sendInProgress){_context.next=4;break}return _context.abrupt("return");case 4:changes=this.pendingChanges;this.pendingChanges=undefined;_context.prev=6;this.sendInProgress=true;_context.t0=changes;_context.t1=undefined;_context.next=12;return this.sendRequest("POST","/api/kibana/settings",{changes:changes.values});case 12:_context.t2=_context.sent;_context.t0.callback.call(_context.t0,_context.t1,_context.t2);_context.next=19;break;case 16:_context.prev=16;_context.t3=_context["catch"](6);changes.callback(_context.t3);case 19:_context.prev=19;this.sendInProgress=false;this.flushPendingChanges();return _context.finish(19);case 23:case"end":return _context.stop()}}},_callee,this,[[6,16,19,23]])}));function flushPendingChanges(){return _flushPendingChanges.apply(this,arguments)}return flushPendingChanges}()},{key:"sendRequest",value:function(){var _sendRequest=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(method,path,body){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;this.loadingCount$.next(this.loadingCount$.getValue()+1);_context2.next=4;return this.http.fetch(path,{method:method,body:JSON.stringify(body),headers:{accept:"application/json"}});case 4:return _context2.abrupt("return",_context2.sent);case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);if(!(_context2.t0.response&&_context2.t0.response.status>=300)){_context2.next=11;break}throw new Error("Request failed with status code: ".concat(_context2.t0.response.status));case 11:throw _context2.t0;case 12:_context2.prev=12;this.loadingCount$.next(this.loadingCount$.getValue()-1);return _context2.finish(12);case 15:case"end":return _context2.stop()}}},_callee2,this,[[0,7,12,15]])}));function sendRequest(_x,_x2,_x3){return _sendRequest.apply(this,arguments)}return sendRequest}()}]);return UiSettingsApi}();exports.UiSettingsApi=UiSettingsApi},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ApplicationService=void 0;var _rxjs=__webpack_require__(16);var _capabilities=__webpack_require__(506);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ApplicationService=function(){function ApplicationService(){_classCallCheck(this,ApplicationService);_defineProperty(this,"apps$",new _rxjs.BehaviorSubject([]));_defineProperty(this,"legacyApps$",new _rxjs.BehaviorSubject([]));_defineProperty(this,"capabilities",new _capabilities.CapabilitiesService)}_createClass(ApplicationService,[{key:"setup",value:function setup(){var _this=this;return{registerApp:function registerApp(app){_this.apps$.next([].concat(_toConsumableArray(_this.apps$.value),[app]))},registerLegacyApp:function registerLegacyApp(app){_this.legacyApps$.next([].concat(_toConsumableArray(_this.legacyApps$.value),[app]))}}}},{key:"start",value:function(){var _start=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var injectedMetadata;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:injectedMetadata=_ref.injectedMetadata;this.apps$.complete();this.legacyApps$.complete();return _context.abrupt("return",this.capabilities.start({apps:this.apps$.value,legacyApps:this.legacyApps$.value,injectedMetadata:injectedMetadata}));case 4:case"end":return _context.stop()}}},_callee,this)}));function start(_x){return _start.apply(this,arguments)}return start}()},{key:"stop",value:function stop(){}}]);return ApplicationService}();exports.ApplicationService=ApplicationService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CapabilitiesService=void 0;var _utils=__webpack_require__(56);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var CapabilitiesService=function(){function CapabilitiesService(){_classCallCheck(this,CapabilitiesService)}_createClass(CapabilitiesService,[{key:"start",value:function(){var _start=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var apps,legacyApps,injectedMetadata,capabilities;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:apps=_ref.apps,legacyApps=_ref.legacyApps,injectedMetadata=_ref.injectedMetadata;capabilities=(0,_utils.deepFreeze)(injectedMetadata.getCapabilities());return _context.abrupt("return",{availableApps:apps.filter(function(app){return capabilities.navLinks[app.id]}),availableLegacyApps:legacyApps.filter(function(app){return capabilities.navLinks[app.id]}),capabilities:capabilities});case 3:case"end":return _context.stop()}}},_callee)}));function start(_x){return _start.apply(this,arguments)}return start}()}]);return CapabilitiesService}();exports.CapabilitiesService=CapabilitiesService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocLinksService=void 0;var _utils=__webpack_require__(56);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var DocLinksService=function(){function DocLinksService(){_classCallCheck(this,DocLinksService)}_createClass(DocLinksService,[{key:"start",value:function start(_ref){var injectedMetadata=_ref.injectedMetadata;var DOC_LINK_VERSION=injectedMetadata.getKibanaBranch();var ELASTIC_WEBSITE_URL="https://www.elastic.co/";var ELASTICSEARCH_DOCS="".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION,"/");return(0,_utils.deepFreeze)({DOC_LINK_VERSION:DOC_LINK_VERSION,ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL,links:{filebeat:{base:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/filebeat/").concat(DOC_LINK_VERSION),installation:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/filebeat/").concat(DOC_LINK_VERSION,"/filebeat-installation.html"),configuration:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/filebeat/").concat(DOC_LINK_VERSION,"/filebeat-configuration.html"),elasticsearchOutput:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/filebeat/").concat(DOC_LINK_VERSION,"/elasticsearch-output.html"),startup:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/filebeat/").concat(DOC_LINK_VERSION,"/filebeat-starting.html"),exportedFields:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/filebeat/").concat(DOC_LINK_VERSION,"/exported-fields.html")},auditbeat:{base:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/auditbeat/").concat(DOC_LINK_VERSION)},metricbeat:{base:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/metricbeat/").concat(DOC_LINK_VERSION)},heartbeat:{base:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/heartbeat/").concat(DOC_LINK_VERSION)},logstash:{base:"".concat(ELASTIC_WEBSITE_URL,"guide/en/logstash/").concat(DOC_LINK_VERSION)},functionbeat:{base:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/functionbeat/").concat(DOC_LINK_VERSION)},winlogbeat:{base:"".concat(ELASTIC_WEBSITE_URL,"guide/en/beats/winlogbeat/").concat(DOC_LINK_VERSION)},aggs:{date_histogram:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-bucket-datehistogram-aggregation.html"),date_range:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-bucket-daterange-aggregation.html"),filter:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-bucket-filter-aggregation.html"),filters:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-bucket-filters-aggregation.html"),geohash_grid:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-bucket-geohashgrid-aggregation.html"),histogram:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-bucket-histogram-aggregation.html"),ip_range:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-bucket-iprange-aggregation.html"),range:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-bucket-range-aggregation.html"),significant_terms:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-bucket-significantterms-aggregation.html"),terms:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-bucket-terms-aggregation.html"),avg:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-avg-aggregation.html"),avg_bucket:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-pipeline-avg-bucket-aggregation.html"),max_bucket:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-pipeline-max-bucket-aggregation.html"),min_bucket:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-pipeline-min-bucket-aggregation.html"),sum_bucket:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-pipeline-sum-bucket-aggregation.html"),cardinality:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-cardinality-aggregation.html"),count:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-valuecount-aggregation.html"),cumulative_sum:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-sum-aggregation.html"),derivative:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-pipeline-derivative-aggregation.html"),geo_bounds:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-geobounds-aggregation.html"),geo_centroid:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-geocentroid-aggregation.html"),max:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-max-aggregation.html"),median:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-percentile-aggregation.html"),min:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-min-aggregation.html"),moving_avg:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-pipeline-movavg-aggregation.html"),percentile_ranks:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-percentile-rank-aggregation.html"),serial_diff:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-pipeline-serialdiff-aggregation.html"),std_dev:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-extendedstats-aggregation.html"),sum:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-sum-aggregation.html"),top_hits:"".concat(ELASTICSEARCH_DOCS,"search-aggregations-metrics-top-hits-aggregation.html")},scriptedFields:{scriptFields:"".concat(ELASTICSEARCH_DOCS,"search-request-script-fields.html"),scriptAggs:"".concat(ELASTICSEARCH_DOCS,"search-aggregations.html#_values_source"),painless:"".concat(ELASTICSEARCH_DOCS,"modules-scripting-painless.html"),painlessApi:"".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/painless/").concat(DOC_LINK_VERSION,"/painless-api-reference.html"),painlessSyntax:"".concat(ELASTICSEARCH_DOCS,"modules-scripting-painless-syntax.html"),luceneExpressions:"".concat(ELASTICSEARCH_DOCS,"modules-scripting-expression.html")},indexPatterns:{loadingData:"".concat(ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(DOC_LINK_VERSION,"/tutorial-load-dataset.html"),introduction:"".concat(ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(DOC_LINK_VERSION,"/index-patterns.html")},kibana:"".concat(ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(DOC_LINK_VERSION,"/index.html"),siem:"".concat(ELASTIC_WEBSITE_URL,"guide/en/siem/guide/").concat(DOC_LINK_VERSION,"/index.html"),query:{luceneQuerySyntax:"".concat(ELASTICSEARCH_DOCS,"query-dsl-query-string-query.html#query-string-syntax"),queryDsl:"".concat(ELASTICSEARCH_DOCS,"query-dsl.html"),kueryQuerySyntax:"".concat(ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(DOC_LINK_VERSION,"/kuery-query.html")},date:{dateMath:"".concat(ELASTICSEARCH_DOCS,"common-options.html#date-math")}}})}}]);return DocLinksService}();exports.DocLinksService=DocLinksService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedObjectsBatchResponse",{enumerable:true,get:function get(){return _saved_objects_client.SavedObjectsBatchResponse}});Object.defineProperty(exports,"SavedObjectsBulkCreateObject",{enumerable:true,get:function get(){return _saved_objects_client.SavedObjectsBulkCreateObject}});Object.defineProperty(exports,"SavedObjectsBulkCreateOptions",{enumerable:true,get:function get(){return _saved_objects_client.SavedObjectsBulkCreateOptions}});Object.defineProperty(exports,"SavedObjectsClient",{enumerable:true,get:function get(){return _saved_objects_client.SavedObjectsClient}});Object.defineProperty(exports,"SavedObjectsClientContract",{enumerable:true,get:function get(){return _saved_objects_client.SavedObjectsClientContract}});Object.defineProperty(exports,"SavedObjectsCreateOptions",{enumerable:true,get:function get(){return _saved_objects_client.SavedObjectsCreateOptions}});Object.defineProperty(exports,"SavedObjectsFindResponsePublic",{enumerable:true,get:function get(){return _saved_objects_client.SavedObjectsFindResponsePublic}});Object.defineProperty(exports,"SavedObjectsUpdateOptions",{enumerable:true,get:function get(){return _saved_objects_client.SavedObjectsUpdateOptions}});Object.defineProperty(exports,"SimpleSavedObject",{enumerable:true,get:function get(){return _simple_saved_object.SimpleSavedObject}});Object.defineProperty(exports,"SavedObjectsStart",{enumerable:true,get:function get(){return _saved_objects_service.SavedObjectsStart}});Object.defineProperty(exports,"SavedObject",{enumerable:true,get:function get(){return _types.SavedObject}});Object.defineProperty(exports,"SavedObjectAttribute",{enumerable:true,get:function get(){return _types.SavedObjectAttribute}});Object.defineProperty(exports,"SavedObjectAttributes",{enumerable:true,get:function get(){return _types.SavedObjectAttributes}});Object.defineProperty(exports,"SavedObjectReference",{enumerable:true,get:function get(){return _types.SavedObjectReference}});Object.defineProperty(exports,"SavedObjectsBaseOptions",{enumerable:true,get:function get(){return _types.SavedObjectsBaseOptions}});Object.defineProperty(exports,"SavedObjectsFindOptions",{enumerable:true,get:function get(){return _types.SavedObjectsFindOptions}});Object.defineProperty(exports,"SavedObjectsMigrationVersion",{enumerable:true,get:function get(){return _types.SavedObjectsMigrationVersion}});var _saved_objects_client=__webpack_require__(508);var _simple_saved_object=__webpack_require__(510);var _saved_objects_service=__webpack_require__(511);var _types=__webpack_require__(502)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAutoCreateIndexError=isAutoCreateIndexError;exports.showAutoCreateIndexErrorPage=showAutoCreateIndexErrorPage;var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);var _routes=_interopRequireDefault(__webpack_require__(19));var _error_auto_create_index=_interopRequireDefault(__webpack_require__(866));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes.default.when("/error/action.auto_create_index",{template:_error_auto_create_index.default,k7Breadcrumbs:function k7Breadcrumbs(){return[{text:_i18n.i18n.translate("common.ui.errorAutoCreateIndex.breadcrumbs.errorText",{defaultMessage:"Error"})}]}});function isAutoCreateIndexError(error){return(0,_lodash.get)(error,"res.status")===503&&(0,_lodash.get)(error,"body.attributes.code")==="ES_AUTO_CREATE_INDEX_ERROR"}function showAutoCreateIndexErrorPage(){window.location.hash="/error/action.auto_create_index"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uiRoutes=void 0;var _route_manager=_interopRequireDefault(__webpack_require__(859));__webpack_require__(912);var _modules=__webpack_require__(6);var _route_setup_manager=__webpack_require__(509);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var defaultRouteManager=new _route_manager.default;var uiRoutes=Object.create(defaultRouteManager,{WAIT_FOR_URL_CHANGE_TOKEN:{value:_route_setup_manager.WAIT_FOR_URL_CHANGE_TOKEN},enable:{value:function value(){_modules.uiModules.get("kibana",["ngRoute"]).config(defaultRouteManager.config).run(defaultRouteManager.run)}}});exports.uiRoutes=uiRoutes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=RouteManager;var _lodash=__webpack_require__(1);var _wrap_route_with_prep=__webpack_require__(860);var _route_setup_manager=__webpack_require__(509);var _breadcrumbs=__webpack_require__(864);function RouteManager(){var _this=this;var self=this;var setup=new _route_setup_manager.RouteSetupManager;var when=[];var defaults=[];var otherwise;self.config=function($routeProvider){when.forEach(function(args){var path=args[0];var route=args[1]||{};defaults.forEach(function(def){if(def.regex.test(path)){(0,_lodash.defaultsDeep)(route,(0,_lodash.cloneDeep)(def.value))}});if(route.reloadOnSearch==null){route.reloadOnSearch=false}if(route.requireDefaultIndex==null){route.requireDefaultIndex=false}(0,_wrap_route_with_prep.wrapRouteWithPrep)(route,setup);$routeProvider.when(path,route)});if(otherwise){(0,_wrap_route_with_prep.wrapRouteWithPrep)(otherwise,setup);$routeProvider.otherwise(otherwise)}};self.run=function($location,$route,$injector){self.getBreadcrumbs=function(){var breadcrumbs=(0,_breadcrumbs.parsePathToBreadcrumbs)($location.path());var map=$route.current.mapBreadcrumbs;return map?$injector.invoke(map,null,{breadcrumbs:breadcrumbs}):breadcrumbs}};var wrapSetupAndChain=function wrapSetupAndChain(fn){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}fn.apply(setup,args);return _this};this.addSetupWork=(0,_lodash.wrap)(setup.addSetupWork,wrapSetupAndChain);this.afterSetupWork=(0,_lodash.wrap)(setup.afterSetupWork,wrapSetupAndChain);this.afterWork=(0,_lodash.wrap)(setup.afterWork,wrapSetupAndChain);self.when=function(path,route){when.push([path,route]);return self};self.defaults=function(regex,value){defaults.push({regex:regex,value:value});return self};self.otherwise=function(route){otherwise=route;return self};self.getBreadcrumbs=function(){return[]};self.RouteManager=RouteManager}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.wrapRouteWithPrep=wrapRouteWithPrep;var _angular=_interopRequireDefault(__webpack_require__(17));var _lodash=_interopRequireDefault(__webpack_require__(1));var _promises=__webpack_require__(57);var _work_queue=__webpack_require__(863);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function wrapRouteWithPrep(route,setup){if(!route.resolve&&route.redirectTo)return;var userWork=new _work_queue.WorkQueue;userWork.limit=_lodash.default.keys(route.resolve).length;var resolve={__prep__:function __prep__($injector){return $injector.invoke(setup.doWork,setup,{userWork:userWork})}};_lodash.default.forOwn(route.resolve||{},function(expr,name){resolve[name]=function($injector,Promise){var defer=(0,_promises.createDefer)(Promise);userWork.push(defer);return defer.promise.then(function(){return $injector[_angular.default.isString(expr)?"get":"invoke"](expr)})}});route.resolve=resolve}},function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.service("Promise",function($q,$timeout){function Promise(fn){if(typeof this==="undefined")throw new Error('Promise constructor must be called with "new"');var defer=$q.defer();try{fn(defer.resolve,defer.reject)}catch(e){defer.reject(e)}return defer.promise}Promise.all=Promise.props=$q.all;Promise.resolve=function(val){var defer=$q.defer();defer.resolve(val);return defer.promise};Promise.reject=function(reason){var defer=$q.defer();defer.reject(reason);return defer.promise};Promise.cast=$q.when;Promise.delay=function(ms){return $timeout(_lodash.default.noop,ms)};Promise.method=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return Promise.try(fn,args,this)}};Promise.nodeify=function(promise,cb){promise.then(function(val){cb(void 0,val)},cb)};Promise.map=function(arr,fn){return Promise.all(arr.map(function(i,el,list){return Promise.try(fn,[i,el,list])}))};Promise.each=function(arr,fn){var queue=arr.slice(0);var i=0;return function next(){if(!queue.length)return arr;return Promise.try(fn,[arr.shift(),i++]).then(next)}()};Promise.is=function(obj){return obj&&typeof obj.then==="function"};Promise.halt=_lodash.default.once(function(){var promise=new Promise(function(){});promise.then=_lodash.default.constant(promise);promise.catch=_lodash.default.constant(promise);return promise});Promise.try=function(fn,args,ctx){if(typeof fn!=="function"){return Promise.reject(new TypeError("fn must be a function"))}var value;if(Array.isArray(args)){try{value=fn.apply(ctx,args)}catch(e){return Promise.reject(e)}}else{try{value=fn.call(ctx,args)}catch(e){return Promise.reject(e)}}return Promise.resolve(value)};Promise.fromNode=function(takesCbFn){return new Promise(function(resolve,reject){takesCbFn(function(err){for(var _len=arguments.length,results=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){results[_key-1]=arguments[_key]}if(err)reject(err);else if(results.length>1)resolve(results);else resolve(results[0])})})};Promise.race=function(iterable){return new Promise(function(resolve,reject){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=iterable[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var i=_step.value;Promise.resolve(i).then(resolve,reject)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}})};return Promise})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createDefer=createDefer;function createDefer(Class){var defer={};defer.promise=new Class(function(resolve,reject){defer.resolve=resolve;defer.reject=reject});return defer}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkQueue=WorkQueue;function WorkQueue(){var q=this;var work=[];var fullDefers=[];q.limit=0;Object.defineProperty(q,"length",{get:function get(){return work.length}});var resolve=function resolve(defers){return defers.splice(0).map(function(defer){return defer.resolve()})};var checkIfFull=function checkIfFull(){if(work.length>=q.limit&&fullDefers.length){resolve(fullDefers)}};q.resolveWhenFull=function(defer){fullDefers.push(defer);checkIfFull()};q.doWork=function(){var resps=resolve(work);checkIfFull();return resps};q.empty=function(){work.splice(0);checkIfFull()};q.push=function(defer){work.push(defer);checkIfFull()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parsePathToBreadcrumbs=parsePathToBreadcrumbs;var _lodash=__webpack_require__(1);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function parsePathToBreadcrumbs(path){return(0,_lodash.trim)(path,"/").split("/").reduce(function(acc,id,i,parts){return[].concat(_toConsumableArray(acc),[{id:id,display:(0,_lodash.startCase)(id),href:i===0?"#/".concat(id):"".concat(acc[i-1].href,"/").concat(id),current:i===parts.length-1}])},[])}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(211)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="app-container kbnError--auto-create-index euiText">\n  <h3><icon aria-hidden="true" type="\'alert\'" color="\'danger\'"></icon>\n    <span\n      i18n-id="common.ui.errorAutoCreateIndex.errorTitle"\n      i18n-default-message="Oh no!">\n    </span>\n  </h3>\n\n  <p\n    i18n-id="common.ui.errorAutoCreateIndex.errorDescription"\n    i18n-default-message="It looks like your Elasticsearch cluster\'s {autoCreateIndexActionConfig} setting is\n    preventing Kibana from automatically creating an index to store saved objects. Kibana uses this\n    Elasticsearch feature because it is the best way to make sure that the saved object index uses\n    the correct mappings/schema, and it allows Kibana to poll Elasticsearch less often."\n    i18n-values="{ html_autoCreateIndexActionConfig: \'<code>action.auto_create_index</code>\' }"\n  ></p>\n\n  <p\n    i18n-id="common.ui.errorAutoCreateIndex.errorDisclaimer"\n    i18n-default-message="Unfortunately, until this issue is fixed you won\'t be able to save anything in Kibana."\n  ></p>\n\n  <h3\n    i18n-id="common.ui.errorAutoCreateIndex.howToFixErrorTitle"\n    i18n-default-message="Ok, how do I fix this?"\n  ></h3>\n  <ol>\n    <li\n      i18n-id="common.ui.errorAutoCreateIndex.howToFixError.removeConfigText"\n      i18n-default-message="Remove {autoCreateIndexActionConfig} from your Elasticsearch configuration file"\n      i18n-values="{ html_autoCreateIndexActionConfig: \'<code>action.auto_create_index: false</code>\' }"\n    ></li>\n    <li\n      i18n-id="common.ui.errorAutoCreateIndex.howToFixError.restartText"\n      i18n-default-message="Restart elasticsearch."\n    ></li>\n    <li \n      i18n-id="common.ui.errorAutoCreateIndex.howToFixError.goBackText"\n      i18n-default-message="Use the browser\'s back button to return to what you were doing."\n    ></li>\n  </ol>\n\n  <div class="kuiInfoPanel kuiInfoPanel--info kuiVerticalRhythm">\n    <div class="kuiInfoPanelHeader">\n      <span\n        class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--info fa-info"\n        aria-label="{{ ::\'common.ui.errorAutoCreateIndex.noteImageAriaLabel\' | i18n: {defaultMessage: \'Info\'} }}"\n        role="img"\n      ></span>\n      <span\n        class="kuiInfoPanelHeader__title"\n        i18n-id="common.ui.errorAutoCreateIndex.noteTitle"\n        i18n-default-message="Note:"\n      ></span>\n    </div>\n\n    <div class="kuiInfoPanelBody">\n      <div\n        class="kuiInfoPanelBody__message"\n        i18n-id="common.ui.errorAutoCreateIndex.noteMessage"\n        i18n-default-message="The {autoCreateIndexActionConfig} can also define a whitelist of patterns where this\n        feature should be enabled. We don\'t discuss how to use the setting that way here because it\n        requires knowing all of the other plugins/interactions that rely on the feature for the same\n        reasons that Kibana does."\n        i18n-values="{ html_autoCreateIndexActionConfig: \'<code>action.auto_create_index</code>\' }"\n      ></div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ContextService=void 0;var _context=__webpack_require__(386);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var ContextService=function(){function ContextService(core){_classCallCheck(this,ContextService);this.core=core}_createClass(ContextService,[{key:"setup",value:function setup(_ref){var _this=this;var pluginDependencies=_ref.pluginDependencies;return{createContextContainer:function createContextContainer(){return new _context.ContextContainer(pluginDependencies,_this.core.coreId)}}}}]);return ContextService}();exports.ContextService=ContextService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CoreSystem=void 0;__webpack_require__(869);var _chrome=__webpack_require__(478);var _fatal_errors=__webpack_require__(485);var _http=__webpack_require__(487);var _i18n=__webpack_require__(491);var _injected_metadata=__webpack_require__(492);var _legacy=__webpack_require__(870);var _notifications=__webpack_require__(493);var _overlays=__webpack_require__(496);var _plugins=__webpack_require__(499);var _ui_settings=__webpack_require__(503);var _application=__webpack_require__(505);var _utils=__webpack_require__(56);var _doc_links=__webpack_require__(507);var _rendering=__webpack_require__(1680);var _saved_objects_service=__webpack_require__(511);var _context3=__webpack_require__(512);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CoreSystem=function(){function CoreSystem(params){var _this=this;_classCallCheck(this,CoreSystem);_defineProperty(this,"fatalErrors",void 0);_defineProperty(this,"injectedMetadata",void 0);_defineProperty(this,"legacyPlatform",void 0);_defineProperty(this,"notifications",void 0);_defineProperty(this,"http",void 0);_defineProperty(this,"savedObjects",void 0);_defineProperty(this,"uiSettings",void 0);_defineProperty(this,"chrome",void 0);_defineProperty(this,"i18n",void 0);_defineProperty(this,"overlay",void 0);_defineProperty(this,"plugins",void 0);_defineProperty(this,"application",void 0);_defineProperty(this,"docLinks",void 0);_defineProperty(this,"rendering",void 0);_defineProperty(this,"context",void 0);_defineProperty(this,"rootDomElement",void 0);_defineProperty(this,"fatalErrorsSetup",null);var rootDomElement=params.rootDomElement,browserSupportsCsp=params.browserSupportsCsp,injectedMetadata=params.injectedMetadata,requireLegacyFiles=params.requireLegacyFiles,useLegacyTestHarness=params.useLegacyTestHarness;this.rootDomElement=rootDomElement;this.i18n=new _i18n.I18nService;this.injectedMetadata=new _injected_metadata.InjectedMetadataService({injectedMetadata:injectedMetadata});this.fatalErrors=new _fatal_errors.FatalErrorsService(rootDomElement,function(){_this.stop()});this.notifications=new _notifications.NotificationsService;this.http=new _http.HttpService;this.savedObjects=new _saved_objects_service.SavedObjectsService;this.uiSettings=new _ui_settings.UiSettingsService;this.overlay=new _overlays.OverlayService;this.application=new _application.ApplicationService;this.chrome=new _chrome.ChromeService({browserSupportsCsp:browserSupportsCsp});this.docLinks=new _doc_links.DocLinksService;this.rendering=new _rendering.RenderingService;var core={coreId:Symbol("core")};this.context=new _context3.ContextService(core);this.plugins=new _plugins.PluginsService(core,injectedMetadata.uiPlugins);this.legacyPlatform=new _legacy.LegacyPlatformService({requireLegacyFiles:requireLegacyFiles,useLegacyTestHarness:useLegacyTestHarness})}_createClass(CoreSystem,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var injectedMetadata,http,uiSettings,notifications,application,pluginDependencies,context,core,plugins;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;injectedMetadata=this.injectedMetadata.setup();this.fatalErrorsSetup=this.fatalErrors.setup({injectedMetadata:injectedMetadata,i18n:this.i18n.getContext()});http=this.http.setup({injectedMetadata:injectedMetadata,fatalErrors:this.fatalErrorsSetup});uiSettings=this.uiSettings.setup({http:http,injectedMetadata:injectedMetadata});notifications=this.notifications.setup({uiSettings:uiSettings});application=this.application.setup();pluginDependencies=this.plugins.getOpaqueIds();context=this.context.setup({pluginDependencies:pluginDependencies});core={application:application,context:context,fatalErrors:this.fatalErrorsSetup,http:http,injectedMetadata:injectedMetadata,notifications:notifications,uiSettings:uiSettings};_context.next=12;return this.plugins.setup(core);case 12:plugins=_context.sent;_context.next=15;return this.legacyPlatform.setup({core:core,plugins:(0,_utils.mapToObject)(plugins.contracts)});case 15:return _context.abrupt("return",{fatalErrors:this.fatalErrorsSetup});case 18:_context.prev=18;_context.t0=_context["catch"](0);if(this.fatalErrorsSetup){this.fatalErrorsSetup.add(_context.t0)}else{console.log(_context.t0)}case 21:case"end":return _context.stop()}}},_callee,this,[[0,18]])}));function setup(){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function(){var _start=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var injectedMetadata,uiSettings,docLinks,http,savedObjects,i18n,application,coreUiTargetDomElement,notificationsTargetDomElement,overlayTargetDomElement,overlays,notifications,chrome,core,plugins,rendering;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return this.injectedMetadata.start();case 3:injectedMetadata=_context2.sent;_context2.next=6;return this.uiSettings.start();case 6:uiSettings=_context2.sent;_context2.next=9;return this.docLinks.start({injectedMetadata:injectedMetadata});case 9:docLinks=_context2.sent;_context2.next=12;return this.http.start({injectedMetadata:injectedMetadata,fatalErrors:this.fatalErrorsSetup});case 12:http=_context2.sent;_context2.next=15;return this.savedObjects.start({http:http});case 15:savedObjects=_context2.sent;_context2.next=18;return this.i18n.start();case 18:i18n=_context2.sent;_context2.next=21;return this.application.start({injectedMetadata:injectedMetadata});case 21:application=_context2.sent;coreUiTargetDomElement=document.createElement("div");coreUiTargetDomElement.id="kibana-body";notificationsTargetDomElement=document.createElement("div");overlayTargetDomElement=document.createElement("div");this.rootDomElement.textContent="";this.rootDomElement.classList.add("coreSystemRootDomElement");this.rootDomElement.appendChild(coreUiTargetDomElement);this.rootDomElement.appendChild(notificationsTargetDomElement);this.rootDomElement.appendChild(overlayTargetDomElement);overlays=this.overlay.start({i18n:i18n,targetDomElement:overlayTargetDomElement,uiSettings:uiSettings});_context2.next=34;return this.notifications.start({i18n:i18n,overlays:overlays,targetDomElement:notificationsTargetDomElement});case 34:notifications=_context2.sent;_context2.next=37;return this.chrome.start({application:application,docLinks:docLinks,http:http,injectedMetadata:injectedMetadata,notifications:notifications});case 37:chrome=_context2.sent;core={application:application,chrome:chrome,docLinks:docLinks,http:http,savedObjects:savedObjects,i18n:i18n,injectedMetadata:injectedMetadata,notifications:notifications,overlays:overlays,uiSettings:uiSettings};_context2.next=41;return this.plugins.start(core);case 41:plugins=_context2.sent;rendering=this.rendering.start({chrome:chrome,targetDomElement:coreUiTargetDomElement});_context2.next=45;return this.legacyPlatform.start({core:core,plugins:(0,_utils.mapToObject)(plugins.contracts),targetDomElement:rendering.legacyTargetDomElement});case 45:_context2.next=50;break;case 47:_context2.prev=47;_context2.t0=_context2["catch"](0);if(this.fatalErrorsSetup){this.fatalErrorsSetup.add(_context2.t0)}else{console.error(_context2.t0)}case 50:case"end":return _context2.stop()}}},_callee2,this,[[0,47]])}));function start(){return _start.apply(this,arguments)}return start}()},{key:"stop",value:function stop(){this.legacyPlatform.stop();this.plugins.stop();this.notifications.stop();this.http.stop();this.uiSettings.stop();this.chrome.stop();this.i18n.stop();this.rootDomElement.textContent=""}}]);return CoreSystem}();exports.CoreSystem=CoreSystem},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"LegacyPlatformService",{enumerable:true,get:function get(){return _legacy_service.LegacyPlatformService}});Object.defineProperty(exports,"LegacyPlatformParams",{enumerable:true,get:function get(){return _legacy_service.LegacyPlatformParams}});var _legacy_service=__webpack_require__(871)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LegacyPlatformService=void 0;var _angular=_interopRequireDefault(__webpack_require__(17));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var LegacyPlatformService=function(){function LegacyPlatformService(params){_classCallCheck(this,LegacyPlatformService);this.params=params;_defineProperty(this,"bootstrapModule",void 0);_defineProperty(this,"targetDomElement",void 0)}_createClass(LegacyPlatformService,[{key:"setup",value:function setup(_ref){var core=_ref.core,plugins=_ref.plugins;__webpack_require__(8).__setup__(core,plugins);core.injectedMetadata.getLegacyMetadata().nav.forEach(function(navLink){return core.application.registerLegacyApp({id:navLink.id,order:navLink.order,title:navLink.title,euiIconType:navLink.euiIconType,icon:navLink.icon,appUrl:navLink.url,subUrlBase:navLink.subUrlBase,linkToLastSubUrl:navLink.linkToLastSubUrl})})}},{key:"start",value:function start(_ref2){var core=_ref2.core,targetDomElement=_ref2.targetDomElement,plugins=_ref2.plugins;__webpack_require__(8).__start__(core,plugins);this.bootstrapModule=this.loadBootstrapModule();this.params.requireLegacyFiles();if(!this.bootstrapModule){throw new Error("Bootstrap module must be loaded before `start`")}this.targetDomElement=targetDomElement;this.bootstrapModule.bootstrap(this.targetDomElement)}},{key:"stop",value:function stop(){if(!this.targetDomElement){return}var angularRoot=_angular.default.element(this.targetDomElement);var injector$=angularRoot.injector();if(!injector$){return}injector$.get("$rootScope").$destroy();this.targetDomElement.textContent=""}},{key:"loadBootstrapModule",value:function loadBootstrapModule(){if(this.params.useLegacyTestHarness){if(false){}throw new Error("tests bundle is not available in the distributable")}return __webpack_require__(7)}}]);return LegacyPlatformService}();exports.LegacyPlatformService=LegacyPlatformService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.__reset__=__reset__;exports.__setup__=__setup__;exports.__start__=__start__;exports.npStart=exports.npSetup=void 0;var npSetup={core:null,plugins:{}};exports.npSetup=npSetup;var npStart={core:null,plugins:{}};exports.npStart=npStart;function __reset__(){npSetup.core=null;npSetup.plugins={};npStart.core=null;npStart.plugins={}}function __setup__(coreSetup,plugins){npSetup.core=coreSetup;npSetup.plugins=plugins}function __start__(coreStart,plugins){npStart.core=coreStart;npStart.plugins=plugins}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.chrome=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _angular=_interopRequireDefault(__webpack_require__(17));var _metadata=__webpack_require__(513);__webpack_require__(514);__webpack_require__(395);__webpack_require__(9);__webpack_require__(525);__webpack_require__(57);__webpack_require__(97);__webpack_require__(527);__webpack_require__(910);__webpack_require__(528);__webpack_require__(11);var _angular2=__webpack_require__(913);var _apps=_interopRequireDefault(__webpack_require__(935));var _controls=__webpack_require__(936);var _nav=__webpack_require__(937);var _badge=__webpack_require__(941);var _breadcrumbs=__webpack_require__(942);var _template=_interopRequireDefault(__webpack_require__(943));var _theme=__webpack_require__(944);var _xsrf=__webpack_require__(945);var _ui_settings=__webpack_require__(946);var _loading_count=__webpack_require__(947);var _saved_object_client=__webpack_require__(948);var _base_path=__webpack_require__(949);var _injected_vars=__webpack_require__(950);var _help_extension=__webpack_require__(951);var _new_platform=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var chrome={};exports.chrome=chrome;var internals=_lodash.default.defaults(_lodash.default.cloneDeep(_metadata.metadata),{basePath:"",rootController:null,rootTemplate:null,showAppsLink:null,xsrfToken:null,devMode:true,brand:null,nav:[],applicationClasses:[]});(0,_ui_settings.initUiSettingsApi)(chrome);(0,_saved_object_client.initSavedObjectClient)(chrome);(0,_apps.default)(chrome,internals);(0,_xsrf.initChromeXsrfApi)(chrome,internals);(0,_base_path.initChromeBasePathApi)(chrome);(0,_injected_vars.initChromeInjectedVarsApi)(chrome);(0,_nav.initChromeNavApi)(chrome,internals);(0,_badge.initChromeBadgeApi)(chrome);(0,_breadcrumbs.initBreadcrumbsApi)(chrome,internals);(0,_loading_count.initLoadingCountApi)(chrome,internals);(0,_help_extension.initHelpExtensionApi)(chrome,internals);(0,_angular2.initAngularApi)(chrome,internals);(0,_controls.initChromeControlsApi)(chrome);(0,_template.default)(chrome,internals);(0,_theme.initChromeThemeApi)(chrome);_new_platform.npStart.core.chrome.setAppTitle(chrome.getAppTitle());var waitForBootstrap=new Promise(function(resolve){chrome.bootstrap=function(targetDomElement){__webpack_require__(952);__webpack_require__(953);document.body.setAttribute("id","".concat(internals.app.id,"-app"));chrome.setupAngular();targetDomElement.setAttribute("kbn-chrome","true");targetDomElement.setAttribute("ng-class","{ 'hidden-chrome': !chrome.getVisible() }");targetDomElement.className="app-wrapper";_angular.default.bootstrap(targetDomElement,["kibana"]);resolve(targetDomElement)}});chrome.dangerouslyGetActiveInjector=function(){return waitForBootstrap.then(function(targetDomElement){var $injector=_angular.default.element(targetDomElement).injector();if(!$injector){return Promise.reject("targetDomElement had no angular context after bootstrapping")}return $injector})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryString=void 0;var _utils=__webpack_require__(339);var QueryString={};exports.QueryString=QueryString;function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}QueryString.decode=function(keyValue){var obj={};var keyValueParts;var key;(keyValue||"").split("&").forEach(function(keyValue){if(keyValue){keyValueParts=keyValue.split("=");key=tryDecodeURIComponent(keyValueParts[0]);if(key!==void 0){var val=keyValueParts[1]!==void 0?tryDecodeURIComponent(keyValueParts[1]):true;if(!obj[key]){obj[key]=val}else if(Array.isArray(obj[key])){obj[key].push(val)}else{obj[key]=[obj[key],val]}}}});return obj};QueryString.encode=function(obj){var parts=[];var keys=Object.keys(obj).sort();keys.forEach(function(key){var value=obj[key];if(Array.isArray(value)){value.forEach(function(arrayValue){parts.push(QueryString.param(key,arrayValue))})}else{parts.push(QueryString.param(key,value))}});return parts.length?parts.join("&"):""};QueryString.param=function(key,val){return(0,_utils.encodeQueryComponent)(key,true)+(val===true?"":"="+(0,_utils.encodeQueryComponent)(val,true))};QueryString.findInUrl=function(url){var qsStart=url.indexOf("?");var hashStart=url.lastIndexOf("#");if(hashStart===-1){hashStart=url.length}if(qsStart===-1){qsStart=hashStart}return{start:qsStart,end:hashStart}};QueryString.replaceParamInUrl=function(url,param,newVal){var loc=QueryString.findInUrl(url);var parsed=QueryString.decode(url.substring(loc.start+1,loc.end));if(newVal!=null){parsed[param]=newVal}else{delete parsed[param]}var chars=url.split("");chars.splice(loc.start,loc.end-loc.start,"?"+QueryString.encode(parsed));return chars.join("")}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.BinderFor=void 0;var _binder=__webpack_require__(388);var BinderFor=function(_binder$BinderBase){_inherits(BinderFor,_binder$BinderBase);function BinderFor(emitter){var _this;_classCallCheck(this,BinderFor);_this=_possibleConstructorReturn(this,_getPrototypeOf(BinderFor).call(this));_this.emitter=emitter;return _this}_createClass(BinderFor,[{key:"on",value:function on(){var _get2;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}(_get2=_get(_getPrototypeOf(BinderFor.prototype),"on",this)).call.apply(_get2,[this,this.emitter].concat(args))}}]);return BinderFor}(_binder.BinderBase);exports.BinderFor=BinderFor},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:true});exports.deepCloneWithBuffers=deepCloneWithBuffers;var _lodash=__webpack_require__(1);function cloneBuffersCustomizer(val){if(Buffer.isBuffer(val)){return new Buffer(val)}}function deepCloneWithBuffers(val){return(0,_lodash.cloneDeep)(val,cloneBuffersCustomizer)}}).call(this,__webpack_require__(121).Buffer)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromRoot=fromRoot;var _path=__webpack_require__(516);var _package_json=__webpack_require__(389);function fromRoot(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return(0,_path.resolve).apply(void 0,[_package_json.pkg.__dirname].concat(args))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unset=unset;var _lodash=_interopRequireDefault(__webpack_require__(1));var _toPath=_interopRequireDefault(__webpack_require__(530));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function unset(object,rawPath){if(!object)return;var path=(0,_toPath.default)(rawPath);switch(path.length){case 0:return;case 1:delete object[rawPath];break;default:var leaf=path.pop();var parentPath=path.slice();var parent=_lodash.default.get(object,parentPath);unset(parent,leaf);if(!_lodash.default.size(parent)){unset(object,parentPath)}break}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.encodeQueryComponent=encodeQueryComponent;function encodeQueryComponent(val){var pctEncodeSpaces=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}},function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});exports.watchStdioForLine=watchStdioForLine;var _stream=__webpack_require__(62);var _streams=__webpack_require__(518);function skipLastEmptyLineStream(){var skippedEmptyLine=false;return new _stream.Transform({objectMode:true,transform:function transform(line,enc,cb){if(skippedEmptyLine){this.push("");skippedEmptyLine=false}if(line===""){skippedEmptyLine=true;return cb()}else{return cb(null,line)}}})}function watchStdioForLine(_x,_x2,_x3){return _watchStdioForLine.apply(this,arguments)}function _watchStdioForLine(){_watchStdioForLine=_asyncToGenerator(regeneratorRuntime.mark(function _callee(proc,logFn,exitAfter){var onLogLine;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:onLogLine=function _ref(line){logFn(line);if(exitAfter&&exitAfter.test(line)){proc.kill("SIGINT")}};_context.next=3;return Promise.all([proc.catch(function(error){if(error.signal!=="SIGINT"){throw error}}),(0,_streams.createPromiseFromStreams)([proc.stdout,(0,_streams.createSplitStream)("\n"),skipLastEmptyLineStream(),(0,_streams.createMapStream)(onLogLine)]),(0,_streams.createPromiseFromStreams)([proc.stderr,(0,_streams.createSplitStream)("\n"),skipLastEmptyLineStream(),(0,_streams.createMapStream)(onLogLine)])]);case 3:case"end":return _context.stop()}}},_callee)}));return _watchStdioForLine.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.concatStreamProviders=concatStreamProviders;var _stream=__webpack_require__(62);function concatStreamProviders(sourceProviders){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var destination=new _stream.PassThrough(options);var queue=sourceProviders.slice();(function pipeNext(){var provider=queue.shift();if(!provider){return}var source=provider();var isLast=!queue.length;if(!isLast){source.once("end",pipeNext)}source.once("error",function(error){return destination.emit("error",error)}).pipe(destination,{end:isLast})})();return destination}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createIntersperseStream=createIntersperseStream;var _stream=__webpack_require__(62);function createIntersperseStream(intersperseChunk){var first=true;return new _stream.Transform({writableObjectMode:true,readableObjectMode:true,transform:function transform(chunk,enc,callback){try{if(first){first=false}else{this.push(intersperseChunk)}this.push(chunk);callback(null)}catch(err){callback(err)}}})}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:true});exports.createSplitStream=createSplitStream;var _stream=__webpack_require__(62);function createSplitStream(splitChunk){var unsplitBuffer=Buffer.alloc(0);return new _stream.Transform({writableObjectMode:false,readableObjectMode:true,transform:function transform(chunk,enc,callback){try{var i;var toSplit=Buffer.concat([unsplitBuffer,chunk]);while((i=toSplit.indexOf(splitChunk))!==-1){var slice=toSplit.slice(0,i);toSplit=toSplit.slice(i+splitChunk.length);this.push(slice.toString("utf8"))}unsplitBuffer=toSplit;callback(null)}catch(err){callback(err)}},flush:function flush(callback){try{this.push(unsplitBuffer.toString("utf8"));callback(null)}catch(err){callback(err)}}})}}).call(this,__webpack_require__(121).Buffer)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createListStream=createListStream;var _stream=__webpack_require__(62);function createListStream(){var items=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var queue=[].concat(items);return new _stream.Readable({objectMode:true,read:function read(size){var _this=this;queue.splice(0,size).forEach(function(item){_this.push(item)});if(!queue.length){this.push(null)}}})}},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});exports.createPromiseFromStreams=createPromiseFromStreams;var _stream=__webpack_require__(62);function createPromiseFromStreams(_x){return _createPromiseFromStreams.apply(this,arguments)}function _createPromiseFromStreams(){_createPromiseFromStreams=_asyncToGenerator(regeneratorRuntime.mark(function _callee(streams){var finalChunk,last;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:last=streams[streams.length-1];if(!(typeof last.read!=="function"&&streams.length===1)){_context.next=3;break}throw new Error("A minimum of 2 streams is required when a non-readable stream is given");case 3:if(typeof last.read==="function"){streams.push(new _stream.Writable({objectMode:true,write:function write(chunk,enc,done){finalChunk=chunk;done()}}))}return _context.abrupt("return",new Promise(function(resolve,reject){(0,_stream.pipeline).apply(void 0,_toConsumableArray(streams).concat([function(err){if(err)return reject(err);resolve(finalChunk)}]))}));case 5:case"end":return _context.stop()}}},_callee)}));return _createPromiseFromStreams.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createConcatStream=createConcatStream;var _reduce_stream=__webpack_require__(519);function createConcatStream(initial){return(0,_reduce_stream.createReduceStream)(function(acc,chunk){return acc.concat(chunk)},initial)}},function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});exports.createMapStream=createMapStream;var _stream=__webpack_require__(62);function createMapStream(fn){var i=0;return new _stream.Transform({objectMode:true,transform:function(){var _transform=_asyncToGenerator(regeneratorRuntime.mark(function _callee(value,enc,done){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.t0=this;_context.next=4;return fn(value,i++);case 4:_context.t1=_context.sent;_context.t0.push.call(_context.t0,_context.t1);done();_context.next=12;break;case 9:_context.prev=9;_context.t2=_context["catch"](0);done(_context.t2);case 12:case"end":return _context.stop()}}},_callee,this,[[0,9]])}));function transform(_x,_x2,_x3){return _transform.apply(this,arguments)}return transform}()})}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});exports.createReplaceStream=createReplaceStream;var _stream=__webpack_require__(62);function createReplaceStream(toReplace,replacement){if(typeof toReplace!=="string"){throw new TypeError("toReplace must be a string")}var buffer=Buffer.alloc(0);return new _stream.Transform({objectMode:false,transform:function(){var _transform=_asyncToGenerator(regeneratorRuntime.mark(function _callee(value,enc,done){var index;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;buffer=Buffer.concat([buffer,value],buffer.length+value.length);case 2:if(false){}index=buffer.indexOf(toReplace);if(!(index===-1)){_context.next=6;break}return _context.abrupt("break",11);case 6:this.push(buffer.slice(0,index));this.push(replacement);buffer=buffer.slice(index+toReplace.length);_context.next=2;break;case 11:if(buffer.length>toReplace.length){this.push(buffer.slice(0,buffer.length-toReplace.length));buffer=buffer.slice(-toReplace.length)}done();_context.next=18;break;case 15:_context.prev=15;_context.t0=_context["catch"](0);done(_context.t0);case 18:case"end":return _context.stop()}}},_callee,this,[[0,15]])}));function transform(_x,_x2,_x3){return _transform.apply(this,arguments)}return transform}(),flush:function flush(callback){if(buffer.length){this.push(buffer)}buffer=null;callback()}})}}).call(this,__webpack_require__(121).Buffer)},function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterStream=createFilterStream;var _stream=__webpack_require__(62);function createFilterStream(fn){return new _stream.Transform({objectMode:true,transform:function(){var _transform=_asyncToGenerator(regeneratorRuntime.mark(function _callee(obj,enc,done){var canPushDownStream;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:canPushDownStream=fn(obj);if(canPushDownStream){this.push(obj)}done();case 3:case"end":return _context.stop()}}},_callee,this)}));function transform(_x,_x2,_x3){return _transform.apply(this,arguments)}return transform}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IS_KIBANA_RELEASE=exports.IS_KIBANA_DISTRIBUTABLE=void 0;var _package_json=__webpack_require__(389);var IS_KIBANA_DISTRIBUTABLE=_package_json.pkg.build&&_package_json.pkg.build.distributable===true;exports.IS_KIBANA_DISTRIBUTABLE=IS_KIBANA_DISTRIBUTABLE;var IS_KIBANA_RELEASE=_package_json.pkg.build&&_package_json.pkg.build.release===true;exports.IS_KIBANA_RELEASE=IS_KIBANA_RELEASE},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"parseCommaSeparatedList",{enumerable:true,get:function get(){return _comma_separated_list.parseCommaSeparatedList}});Object.defineProperty(exports,"formatListAsProse",{enumerable:true,get:function get(){return _prose.formatListAsProse}});var _comma_separated_list=__webpack_require__(892);var _prose=__webpack_require__(893)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseCommaSeparatedList=parseCommaSeparatedList;function parseCommaSeparatedList(input){if(Array.isArray(input)){return input}return String(input||"").split(",").map(function(word){return word.trim()}).filter(Boolean)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatListAsProse=formatListAsProse;function formatListAsProse(list){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _options$inclusive=options.inclusive,inclusive=_options$inclusive===void 0?true:_options$inclusive;if(!Array.isArray(list)){throw new TypeError("formatListAsProse() requires an array")}var count=list.length;var conjunction=inclusive?"and":"or";if(count<=2){return list.join(" ".concat(conjunction," "))}return list.slice(0,-1).concat("".concat(conjunction," ").concat(list[count-1])).join(", ")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyDiff=applyDiff;var _lodash=_interopRequireDefault(__webpack_require__(1));var _angular=_interopRequireDefault(__webpack_require__(17));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function applyDiff(target,source){var diff={};var filterPrivateAndMethods=function filterPrivateAndMethods(obj){return function(key){if(_lodash.default.isFunction(obj[key]))return false;if(key.charAt(0)==="$")return false;return key.charAt(0)!=="_"}};var targetKeys=_lodash.default.keys(target).filter(filterPrivateAndMethods(target));var sourceKeys=_lodash.default.keys(source).filter(filterPrivateAndMethods(source));diff.removed=_lodash.default.difference(targetKeys,sourceKeys);diff.added=_lodash.default.difference(sourceKeys,targetKeys);diff.changed=_lodash.default.filter(sourceKeys,function(key){return!_angular.default.equals(target[key],source[key])});diff.keys=_lodash.default.union(diff.changed,diff.removed,diff.added);_lodash.default.each(diff.removed,function(key){delete target[key]});_lodash.default.assign(target,_lodash.default.pick(source,diff.changed));_lodash.default.assign(target,_lodash.default.pick(source,diff.added));return diff}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toastNotifications=void 0;var _new_platform=__webpack_require__(8);var _toast_notifications=__webpack_require__(524);var toastNotifications=new _toast_notifications.ToastNotifications(_new_platform.npSetup.core.notifications.toasts);exports.toastNotifications=toastNotifications},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"banners",{enumerable:true,get:function get(){return _banners.banners}});var _banners=__webpack_require__(897)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.banners=exports.Banners=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(13));var _new_platform=__webpack_require__(8);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var npBanners=_new_platform.npStart.core.overlays.banners;var mountForComponent=function mountForComponent(component){return function(element){_reactDom.default.render(_react.default.createElement(_react2.I18nProvider,null,component),element);return function(){return _reactDom.default.unmountComponentAtNode(element)}}};var Banners=function Banners(){_classCallCheck(this,Banners);_defineProperty(this,"add",function(_ref){var component=_ref.component,priority=_ref.priority;return npBanners.add(mountForComponent(component),priority)});_defineProperty(this,"remove",function(id){return npBanners.remove(id)});_defineProperty(this,"set",function(_ref2){var component=_ref2.component,id=_ref2.id,_ref2$priority=_ref2.priority,priority=_ref2$priority===void 0?0:_ref2$priority;return npBanners.replace(id,mountForComponent(component),priority)})};exports.Banners=Banners;var banners=new Banners;exports.banners=banners},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"addAppRedirectMessageToUrl",{enumerable:true,get:function get(){return _app_redirect.addAppRedirectMessageToUrl}});Object.defineProperty(exports,"showAppRedirectNotification",{enumerable:true,get:function get(){return _app_redirect.showAppRedirectNotification}});var _app_redirect=__webpack_require__(899)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addAppRedirectMessageToUrl=addAppRedirectMessageToUrl;exports.showAppRedirectNotification=showAppRedirectNotification;var _utils=__webpack_require__(56);var _toasts=__webpack_require__(523);var APP_REDIRECT_MESSAGE_PARAM="app_redirect_message";function addAppRedirectMessageToUrl(url,message){return(0,_utils.modifyUrl)(url,function(urlParts){urlParts.hash=(0,_utils.modifyUrl)(urlParts.hash||"",function(hashParts){hashParts.query[APP_REDIRECT_MESSAGE_PARAM]=message})})}function showAppRedirectNotification($location){var queryString=$location.search();if(!queryString[APP_REDIRECT_MESSAGE_PARAM]){return}var message=queryString[APP_REDIRECT_MESSAGE_PARAM];$location.search(APP_REDIRECT_MESSAGE_PARAM,null);_toasts.toastNotifications.addDanger(message)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseObject=void 0;var _angular=_interopRequireDefault(__webpack_require__(17));var _lodash=_interopRequireDefault(__webpack_require__(1));var _risonNode=_interopRequireDefault(__webpack_require__(67));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var BaseObject=function(){function BaseObject(){var attributes=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,BaseObject);_lodash.default.assign(this,attributes)}_createClass(BaseObject,[{key:"toObject",value:function toObject(){return _lodash.default.omit(this,function(value,key){return key.charAt(0)==="$"||key.charAt(0)==="_"||_lodash.default.isFunction(value)})}},{key:"toRISON",value:function toRISON(){return _risonNode.default.encode(JSON.parse(_angular.default.toJson(this)))}},{key:"toJSON",value:function toJSON(){return this.toObject()}}]);return BaseObject}();exports.BaseObject=BaseObject},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);var _temp;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}_modules.uiModules.get("kibana/state_management").provider("stateManagementConfig",(_temp=function(){function StateManagementConfigProvider(){_classCallCheck(this,StateManagementConfigProvider);_defineProperty(this,"_enabled",true)}_createClass(StateManagementConfigProvider,[{key:"$get",value:function $get(){return{enabled:this._enabled}}},{key:"disable",value:function disable(){this._enabled=false}},{key:"enable",value:function enable(){this._enabled=true}}]);return StateManagementConfigProvider}(),_temp))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"HashedItemStoreSingleton",{enumerable:true,get:function get(){return _hashed_item_store_singleton.HashedItemStoreSingleton}});Object.defineProperty(exports,"createStateHash",{enumerable:true,get:function get(){return _state_hash.createStateHash}});Object.defineProperty(exports,"isStateHash",{enumerable:true,get:function get(){return _state_hash.isStateHash}});var _hashed_item_store_singleton=__webpack_require__(903);var _state_hash=__webpack_require__(905)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HashedItemStoreSingleton=void 0;var _hashed_item_store=__webpack_require__(904);var HashedItemStoreSingleton=new _hashed_item_store.HashedItemStore(window.sessionStorage);exports.HashedItemStoreSingleton=HashedItemStoreSingleton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HashedItemStore=void 0;var _lodash=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var HashedItemStore=function(){function HashedItemStore(sessionStorage){_classCallCheck(this,HashedItemStore);this._sessionStorage=sessionStorage;this._indexedItems=[];var persistedItemIndex=this._sessionStorage.getItem(HashedItemStore.PERSISTED_INDEX_KEY);if(persistedItemIndex){this._indexedItems=(0,_lodash.sortBy)(JSON.parse(persistedItemIndex)||[],"touched")}}_createClass(HashedItemStore,[{key:"setItem",value:function setItem(hash,item){var isItemPersisted=this._persistItem(hash,item);if(isItemPersisted){this._touchHash(hash)}return isItemPersisted}},{key:"getItem",value:function getItem(hash){var item=this._sessionStorage.getItem(hash);if(item!==null){this._touchHash(hash)}return item}},{key:"_getIndexedItem",value:function _getIndexedItem(hash){return this._indexedItems.find(function(indexedItem){return indexedItem.hash===hash})}},{key:"_persistItem",value:function _persistItem(hash,item){try{this._sessionStorage.setItem(hash,item);return true}catch(e){if(this._indexedItems.length===0){return false}this._removeOldestItem();return this._persistItem(hash,item)}}},{key:"_removeOldestItem",value:function _removeOldestItem(){var oldestIndexedItem=this._indexedItems.shift();this._sessionStorage.removeItem(oldestIndexedItem.hash)}},{key:"_touchHash",value:function _touchHash(hash){var indexedItem=this._getIndexedItem(hash)||{hash:hash};indexedItem.touched=Date.now();(0,_lodash.pull)(this._indexedItems,indexedItem);this._indexedItems.push(indexedItem);this._sessionStorage.setItem(HashedItemStore.PERSISTED_INDEX_KEY,JSON.stringify(this._indexedItems))}}]);return HashedItemStore}();exports.HashedItemStore=HashedItemStore;HashedItemStore.PERSISTED_INDEX_KEY="kbn.hashedItemsIndex.v1"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createStateHash=createStateHash;exports.isStateHash=isStateHash;var _utils=__webpack_require__(387);var HASH_PREFIX="h@";function createStateHash(json,existingJsonProvider){if(typeof json!=="string"){throw new Error("createHash only accepts strings (JSON).")}var hash=(new _utils.Sha256).update(json,"utf8").digest("hex");var shortenedHash;for(var i=7;i<hash.length;i++){shortenedHash=hash.slice(0,i);var existingJson=existingJsonProvider(shortenedHash);if(existingJson===null||existingJson===json)break}return"".concat(HASH_PREFIX).concat(shortenedHash)}function isStateHash(str){return String(str).indexOf(HASH_PREFIX)===0}},function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(17));var _chrome=_interopRequireDefault(__webpack_require__(7));var _lodash=__webpack_require__(1);var _modules=__webpack_require__(6);var _subscribe_with_scope=__webpack_require__(96);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana/config");_module.service("config",function($rootScope,Promise){var _this=this;var uiSettings=_chrome.default.getUiSettingsClient();this.getAll=function(){return uiSettings.getAll.apply(uiSettings,arguments)};this.get=function(){return uiSettings.get.apply(uiSettings,arguments)};this.isDeclared=function(){return uiSettings.isDeclared.apply(uiSettings,arguments)};this.isDefault=function(){return uiSettings.isDefault.apply(uiSettings,arguments)};this.isCustom=function(){return uiSettings.isCustom.apply(uiSettings,arguments)};this.isOverridden=function(){return uiSettings.isOverridden.apply(uiSettings,arguments)};this.remove=function(key){return Promise.resolve(uiSettings.remove(key))};this.set=function(key,value){return Promise.resolve(uiSettings.set(key,(0,_lodash.isPlainObject)(value)?_angular.default.toJson(value):value))};var subscription=(0,_subscribe_with_scope.subscribeWithScope)($rootScope,uiSettings.getUpdate$(),{next:function next(_ref){var key=_ref.key,newValue=_ref.newValue,oldValue=_ref.oldValue;$rootScope.$broadcast("change:config",newValue,oldValue,key,_this);$rootScope.$broadcast("change:config.".concat(key),newValue,oldValue,key,_this)}});$rootScope.$on("$destroy",function(){return subscription.unsubscribe()});this.watchAll=function(handler){var scope=arguments.length>1&&arguments[1]!==undefined?arguments[1]:$rootScope;handler(null,null,null,this);return scope.$on("change:config",function(event){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}handler.apply(void 0,args)})};this.watch=function(key,handler){var scope=arguments.length>2&&arguments[2]!==undefined?arguments[2]:$rootScope;if(!this.isDeclared(key)){throw new Error('Unexpected `config.watch("'.concat(key,'", fn)` call on unrecognized configuration setting "').concat(key,'".\nSetting an initial value via `config.set("').concat(key,'", value)` before binding\nany custom setting configuration watchers for "').concat(key,'" may fix this issue.'))}handler(this.get(key),null,key,uiSettings);return scope.$on("change:config.".concat(key),function(event){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2]}handler.apply(void 0,args)})};this.bindToScope=function(scope,key){var property=arguments.length>2&&arguments[2]!==undefined?arguments[2]:key;var onUpdate=function onUpdate(newVal){scope[property]=newVal};return this.watch(key,onUpdate,scope)}})},function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var nextId=_lodash.default.partial(_lodash.default.uniqueId,"privateProvider#");function name(fn){return fn.name||fn.toString().split("\n").shift()}_modules.uiModules.get("kibana/private").provider("Private",function(){var provider=this;var cache={};var swaps={};function identify(fn){if(typeof fn!=="function"){throw new TypeError('Expected private module "'+fn+'" to be a function')}if(fn.$$id)return fn.$$id;else return fn.$$id=nextId()}provider.stub=function(fn,instance){cache[identify(fn)]=instance;return instance};provider.swap=function(fn,prov){var id=identify(fn);swaps[id]=prov};provider.$get=["$injector",function PrivateFactory($injector){var privPath=[];var pathToString=function pathToString(){return privPath.map(name).join(" -> ")};function instantiate(prov,locals){if(~privPath.indexOf(prov)){throw new Error('Circular reference to "'+name(prov)+'"'+" found while resolving private deps: "+pathToString())}privPath.push(prov);var context={};var instance=$injector.invoke(prov,context,locals);if(!_lodash.default.isObject(instance))instance=context;privPath.pop();return instance}function get(id,prov,$delegateId,$delegateProv){if(cache[id])return cache[id];var instance;if($delegateId!=null&&$delegateProv!=null){instance=instantiate(prov,{$decorate:_lodash.default.partial(get,$delegateId,$delegateProv)})}else{instance=instantiate(prov)}return cache[id]=instance}function Private(prov){var id=identify(prov);var $delegateId;var $delegateProv;if(swaps[id]){$delegateId=id;$delegateProv=prov;prov=swaps[$delegateId];id=identify(prov)}return get(id,prov,$delegateId,$delegateProv)}Private.stub=provider.stub;Private.swap=provider.swap;return Private}]})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);var _storage=__webpack_require__(526);var createService=function createService(type){return function($window){return new _storage.Storage($window[type])}};_modules.uiModules.get("kibana/storage").service("localStorage",createService("localStorage")).service("sessionStorage",createService("sessionStorage"))},function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(6);var _function=__webpack_require__(394);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").config(function($provide){$provide.decorator("$rootScope",function($delegate){$delegate.constructor.prototype.$watchMulti=function(expressions,fn){if(!Array.isArray(expressions))throw new TypeError("expected an array of expressions to watch");if(!_lodash.default.isFunction(fn))throw new TypeError("expected a function that is triggered on each watch");var $scope=this;var vals=new Array(expressions.length);var prev=new Array(expressions.length);var fire=false;var init=0;var neededInits=expressions.length;var unwatchers=expressions.map(function(expr,i){expr=normalizeExpression($scope,expr);if(!expr)return;return expr.fn.call($scope,expr.get,function(newVal,oldVal){if(newVal===oldVal){init+=1}vals[i]=newVal;prev[i]=oldVal;fire=true},expr.deep)});var flip=false;unwatchers.push($scope.$watch(function(){if(init<neededInits)return init;if(fire){fire=false;flip=!flip}return flip},function(){if(init<neededInits)return false;fn(vals.slice(0),prev.slice(0));vals.forEach(function(v,i){prev[i]=v})}));return _lodash.default.partial(_function.callEach,unwatchers)};function normalizeExpression($scope,expr){if(!expr)return;var norm={fn:$scope.$watch,deep:false};if(_lodash.default.isFunction(expr))return _lodash.default.assign(norm,{get:expr});if(_lodash.default.isObject(expr))return _lodash.default.assign(norm,expr);if(!_lodash.default.isString(expr))return;if(expr.substr(0,2)==="[]"){return _lodash.default.assign(norm,{fn:$scope.$watchCollection,get:expr.substr(2)})}if(expr.charAt(0)==="="){return _lodash.default.assign(norm,{deep:true,get:expr.substr(1)})}return _lodash.default.assign(norm,{get:expr})}return $delegate})})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(911)},function(module,exports,__webpack_require__){"use strict";var _operators=__webpack_require__(27);var _new_platform=__webpack_require__(8);var _modules=__webpack_require__(6);var newPlatformChrome=_new_platform.npStart.core.chrome;_modules.uiModules.get("kibana").service("globalNavState",function($rootScope){var _isOpen=false;newPlatformChrome.getIsCollapsed$().pipe((0,_operators.distinctUntilChanged)()).subscribe(function(isCollapsed){$rootScope.$evalAsync(function(){_isOpen=!isCollapsed;$rootScope.$broadcast("globalNavState:change")})});return{isOpen:function isOpen(){return _isOpen},setOpen:function setOpen(newValue){newPlatformChrome.setIsCollapsed(!newValue)}}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1862)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initAngularApi=initAngularApi;var _modules=__webpack_require__(6);var _directives=__webpack_require__(914);var _sub_url_hooks=__webpack_require__(920);var _legacy_compat=__webpack_require__(923);function initAngularApi(chrome,internals){chrome.setupAngular=function(){var kibana=_modules.uiModules.get("kibana");(0,_legacy_compat.configureAppAngularModule)(kibana);kibana.value("chrome",chrome);(0,_sub_url_hooks.registerSubUrlHooks)(kibana,internals);(0,_directives.directivesProvider)(chrome,internals);_modules.uiModules.link(kibana)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.directivesProvider=directivesProvider;var _kbn_chrome=__webpack_require__(915);function directivesProvider(chrome,internals){(0,_kbn_chrome.kbnChromeProvider)(chrome,internals)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kbnChromeProvider=kbnChromeProvider;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(13));var _jquery=_interopRequireDefault(__webpack_require__(12));var _modules=__webpack_require__(6);var _kbn_chrome=_interopRequireDefault(__webpack_require__(916));var _i18n=__webpack_require__(11);var _new_platform=__webpack_require__(8);var _chrome_header_nav_controls=__webpack_require__(917);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function kbnChromeProvider(chrome,internals){_modules.uiModules.get("kibana").directive("kbnChrome",function(){return{template:function template(){var $content=(0,_jquery.default)(_kbn_chrome.default);var $app=$content.find(".application");if(internals.rootController){$app.attr("ng-controller",internals.rootController)}if(internals.rootTemplate){$app.removeAttr("ng-view");$app.html(internals.rootTemplate)}return $content},controllerAs:"chrome",controller:function controller($scope,$location,Private){$scope.getFirstPathSegment=function(){return $location.path().split("/")[1]};var navControls=Private(_chrome_header_nav_controls.chromeHeaderNavControlsRegistry);(navControls.bySide[_chrome_header_nav_controls.NavControlSide.Left]||[]).forEach(function(navControl){return _new_platform.npStart.core.chrome.navControls.registerLeft({order:navControl.order,mount:navControl.render})});(navControls.bySide[_chrome_header_nav_controls.NavControlSide.Right]||[]).forEach(function(navControl){return _new_platform.npStart.core.chrome.navControls.registerRight({order:navControl.order,mount:navControl.render})});_reactDom.default.render(_react.default.createElement(_i18n.I18nContext,null,_new_platform.npStart.core.overlays.banners.getComponent()),document.getElementById("globalBannerList"));return chrome}}})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="app-wrapper-panel">\n  <div id="globalBannerList"></div>\n\n  <div\n    class="application"\n    ng-class="\'tab-\' + getFirstPathSegment() + \' \' + chrome.getApplicationClasses()"\n    ng-view\n  ></div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.chromeHeaderNavControlsRegistry=exports.NavControlSide=void 0;var _registry=__webpack_require__(44);var NavControlSide;exports.NavControlSide=NavControlSide;(function(NavControlSide){NavControlSide["Left"]="left";NavControlSide["Right"]="right"})(NavControlSide||(exports.NavControlSide=NavControlSide={}));var chromeHeaderNavControlsRegistry=(0,_registry.uiRegistry)({name:"chromeHeaderNavControls",order:["order"],group:["side"]});exports.chromeHeaderNavControlsRegistry=chromeHeaderNavControlsRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexedArray=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _inflector=__webpack_require__(919);var _collection=__webpack_require__(396);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var pathGetter=(0,_lodash.default)(_lodash.default.get).rearg(1,0).ary(2);var inflectIndex=(0,_inflector.inflector)("by");var inflectOrder=(0,_inflector.inflector)("in","Order");var CLEAR_CACHE={};var OPT_NAMES=["index","group","order","initialSet","immutable"];var IndexedArray=function(){function IndexedArray(config){_classCallCheck(this,IndexedArray);config=_lodash.default.pick(config||{},OPT_NAMES);Object.defineProperty(this,"raw",{value:[]});this._indexNames=_lodash.default.union(this._setupIndex(config.group,inflectIndex,organizeByIndexedArray(config)),this._setupIndex(config.index,inflectIndex,_lodash.default.indexBy),this._setupIndex(config.order,inflectOrder,function(raw,pluckValue){return _toConsumableArray(raw).sort(function(itemA,itemB){var a=pluckValue(itemA);var b=pluckValue(itemB);if(typeof a==="number"&&typeof b==="number"){return a-b}return String(a).toLowerCase().localeCompare(String(b).toLowerCase())})}));if(config.initialSet){this.push.apply(this,config.initialSet)}Object.defineProperty(this,"immutable",{value:!!config.immutable})}_createClass(IndexedArray,[{key:"remove",value:function remove(predicate){this._assertMutable("remove");var out=_lodash.default.remove(this,predicate);_lodash.default.remove(this.raw,predicate);this._clearIndices();return out}},{key:"toJSON",value:function toJSON(){return this.raw}},{key:"copyWithin",value:function copyWithin(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return this._mutation("copyWithin",args)}},{key:"fill",value:function fill(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return this._mutation("fill",args)}},{key:"pop",value:function pop(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}return this._mutation("pop",args)}},{key:"push",value:function push(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4]}return this._mutation("push",args)}},{key:"reverse",value:function reverse(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5]}return this._mutation("reverse",args)}},{key:"shift",value:function shift(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++){args[_key6]=arguments[_key6]}return this._mutation("shift",args)}},{key:"sort",value:function sort(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++){args[_key7]=arguments[_key7]}return this._mutation("sort",args)}},{key:"splice",value:function splice(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++){args[_key8]=arguments[_key8]}return this._mutation("splice",args)}},{key:"unshift",value:function unshift(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++){args[_key9]=arguments[_key9]}return this._mutation("unshift",args)}},{key:"_assertMutable",value:function _assertMutable(methodName){if(this.immutable){throw new Error("".concat(methodName,"() is not allowed on immutable IndexedArray instances"))}}},{key:"_mutation",value:function _mutation(methodName,args){this._assertMutable(methodName);_get(_getPrototypeOf(IndexedArray.prototype),methodName,this).apply(this,args);this._clearIndices();return _get(_getPrototypeOf(IndexedArray.prototype),methodName,this).apply(this.raw,args)}},{key:"_setupIndex",value:function _setupIndex(props,inflect,op){var _this=this;if(!props||props.length===0)return;return props.map(function(prop){var indexName=inflect(prop);var getIndexValueFromItem=pathGetter.partial(prop).value();var cache;Object.defineProperty(_this,indexName,{enumerable:false,configurable:false,set:function set(val){if(val===CLEAR_CACHE){cache=false}else{throw new TypeError(indexName+" can not be set, it is a computed index of values")}},get:function get(){if(!cache){cache=op(_this.raw,getIndexValueFromItem)}return cache}});return indexName})}},{key:"_clearIndices",value:function _clearIndices(){var _this2=this;this._indexNames.forEach(function(name){_this2[name]=CLEAR_CACHE})}}]);return IndexedArray}();exports.IndexedArray=IndexedArray;_defineProperty(IndexedArray,"OPT_NAMES",OPT_NAMES);Object.setPrototypeOf(IndexedArray.prototype,Array.prototype);function organizeByIndexedArray(config){return function(){var grouped=_collection.organizeBy.apply(void 0,arguments);return _lodash.default.reduce(grouped,function(acc,value,group){acc[group]=new IndexedArray(_objectSpread({},config,{initialSet:value}));return acc},{})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.inflector=inflector;function upFirst(str,total){return str.charAt(0).toUpperCase()+(total?str.substr(1).toLowerCase():str.substr(1))}function startsWith(str,test){return str.substr(0,test.length).toLowerCase()===test.toLowerCase()}function endsWith(str,test){var tooShort=str.length<test.length;if(tooShort)return;return str.substr(str.length-test.length).toLowerCase()===test.toLowerCase()}function inflector(prefix,postfix){return function inflect(key){var inflected;if(key.indexOf(".")!==-1){inflected=key.split(".").map(function(step,i){return i===0?step:upFirst(step,true)}).join("")}else{inflected=key}if(prefix&&!startsWith(key,prefix)){inflected=prefix+upFirst(inflected)}if(postfix&&!endsWith(key,postfix)){inflected=inflected+postfix}return inflected}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerSubUrlHooks=registerSubUrlHooks;exports.SubUrlRouteFilterProvider=SubUrlRouteFilterProvider;var _state_hashing=__webpack_require__(114);function registerSubUrlHooks(angularModule,internals){angularModule.run(function($rootScope,Private){var getUnhashableStates=Private(_state_hashing.getUnhashableStatesProvider);var subUrlRouteFilter=Private(SubUrlRouteFilterProvider);function updateSubUrls(){var urlWithHashes=window.location.href;var urlWithStates=(0,_state_hashing.unhashUrl)(urlWithHashes,getUnhashableStates());internals.trackPossibleSubUrl(urlWithStates)}function onRouteChange($event){if(subUrlRouteFilter($event)){updateSubUrls()}}$rootScope.$on("$routeChangeSuccess",onRouteChange);$rootScope.$on("$routeUpdate",onRouteChange);updateSubUrls()})}function SubUrlRouteFilterProvider($injector){if(!$injector.has("$route")){return function alwaysUpdate(){return true}}var $route=$injector.get("$route");return function ignoreRedirectToRoutes(){return Boolean($route.current&&!$route.current.redirectTo)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hashUrl=void 0;var _encodeUriQuery=_interopRequireDefault(__webpack_require__(545));var _risonNode=_interopRequireDefault(__webpack_require__(67));var _url=__webpack_require__(38);var _querystring=__webpack_require__(342);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var conservativeStringifyQuerystring=function conservativeStringifyQuerystring(query){return(0,_querystring.stringify)(query,null,null,{encodeURIComponent:_encodeUriQuery.default})};var hashStateInQuery=function hashStateInQuery(state,query){var name=state.getQueryParamName();var value=query[name];if(!value){return{name:name,value:value}}var decodedValue=_risonNode.default.decode(value);var hashedValue=state.toQueryParam(decodedValue);return{name:name,value:hashedValue}};var hashStatesInQuery=function hashStatesInQuery(states,query){var hashedQuery=states.reduce(function(result,state){var _hashStateInQuery=hashStateInQuery(state,query),name=_hashStateInQuery.name,value=_hashStateInQuery.value;if(value){result[name]=value}return result},{});return _objectSpread({},query,{},hashedQuery)};var hashUrl=function hashUrl(states,redirectUrl){if(states===null||!states.length){throw new Error("states parameter must be an Array with length greater than 0")}var parsedUrl=(0,_url.parse)(redirectUrl);if(!parsedUrl.hash){return redirectUrl}var parsedAppUrl=(0,_url.parse)(parsedUrl.hash.slice(1),true);var query=parsedAppUrl.query;var newQuery=hashStatesInQuery(states,query);var newHash=(0,_url.format)({search:conservativeStringifyQuerystring(newQuery),pathname:parsedAppUrl.pathname});return(0,_url.format)({hash:"#".concat(newHash),host:parsedUrl.host,search:parsedUrl.search,pathname:parsedUrl.pathname,protocol:parsedUrl.protocol})};exports.hashUrl=hashUrl},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unhashUrl=unhashUrl;var _url=__webpack_require__(38);var _encodeUriQuery=_interopRequireDefault(__webpack_require__(545));var _querystring=__webpack_require__(342);var _unhash_query_string=__webpack_require__(531);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function unhashUrl(urlWithHashes,states){if(!urlWithHashes)return urlWithHashes;var urlWithHashesParsed=(0,_url.parse)(urlWithHashes,true);if(!urlWithHashesParsed.hostname){throw new TypeError("Only absolute urls should be passed to `unhashUrl()`. "+"Unable to detect url hostname.")}if(!urlWithHashesParsed.hash)return urlWithHashes;var appUrl=urlWithHashesParsed.hash.slice(1);if(!appUrl)return urlWithHashes;var appUrlParsed=(0,_url.parse)(urlWithHashesParsed.hash.slice(1),true);if(!appUrlParsed.query)return urlWithHashes;var appQueryWithoutHashes=(0,_unhash_query_string.unhashQueryString)(appUrlParsed.query||{},states);var appQueryStringWithoutHashes=(0,_querystring.stringify)(appQueryWithoutHashes,null,null,{encodeURIComponent:_encodeUriQuery.default});return(0,_url.format)(_objectSpread({},urlWithHashesParsed,{hash:(0,_url.format)({pathname:appUrlParsed.pathname,search:appQueryStringWithoutHashes})}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"configureAppAngularModule",{enumerable:true,get:function get(){return _angular_config.configureAppAngularModule}});var _angular_config=__webpack_require__(924)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.$setupXsrfRequestInterceptor=exports.configureAppAngularModule=void 0;var _jquery=_interopRequireDefault(__webpack_require__(12));var _lodash=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var Rx=_interopRequireWildcard(__webpack_require__(16));var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);var _notify=__webpack_require__(9);var _capabilities=__webpack_require__(37);var _url=__webpack_require__(98);var _error_url_overflow=__webpack_require__(930);var _new_platform=__webpack_require__(8);var _notify2=__webpack_require__(9);var _system_api=__webpack_require__(933);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var URL_LIMIT_WARN_WITHIN=1e3;var configureAppAngularModule=function configureAppAngularModule(angularModule){var newPlatform=_new_platform.npStart.core;var legacyMetadata=newPlatform.injectedMetadata.getLegacyMetadata();(0,_lodash.forOwn)(newPlatform.injectedMetadata.getInjectedVars(),function(val,name){if(name!==undefined){angularModule.value(name,(0,_lodash.cloneDeep)(val))}});angularModule.value("kbnVersion",newPlatform.injectedMetadata.getKibanaVersion()).value("buildNum",legacyMetadata.buildNum).value("buildSha",legacyMetadata.buildSha).value("serverName",legacyMetadata.serverName).value("sessionId",Date.now()).value("esUrl",getEsUrl(newPlatform)).value("uiCapabilities",_capabilities.capabilities.get()).config(setupCompileProvider(newPlatform)).config(setupLocationProvider(newPlatform)).config($setupXsrfRequestInterceptor(newPlatform)).run(capture$httpLoadingCount(newPlatform)).run($setupBreadcrumbsAutoClear(newPlatform)).run($setupBadgeAutoClear(newPlatform)).run($setupHelpExtensionAutoClear(newPlatform)).run($setupUrlOverflowHandling(newPlatform))};exports.configureAppAngularModule=configureAppAngularModule;var getEsUrl=function getEsUrl(newPlatform){var a=document.createElement("a");a.href=newPlatform.http.basePath.prepend("/elasticsearch");var protocolPort=/https/.test(a.protocol)?443:80;var port=a.port||protocolPort;return{host:a.hostname,port:port,protocol:a.protocol,pathname:a.pathname}};var setupCompileProvider=function setupCompileProvider(newPlatform){return function($compileProvider){if(!newPlatform.injectedMetadata.getLegacyMetadata().devMode){$compileProvider.debugInfoEnabled(false)}}};var setupLocationProvider=function setupLocationProvider(newPlatform){return function($locationProvider){$locationProvider.html5Mode({enabled:false,requireBase:false,rewriteLinks:false});$locationProvider.hashPrefix("")}};var $setupXsrfRequestInterceptor=function $setupXsrfRequestInterceptor(newPlatform){var version=newPlatform.injectedMetadata.getLegacyMetadata().version;_jquery.default.ajaxPrefilter(function(_ref,originalOptions,jqXHR){var _ref$kbnXsrfToken=_ref.kbnXsrfToken,kbnXsrfToken=_ref$kbnXsrfToken===void 0?true:_ref$kbnXsrfToken;if(kbnXsrfToken){jqXHR.setRequestHeader("kbn-version",version)}});return function($httpProvider){$httpProvider.interceptors.push(function(){return{request:function request(opts){var _ref2=opts,_ref2$kbnXsrfToken=_ref2.kbnXsrfToken,kbnXsrfToken=_ref2$kbnXsrfToken===void 0?true:_ref2$kbnXsrfToken;if(kbnXsrfToken){(0,_lodash.set)(opts,["headers","kbn-version"],version)}return opts}}})}};exports.$setupXsrfRequestInterceptor=$setupXsrfRequestInterceptor;var capture$httpLoadingCount=function capture$httpLoadingCount(newPlatform){return function($rootScope,$http){newPlatform.http.addLoadingCount(new Rx.Observable(function(observer){var unwatch=$rootScope.$watch(function(){var reqs=$http.pendingRequests||[];observer.next(reqs.filter(function(req){return!(0,_system_api.isSystemApiRequest)(req)}).length)});return unwatch}))}};var $setupBreadcrumbsAutoClear=function $setupBreadcrumbsAutoClear(newPlatform){return function($rootScope,$injector){var breadcrumbSetSinceRouteChange=false;var $route=$injector.has("$route")?$injector.get("$route"):{};newPlatform.chrome.getBreadcrumbs$().subscribe({next:function next(){breadcrumbSetSinceRouteChange=true}});$rootScope.$on("$routeChangeStart",function(){breadcrumbSetSinceRouteChange=false});$rootScope.$on("$routeChangeSuccess",function(){var current=$route.current||{};if(breadcrumbSetSinceRouteChange||current.$$route&&current.$$route.redirectTo){return}var k7BreadcrumbsProvider=current.k7Breadcrumbs;if(!k7BreadcrumbsProvider){newPlatform.chrome.setBreadcrumbs([]);return}try{newPlatform.chrome.setBreadcrumbs($injector.invoke(k7BreadcrumbsProvider))}catch(error){(0,_notify.fatalError)(error)}})}};var $setupBadgeAutoClear=function $setupBadgeAutoClear(newPlatform){return function($rootScope,$injector){var badgeSetSinceRouteChange=false;var $route=$injector.has("$route")?$injector.get("$route"):{};$rootScope.$on("$routeChangeStart",function(){badgeSetSinceRouteChange=false});$rootScope.$on("$routeChangeSuccess",function(){var current=$route.current||{};if(badgeSetSinceRouteChange||current.$$route&&current.$$route.redirectTo){return}var badgeProvider=current.badge;if(!badgeProvider){newPlatform.chrome.setBadge(undefined);return}try{newPlatform.chrome.setBadge($injector.invoke(badgeProvider))}catch(error){(0,_notify.fatalError)(error)}})}};var $setupHelpExtensionAutoClear=function $setupHelpExtensionAutoClear(newPlatform){return function($rootScope,$injector){var helpExtensionSetSinceRouteChange=false;newPlatform.chrome.getHelpExtension$().subscribe({next:function next(){helpExtensionSetSinceRouteChange=true}});var $route=$injector.has("$route")?$injector.get("$route"):{};$rootScope.$on("$routeChangeStart",function(){helpExtensionSetSinceRouteChange=false});$rootScope.$on("$routeChangeSuccess",function(){var current=$route.current||{};if(helpExtensionSetSinceRouteChange||current.$$route&&current.$$route.redirectTo){return}newPlatform.chrome.setHelpExtension(current.helpExtension)})}};var $setupUrlOverflowHandling=function $setupUrlOverflowHandling(newPlatform){return function($location,$rootScope,Private,config){var urlOverflow=new _error_url_overflow.UrlOverflowService;var check=function check(){if(config.get("state:storeInSessionStorage")){return}if($location.path()==="/error/url-overflow"){return}try{if(urlOverflow.check($location.absUrl())<=URL_LIMIT_WARN_WITHIN){_notify2.toastNotifications.addWarning({title:_i18n.i18n.translate("common.ui.chrome.bigUrlWarningNotificationTitle",{defaultMessage:"The URL is big and Kibana might stop working"}),text:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.chrome.bigUrlWarningNotificationMessage",defaultMessage:"Either enable the {storeInSessionStorageParam} option in {advancedSettingsLink} or simplify the onscreen visuals.",values:{storeInSessionStorageParam:_react.default.createElement("code",null,"state:storeInSessionStorage"),advancedSettingsLink:_react.default.createElement("a",{href:"#/management/kibana/settings"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.chrome.bigUrlWarningNotificationMessage.advancedSettingsLinkText",defaultMessage:"advanced settings"}))}}))})}}catch(e){window.location.href=(0,_url.modifyUrl)(window.location.href,function(parts){parts.hash="#/error/url-overflow"});window.location.reload()}};$rootScope.$on("$routeUpdate",check);$rootScope.$on("$routeChangeStart",check)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KbnUrlProvider=KbnUrlProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(2);var _modules=__webpack_require__(6);var _app_state=__webpack_require__(341);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/url").service("kbnUrl",function(Private){return Private(KbnUrlProvider)});function KbnUrlProvider($injector,$location,$rootScope,$parse,Private){var self=this;self.change=function(url,paramObj,appState){self._changeLocation("url",url,paramObj,false,appState)};self.changePath=function(path,paramObj){self._changeLocation("path",path,paramObj)};self.redirect=function(url,paramObj,appState){self._changeLocation("url",url,paramObj,true,appState)};self.redirectPath=function(path,paramObj){self._changeLocation("path",path,paramObj,true)};self.eval=function(template,paramObj){paramObj=paramObj||{};return template.replace(/\{\{([^\}]+)\}\}/g,function(match,expr){var key=expr.split("|")[0].trim();var p=$parse(key)(paramObj);if(_lodash.default.isUndefined(p)){throw new Error(_i18n.i18n.translate("common.ui.url.replacementFailedErrorMessage",{defaultMessage:"Replacement failed, unresolved expression: {expr}",values:{expr:expr}}))}return encodeURIComponent($parse(expr)(paramObj))})};self.getRouteHref=function(obj,route){return"#"+self.getRouteUrl(obj,route)};self.getRouteUrl=function(obj,route){var template=obj&&obj.routes&&obj.routes[route];if(template)return self.eval(template,obj)};self.redirectToRoute=function(obj,route){self.redirect(self.getRouteUrl(obj,route))};self.changeToRoute=function(obj,route){self.change(self.getRouteUrl(obj,route))};self.removeParam=function(param){$location.search(param,null).replace()};var reloading;self._changeLocation=function(type,url,paramObj,replace,appState){var prev={path:$location.path(),search:$location.search()};url=self.eval(url,paramObj);$location[type](url);if(replace)$location.replace();if(appState){$location.search(appState.getQueryParamName(),appState.toQueryParam())}var next={path:$location.path(),search:$location.search()};if($injector.has("$route")){var $route=$injector.get("$route");if(self._shouldForceReload(next,prev,$route)){var _appState=Private(_app_state.AppStateProvider).getAppState();if(_appState)_appState.destroy();reloading=$rootScope.$on("$locationChangeSuccess",function(){reloading();reloading=false;$route.reload()})}}};self._shouldForceReload=function(next,prev,$route){if(reloading)return false;var route=$route.current&&$route.current.$$route;if(!route)return false;var nextPath=next.path||"/";var prevPath=prev.path||"/";if(nextPath!==prevPath)return false;var reloadOnSearch=route.reloadOnSearch;var searchSame=_lodash.default.isEqual(next.search,prev.search);return reloadOnSearch&&searchSame||!reloadOnSearch}}},function(module,exports,__webpack_require__){"use strict";var _events=__webpack_require__(520);var _persisted_state=__webpack_require__(532);var _modules=__webpack_require__(6);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var _module=_modules.uiModules.get("kibana");_module.factory("PersistedState",function($injector){var Private=$injector.get("Private");var Events=Private(_events.EventsProvider);return function(_PersistedState){_inherits(AngularPersistedState,_PersistedState);function AngularPersistedState(value,path){_classCallCheck(this,AngularPersistedState);return _possibleConstructorReturn(this,_getPrototypeOf(AngularPersistedState).call(this,value,path,Events))}return AngularPersistedState}(_persisted_state.PersistedState)})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RedirectWhenMissingProvider=RedirectWhenMissingProvider;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _markdown=__webpack_require__(533);var _notify=__webpack_require__(9);var _errors=__webpack_require__(25);var _modules=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/url").service("redirectWhenMissing",function(Private){return Private(RedirectWhenMissingProvider)});function RedirectWhenMissingProvider(kbnUrl,Promise){return function(mapping){if(typeof mapping==="string"){mapping={"*":mapping}}return function(error){var savedObjectNotFound=error instanceof _errors.SavedObjectNotFound;var unknownVisType=error.message.indexOf("Invalid type")===0;if(unknownVisType){error.savedObjectType="visualization"}else if(!savedObjectNotFound){throw error}var url=mapping[error.savedObjectType]||mapping["*"];if(!url)url="/";url+=(url.indexOf("?")>=0?"&":"?")+"notFound=".concat(error.savedObjectType);_notify.toastNotifications.addWarning({title:_i18n.i18n.translate("common.ui.url.savedObjectIsMissingNotificationMessage",{defaultMessage:"Saved object is missing"}),text:_react.default.createElement(_markdown.MarkdownSimple,null,error.message)});kbnUrl.redirect(url);return Promise.halt()}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownSimple=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _reactMarkdown=_interopRequireDefault(__webpack_require__(515));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var markdownRenderers={root:_react.Fragment};var MarkdownSimple=function MarkdownSimple(_ref){var children=_ref.children;return _react.default.createElement(_reactMarkdown.default,{renderers:markdownRenderers},children)};exports.MarkdownSimple=MarkdownSimple},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Markdown=exports.markdownFactory=void 0;var _classnames=_interopRequireDefault(__webpack_require__(26));var _react=_interopRequireWildcard(__webpack_require__(0));var _markdownIt=_interopRequireDefault(__webpack_require__(426));var _lodash=__webpack_require__(1);var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var markdownFactory=(0,_lodash.memoize)(function(){var whiteListedRules=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var openLinksInNewTab=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var markdownIt;if(whiteListedRules&&whiteListedRules.length>0){markdownIt=new _markdownIt.default("zero",{html:false,linkify:true});markdownIt.enable(whiteListedRules)}else{markdownIt=new _markdownIt.default({html:false,linkify:true})}if(openLinksInNewTab){var originalLinkRender=markdownIt.renderer.rules.link_open||function(tokens,idx,options,env,self){return self.renderToken(tokens,idx,options)};markdownIt.renderer.rules.link_open=function(tokens,idx,options,env,self){var href=tokens[idx].attrGet("href");var target="_blank";var rel=(0,_eui.getSecureRelForTarget)({href:href===null?undefined:href,target:target});tokens[idx].attrPush(["target",target]);if(rel){tokens[idx].attrPush(["rel",rel])}return originalLinkRender(tokens,idx,options,env,self)}}return function(markdown){return markdown?markdownIt.render(markdown):""}},function(){var whiteListedRules=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var openLinksInNewTab=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return"".concat(whiteListedRules.join("_")).concat(openLinksInNewTab)});exports.markdownFactory=markdownFactory;var Markdown=function(_PureComponent){_inherits(Markdown,_PureComponent);function Markdown(){_classCallCheck(this,Markdown);return _possibleConstructorReturn(this,_getPrototypeOf(Markdown).apply(this,arguments))}_createClass(Markdown,[{key:"render",value:function render(){var _this$props=this.props,className=_this$props.className,_this$props$markdown=_this$props.markdown,markdown=_this$props$markdown===void 0?"":_this$props$markdown,openLinksInNewTab=_this$props.openLinksInNewTab,whiteListedRules=_this$props.whiteListedRules,rest=_objectWithoutProperties(_this$props,["className","markdown","openLinksInNewTab","whiteListedRules"]);var classes=(0,_classnames.default)("kbnMarkdown__body",className);var markdownRenderer=markdownFactory(whiteListedRules,openLinksInNewTab);var renderedMarkdown=markdownRenderer(markdown);return _react.default.createElement("div",_extends({},rest,{className:classes,dangerouslySetInnerHTML:{__html:renderedMarkdown}}))}}]);return Markdown}(_react.PureComponent);exports.Markdown=Markdown},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UrlOverflowService",{enumerable:true,get:function get(){return _url_overflow_service.UrlOverflowService}});__webpack_require__(931);var _url_overflow_service=__webpack_require__(534)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _i18n=__webpack_require__(2);var _routes=_interopRequireDefault(__webpack_require__(19));var _url=__webpack_require__(98);var _error_url_overflow=_interopRequireDefault(__webpack_require__(932));var _url_overflow_service=__webpack_require__(534);Object.keys(_url_overflow_service).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url_overflow_service[key]}})});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}_routes.default.when("/error/url-overflow",{template:_error_url_overflow.default,k7Breadcrumbs:function k7Breadcrumbs(){return[{text:_i18n.i18n.translate("common.ui.errorUrlOverflow.breadcrumbs.errorText",{defaultMessage:"Error"})}]},controllerAs:"controller",controller:function OverflowController(Private,$scope){_classCallCheck(this,OverflowController);var kbnUrl=Private(_url.KbnUrlProvider);var urlOverflow=new _url_overflow_service.UrlOverflowService;if(!urlOverflow.get()){kbnUrl.redirectPath("/");return}this.url=urlOverflow.get();this.limit=urlOverflow.failLength();this.advancedSettingsLabel=_i18n.i18n.translate("common.ui.errorUrlOverflow.howTofixError.enableOptionText.advancedSettingsLinkText",{defaultMessage:"advanced settings"});$scope.$on("$destroy",function(){return urlOverflow.clear()})}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="app-container kbnError--url-overflow-app euiText">\n  <h3>\n    <icon aria-hidden="true" type="\'alert\'" color="\'danger\'"></icon>\n    <span\n      i18n-id="common.ui.errorUrlOverflow.errorTitle"\n      i18n-default-message="Woah there!">\n    </span>\n  </h3>\n\n  <p\n    i18n-id="common.ui.errorUrlOverflow.errorDescription"\n    i18n-default-message="That\'s a big URL you have there. I have some unfortunate news: Your browser doesn\'t play nice\n    with Kibana\'s bacon-double-cheese-burger-with-extra-fries sized URL. To keep you from running\n    into problems Kibana limits URLs in your browser to {urlCharacterLimit} characters for your\n    safety."\n    i18n-values="{ urlCharacterLimit: controller.limit }"\n  ></p>\n\n  <h3\n    i18n-id="common.ui.errorUrlOverflow.howTofixErrorTitle"\n    i18n-default-message="Ok, how do I fix this?"\n  ></h3>\n  <p\n    i18n-id="common.ui.errorUrlOverflow.howTofixErrorDescription"\n    i18n-default-message="This usually only happens with big, complex dashboards, so you have some options:"\n  ></p>\n\n  <ol>\n    <li\n      i18n-id="common.ui.errorUrlOverflow.howTofixError.enableOptionText"\n      i18n-default-message="Enable the {storeInSessionStorageConfig} option in the {kibanaSettingsLink}. This will prevent the URLs from\n      getting long, but makes them a bit less portable."\n      i18n-values="{\n        html_storeInSessionStorageConfig: \'<code>state:storeInSessionStorage</code>\',\n        html_kibanaSettingsLink: \'<a href=#/management/kibana/settings>\' + controller.advancedSettingsLabel + \'</a>\'\n      }"\n    ></li>\n    <li\n      i18n-id="common.ui.errorUrlOverflow.howTofixError.removeStuffFromDashboardText"\n      i18n-default-message="Remove some stuff from your dashboard. This will reduce the length of the URL and keep IE in a good place."\n    ></li>\n    <li\n      i18n-id="common.ui.errorUrlOverflow.howTofixError.doNotUseIEText"\n      i18n-default-message="Don\'t use IE. Every other supported browser we know of doesn\'t have this limit."\n    ></li>\n  </ol>\n  <br />\n  <br />\n  <p>\n    <small\n      i18n-id="common.ui.errorUrlOverflow.footnoteText"\n      i18n-default-message="Footnote: Party size candy bars are tiny. Party size sub sandwiches are massive. Really makes you think."\n    ></small>\n  </p>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"addSystemApiHeader",{enumerable:true,get:function get(){return _system_api.addSystemApiHeader}});Object.defineProperty(exports,"isSystemApiRequest",{enumerable:true,get:function get(){return _system_api.isSystemApiRequest}});var _system_api=__webpack_require__(934)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addSystemApiHeader=addSystemApiHeader;exports.isSystemApiRequest=isSystemApiRequest;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SYSTEM_API_HEADER_NAME="kbn-system-api";function addSystemApiHeader(originalHeaders){var systemApiHeaders=_defineProperty({},SYSTEM_API_HEADER_NAME,true);return _objectSpread({},originalHeaders,{},systemApiHeaders)}function isSystemApiRequest(request){return!!request.headers[SYSTEM_API_HEADER_NAME]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_default;var _lodash=__webpack_require__(1);var _url=__webpack_require__(38);function _default(chrome,internals){if((0,_lodash.get)(internals,"app.navLink.url")){internals.app.navLink.url=(0,_url.resolve)(window.location.href,internals.app.navLink.url)}internals.appUrlStore=internals.appUrlStore||window.sessionStorage;try{var verifySessionStorage="verify sessionStorage";internals.appUrlStore.setItem(verifySessionStorage,1);internals.appUrlStore.removeItem(verifySessionStorage)}catch(error){throw new Error("Kibana requires access to sessionStorage, and it looks like "+"your browser is restricting it. If you're "+"using Safari with private browsing enabled, you can solve this "+"problem by disabling private browsing, or by using another browser.")}chrome.setShowAppsLink=function(val){internals.showAppsLink=!!val;return chrome};chrome.getShowAppsLink=function(){return internals.showAppsLink==null?internals.nav.length>1:internals.showAppsLink};chrome.getKibanaVersion=function(){return internals.version};chrome.getApp=function(){return(0,_lodash.clone)(internals.app)};chrome.getAppTitle=function(){return(0,_lodash.get)(internals,["app","title"])};chrome.getAppUrl=function(){return(0,_lodash.get)(internals,["app","navLink","url"])};chrome.getLastUrlFor=function(appId){return internals.appUrlStore.getItem("appLastUrl:".concat(appId))};chrome.setLastUrlFor=function(appId,url){internals.appUrlStore.setItem("appLastUrl:".concat(appId),url)}}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initChromeControlsApi=initChromeControlsApi;var Rx=_interopRequireWildcard(__webpack_require__(16));var _new_platform=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var newPlatformChrome=_new_platform.npStart.core.chrome;function initChromeControlsApi(chrome){var visible$=new Rx.BehaviorSubject(false);newPlatformChrome.getIsVisible$().subscribe(visible$);chrome.setVisible=function(visibility){newPlatformChrome.setIsVisible(visibility);return chrome};chrome.getVisible=function(){return visible$.getValue()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initChromeNavApi=initChromeNavApi;var _absolute_to_parsed_url=__webpack_require__(535);var _new_platform=__webpack_require__(8);var _relative_to_absolute=__webpack_require__(940);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function initChromeNavApi(chrome,internals){var coreNavLinks=_new_platform.npStart.core.chrome.navLinks;chrome.untrackNavLinksForDeletedSavedObjects=function(deletedIds){function urlContainsDeletedId(url){var includedId=deletedIds.find(function(deletedId){return url.includes(deletedId)});return includedId!==undefined}coreNavLinks.getAll().forEach(function(link){if(link.linkToLastSubUrl&&urlContainsDeletedId(link.url)){setLastUrl(link,link.baseUrl)}})};chrome.trackSubUrlForApp=function(id,kibanaParsedUrl){var navLink=coreNavLinks.get(id);if(navLink){setLastUrl(navLink,kibanaParsedUrl.getAbsoluteUrl())}};internals.trackPossibleSubUrl=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(url){var kibanaParsedUrl;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:kibanaParsedUrl=(0,_absolute_to_parsed_url.absoluteToParsedUrl)(url,chrome.getBasePath());coreNavLinks.getAll().filter(function(link){return link.legacy}).forEach(function(link){var active=url.startsWith(link.subUrlBase);link=coreNavLinks.update(link.id,{active:active});if(active){setLastUrl(link,url);return}link=refreshLastUrl(link);var newGlobalState=kibanaParsedUrl.getGlobalState();if(newGlobalState){injectNewGlobalState(link,kibanaParsedUrl.appId,newGlobalState)}});case 2:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}();function lastSubUrlKey(link){return"lastSubUrl:".concat(link.baseUrl)}function getLastUrl(link){return internals.appUrlStore.getItem(lastSubUrlKey(link))}function setLastUrl(link,url){if(link.linkToLastSubUrl===false){return}internals.appUrlStore.setItem(lastSubUrlKey(link),url);refreshLastUrl(link)}function refreshLastUrl(link){var lastSubUrl=getLastUrl(link);return coreNavLinks.update(link.id,{url:lastSubUrl||link.url||link.baseUrl})}function injectNewGlobalState(link,fromAppId,newGlobalState){var kibanaParsedUrl=(0,_absolute_to_parsed_url.absoluteToParsedUrl)(getLastUrl(link)||link.url||link.baseUrl,chrome.getBasePath());if(fromAppId!==kibanaParsedUrl.appId)return;kibanaParsedUrl.setGlobalState(newGlobalState);coreNavLinks.update(link.id,{url:kibanaParsedUrl.getAbsoluteUrl()})}coreNavLinks.getAll().filter(function(link){return link.subUrlBase}).forEach(function(link){coreNavLinks.update(link.id,{subUrlBase:(0,_relative_to_absolute.relativeToAbsolute)(chrome.addBasePath(link.subUrlBase))})});internals.trackPossibleSubUrl(document.location.href)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractAppPathAndId=extractAppPathAndId;var _url=__webpack_require__(38);function extractAppPathAndId(url){var basePath=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var parsedUrl=(0,_url.parse)(url);if(!parsedUrl.path){return{}}var pathWithoutBase=parsedUrl.path.slice(basePath.length);if(!pathWithoutBase.startsWith("/app/")){return{}}var appPath=parsedUrl.hash&&parsedUrl.hash.length>0?parsedUrl.hash.slice(1):"";return{appId:pathWithoutBase.slice("/app/".length),appPath:appPath}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.prependPath=prependPath;var _lodash=__webpack_require__(1);var _url=__webpack_require__(38);function prependPath(relativePath){var newPath=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(!relativePath||!(0,_lodash.isString)(relativePath)){return relativePath}var parsed=(0,_url.parse)(relativePath,true,true);if(!parsed.host&&parsed.pathname){if(parsed.pathname[0]==="/"){parsed.pathname=newPath+parsed.pathname}}return(0,_url.format)({protocol:parsed.protocol,host:parsed.host,pathname:parsed.pathname,query:parsed.query,hash:parsed.hash})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.relativeToAbsolute=relativeToAbsolute;function relativeToAbsolute(url){var a=document.createElement("a");a.setAttribute("href",url);return a.href}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initChromeBadgeApi=initChromeBadgeApi;var _new_platform=__webpack_require__(8);var newPlatformChrome=_new_platform.npStart.core.chrome;function createBadgeApi(){return{badge:{get$:function get$(){return newPlatformChrome.getBadge$()},set:function set(newBadge){newPlatformChrome.setBadge(newBadge)}}}}function initChromeBadgeApi(chrome){var _createBadgeApi=createBadgeApi(),badge=_createBadgeApi.badge;chrome.badge=badge}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initBreadcrumbsApi=initBreadcrumbsApi;var _new_platform=__webpack_require__(8);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var newPlatformChrome=_new_platform.npStart.core.chrome;function createBreadcrumbsApi(chrome){var currentBreadcrumbs=[];newPlatformChrome.getBreadcrumbs$().subscribe({next:function next(nextBreadcrumbs){currentBreadcrumbs=nextBreadcrumbs}});return{breadcrumbs:{get$:function get$(){return newPlatformChrome.getBreadcrumbs$()},set:function set(newBreadcrumbs){newPlatformChrome.setBreadcrumbs(newBreadcrumbs)},push:function push(breadcrumb){newPlatformChrome.setBreadcrumbs([].concat(_toConsumableArray(currentBreadcrumbs),[breadcrumb]))},filter:function filter(fn){newPlatformChrome.setBreadcrumbs(currentBreadcrumbs.filter(fn))},pop:function pop(){newPlatformChrome.setBreadcrumbs(currentBreadcrumbs.slice(0,-1))}}}}function initBreadcrumbsApi(chrome,internals){var _createBreadcrumbsApi=createBreadcrumbsApi(chrome),breadcrumbs=_createBreadcrumbsApi.breadcrumbs;chrome.breadcrumbs=breadcrumbs}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_default;function _default(chrome,internals){chrome.setRootTemplate=function(template){internals.rootTemplate=template;return chrome};chrome.setRootController=function(as,controllerName){if(controllerName===undefined){controllerName=as;as=null}if(typeof controllerName==="function"){chrome.$$rootControllerConstruct=controllerName;controllerName="chrome.$$rootControllerConstruct"}internals.rootController=controllerName+(as?" as "+as:"");return chrome}}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initChromeThemeApi=initChromeThemeApi;var Rx=_interopRequireWildcard(__webpack_require__(16));var _new_platform=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var newPlatformChrome=_new_platform.npStart.core.chrome;function initChromeThemeApi(chrome){var brandCache$=new Rx.BehaviorSubject({});newPlatformChrome.getBrand$().subscribe(brandCache$);var applicationClassesCache$=new Rx.BehaviorSubject([]);newPlatformChrome.getApplicationClasses$().subscribe(applicationClassesCache$);chrome.setBrand=function(brand){newPlatformChrome.setBrand(brand);return chrome};chrome.getBrand=function(key){return brandCache$.getValue()[key]};chrome.addApplicationClass=function(){var classNames=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];if(typeof classNames==="string"){classNames=[classNames]}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=classNames[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var className=_step.value;newPlatformChrome.addApplicationClass(className)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return chrome};chrome.removeApplicationClass=function(classNames){if(typeof classNames==="string"){classNames=[classNames]}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=classNames[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var className=_step2.value;newPlatformChrome.removeApplicationClass(className)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return chrome};chrome.getApplicationClasses=function(){return applicationClassesCache$.getValue().join(" ")}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initChromeXsrfApi=initChromeXsrfApi;function initChromeXsrfApi(chrome,internals){chrome.getXsrfToken=function(){return internals.version}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initUiSettingsApi=initUiSettingsApi;var _new_platform=__webpack_require__(8);var newPlatformUiSettingsClient=_new_platform.npSetup.core.uiSettings;function initUiSettingsApi(chrome){chrome.getUiSettingsClient=function(){return newPlatformUiSettingsClient}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initLoadingCountApi=initLoadingCountApi;var Rx=_interopRequireWildcard(__webpack_require__(16));var _new_platform=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var newPlatformHttp=_new_platform.npSetup.core.http;function initLoadingCountApi(chrome){var manualCount$=new Rx.BehaviorSubject(0);newPlatformHttp.addLoadingCount(manualCount$);chrome.loadingCount=new(function(){function ChromeLoadingCountApi(){_classCallCheck(this,ChromeLoadingCountApi)}_createClass(ChromeLoadingCountApi,[{key:"subscribe",value:function subscribe(handler){var subscription=newPlatformHttp.getLoadingCount$().subscribe({next:function next(count){handler(count)}});return function(){subscription.unsubscribe()}}},{key:"increment",value:function increment(){manualCount$.next(manualCount$.getValue()+1)}},{key:"decrement",value:function decrement(){manualCount$.next(manualCount$.getValue()-1)}}]);return ChromeLoadingCountApi}())}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initSavedObjectClient=initSavedObjectClient;var _new_platform=__webpack_require__(8);var savedObjectsClient=_new_platform.npStart.core.savedObjects.client;function initSavedObjectClient(chrome){chrome.getSavedObjectsClient=function(){return savedObjectsClient}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initChromeBasePathApi=initChromeBasePathApi;var _new_platform=__webpack_require__(8);var newPlatformHttp=_new_platform.npSetup.core.http;function initChromeBasePathApi(chrome){chrome.getBasePath=newPlatformHttp.basePath.get;chrome.addBasePath=newPlatformHttp.basePath.prepend;chrome.removeBasePath=newPlatformHttp.basePath.remove}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initChromeInjectedVarsApi=initChromeInjectedVarsApi;var _lodash=__webpack_require__(1);var _new_platform=__webpack_require__(8);var newPlatformInjectedVars=_new_platform.npSetup.core.injectedMetadata;function initChromeInjectedVarsApi(chrome){chrome.getInjected=function(name,defaultValue){return(0,_lodash.cloneDeep)(name?newPlatformInjectedVars.getInjectedVar(name,defaultValue):newPlatformInjectedVars.getInjectedVars())}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initHelpExtensionApi=initHelpExtensionApi;var _new_platform=__webpack_require__(8);var newPlatformChrome=_new_platform.npStart.core.chrome;function createHelpExtensionApi(){return{helpExtension:{set:function set(helpExtension){newPlatformChrome.setHelpExtension(helpExtension)},get$:function get$(){return newPlatformChrome.getHelpExtension$()}}}}function initHelpExtensionApi(chrome,internal){var _createHelpExtensionA=createHelpExtensionApi(),helpExtension=_createHelpExtensionA.helpExtension;chrome.helpExtension=helpExtension}},function(module,exports){},function(module,exports,__webpack_require__){__webpack_require__(954);__webpack_require__(1462);__webpack_require__(1487);__webpack_require__(1504);__webpack_require__(1512);__webpack_require__(1526);__webpack_require__(1548);__webpack_require__(1561);__webpack_require__(1593);__webpack_require__(1594);__webpack_require__(1659);__webpack_require__(1660);__webpack_require__(444);__webpack_require__(1661);__webpack_require__(1679)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(8);var _public=__webpack_require__(30);var _=__webpack_require__(1311);var plugins={visualizations:_public.visualizations,data:_new_platform.npSetup.plugins.data};var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core,plugins);exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core);exports.start=start},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FiltersService",{enumerable:true,get:function get(){return _filters_service.FiltersService}});Object.defineProperty(exports,"FiltersSetup",{enumerable:true,get:function get(){return _filters_service.FiltersSetup}});var _filters_service=__webpack_require__(956)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FiltersService=void 0;var _vis_filters=__webpack_require__(100);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var FiltersService=function(){function FiltersService(){_classCallCheck(this,FiltersService)}_createClass(FiltersService,[{key:"setup",value:function setup(){return{VisFiltersProvider:_vis_filters.VisFiltersProvider,createFilter:_vis_filters.createFilter}}},{key:"stop",value:function stop(){}}]);return FiltersService}();exports.FiltersService=FiltersService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFiltersFromEvent=exports.createFilter=exports.VisFiltersProvider=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _push_filters=__webpack_require__(958);var _brush_event=__webpack_require__(959);var _public=__webpack_require__(24);var _esQuery=__webpack_require__(20);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getOtherBucketFilterTerms=function getOtherBucketFilterTerms(table,columnIndex,rowIndex){if(rowIndex===-1){return[]}var rows=table.rows.filter(function(row){return table.columns.every(function(column,i){return row[column.id]===table.rows[rowIndex][column.id]||i>=columnIndex})});var terms=rows.map(function(row){return row[table.columns[columnIndex].id]});return _toConsumableArray(new Set(terms.filter(function(term){var notOther=term!=="__other__";var notMissing=term!=="__missing__";return notOther&&notMissing})))};var createFilter=function createFilter(aggConfigs,table,columnIndex,rowIndex,cellValue){var column=table.columns[columnIndex];var aggConfig=aggConfigs[columnIndex];var filter=[];var value=rowIndex>-1?table.rows[rowIndex][column.id]:cellValue;if(value===null||value===undefined||!aggConfig.isFilterable()){return}if(aggConfig.type.name==="terms"&&aggConfig.params.otherBucket){var terms=getOtherBucketFilterTerms(table,columnIndex,rowIndex);filter=aggConfig.createFilter(value,{terms:terms})}else{filter=aggConfig.createFilter(value)}if(!Array.isArray(filter)){filter=[filter]}return filter};exports.createFilter=createFilter;var createFiltersFromEvent=function createFiltersFromEvent(event){var filters=[];var dataPoints=event.data||[event];dataPoints.filter(function(point){return point}).forEach(function(val){var table=val.table,column=val.column,row=val.row,value=val.value;var filter=createFilter(event.aggConfigs,table,column,row,value);if(filter){filter.forEach(function(f){if(event.negate){f=(0,_esQuery.toggleFilterNegated)(f)}filters.push(f)})}});return filters};exports.createFiltersFromEvent=createFiltersFromEvent;var VisFiltersProvider=function VisFiltersProvider(getAppState,$timeout){var pushFilters=function pushFilters(filters,simulate){var appState=getAppState();if(filters.length&&!simulate){(0,_push_filters.pushFilterBarFilters)(appState,(0,_public.uniqFilters)(filters));$timeout(_lodash.default.noop,0)}};return{pushFilters:pushFilters,brush:function brush(event){(0,_brush_event.onBrushEvent)(event,getAppState())}}};exports.VisFiltersProvider=VisFiltersProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pushFilterBarFilters=pushFilterBarFilters;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function pushFilterBarFilters($state,filters){if(!_lodash.default.isObject($state))throw new Error("pushFilters requires a state object");$state.$newFilters=filters}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onBrushEvent=onBrushEvent;var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(14));var _esQuery=__webpack_require__(20);var _timefilter=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function onBrushEvent(event,$state){var isNumber=event.data.ordered;var isDate=isNumber&&event.data.ordered.date;var xRaw=_lodash.default.get(event.data,"series[0].values[0].xRaw");if(!xRaw)return;var column=xRaw.table.columns[xRaw.column];if(!column)return;var aggConfig=event.aggConfigs[xRaw.column];if(!aggConfig)return;var indexPattern=aggConfig.getIndexPattern();var field=aggConfig.params.field;if(!field)return;var fieldName=field.name;if(isDate&&indexPattern.timeFieldName===fieldName){setTimefilter()}else if(isNumber){setRange()}function setTimefilter(){var from=(0,_moment.default)(event.range[0]);var to=(0,_moment.default)(event.range[1]);if(to-from===0)return;_timefilter.timefilter.setTime({from:from,to:to,mode:"absolute"})}function setRange(){if(event.range.length<=1)return;var existingFilter=$state.filters.find(function(filter){return filter.meta&&filter.meta.key===fieldName});var min=event.range[0];var max=event.range[event.range.length-1];var range;if(isDate){range={gte:(0,_moment.default)(min).toISOString(),lt:(0,_moment.default)(max).toISOString(),format:"strict_date_optional_time"}}else{range={gte:min,lt:max}}if(_lodash.default.has(existingFilter,"range")){existingFilter.range[fieldName]=range}else{var newFilter=(0,_esQuery.buildRangeFilter)(field,range,indexPattern,event.data.xAxisFormatter);if(existingFilter){Object.assign(existingFilter,newFilter)}else{$state.$newFilters=[newFilter]}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.DataPublicPlugin}});Object.defineProperty(exports,"RefreshInterval",{enumerable:true,get:function get(){return _types.RefreshInterval}});Object.defineProperty(exports,"TimeRange",{enumerable:true,get:function get(){return _types.TimeRange}});var _plugin=__webpack_require__(961);var _types=__webpack_require__(964);function plugin(initializerContext){return new _plugin.DataPublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataPublicPlugin=void 0;var _expressions_service=__webpack_require__(962);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataPublicPlugin=function(){function DataPublicPlugin(initializerContext){_classCallCheck(this,DataPublicPlugin);_defineProperty(this,"expressions",new _expressions_service.ExpressionsService)}_createClass(DataPublicPlugin,[{key:"setup",value:function setup(core){var expressions=this.expressions.setup();return{expressions:expressions}}},{key:"start",value:function start(core){}},{key:"stop",value:function stop(){}}]);return DataPublicPlugin}();exports.DataPublicPlugin=DataPublicPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpressionsService=void 0;var _interpreter=__webpack_require__(963);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ExpressionsService=function(){function ExpressionsService(){_classCallCheck(this,ExpressionsService);_defineProperty(this,"functions",new _interpreter.FunctionsRegistry);_defineProperty(this,"renderers",new _interpreter.RenderFunctionsRegistry);_defineProperty(this,"types",new _interpreter.TypesRegistry)}_createClass(ExpressionsService,[{key:"setup",value:function setup(){var _this=this;var functions=this.functions,renderers=this.renderers,types=this.types;return{registerFunction:function registerFunction(fn){_this.functions.register(fn)},registerRenderer:function registerRenderer(renderer){_this.renderers.register(renderer)},registerType:function registerType(type){_this.types.register(type)},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{functions:functions,renderers:renderers,types:types}}}}]);return ExpressionsService}();exports.ExpressionsService=ExpressionsService},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Arg=Arg;exports.Fn=Fn;exports.TypesRegistry=exports.FunctionsRegistry=exports.RenderFunctionsRegistry=exports.Registry=void 0;var _lodash=__webpack_require__(1);var _interpreter=__webpack_require__(537);function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Registry=function(){function Registry(){var prop=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"name";_classCallCheck(this,Registry);_defineProperty(this,"_prop",void 0);_defineProperty(this,"_indexed",void 0);if(typeof prop!=="string")throw new Error("Registry property name must be a string");this._prop=prop;this._indexed=new Object}_createClass(Registry,[{key:"wrapper",value:function wrapper(obj){return obj}},{key:"register",value:function register(fn){if(typeof fn!=="function")throw new Error("Register requires an function");var obj=fn();if(_typeof(obj)!=="object"||!obj[this._prop]){throw new Error("Registered functions must return an object with a ".concat(this._prop," property"))}this._indexed[obj[this._prop].toLowerCase()]=this.wrapper(obj)}},{key:"toJS",value:function toJS(){var _this=this;return Object.keys(this._indexed).reduce(function(acc,key){acc[key]=_this.get(key);return acc},{})}},{key:"toArray",value:function toArray(){var _this2=this;return Object.keys(this._indexed).map(function(key){return _this2.get(key)})}},{key:"get",value:function get(name){if(name===undefined){return null}var lowerCaseName=name.toLowerCase();return this._indexed[lowerCaseName]?(0,_lodash.clone)(this._indexed[lowerCaseName]):null}},{key:"getProp",value:function getProp(){return this._prop}},{key:"reset",value:function reset(){this._indexed=new Object}}]);return Registry}();exports.Registry=Registry;function RenderFunction(config){this.name=config.name;this.displayName=config.displayName||this.name;this.help=config.help;this.validate=config.validate||function validate(){};this.reuseDomNode=Boolean(config.reuseDomNode);this.render=config.render||function render(domNode,data,done){done()}}function Arg(config){var _this3=this;if(config.name==="_")throw Error("Arg names must not be _. Use it in aliases instead.");this.name=config.name;this.required=config.required||false;this.help=config.help||"";this.types=config.types||[];this.default=config.default;this.aliases=config.aliases||[];this.multi=config.multi==null?false:config.multi;this.resolve=config.resolve==null?true:config.resolve;this.options=config.options||[];this.accepts=function(type){if(!_this3.types.length)return true;return(0,_lodash.includes)(config.types,type)}}function Fn(config){var _this4=this;this.name=config.name;this.type=config.type;this.aliases=config.aliases||[];this.fn=function(){return Promise.resolve(config.fn.apply(config,arguments))};this.help=config.help||"";this.args=(0,_lodash.mapValues)(config.args||{},function(arg,name){return new Arg(_objectSpread({name:name},arg))});this.context=config.context||{};this.accepts=function(type){if(!_this4.context.types)return true;return(0,_lodash.includes)(_this4.context.types,type)}}var RenderFunctionsRegistry=function(_Registry){_inherits(RenderFunctionsRegistry,_Registry);function RenderFunctionsRegistry(){_classCallCheck(this,RenderFunctionsRegistry);return _possibleConstructorReturn(this,_getPrototypeOf(RenderFunctionsRegistry).apply(this,arguments))}_createClass(RenderFunctionsRegistry,[{key:"wrapper",value:function wrapper(obj){return new RenderFunction(obj)}}]);return RenderFunctionsRegistry}(Registry);exports.RenderFunctionsRegistry=RenderFunctionsRegistry;var FunctionsRegistry=function(_Registry2){_inherits(FunctionsRegistry,_Registry2);function FunctionsRegistry(){_classCallCheck(this,FunctionsRegistry);return _possibleConstructorReturn(this,_getPrototypeOf(FunctionsRegistry).apply(this,arguments))}_createClass(FunctionsRegistry,[{key:"wrapper",value:function wrapper(obj){return new Fn(obj)}}]);return FunctionsRegistry}(Registry);exports.FunctionsRegistry=FunctionsRegistry;var TypesRegistry=function(_Registry3){_inherits(TypesRegistry,_Registry3);function TypesRegistry(){_classCallCheck(this,TypesRegistry);return _possibleConstructorReturn(this,_getPrototypeOf(TypesRegistry).apply(this,arguments))}_createClass(TypesRegistry,[{key:"wrapper",value:function wrapper(obj){return new _interpreter.Type(obj)}}]);return TypesRegistry}(Registry);exports.TypesRegistry=TypesRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _types=__webpack_require__(965);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _types=__webpack_require__(966);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})})},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerTimefilterWithGlobalState=exports.timefilter=exports.Timefilter=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _rxjs=__webpack_require__(16);var _moment=_interopRequireDefault(__webpack_require__(14));var _subscribe_with_scope=__webpack_require__(96);var _chrome=_interopRequireDefault(__webpack_require__(7));var _time_history=__webpack_require__(538);var _diff_time_picker_vals=__webpack_require__(970);var _routes=_interopRequireDefault(__webpack_require__(19));var _parse_querystring=__webpack_require__(971);var _get_time=__webpack_require__(398);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Timefilter=function Timefilter(uiSettings){var _this=this;_classCallCheck(this,Timefilter);_defineProperty(this,"enabledUpdated$",new _rxjs.BehaviorSubject(false));_defineProperty(this,"timeUpdate$",new _rxjs.Subject);_defineProperty(this,"refreshIntervalUpdate$",new _rxjs.Subject);_defineProperty(this,"autoRefreshFetch$",new _rxjs.Subject);_defineProperty(this,"fetch$",new _rxjs.Subject);_defineProperty(this,"_time",void 0);_defineProperty(this,"_refreshInterval",void 0);_defineProperty(this,"isTimeRangeSelectorEnabled",false);_defineProperty(this,"isAutoRefreshSelectorEnabled",false);_defineProperty(this,"getEnabledUpdated$",function(){return _this.enabledUpdated$.asObservable()});_defineProperty(this,"getTimeUpdate$",function(){return _this.timeUpdate$.asObservable()});_defineProperty(this,"getRefreshIntervalUpdate$",function(){return _this.refreshIntervalUpdate$.asObservable()});_defineProperty(this,"getAutoRefreshFetch$",function(){return _this.autoRefreshFetch$.asObservable()});_defineProperty(this,"getFetch$",function(){return _this.fetch$.asObservable()});_defineProperty(this,"getTime",function(){var _this$_time=_this._time,from=_this$_time.from,to=_this$_time.to;return _objectSpread({},_this._time,{from:_moment.default.isMoment(from)?from.toISOString():from,to:_moment.default.isMoment(to)?to.toISOString():to})});_defineProperty(this,"setTime",function(time){var newTime=Object.assign(_this.getTime(),time);if((0,_diff_time_picker_vals.areTimeRangesDifferent)(_this.getTime(),newTime)){_this._time={from:newTime.from,to:newTime.to};_time_history.timeHistory.add(_this._time);_this.timeUpdate$.next();_this.fetch$.next()}});_defineProperty(this,"getRefreshInterval",function(){return _lodash.default.clone(_this._refreshInterval)});_defineProperty(this,"setRefreshInterval",function(refreshInterval){var prevRefreshInterval=_this.getRefreshInterval();var newRefreshInterval=_objectSpread({},prevRefreshInterval,{},refreshInterval);if(newRefreshInterval.value<=0){newRefreshInterval.value=0;newRefreshInterval.pause=true}_this._refreshInterval={value:newRefreshInterval.value,pause:newRefreshInterval.pause};if(prevRefreshInterval&&(0,_diff_time_picker_vals.areRefreshIntervalsDifferent)(prevRefreshInterval,newRefreshInterval)){_this.refreshIntervalUpdate$.next();if(!newRefreshInterval.pause&&newRefreshInterval.value!==0){_this.fetch$.next()}}});_defineProperty(this,"toggleRefresh",function(){_this.setRefreshInterval({pause:!_this._refreshInterval.pause,value:_this._refreshInterval.value})});_defineProperty(this,"createFilter",function(indexPattern,timeRange){return(0,_get_time.getTime)(indexPattern,timeRange?timeRange:_this._time,_this.getForceNow())});_defineProperty(this,"getBounds",function(){return _this.calculateBounds(_this._time)});_defineProperty(this,"getForceNow",function(){var forceNow=(0,_parse_querystring.parseQueryString)().forceNow;if(!forceNow){return}var ticks=Date.parse(forceNow);if(isNaN(ticks)){throw new Error("forceNow query parameter, ".concat(forceNow,", can't be parsed by Date.parse"))}return new Date(ticks)});_defineProperty(this,"calculateBounds",function(timeRange){return(0,_get_time.calculateBounds)(timeRange,{forceNow:_this.getForceNow()})});_defineProperty(this,"getActiveBounds",function(){if(_this.isTimeRangeSelectorEnabled){return _this.getBounds()}});_defineProperty(this,"enableTimeRangeSelector",function(){_this.isTimeRangeSelectorEnabled=true;_this.enabledUpdated$.next(true)});_defineProperty(this,"disableTimeRangeSelector",function(){_this.isTimeRangeSelectorEnabled=false;_this.enabledUpdated$.next(false)});_defineProperty(this,"enableAutoRefreshSelector",function(){_this.isAutoRefreshSelectorEnabled=true;_this.enabledUpdated$.next(true)});_defineProperty(this,"disableAutoRefreshSelector",function(){_this.isAutoRefreshSelectorEnabled=false;_this.enabledUpdated$.next(false)});_defineProperty(this,"notifyShouldFetch",function(){_this.autoRefreshFetch$.next()});this._time=uiSettings.get("timepicker:timeDefaults");this.setRefreshInterval(uiSettings.get("timepicker:refreshIntervalDefaults"))};exports.Timefilter=Timefilter;var timefilter=new Timefilter(_chrome.default.getUiSettingsClient());exports.timefilter=timefilter;function convertISO8601(stringTime){var obj=(0,_moment.default)(stringTime,"YYYY-MM-DDTHH:mm:ss.SSSZ",true);return obj.isValid()?obj.toISOString():stringTime}var registerTimefilterWithGlobalState=_lodash.default.once(function(globalState,$rootScope){var uiSettings=_chrome.default.getUiSettingsClient();var timeDefaults=uiSettings.get("timepicker:timeDefaults");var refreshIntervalDefaults=uiSettings.get("timepicker:refreshIntervalDefaults");timefilter.setTime(_lodash.default.defaults(globalState.time||{},timeDefaults));timefilter.setRefreshInterval(_lodash.default.defaults(globalState.refreshInterval||{},refreshIntervalDefaults));globalState.on("fetch_with_changes",function(){var newTime=_lodash.default.defaults({},globalState.time,timeDefaults);var newRefreshInterval=_lodash.default.defaults({},globalState.refreshInterval,refreshIntervalDefaults);if(newTime){if(newTime.to)newTime.to=convertISO8601(newTime.to);if(newTime.from)newTime.from=convertISO8601(newTime.from)}timefilter.setTime(newTime);timefilter.setRefreshInterval(newRefreshInterval)});var updateGlobalStateWithTime=function updateGlobalStateWithTime(){globalState.time=timefilter.getTime();globalState.refreshInterval=timefilter.getRefreshInterval();globalState.save()};(0,_subscribe_with_scope.subscribeWithScope)($rootScope,timefilter.getRefreshIntervalUpdate$(),{next:updateGlobalStateWithTime});(0,_subscribe_with_scope.subscribeWithScope)($rootScope,timefilter.getTimeUpdate$(),{next:updateGlobalStateWithTime})});exports.registerTimefilterWithGlobalState=registerTimefilterWithGlobalState;_routes.default.addSetupWork(function(globalState,$rootScope){return registerTimefilterWithGlobalState(globalState,$rootScope)})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);var _persisted_log=__webpack_require__(539);_modules.uiModules.get("kibana/persisted_log").factory("PersistedLog",function(){return _persisted_log.PersistedLog})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.recentlyAccessed=void 0;var _new_platform=__webpack_require__(8);var recentlyAccessed=_new_platform.npStart.core.chrome.recentlyAccessed;exports.recentlyAccessed=recentlyAccessed},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.areRefreshIntervalsDifferent=areRefreshIntervalsDifferent;exports.areTimeRangesDifferent=areTimeRangesDifferent;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var valueOf=function valueOf(o){if(o)return o.valueOf()};function areRefreshIntervalsDifferent(rangeA,rangeB){if(_lodash.default.isObject(rangeA)&&_lodash.default.isObject(rangeB)){if(valueOf(rangeA.value)!==valueOf(rangeB.value)||valueOf(rangeA.pause)!==valueOf(rangeB.pause)){return true}}else{return!_lodash.default.isEqual(rangeA,rangeB)}return false}function areTimeRangesDifferent(rangeA,rangeB){if(rangeA&&rangeB&&_lodash.default.isObject(rangeA)&&_lodash.default.isObject(rangeB)){if(valueOf(rangeA.to)!==valueOf(rangeB.to)||valueOf(rangeA.from)!==valueOf(rangeB.from)){return true}}else{return!_lodash.default.isEqual(rangeA,rangeB)}return false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseQueryString=parseQueryString;var _querystring=_interopRequireDefault(__webpack_require__(342));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function parseQueryString(){var hrefSplit=window.location.href.split("?");if(hrefSplit.length<=1){return{}}return _querystring.default.parse(hrefSplit[1])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataPlugin=void 0;var _expressions=__webpack_require__(540);var _search=__webpack_require__(543);var _query=__webpack_require__(546);var _filter=__webpack_require__(405);var _index_patterns=__webpack_require__(343);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataPlugin=function(){function DataPlugin(){_classCallCheck(this,DataPlugin);_defineProperty(this,"expressions",new _expressions.ExpressionsService);_defineProperty(this,"filter",new _filter.FilterService);_defineProperty(this,"indexPatterns",new _index_patterns.IndexPatternsService);_defineProperty(this,"query",new _query.QueryService);_defineProperty(this,"search",new _search.SearchService)}_createClass(DataPlugin,[{key:"setup",value:function setup(core,_ref){var __LEGACY=_ref.__LEGACY,interpreter=_ref.interpreter;var uiSettings=core.uiSettings;var savedObjectsClient=__LEGACY.savedObjectsClient;var indexPatternsService=this.indexPatterns.setup({uiSettings:uiSettings,savedObjectsClient:savedObjectsClient});return{expressions:this.expressions.setup({interpreter:interpreter}),indexPatterns:indexPatternsService,filter:this.filter.setup({uiSettings:uiSettings,indexPatterns:indexPatternsService.indexPatterns}),query:this.query.setup(),search:this.search.setup(savedObjectsClient)}}},{key:"start",value:function start(core){}},{key:"stop",value:function stop(){this.expressions.stop();this.indexPatterns.stop();this.filter.stop();this.query.stop();this.search.stop()}}]);return DataPlugin}();exports.DataPlugin=DataPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpressionsService=void 0;var _expression_renderer=__webpack_require__(541);var _expression_runner=__webpack_require__(542);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var ExpressionsService=function(){function ExpressionsService(){_classCallCheck(this,ExpressionsService)}_createClass(ExpressionsService,[{key:"setup",value:function setup(_ref){var _ref$interpreter=_ref.interpreter,renderersRegistry=_ref$interpreter.renderersRegistry,getInterpreter=_ref$interpreter.getInterpreter;var run=(0,_expression_runner.createRunFn)(renderersRegistry,getInterpreter().then(function(_ref2){var interpreter=_ref2.interpreter;return interpreter}));return{run:run,ExpressionRenderer:(0,_expression_renderer.createRenderer)(run)}}},{key:"stop",value:function stop(){}}]);return ExpressionsService}();exports.ExpressionsService=ExpressionsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FormattedData",{enumerable:true,get:function get(){return _formatted_data.FormattedData}});Object.defineProperty(exports,"DataAdapter",{enumerable:true,get:function get(){return _data_adapter.DataAdapter}});var _formatted_data=__webpack_require__(975);var _data_adapter=__webpack_require__(976)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FormattedData=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var FormattedData=function FormattedData(raw,formatted){_classCallCheck(this,FormattedData);this.raw=raw;this.formatted=formatted};exports.FormattedData=FormattedData},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataAdapter=void 0;var _events=__webpack_require__(48);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataAdapter=function(_EventEmitter){_inherits(DataAdapter,_EventEmitter);function DataAdapter(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataAdapter);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataAdapter)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"tabular",void 0);_defineProperty(_assertThisInitialized(_this),"tabularOptions",void 0);return _this}_createClass(DataAdapter,[{key:"setTabularLoader",value:function setTabularLoader(callback){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.tabular=callback;this.tabularOptions=options;this.emit("change","tabular")}},{key:"getTabular",value:function getTabular(){if(!this.tabular||!this.tabularOptions){return Promise.resolve({data:null,options:{}})}var options=this.tabularOptions;return Promise.resolve(this.tabular()).then(function(data){return{data:data,options:options}})}}]);return DataAdapter}(_events.EventEmitter);exports.DataAdapter=DataAdapter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RequestStatus",{enumerable:true,get:function get(){return _types.RequestStatus}});Object.defineProperty(exports,"RequestAdapter",{enumerable:true,get:function get(){return _request_adapter.RequestAdapter}});var _types=__webpack_require__(400);var _request_adapter=__webpack_require__(978)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestAdapter=void 0;var _events=__webpack_require__(48);var _lodash=_interopRequireDefault(__webpack_require__(1));var _v=_interopRequireDefault(__webpack_require__(1201));var _request_responder=__webpack_require__(980);var _types=__webpack_require__(400);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestAdapter=function(_EventEmitter){_inherits(RequestAdapter,_EventEmitter);function RequestAdapter(){var _this;_classCallCheck(this,RequestAdapter);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestAdapter).call(this));_defineProperty(_assertThisInitialized(_this),"requests",void 0);_this.requests=new Map;return _this}_createClass(RequestAdapter,[{key:"start",value:function start(name){var _this2=this;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var req=_objectSpread({},params,{name:name,startTime:Date.now(),status:_types.RequestStatus.PENDING,id:_lodash.default.get(params,"id",(0,_v.default)())});this.requests.set(req.id,req);this._onChange();return new _request_responder.RequestResponder(req,function(){return _this2._onChange()})}},{key:"reset",value:function reset(){this.requests=new Map;this._onChange()}},{key:"resetRequest",value:function resetRequest(id){this.requests.delete(id);this._onChange()}},{key:"getRequests",value:function getRequests(){return Array.from(this.requests.values())}},{key:"_onChange",value:function _onChange(){this.emit("change")}}]);return RequestAdapter}(_events.EventEmitter);exports.RequestAdapter=RequestAdapter},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestResponder=void 0;var _i18n=__webpack_require__(2);var _types=__webpack_require__(400);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestResponder=function(){function RequestResponder(request,onChange){_classCallCheck(this,RequestResponder);_defineProperty(this,"request",void 0);_defineProperty(this,"onChange",void 0);this.request=request;this.onChange=onChange}_createClass(RequestResponder,[{key:"json",value:function json(reqJson){this.request.json=reqJson;this.onChange();return this}},{key:"stats",value:function stats(_stats){this.request.stats=_objectSpread({},this.request.stats||{},{},_stats);var startDate=new Date(this.request.startTime);this.request.stats.requestTimestamp={label:_i18n.i18n.translate("inspector.reqTimestampKey",{defaultMessage:"Request timestamp"}),value:startDate.toISOString(),description:_i18n.i18n.translate("inspector.reqTimestampDescription",{defaultMessage:"Time when the start of the request has been logged"})};this.onChange();return this}},{key:"finish",value:function finish(status,response){this.request.time=Date.now()-this.request.startTime;this.request.status=status;this.request.response=response;this.onChange()}},{key:"ok",value:function ok(response){this.finish(_types.RequestStatus.OK,response)}},{key:"error",value:function error(response){this.finish(_types.RequestStatus.ERROR,response)}}]);return RequestResponder}();exports.RequestResponder=RequestResponder},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchService=void 0;var _saved_query_service=__webpack_require__(544);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SearchService=function(){function SearchService(){_classCallCheck(this,SearchService)}_createClass(SearchService,[{key:"setup",value:function setup(savedObjectsClient){return{services:{savedQueryService:(0,_saved_query_service.createSavedQueryService)(savedObjectsClient)}}}},{key:"stop",value:function stop(){}}]);return SearchService}();exports.SearchService=SearchService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _components=__webpack_require__(983);Object.keys(_components).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _components[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _search_bar=__webpack_require__(984);Object.keys(_search_bar).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _search_bar[key]}})})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SearchBar=void 0;var _react=__webpack_require__(5);var _classnames=_interopRequireDefault(__webpack_require__(26));var _react2=_interopRequireWildcard(__webpack_require__(0));var _resizeObserverPolyfill=_interopRequireDefault(__webpack_require__(629));var _lodash=__webpack_require__(1);var _notify=__webpack_require__(9);var _public=__webpack_require__(24);var _save_query_form=__webpack_require__(985);var _saved_query_management_component=__webpack_require__(986);var _saved_query_service=__webpack_require__(544);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchBarUI=function(_Component){_inherits(SearchBarUI,_Component);function SearchBarUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,SearchBarUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SearchBarUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"filterBarRef",null);_defineProperty(_assertThisInitialized(_this),"filterBarWrapperRef",null);_defineProperty(_assertThisInitialized(_this),"state",{isFiltersVisible:true,showSaveQueryModal:false,showSaveNewQueryModal:false,showSavedQueryPopover:false,currentProps:_this.props,query:_this.props.query?_objectSpread({},_this.props.query):undefined,dateRangeFrom:(0,_lodash.get)(_this.props,"dateRangeFrom","now-15m"),dateRangeTo:(0,_lodash.get)(_this.props,"dateRangeTo","now"),savedQueryService:(0,_saved_query_service.createSavedQueryService)(_this.props.savedObjectsClient)});_defineProperty(_assertThisInitialized(_this),"isDirty",function(){if(!_this.props.showDatePicker&&_this.state.query&&_this.props.query){return _this.state.query.query!==_this.props.query.query}return _this.state.query&&_this.props.query&&_this.state.query.query!==_this.props.query.query||_this.state.dateRangeFrom!==_this.props.dateRangeFrom||_this.state.dateRangeTo!==_this.props.dateRangeTo});_defineProperty(_assertThisInitialized(_this),"setFilterBarHeight",function(){requestAnimationFrame(function(){var height=_this.filterBarRef&&_this.state.isFiltersVisible?_this.filterBarRef.clientHeight:0;if(_this.filterBarWrapperRef){_this.filterBarWrapperRef.setAttribute("style","height: ".concat(height,"px"))}})});_defineProperty(_assertThisInitialized(_this),"ro",new _resizeObserverPolyfill.default(_this.setFilterBarHeight));_defineProperty(_assertThisInitialized(_this),"onSave",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(savedQueryMeta){var saveAsNew,savedQueryAttributes,response,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:saveAsNew=_args.length>1&&_args[1]!==undefined?_args[1]:false;if(_this.state.query){_context.next=3;break}return _context.abrupt("return");case 3:savedQueryAttributes={title:savedQueryMeta.title,description:savedQueryMeta.description,query:_this.state.query};if(savedQueryMeta.shouldIncludeFilters){savedQueryAttributes.filters=_this.props.filters}if(savedQueryMeta.shouldIncludeTimefilter&&_this.state.dateRangeTo!==undefined&&_this.state.dateRangeFrom!==undefined&&_this.props.refreshInterval!==undefined&&_this.props.isRefreshPaused!==undefined){savedQueryAttributes.timefilter={from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo,refreshInterval:{value:_this.props.refreshInterval,pause:_this.props.isRefreshPaused}}}_context.prev=6;if(!(_this.props.savedQuery&&!saveAsNew)){_context.next=13;break}_context.next=10;return _this.state.savedQueryService.saveQuery(savedQueryAttributes,{overwrite:true});case 10:response=_context.sent;_context.next=16;break;case 13:_context.next=15;return _this.state.savedQueryService.saveQuery(savedQueryAttributes);case 15:response=_context.sent;case 16:_notify.toastNotifications.addSuccess('Your query "'.concat(response.attributes.title,'" was saved'));_this.setState({showSaveQueryModal:false,showSaveNewQueryModal:false});if(_this.props.onSaved){_this.props.onSaved(response)}if(_this.props.onQuerySubmit){_this.props.onQuerySubmit({query:_this.state.query,dateRange:{from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo}})}_context.next=26;break;case 22:_context.prev=22;_context.t0=_context["catch"](6);_notify.toastNotifications.addDanger("An error occured while saving your query: ".concat(_context.t0.message));throw _context.t0;case 26:case"end":return _context.stop()}}},_callee,null,[[6,22]])}));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"onInitiateSave",function(){_this.setState({showSaveQueryModal:true})});_defineProperty(_assertThisInitialized(_this),"onInitiateSaveNew",function(){_this.setState({showSaveNewQueryModal:true})});_defineProperty(_assertThisInitialized(_this),"onQueryBarChange",function(queryAndDateRange){_this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange.from,dateRangeTo:queryAndDateRange.dateRange.to})});_defineProperty(_assertThisInitialized(_this),"onQueryBarSubmit",function(queryAndDateRange){_this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.from||_this.state.dateRangeFrom,dateRangeTo:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.to||_this.state.dateRangeTo},function(){if(_this.props.onQuerySubmit){_this.props.onQuerySubmit({query:_this.state.query,dateRange:{from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo}})}})});_defineProperty(_assertThisInitialized(_this),"onLoadSavedQuery",function(savedQuery){var dateRangeFrom=(0,_lodash.get)(savedQuery,"attributes.timefilter.from",_this.state.dateRangeFrom);var dateRangeTo=(0,_lodash.get)(savedQuery,"attributes.timefilter.to",_this.state.dateRangeTo);_this.setState({query:savedQuery.attributes.query,dateRangeFrom:dateRangeFrom,dateRangeTo:dateRangeTo});if(_this.props.onSavedQueryUpdated){_this.props.onSavedQueryUpdated(savedQuery)}});return _this}_createClass(SearchBarUI,[{key:"getFilterUpdateFunction",value:function getFilterUpdateFunction(){if(this.props.showFilterBar&&this.props.onFiltersUpdated){return this.props.onFiltersUpdated}return function(filters){}}},{key:"shouldRenderQueryBar",value:function shouldRenderQueryBar(){var showDatePicker=this.props.showDatePicker||this.props.showAutoRefreshOnly;var showQueryInput=this.props.showQueryInput&&this.props.indexPatterns&&this.state.query;return this.props.showQueryBar&&(showDatePicker||showQueryInput)}},{key:"shouldRenderFilterBar",value:function shouldRenderFilterBar(){return this.props.showFilterBar&&this.props.filters&&this.props.indexPatterns}},{key:"componentDidMount",value:function componentDidMount(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.observe(this.filterBarRef)}}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.unobserve(this.filterBarRef)}}},{key:"render",value:function render(){var _this2=this;if(!this.props.uiSettings){return null}var savedQueryManagement=this.state.query&&this.props.onClearSavedQuery&&_react2.default.createElement(_saved_query_management_component.SavedQueryManagementComponent,{showSaveQuery:this.props.showSaveQuery,loadedSavedQuery:this.props.savedQuery,onSave:this.onInitiateSave,onSaveAsNew:this.onInitiateSaveNew,onLoad:this.onLoadSavedQuery,savedQueryService:this.state.savedQueryService,onClearSavedQuery:this.props.onClearSavedQuery});var queryBar;if(this.shouldRenderQueryBar()){queryBar=_react2.default.createElement(_public.QueryBar,{toasts:this.props.toasts,uiSettings:this.props.uiSettings,savedObjectsClient:this.props.savedObjectsClient,query:this.state.query,screenTitle:this.props.screenTitle,onSubmit:this.onQueryBarSubmit,appName:this.props.appName,indexPatterns:this.props.indexPatterns,store:this.props.store,prepend:this.props.showFilterBar?savedQueryManagement:undefined,showDatePicker:this.props.showDatePicker,dateRangeFrom:this.state.dateRangeFrom,dateRangeTo:this.state.dateRangeTo,isRefreshPaused:this.props.isRefreshPaused,refreshInterval:this.props.refreshInterval,showAutoRefreshOnly:this.props.showAutoRefreshOnly,showQueryInput:this.props.showQueryInput,onRefreshChange:this.props.onRefreshChange,onChange:this.onQueryBarChange,isDirty:this.isDirty(),customSubmitButton:this.props.customSubmitButton?this.props.customSubmitButton:undefined})}var filterBar;if(this.shouldRenderFilterBar()){var filterGroupClasses=(0,_classnames.default)("globalFilterGroup__wrapper",{"globalFilterGroup__wrapper-isVisible":this.state.isFiltersVisible});filterBar=_react2.default.createElement("div",{id:"GlobalFilterGroup",ref:function ref(node){_this2.filterBarWrapperRef=node},className:filterGroupClasses},_react2.default.createElement("div",{ref:function ref(node){_this2.filterBarRef=node}},_react2.default.createElement(_public.FilterBar,{className:"globalFilterGroup__filterBar",uiSettings:this.props.uiSettings,filters:this.props.filters,onFiltersUpdated:this.getFilterUpdateFunction(),indexPatterns:this.props.indexPatterns})))}return _react2.default.createElement("div",{className:"globalQueryBar"},queryBar,filterBar,this.state.showSaveQueryModal?_react2.default.createElement(_save_query_form.SaveQueryForm,{savedQuery:this.props.savedQuery?this.props.savedQuery.attributes:undefined,savedQueryService:this.state.savedQueryService,onSave:this.onSave,onClose:function onClose(){return _this2.setState({showSaveQueryModal:false})},showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.props.showDatePicker}):null,this.state.showSaveNewQueryModal?_react2.default.createElement(_save_query_form.SaveQueryForm,{savedQueryService:this.state.savedQueryService,onSave:function onSave(savedQueryMeta){return _this2.onSave(savedQueryMeta,true)},onClose:function onClose(){return _this2.setState({showSaveNewQueryModal:false})},showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.props.showDatePicker}):null)}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if((0,_lodash.isEqual)(prevState.currentProps,nextProps)){return null}var nextQuery=null;if(nextProps.query&&nextProps.query.query!==(0,_lodash.get)(prevState,"currentProps.query.query")){nextQuery={query:nextProps.query.query,language:nextProps.query.language}}else if(nextProps.query&&prevState.query&&nextProps.query.language!==prevState.query.language){nextQuery={query:"",language:nextProps.query.language}}var nextDateRange=null;if(nextProps.dateRangeFrom!==(0,_lodash.get)(prevState,"currentProps.dateRangeFrom")||nextProps.dateRangeTo!==(0,_lodash.get)(prevState,"currentProps.dateRangeTo")){nextDateRange={dateRangeFrom:nextProps.dateRangeFrom,dateRangeTo:nextProps.dateRangeTo}}var nextState={currentProps:nextProps};if(nextQuery){nextState.query=nextQuery}if(nextDateRange){nextState.dateRangeFrom=nextDateRange.dateRangeFrom;nextState.dateRangeTo=nextDateRange.dateRangeTo}return nextState}}]);return SearchBarUI}(_react2.Component);_defineProperty(SearchBarUI,"defaultProps",{showQueryBar:true,showFilterBar:true,showDatePicker:true,showAutoRefreshOnly:false});var SearchBar=(0,_react.injectI18n)(SearchBarUI);exports.SearchBar=SearchBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SaveQueryForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var SaveQueryForm=function SaveQueryForm(_ref){var savedQuery=_ref.savedQuery,savedQueryService=_ref.savedQueryService,onSave=_ref.onSave,onClose=_ref.onClose,_ref$showFilterOption=_ref.showFilterOption,showFilterOption=_ref$showFilterOption===void 0?true:_ref$showFilterOption,_ref$showTimeFilterOp=_ref.showTimeFilterOption,showTimeFilterOption=_ref$showTimeFilterOp===void 0?true:_ref$showTimeFilterOp;var _useState=(0,_react.useState)(savedQuery?savedQuery.title:""),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=(0,_react.useState)(savedQuery?savedQuery.description:""),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=(0,_react.useState)([]),_useState6=_slicedToArray(_useState5,2),savedQueries=_useState6[0],setSavedQueries=_useState6[1];var _useState7=(0,_react.useState)(savedQuery?!!savedQuery.filters:true),_useState8=_slicedToArray(_useState7,2),shouldIncludeFilters=_useState8[0],setShouldIncludeFilters=_useState8[1];var _useState9=(0,_react.useState)(savedQuery?!!savedQuery.timefilter:false),_useState10=_slicedToArray(_useState9,2),shouldIncludeTimefilter=_useState10[0],setIncludeTimefilter=_useState10[1];var _useState11=(0,_react.useState)([]),_useState12=_slicedToArray(_useState11,2),formErrors=_useState12[0],setFormErrors=_useState12[1];(0,_react.useEffect)(function(){var fetchQueries=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var allSavedQueries,sortedAllSavedQueries;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return savedQueryService.getAllSavedQueries();case 2:allSavedQueries=_context.sent;sortedAllSavedQueries=(0,_lodash.sortBy)(allSavedQueries,"attributes.title");setSavedQueries(sortedAllSavedQueries);case 5:case"end":return _context.stop()}}},_callee)}));return function fetchQueries(){return _ref2.apply(this,arguments)}}();fetchQueries()},[]);var savedQueryDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});var titleConflictErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.titleConflictText",{defaultMessage:"Name conflicts with an existing saved query"});var titleMissingErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.titleMissingText",{defaultMessage:"Name is required"});var whitespaceErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.whitespaceErrorText",{defaultMessage:"Name cannot contain leading or trailing whitespace"});var validate=function validate(){var errors=[];if(!title.length){errors.push(titleMissingErrorText)}if(title.length>title.trim().length){errors.push(whitespaceErrorText)}if(!!savedQueries.find(function(existingSavedQuery){return!savedQuery&&existingSavedQuery.attributes.title===title})){errors.push(titleConflictErrorText)}if(!(0,_lodash.isEqual)(errors,formErrors)){setFormErrors(errors)}};var hasErrors=formErrors.length>0;if(hasErrors){validate()}var saveQueryForm=_react.default.createElement(_eui.EuiForm,{isInvalid:hasErrors,error:formErrors,"data-test-subj":"saveQueryForm"},_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiText,{color:"subdued"},savedQueryDescriptionText)),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.search.searchBar.savedQueryNameLabelText",{defaultMessage:"Name"}),helpText:_i18n.i18n.translate("data.search.searchBar.savedQueryNameHelpText",{defaultMessage:"Name is required. Name cannot contain leading or trailing whitespace. Name must be unique."}),isInvalid:hasErrors},_react.default.createElement(_eui.EuiFieldText,{disabled:!!savedQuery,value:title,name:"title",onChange:function onChange(event){setTitle(event.target.value)},"data-test-subj":"saveQueryFormTitle",isInvalid:hasErrors,onBlur:validate})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionLabelText",{defaultMessage:"Description"})},_react.default.createElement(_eui.EuiFieldText,{value:description,name:"description",onChange:function onChange(event){setDescription(event.target.value)},"data-test-subj":"saveQueryFormDescription"})),showFilterOption&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"shouldIncludeFilters",label:_i18n.i18n.translate("data.search.searchBar.savedQueryIncludeFiltersLabelText",{defaultMessage:"Include filters"}),checked:shouldIncludeFilters,onChange:function onChange(){setShouldIncludeFilters(!shouldIncludeFilters)},"data-test-subj":"saveQueryFormIncludeFiltersOption"})),showTimeFilterOption&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"shouldIncludeTimefilter",label:_i18n.i18n.translate("data.search.searchBar.savedQueryIncludeTimeFilterLabelText",{defaultMessage:"Include time filter"}),checked:shouldIncludeTimefilter,onChange:function onChange(){setIncludeTimefilter(!shouldIncludeTimefilter)},"data-test-subj":"saveQueryFormIncludeTimeFilterOption"})));return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:onClose,initialFocus:"[name=title]"},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_i18n.i18n.translate("data.search.searchBar.savedQueryFormTitle",{defaultMessage:"Save query"}))),_react.default.createElement(_eui.EuiModalBody,null,saveQueryForm),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:onClose,"data-test-subj":"savedQueryFormCancelButton"},_i18n.i18n.translate("data.search.searchBar.savedQueryFormCancelButtonText",{defaultMessage:"Cancel"})),_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onSave({title:title,description:description,shouldIncludeFilters:shouldIncludeFilters,shouldIncludeTimefilter:shouldIncludeTimefilter})},fill:true,"data-test-subj":"savedQueryFormSaveButton",disabled:hasErrors},_i18n.i18n.translate("data.search.searchBar.savedQueryFormSaveButtonText",{defaultMessage:"Save"})))))};exports.SaveQueryForm=SaveQueryForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedQueryManagementComponent=void 0;var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(1);var _saved_query_list_item=__webpack_require__(987);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var perPage=50;var SavedQueryManagementComponent=function SavedQueryManagementComponent(_ref){var showSaveQuery=_ref.showSaveQuery,loadedSavedQuery=_ref.loadedSavedQuery,onSave=_ref.onSave,onSaveAsNew=_ref.onSaveAsNew,onLoad=_ref.onLoad,onClearSavedQuery=_ref.onClearSavedQuery,savedQueryService=_ref.savedQueryService;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=(0,_react.useState)([]),_useState4=_slicedToArray(_useState3,2),savedQueries=_useState4[0],setSavedQueries=_useState4[1];var _useState5=(0,_react.useState)(0),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setTotalCount=_useState6[1];var _useState7=(0,_react.useState)(0),_useState8=_slicedToArray(_useState7,2),activePage=_useState8[0],setActivePage=_useState8[1];(0,_react.useEffect)(function(){var fetchCountAndSavedQueries=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var savedQueryCount,savedQueryItems,sortedSavedQueryItems;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return savedQueryService.getSavedQueryCount();case 2:savedQueryCount=_context.sent;setTotalCount(savedQueryCount);_context.next=6;return savedQueryService.findSavedQueries("",perPage,activePage+1);case 6:savedQueryItems=_context.sent;sortedSavedQueryItems=(0,_lodash.sortBy)(savedQueryItems,"attributes.title");setSavedQueries(sortedSavedQueryItems);case 9:case"end":return _context.stop()}}},_callee)}));return function fetchCountAndSavedQueries(){return _ref2.apply(this,arguments)}}();if(isOpen){fetchCountAndSavedQueries()}},[isOpen,activePage]);var goToPage=function goToPage(pageNumber){setActivePage(pageNumber)};var savedQueryDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});var noSavedQueriesDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryNoSavedQueriesText",{defaultMessage:"There are no saved queries."})+" "+savedQueryDescriptionText;var savedQueryPopoverTitleText=_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverTitleText",{defaultMessage:"Saved Queries"});var onDeleteSavedQuery=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(savedQuery){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setSavedQueries(savedQueries.filter(function(currentSavedQuery){return currentSavedQuery.id!==savedQuery.id}));if(loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id){onClearSavedQuery()}_context2.next=4;return savedQueryService.deleteSavedQuery(savedQuery.id);case 4:case"end":return _context2.stop()}}},_callee2)}));return function onDeleteSavedQuery(_x){return _ref3.apply(this,arguments)}}();var savedQueryPopoverButton=_react.default.createElement(_eui.EuiButtonEmpty,{className:"euiFormControlLayout__prepend",iconType:"arrowDown",iconSide:"right",onClick:function onClick(){setIsOpen(!isOpen)},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),"data-test-subj":"saved-query-management-popover-button"},"#");var savedQueryRows=function savedQueryRows(){var savedQueriesWithoutCurrent=savedQueries.filter(function(savedQuery){if(!loadedSavedQuery)return true;return savedQuery.id!==loadedSavedQuery.id});var savedQueriesReordered=loadedSavedQuery&&savedQueriesWithoutCurrent.length!==savedQueries.length?[loadedSavedQuery].concat(_toConsumableArray(savedQueriesWithoutCurrent)):_toConsumableArray(savedQueriesWithoutCurrent);return savedQueriesReordered.map(function(savedQuery){return _react.default.createElement(_saved_query_list_item.SavedQueryListItem,{key:savedQuery.id,savedQuery:savedQuery,isSelected:!!loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id,onSelect:function onSelect(savedQueryToSelect){onLoad(savedQueryToSelect);setIsOpen(false)},onDelete:function onDelete(savedQueryToDelete){return onDeleteSavedQuery(savedQueryToDelete)},showWriteOperations:!!showSaveQuery})})};return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiPopover,{id:"savedQueryPopover",button:savedQueryPopoverButton,isOpen:isOpen,closePopover:function closePopover(){setIsOpen(false)},anchorPosition:"downLeft",panelPaddingSize:"none",ownFocus:true},_react.default.createElement("div",{className:"kbnSavedQueryManagement__popover","data-test-subj":"saved-query-management-popover"},_react.default.createElement(_eui.EuiPopoverTitle,{id:"savedQueryManagementPopoverTitle"},savedQueryPopoverTitleText),savedQueries.length>0?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"kbnSavedQueryManagement__text"},_react.default.createElement("p",null,savedQueryDescriptionText)),_react.default.createElement("div",{className:"kbnSavedQueryManagement__listWrapper"},_react.default.createElement(_eui.EuiListGroup,{flush:true,className:"kbnSavedQueryManagement__list","aria-labelledby":"savedQueryManagementPopoverTitle"},savedQueryRows())),_react.default.createElement(_eui.EuiPagination,{className:"kbnSavedQueryManagement__pagination",pageCount:Math.ceil(count/perPage),activePage:activePage,onPageClick:goToPage})):_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"kbnSavedQueryManagement__text"},_react.default.createElement("p",null,noSavedQueriesDescriptionText)),_react.default.createElement(_eui.EuiSpacer,{size:"s"})),_react.default.createElement(_eui.EuiPopoverFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"rowReverse",gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:false,wrap:true},showSaveQuery&&loadedSavedQuery&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:function onClick(){return onSave()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonAriaLabel",{defaultMessage:"Save changes to {title}",values:{title:loadedSavedQuery.attributes.title}}),"data-test-subj":"saved-query-management-save-changes-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonText",{defaultMessage:"Save changes"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onSaveAsNew()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonAriaLabel",{defaultMessage:"Save as a new saved query"}),"data-test-subj":"saved-query-management-save-as-new-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonText",{defaultMessage:"Save as new"})))),showSaveQuery&&!loadedSavedQuery&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:function onClick(){return onSave()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveButtonAriaLabel",{defaultMessage:"Save a new saved query"}),"data-test-subj":"saved-query-management-save-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveButtonText",{defaultMessage:"Save current query"}))),_react.default.createElement(_eui.EuiFlexItem,null),_react.default.createElement(_eui.EuiFlexItem,{grow:false},loadedSavedQuery&&_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",flush:"left",onClick:function onClick(){return onClearSavedQuery()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverClearButtonAriaLabel",{defaultMessage:"Clear current saved query"}),"data-test-subj":"saved-query-management-clear-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverClearButtonText",{defaultMessage:"Clear"}))))))))};exports.SavedQueryManagementComponent=SavedQueryManagementComponent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedQueryListItem=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(26));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var SavedQueryListItem=function SavedQueryListItem(_ref){var savedQuery=_ref.savedQuery,isSelected=_ref.isSelected,onSelect=_ref.onSelect,onDelete=_ref.onDelete,showWriteOperations=_ref.showWriteOperations;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),showDeletionConfirmationModal=_useState2[0],setShowDeletionConfirmationModal=_useState2[1];var selectButtonAriaLabelText=isSelected?_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemSelectedButtonAriaLabel",{defaultMessage:"Saved query button selected {savedQueryName}. Press to clear any changes.",values:{savedQueryName:savedQuery.attributes.title}}):_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemButtonAriaLabel",{defaultMessage:"Saved query button {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}});var selectButtonDataTestSubj=isSelected?"load-saved-query-".concat(savedQuery.attributes.title,"-button saved-query-list-item-selected"):"load-saved-query-".concat(savedQuery.attributes.title,"-button");var classes=(0,_classnames.default)("kbnSavedQueryListItem",{"kbnSavedQueryListItem-selected":isSelected});var label=_react.default.createElement("span",{className:"kbnSavedQueryListItem__label"},_react.default.createElement("span",{className:"kbnSavedQueryListItem__labelText"},savedQuery.attributes.title)," ",savedQuery.attributes.description&&_react.default.createElement(_eui.EuiIconTip,{type:"iInCircle",content:savedQuery.attributes.description,"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemDescriptionAriaLabel",{defaultMessage:"{savedQueryName} description",values:{savedQueryName:savedQuery.attributes.title}})}));return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiListGroupItem,{className:classes,key:savedQuery.id,"data-test-subj":"saved-query-list-item ".concat(selectButtonDataTestSubj," ").concat(isSelected?"saved-query-list-item-selected":""),isActive:isSelected,onClick:function onClick(){onSelect(savedQuery)},"aria-label":selectButtonAriaLabelText,label:label,iconType:isSelected?"check":undefined,extraAction:showWriteOperations?{color:"danger",onClick:function onClick(){return setShowDeletionConfirmationModal(true)},iconType:"trash",iconSize:"s","aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),"data-test-subj":"delete-saved-query-".concat(savedQuery.attributes.title,"-button")}:undefined}),showDeletionConfirmationModal&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionTitle",{defaultMessage:'Delete "{savedQueryName}"?',values:{savedQueryName:savedQuery.attributes.title}}),confirmButtonText:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionConfirmButtonText",{defaultMessage:"Delete"}),cancelButtonText:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionCancelButtonText",{defaultMessage:"Cancel"}),onConfirm:function onConfirm(){onDelete(savedQuery);setShowDeletionConfirmationModal(false)},buttonColor:"danger",onCancel:function onCancel(){setShowDeletionConfirmationModal(false)}})))};exports.SavedQueryListItem=SavedQueryListItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Query",{enumerable:true,get:function get(){return _query_bar.Query}});Object.defineProperty(exports,"QueryBar",{enumerable:true,get:function get(){return _query_bar.QueryBar}});Object.defineProperty(exports,"QueryBarInput",{enumerable:true,get:function get(){return _query_bar.QueryBarInput}});exports.QueryService=void 0;var _query_bar=__webpack_require__(989);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var QueryService=function(){function QueryService(){_classCallCheck(this,QueryService)}_createClass(QueryService,[{key:"setup",value:function setup(){return{helpers:{fromUser:_query_bar.fromUser,toUser:_query_bar.toUser,getQueryLog:_query_bar.getQueryLog}}}},{key:"start",value:function start(){}},{key:"stop",value:function stop(){}}]);return QueryService}();exports.QueryService=QueryService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"QueryBar",{enumerable:true,get:function get(){return _components.QueryBar}});Object.defineProperty(exports,"QueryBarInput",{enumerable:true,get:function get(){return _components.QueryBarInput}});Object.defineProperty(exports,"fromUser",{enumerable:true,get:function get(){return _from_user.fromUser}});Object.defineProperty(exports,"toUser",{enumerable:true,get:function get(){return _to_user.toUser}});Object.defineProperty(exports,"getQueryLog",{enumerable:true,get:function get(){return _get_query_log.getQueryLog}});Object.defineProperty(exports,"Query",{enumerable:true,get:function get(){return _types.Query}});var _components=__webpack_require__(990);var _from_user=__webpack_require__(548);var _to_user=__webpack_require__(549);var _get_query_log=__webpack_require__(401);var _types=__webpack_require__(1014)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"QueryBar",{enumerable:true,get:function get(){return _query_bar.QueryBar}});Object.defineProperty(exports,"QueryBarInput",{enumerable:true,get:function get(){return _query_bar_input.QueryBarInput}});var _query_bar=__webpack_require__(991);var _query_bar_input=__webpack_require__(547)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.QueryBar=exports.QueryBarUI=void 0;var _esQuery=__webpack_require__(20);var _classnames=_interopRequireDefault(__webpack_require__(26));var _react=_interopRequireWildcard(__webpack_require__(0));var _timefilter=__webpack_require__(22);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _documentation_links=__webpack_require__(60);var _query_bar_input=__webpack_require__(547);var _get_query_log=__webpack_require__(401);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var QueryBarUI=function(_Component){_inherits(QueryBarUI,_Component);function QueryBarUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,QueryBarUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(QueryBarUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isDateRangeInvalid:false});_defineProperty(_assertThisInitialized(_this),"inputRef",null);_defineProperty(_assertThisInitialized(_this),"persistedLog",void 0);_defineProperty(_assertThisInitialized(_this),"onClickSubmitButton",function(event){if(_this.persistedLog&&_this.props.query){_this.persistedLog.add(_this.props.query.query)}event.preventDefault();_this.onSubmit({query:_this.props.query,dateRange:_this.getDateRange()})});_defineProperty(_assertThisInitialized(_this),"onQueryChange",function(query){_this.props.onChange({query:query,dateRange:_this.getDateRange()})});_defineProperty(_assertThisInitialized(_this),"onTimeChange",function(_ref){var start=_ref.start,end=_ref.end,isInvalid=_ref.isInvalid,isQuickSelection=_ref.isQuickSelection;_this.setState({isDateRangeInvalid:isInvalid},function(){var retVal={query:_this.props.query,dateRange:{from:start,to:end}};if(isQuickSelection){_this.props.onSubmit(retVal)}else{_this.props.onChange(retVal)}})});_defineProperty(_assertThisInitialized(_this),"onSubmit",function(_ref2){var query=_ref2.query,dateRange=_ref2.dateRange;_this.handleLuceneSyntaxWarning();_timefilter.timeHistory.add(dateRange);_this.props.onSubmit({query:query,dateRange:dateRange})});_defineProperty(_assertThisInitialized(_this),"onInputSubmit",function(query){_this.onSubmit({query:query,dateRange:_this.getDateRange()})});return _this}_createClass(QueryBarUI,[{key:"getDateRange",value:function getDateRange(){var defaultTimeSetting=this.props.uiSettings.get("timepicker:timeDefaults");return{from:this.props.dateRangeFrom||defaultTimeSetting.from,to:this.props.dateRangeTo||defaultTimeSetting.to}}},{key:"componentDidMount",value:function componentDidMount(){if(!this.props.query)return;this.persistedLog=(0,_get_query_log.getQueryLog)(this.props.uiSettings,this.props.appName,this.props.query.language)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(!this.props.query||!prevProps.query)return;if(prevProps.query.language!==this.props.query.language){this.persistedLog=(0,_get_query_log.getQueryLog)(this.props.uiSettings,this.props.appName,this.props.query.language)}}},{key:"render",value:function render(){var classes=(0,_classnames.default)("kbnQueryBar",{"kbnQueryBar--withDatePicker":this.props.showDatePicker});return _react.default.createElement(_eui.EuiFlexGroup,{className:classes,responsive:!!this.props.showDatePicker,gutterSize:"s",justifyContent:"flexEnd"},this.renderQueryInput(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},this.renderUpdateButton()))}},{key:"renderQueryInput",value:function renderQueryInput(){if(!this.shouldRenderQueryInput())return;return _react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_query_bar_input.QueryBarInput,{appName:this.props.appName,disableAutoFocus:this.props.disableAutoFocus,indexPatterns:this.props.indexPatterns,prepend:this.props.prepend,query:this.props.query,screenTitle:this.props.screenTitle,store:this.props.store,onChange:this.onQueryChange,onSubmit:this.onInputSubmit,persistedLog:this.persistedLog,uiSettings:this.props.uiSettings,savedObjectsClient:this.props.savedObjectsClient}))}},{key:"shouldRenderDatePicker",value:function shouldRenderDatePicker(){return this.props.showDatePicker||this.props.showAutoRefreshOnly}},{key:"shouldRenderQueryInput",value:function shouldRenderQueryInput(){return this.props.showQueryInput&&this.props.indexPatterns&&this.props.query&&this.props.store}},{key:"renderUpdateButton",value:function renderUpdateButton(){var button=this.props.customSubmitButton?_react.default.cloneElement(this.props.customSubmitButton,{onClick:this.onClickSubmitButton}):_react.default.createElement(_eui.EuiSuperUpdateButton,{needsUpdate:this.props.isDirty,isDisabled:this.state.isDateRangeInvalid,onClick:this.onClickSubmitButton,"data-test-subj":"querySubmitButton"});if(!this.shouldRenderDatePicker()){return button}return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},this.renderDatePicker(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},button))}},{key:"renderDatePicker",value:function renderDatePicker(){if(!this.shouldRenderDatePicker()){return null}var recentlyUsedRanges=_timefilter.timeHistory.get().map(function(_ref3){var from=_ref3.from,to=_ref3.to;return{start:from,end:to}});var commonlyUsedRanges=this.props.uiSettings.get("timepicker:quickRanges").map(function(_ref4){var from=_ref4.from,to=_ref4.to,display=_ref4.display;return{start:from,end:to,label:display}});return _react.default.createElement(_eui.EuiFlexItem,{className:"kbnQueryBar__datePickerWrapper"},_react.default.createElement(_eui.EuiSuperDatePicker,{start:this.props.dateRangeFrom,end:this.props.dateRangeTo,isPaused:this.props.isRefreshPaused,refreshInterval:this.props.refreshInterval,onTimeChange:this.onTimeChange,onRefreshChange:this.props.onRefreshChange,showUpdateButton:false,recentlyUsedRanges:recentlyUsedRanges,commonlyUsedRanges:commonlyUsedRanges,dateFormat:this.props.uiSettings.get("dateFormat"),isAutoRefreshOnly:this.props.showAutoRefreshOnly}))}},{key:"handleLuceneSyntaxWarning",value:function handleLuceneSyntaxWarning(){var _this2=this;if(!this.props.query)return;var _this$props=this.props,intl=_this$props.intl,store=_this$props.store,toasts=_this$props.toasts;var _this$props$query=this.props.query,query=_this$props$query.query,language=_this$props$query.language;if(language==="kuery"&&typeof query==="string"&&(!store||!store.get("kibana.luceneSyntaxWarningOptOut"))&&(0,_esQuery.doesKueryExpressionHaveLuceneSyntaxError)(query)){var toast=toasts.addWarning({title:intl.formatMessage({id:"data.query.queryBar.luceneSyntaxWarningTitle",defaultMessage:"Lucene syntax warning"}),text:_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.luceneSyntaxWarningMessage",defaultMessage:"It looks like you may be trying to use Lucene query syntax, although you have Kibana Query Language (KQL) selected. Please review the KQL docs {link}.",values:{link:_react.default.createElement(_eui.EuiLink,{href:_documentation_links.documentationLinks.query.kueryQuerySyntax,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsDescription.docsLinkText",defaultMessage:"here"}))}})),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return _this2.onLuceneSyntaxWarningOptOut(toast)}},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.luceneSyntaxWarningOptOutText",defaultMessage:"Don't show again"})))))})}}},{key:"onLuceneSyntaxWarningOptOut",value:function onLuceneSyntaxWarningOptOut(toast){if(!this.props.store)return;this.props.store.set("kibana.luceneSyntaxWarningOptOut",true);this.props.toasts.remove(toast)}}]);return QueryBarUI}(_react.Component);exports.QueryBarUI=QueryBarUI;_defineProperty(QueryBarUI,"defaultProps",{showQueryInput:true,showDatePicker:true,showAutoRefreshOnly:false});var QueryBar=(0,_react2.injectI18n)(QueryBarUI);exports.QueryBar=QueryBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDocLink=void 0;var _lodash=__webpack_require__(1);var _documentation_links=__webpack_require__(116);var getDocLink=function getDocLink(id){return(0,_lodash.get)(_documentation_links.documentationLinks,id)};exports.getDocLink=getDocLink},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addAutocompleteProvider=addAutocompleteProvider;exports.getAutocompleteProvider=getAutocompleteProvider;var autocompleteProviders=new Map;function addAutocompleteProvider(language,provider){autocompleteProviders.set(language,provider)}function getAutocompleteProvider(language){return autocompleteProviders.get(language)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createKfetch=createKfetch;exports.withDefaultOptions=withDefaultOptions;exports.addInterceptor=exports.resetInterceptors=void 0;var _lodash=__webpack_require__(1);var _kfetch_error=__webpack_require__(995);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var interceptors=[];var resetInterceptors=function resetInterceptors(){return interceptors.length=0};exports.resetInterceptors=resetInterceptors;var addInterceptor=function addInterceptor(interceptor){return interceptors.push(interceptor)};exports.addInterceptor=addInterceptor;function createKfetch(http){return function kfetch(options){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$prependBasePath=_ref.prependBasePath,prependBasePath=_ref$prependBasePath===void 0?true:_ref$prependBasePath;return responseInterceptors(requestInterceptors(withDefaultOptions(options)).then(function(_ref2){var pathname=_ref2.pathname,restOptions=_objectWithoutProperties(_ref2,["pathname"]);return http.fetch(pathname,_objectSpread({},restOptions,{prependBasePath:prependBasePath}))}).catch(function(err){throw new _kfetch_error.KFetchError(err.response||{statusText:err.message},err.body)}))}}function requestInterceptors(config){return interceptors.reduceRight(function(acc,interceptor){return acc.then(interceptor.request,interceptor.requestError)},Promise.resolve(config))}function responseInterceptors(responsePromise){return interceptors.reduce(function(acc,interceptor){return acc.then(interceptor.response,interceptor.responseError)},responsePromise)}function withDefaultOptions(options){var withDefaults=(0,_lodash.merge)({method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}},options);if(options&&options.headers&&"Content-Type"in options.headers&&options.headers["Content-Type"]===undefined){withDefaults.headers["Content-Type"]=undefined}return withDefaults}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.KFetchError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var KFetchError=function(_Error){_inherits(KFetchError,_Error);function KFetchError(res,body){var _this;_classCallCheck(this,KFetchError);_this=_possibleConstructorReturn(this,_getPrototypeOf(KFetchError).call(this,res.statusText));_this.res=res;_this.body=body;if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),KFetchError)}return _this}return KFetchError}(_wrapNativeSuper(Error));exports.KFetchError=KFetchError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _match_pairs=__webpack_require__(997);Object.keys(_match_pairs).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _match_pairs[key]}})});var _from_user=__webpack_require__(548);Object.keys(_from_user).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _from_user[key]}})});var _to_user=__webpack_require__(549);Object.keys(_to_user).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _to_user[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.matchPairs=matchPairs;var pairs=["()","[]","{}","''",'""'];var openers=pairs.map(function(pair){return pair[0]});var closers=pairs.map(function(pair){return pair[1]});function matchPairs(_ref){var value=_ref.value,selectionStart=_ref.selectionStart,selectionEnd=_ref.selectionEnd,key=_ref.key,metaKey=_ref.metaKey,updateQuery=_ref.updateQuery,preventDefault=_ref.preventDefault;if(shouldMoveCursorForward(key,value,selectionStart,selectionEnd)){preventDefault();updateQuery(value,selectionStart+1,selectionEnd+1)}else if(shouldInsertMatchingCloser(key,value,selectionStart,selectionEnd)){preventDefault();var newValue=value.substr(0,selectionStart)+key+value.substring(selectionStart,selectionEnd)+closers[openers.indexOf(key)]+value.substr(selectionEnd);updateQuery(newValue,selectionStart+1,selectionEnd+1)}else if(shouldRemovePair(key,metaKey,value,selectionStart,selectionEnd)){preventDefault();var _newValue=value.substr(0,selectionEnd-1)+value.substr(selectionEnd+1);updateQuery(_newValue,selectionStart-1,selectionEnd-1)}}function shouldMoveCursorForward(key,value,selectionStart,selectionEnd){if(!closers.includes(key)){return false}if(selectionStart!==selectionEnd){return false}return value.charAt(selectionEnd)===key}function shouldInsertMatchingCloser(key,value,selectionStart,selectionEnd){if(!openers.includes(key)){return false}if(selectionStart!==selectionEnd){return true}var precedingCharacter=value.charAt(selectionStart-1);var followingCharacter=value.charAt(selectionStart+1);if(precedingCharacter==="\\"){return false}return!(['"',"'"].includes(key)&&(isAlphanumeric(precedingCharacter)||isAlphanumeric(followingCharacter)))}function shouldRemovePair(key,metaKey,value,selectionStart,selectionEnd){if(key!=="Backspace"||metaKey){return false}if(selectionStart!==selectionEnd){return false}return pairs.includes(value.substr(selectionEnd-1,2))}function isAlphanumeric(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return value.match(/[a-zA-Z0-9_]/)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.QueryLanguageSwitcher=void 0;var _eui=__webpack_require__(3);var _react=__webpack_require__(5);var _react2=_interopRequireWildcard(__webpack_require__(0));var _documentation_links=__webpack_require__(116);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var kueryQuerySyntaxDocs=_documentation_links.documentationLinks.query.kueryQuerySyntax;var QueryLanguageSwitcher=function(_Component){_inherits(QueryLanguageSwitcher,_Component);function QueryLanguageSwitcher(){var _getPrototypeOf2;var _this;_classCallCheck(this,QueryLanguageSwitcher);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(QueryLanguageSwitcher)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_defineProperty(_assertThisInitialized(_this),"onSwitchChange",function(){var newLanguage=_this.props.language==="lucene"?"kuery":"lucene";_this.props.onSelectLanguage(newLanguage)});return _this}_createClass(QueryLanguageSwitcher,[{key:"render",value:function render(){var luceneLabel=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.luceneLanguageName",defaultMessage:"Lucene"});var kqlLabel=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlLanguageName",defaultMessage:"KQL"});var kqlFullName=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlFullLanguageName",defaultMessage:"Kibana Query Language"});var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:this.togglePopover},this.props.language==="lucene"?luceneLabel:kqlLabel);return _react2.default.createElement(_eui.EuiPopover,{id:"popover",className:"eui-displayBlock",ownFocus:true,anchorPosition:this.props.anchorPosition||"downRight",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,withTitle:true},_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsTitle",defaultMessage:"Syntax options"})),_react2.default.createElement("div",{style:{width:"350px"}},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsDescription",defaultMessage:"The {docsLink} (KQL) offers a simplified query syntax and support for scripted fields. KQL also provides autocomplete if you have a Basic license or above. If you turn off KQL, Kibana uses Lucene.",values:{docsLink:_react2.default.createElement(_eui.EuiLink,{href:kueryQuerySyntaxDocs,target:"_blank"},kqlFullName)}}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{label:kqlFullName},_react2.default.createElement(_eui.EuiSwitch,{id:"queryEnhancementOptIn",name:"popswitch",label:this.props.language==="kuery"?_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlOnLabel",defaultMessage:"On"}):_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlOffLabel",defaultMessage:"Off"}),checked:this.props.language==="kuery",onChange:this.onSwitchChange,"data-test-subj":"languageToggle"})))))}}]);return QueryLanguageSwitcher}(_react2.Component);exports.QueryLanguageSwitcher=QueryLanguageSwitcher},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SuggestionsComponent=void 0;var _lodash=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _suggestion_component=__webpack_require__(1e3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SuggestionsComponent=function(_Component){_inherits(SuggestionsComponent,_Component);function SuggestionsComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,SuggestionsComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SuggestionsComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"childNodes",[]);_defineProperty(_assertThisInitialized(_this),"parentNode",null);_defineProperty(_assertThisInitialized(_this),"scrollIntoView",function(){if(_this.props.index===null){return}var parent=_this.parentNode;var child=_this.childNodes[_this.props.index];if(_this.props.index==null||!parent||!child){return}var scrollTop=Math.max(Math.min(parent.scrollTop,child.offsetTop),child.offsetTop+child.offsetHeight-parent.offsetHeight);parent.scrollTop=scrollTop});_defineProperty(_assertThisInitialized(_this),"handleScroll",function(){if(!_this.props.loadMore||!_this.parentNode){return}var position=_this.parentNode.scrollTop+_this.parentNode.offsetHeight;var height=_this.parentNode.scrollHeight;var remaining=height-position;var margin=50;if(!height||!position){return}if(remaining<=margin){_this.props.loadMore()}});return _this}_createClass(SuggestionsComponent,[{key:"render",value:function render(){var _this2=this;if(!this.props.show||(0,_lodash.isEmpty)(this.props.suggestions)){return null}var suggestions=this.props.suggestions.map(function(suggestion,index){return _react.default.createElement(_suggestion_component.SuggestionComponent,{innerRef:function innerRef(node){return _this2.childNodes[index]=node},selected:index===_this2.props.index,suggestion:suggestion,onClick:_this2.props.onClick,onMouseEnter:function onMouseEnter(){return _this2.props.onMouseEnter(index)},ariaId:"suggestion-"+index,key:"".concat(suggestion.type," - ").concat(suggestion.text)})});return _react.default.createElement("div",{className:"reactSuggestionTypeahead"},_react.default.createElement("div",{className:"kbnTypeahead"},_react.default.createElement("div",{className:"kbnTypeahead__popover"},_react.default.createElement("div",{id:"kbnTypeahead__items",className:"kbnTypeahead__items",role:"listbox",ref:function ref(node){return _this2.parentNode=node},onScroll:this.handleScroll},suggestions))))}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.index!==this.props.index){this.scrollIntoView()}}}]);return SuggestionsComponent}(_react.Component);exports.SuggestionsComponent=SuggestionsComponent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SuggestionComponent=void 0;var _eui=__webpack_require__(3);var _classnames=_interopRequireDefault(__webpack_require__(26));var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEuiIconType(type){switch(type){case"field":return"kqlField";case"value":return"kqlValue";case"recentSearch":return"search";case"conjunction":return"kqlSelector";case"operator":return"kqlOperand";default:throw new Error("Unknown type: ".concat(type))}}var SuggestionComponent=function SuggestionComponent(props){return _react.default.createElement("div",{className:(0,_classnames.default)({kbnTypeahead__item:true,active:props.selected}),role:"option",onClick:function onClick(){return props.onClick(props.suggestion)},onMouseEnter:props.onMouseEnter,ref:props.innerRef,id:props.ariaId,"aria-selected":props.selected,"data-test-subj":"autocompleteSuggestion-".concat(props.suggestion.type,"-").concat(props.suggestion.text.replace(/\s/g,"-"))},_react.default.createElement("div",{className:"kbnSuggestionItem kbnSuggestionItem--"+props.suggestion.type},_react.default.createElement("div",{className:"kbnSuggestionItem__type"},_react.default.createElement(_eui.EuiIcon,{type:getEuiIconType(props.suggestion.type)})),_react.default.createElement("div",{className:"kbnSuggestionItem__text"},props.suggestion.text),_react.default.createElement("div",{className:"kbnSuggestionItem__description"},props.suggestion.description)))};exports.SuggestionComponent=SuggestionComponent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchIndexPatterns=fetchIndexPatterns;var _lodash=__webpack_require__(1);var _index_patterns=__webpack_require__(343);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function fetchIndexPatterns(_x,_x2,_x3){return _fetchIndexPatterns.apply(this,arguments)}function _fetchIndexPatterns(){_fetchIndexPatterns=_asyncToGenerator(regeneratorRuntime.mark(function _callee(savedObjectsClient,indexPatternStrings,uiSettings){var searchString,indexPatternsFromSavedObjects,exactMatches,defaultIndex,allMatches;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!indexPatternStrings||(0,_lodash.isEmpty)(indexPatternStrings))){_context.next=2;break}return _context.abrupt("return",[]);case 2:searchString=indexPatternStrings.map(function(string){return'"'.concat(string,'"')}).join(" | ");_context.next=5;return savedObjectsClient.find({type:"index-pattern",fields:["title","fields"],search:searchString,searchFields:["title"]});case 5:indexPatternsFromSavedObjects=_context.sent;exactMatches=indexPatternsFromSavedObjects.savedObjects.filter(function(savedObject){return indexPatternStrings.includes(savedObject.attributes.title)});defaultIndex=uiSettings.get("defaultIndex");if(!(exactMatches.length===indexPatternStrings.length)){_context.next=12;break}_context.t0=exactMatches;_context.next=19;break;case 12:_context.t1=[];_context.t2=_toConsumableArray(exactMatches);_context.next=16;return savedObjectsClient.get("index-pattern",defaultIndex);case 16:_context.t3=_context.sent;_context.t4=[_context.t3];_context.t0=_context.t1.concat.call(_context.t1,_context.t2,_context.t4);case 19:allMatches=_context.t0;return _context.abrupt("return",allMatches.map(_index_patterns.getFromSavedObject));case 21:case"end":return _context.stop()}}},_callee)}));return _fetchIndexPatterns.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexPatternSelect",{enumerable:true,get:function get(){return _components.IndexPatternSelect}});Object.defineProperty(exports,"IndexPatternsProvider",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsProvider}});Object.defineProperty(exports,"CONTAINS_SPACES",{enumerable:true,get:function get(){return _utils.CONTAINS_SPACES}});Object.defineProperty(exports,"getFromSavedObject",{enumerable:true,get:function get(){return _utils.getFromSavedObject}});Object.defineProperty(exports,"getRoutes",{enumerable:true,get:function get(){return _utils.getRoutes}});Object.defineProperty(exports,"ILLEGAL_CHARACTERS",{enumerable:true,get:function get(){return _utils.ILLEGAL_CHARACTERS}});Object.defineProperty(exports,"INDEX_PATTERN_ILLEGAL_CHARACTERS",{enumerable:true,get:function get(){return _utils.INDEX_PATTERN_ILLEGAL_CHARACTERS}});Object.defineProperty(exports,"INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE",{enumerable:true,get:function get(){return _utils.INDEX_PATTERN_ILLEGAL_CHARACTERS_VISIBLE}});Object.defineProperty(exports,"isFilterable",{enumerable:true,get:function get(){return _utils.isFilterable}});Object.defineProperty(exports,"validateIndexPattern",{enumerable:true,get:function get(){return _utils.validateIndexPattern}});Object.defineProperty(exports,"mockFields",{enumerable:true,get:function get(){return _utils.mockFields}});Object.defineProperty(exports,"mockIndexPattern",{enumerable:true,get:function get(){return _utils.mockIndexPattern}});Object.defineProperty(exports,"IndexPatternAlreadyExists",{enumerable:true,get:function get(){return _errors.IndexPatternAlreadyExists}});Object.defineProperty(exports,"IndexPatternMissingIndices",{enumerable:true,get:function get(){return _errors.IndexPatternMissingIndices}});Object.defineProperty(exports,"NoDefaultIndexPattern",{enumerable:true,get:function get(){return _errors.NoDefaultIndexPattern}});Object.defineProperty(exports,"NoDefinedIndexPatterns",{enumerable:true,get:function get(){return _errors.NoDefinedIndexPatterns}});exports.IndexPatternsService=void 0;var _fields=__webpack_require__(550);var _flatten_hit=__webpack_require__(403);var _components=__webpack_require__(1007);var _index_patterns=__webpack_require__(1009);var _utils=__webpack_require__(559);var _errors=__webpack_require__(404);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var IndexPatternsService=function(){function IndexPatternsService(){_classCallCheck(this,IndexPatternsService)}_createClass(IndexPatternsService,[{key:"setup",value:function setup(_ref){var uiSettings=_ref.uiSettings,savedObjectsClient=_ref.savedObjectsClient;return{FieldList:_fields.FieldList,flattenHitWrapper:(0,_flatten_hit.createFlattenHitWrapper)(),formatHitProvider:_index_patterns.formatHitProvider,indexPatterns:new _index_patterns.IndexPatterns(uiSettings,savedObjectsClient),IndexPatternSelect:(0,_components.createIndexPatternSelect)(savedObjectsClient),__LEGACY:{FieldImpl:_fields.Field}}}},{key:"start",value:function start(){}},{key:"stop",value:function stop(){}}]);return IndexPatternsService}();exports.IndexPatternsService=IndexPatternsService},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldList=void 0;var _indexed_array=__webpack_require__(59);var _field=__webpack_require__(551);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var FieldList=function(_IndexedArray){_inherits(FieldList,_IndexedArray);function FieldList(indexPattern,specs){var shortDotsEnable=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,FieldList);return _possibleConstructorReturn(this,_getPrototypeOf(FieldList).call(this,{index:["name"],group:["type"],initialSet:specs.map(function(field){return new _field.Field(indexPattern,field,shortDotsEnable)})}))}return FieldList}(_indexed_array.IndexedArray);exports.FieldList=FieldList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjDefine=ObjDefine;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ObjDefine(defaults,prototype){this.obj;this.descs={};this.defaults=defaults||{};this.prototype=prototype||Object.prototype}ObjDefine.REDEFINE_SUPPORTED=function(){var a=Object.create(Object.prototype,{prop:{configurable:true,value:1}});Object.defineProperty(a,"prop",{configurable:true,value:2});return a.prop===2}();ObjDefine.prototype.writ=function(name,val){this._define(name,val,true,true)};ObjDefine.prototype.fact=function(name,val){this._define(name,val,true)};ObjDefine.prototype.comp=function(name,val){this._define(name,val)};ObjDefine.prototype.create=function(){var self=this;self.obj=Object.create(this.prototype,self.descs);if(!ObjDefine.REDEFINE_SUPPORTED&&!self.prototype.toJSON){self.obj.toJSON=function(){return _lodash.default.transform(self.obj,function(json,val,key){var desc=self.descs[key];if(desc&&desc.enumerable&&val==null)return;json[key]=val},{})}}return self.obj};ObjDefine.prototype._define=function(name,val,exported,changeable){val=val!=null?val:this.defaults[name];this.descs[name]=this._describe(name,val,!!exported,!!changeable)};ObjDefine.prototype._describe=function(name,val,exported,changeable){var self=this;var exists=val!=null;if(exported&&ObjDefine.REDEFINE_SUPPORTED){return{enumerable:exists,configurable:true,get:_lodash.default.constant(val),set:function set(update){if(!changeable)return false;self.descs[name]=self._describe(name,update,exported,changeable);Object.defineProperty(self.obj,name,self.descs[name])}}}if(exported&&!ObjDefine.REDEFINE_SUPPORTED){return{enumerable:true,configurable:true,writable:changeable,value:val}}return{enumerable:false,writable:changeable,configurable:true,value:val}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.contentTypesSetup=contentTypesSetup;var _lodash=_interopRequireDefault(__webpack_require__(1));var _as_pretty_string=__webpack_require__(345);var _highlight_html=__webpack_require__(402);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var types={html:function html(format,convert){function recurse(value,field,hit,meta){if(value==null){return(0,_as_pretty_string.asPrettyString)(value)}if(!value||typeof value.map!=="function"){return convert.call(format,value,field,hit,meta)}var subVals=value.map(function(v){return recurse(v,field,hit,meta)});var useMultiLine=subVals.some(function(sub){return sub.indexOf("\n")>-1});return subVals.join(","+(useMultiLine?"\n":" "))}return function(){return"<span ng-non-bindable>".concat(recurse.apply(void 0,arguments),"</span>")}},text:function text(format,convert){return function recurse(value){if(!value||typeof value.map!=="function"){return convert.call(format,value)}return JSON.stringify(value.map(recurse))}}};function fallbackText(value){return(0,_as_pretty_string.asPrettyString)(value)}function fallbackHtml(value,field,hit){var formatted=_lodash.default.escape(this.convert(value,"text"));if(!hit||!hit.highlight||!hit.highlight[field.name]){return formatted}else{return(0,_highlight_html.getHighlightHtml)(formatted,hit.highlight[field.name])}}function contentTypesSetup(format){var src=format._convert||{};var converters=format._convert={};converters.text=types.text(format,src.text||fallbackText);converters.html=types.html(format,src.html||fallbackHtml);return format._convert}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.htmlTags=void 0;var htmlTags={pre:"<mark>",post:"</mark>"};exports.htmlTags=htmlTags},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index_pattern_select=__webpack_require__(1008);Object.keys(_index_pattern_select).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern_select[key]}})})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.createIndexPatternSelect=createIndexPatternSelect;exports.IndexPatternSelect=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var getIndexPatterns=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(client,search,fields){var resp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.find({type:"index-pattern",fields:fields,search:"".concat(search,"*"),searchFields:["title"],perPage:100});case 2:resp=_context.sent;return _context.abrupt("return",resp.savedObjects);case 4:case"end":return _context.stop()}}},_callee)}));return function getIndexPatterns(_x,_x2,_x3){return _ref.apply(this,arguments)}}();var getIndexPatternTitle=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(client,indexPatternId){var savedObject;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return client.get("index-pattern",indexPatternId);case 2:savedObject=_context2.sent;if(!savedObject.error){_context2.next=5;break}throw new Error("Unable to get index-pattern title: ".concat(savedObject.error.message));case 5:return _context2.abrupt("return",savedObject.attributes.title);case 6:case"end":return _context2.stop()}}},_callee2)}));return function getIndexPatternTitle(_x4,_x5){return _ref2.apply(this,arguments)}}();function createIndexPatternSelect(savedObjectsClient){return function(props){return _react.default.createElement(IndexPatternSelect,_extends({savedObjectsClient:savedObjectsClient},props))}}var IndexPatternSelect=function(_Component){_inherits(IndexPatternSelect,_Component);function IndexPatternSelect(props){var _this;_classCallCheck(this,IndexPatternSelect);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexPatternSelect).call(this,props));_defineProperty(_assertThisInitialized(_this),"isMounted",false);_defineProperty(_assertThisInitialized(_this),"state",void 0);_defineProperty(_assertThisInitialized(_this),"fetchSelectedIndexPattern",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(indexPatternId){var indexPatternTitle;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(indexPatternId){_context3.next=3;break}_this.setState({selectedIndexPattern:undefined});return _context3.abrupt("return");case 3:_context3.prev=3;_context3.next=6;return getIndexPatternTitle(_this.props.savedObjectsClient,indexPatternId);case 6:indexPatternTitle=_context3.sent;_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3["catch"](3);return _context3.abrupt("return");case 12:if(_this.isMounted){_context3.next=14;break}return _context3.abrupt("return");case 14:_this.setState({selectedIndexPattern:{value:indexPatternId,label:indexPatternTitle}});case 15:case"end":return _context3.stop()}}},_callee3,null,[[3,9]])}));return function(_x6){return _ref3.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"debouncedFetch",_lodash.default.debounce(function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(searchValue){var _this$props,fieldTypes,onNoIndexPatterns,savedObjectsClient,savedObjectFields,savedObjects,options;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$props=_this.props,fieldTypes=_this$props.fieldTypes,onNoIndexPatterns=_this$props.onNoIndexPatterns,savedObjectsClient=_this$props.savedObjectsClient;savedObjectFields=["title"];if(fieldTypes){savedObjectFields.push("fields")}_context4.next=5;return getIndexPatterns(savedObjectsClient,searchValue,savedObjectFields);case 5:savedObjects=_context4.sent;if(fieldTypes){savedObjects=savedObjects.filter(function(savedObject){try{var indexPatternFields=JSON.parse(savedObject.attributes.fields);return indexPatternFields.some(function(field){return fieldTypes.includes(field.type)})}catch(err){return false}})}if(_this.isMounted){_context4.next=9;break}return _context4.abrupt("return");case 9:if(searchValue===_this.state.searchValue){options=savedObjects.map(function(indexPatternSavedObject){return{label:indexPatternSavedObject.attributes.title,value:indexPatternSavedObject.id}});_this.setState({isLoading:false,options:options});if(onNoIndexPatterns&&searchValue===""&&options.length===0){onNoIndexPatterns()}}case 10:case"end":return _context4.stop()}}},_callee4)}));return function(_x7){return _ref4.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"fetchOptions",function(){var searchValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_this.setState({isLoading:true,searchValue:searchValue},_this.debouncedFetch.bind(null,searchValue))});_defineProperty(_assertThisInitialized(_this),"onChange",function(selectedOptions){_this.props.onChange(_lodash.default.get(selectedOptions,"0.value"))});_this.state={isLoading:false,options:[],selectedIndexPattern:undefined,searchValue:undefined};return _this}_createClass(IndexPatternSelect,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.isMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.isMounted=true;this.fetchOptions();this.fetchSelectedIndexPattern(this.props.indexPatternId)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.indexPatternId!==this.props.indexPatternId){this.fetchSelectedIndexPattern(nextProps.indexPatternId)}}},{key:"render",value:function render(){var _this$props2=this.props,fieldTypes=_this$props2.fieldTypes,onChange=_this$props2.onChange,indexPatternId=_this$props2.indexPatternId,placeholder=_this$props2.placeholder,onNoIndexPatterns=_this$props2.onNoIndexPatterns,savedObjectsClient=_this$props2.savedObjectsClient,rest=_objectWithoutProperties(_this$props2,["fieldTypes","onChange","indexPatternId","placeholder","onNoIndexPatterns","savedObjectsClient"]);return _react.default.createElement(_eui.EuiComboBox,_extends({placeholder:placeholder,singleSelection:true,isLoading:this.state.isLoading,onSearchChange:this.fetchOptions,options:this.state.options,selectedOptions:this.state.selectedIndexPattern?[this.state.selectedIndexPattern]:[],onChange:this.onChange},rest))}}]);return IndexPatternSelect}(_react.Component);exports.IndexPatternSelect=IndexPatternSelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _flatten_hit=__webpack_require__(403);Object.keys(_flatten_hit).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _flatten_hit[key]}})});var _format_hit=__webpack_require__(553);Object.keys(_format_hit).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _format_hit[key]}})});var _index_pattern=__webpack_require__(554);Object.keys(_index_pattern).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern[key]}})});var _index_patterns=__webpack_require__(1012);Object.keys(_index_patterns).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns[key]}})});var _index_patterns_api_client=__webpack_require__(560);Object.keys(_index_patterns_api_client).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns_api_client[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectLoader=void 0;var _string_utils=__webpack_require__(557);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SavedObjectLoader=function(){function SavedObjectLoader(SavedObjectClass,kbnUrl,chrome,savedObjectClient){_classCallCheck(this,SavedObjectLoader);this.type=SavedObjectClass.type;this.Class=SavedObjectClass;this.lowercaseType=this.type.toLowerCase();this.kbnUrl=kbnUrl;this.chrome=chrome;this.loaderProperties={name:"".concat(this.lowercaseType,"s"),noun:_string_utils.StringUtils.upperFirst(this.type),nouns:"".concat(this.lowercaseType,"s")};this.savedObjectsClient=savedObjectClient}_createClass(SavedObjectLoader,[{key:"get",value:function get(id){return new this.Class(id).init()}},{key:"urlFor",value:function urlFor(id){return this.kbnUrl.eval("#/".concat(this.lowercaseType,"/{{id}}"),{id:id})}},{key:"delete",value:function _delete(ids){var _this=this;ids=!Array.isArray(ids)?[ids]:ids;var deletions=ids.map(function(id){var savedObject=new _this.Class(id);return savedObject.delete()});return Promise.all(deletions).then(function(){if(_this.chrome){_this.chrome.untrackNavLinksForDeletedSavedObjects(ids)}})}},{key:"mapHitSource",value:function mapHitSource(source,id){source.id=id;source.url=this.urlFor(id);return source}},{key:"mapSavedObjectApiHits",value:function mapSavedObjectApiHits(hit){return this.mapHitSource(hit.attributes,hit.id)}},{key:"findAll",value:function findAll(){var _this2=this;var search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var fields=arguments.length>2?arguments[2]:undefined;return this.savedObjectsClient.find({type:this.lowercaseType,search:search?"".concat(search,"*"):undefined,perPage:size,page:1,searchFields:["title^3","description"],defaultSearchOperator:"AND",fields:fields}).then(function(resp){return{total:resp.total,hits:resp.savedObjects.map(function(savedObject){return _this2.mapSavedObjectApiHits(savedObject)})}})}},{key:"find",value:function find(){var search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return this.findAll(search,size).then(function(resp){return{total:resp.total,hits:resp.hits.filter(function(savedObject){return!savedObject.error})}})}}]);return SavedObjectLoader}();exports.SavedObjectLoader=SavedObjectLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFieldsFetcher=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createFieldsFetcher=function createFieldsFetcher(indexPattern,apiClient,metaFields){var fieldFetcher={fetch:function fetch(options){return fieldFetcher.fetchForWildcard(indexPattern.getIndex(),_objectSpread({},options,{type:indexPattern.type,params:indexPattern.typeMeta&&indexPattern.typeMeta.params}))},fetchForWildcard:function fetchForWildcard(pattern){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return apiClient.getFieldsForWildcard({pattern:pattern,metaFields:metaFields,type:options.type,params:options.params||{}})}};return fieldFetcher};exports.createFieldsFetcher=createFieldsFetcher},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsProvider=exports.IndexPatterns=void 0;var _pattern_cache=__webpack_require__(1013);var _index_pattern=__webpack_require__(554);var _index_patterns_api_client=__webpack_require__(560);var _modules=__webpack_require__(6);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var indexPatternCache=(0,_pattern_cache.createIndexPatternCache)();var apiClient=new _index_patterns_api_client.IndexPatternsApiClient;var IndexPatterns=function(){function IndexPatterns(config,savedObjectsClient){var _this=this;_classCallCheck(this,IndexPatterns);_defineProperty(this,"fieldFormats",void 0);_defineProperty(this,"config",void 0);_defineProperty(this,"savedObjectsClient",void 0);_defineProperty(this,"savedObjectsCache",void 0);_defineProperty(this,"getIds",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var refresh,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:refresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(!(!_this.savedObjectsCache||refresh)){_context.next=4;break}_context.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context.next=6;break}return _context.abrupt("return",[]);case 6:return _context.abrupt("return",_this.savedObjectsCache.map(function(obj){return obj!=null?obj.id:undefined}));case 7:case"end":return _context.stop()}}},_callee)})));_defineProperty(this,"getTitles",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var refresh,_args2=arguments;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:refresh=_args2.length>0&&_args2[0]!==undefined?_args2[0]:false;if(!(!_this.savedObjectsCache||refresh)){_context2.next=4;break}_context2.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context2.next=6;break}return _context2.abrupt("return",[]);case 6:return _context2.abrupt("return",_this.savedObjectsCache.map(function(obj){return obj!=null&&obj.attributes!=null?obj.attributes.title:undefined}));case 7:case"end":return _context2.stop()}}},_callee2)})));_defineProperty(this,"getFields",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(fields){var refresh,_args3=arguments;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:refresh=_args3.length>1&&_args3[1]!==undefined?_args3[1]:false;if(!(!_this.savedObjectsCache||refresh)){_context3.next=4;break}_context3.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context3.next=6;break}return _context3.abrupt("return",[]);case 6:return _context3.abrupt("return",_this.savedObjectsCache.map(function(obj){var result={};fields.forEach(function(f){return result[f]=obj[f]||(obj!=null&&obj.attributes!=null?obj.attributes[f]:undefined)});return result}));case 7:case"end":return _context3.stop()}}},_callee3)}));return function(_x){return _ref3.apply(this,arguments)}}());_defineProperty(this,"clearCache",function(id){_this.savedObjectsCache=null;if(id){indexPatternCache.clear(id)}else{indexPatternCache.clearAll()}});_defineProperty(this,"getDefault",_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var defaultIndexPatternId;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:defaultIndexPatternId=_this.config.get("defaultIndex");if(!defaultIndexPatternId){_context4.next=5;break}_context4.next=4;return _this.get(defaultIndexPatternId);case 4:return _context4.abrupt("return",_context4.sent);case 5:return _context4.abrupt("return",null);case 6:case"end":return _context4.stop()}}},_callee4)})));_defineProperty(this,"get",function(id){if(!id)return _this.make();var cache=indexPatternCache.get(id);return cache||indexPatternCache.set(id,_this.make(id))});_defineProperty(this,"make",function(id){return new _index_pattern.IndexPattern(id,function(cfg){return _this.config.get(cfg)},_this.savedObjectsClient,apiClient,indexPatternCache).init()});this.config=config;this.savedObjectsClient=savedObjectsClient}_createClass(IndexPatterns,[{key:"refreshSavedObjectsCache",value:function(){var _refreshSavedObjectsCache=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.savedObjectsClient.find({type:"index-pattern",fields:[],perPage:1e4});case 2:this.savedObjectsCache=_context5.sent.savedObjects;case 3:case"end":return _context5.stop()}}},_callee5,this)}));function refreshSavedObjectsCache(){return _refreshSavedObjectsCache.apply(this,arguments)}return refreshSavedObjectsCache}()}]);return IndexPatterns}();exports.IndexPatterns=IndexPatterns;var _module=_modules.uiModules.get("kibana/index_patterns");var _service;_module.service("indexPatterns",function(chrome){if(!_service)_service=new IndexPatterns(chrome.getUiSettingsClient(),chrome.getSavedObjectsClient());return _service});var IndexPatternsProvider=function IndexPatternsProvider(chrome){if(!_service)_service=new IndexPatterns(chrome.getUiSettingsClient(),chrome.getSavedObjectsClient());return _service};exports.IndexPatternsProvider=IndexPatternsProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createIndexPatternCache=createIndexPatternCache;function createIndexPatternCache(){var vals={};var cache={get:function get(id){return vals[id]},set:function set(id,prom){vals[id]=prom;return prom},clear:function clear(id){delete vals[id]},clearAll:function clearAll(){for(var _id in vals){if(vals.hasOwnProperty(_id)){delete vals[_id]}}}};return cache}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterService=void 0;var _filter_manager=__webpack_require__(561);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var FilterService=function(){function FilterService(){_classCallCheck(this,FilterService)}_createClass(FilterService,[{key:"setup",value:function setup(_ref){var indexPatterns=_ref.indexPatterns,uiSettings=_ref.uiSettings;return{filterManager:new _filter_manager.FilterManager(indexPatterns,uiSettings)}}},{key:"start",value:function start(){}},{key:"stop",value:function stop(){}}]);return FilterService}();exports.FilterService=FilterService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapFilter=mapFilter;var _lodash=_interopRequireDefault(__webpack_require__(1));var _map_match_all=__webpack_require__(1017);var _map_phrase=__webpack_require__(1018);var _map_phrases=__webpack_require__(1019);var _map_range=__webpack_require__(1020);var _map_exists=__webpack_require__(1021);var _map_missing=__webpack_require__(1022);var _map_query_string=__webpack_require__(1023);var _map_geo_bounding_box=__webpack_require__(1024);var _map_geo_polygon=__webpack_require__(1025);var _map_default=__webpack_require__(1026);var _generate_mapping_chain=__webpack_require__(1027);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function mapFilter(_x,_x2){return _mapFilter.apply(this,arguments)}function _mapFilter(){_mapFilter=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatterns,filter){var mappers,noop,mapFn,mapped;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mappers=[_map_match_all.mapMatchAll,(0,_map_range.mapRange)(indexPatterns),(0,_map_phrase.mapPhrase)(indexPatterns),_map_phrases.mapPhrases,_map_exists.mapExists,_map_missing.mapMissing,_map_query_string.mapQueryString,(0,_map_geo_bounding_box.mapGeoBoundingBox)(indexPatterns),(0,_map_geo_polygon.mapGeoPolygon)(indexPatterns),_map_default.mapDefault];noop=function noop(){throw new Error("No mappings have been found for filter.")};mapFn=_lodash.default.reduceRight(mappers,function(memo,map){return(0,_generate_mapping_chain.generateMappingChain)(map,memo)},noop);_context.next=5;return mapFn(filter);case 5:mapped=_context.sent;filter.meta=filter.meta||{};filter.meta.type=mapped.type;filter.meta.key=mapped.key;filter.meta.value=mapped.value;filter.meta.params=mapped.params;filter.meta.disabled=!!filter.meta.disabled;filter.meta.negate=!!filter.meta.negate;filter.meta.alias=filter.meta.alias||null;return _context.abrupt("return",filter);case 15:case"end":return _context.stop()}}},_callee)}));return _mapFilter.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapMatchAll=mapMatchAll;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function mapMatchAll(_x){return _mapMatchAll.apply(this,arguments)}function _mapMatchAll(){_mapMatchAll=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var type,key,value;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!filter.match_all){_context.next=5;break}type="match_all";key=filter.meta.field;value=filter.meta.formattedValue||"all";return _context.abrupt("return",{type:type,key:key,value:value});case 5:throw filter;case 6:case"end":return _context.stop()}}},_callee)}));return _mapMatchAll.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapPhrase=mapPhrase;var _lodash=_interopRequireDefault(__webpack_require__(1));var _errors=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function isScriptedPhrase(filter){var value=_lodash.default.get(filter,["script","script","params","value"]);return typeof value!=="undefined"}function getParams(filter,indexPattern){var isScriptedPhraseFilter=isScriptedPhrase(filter);var type="phrase";var key=isScriptedPhraseFilter?filter.meta.field:Object.keys(filter.query.match)[0];var query=isScriptedPhraseFilter?filter.script.script.params.value:filter.query.match[key].query;var params={query:query};var value=indexPattern&&indexPattern.fields&&indexPattern.fields.byName[key]?indexPattern.fields.byName[key].format.convert(query):query;return{type:type,key:key,value:value,params:params}}function mapPhrase(indexPatterns){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var isScriptedPhraseFilter,indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isScriptedPhraseFilter=isScriptedPhrase(filter);if(!(!_lodash.default.has(filter,["query","match"])&&!isScriptedPhraseFilter)){_context.next=3;break}throw filter;case 3:_context.prev=3;_context.next=6;return indexPatterns.get(filter.meta.index);case 6:indexPattern=_context.sent;return _context.abrupt("return",getParams(filter,indexPattern));case 10:_context.prev=10;_context.t0=_context["catch"](3);if(!(_context.t0 instanceof _errors.SavedObjectNotFound)){_context.next=14;break}return _context.abrupt("return",getParams(filter));case 14:throw _context.t0;case 15:case"end":return _context.stop()}}},_callee,null,[[3,10]])}));return function(_x){return _ref.apply(this,arguments)}}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapPhrases=mapPhrases;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function mapPhrases(_x){return _mapPhrases.apply(this,arguments)}function _mapPhrases(){_mapPhrases=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var _filter$meta,type,key,value,params;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_filter$meta=filter.meta,type=_filter$meta.type,key=_filter$meta.key,value=_filter$meta.value,params=_filter$meta.params;if(!(type!=="phrases")){_context.next=5;break}throw filter;case 5:return _context.abrupt("return",{type:type,key:key,value:value,params:params});case 6:case"end":return _context.stop()}}},_callee)}));return _mapPhrases.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapRange=mapRange;var _lodash=__webpack_require__(1);var _errors=__webpack_require__(25);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function isScriptedRange(filter){var params=(0,_lodash.get)(filter,["script","script","params"]);return params&&Object.keys(params).find(function(key){return["gte","gt","lte","lt"].includes(key)})}function getParams(filter,indexPattern){var isScriptedRangeFilter=isScriptedRange(filter);var type="range";var key=isScriptedRangeFilter?filter.meta.field:Object.keys(filter.range)[0];var params=isScriptedRangeFilter?filter.script.script.params:filter.range[key];var left=(0,_lodash.has)(params,"gte")?params.gte:params.gt;if(left==null)left=-Infinity;var right=(0,_lodash.has)(params,"lte")?params.lte:params.lt;if(right==null)right=Infinity;var value="".concat(left," to ").concat(right);if(indexPattern&&indexPattern.fields.byName[key]){var convert=indexPattern.fields.byName[key].format.getConverterFor("text");value="".concat(convert(left)," to ").concat(convert(right))}return{type:type,key:key,value:value,params:params}}function mapRange(indexPatterns){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var isScriptedRangeFilter,indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isScriptedRangeFilter=isScriptedRange(filter);if(!(!filter.range&&!isScriptedRangeFilter)){_context.next=3;break}throw filter;case 3:_context.prev=3;_context.next=6;return indexPatterns.get(filter.meta.index);case 6:indexPattern=_context.sent;return _context.abrupt("return",getParams(filter,indexPattern));case 10:_context.prev=10;_context.t0=_context["catch"](3);if(!(_context.t0 instanceof _errors.SavedObjectNotFound)){_context.next=14;break}return _context.abrupt("return",getParams(filter));case 14:throw _context.t0;case 15:case"end":return _context.stop()}}},_callee,null,[[3,10]])}));return function(_x){return _ref.apply(this,arguments)}}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapExists=mapExists;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function mapExists(_x){return _mapExists.apply(this,arguments)}function _mapExists(){_mapExists=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var type,key,value;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!filter.exists){_context.next=5;break}type="exists";key=filter.exists.field;value=type;return _context.abrupt("return",{type:type,key:key,value:value});case 5:throw filter;case 6:case"end":return _context.stop()}}},_callee)}));return _mapExists.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapMissing=mapMissing;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function mapMissing(_x){return _mapMissing.apply(this,arguments)}function _mapMissing(){_mapMissing=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var type,key,value;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!filter.missing){_context.next=5;break}type="missing";key=filter.missing.field;value=type;return _context.abrupt("return",{type:type,key:key,value:value});case 5:throw filter;case 6:case"end":return _context.stop()}}},_callee)}));return _mapMissing.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapQueryString=mapQueryString;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function mapQueryString(_x){return _mapQueryString.apply(this,arguments)}function _mapQueryString(){_mapQueryString=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var type,key,value;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(filter.query&&filter.query.query_string)){_context.next=5;break}type="query_string";key="query";value=filter.query.query_string.query;return _context.abrupt("return",{type:type,key:key,value:value});case 5:throw filter;case 6:case"end":return _context.stop()}}},_callee)}));return _mapQueryString.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapGeoBoundingBox=mapGeoBoundingBox;var _lodash=_interopRequireDefault(__webpack_require__(1));var _errors=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function getParams(filter,indexPattern){var type="geo_bounding_box";var key=_lodash.default.keys(filter.geo_bounding_box).filter(function(key){return key!=="ignore_unmapped"})[0];var params=filter.geo_bounding_box[key];var topLeft=indexPattern?indexPattern.fields.byName[key].format.convert(params.top_left):JSON.stringify(params.top_left);var bottomRight=indexPattern?indexPattern.fields.byName[key].format.convert(params.bottom_right):JSON.stringify(params.bottom_right);var value=topLeft+" to "+bottomRight;return{type:type,key:key,value:value,params:params}}function mapGeoBoundingBox(indexPatterns){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(filter.geo_bounding_box){_context.next=2;break}throw filter;case 2:_context.prev=2;_context.next=5;return indexPatterns.get(filter.meta.index);case 5:indexPattern=_context.sent;return _context.abrupt("return",getParams(filter,indexPattern));case 9:_context.prev=9;_context.t0=_context["catch"](2);if(!(_context.t0 instanceof _errors.SavedObjectNotFound)){_context.next=13;break}return _context.abrupt("return",getParams(filter));case 13:throw _context.t0;case 14:case"end":return _context.stop()}}},_callee,null,[[2,9]])}));return function(_x){return _ref.apply(this,arguments)}}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapGeoPolygon=mapGeoPolygon;var _lodash=_interopRequireDefault(__webpack_require__(1));var _errors=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function getParams(filter,indexPattern){var type="geo_polygon";var key=_lodash.default.keys(filter.geo_polygon).filter(function(key){return key!=="ignore_unmapped"})[0];var params=filter.geo_polygon[key];var points=params.points.map(function(point){return indexPattern?indexPattern.fields.byName[key].format.convert(point):JSON.stringify(point)});var value=points.join(", ");return{type:type,key:key,value:value,params:params}}function mapGeoPolygon(indexPatterns){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(filter.geo_polygon){_context.next=2;break}throw filter;case 2:_context.prev=2;_context.next=5;return indexPatterns.get(filter.meta.index);case 5:indexPattern=_context.sent;return _context.abrupt("return",getParams(filter,indexPattern));case 9:_context.prev=9;_context.t0=_context["catch"](2);if(!(_context.t0 instanceof _errors.SavedObjectNotFound)){_context.next=13;break}return _context.abrupt("return",getParams(filter));case 13:throw _context.t0;case 14:case"end":return _context.stop()}}},_callee,null,[[2,9]])}));return function(_x){return _ref.apply(this,arguments)}}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapDefault=mapDefault;var _angular=_interopRequireDefault(__webpack_require__(17));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function mapDefault(_x){return _mapDefault.apply(this,arguments)}function _mapDefault(){_mapDefault=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var metaProperty,key,type,value;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:metaProperty=/(^\$|meta)/;key=_lodash.default.find(_lodash.default.keys(filter),function(key){return!key.match(metaProperty)});if(!key){_context.next=6;break}type="custom";value=_angular.default.toJson(filter[key]);return _context.abrupt("return",{type:type,key:key,value:value});case 6:throw filter;case 7:case"end":return _context.stop()}}},_callee)}));return _mapDefault.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generateMappingChain=generateMappingChain;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function generateMappingChain(fn,next){var noop=function noop(){throw new Error("No mappings have been found for filter.")};next=next||noop;return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fn(filter).catch(function(result){if(result===filter){return next(filter)}throw result});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dedupFilters=dedupFilters;var _lodash=_interopRequireDefault(__webpack_require__(1));var _compare_filters=__webpack_require__(563);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function dedupFilters(existingFilters,filters,comparatorOptions){if(!Array.isArray(filters))filters=[filters];return _lodash.default.filter(filters,function(filter){return!_lodash.default.find(existingFilters,function(existingFilter){return(0,_compare_filters.compareFilters)(existingFilter,filter,comparatorOptions)})})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractTimeFilter=extractTimeFilter;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function extractTimeFilter(_x,_x2){return _extractTimeFilter.apply(this,arguments)}function _extractTimeFilter(){_extractTimeFilter=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatterns,filters){var id,indexPattern,filter;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=_lodash.default.get(filters,"[0].meta.index");if(!(id==null)){_context.next=3;break}return _context.abrupt("return");case 3:_context.next=5;return indexPatterns.get(id);case 5:indexPattern=_context.sent;filter=_lodash.default.find(filters,function(obj){var key=_lodash.default.keys(obj.range)[0];return key===indexPattern.timeFieldName});if(!(filter&&filter.range)){_context.next=9;break}return _context.abrupt("return",filter);case 9:case"end":return _context.stop()}}},_callee)}));return _extractTimeFilter.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.changeTimeFilter=changeTimeFilter;var _moment=_interopRequireDefault(__webpack_require__(14));var _lodash=_interopRequireDefault(__webpack_require__(1));var _timefilter=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function changeTimeFilter(filter){var key=_lodash.default.keys(filter.range)[0];var values=filter.range[key];_timefilter.timefilter.setTime({from:(0,_moment.default)(values.gt||values.gte),to:(0,_moment.default)(values.lt||values.lte),mode:"absolute"})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterStateManager=void 0;var _esQuery=__webpack_require__(20);var _lodash=_interopRequireDefault(__webpack_require__(1));var _filter_manager=__webpack_require__(562);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterStateManager=function(){function FilterStateManager(globalState,getAppState,filterManager){var _this=this;_classCallCheck(this,FilterStateManager);_defineProperty(this,"filterManager",void 0);_defineProperty(this,"globalState",void 0);_defineProperty(this,"getAppState",void 0);_defineProperty(this,"interval",void 0);this.getAppState=getAppState;this.globalState=globalState;this.filterManager=filterManager;this.watchFilterState();this.filterManager.getUpdates$().subscribe(function(){_this.updateAppState()})}_createClass(FilterStateManager,[{key:"destroy",value:function destroy(){if(this.interval){clearInterval(this.interval)}}},{key:"watchFilterState",value:function watchFilterState(){var _this2=this;this.interval=setInterval(function(){var appState=_this2.getAppState();var stateUndefined=!appState||!_this2.globalState;if(stateUndefined)return;var globalFilters=_this2.globalState.filters||[];var appFilters=appState&&appState.filters||[];var globalFilterChanged=!_lodash.default.isEqual(_this2.filterManager.getGlobalFilters(),globalFilters);var appFilterChanged=!_lodash.default.isEqual(_this2.filterManager.getAppFilters(),appFilters);var filterStateChanged=globalFilterChanged||appFilterChanged;if(!filterStateChanged)return;var newGlobalFilters=_lodash.default.cloneDeep(globalFilters);var newAppFilters=_lodash.default.cloneDeep(appFilters);_filter_manager.FilterManager.setFiltersStore(newAppFilters,_esQuery.FilterStateStore.APP_STATE);_filter_manager.FilterManager.setFiltersStore(newGlobalFilters,_esQuery.FilterStateStore.GLOBAL_STATE);_this2.filterManager.setFilters(newGlobalFilters.concat(newAppFilters))},10)}},{key:"saveState",value:function saveState(){var appState=this.getAppState();if(appState)appState.save();this.globalState.save()}},{key:"updateAppState",value:function updateAppState(){var partitionedFilters=this.filterManager.getPartitionedFilters();var appState=this.getAppState();if(appState){appState.filters=partitionedFilters.appFilters}this.globalState.filters=partitionedFilters.globalFilters;this.saveState()}}]);return FilterStateManager}();exports.FilterStateManager=FilterStateManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _filter_bar.FilterBar}});var _filter_bar=__webpack_require__(1033)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBar=void 0;var _eui=__webpack_require__(3);var _esQuery=__webpack_require__(20);var _react=__webpack_require__(5);var _classnames=_interopRequireDefault(__webpack_require__(26));var _react2=_interopRequireWildcard(__webpack_require__(0));var _filter_editor=__webpack_require__(567);var _filter_item=__webpack_require__(1039);var _filter_options=__webpack_require__(1040);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterBarUI=function(_Component){_inherits(FilterBarUI,_Component);function FilterBarUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,FilterBarUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FilterBarUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isAddFilterPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"onAdd",function(filter){_this.onCloseAddFilterPopover();var filters=[].concat(_toConsumableArray(_this.props.filters),[filter]);_this.props.onFiltersUpdated(filters)});_defineProperty(_assertThisInitialized(_this),"onRemove",function(i){var filters=_toConsumableArray(_this.props.filters);filters.splice(i,1);_this.props.onFiltersUpdated(filters)});_defineProperty(_assertThisInitialized(_this),"onUpdate",function(i,filter){var filters=_toConsumableArray(_this.props.filters);filters[i]=filter;_this.props.onFiltersUpdated(filters)});_defineProperty(_assertThisInitialized(_this),"onEnableAll",function(){var filters=_this.props.filters.map(_esQuery.enableFilter);_this.props.onFiltersUpdated(filters)});_defineProperty(_assertThisInitialized(_this),"onDisableAll",function(){var filters=_this.props.filters.map(_esQuery.disableFilter);_this.props.onFiltersUpdated(filters)});_defineProperty(_assertThisInitialized(_this),"onPinAll",function(){var filters=_this.props.filters.map(_esQuery.pinFilter);_this.props.onFiltersUpdated(filters)});_defineProperty(_assertThisInitialized(_this),"onUnpinAll",function(){var filters=_this.props.filters.map(_esQuery.unpinFilter);_this.props.onFiltersUpdated(filters)});_defineProperty(_assertThisInitialized(_this),"onToggleAllNegated",function(){var filters=_this.props.filters.map(_esQuery.toggleFilterNegated);_this.props.onFiltersUpdated(filters)});_defineProperty(_assertThisInitialized(_this),"onToggleAllDisabled",function(){var filters=_this.props.filters.map(_esQuery.toggleFilterDisabled);_this.props.onFiltersUpdated(filters)});_defineProperty(_assertThisInitialized(_this),"onRemoveAll",function(){_this.props.onFiltersUpdated([])});_defineProperty(_assertThisInitialized(_this),"onOpenAddFilterPopover",function(){_this.setState({isAddFilterPopoverOpen:true})});_defineProperty(_assertThisInitialized(_this),"onCloseAddFilterPopover",function(){_this.setState({isAddFilterPopoverOpen:false})});return _this}_createClass(FilterBarUI,[{key:"render",value:function render(){if(!this.props.uiSettings){return null}var classes=(0,_classnames.default)("globalFilterBar",this.props.className);return _react2.default.createElement(_eui.EuiFlexGroup,{className:"globalFilterGroup",gutterSize:"none",alignItems:"flexStart",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{className:"globalFilterGroup__branch",grow:false},_react2.default.createElement(_filter_options.FilterOptions,{onEnableAll:this.onEnableAll,onDisableAll:this.onDisableAll,onPinAll:this.onPinAll,onUnpinAll:this.onUnpinAll,onToggleAllNegated:this.onToggleAllNegated,onToggleAllDisabled:this.onToggleAllDisabled,onRemoveAll:this.onRemoveAll})),_react2.default.createElement(_eui.EuiFlexItem,{className:"globalFilterGroup__filterFlexItem"},_react2.default.createElement(_eui.EuiFlexGroup,{className:classes,wrap:true,responsive:false,gutterSize:"xs",alignItems:"center"},this.renderItems(),this.renderAddFilter())))}},{key:"renderItems",value:function renderItems(){var _this2=this;return this.props.filters.map(function(filter,i){return _react2.default.createElement(_eui.EuiFlexItem,{key:i,grow:false,className:"globalFilterBar__flexItem"},_react2.default.createElement(_filter_item.FilterItem,{id:"".concat(i),filter:filter,onUpdate:function onUpdate(newFilter){return _this2.onUpdate(i,newFilter)},onRemove:function onRemove(){return _this2.onRemove(i)},indexPatterns:_this2.props.indexPatterns,uiSettings:_this2.props.uiSettings}))})}},{key:"renderAddFilter",value:function renderAddFilter(){var isPinned=this.props.uiSettings.get("filters:pinnedByDefault");var _this$props$indexPatt=_slicedToArray(this.props.indexPatterns,1),indexPattern=_this$props$indexPatt[0];var index=indexPattern&&indexPattern.id;var newFilter=(0,_esQuery.buildEmptyFilter)(isPinned,index);var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:this.onOpenAddFilterPopover,"data-test-subj":"addFilter"},"+"," ",_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterBar.addFilterButtonLabel",defaultMessage:"Add filter"}));return _react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiPopover,{id:"addFilterPopover",button:button,isOpen:this.state.isAddFilterPopoverOpen,closePopover:this.onCloseAddFilterPopover,anchorPosition:"downLeft",withTitle:true,panelPaddingSize:"none",ownFocus:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("div",{style:{width:400}},_react2.default.createElement(_filter_editor.FilterEditor,{filter:newFilter,indexPatterns:this.props.indexPatterns,onSubmit:this.onAdd,onCancel:this.onCloseAddFilterPopover,key:JSON.stringify(newFilter),uiSettings:this.props.uiSettings})))))}}]);return FilterBarUI}(_react2.Component);var FilterBar=(0,_react.injectI18n)(FilterBarUI);exports.FilterBar=FilterBar},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseValueInput=void 0;var _eui=__webpack_require__(3);var _react=__webpack_require__(5);var _lodash=__webpack_require__(1);var _react2=_interopRequireDefault(__webpack_require__(0));var _generic_combo_box=__webpack_require__(406);var _phrase_suggestor=__webpack_require__(570);var _value_input_type=__webpack_require__(571);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PhraseValueInputUI=function(_PhraseSuggestor){_inherits(PhraseValueInputUI,_PhraseSuggestor);function PhraseValueInputUI(){_classCallCheck(this,PhraseValueInputUI);return _possibleConstructorReturn(this,_getPrototypeOf(PhraseValueInputUI).apply(this,arguments))}_createClass(PhraseValueInputUI,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputLabel",defaultMessage:"Value"})},this.isSuggestingValues()?this.renderWithSuggestions():_react2.default.createElement(_value_input_type.ValueInputType,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputPlaceholder",defaultMessage:"Enter a value"}),value:this.props.value,onChange:this.props.onChange,type:this.props.field?this.props.field.type:"string"}))}},{key:"renderWithSuggestions",value:function renderWithSuggestions(){var suggestions=this.state.suggestions;var _this$props=this.props,value=_this$props.value,intl=_this$props.intl,_onChange=_this$props.onChange;var options=value?(0,_lodash.uniq)([value].concat(_toConsumableArray(suggestions))):suggestions;return _react2.default.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),options:options,getLabel:function getLabel(option){return option},selectedOptions:value?[value]:[],onChange:function onChange(_ref){var _ref2=_slicedToArray(_ref,1),_ref2$=_ref2[0],newValue=_ref2$===void 0?"":_ref2$;return _onChange(newValue)},onSearchChange:this.onSearchChange,singleSelection:{asPlainText:true},onCreateOption:_onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phraseParamsComboxBox"})}}]);return PhraseValueInputUI}(_phrase_suggestor.PhraseSuggestor);function StringComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var PhraseValueInput=(0,_react.injectI18n)(PhraseValueInputUI);exports.PhraseValueInput=PhraseValueInput},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSuggestions=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _kfetch=__webpack_require__(39);var _value_suggestions=__webpack_require__(1036);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getSuggestions=(0,_value_suggestions.getSuggestionsProvider)(_chrome.default.getUiSettingsClient(),_kfetch.kfetch);exports.getSuggestions=getSuggestions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSuggestionsProvider=getSuggestionsProvider;var _lodash=__webpack_require__(1);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function getSuggestionsProvider(config,fetch){var requestSuggestions=(0,_lodash.memoize)(function(index,field,query){var boolFilter=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];return fetch({pathname:"/api/kibana/suggestions/values/".concat(index),method:"POST",body:JSON.stringify({query:query,field:field.name,boolFilter:boolFilter})})},resolver);return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(index,field,query,boolFilter){var shouldSuggestValues;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:shouldSuggestValues=config.get("filterEditor:suggestValues");if(!(field.type==="boolean")){_context.next=5;break}return _context.abrupt("return",[true,false]);case 5:if(!(!shouldSuggestValues||!field.aggregatable||field.type!=="string")){_context.next=7;break}return _context.abrupt("return",[]);case 7:_context.next=9;return requestSuggestions(index,field,query,boolFilter);case 9:return _context.abrupt("return",_context.sent);case 10:case"end":return _context.stop()}}},_callee)}));return function(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}()}function resolver(index,field,query,boolFilter){var ttl=Math.floor(Date.now()/1e3/60);return[ttl,query,index,field.name,JSON.stringify(boolFilter)].join("|")}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhrasesValuesInput=void 0;var _eui=__webpack_require__(3);var _react=__webpack_require__(5);var _lodash=__webpack_require__(1);var _react2=_interopRequireDefault(__webpack_require__(0));var _generic_combo_box=__webpack_require__(406);var _phrase_suggestor=__webpack_require__(570);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PhrasesValuesInputUI=function(_PhraseSuggestor){_inherits(PhrasesValuesInputUI,_PhraseSuggestor);function PhrasesValuesInputUI(){_classCallCheck(this,PhrasesValuesInputUI);return _possibleConstructorReturn(this,_getPrototypeOf(PhrasesValuesInputUI).apply(this,arguments))}_createClass(PhrasesValuesInputUI,[{key:"render",value:function render(){var suggestions=this.state.suggestions;var _this$props=this.props,values=_this$props.values,intl=_this$props.intl,onChange=_this$props.onChange;var options=values?(0,_lodash.uniq)([].concat(_toConsumableArray(values),_toConsumableArray(suggestions))):suggestions;return _react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectLabel",defaultMessage:"Values"})},_react2.default.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),options:options,getLabel:function getLabel(option){return option},selectedOptions:values||[],onCreateOption:function onCreateOption(option){return onChange([].concat(_toConsumableArray(values||[]),[option]))},onChange:onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phrasesParamsComboxBox"}))}}]);return PhrasesValuesInputUI}(_phrase_suggestor.PhraseSuggestor);function StringComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var PhrasesValuesInput=(0,_react.injectI18n)(PhrasesValuesInputUI);exports.PhrasesValuesInput=PhrasesValuesInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RangeValueInput=void 0;var _eui=__webpack_require__(3);var _react=__webpack_require__(5);var _lodash=__webpack_require__(1);var _react2=_interopRequireWildcard(__webpack_require__(0));var _documentation_links=__webpack_require__(60);var _value_input_type=__webpack_require__(571);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RangeValueInputUI=function(_Component){_inherits(RangeValueInputUI,_Component);function RangeValueInputUI(props){var _this;_classCallCheck(this,RangeValueInputUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(RangeValueInputUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"onFromChange",function(value){if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}_this.props.onChange({from:value,to:(0,_lodash.get)(_assertThisInitialized(_this),"props.value.to")})});_defineProperty(_assertThisInitialized(_this),"onToChange",function(value){if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}_this.props.onChange({from:(0,_lodash.get)(_assertThisInitialized(_this),"props.value.from"),to:value})});return _this}_createClass(RangeValueInputUI,[{key:"render",value:function render(){var type=this.props.field?this.props.field.type:"string";return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{style:{maxWidth:600}},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.rangeStartInputLabel",defaultMessage:"From"})},_react2.default.createElement(_value_input_type.ValueInputType,{type:type,value:this.props.value?this.props.value.from:undefined,onChange:this.onFromChange,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.rangeStartInputPlaceholder",defaultMessage:"Start of the range"})}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.rangeEndInputLabel",defaultMessage:"To"})},_react2.default.createElement(_value_input_type.ValueInputType,{type:type,value:this.props.value?this.props.value.to:undefined,onChange:this.onToChange,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.rangeEndInputPlaceholder",defaultMessage:"End of the range"})})))),type==="date"?_react2.default.createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("date.dateMath")},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.dateFormatHelpLinkLabel",defaultMessage:"Accepted date formats"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"link"})):"")}}]);return RangeValueInputUI}(_react2.Component);var RangeValueInput=(0,_react.injectI18n)(RangeValueInputUI);exports.RangeValueInput=RangeValueInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterItem=void 0;var _eui=__webpack_require__(3);var _esQuery=__webpack_require__(20);var _react=__webpack_require__(5);var _classnames=_interopRequireDefault(__webpack_require__(26));var _react2=_interopRequireWildcard(__webpack_require__(0));var _filter_editor=__webpack_require__(567);var _filter_view=__webpack_require__(572);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterItemUI=function(_Component){_inherits(FilterItemUI,_Component);function FilterItemUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,FilterItemUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FilterItemUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_defineProperty(_assertThisInitialized(_this),"togglePopover",function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})});_defineProperty(_assertThisInitialized(_this),"onSubmit",function(filter){_this.closePopover();_this.props.onUpdate(filter)});_defineProperty(_assertThisInitialized(_this),"onTogglePinned",function(){var filter=(0,_esQuery.toggleFilterPinned)(_this.props.filter);_this.props.onUpdate(filter)});_defineProperty(_assertThisInitialized(_this),"onToggleNegated",function(){var filter=(0,_esQuery.toggleFilterNegated)(_this.props.filter);_this.props.onUpdate(filter)});_defineProperty(_assertThisInitialized(_this),"onToggleDisabled",function(){var filter=(0,_esQuery.toggleFilterDisabled)(_this.props.filter);_this.props.onUpdate(filter)});return _this}_createClass(FilterItemUI,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,filter=_this$props.filter,id=_this$props.id;var _filter$meta=filter.meta,negate=_filter$meta.negate,disabled=_filter$meta.disabled;var classes=(0,_classnames.default)("globalFilterItem",{"globalFilterItem-isDisabled":disabled,"globalFilterItem-isPinned":(0,_esQuery.isFilterPinned)(filter),"globalFilterItem-isExcluded":negate},this.props.className);var dataTestSubjKey=filter.meta.key?"filter-key-".concat(filter.meta.key):"";var dataTestSubjValue=filter.meta.value?"filter-value-".concat(filter.meta.value):"";var dataTestSubjDisabled="filter-".concat(this.props.filter.meta.disabled?"disabled":"enabled");var badge=_react2.default.createElement(_filter_view.FilterView,{filter:filter,className:classes,iconOnClick:function iconOnClick(){return _this2.props.onRemove()},onClick:this.togglePopover,"data-test-subj":"filter ".concat(dataTestSubjDisabled," ").concat(dataTestSubjKey," ").concat(dataTestSubjValue)});var panelTree=[{id:0,items:[{name:(0,_esQuery.isFilterPinned)(filter)?this.props.intl.formatMessage({id:"data.filter.filterBar.unpinFilterButtonLabel",defaultMessage:"Unpin"}):this.props.intl.formatMessage({id:"data.filter.filterBar.pinFilterButtonLabel",defaultMessage:"Pin across all apps"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.onTogglePinned()},"data-test-subj":"pinFilter"},{name:this.props.intl.formatMessage({id:"data.filter.filterBar.editFilterButtonLabel",defaultMessage:"Edit filter"}),icon:"pencil",panel:1,"data-test-subj":"editFilter"},{name:negate?this.props.intl.formatMessage({id:"data.filter.filterBar.includeFilterButtonLabel",defaultMessage:"Include results"}):this.props.intl.formatMessage({id:"data.filter.filterBar.excludeFilterButtonLabel",defaultMessage:"Exclude results"}),icon:negate?"plusInCircle":"minusInCircle",onClick:function onClick(){_this2.closePopover();_this2.onToggleNegated()},"data-test-subj":"negateFilter"},{name:disabled?this.props.intl.formatMessage({id:"data.filter.filterBar.enableFilterButtonLabel",defaultMessage:"Re-enable"}):this.props.intl.formatMessage({id:"data.filter.filterBar.disableFilterButtonLabel",defaultMessage:"Temporarily disable"}),icon:"".concat(disabled?"eye":"eyeClosed"),onClick:function onClick(){_this2.closePopover();_this2.onToggleDisabled()},"data-test-subj":"disableFilter"},{name:this.props.intl.formatMessage({id:"data.filter.filterBar.deleteFilterButtonLabel",defaultMessage:"Delete"}),icon:"trash",onClick:function onClick(){_this2.closePopover();_this2.props.onRemove()},"data-test-subj":"deleteFilter"}]},{id:1,width:400,content:_react2.default.createElement("div",null,_react2.default.createElement(_filter_editor.FilterEditor,{filter:filter,indexPatterns:this.props.indexPatterns,onSubmit:this.onSubmit,onCancel:this.closePopover,uiSettings:this.props.uiSettings}))}];return _react2.default.createElement(_eui.EuiPopover,{id:"popoverFor_filter".concat(id),className:"globalFilterItem__popover",anchorClassName:"globalFilterItem__popoverAnchor",isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,button:badge,anchorPosition:"downLeft",withTitle:true,panelPaddingSize:"none"},_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:panelTree}))}}]);return FilterItemUI}(_react2.Component);var FilterItem=(0,_react.injectI18n)(FilterItemUI);exports.FilterItem=FilterItem},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterOptions=void 0;var _eui=__webpack_require__(3);var _react=__webpack_require__(5);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterOptionsUI=function(_Component){_inherits(FilterOptionsUI,_Component);function FilterOptionsUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,FilterOptionsUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FilterOptionsUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});return _this}_createClass(FilterOptionsUI,[{key:"render",value:function render(){var _this2=this;var panelTree={id:0,items:[{name:this.props.intl.formatMessage({id:"data.filter.options.enableAllFiltersButtonLabel",defaultMessage:"Enable all"}),icon:"eye",onClick:function onClick(){_this2.closePopover();_this2.props.onEnableAll()},"data-test-subj":"enableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.disableAllFiltersButtonLabel",defaultMessage:"Disable all"}),icon:"eyeClosed",onClick:function onClick(){_this2.closePopover();_this2.props.onDisableAll()},"data-test-subj":"disableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.pinAllFiltersButtonLabel",defaultMessage:"Pin all"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.props.onPinAll()},"data-test-subj":"pinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.unpinAllFiltersButtonLabel",defaultMessage:"Unpin all"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.props.onUnpinAll()},"data-test-subj":"unpinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertNegatedFiltersButtonLabel",defaultMessage:"Invert inclusion"}),icon:"invert",onClick:function onClick(){_this2.closePopover();_this2.props.onToggleAllNegated()},"data-test-subj":"invertInclusionAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertDisabledFiltersButtonLabel",defaultMessage:"Invert enabled/disabled"}),icon:"eye",onClick:function onClick(){_this2.closePopover();_this2.props.onToggleAllDisabled()},"data-test-subj":"invertEnableDisableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.deleteAllFiltersButtonLabel",defaultMessage:"Remove all"}),icon:"trash",onClick:function onClick(){_this2.closePopover();_this2.props.onRemoveAll()},"data-test-subj":"removeAllFilters"}]};return _react2.default.createElement(_eui.EuiPopover,{id:"popoverForAllFilters",className:"globalFilterGroup__allFiltersPopover",isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,button:_react2.default.createElement(_eui.EuiButtonIcon,{onClick:this.togglePopover,color:"text",iconType:"gear","aria-label":this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),title:this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),"data-test-subj":"showFilterActions"}),anchorPosition:"rightUp",panelPaddingSize:"none",withTitle:true},_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.searchBar.changeAllFiltersTitle",defaultMessage:"Change all filters"})),_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:[panelTree]}))}}]);return FilterOptionsUI}(_react2.Component);var FilterOptions=(0,_react.injectI18n)(FilterOptionsUI);exports.FilterOptions=FilterOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ApplyFiltersPopover",{enumerable:true,get:function get(){return _apply_filters_popover.ApplyFiltersPopover}});var _apply_filters_popover=__webpack_require__(1042)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ApplyFiltersPopover=void 0;var _eui=__webpack_require__(3);var _react=__webpack_require__(5);var _react2=_interopRequireWildcard(__webpack_require__(0));var _filter_view=__webpack_require__(572);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ApplyFiltersPopover=function(_Component){_inherits(ApplyFiltersPopover,_Component);function ApplyFiltersPopover(props){var _this;_classCallCheck(this,ApplyFiltersPopover);_this=_possibleConstructorReturn(this,_getPrototypeOf(ApplyFiltersPopover).call(this,props));_defineProperty(_assertThisInitialized(_this),"isFilterSelected",function(i){return _this.state.isFilterSelected[i]});_defineProperty(_assertThisInitialized(_this),"toggleFilterSelected",function(i){var isFilterSelected=_toConsumableArray(_this.state.isFilterSelected);isFilterSelected[i]=!isFilterSelected[i];_this.setState({isFilterSelected:isFilterSelected})});_defineProperty(_assertThisInitialized(_this),"onSubmit",function(){var selectedFilters=_this.props.filters.filter(function(filter,i){return _this.state.isFilterSelected[i]});_this.props.onSubmit(selectedFilters)});_this.state={isFilterSelected:props.filters.map(function(){return true})};return _this}_createClass(ApplyFiltersPopover,[{key:"render",value:function render(){var _this2=this;if(this.props.filters.length===0){return""}var form=_react2.default.createElement(_eui.EuiForm,null,this.props.filters.map(function(filter,i){return _react2.default.createElement(_eui.EuiFormRow,{key:i},_react2.default.createElement(_eui.EuiSwitch,{label:(0,_filter_view.getFilterDisplayText)(filter),checked:_this2.isFilterSelected(i),onChange:function onChange(){return _this2.toggleFilterSelected(i)}}))}));return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,{onClose:this.props.onCancel},_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFilters.popupHeader",defaultMessage:"Select filters to apply"}))),_react2.default.createElement(_eui.EuiModalBody,null,form),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButtonEmpty,{onClick:this.props.onCancel},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFiltersPopup.cancelButtonLabel",defaultMessage:"Cancel"})),_react2.default.createElement(_eui.EuiButton,{onClick:this.onSubmit,fill:true},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFiltersPopup.saveButtonLabel",defaultMessage:"Apply"})))))}}]);return ApplyFiltersPopover}(_react2.Component);exports.ApplyFiltersPopover=ApplyFiltersPopover;_defineProperty(ApplyFiltersPopover,"defaultProps",{filters:[]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateHistogramInterval=dateHistogramInterval;var _parse_es_interval=__webpack_require__(574);function dateHistogramInterval(interval){var _ref=(0,_parse_es_interval.parseEsInterval)(interval),type=_ref.type;if(type==="calendar"){return{calendar_interval:interval}}else{return{fixed_interval:interval}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidEsInterval=isValidEsInterval;var _parse_es_interval=__webpack_require__(575);function isValidEsInterval(interval){try{(0,_parse_es_interval.parseEsInterval)(interval);return true}catch(_unused){return false}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TypesService",{enumerable:true,get:function get(){return _types_service.TypesService}});Object.defineProperty(exports,"visFactory",{enumerable:true,get:function get(){return _types_service.visFactory}});Object.defineProperty(exports,"DefaultEditorSize",{enumerable:true,get:function get(){return _types_service.DefaultEditorSize}});Object.defineProperty(exports,"TypesSetup",{enumerable:true,get:function get(){return _types_service.TypesSetup}});Object.defineProperty(exports,"Vis",{enumerable:true,get:function get(){return _types_service.Vis}});Object.defineProperty(exports,"VisParams",{enumerable:true,get:function get(){return _types_service.VisParams}});Object.defineProperty(exports,"VisProvider",{enumerable:true,get:function get(){return _types_service.VisProvider}});Object.defineProperty(exports,"VisState",{enumerable:true,get:function get(){return _types_service.VisState}});Object.defineProperty(exports,"VisTypeAlias",{enumerable:true,get:function get(){return _types_service.VisTypeAlias}});Object.defineProperty(exports,"VisTypesRegistry",{enumerable:true,get:function get(){return _types_service.VisTypesRegistry}});Object.defineProperty(exports,"Status",{enumerable:true,get:function get(){return _types_service.Status}});var _types_service=__webpack_require__(1046)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"visFactory",{enumerable:true,get:function get(){return _vis_factory.visFactory}});Object.defineProperty(exports,"DefaultEditorSize",{enumerable:true,get:function get(){return _editor_size.DefaultEditorSize}});Object.defineProperty(exports,"VisTypesRegistry",{enumerable:true,get:function get(){return _vis_types.VisTypesRegistry}});Object.defineProperty(exports,"Status",{enumerable:true,get:function get(){return _update_status.Status}});exports.TypesService=void 0;var _default_feedback_message=__webpack_require__(346);var _index=__webpack_require__(408);var _vis_factory=__webpack_require__(45);var _editor_size=__webpack_require__(361);var _vis_types=__webpack_require__(49);var _vis_type_alias_registry=__webpack_require__(1310);var _update_status=__webpack_require__(83);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var TypesService=function(){function TypesService(){_classCallCheck(this,TypesService)}_createClass(TypesService,[{key:"setup",value:function setup(){return{Vis:_index.VisProvider,VisFactoryProvider:_vis_factory.VisFactoryProvider,VisTypesRegistryProvider:_vis_types.VisTypesRegistryProvider,defaultFeedbackMessage:_default_feedback_message.defaultFeedbackMessage,visTypeAliasRegistry:_vis_type_alias_registry.visTypeAliasRegistry}}},{key:"stop",value:function stop(){}}]);return TypesService}();exports.TypesService=TypesService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisProvider=VisProvider;var _events=__webpack_require__(48);var _lodash=_interopRequireDefault(__webpack_require__(1));var _vis_types=__webpack_require__(49);var _agg_configs=__webpack_require__(578);var _persisted_state=__webpack_require__(99);var _query_filter=__webpack_require__(51);var _vis_update=__webpack_require__(1234);var _search_source=__webpack_require__(355);var _saved_objects=__webpack_require__(36);var _timefilter=__webpack_require__(22);__webpack_require__(1235);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function VisProvider(Private,indexPatterns,getAppState){var visTypes=Private(_vis_types.VisTypesRegistryProvider);var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var SearchSource=Private(_search_source.SearchSourceProvider);var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var Vis=function(_EventEmitter){_inherits(Vis,_EventEmitter);function Vis(indexPattern,visState){var _this;_classCallCheck(this,Vis);_this=_possibleConstructorReturn(this,_getPrototypeOf(Vis).call(this));visState=visState||{};if(_lodash.default.isString(visState)){visState={type:visState}}_this.indexPattern=indexPattern;_this._setUiState(new _persisted_state.PersistedState);_this.setCurrentState(visState);_this.setState(_this.getCurrentState(),false);_this.sessionState={};_this.API={savedObjectsClient:savedObjectsClient,SearchSource:SearchSource,indexPatterns:indexPatterns,timeFilter:_timefilter.timefilter,queryFilter:queryFilter,events:{filter:function filter(data){return _this.eventsSubject.next({name:"filterBucket",data:data})},brush:function brush(data){return _this.eventsSubject.next({name:"brush",data:data})}},getAppState:getAppState};return _this}_createClass(Vis,[{key:"setCurrentState",value:function setCurrentState(state){this.title=state.title||"";var type=state.type||this.type;if(_lodash.default.isString(type)){this.type=visTypes.byName[type];if(!this.type){throw new Error('Invalid type "'.concat(type,'"'))}}else{this.type=type}this.params=_lodash.default.defaults({},_lodash.default.cloneDeep(state.params||{}),_lodash.default.cloneDeep(this.type.visConfig.defaults||{}));(0,_vis_update.updateVisualizationConfig)(state.params,this.params);if(state.aggs||!this.aggs){this.aggs=new _agg_configs.AggConfigs(this.indexPattern,state.aggs,this.type.schemas.all)}}},{key:"setState",value:function setState(state){var updateCurrentState=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this._state=_lodash.default.cloneDeep(state);if(updateCurrentState){this.setCurrentState(this._state)}}},{key:"updateState",value:function updateState(){this.setState(this.getCurrentState(true));this.emit("update")}},{key:"forceReload",value:function forceReload(){this.emit("reload")}},{key:"getCurrentState",value:function getCurrentState(includeDisabled){return{title:this.title,type:this.type.name,params:_lodash.default.cloneDeep(this.params),aggs:this.aggs.map(function(agg){return agg.toJSON()}).filter(function(agg){return includeDisabled||agg.enabled}).filter(Boolean)}}},{key:"getSerializableState",value:function getSerializableState(state){return{title:state.title,type:state.type,params:_lodash.default.cloneDeep(state.params),aggs:state.aggs.map(function(agg){return agg.toJSON()}).filter(function(agg){return agg.enabled}).filter(Boolean)}}},{key:"copyCurrentState",value:function copyCurrentState(){var includeDisabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var state=this.getCurrentState(includeDisabled);state.aggs=new _agg_configs.AggConfigs(this.indexPattern,state.aggs,this.type.schemas.all);return state}},{key:"getStateInternal",value:function getStateInternal(includeDisabled){return{title:this._state.title,type:this._state.type,params:this._state.params,aggs:this._state.aggs.filter(function(agg){return includeDisabled||agg.enabled})}}},{key:"getEnabledState",value:function getEnabledState(){return this.getStateInternal(false)}},{key:"getAggConfig",value:function getAggConfig(){return this.aggs.clone({enabledOnly:true})}},{key:"getState",value:function getState(){return this.getStateInternal(true)}},{key:"isHierarchical",value:function isHierarchical(){if(_lodash.default.isFunction(this.type.hierarchicalData)){return!!this.type.hierarchicalData(this)}else{return!!this.type.hierarchicalData}}},{key:"hasSchemaAgg",value:function hasSchemaAgg(schemaName,aggTypeName){var aggs=this.aggs.bySchemaName[schemaName]||[];return aggs.some(function(agg){if(!agg.type||!agg.type.name)return false;return agg.type.name===aggTypeName})}},{key:"hasUiState",value:function hasUiState(){return!!this.__uiState}},{key:"_setUiState",value:function _setUiState(uiState){if(uiState instanceof _persisted_state.PersistedState){this.__uiState=uiState}}},{key:"getUiState",value:function getUiState(){return this.__uiState}},{key:"uiStateVal",value:function uiStateVal(key,val){if(this.hasUiState()){if(_lodash.default.isUndefined(val)){return this.__uiState.get(key)}return this.__uiState.set(key,val)}return val}}]);return Vis}(_events.EventEmitter);Vis.prototype.type="histogram";return Vis}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldParamType=FieldParamType;var _lodash=__webpack_require__(1);var _errors=__webpack_require__(25);var _field=__webpack_require__(410);var _base=__webpack_require__(119);var _indexed_array=__webpack_require__(59);var _notify=__webpack_require__(9);var _legacy_class=__webpack_require__(29);var _filter=__webpack_require__(411);var _i18n=__webpack_require__(2);var filterByType=(0,_filter.propFilter)("type");function FieldParamType(config){FieldParamType.Super.call(this,config)}(0,_legacy_class.createLegacyClass)(FieldParamType).inherits(_base.BaseParamType);FieldParamType.prototype.editorComponent=_field.FieldParamEditor;FieldParamType.prototype.required=true;FieldParamType.prototype.scriptable=true;FieldParamType.prototype.filterFieldTypes="*";FieldParamType.prototype.onlyAggregatable=true;FieldParamType.prototype.serialize=function(field){return field.name};FieldParamType.prototype.deserialize=function(fieldName,aggConfig){var field=aggConfig.getIndexPattern().fields.byName[fieldName];if(!field){throw new _errors.SavedObjectNotFound("index-pattern-field",fieldName)}var validField=this.getAvailableFields(aggConfig.getIndexPattern().fields).byName[fieldName];if(!validField){_notify.toastNotifications.addDanger(_i18n.i18n.translate("common.ui.aggTypes.paramTypes.field.invalidSavedFieldParameterErrorMessage",{defaultMessage:"Saved {fieldParameter} parameter is now invalid. Please select a new field.",values:{fieldParameter:'"field"'}}))}return validField};FieldParamType.prototype.getAvailableFields=function(fields){var _this=this;var filteredFields=fields.filter(function(field){var onlyAggregatable=_this.onlyAggregatable,scriptable=_this.scriptable,filterFieldTypes=_this.filterFieldTypes;if(onlyAggregatable&&!field.aggregatable||!scriptable&&field.scripted){return false}if(!filterFieldTypes){return true}return filterByType([field],filterFieldTypes).length!==0});return new _indexed_array.IndexedArray({index:["name"],group:["type"],initialSet:(0,_lodash.sortBy)(filteredFields,["type","name"])})};FieldParamType.prototype.write=function(aggConfig,output){var field=aggConfig.getField();if(!field){throw new TypeError(_i18n.i18n.translate("common.ui.aggTypes.paramTypes.field.requiredFieldParameterErrorMessage",{defaultMessage:"{fieldParameter} is a required parameter",values:{fieldParameter:'"field"'}}))}if(field.scripted){output.params.script={source:field.script,lang:field.lang}}else{output.params.field=field.name}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypeFilters=exports.aggTypeFilters=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypeFilters=function(){function AggTypeFilters(){_classCallCheck(this,AggTypeFilters);_defineProperty(this,"filters",new Set)}_createClass(AggTypeFilters,[{key:"addFilter",value:function addFilter(filter){this.filters.add(filter)}},{key:"filter",value:function filter(aggTypes,indexPattern,aggConfig){var allFilters=Array.from(this.filters);var allowedAggTypes=aggTypes.filter(function(aggType){var isAggTypeAllowed=allFilters.every(function(filter){return filter(aggType,indexPattern,aggConfig)});return isAggTypeAllowed});return allowedAggTypes}}]);return AggTypeFilters}();exports.AggTypeFilters=AggTypeFilters;var aggTypeFilters=new AggTypeFilters;exports.aggTypeFilters=aggTypeFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.propFilter=propFilter;var _lodash=__webpack_require__(1);function propFilter(prop){return function filterByName(list){var filters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if((0,_lodash.isFunction)(filters)){return list.filter(function(item){return filters(item[prop])})}if(!Array.isArray(filters)){filters=filters.split(",")}if(filters.length===0){return list}if(filters.includes("*")){return list}var options=filters.reduce(function(acc,filter){var type="include";var value=filter;if(filter.charAt(0)==="!"){type="exclude";value=filter.substr(1)}if(!acc[type]){acc[type]=[]}acc[type].push(value);return acc},{});return list.filter(function(item){var value=item[prop];var excluded=options.exclude&&options.exclude.includes(value);if(excluded){return false}var included=!options.include||options.include.includes(value);if(included){return true}return false})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OptionedParamType=OptionedParamType;var _indexed_array=__webpack_require__(59);var _base=__webpack_require__(119);var _legacy_class=__webpack_require__(29);(0,_legacy_class.createLegacyClass)(OptionedParamType).inherits(_base.BaseParamType);function OptionedParamType(config){OptionedParamType.Super.call(this,config);this.options=new _indexed_array.IndexedArray({index:["value"],immutable:true,initialSet:this.options})}OptionedParamType.prototype.serialize=function(selected){return selected.value};OptionedParamType.prototype.deserialize=function(value){return this.options.byValue[value]};OptionedParamType.prototype.write=function(aggConfig,output){output.params[this.name]=aggConfig.params[this.name].value}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringParamType=StringParamType;var _legacy_class=__webpack_require__(29);var _string=__webpack_require__(1053);var _base=__webpack_require__(119);(0,_legacy_class.createLegacyClass)(StringParamType).inherits(_base.BaseParamType);function StringParamType(config){StringParamType.Super.call(this,config)}StringParamType.prototype.editorComponent=_string.StringParamEditor;StringParamType.prototype.write=function(aggConfig,output){if(aggConfig.params[this.name]&&aggConfig.params[this.name].length){output.params[this.name]=aggConfig.params[this.name]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringParamEditor=StringParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function StringParamEditor(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,showValidation=_ref.showValidation,value=_ref.value,setValidity=_ref.setValidity,setValue=_ref.setValue,setTouched=_ref.setTouched;var isValid=aggParam.required?!!value:true;(0,_react.useEffect)(function(){setValidity(isValid)},[isValid]);return _react.default.createElement(_eui.EuiFormRow,{label:aggParam.displayName||aggParam.name,fullWidth:true,compressed:true,isInvalid:showValidation?!isValid:false},_react.default.createElement(_eui.EuiFieldText,{value:value||"","data-test-subj":"visEditorStringInput".concat(agg.id).concat(aggParam.name),onChange:function onChange(ev){return setValue(ev.target.value)},fullWidth:true,onBlur:setTouched,isInvalid:showValidation?!isValid:false}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JsonParamType=JsonParamType;var _lodash=_interopRequireDefault(__webpack_require__(1));var _raw_json=__webpack_require__(1055);var _base=__webpack_require__(119);var _legacy_class=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(JsonParamType).inherits(_base.BaseParamType);function JsonParamType(config){config=_lodash.default.defaults(config,{name:"json"});JsonParamType.Super.call(this,config)}JsonParamType.prototype.editorComponent=_raw_json.RawJsonParamEditor;JsonParamType.prototype.write=function(aggConfig,output){var paramJson;var param=aggConfig.params[this.name];if(!param){return}try{paramJson=JSON.parse(param)}catch(err){return}function filteredCombine(srcA,srcB){function mergeObjs(a,b){return(0,_lodash.default)(a).keys().union(_lodash.default.keys(b)).transform(function(dest,key){var val=compare(a[key],b[key]);if(val!==undefined)dest[key]=val},{}).value()}function mergeArrays(a,b){return _lodash.default.times(Math.max(a.length,b.length),function(i){return compare(a[i],b[i])})}function compare(a,b){if(_lodash.default.isPlainObject(a)&&_lodash.default.isPlainObject(b))return mergeObjs(a,b);if(Array.isArray(a)&&Array.isArray(b))return mergeArrays(a,b);if(b===null)return undefined;if(b!==undefined)return b;return a}return compare(srcA,srcB)}output.params=filteredCombine(output.params,paramJson);return}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RawJsonParamEditor=RawJsonParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);var _utils=__webpack_require__(579);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function RawJsonParamEditor(_ref){var agg=_ref.agg,showValidation=_ref.showValidation,_ref$value=_ref.value,value=_ref$value===void 0?"":_ref$value,setValidity=_ref.setValidity,setValue=_ref.setValue,setTouched=_ref.setTouched;var label=_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.jsonInputLabel",defaultMessage:"JSON input"})," ",_react.default.createElement(_eui.EuiIconTip,{position:"right",content:_i18n.i18n.translate("common.ui.aggTypes.jsonInputTooltip",{defaultMessage:"Any JSON formatted properties you add here will be merged with the elasticsearch aggregation definition for this section. For example 'shard_size' on a terms aggregation."}),type:"questionInCircle"}));var isValid=(0,_utils.isValidJson)(value);var onChange=function onChange(ev){var textValue=ev.target.value;setValue(textValue);setValidity((0,_utils.isValidJson)(textValue))};(0,_react.useEffect)(function(){setValidity(isValid)},[isValid]);return _react.default.createElement(_eui.EuiFormRow,{label:label,isInvalid:showValidation?!isValid:false,fullWidth:true,compressed:true},_react.default.createElement(_eui.EuiTextArea,{id:"visEditorRawJson".concat(agg.id),isInvalid:showValidation?!isValid:false,value:value,onChange:onChange,rows:2,fullWidth:true,onBlur:setTouched}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.countMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _field_formats=__webpack_require__(32);var _i18n=__webpack_require__(2);var countMetricAgg=new _metric_agg_type.MetricAggType({name:"count",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.countTitle",{defaultMessage:"Count"}),hasNoDsl:true,makeLabel:function makeLabel(){return _i18n.i18n.translate("common.ui.aggTypes.metrics.countLabel",{defaultMessage:"Count"})},getFormat:function getFormat(){return _field_formats.fieldFormats.getDefaultInstance("number")},getValue:function getValue(agg,bucket){return bucket.doc_count},isScalable:function isScalable(){return true}});exports.countMetricAgg=countMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.avgMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _i18n=__webpack_require__(2);var avgMetricAgg=new _metric_agg_type.MetricAggType({name:"avg",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.averageTitle",{defaultMessage:"Average"}),makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("common.ui.aggTypes.metrics.averageLabel",{defaultMessage:"Average {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:"number"}]});exports.avgMetricAgg=avgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sumMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _i18n=__webpack_require__(2);var sumMetricAgg=new _metric_agg_type.MetricAggType({name:"sum",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.sumTitle",{defaultMessage:"Sum"}),makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("common.ui.aggTypes.metrics.sumLabel",{defaultMessage:"Sum of {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:"number"}],isScalable:function isScalable(){return true}});exports.sumMetricAgg=sumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.medianMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _percentiles=__webpack_require__(583);var _i18n=__webpack_require__(2);var medianMetricAgg=new _metric_agg_type.MetricAggType({name:"median",dslName:"percentiles",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.medianTitle",{defaultMessage:"Median"}),makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("common.ui.aggTypes.metrics.medianLabel",{defaultMessage:"Median {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:"number"},{name:"percents",default:[50]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:_percentiles.percentilesMetricAgg.getResponseAggs,getValue:_percentiles.percentilesMetricAgg.getValue});exports.medianMetricAgg=medianMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ordinalSuffix=ordinalSuffix;function ordinalSuffix(num){return num+""+suffix(num)}function suffix(num){var int=Math.floor(parseFloat(num));var hunth=int%100;if(hunth>=11&&hunth<=13)return"th";var tenth=int%10;if(tenth===1)return"st";if(tenth===2)return"nd";if(tenth===3)return"rd";return"th"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentilesEditor=PercentilesEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _number_list=__webpack_require__(584);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function PercentilesEditor(_ref){var agg=_ref.agg,showValidation=_ref.showValidation,_ref$value=_ref.value,value=_ref$value===void 0?[]:_ref$value,setTouched=_ref.setTouched,setValidity=_ref.setValidity,setValue=_ref.setValue;var label=_i18n.i18n.translate("common.ui.aggTypes.percentiles.percentsLabel",{defaultMessage:"Percents"});var _useState=(0,_react.useState)(true),_useState2=_slicedToArray(_useState,2),isValid=_useState2[0],setIsValid=_useState2[1];var setModelValidy=function setModelValidy(isListValid){setIsValid(isListValid);setValidity(isListValid)};return _react.default.createElement(_eui.EuiFormRow,{label:label,labelType:"legend",fullWidth:true,id:"visEditorPercentileLabel".concat(agg.id),isInvalid:showValidation?!isValid:false,compressed:true},_react.default.createElement(_number_list.NumberList,{labelledbyId:"visEditorPercentileLabel".concat(agg.id,"-legend"),numberArray:value,range:"[0,100]",validateAscendingOrder:false,unitName:_i18n.i18n.translate("common.ui.aggTypes.percentileRanks.percentUnitNameText",{defaultMessage:"percent"}),showValidation:showValidation,onChange:setValue,setTouched:setTouched,setValidity:setModelValidy}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NumberList=NumberList;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _i18n=__webpack_require__(2);var _number_row=__webpack_require__(1063);var _utils=__webpack_require__(1064);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function NumberList(_ref){var labelledbyId=_ref.labelledbyId,numberArray=_ref.numberArray,range=_ref.range,showValidation=_ref.showValidation,unitName=_ref.unitName,_ref$validateAscendin=_ref.validateAscendingOrder,validateAscendingOrder=_ref$validateAscendin===void 0?true:_ref$validateAscendin,onBlur=_ref.onBlur,onFocus=_ref.onFocus,onChange=_ref.onChange,setTouched=_ref.setTouched,setValidity=_ref.setValidity;var numberRange=(0,_utils.getRange)(range);var _useState=(0,_react.useState)((0,_utils.getInitModelList)(numberArray)),_useState2=_slicedToArray(_useState,2),models=_useState2[0],setModels=_useState2[1];var _useState3=(0,_react.useState)(_utils.EMPTY_STRING),_useState4=_slicedToArray(_useState3,2),ascendingError=_useState4[0],setAscendingError=_useState4[1];(0,_react.useEffect)(function(){var updatedModels=(0,_utils.getUpdatedModels)(numberArray,models,numberRange);if(validateAscendingOrder){var isOrderValid=(0,_utils.validateOrder)(updatedModels);setAscendingError(isOrderValid?_i18n.i18n.translate("common.ui.aggTypes.numberList.invalidAscOrderErrorMessage",{defaultMessage:"The values should be in ascending order."}):_utils.EMPTY_STRING)}setModels(updatedModels)},[numberArray]);(0,_react.useEffect)(function(){setValidity(!(0,_utils.hasInvalidValues)(models))},[models]);(0,_react.useEffect)(function(){onChange(models.map(function(_ref2){var value=_ref2.value;return value===_utils.EMPTY_STRING?undefined:value}))},[]);var onChangeValue=function onChangeValue(_ref3){var id=_ref3.id,value=_ref3.value;var parsedValue=(0,_utils.parse)(value);var _validateValue=(0,_utils.validateValue)(parsedValue,numberRange),isValid=_validateValue.isValid,errors=_validateValue.errors;setValidity(isValid);var currentModel=models.find(function(model){return model.id===id});if(currentModel){currentModel.value=parsedValue;currentModel.isInvalid=!isValid;currentModel.errors=errors}onUpdate(models)};var onAdd=function onAdd(){var newArray=[].concat(_toConsumableArray(models),[(0,_utils.getNextModel)(models,numberRange)]);onUpdate(newArray)};var onDelete=function onDelete(id){var newArray=models.filter(function(model){return model.id!==id});onUpdate(newArray)};var onBlurFn=function onBlurFn(model){if(model.value===_utils.EMPTY_STRING){model.isInvalid=true}setTouched();if(onBlur){onBlur()}};var onUpdate=function onUpdate(modelList){setModels(modelList);onChange(modelList.map(function(_ref4){var value=_ref4.value;return value===_utils.EMPTY_STRING?undefined:value}))};return _react.default.createElement(_react.default.Fragment,null,models.map(function(model,arrayIndex){return _react.default.createElement(_react.Fragment,{key:model.id},_react.default.createElement(_number_row.NumberRow,{isInvalid:showValidation?model.isInvalid:false,disableDelete:models.length===1,model:model,labelledbyId:labelledbyId,range:numberRange,onDelete:onDelete,onFocus:onFocus,onChange:onChangeValue,onBlur:function onBlur(){return onBlurFn(model)},autoFocus:models.length!==1&&arrayIndex===models.length-1}),showValidation&&model.isInvalid&&model.errors&&model.errors.length>0&&_react.default.createElement(_eui.EuiFormErrorText,null,model.errors.join("\n")),models.length-1!==arrayIndex&&_react.default.createElement(_eui.EuiSpacer,{size:"s"}))}),showValidation&&ascendingError&&_react.default.createElement(_eui.EuiFormErrorText,null,ascendingError),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"plusInCircleFilled",onClick:onAdd,size:"xs"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.numberList.addUnitButtonLabel",defaultMessage:"Add {unitName}",values:{unitName:unitName}}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NumberRow=NumberRow;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NumberRow(_ref){var autoFocus=_ref.autoFocus,disableDelete=_ref.disableDelete,model=_ref.model,isInvalid=_ref.isInvalid,labelledbyId=_ref.labelledbyId,range=_ref.range,onBlur=_ref.onBlur,onDelete=_ref.onDelete,onFocus=_ref.onFocus,onChange=_ref.onChange;var deleteBtnAriaLabel=_i18n.i18n.translate("common.ui.aggTypes.numberList.removeUnitButtonAriaLabel",{defaultMessage:"Remove the rank value of {value}",values:{value:model.value}});var onValueChanged=function onValueChanged(event){return onChange({value:event.target.value,id:model.id})};return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,alignItems:"center",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldNumber,{"aria-labelledby":labelledbyId,autoFocus:autoFocus,compressed:true,isInvalid:isInvalid,placeholder:_i18n.i18n.translate("common.ui.aggTypes.numberList.enterValuePlaceholder",{defaultMessage:"Enter a value"}),onChange:onValueChanged,onFocus:onFocus,value:model.value,fullWidth:true,min:range.min,max:range.max,onBlur:onBlur})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":deleteBtnAriaLabel,title:deleteBtnAriaLabel,color:"danger",iconType:"trash",onClick:function onClick(){return onDelete(model.id)},disabled:disableDelete})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parse=parse;exports.getRange=getRange;exports.validateValue=validateValue;exports.validateOrder=validateOrder;exports.getNextModel=getNextModel;exports.getInitModelList=getInitModelList;exports.getUpdatedModels=getUpdatedModels;exports.hasInvalidValues=hasInvalidValues;exports.EMPTY_STRING=void 0;var _lodash=__webpack_require__(1);var _i18n=__webpack_require__(2);var _eui=__webpack_require__(3);var _range=__webpack_require__(1065);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EMPTY_STRING="";exports.EMPTY_STRING=EMPTY_STRING;var defaultRange=(0,_range.parseRange)("[0,Infinity)");var generateId=(0,_eui.htmlIdGenerator)();function parse(value){var parsedValue=parseFloat(value);return isNaN(parsedValue)?EMPTY_STRING:parsedValue}function getRange(range){try{return range?(0,_range.parseRange)(range):defaultRange}catch(e){throw new TypeError("Unable to parse range: "+e.message)}}function validateValue(value,numberRange){var result={isValid:true,errors:[]};if(value===EMPTY_STRING){result.isValid=false}else if(!numberRange.within(value)){result.isValid=false;result.errors.push(_i18n.i18n.translate("common.ui.aggTypes.numberList.invalidRangeErrorMessage",{defaultMessage:"The value should be in the range of {min} to {max}.",values:{min:numberRange.min,max:numberRange.max}}))}return result}function validateOrder(list){var isInvalidOrder=false;list.forEach(function(model,index,array){var previousModel=array[index-1];if(previousModel&&model.value!==EMPTY_STRING){var isInvalidOrderOfItem=model.value<=previousModel.value;if(!model.isInvalid&&isInvalidOrderOfItem){model.isInvalid=true}if(isInvalidOrderOfItem){isInvalidOrder=true}}});return isInvalidOrder}function getNextModel(list,range){var lastValue=(0,_lodash.last)(list).value;var next=Number(lastValue)?Number(lastValue)+1:1;if(next>=range.max){next=range.max-1}return{id:generateId(),value:next,isInvalid:false}}function getInitModelList(list){return list.length?list.map(function(num){return{value:num===undefined?EMPTY_STRING:num,id:generateId(),isInvalid:false}}):[{value:0,id:generateId(),isInvalid:false}]}function getUpdatedModels(numberList,modelList,numberRange){if(!numberList.length){return modelList}return numberList.map(function(number,index){var model=modelList[index]||{id:generateId()};var newValue=number===undefined?EMPTY_STRING:number;var _validateValue=validateValue(newValue,numberRange),isValid=_validateValue.isValid,errors=_validateValue.errors;return _objectSpread({},model,{value:newValue,isInvalid:!isValid,errors:errors})})}function hasInvalidValues(modelList){return!!modelList.find(function(_ref){var isInvalid=_ref.isInvalid;return isInvalid})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseRange=parseRange;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _RE_NUMBER="(\\-?(?:\\d+(?:\\.\\d+)?|Infinity))";var RANGE_RE=new RegExp("^\\s*([\\[|\\(])\\s*"+_RE_NUMBER+"\\s*,\\s*"+_RE_NUMBER+"\\s*([\\]|\\)])\\s*$");function parseRange(input){var match=String(input).match(RANGE_RE);if(!match){throw new TypeError("expected input to be in interval notation e.g., (100, 200]")}return new Range(match[1]==="[",parseFloat(match[2]),parseFloat(match[3]),match[4]==="]")}function Range(){var args=_lodash.default.toArray(arguments);if(args[1]>args[2])args.reverse();this.minInclusive=args[0];this.min=args[1];this.max=args[2];this.maxInclusive=args[3]}Range.prototype.within=function(n){if(this.min===n&&!this.minInclusive)return false;if(this.min>n)return false;if(this.max===n&&!this.maxInclusive)return false;if(this.max<n)return false;return true}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.minMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _i18n=__webpack_require__(2);var minMetricAgg=new _metric_agg_type.MetricAggType({name:"min",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.minTitle",{defaultMessage:"Min"}),makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("common.ui.aggTypes.metrics.minLabel",{defaultMessage:"Min {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:"number,date"}]});exports.minMetricAgg=minMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.maxMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _i18n=__webpack_require__(2);var maxMetricAgg=new _metric_agg_type.MetricAggType({name:"max",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.maxTitle",{defaultMessage:"Max"}),makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("common.ui.aggTypes.metrics.maxLabel",{defaultMessage:"Max {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:"number,date"}]});exports.maxMetricAgg=maxMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.topHitMetricAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _metric_agg_type=__webpack_require__(23);var _top_sort_field=__webpack_require__(1069);var _order=__webpack_require__(586);var _filter=__webpack_require__(587);var _i18n=__webpack_require__(2);var _inline_comp_wrapper=__webpack_require__(588);var _top_field=__webpack_require__(1071);var _top_size=__webpack_require__(1072);var _top_aggregate=__webpack_require__(413);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var isNumericFieldSelected=function isNumericFieldSelected(agg){var fieldType=agg.params.field&&agg.params.field.type;return fieldType&&fieldType==="number"};_filter.aggTypeFieldFilters.addFilter(function(field,aggConfig){if(aggConfig.type.name!=="top_hits"||_lodash.default.get(aggConfig.schema,"aggSettings.top_hits.allowStrings",false)){return true}return field.type==="number"});var topHitMetricAgg=new _metric_agg_type.MetricAggType({name:"top_hits",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.topHitTitle",{defaultMessage:"Top Hit"}),makeLabel:function makeLabel(aggConfig){var lastPrefixLabel=_i18n.i18n.translate("common.ui.aggTypes.metrics.topHit.lastPrefixLabel",{defaultMessage:"Last"});var firstPrefixLabel=_i18n.i18n.translate("common.ui.aggTypes.metrics.topHit.firstPrefixLabel",{defaultMessage:"First"});var prefix=aggConfig.params.sortOrder.value==="desc"?lastPrefixLabel:firstPrefixLabel;if(aggConfig.params.size!==1){prefix+=" ".concat(aggConfig.params.size)}var field=aggConfig.params.field;return"".concat(prefix," ").concat(field?field.displayName:"")},params:[{name:"field",type:"field",editorComponent:_top_field.TopFieldParamEditor,onlyAggregatable:false,filterFieldTypes:"*",write:function write(agg,output){var field=agg.params.field;output.params={};if(field.scripted){output.params.script_fields=_defineProperty({},field.name,{script:{source:field.script,lang:field.lang}})}else{if(field.readFromDocValues){var format=field.type==="date"?"date_time":"use_field_mapping";output.params.docvalue_fields=[{field:field.name,format:format}]}output.params._source=field.name==="_source"?true:field.name}}},{name:"aggregate",type:"optioned",editorComponent:(0,_inline_comp_wrapper.wrapWithInlineComp)(_top_aggregate.TopAggregateParamEditor),options:[{text:_i18n.i18n.translate("common.ui.aggTypes.metrics.topHit.minLabel",{defaultMessage:"Min"}),isCompatible:isNumericFieldSelected,disabled:true,value:"min"},{text:_i18n.i18n.translate("common.ui.aggTypes.metrics.topHit.maxLabel",{defaultMessage:"Max"}),isCompatible:isNumericFieldSelected,disabled:true,value:"max"},{text:_i18n.i18n.translate("common.ui.aggTypes.metrics.topHit.sumLabel",{defaultMessage:"Sum"}),isCompatible:isNumericFieldSelected,disabled:true,value:"sum"},{text:_i18n.i18n.translate("common.ui.aggTypes.metrics.topHit.averageLabel",{defaultMessage:"Average"}),isCompatible:isNumericFieldSelected,disabled:true,value:"average"},{text:_i18n.i18n.translate("common.ui.aggTypes.metrics.topHit.concatenateLabel",{defaultMessage:"Concatenate"}),isCompatible:function isCompatible(aggConfig){return _lodash.default.get(aggConfig.schema,"aggSettings.top_hits.allowStrings",false)},disabled:true,value:"concat"}],write:_lodash.default.noop},{name:"size",editorComponent:(0,_inline_comp_wrapper.wrapWithInlineComp)(_top_size.TopSizeParamEditor),default:1},{name:"sortField",type:"field",editorComponent:_top_sort_field.TopSortFieldParamEditor,filterFieldTypes:["number","date","ip","string"],default:function _default(agg){return agg.getIndexPattern().timeFieldName},write:_lodash.default.noop},{name:"sortOrder",type:"optioned",default:"desc",editorComponent:_order.OrderParamEditor,options:[{text:_i18n.i18n.translate("common.ui.aggTypes.metrics.topHit.descendingLabel",{defaultMessage:"Descending"}),value:"desc"},{text:_i18n.i18n.translate("common.ui.aggTypes.metrics.topHit.ascendingLabel",{defaultMessage:"Ascending"}),value:"asc"}],write:function write(agg,output){var sortField=agg.params.sortField;var sortOrder=agg.params.sortOrder;if(sortField.scripted){output.params.sort=[{_script:{script:{source:sortField.script,lang:sortField.lang},type:sortField.type,order:sortOrder.value}}]}else{output.params.sort=[_defineProperty({},sortField.name,{order:sortOrder.value})]}}}],getValue:function getValue(agg,bucket){var hits=_lodash.default.get(bucket,"".concat(agg.id,".hits.hits"));if(!hits||!hits.length){return null}var path=agg.params.field.name;var values=(0,_lodash.default)(hits).map(function(hit){return path==="_source"?hit._source:agg.getIndexPattern().flattenHit(hit,true)[path]}).flatten().value();if(values.length===1){values=values[0]}if(Array.isArray(values)){if(!_lodash.default.compact(values).length){return null}switch(agg.params.aggregate.value){case"max":return _lodash.default.max(values);case"min":return _lodash.default.min(values);case"sum":return _lodash.default.sum(values);case"average":return _lodash.default.sum(values)/values.length}}return values}});exports.topHitMetricAgg=topHitMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopSortFieldParamEditor=TopSortFieldParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _field=__webpack_require__(410);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function TopSortFieldParamEditor(props){var customLabel=_i18n.i18n.translate("common.ui.aggTypes.sortOnLabel",{defaultMessage:"Sort on"});return _react.default.createElement(_field.FieldParamEditor,_extends({},props,{customLabel:customLabel}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypeFieldFilters=exports.aggTypeFieldFilters=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypeFieldFilters=function(){function AggTypeFieldFilters(){_classCallCheck(this,AggTypeFieldFilters);_defineProperty(this,"filters",new Set)}_createClass(AggTypeFieldFilters,[{key:"addFilter",value:function addFilter(filter){this.filters.add(filter)}},{key:"filter",value:function filter(fields,aggConfig){var allFilters=Array.from(this.filters);var allowedAggTypeFields=fields.filter(function(field){var isAggTypeFieldAllowed=allFilters.every(function(filter){return filter(field,aggConfig)});return isAggTypeFieldAllowed});return allowedAggTypeFields}}]);return AggTypeFieldFilters}();exports.AggTypeFieldFilters=AggTypeFieldFilters;var aggTypeFieldFilters=new AggTypeFieldFilters;exports.aggTypeFieldFilters=aggTypeFieldFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopFieldParamEditor=TopFieldParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _field=__webpack_require__(410);var _top_aggregate=__webpack_require__(413);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function TopFieldParamEditor(props){var compatibleAggs=(0,_top_aggregate.getCompatibleAggs)(props.agg);var customError;if(props.value&&!compatibleAggs.length){customError=_i18n.i18n.translate("common.ui.aggTypes.aggregateWith.noAggsErrorTooltip",{defaultMessage:"The chosen field has no compatible aggregations."})}return _react.default.createElement(_field.FieldParamEditor,_extends({},props,{customError:customError}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopSizeParamEditor=TopSizeParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _size=__webpack_require__(414);var _top_aggregate=__webpack_require__(413);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function TopSizeParamEditor(props){var iconTip=_react.default.createElement(_react.default.Fragment,null," ",_react.default.createElement(_eui.EuiIconTip,{position:"right",content:_i18n.i18n.translate("common.ui.aggTypes.sizeTooltip",{defaultMessage:"Request top-K hits. Multiple hits will be combined via 'aggregate with'."}),type:"questionInCircle"}));var fieldType=props.agg.params.field&&props.agg.params.field.type;var disabled=fieldType&&!(0,_top_aggregate.getCompatibleAggs)(props.agg).length;return _react.default.createElement(_size.SizeParamEditor,_extends({},props,{iconTip:iconTip,disabled:disabled}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stdDeviationMetricAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _metric_agg_type=__webpack_require__(23);var _get_response_agg_config_class=__webpack_require__(412);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var responseAggConfigProps={valProp:function valProp(){var details=this.keyedDetails(this.params.customLabel)[this.key];return details.valProp},makeLabel:function makeLabel(){var fieldDisplayName=this.getFieldDisplayName();var details=this.keyedDetails(this.params.customLabel,fieldDisplayName);return _lodash.default.get(details,[this.key,"title"])},keyedDetails:function keyedDetails(customLabel,fieldDisplayName){var label=customLabel?customLabel:_i18n.i18n.translate("common.ui.aggTypes.metrics.standardDeviation.keyDetailsLabel",{defaultMessage:"Standard Deviation of {fieldDisplayName}",values:{fieldDisplayName:fieldDisplayName}});return{std_lower:{valProp:["std_deviation_bounds","lower"],title:_i18n.i18n.translate("common.ui.aggTypes.metrics.standardDeviation.lowerKeyDetailsTitle",{defaultMessage:"Lower {label}",values:{label:label}})},std_upper:{valProp:["std_deviation_bounds","upper"],title:_i18n.i18n.translate("common.ui.aggTypes.metrics.standardDeviation.upperKeyDetailsTitle",{defaultMessage:"Upper {label}",values:{label:label}})}}}};var stdDeviationMetricAgg=new _metric_agg_type.MetricAggType({name:"std_dev",dslName:"extended_stats",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.standardDeviationTitle",{defaultMessage:"Standard Deviation"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("common.ui.aggTypes.metrics.standardDeviationLabel",{defaultMessage:"Standard Deviation of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:"number"}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,responseAggConfigProps);return[new ValueAggConfig("std_lower"),new ValueAggConfig("std_upper")]},getValue:function getValue(agg,bucket){return _lodash.default.get(bucket[agg.parentId],agg.valProp())}});exports.stdDeviationMetricAgg=stdDeviationMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cardinalityMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _field_formats=__webpack_require__(32);var _i18n=__webpack_require__(2);var cardinalityMetricAgg=new _metric_agg_type.MetricAggType({name:"cardinality",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.uniqueCountTitle",{defaultMessage:"Unique Count"}),makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("common.ui.aggTypes.metrics.uniqueCountLabel",{defaultMessage:"Unique count of {field}",values:{field:aggConfig.getFieldDisplayName()}})},getFormat:function getFormat(){return _field_formats.fieldFormats.getDefaultInstance("number")},params:[{name:"field",type:"field"}]});exports.cardinalityMetricAgg=cardinalityMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoBoundsMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _i18n=__webpack_require__(2);var geoBoundsMetricAgg=new _metric_agg_type.MetricAggType({name:"geo_bounds",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.geoBoundsTitle",{defaultMessage:"Geo Bounds"}),makeLabel:function makeLabel(){return _i18n.i18n.translate("common.ui.aggTypes.metrics.geoBoundsLabel",{defaultMessage:"Geo Bounds"})},params:[{name:"field",type:"field",filterFieldTypes:"geo_point"}]});exports.geoBoundsMetricAgg=geoBoundsMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoCentroidMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _i18n=__webpack_require__(2);var geoCentroidMetricAgg=new _metric_agg_type.MetricAggType({name:"geo_centroid",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.geoCentroidTitle",{defaultMessage:"Geo Centroid"}),makeLabel:function makeLabel(){return _i18n.i18n.translate("common.ui.aggTypes.metrics.geoCentroidLabel",{defaultMessage:"Geo Centroid"})},params:[{name:"field",type:"field",filterFieldTypes:"geo_point"}],getValue:function getValue(agg,bucket){return bucket[agg.id]&&bucket[agg.id].location}});exports.geoCentroidMetricAgg=geoCentroidMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.percentileRanksMetricAgg=void 0;var _percentile_ranks=__webpack_require__(1078);var _metric_agg_type=__webpack_require__(23);var _get_response_agg_config_class=__webpack_require__(412);var _field_formats=__webpack_require__(32);var _percentiles_get_value=__webpack_require__(585);var _i18n=__webpack_require__(2);var valueProps={makeLabel:function makeLabel(){var field=this.getField();var format=field&&field.format||_field_formats.fieldFormats.getDefaultInstance("number");var label=this.params.customLabel||this.getFieldDisplayName();return _i18n.i18n.translate("common.ui.aggTypes.metrics.percentileRanks.valuePropsLabel",{defaultMessage:'Percentile rank {format} of "{label}"',values:{format:format.convert(this.key,"text"),label:label}})}};var percentileRanksMetricAgg=new _metric_agg_type.MetricAggType({name:"percentile_ranks",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.percentileRanksTitle",{defaultMessage:"Percentile Ranks"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("common.ui.aggTypes.metrics.percentileRanksLabel",{defaultMessage:"Percentile ranks of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:"number"},{name:"values",editorComponent:_percentile_ranks.PercentileRanksEditor,default:[]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,valueProps);return agg.params.values.map(function(value){return new ValueAggConfig(value)})},getFormat:function getFormat(){return _field_formats.fieldFormats.getInstance("percent")||_field_formats.fieldFormats.getDefaultInstance("number")},getValue:function getValue(agg,bucket){return(0,_percentiles_get_value.getPercentileValue)(agg,bucket)/100}});exports.percentileRanksMetricAgg=percentileRanksMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentileRanksEditor=PercentileRanksEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _number_list=__webpack_require__(584);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function PercentileRanksEditor(_ref){var agg=_ref.agg,showValidation=_ref.showValidation,_ref$value=_ref.value,value=_ref$value===void 0?[]:_ref$value,setTouched=_ref.setTouched,setValidity=_ref.setValidity,setValue=_ref.setValue;var label=_i18n.i18n.translate("common.ui.aggTypes.percentileRanks.valuesLabel",{defaultMessage:"Values"});var _useState=(0,_react.useState)(true),_useState2=_slicedToArray(_useState,2),isValid=_useState2[0],setIsValid=_useState2[1];var setModelValidy=function setModelValidy(isListValid){setIsValid(isListValid);setValidity(isListValid)};return _react.default.createElement(_eui.EuiFormRow,{label:label,labelType:"legend",fullWidth:true,id:"visEditorPercentileRanksLabel".concat(agg.id),isInvalid:showValidation?!isValid:false,compressed:true,"data-test-subj":"visEditorPercentileRanks"},_react.default.createElement(_number_list.NumberList,{labelledbyId:"visEditorPercentileRanksLabel".concat(agg.id,"-legend"),numberArray:value,range:"[-Infinity,Infinity]",unitName:_i18n.i18n.translate("common.ui.aggTypes.percentileRanks.valueUnitNameText",{defaultMessage:"value"}),showValidation:showValidation,onChange:setValue,setTouched:setTouched,setValidity:setModelValidy}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.derivativeMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _parent_pipeline_agg_helper=__webpack_require__(120);var _make_nested_label=__webpack_require__(70);var _i18n=__webpack_require__(2);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var derivativeLabel=_i18n.i18n.translate("common.ui.aggTypes.metrics.derivativeLabel",{defaultMessage:"derivative"});var derivativeMetricAgg=new _metric_agg_type.MetricAggType({name:"derivative",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.derivativeTitle",{defaultMessage:"Derivative"}),subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,derivativeLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.derivativeMetricAgg=derivativeMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricAggParamEditor=MetricAggParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _agg_utils=__webpack_require__(348);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var aggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev"];var isCompatibleAgg=(0,_agg_utils.isCompatibleAggregation)(aggFilter);var EMPTY_VALUE="EMPTY_VALUE";function MetricAggParamEditor(_ref){var agg=_ref.agg,value=_ref.value,showValidation=_ref.showValidation,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched,metricAggs=_ref.metricAggs;var label=_i18n.i18n.translate("common.ui.aggTypes.metricLabel",{defaultMessage:"Metric"});var isValid=!!value;(0,_react.useEffect)(function(){setValidity(isValid)},[isValid]);(0,_react.useEffect)(function(){if(metricAggs&&value&&value!=="custom"){var respAgg=metricAggs.filter(isCompatibleAgg).find(function(aggregation){return aggregation.id===value});if(!respAgg){setValue()}}},[metricAggs]);var options=metricAggs?metricAggs.filter(function(respAgg){return respAgg.type.name!==agg.type.name}).map(function(respAgg){return{text:_i18n.i18n.translate("common.ui.aggTypes.definiteMetricLabel",{defaultMessage:"Metric: {safeMakeLabel}",values:{safeMakeLabel:(0,_agg_utils.safeMakeLabel)(respAgg)}}),value:respAgg.id,disabled:!isCompatibleAgg(respAgg)}}):[];options.push({text:_i18n.i18n.translate("common.ui.aggTypes.customMetricLabel",{defaultMessage:"Custom metric"}),value:"custom",disabled:false});if(!value){options.unshift({text:"",value:EMPTY_VALUE,disabled:false})}return _react.default.createElement(_eui.EuiFormRow,{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,compressed:true},_react.default.createElement(_eui.EuiSelect,{options:options,value:value||EMPTY_VALUE,onChange:function onChange(ev){return setValue(ev.target.value)},fullWidth:true,isInvalid:showValidation?!isValid:false,onBlur:setTouched,"data-test-subj":"visEditorSubAggMetric".concat(agg.id)}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SubAggParamEditor=SubAggParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _default=__webpack_require__(349);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function SubAggParamEditor(_ref){var agg=_ref.agg,value=_ref.value,metricAggs=_ref.metricAggs,state=_ref.state,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched,subAggParams=_ref.subAggParams;(0,_react.useEffect)(function(){if(agg.params.metricAgg!=="custom"){setValue(null)}else if(!agg.params.customMetric){setValue(agg.type.params.byName.customMetric.makeAgg(agg))}},[value,metricAggs]);var _useState=(0,_react.useState)(true),_useState2=_slicedToArray(_useState,2),innerState=_useState2[0],setInnerState=_useState2[1];if(agg.params.metricAgg!=="custom"||!agg.params.customMetric){return null}return _react.default.createElement(_default.DefaultEditorAggParams,{agg:agg.params.customMetric,groupName:"metrics",className:"visEditorAgg__subAgg",formIsTouched:subAggParams.formIsTouched,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,onAggParamsChange:function onAggParamsChange(){setInnerState(!innerState);subAggParams.onAggParamsChange.apply(subAggParams,arguments)},onAggTypeChange:subAggParams.onAggTypeChange,setValidity:setValidity,setTouched:setTouched})}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DefaultEditorAggSelect=DefaultEditorAggSelect;var _lodash=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);var _documentation_links=__webpack_require__(116);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function DefaultEditorAggSelect(_ref){var aggError=_ref.aggError,id=_ref.id,indexPattern=_ref.indexPattern,value=_ref.value,setValue=_ref.setValue,aggTypeOptions=_ref.aggTypeOptions,showValidation=_ref.showValidation,isSubAggregation=_ref.isSubAggregation,setTouched=_ref.setTouched,setValidity=_ref.setValidity;var selectedOptions=value?[{label:value.title,target:value}]:[];var label=isSubAggregation?_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.vis.defaultEditor.aggSelect.subAggregationLabel",defaultMessage:"Sub aggregation"}):_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.vis.defaultEditor.aggSelect.aggregationLabel",defaultMessage:"Aggregation"});var aggHelpLink;if((0,_lodash.has)(value,"name")){aggHelpLink=(0,_lodash.get)(_documentation_links.documentationLinks,["aggs",value.name])}var helpLink=value&&aggHelpLink&&_react.default.createElement(_eui.EuiLink,{href:aggHelpLink,target:"_blank",rel:"noopener"},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.vis.defaultEditor.aggSelect.helpLinkLabel",defaultMessage:"{aggTitle} help",values:{aggTitle:value?value.title:""}})));var errors=aggError?[aggError]:[];if(!aggTypeOptions.length){errors.push(_i18n.i18n.translate("common.ui.vis.defaultEditor.aggSelect.noCompatibleAggsDescription",{defaultMessage:"The index pattern {indexPatternTitle} does not have any aggregatable fields.",values:{indexPatternTitle:indexPattern&&indexPattern.title}}))}var isValid=!!value&&!errors.length;(0,_react.useEffect)(function(){setValidity(isValid)},[isValid]);(0,_react.useEffect)(function(){if(errors.length){setTouched()}},[errors.length]);var onChange=function onChange(options){var selectedOption=(0,_lodash.get)(options,"0.target");if(selectedOption){setValue(selectedOption)}};return _react.default.createElement(_eui.EuiFormRow,{label:label,labelAppend:helpLink,error:errors,isInvalid:showValidation?!isValid:false,fullWidth:true,compressed:true},_react.default.createElement(_eui.EuiComboBox,{placeholder:_i18n.i18n.translate("common.ui.vis.defaultEditor.aggSelect.selectAggPlaceholder",{defaultMessage:"Select an aggregation"}),id:"visDefaultEditorAggSelect".concat(id),isDisabled:!aggTypeOptions.length,options:aggTypeOptions,selectedOptions:selectedOptions,singleSelection:{asPlainText:true},onBlur:setTouched,onChange:onChange,"data-test-subj":"defaultEditorAggSelect",isClearable:false,isInvalid:showValidation?!isValid:false,fullWidth:true}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DefaultEditorAggParam=DefaultEditorAggParam;var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function DefaultEditorAggParam(props){var agg=props.agg,aggParam=props.aggParam,ParamEditor=props.paramEditor,onChange=props.onChange,setValidity=props.setValidity,rest=_objectWithoutProperties(props,["agg","aggParam","paramEditor","onChange","setValidity"]);(0,_react.useEffect)(function(){if(aggParam.shouldShow&&!aggParam.shouldShow(agg)){setValidity(true)}},[agg,agg.params.field]);if(aggParam.shouldShow&&!aggParam.shouldShow(agg)){return null}return _react.default.createElement(ParamEditor,_extends({agg:agg,aggParam:aggParam,setValidity:setValidity,setValue:function setValue(value){return onChange(agg.params,aggParam.name,value)}},rest))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAggParamsToRender=getAggParamsToRender;exports.getError=getError;exports.getAggTypeOptions=getAggTypeOptions;exports.isInvalidParamsTouched=isInvalidParamsTouched;var _lodash=__webpack_require__(1);var _i18n=__webpack_require__(2);var _filter=__webpack_require__(411);var _agg_types=__webpack_require__(347);var _filter2=__webpack_require__(587);var _utils=__webpack_require__(590);function getAggParamsToRender(_ref){var agg=_ref.agg,editorConfig=_ref.editorConfig,metricAggs=_ref.metricAggs,state=_ref.state;var params={basic:[],advanced:[]};var paramsToRender=agg.type&&agg.type.params.filter(function(param){return!(0,_lodash.get)(editorConfig,[param.name,"hidden"],false)})||[];paramsToRender.forEach(function(param,index){var indexedFields=[];var fields;if(agg.schema.hideCustomLabel&&param.name==="customLabel"){return}if(param.type==="field"){var availableFields=param.getAvailableFields(agg.getIndexPattern().fields);fields=_filter2.aggTypeFieldFilters.filter(availableFields,agg);indexedFields=(0,_utils.groupAndSortBy)(fields,"type","name");if(fields&&!indexedFields.length&&index>0){return}}var type=param.advanced?"advanced":"basic";if(param.editorComponent){params[type].push({agg:agg,aggParam:param,editorConfig:editorConfig,indexedFields:indexedFields,paramEditor:param.editorComponent,metricAggs:metricAggs,state:state,value:agg.params[param.name]})}});return params}function getError(agg,aggIsTooLow){var errors=[];if(aggIsTooLow){errors.push(_i18n.i18n.translate("common.ui.vis.editors.aggParams.errors.aggWrongRunOrderErrorMessage",{defaultMessage:'"{schema}" aggs must run before all other buckets!',values:{schema:agg.schema.title}}))}return errors}function getAggTypeOptions(agg,indexPattern,groupName){var aggTypeOptions=_filter.aggTypeFilters.filter(_agg_types.aggTypes.byType[groupName],indexPattern,agg);return(0,_utils.groupAndSortBy)(aggTypeOptions,"subtype","title")}function isInvalidParamsTouched(aggType,aggTypeState,aggParams){if(!aggType){return aggTypeState.touched}var invalidParams=Object.values(aggParams).filter(function(param){return!param.valid});if((0,_lodash.isEmpty)(invalidParams)){return false}return invalidParams.every(function(param){return param.touched})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggTypeReducer=aggTypeReducer;exports.aggParamsReducer=aggParamsReducer;exports.initAggParamsState=initAggParamsState;exports.AGG_PARAMS_ACTION_KEYS=exports.AGG_TYPE_ACTION_KEYS=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AGG_TYPE_ACTION_KEYS;exports.AGG_TYPE_ACTION_KEYS=AGG_TYPE_ACTION_KEYS;(function(AGG_TYPE_ACTION_KEYS){AGG_TYPE_ACTION_KEYS["TOUCHED"]="aggTypeTouched";AGG_TYPE_ACTION_KEYS["VALID"]="aggTypeValid"})(AGG_TYPE_ACTION_KEYS||(exports.AGG_TYPE_ACTION_KEYS=AGG_TYPE_ACTION_KEYS={}));function aggTypeReducer(state,action){switch(action.type){case AGG_TYPE_ACTION_KEYS.TOUCHED:return _objectSpread({},state,{touched:action.payload});case AGG_TYPE_ACTION_KEYS.VALID:return _objectSpread({},state,{valid:action.payload});default:throw new Error}}var AGG_PARAMS_ACTION_KEYS;exports.AGG_PARAMS_ACTION_KEYS=AGG_PARAMS_ACTION_KEYS;(function(AGG_PARAMS_ACTION_KEYS){AGG_PARAMS_ACTION_KEYS["TOUCHED"]="aggParamsTouched";AGG_PARAMS_ACTION_KEYS["VALID"]="aggParamsValid";AGG_PARAMS_ACTION_KEYS["RESET"]="aggParamsReset"})(AGG_PARAMS_ACTION_KEYS||(exports.AGG_PARAMS_ACTION_KEYS=AGG_PARAMS_ACTION_KEYS={}));function aggParamsReducer(state,_ref){var type=_ref.type,_ref$paramName=_ref.paramName,paramName=_ref$paramName===void 0?"":_ref$paramName,payload=_ref.payload;var targetParam=state[paramName]||{valid:true,touched:false};switch(type){case AGG_PARAMS_ACTION_KEYS.TOUCHED:return _objectSpread({},state,_defineProperty({},paramName,_objectSpread({},targetParam,{touched:payload})));case AGG_PARAMS_ACTION_KEYS.VALID:return _objectSpread({},state,_defineProperty({},paramName,_objectSpread({},targetParam,{valid:payload})));case AGG_PARAMS_ACTION_KEYS.RESET:return{};default:throw new Error}}function initAggParamsState(params){var state=params.reduce(function(stateObj,param){stateObj[param.aggParam.name]={valid:true,touched:false};return stateObj},{});return state}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EditorConfigProviderRegistry=exports.editorConfigProviders=void 0;var _math=__webpack_require__(581);var _public=__webpack_require__(24);var _least_common_interval=__webpack_require__(580);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EditorConfigProviderRegistry=function(){function EditorConfigProviderRegistry(){_classCallCheck(this,EditorConfigProviderRegistry);_defineProperty(this,"providers",new Set)}_createClass(EditorConfigProviderRegistry,[{key:"register",value:function register(configProvider){this.providers.add(configProvider)}},{key:"getConfigForAgg",value:function getConfigForAgg(aggType,indexPattern,aggConfig){var configs=Array.from(this.providers).map(function(provider){return provider(aggType,indexPattern,aggConfig)});return this.mergeConfigs(configs)}},{key:"isTimeBaseParam",value:function isTimeBaseParam(config){return config.hasOwnProperty("default")&&config.hasOwnProperty("timeBase")}},{key:"isBaseParam",value:function isBaseParam(config){return config.hasOwnProperty("base")}},{key:"isFixedParam",value:function isFixedParam(config){return config.hasOwnProperty("fixedValue")}},{key:"mergeHidden",value:function mergeHidden(current,merged){return Boolean(current.hidden||merged.hidden)}},{key:"mergeHelp",value:function mergeHelp(current,merged){if(!current.help){return merged.help}return merged.help?"".concat(merged.help,"\n\n").concat(current.help):current.help}},{key:"mergeFixedAndBase",value:function mergeFixedAndBase(current,merged,paramName){if(this.isFixedParam(current)&&this.isFixedParam(merged)&&current.fixedValue!==merged.fixedValue){throw new Error("Two EditorConfigProviders provided different fixed values for field ".concat(paramName,":\n          ").concat(merged.fixedValue," !== ").concat(current.fixedValue))}if(this.isFixedParam(current)&&this.isBaseParam(merged)||this.isBaseParam(current)&&this.isFixedParam(merged)){throw new Error("Tried to provide a fixedValue and a base for param ".concat(paramName,"."))}if(this.isBaseParam(current)&&this.isBaseParam(merged)){return{base:(0,_math.leastCommonMultiple)(current.base,merged.base)}}if(this.isFixedParam(current)){return{fixedValue:current.fixedValue}}if(this.isBaseParam(current)){return{base:current.base}}return{}}},{key:"mergeTimeBase",value:function mergeTimeBase(current,merged,paramName){if(current.default!==current.timeBase){throw new Error("Tried to provide differing default and timeBase values for ".concat(paramName,"."))}if(this.isTimeBaseParam(merged)){var timeBase=(0,_least_common_interval.leastCommonInterval)(current.timeBase,merged.timeBase);return{default:timeBase,timeBase:timeBase}}(0,_public.parseEsInterval)(current.timeBase);return{default:current.timeBase,timeBase:current.timeBase}}},{key:"mergeConfigs",value:function mergeConfigs(configs){var _this=this;return configs.reduce(function(output,conf){Object.entries(conf).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),paramName=_ref2[0],paramConfig=_ref2[1];if(!output[paramName]){output[paramName]={}}output[paramName]=_objectSpread({hidden:_this.mergeHidden(paramConfig,output[paramName]),help:_this.mergeHelp(paramConfig,output[paramName])},_this.isTimeBaseParam(paramConfig)?_this.mergeTimeBase(paramConfig,output[paramName],paramName):_this.mergeFixedAndBase(paramConfig,output[paramName],paramName))});return output},{})}}]);return EditorConfigProviderRegistry}();exports.EditorConfigProviderRegistry=EditorConfigProviderRegistry;var editorConfigProviders=new EditorConfigProviderRegistry;exports.editorConfigProviders=editorConfigProviders},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useUnmount=useUnmount;var _react=__webpack_require__(0);function useUnmount(fn){(0,_react.useEffect)(function(){return fn},[])}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RowsOrColumnsControl=RowsOrColumnsControl;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PARAMS={NAME:"row",ROWS:"visEditorSplitBy__true",COLUMNS:"visEditorSplitBy__false"};function RowsOrColumnsControl(_ref){var aggParams=_ref.aggParams,setValue=_ref.setValue;var idSelected="visEditorSplitBy__".concat(aggParams.row);var options=[{id:PARAMS.ROWS,label:_i18n.i18n.translate("common.ui.vis.defaultEditor.controls.rowsLabel",{defaultMessage:"Rows"})},{id:PARAMS.COLUMNS,label:_i18n.i18n.translate("common.ui.vis.defaultEditor.controls.columnsLabel",{defaultMessage:"Columns"})}];return _react.default.createElement(_eui.EuiFormRow,{compressed:true,fullWidth:true,className:"visEditorSidebar__aggParamFormRow"},_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiButtonGroup,{"data-test-subj":"visEditorSplitBy",legend:_i18n.i18n.translate("common.ui.vis.defaultEditor.controls.splitByLegend",{defaultMessage:"Split chart by rows or columns."}),options:options,isFullWidth:true,idSelected:idSelected,onChange:function onChange(optionId){return setValue(aggParams,PARAMS.NAME,optionId===PARAMS.ROWS)}})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RadiusRatioOptionControl=RadiusRatioOptionControl;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var DEFAULT_VALUE=50;var PARAM_NAME="radiusRatio";function RadiusRatioOptionControl(_ref){var editorStateParams=_ref.editorStateParams,setValue=_ref.setValue;var label=_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.vis.defaultEditor.controls.dotSizeRatioLabel",defaultMessage:"Dot size ratio"})," ",_react.default.createElement(_eui.EuiIconTip,{content:_i18n.i18n.translate("common.ui.vis.defaultEditor.controls.dotSizeRatioHelpText",{defaultMessage:"Change the ratio of the radius of the smallest point to the largest point."}),position:"right"}));(0,_react.useEffect)(function(){if(!editorStateParams.radiusRatio){setValue(editorStateParams,PARAM_NAME,DEFAULT_VALUE)}},[]);return _react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:label},_react.default.createElement(_eui.EuiRange,{compressed:true,fullWidth:true,min:1,max:100,value:editorStateParams.radiusRatio||DEFAULT_VALUE,onChange:function onChange(e){return setValue(editorStateParams,PARAM_NAME,parseFloat(e.currentTarget.value))},showRange:true,showValue:true,valueAppend:"%"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parentPipelineAggWriter=void 0;var parentPipelineAggWriter=function parentPipelineAggWriter(agg,output,aggs){var selectedMetric=agg.params.customMetric||aggs.getResponseAggById(agg.params.metricAgg);if(agg.params.customMetric&&agg.params.customMetric.type.name!=="count"){output.parentAggs=(output.parentAggs||[]).concat(selectedMetric)}output.params={};if(selectedMetric.type.name==="count"){output.params.buckets_path="_count"}else{output.params.buckets_path=selectedMetric.id}};exports.parentPipelineAggWriter=parentPipelineAggWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cumulativeSumMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _parent_pipeline_agg_helper=__webpack_require__(120);var _make_nested_label=__webpack_require__(70);var _i18n=__webpack_require__(2);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var cumulativeSumLabel=_i18n.i18n.translate("common.ui.aggTypes.metrics.cumulativeSumLabel",{defaultMessage:"cumulative sum"});var cumulativeSumMetricAgg=new _metric_agg_type.MetricAggType({name:"cumulative_sum",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.cumulativeSumTitle",{defaultMessage:"Cumulative Sum"}),subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,cumulativeSumLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.cumulativeSumMetricAgg=cumulativeSumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.movingAvgMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _parent_pipeline_agg_helper=__webpack_require__(120);var _make_nested_label=__webpack_require__(70);var _i18n=__webpack_require__(2);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var movingAvgLabel=_i18n.i18n.translate("common.ui.aggTypes.metrics.movingAvgLabel",{defaultMessage:"moving avg"});var movingAvgMetricAgg=new _metric_agg_type.MetricAggType({name:"moving_avg",dslName:"moving_fn",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.movingAvgTitle",{defaultMessage:"Moving Avg"}),subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,movingAvgLabel)},params:[].concat(_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),[{name:"window",default:5},{name:"script",default:"MovingFunctions.unweightedAvg(values)"}]),getValue:function getValue(agg,bucket){return bucket[agg.id]?bucket[agg.id].value:null},getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.movingAvgMetricAgg=movingAvgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serialDiffMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _parent_pipeline_agg_helper=__webpack_require__(120);var _make_nested_label=__webpack_require__(70);var _i18n=__webpack_require__(2);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var serialDiffLabel=_i18n.i18n.translate("common.ui.aggTypes.metrics.serialDiffLabel",{defaultMessage:"serial diff"});var serialDiffMetricAgg=new _metric_agg_type.MetricAggType({name:"serial_diff",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.serialDiffTitle",{defaultMessage:"Serial Diff"}),subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,serialDiffLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.serialDiffMetricAgg=serialDiffMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TimeBuckets",{enumerable:true,get:function get(){return _time_buckets.TimeBuckets}});var _time_buckets=__webpack_require__(1097)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeBuckets=TimeBuckets;var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(14));var _chrome=_interopRequireDefault(__webpack_require__(7));var _parse_interval=__webpack_require__(593);var _calc_auto_interval=__webpack_require__(1098);var _calc_es_interval=__webpack_require__(1099);var _field_formats=__webpack_require__(32);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=_chrome.default.getUiSettingsClient();var getConfig=function getConfig(){return config.get.apply(config,arguments)};function isValidMoment(m){return m&&"isValid"in m&&m.isValid()}function TimeBuckets(){return TimeBuckets.__cached__(this)}TimeBuckets.prototype.setBounds=function(input){if(!input)return this.clearBounds();var bounds;if(_lodash.default.isPlainObject(input)){bounds=[input.min,input.max]}else{bounds=Array.isArray(input)?input:[]}var moments=(0,_lodash.default)(bounds).map(_lodash.default.ary(_moment.default,1)).sortBy(Number);var valid=moments.size()===2&&moments.every(isValidMoment);if(!valid){this.clearBounds();throw new Error("invalid bounds set: "+input)}this._lb=moments.shift();this._ub=moments.pop();if(this.getDuration().asSeconds()<0){throw new TypeError("Intervals must be positive")}};TimeBuckets.prototype.clearBounds=function(){this._lb=this._ub=null};TimeBuckets.prototype.hasBounds=function(){return isValidMoment(this._ub)&&isValidMoment(this._lb)};TimeBuckets.prototype.getBounds=function(){if(!this.hasBounds())return;return{min:this._lb,max:this._ub}};TimeBuckets.prototype.getDuration=function(){if(!this.hasBounds())return;return _moment.default.duration(this._ub-this._lb,"ms")};TimeBuckets.prototype.setInterval=function(input){this.originalInterval=input;var interval=input;if(_lodash.default.isObject(input)){interval=input.val}if(!interval||interval==="auto"){this._i="auto";return}if(_lodash.default.isString(interval)){input=interval;interval=(0,_parse_interval.parseInterval)(interval);if(+interval===0){interval=null}}if(!_moment.default.isDuration(interval)){throw new TypeError('"'+input+'" is not a valid interval.')}this._i=interval};TimeBuckets.prototype.getInterval=function(){var useNormalizedEsInterval=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var self=this;var duration=self.getDuration();var parsedInterval=readInterval();if(useNormalizedEsInterval){return decorateInterval(maybeScaleInterval(parsedInterval))}else{return decorateInterval(parsedInterval)}function readInterval(){var interval=self._i;if(_moment.default.isDuration(interval))return interval;return(0,_calc_auto_interval.calcAutoIntervalNear)(config.get("histogram:barTarget"),Number(duration))}function maybeScaleInterval(interval){if(!self.hasBounds())return interval;var maxLength=config.get("histogram:maxBars");var approxLen=duration/interval;var scaled;if(approxLen>maxLength){scaled=(0,_calc_auto_interval.calcAutoIntervalLessThan)(maxLength,Number(duration))}else{return interval}if(+scaled===+interval)return interval;decorateInterval(interval);return _lodash.default.assign(scaled,{preScaled:interval,scale:interval/scaled,scaled:true})}function decorateInterval(interval){var esInterval=useNormalizedEsInterval?(0,_calc_es_interval.convertDurationToNormalizedEsInterval)(interval):(0,_calc_es_interval.convertIntervalToEsInterval)(self.originalInterval);interval.esValue=esInterval.value;interval.esUnit=esInterval.unit;interval.expression=esInterval.expression;interval.overflow=duration>interval?_moment.default.duration(interval-duration):false;var prettyUnits=_moment.default.normalizeUnits(esInterval.unit);if(esInterval.value===1){interval.description=prettyUnits}else{interval.description=esInterval.value+" "+prettyUnits+"s"}return interval}};TimeBuckets.prototype.getScaledDateFormat=function(){var interval=this.getInterval();var rules=config.get("dateFormat:scaled");for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval>=_moment.default.duration(rule[0])){return rule[1]}}return config.get("dateFormat")};TimeBuckets.prototype.getScaledDateFormatter=function(){var DateFieldFormat=_field_formats.fieldFormats.getType("date");return new DateFieldFormat({pattern:this.getScaledDateFormat()},getConfig)};TimeBuckets.__cached__=function(self){var cache={};var sameMoment=same(_moment.default.isMoment);var sameDuration=same(_moment.default.isDuration);var desc={__cached__:{value:self}};var breakers={setBounds:"bounds",clearBounds:"bounds",setInterval:"interval"};var resources={bounds:{setup:function setup(){return[self._lb,self._ub]},changes:function changes(prev){return!sameMoment(prev[0],self._lb)||!sameMoment(prev[1],self._ub)}},interval:{setup:function setup(){return self._i},changes:function changes(prev){return!sameDuration(prev,this._i)}}};function cachedGetter(prop){return{value:function cachedGetter(){if(cache.hasOwnProperty(prop)){return cache[prop]}return cache[prop]=self[prop].apply(self,arguments)}}}function cacheBreaker(prop){var resource=resources[breakers[prop]];var setup=resource.setup;var changes=resource.changes;var fn=self[prop];return{value:function cacheBreaker(){var prev=setup.call(self);var ret=fn.apply(self,arguments);if(changes.call(self,prev)){cache={}}return ret}}}function same(checkType){return function(a,b){if(a===b)return true;if(checkType(a)===checkType(b))return+a===+b;return false}}_lodash.default.forOwn(TimeBuckets.prototype,function(fn,prop){if(prop[0]==="_")return;if(breakers.hasOwnProperty(prop)){desc[prop]=cacheBreaker(prop)}else{desc[prop]=cachedGetter(prop)}});return Object.create(self,desc)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calcAutoIntervalNear=calcAutoIntervalNear;exports.calcAutoIntervalLessThan=calcAutoIntervalLessThan;var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var boundsDescending=[{bound:Infinity,interval:Number(_moment.default.duration(1,"year"))},{bound:Number(_moment.default.duration(1,"year")),interval:Number(_moment.default.duration(1,"month"))},{bound:Number(_moment.default.duration(3,"week")),interval:Number(_moment.default.duration(1,"week"))},{bound:Number(_moment.default.duration(1,"week")),interval:Number(_moment.default.duration(1,"d"))},{bound:Number(_moment.default.duration(24,"hour")),interval:Number(_moment.default.duration(12,"hour"))},{bound:Number(_moment.default.duration(6,"hour")),interval:Number(_moment.default.duration(3,"hour"))},{bound:Number(_moment.default.duration(2,"hour")),interval:Number(_moment.default.duration(1,"hour"))},{bound:Number(_moment.default.duration(45,"minute")),interval:Number(_moment.default.duration(30,"minute"))},{bound:Number(_moment.default.duration(20,"minute")),interval:Number(_moment.default.duration(10,"minute"))},{bound:Number(_moment.default.duration(9,"minute")),interval:Number(_moment.default.duration(5,"minute"))},{bound:Number(_moment.default.duration(3,"minute")),interval:Number(_moment.default.duration(1,"minute"))},{bound:Number(_moment.default.duration(45,"second")),interval:Number(_moment.default.duration(30,"second"))},{bound:Number(_moment.default.duration(15,"second")),interval:Number(_moment.default.duration(10,"second"))},{bound:Number(_moment.default.duration(7.5,"second")),interval:Number(_moment.default.duration(5,"second"))},{bound:Number(_moment.default.duration(5,"second")),interval:Number(_moment.default.duration(1,"second"))},{bound:Number(_moment.default.duration(500,"ms")),interval:Number(_moment.default.duration(100,"ms"))}];function getPerBucketMs(count,duration){var ms=duration/count;return isFinite(ms)?ms:NaN}function normalizeMinimumInterval(targetMs){var value=isNaN(targetMs)?0:Math.max(Math.floor(targetMs),1);return _moment.default.duration(value)}function calcAutoIntervalNear(targetBucketCount,duration){var targetPerBucketMs=getPerBucketMs(targetBucketCount,duration);var lowerBoundIndex=boundsDescending.findIndex(function(_ref){var bound=_ref.bound;var boundMs=Number(bound);return boundMs<=targetPerBucketMs});if(lowerBoundIndex!==-1){var nearestInterval=boundsDescending[lowerBoundIndex-1].interval;return _moment.default.duration(nearestInterval)}return normalizeMinimumInterval(targetPerBucketMs)}function calcAutoIntervalLessThan(maxBucketCount,duration){var maxPerBucketMs=getPerBucketMs(maxBucketCount,duration);for(var _i=0,_boundsDescending=boundsDescending;_i<_boundsDescending.length;_i++){var interval=_boundsDescending[_i].interval;if(interval<=maxPerBucketMs){return _moment.default.duration(interval)}}return normalizeMinimumInterval(maxPerBucketMs)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertDurationToNormalizedEsInterval=convertDurationToNormalizedEsInterval;exports.convertIntervalToEsInterval=convertIntervalToEsInterval;var _datemath=_interopRequireDefault(__webpack_require__(55));var _public=__webpack_require__(24);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var unitsDesc=_datemath.default.unitsDesc;var largeMax=unitsDesc.indexOf("M");function convertDurationToNormalizedEsInterval(duration){for(var i=0;i<unitsDesc.length;i++){var unit=unitsDesc[i];var val=duration.as(unit);if(val>=1&&Math.floor(val)===val){if(i<=largeMax&&val!==1){continue}return{value:val,unit:unit,expression:val+unit}}}var ms=duration.as("ms");return{value:ms,unit:"ms",expression:ms+"ms"}}function convertIntervalToEsInterval(interval){var _parseEsInterval=(0,_public.parseEsInterval)(interval),value=_parseEsInterval.value,unit=_parseEsInterval.unit;return{value:value,unit:unit,expression:interval}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterDateHistogram=createFilterDateHistogram;var _moment=_interopRequireDefault(__webpack_require__(14));var _esQuery=__webpack_require__(20);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createFilterDateHistogram(agg,key){var start=(0,_moment.default)(key);var interval=agg.buckets.getInterval();return(0,_esQuery.buildRangeFilter)(agg.params.field,{gte:start.toISOString(),lt:start.add(interval).toISOString(),format:"strict_date_optional_time"},agg.getIndexPattern())}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeIntervalParamEditor=TimeIntervalParamEditor;var _lodash=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);var _utils=__webpack_require__(579);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function TimeIntervalParamEditor(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,editorConfig=_ref.editorConfig,value=_ref.value,setValue=_ref.setValue,showValidation=_ref.showValidation,setTouched=_ref.setTouched,setValidity=_ref.setValidity;var timeBase=(0,_lodash.get)(editorConfig,"interval.timeBase");var options=timeBase?[]:(aggParam.options||[]).reduce(function(filtered,option){if(option.enabled?option.enabled(agg):true){filtered.push({label:option.display,key:option.val})}return filtered},[]);var selectedOptions=[];var definedOption;var isValid=false;if(value){definedOption=(0,_lodash.find)(options,{key:value});selectedOptions=definedOption?[definedOption]:[{label:value,key:"custom"}];isValid=!!(definedOption||(0,_utils.isValidInterval)(value,timeBase))}var interval=(0,_lodash.get)(agg,"buckets.getInterval")&&agg.buckets.getInterval();var scaledHelpText=interval&&interval.scaled&&isValid?_react.default.createElement("strong",{className:"eui-displayBlock"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.timeInterval.scaledHelpText",defaultMessage:"Currently scaled to {bucketDescription}",values:{bucketDescription:(0,_lodash.get)(interval,"description")||""}})," ",_react.default.createElement(_eui.EuiIconTip,{position:"right",type:"questionInCircle",content:interval.scale<=1?tooManyBucketsTooltip:tooLargeBucketsTooltip})):null;var helpText=_react.default.createElement(_react.default.Fragment,null,scaledHelpText,(0,_lodash.get)(editorConfig,"interval.help")||selectOptionHelpText);var errors=[];if(!isValid&&value){errors.push(_i18n.i18n.translate("common.ui.aggTypes.timeInterval.invalidFormatErrorMessage",{defaultMessage:"Invalid interval format."}))}var onCustomInterval=function onCustomInterval(customValue){var normalizedCustomValue=customValue.trim();setValue(normalizedCustomValue);if(normalizedCustomValue&&(0,_utils.isValidInterval)(normalizedCustomValue,timeBase)){agg.write()}};var onChange=function onChange(opts){var selectedOpt=(0,_lodash.get)(opts,"0");setValue(selectedOpt?selectedOpt.key:selectedOpt);if(selectedOpt){agg.write()}};(0,_react.useEffect)(function(){setValidity(isValid)},[isValid]);return _react.default.createElement(_eui.EuiFormRow,{compressed:true,error:errors,fullWidth:true,helpText:helpText,isInvalid:showValidation?!isValid:false,label:_i18n.i18n.translate("common.ui.aggTypes.timeInterval.minimumIntervalLabel",{defaultMessage:"Minimum interval"})},_react.default.createElement(_eui.EuiComboBox,{fullWidth:true,"data-test-subj":"visEditorInterval",isInvalid:showValidation?!isValid:false,noSuggestions:!!timeBase,onChange:onChange,onCreateOption:onCustomInterval,options:options,selectedOptions:selectedOptions,singleSelection:{asPlainText:true},placeholder:_i18n.i18n.translate("common.ui.aggTypes.timeInterval.selectIntervalPlaceholder",{defaultMessage:"Select an interval"}),onBlur:setTouched}))}var tooManyBucketsTooltip=_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.timeInterval.createsTooManyBucketsTooltip",defaultMessage:"This interval creates too many buckets to show in the selected time range, so it has been scaled up."});var tooLargeBucketsTooltip=_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.timeInterval.createsTooLargeBucketsTooltip",defaultMessage:"This interval creates buckets that are too large to show in the selected time range, so it has been scaled down."});var selectOptionHelpText=_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.timeInterval.selectOptionHelpText",defaultMessage:"Select an option or create a custom value. Examples: 30s, 20m, 24h, 2d, 1w, 1M"})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DropPartialsParamEditor=DropPartialsParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _switch=__webpack_require__(101);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function DropPartialsParamEditor(props){return _react.default.createElement(_switch.SwitchParamEditor,_extends({dataTestSubj:"dropPartialBucketsCheckbox",displayLabel:_i18n.i18n.translate("common.ui.aggTypes.dropPartialBucketsLabel",{defaultMessage:"Drop partial buckets"}),displayToolTip:_i18n.i18n.translate("common.ui.aggTypes.dropPartialBucketsTooltip",{defaultMessage:"Remove buckets that span time outside the time range so the histogram doesn't start and end with incomplete buckets."})},props))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.histogramBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _notify=__webpack_require__(9);var _chrome=_interopRequireDefault(__webpack_require__(7));var _bucket_agg_type=__webpack_require__(50);var _histogram=__webpack_require__(1104);var _number_interval=__webpack_require__(1105);var _min_doc_count=__webpack_require__(1106);var _has_extended_bounds=__webpack_require__(1107);var _extended_bounds=__webpack_require__(1108);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=_chrome.default.getUiSettingsClient();var histogramBucketAgg=new _bucket_agg_type.BucketAggType({name:"histogram",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.histogramTitle",{defaultMessage:"Histogram"}),ordered:{},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()},createFilter:_histogram.createFilterHistogram,decorateAggConfig:function decorateAggConfig(){var autoBounds;return{setAutoBounds:{configurable:true,value:function value(newValue){autoBounds=newValue}},getAutoBounds:{configurable:true,value:function value(){return autoBounds}}}},params:[{name:"field",type:"field",filterFieldTypes:"number"},{name:"intervalBase",default:null,write:function write(){}},{name:"interval",editorComponent:_number_interval.NumberIntervalParamEditor,modifyAggConfigOnSearchRequestStart:function modifyAggConfigOnSearchRequestStart(aggConfig,searchSource,searchRequest){var field=aggConfig.getField();var aggBody=field.scripted?{script:{source:field.script,lang:field.lang}}:{field:field.name};var childSearchSource=searchSource.createChild().setField("size",0).setField("aggs",{maxAgg:{max:aggBody},minAgg:{min:aggBody}});searchRequest.whenAborted(function(){return childSearchSource.cancelQueued()});return childSearchSource.fetch().then(function(resp){aggConfig.setAutoBounds({min:_lodash.default.get(resp,"aggregations.minAgg.value"),max:_lodash.default.get(resp,"aggregations.maxAgg.value")})}).catch(function(e){if(e.name==="AbortError")return;_notify.toastNotifications.addWarning(_i18n.i18n.translate("common.ui.aggTypes.histogram.missingMaxMinValuesWarning",{defaultMessage:"Unable to retrieve max and min values to auto-scale histogram buckets. This may lead to poor visualization performance."}))})},write:function write(aggConfig,output){var interval=parseFloat(aggConfig.params.interval);if(interval<=0){interval=1}if(aggConfig.getAutoBounds()){var range=aggConfig.getAutoBounds().max-aggConfig.getAutoBounds().min;var bars=range/interval;if(bars>config.get("histogram:maxBars")){var minInterval=range/config.get("histogram:maxBars");var orderOfMagnitude=Math.pow(10,Math.floor(Math.log10(minInterval)));var roundInterval=orderOfMagnitude;while(roundInterval<minInterval){roundInterval+=orderOfMagnitude}interval=roundInterval}}var base=aggConfig.params.intervalBase;if(base){if(interval<base){interval=base}else if(interval%base!==0){interval=Math.round(interval/base)*base}}output.params.interval=interval}},{name:"min_doc_count",default:false,editorComponent:_min_doc_count.MinDocCountParamEditor,write:function write(aggConfig,output){if(aggConfig.params.min_doc_count){output.params.min_doc_count=0}else{output.params.min_doc_count=1}}},{name:"has_extended_bounds",default:false,editorComponent:_has_extended_bounds.HasExtendedBoundsParamEditor,write:function write(){}},{name:"extended_bounds",default:{min:"",max:""},editorComponent:_extended_bounds.ExtendedBoundsParamEditor,write:function write(aggConfig,output){var _aggConfig$params$ext=aggConfig.params.extended_bounds,min=_aggConfig$params$ext.min,max=_aggConfig$params$ext.max;if(aggConfig.params.has_extended_bounds&&(min||min===0)&&(max||max===0)){output.params.extended_bounds={min:min,max:max}}},shouldShow:function shouldShow(aggConfig){return aggConfig.params.has_extended_bounds}}]});exports.histogramBucketAgg=histogramBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterHistogram=createFilterHistogram;var _esQuery=__webpack_require__(20);function createFilterHistogram(aggConfig,key){var value=parseInt(key,10);return(0,_esQuery.buildRangeFilter)(aggConfig.params.field,{gte:value,lt:value+aggConfig.params.interval},aggConfig.getIndexPattern(),aggConfig.fieldFormatter()(key))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NumberIntervalParamEditor=NumberIntervalParamEditor;var _lodash=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var label=_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.numberInterval.minimumIntervalLabel",defaultMessage:"Minimum interval"})," ",_react.default.createElement(_eui.EuiIconTip,{position:"right",content:_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.numberInterval.minimumIntervalTooltip",defaultMessage:"Interval will be automatically scaled in the event that the provided value creates more buckets than specified by Advanced Setting's {histogramMaxBars}",values:{histogramMaxBars:"histogram:maxBars"}}),type:"questionInCircle"}));function NumberIntervalParamEditor(_ref){var agg=_ref.agg,editorConfig=_ref.editorConfig,showValidation=_ref.showValidation,value=_ref.value,setTouched=_ref.setTouched,setValidity=_ref.setValidity,setValue=_ref.setValue;var base=(0,_lodash.get)(editorConfig,"interval.base");var min=base||0;var isValid=value!==undefined&&value>=min;(0,_react.useEffect)(function(){setValidity(isValid)},[isValid]);var onChange=function onChange(event){var numberValue=parseFloat(event.target.value);setValue(isNaN(numberValue)?undefined:numberValue)};return _react.default.createElement(_eui.EuiFormRow,{compressed:true,label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,helpText:(0,_lodash.get)(editorConfig,"interval.help")},_react.default.createElement(_eui.EuiFieldNumber,{value:value===undefined?"":value,min:min,step:base,"data-test-subj":"visEditorInterval".concat(agg.id),isInvalid:showValidation?!isValid:false,onChange:onChange,onBlur:setTouched,fullWidth:true,placeholder:_i18n.i18n.translate("common.ui.aggTypes.numberInterval.selectIntervalPlaceholder",{defaultMessage:"Enter an interval"})}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MinDocCountParamEditor=MinDocCountParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _switch=__webpack_require__(101);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function MinDocCountParamEditor(props){return _react.default.createElement(_switch.SwitchParamEditor,_extends({displayLabel:_i18n.i18n.translate("common.ui.aggTypes.showEmptyBucketsLabel",{defaultMessage:"Show empty buckets"}),displayToolTip:_i18n.i18n.translate("common.ui.aggTypes.showEmptyBucketsTooltip",{defaultMessage:"Show all buckets, not only the buckets with results"})},props))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HasExtendedBoundsParamEditor=HasExtendedBoundsParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _switch=__webpack_require__(101);var _migrate_include_exclude_format=__webpack_require__(350);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function HasExtendedBoundsParamEditor(props){(0,_react.useEffect)(function(){props.setValue(props.value&&props.agg.params.min_doc_count)},[props.agg.params.min_doc_count]);return _react.default.createElement(_switch.SwitchParamEditor,_extends({displayLabel:_i18n.i18n.translate("common.ui.aggTypes.extendedBoundsLabel",{defaultMessage:"Extend bounds"}),displayToolTip:_i18n.i18n.translate("common.ui.aggTypes.extendedBoundsTooltip",{defaultMessage:"Min and Max do not filter the results, but rather extend the bounds of the result set."}),disabled:!props.agg.params.min_doc_count||!((0,_migrate_include_exclude_format.isType)("number")(props.agg)||(0,_migrate_include_exclude_format.isType)("date")(props.agg))},props))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExtendedBoundsParamEditor=ExtendedBoundsParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function areBoundsValid(_ref){var min=_ref.min,max=_ref.max;if(min===""||max===""){return false}return max>=min}function ExtendedBoundsParamEditor(_ref2){var _ref2$value=_ref2.value,value=_ref2$value===void 0?{}:_ref2$value,setValue=_ref2.setValue,setValidity=_ref2.setValidity,showValidation=_ref2.showValidation,setTouched=_ref2.setTouched;var minLabel=_i18n.i18n.translate("common.ui.aggTypes.extendedBounds.minLabel",{defaultMessage:"Min"});var maxLabel=_i18n.i18n.translate("common.ui.aggTypes.extendedBounds.maxLabel",{defaultMessage:"Max"});var isValid=areBoundsValid(value);var error;if(!isValid){error=_i18n.i18n.translate("common.ui.aggTypes.extendedBounds.errorMessage",{defaultMessage:"Min should be less than or equal to Max."})}(0,_react.useEffect)(function(){setValidity(isValid);return function(){return setValidity(true)}},[isValid]);var handleChange=function handleChange(ev,name){setValue(_objectSpread({},value,_defineProperty({},name,ev.target.value===""?"":parseFloat(ev.target.value))))};return _react.default.createElement(_eui.EuiFormRow,{fullWidth:true,isInvalid:showValidation?!isValid:false,error:error,compressed:true},_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldNumber,{value:(0,_lodash.isUndefined)(value.min)?"":value.min,onChange:function onChange(ev){return handleChange(ev,"min")},onBlur:setTouched,fullWidth:true,isInvalid:showValidation?!isValid:false,"aria-label":minLabel,prepend:_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,minLabel)),compressed:true})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldNumber,{value:(0,_lodash.isUndefined)(value.max)?"":value.max,onChange:function onChange(ev){return handleChange(ev,"max")},onBlur:setTouched,fullWidth:true,isInvalid:showValidation?!isValid:false,"aria-label":maxLabel,prepend:_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,maxLabel)),compressed:true})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rangeBucketAgg=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _bucket_agg_type=__webpack_require__(50);var _range=__webpack_require__(1110);var _field_format=__webpack_require__(344);var _range_key=__webpack_require__(1111);var _ranges=__webpack_require__(595);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var keyCaches=new WeakMap;var formats=new WeakMap;var rangeBucketAgg=new _bucket_agg_type.BucketAggType({name:"range",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.rangeTitle",{defaultMessage:"Range"}),createFilter:_range.createFilterRange,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("common.ui.aggTypes.buckets.rangesLabel",{defaultMessage:"{fieldName} ranges",values:{fieldName:aggConfig.getFieldDisplayName()}})},getKey:function getKey(bucket,key,agg){var keys=keyCaches.get(agg);if(!keys){keys=new Map;keyCaches.set(agg,keys)}var id=_range_key.RangeKey.idBucket(bucket);key=keys.get(id);if(!key){key=new _range_key.RangeKey(bucket);keys.set(id,key)}return key},getFormat:function getFormat(agg){var format=formats.get(agg);if(format)return format;var RangeFormat=_field_format.FieldFormat.from(function(range){var format=agg.fieldOwnFormatter();return _i18n.i18n.translate("common.ui.aggTypes.buckets.ranges.rangesFormatMessage",{defaultMessage:"{from} to {to}",values:{from:format(range.gte),to:format(range.lt)}})});format=new RangeFormat;formats.set(agg,format);return format},params:[{name:"field",type:"field",filterFieldTypes:["number"]},{name:"ranges",default:[{from:0,to:1e3},{from:1e3,to:2e3}],editorComponent:function editorComponent(_ref){var value=_ref.value,setValue=_ref.setValue;return _react.default.createElement(_ranges.RangesParamEditor,{value:value,setValue:setValue})},write:function write(aggConfig,output){output.params.ranges=aggConfig.params.ranges;output.params.keyed=true}}]});exports.rangeBucketAgg=rangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterRange=createFilterRange;var _esQuery=__webpack_require__(20);function createFilterRange(aggConfig,key){return(0,_esQuery.buildRangeFilter)(aggConfig.params.field,key,aggConfig.getIndexPattern(),aggConfig.fieldFormatter()(key))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeKey=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var id=Symbol("id");var RangeKey=function(){function RangeKey(bucket){_classCallCheck(this,RangeKey);this.gte=bucket.from==null?-Infinity:bucket.from;this.lt=bucket.to==null?+Infinity:bucket.to;this[id]=RangeKey.idBucket(bucket)}_createClass(RangeKey,[{key:"toString",value:function toString(){return this[id]}}],[{key:"idBucket",value:function idBucket(bucket){return"from:".concat(bucket.from,",to:").concat(bucket.to)}}]);return RangeKey}();exports.RangeKey=RangeKey},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateRangeBucketAgg=void 0;var _lodash=__webpack_require__(1);var _chrome=_interopRequireDefault(__webpack_require__(7));var _momentTimezone=_interopRequireDefault(__webpack_require__(130));var _date_range=__webpack_require__(596);var _bucket_agg_type=__webpack_require__(50);var _date_range2=__webpack_require__(1113);var _field_formats=__webpack_require__(32);var _date_ranges=__webpack_require__(1114);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=_chrome.default.getUiSettingsClient();var detectedTimezone=_momentTimezone.default.tz.guess();var tzOffset=(0,_momentTimezone.default)().format("Z");var dateRangeBucketAgg=new _bucket_agg_type.BucketAggType({name:"date_range",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.dateRangeTitle",{defaultMessage:"Date Range"}),createFilter:_date_range2.createFilterDateRange,getKey:function getKey(bucket,key,agg){var formatter=agg.fieldOwnFormatter("text",_field_formats.fieldFormats.getDefaultInstance("date"));return _date_range.dateRange.toString(bucket,formatter)},getFormat:function getFormat(){return _field_formats.fieldFormats.getDefaultInstance("string")},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()+" date ranges"},params:[{name:"field",type:"field",filterFieldTypes:"date",default:function _default(agg){return agg.getIndexPattern().timeFieldName}},{name:"ranges",default:[{from:"now-1w/w",to:"now"}],editorComponent:_date_ranges.DateRangesParamEditor},{name:"time_zone",default:undefined,serialize:function serialize(){return undefined},write:function write(agg,output){var tz=agg.params.time_zone;if(!tz&&agg.params.field){tz=(0,_lodash.get)(agg.getIndexPattern(),["typeMeta","aggs","date_range",agg.params.field.name,"time_zone"])}if(!tz){var isDefaultTimezone=config.isDefault("dateFormat:tz");tz=isDefaultTimezone?detectedTimezone||tzOffset:config.get("dateFormat:tz")}output.params.time_zone=tz}}]});exports.dateRangeBucketAgg=dateRangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterDateRange=createFilterDateRange;var _chrome=_interopRequireDefault(__webpack_require__(7));var _date_range=__webpack_require__(596);var _esQuery=__webpack_require__(20);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=_chrome.default.getUiSettingsClient();function createFilterDateRange(agg,key){var range=_date_range.dateRange.parse(key,config.get("dateFormat"));var filter={};if(range.from)filter.gte=range.from.toISOString();if(range.to)filter.lt=range.to.toISOString();if(range.to&&range.from)filter.format="strict_date_optional_time";return(0,_esQuery.buildRangeFilter)(agg.params.field,filter,agg.getIndexPattern())}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DateRangesParamEditor=DateRangesParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _datemath=_interopRequireDefault(__webpack_require__(55));var _react2=__webpack_require__(5);var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);var _documentation_links=__webpack_require__(60);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var FROM_PLACEHOLDER="−∞";var TO_PLACEHOLDER="+∞";var generateId=(0,_eui.htmlIdGenerator)();var validateDateMath=function validateDateMath(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";if(!value){return true}var moment=_datemath.default.parse(value);return moment&&moment.isValid()};function DateRangesParamEditor(_ref){var _ref$value=_ref.value,value=_ref$value===void 0?[]:_ref$value,setValue=_ref.setValue,setValidity=_ref.setValidity;var _useState=(0,_react.useState)(function(){return value.map(function(range){return _objectSpread({},range,{id:generateId()})})}),_useState2=_slicedToArray(_useState,2),ranges=_useState2[0],setRanges=_useState2[1];var hasInvalidRange=value.some(function(_ref2){var from=_ref2.from,to=_ref2.to;return!from&&!to||!validateDateMath(from)||!validateDateMath(to)});(0,_react.useEffect)(function(){if(!value.length){onAddRange()}},[]);(0,_react.useEffect)(function(){if(value.length!==ranges.length||value.some(function(range,index){return!(0,_lodash.isEqual)(range,(0,_lodash.omit)(ranges[index],"id"))})){setRanges(value.map(function(range){return _objectSpread({},range,{id:generateId()})}))}},[value]);(0,_react.useEffect)(function(){setValidity(!hasInvalidRange)},[hasInvalidRange]);var updateRanges=function updateRanges(rangeValues){setValue(rangeValues.map(function(range){return(0,_lodash.omit)(range,"id")}));setRanges(rangeValues)};var onAddRange=function onAddRange(){return updateRanges([].concat(_toConsumableArray(ranges),[{id:generateId()}]))};var onRemoveRange=function onRemoveRange(id){return updateRanges(ranges.filter(function(range){return range.id!==id}))};var onChangeRange=function onChangeRange(id,key,newValue){return updateRanges(ranges.map(function(range){return range.id===id?_objectSpread({},range,_defineProperty({},key,newValue===""?undefined:newValue)):range}))};return _react.default.createElement(_eui.EuiFormRow,{compressed:true,fullWidth:true},_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement(_eui.EuiLink,{href:(0,_documentation_links.getDocLink)("date.dateMath"),target:"_blank",rel:"noopener"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.dateRanges.acceptedDateFormatsLinkText",defaultMessage:"Acceptable date formats"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),ranges.map(function(_ref3){var from=_ref3.from,to=_ref3.to,id=_ref3.id;var deleteBtnTitle=_i18n.i18n.translate("common.ui.aggTypes.dateRanges.removeRangeButtonAriaLabel",{defaultMessage:"Remove the range of {from} to {to}",values:{from:from||FROM_PLACEHOLDER,to:to||TO_PLACEHOLDER}});var areBothEmpty=!from&&!to;return _react.default.createElement(_react.Fragment,{key:id},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{"aria-label":_i18n.i18n.translate("common.ui.aggTypes.dateRanges.fromColumnLabel",{defaultMessage:"From",description:"Beginning of a date range, e.g. *From* 2018-02-26 To 2018-02-28"}),compressed:true,fullWidth:true,isInvalid:areBothEmpty||!validateDateMath(from),placeholder:FROM_PLACEHOLDER,value:from||"",onChange:function onChange(ev){return onChangeRange(id,"from",ev.target.value)}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:"sortRight",color:"subdued"})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{"aria-label":_i18n.i18n.translate("common.ui.aggTypes.dateRanges.toColumnLabel",{defaultMessage:"To",description:"End of a date range, e.g. From 2018-02-26 *To* 2018-02-28"}),compressed:true,fullWidth:true,isInvalid:areBothEmpty||!validateDateMath(to),placeholder:TO_PLACEHOLDER,value:to||"",onChange:function onChange(ev){return onChangeRange(id,"to",ev.target.value)}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{title:deleteBtnTitle,"aria-label":deleteBtnTitle,disabled:value.length===1,color:"danger",iconType:"trash",onClick:function onClick(){return onRemoveRange(id)}}))),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}))}),hasInvalidRange&&_react.default.createElement(_eui.EuiFormErrorText,null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.dateRanges.errorMessage",defaultMessage:"Each range should have at least one valid date."})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"plusInCircleFilled",onClick:onAddRange,size:"xs"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.dateRanges.addRangeButtonLabel",defaultMessage:"Add range"})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ipRangeBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _bucket_agg_type=__webpack_require__(50);var _ip_range=__webpack_require__(1116);var _ip_range_type=__webpack_require__(598);var _ip_ranges=__webpack_require__(1117);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ipRangeBucketAgg=new _bucket_agg_type.BucketAggType({name:"ip_range",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.ipRangeTitle",{defaultMessage:"IPv4 Range"}),createFilter:_ip_range.createFilterIpRange,getKey:function getKey(bucket,key){if(key)return key;var from=_lodash.default.get(bucket,"from","-Infinity");var to=_lodash.default.get(bucket,"to","Infinity");return"".concat(from," to ").concat(to)},makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("common.ui.aggTypes.buckets.ipRangeLabel",{defaultMessage:"{fieldName} IP ranges",values:{fieldName:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:"ip"},{name:"ipRangeType",editorComponent:_ip_range_type.IpRangeTypeParamEditor,default:"fromTo",write:_lodash.default.noop},{name:"ranges",default:{fromTo:[{from:"0.0.0.0",to:"127.255.255.255"},{from:"128.0.0.0",to:"191.255.255.255"}],mask:[{mask:"0.0.0.0/1"},{mask:"128.0.0.0/2"}]},editorComponent:_ip_ranges.IpRangesParamEditor,write:function write(aggConfig,output){var ipRangeType=aggConfig.params.ipRangeType;var ranges=aggConfig.params.ranges[ipRangeType];if(ipRangeType==="fromTo"){ranges=_lodash.default.map(ranges,function(range){return _lodash.default.omit(range,_lodash.default.isNull)})}output.params.ranges=ranges}}]});exports.ipRangeBucketAgg=ipRangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterIpRange=createFilterIpRange;var _cidr_mask=__webpack_require__(597);var _esQuery=__webpack_require__(20);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function createFilterIpRange(aggConfig,key){var range;if(aggConfig.params.ipRangeType==="mask"){range=new _cidr_mask.CidrMask(key).getRange()}else{var _key$split=key.split(/\s+to\s+/),_key$split2=_slicedToArray(_key$split,2),from=_key$split2[0],to=_key$split2[1];range={from:from==="-Infinity"?-Infinity:from,to:to==="Infinity"?Infinity:to}}return(0,_esQuery.buildRangeFilter)(aggConfig.params.field,{gte:range.from,lte:range.to},aggConfig.getIndexPattern())}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IpRangesParamEditor=IpRangesParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _from_to_list=__webpack_require__(1118);var _mask_list=__webpack_require__(1119);var _ip_range_type=__webpack_require__(598);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function IpRangesParamEditor(_ref){var agg=_ref.agg,_ref$value=_ref.value,value=_ref$value===void 0?{fromTo:[],mask:[]}:_ref$value,setTouched=_ref.setTouched,setValue=_ref.setValue,setValidity=_ref.setValidity,showValidation=_ref.showValidation;var handleChange=function handleChange(modelName,items){setValue(_objectSpread({},value,_defineProperty({},modelName,items)))};return _react.default.createElement(_eui.EuiFormRow,{fullWidth:true,id:"visEditorIpRange".concat(agg.id),compressed:true},agg.params.ipRangeType===_ip_range_type.IpRangeTypes.MASK?_react.default.createElement(_mask_list.MaskList,{list:value.mask,showValidation:showValidation,onBlur:setTouched,onChange:function onChange(items){return handleChange(_ip_range_type.IpRangeTypes.MASK,items)},setValidity:setValidity}):_react.default.createElement(_from_to_list.FromToList,{list:value.fromTo,showValidation:showValidation,onBlur:setTouched,onChange:function onChange(items){return handleChange(_ip_range_type.IpRangeTypes.FROM_TO,items)},setValidity:setValidity}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FromToList=FromToList;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _ipv4_address=_interopRequireDefault(__webpack_require__(407));var _input_list=__webpack_require__(599);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var EMPTY_STRING="";function FromToList(_ref){var showValidation=_ref.showValidation,onBlur=_ref.onBlur,rest=_objectWithoutProperties(_ref,["showValidation","onBlur"]);var fromToListConfig={defaultValue:{from:{value:"0.0.0.0",model:"0.0.0.0",isInvalid:false},to:{value:"255.255.255.255",model:"255.255.255.255",isInvalid:false}},validateClass:_ipv4_address.default,getModelValue:function getModelValue(){var item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{from:{value:item.from||EMPTY_STRING,model:item.from||EMPTY_STRING,isInvalid:false},to:{value:item.to||EMPTY_STRING,model:item.to||EMPTY_STRING,isInvalid:false}}},getRemoveBtnAriaLabel:function getRemoveBtnAriaLabel(item){return _i18n.i18n.translate("common.ui.aggTypes.ipRanges.removeRangeAriaLabel",{defaultMessage:"Remove the range of {from} to {to}",values:{from:item.from.value||"*",to:item.to.value||"*"}})},onChangeFn:function onChangeFn(_ref2){var from=_ref2.from,to=_ref2.to;var result={};if(from.model){result.from=from.model}if(to.model){result.to=to.model}return result},hasInvalidValuesFn:function hasInvalidValuesFn(_ref3){var from=_ref3.from,to=_ref3.to;return from.isInvalid||to.isInvalid},renderInputRow:function renderInputRow(item,index,onChangeValue){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{"aria-label":_i18n.i18n.translate("common.ui.aggTypes.ipRanges.ipRangeFromAriaLabel",{defaultMessage:"IP range from: {value}",values:{value:item.from.value||"*"}}),compressed:true,isInvalid:showValidation?item.from.isInvalid:false,placeholder:"*",onChange:function onChange(ev){onChangeValue(index,ev.target.value,"from")},value:item.from.value,onBlur:onBlur})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:"sortRight",color:"subdued"})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{"aria-label":_i18n.i18n.translate("common.ui.aggTypes.ipRanges.ipRangeToAriaLabel",{defaultMessage:"IP range to: {value}",values:{value:item.to.value||"*"}}),compressed:true,isInvalid:showValidation?item.to.isInvalid:false,placeholder:"*",onChange:function onChange(ev){onChangeValue(index,ev.target.value,"to")},value:item.to.value,onBlur:onBlur})))},modelNames:["from","to"]};return _react.default.createElement(_input_list.InputList,_extends({config:fromToListConfig},rest))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MaskList=MaskList;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _cidr_mask=__webpack_require__(597);var _input_list=__webpack_require__(599);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var EMPTY_STRING="";function MaskList(_ref){var showValidation=_ref.showValidation,onBlur=_ref.onBlur,rest=_objectWithoutProperties(_ref,["showValidation","onBlur"]);var maskListConfig={defaultValue:{mask:{model:"0.0.0.0/1",value:"0.0.0.0/1",isInvalid:false}},validateClass:_cidr_mask.CidrMask,getModelValue:function getModelValue(){var item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{mask:{model:item.mask||EMPTY_STRING,value:item.mask||EMPTY_STRING,isInvalid:false}}},getRemoveBtnAriaLabel:function getRemoveBtnAriaLabel(item){return item.mask.value?_i18n.i18n.translate("common.ui.aggTypes.ipRanges.removeCidrMaskButtonAriaLabel",{defaultMessage:"Remove the CIDR mask value of {mask}",values:{mask:item.mask.value}}):_i18n.i18n.translate("common.ui.aggTypes.ipRanges.removeEmptyCidrMaskButtonAriaLabel",{defaultMessage:"Remove the CIDR mask default value"})},onChangeFn:function onChangeFn(_ref2){var mask=_ref2.mask;if(mask.model){return{mask:mask.model}}return{}},hasInvalidValuesFn:function hasInvalidValuesFn(_ref3){var mask=_ref3.mask;return mask.isInvalid},renderInputRow:function renderInputRow(_ref4,index,onChangeValue){var mask=_ref4.mask;return _react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{"aria-label":_i18n.i18n.translate("common.ui.aggTypes.ipRanges.cidrMaskAriaLabel",{defaultMessage:"CIDR mask: {mask}",values:{mask:mask.value||"*"}}),compressed:true,isInvalid:showValidation?mask.isInvalid:false,placeholder:"*",onChange:function onChange(ev){onChangeValue(index,ev.target.value,"mask")},value:mask.value,onBlur:onBlur}))},modelNames:"mask"};return _react.default.createElement(_input_list.InputList,_extends({config:maskListConfig},rest))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.termsBucketAgg=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _i18n=__webpack_require__(2);var _bucket_agg_type=__webpack_require__(50);var _agg_config=__webpack_require__(118);var _schemas=__webpack_require__(33);var _courier_inspector_utils=__webpack_require__(351);var _terms=__webpack_require__(600);var _inline_comp_wrapper=__webpack_require__(588);var _terms_other_bucket_helper=__webpack_require__(1121);var _migrate_include_exclude_format=__webpack_require__(350);var _order_agg=__webpack_require__(1122);var _order=__webpack_require__(586);var _order_by=__webpack_require__(1123);var _size=__webpack_require__(414);var _missing_bucket=__webpack_require__(1124);var _other_bucket=__webpack_require__(1125);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var orderAggSchema=new _schemas.Schemas([{group:"none",name:"orderAgg",title:"Order Agg",hideCustomLabel:true,aggFilter:_order_by.aggFilter}]).all[0];var termsBucketAgg=new _bucket_agg_type.BucketAggType({name:"terms",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.termsTitle",{defaultMessage:"Terms"}),makeLabel:function makeLabel(agg){var params=agg.params;return agg.getFieldDisplayName()+": "+params.order.text},getFormat:function getFormat(bucket){return{getConverterFor:function getConverterFor(type){return function(val){if(val==="__other__"){return bucket.params.otherBucketLabel}if(val==="__missing__"){return bucket.params.missingBucketLabel}var parsedUrl={origin:window.location.origin,pathname:window.location.pathname,basePath:_chrome.default.getBasePath()};var converter=bucket.params.field.format.getConverterFor(type);return converter(val,undefined,undefined,parsedUrl)}}}},createFilter:_terms.createFilterTerms,postFlightRequest:function(){var _postFlightRequest=_asyncToGenerator(regeneratorRuntime.mark(function _callee(resp,aggConfigs,aggConfig,searchSource,inspectorAdapters,abortSignal){var nestedSearchSource,filterAgg,request,response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(resp.aggregations){_context.next=2;break}return _context.abrupt("return",resp);case 2:nestedSearchSource=searchSource.createChild();if(!aggConfig.params.otherBucket){_context.next=17;break}filterAgg=(0,_terms_other_bucket_helper.buildOtherBucketAgg)(aggConfigs,aggConfig,resp);if(filterAgg){_context.next=7;break}return _context.abrupt("return",resp);case 7:if(abortSignal){abortSignal.addEventListener("abort",function(){return nestedSearchSource.cancelQueued()})}nestedSearchSource.setField("aggs",filterAgg);request=inspectorAdapters.requests.start(_i18n.i18n.translate("common.ui.aggTypes.buckets.terms.otherBucketTitle",{defaultMessage:"Other bucket"}),{description:_i18n.i18n.translate("common.ui.aggTypes.buckets.terms.otherBucketDescription",{defaultMessage:"This request counts the number of documents that fall "+"outside the criterion of the data buckets."})});nestedSearchSource.getSearchRequestBody().then(function(body){request.json(body)});request.stats((0,_courier_inspector_utils.getRequestInspectorStats)(nestedSearchSource));_context.next=14;return nestedSearchSource.fetch();case 14:response=_context.sent;request.stats((0,_courier_inspector_utils.getResponseInspectorStats)(nestedSearchSource,response)).ok({json:response});resp=(0,_terms_other_bucket_helper.mergeOtherBucketAggResponse)(aggConfigs,resp,response,aggConfig,filterAgg());case 17:if(aggConfig.params.missingBucket){resp=(0,_terms_other_bucket_helper.updateMissingBucket)(resp,aggConfigs,aggConfig)}return _context.abrupt("return",resp);case 19:case"end":return _context.stop()}}},_callee)}));function postFlightRequest(_x,_x2,_x3,_x4,_x5,_x6){return _postFlightRequest.apply(this,arguments)}return postFlightRequest}(),params:[{name:"field",type:"field",filterFieldTypes:["number","boolean","date","ip","string"]},{name:"orderBy",editorComponent:_order_by.OrderByParamEditor,write:function write(){}},{name:"orderAgg",type:_agg_config.AggConfig,default:null,editorComponent:_order_agg.OrderAggParamEditor,serialize:function serialize(orderAgg){return orderAgg.toJSON()},deserialize:function deserialize(state,agg){return this.makeOrderAgg(agg,state)},makeOrderAgg:function makeOrderAgg(termsAgg,state){state=state||{};state.schema=orderAggSchema;var orderAgg=termsAgg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=termsAgg.id+"-orderAgg";return orderAgg},write:function write(agg,output,aggs){var dir=agg.params.order.value;var order=output.params.order={};var orderAgg=agg.params.orderAgg||aggs.getResponseAggById(agg.params.orderBy);if(output.params.script){output.params.value_type=agg.getField().type==="number"?"float":agg.getField().type}if(agg.params.missingBucket&&agg.params.field.type==="string"){output.params.missing="__missing__"}if(!orderAgg){order[agg.params.orderBy||"_count"]=dir;return}if(orderAgg.type.name==="count"){order._count=dir;return}var orderAggId=orderAgg.id;if(orderAgg.parentId){orderAgg=aggs.byId[orderAgg.parentId]}output.subAggs=(output.subAggs||[]).concat(orderAgg);order[orderAggId]=dir}},{name:"order",type:"optioned",default:"desc",editorComponent:(0,_inline_comp_wrapper.wrapWithInlineComp)(_order.OrderParamEditor),options:[{text:_i18n.i18n.translate("common.ui.aggTypes.buckets.terms.orderDescendingTitle",{defaultMessage:"Descending"}),value:"desc"},{text:_i18n.i18n.translate("common.ui.aggTypes.buckets.terms.orderAscendingTitle",{defaultMessage:"Ascending"}),value:"asc"}],write:function write(){}},{name:"size",editorComponent:(0,_inline_comp_wrapper.wrapWithInlineComp)(_size.SizeParamEditor),default:5},{name:"otherBucket",default:false,editorComponent:_other_bucket.OtherBucketParamEditor,write:function write(){}},{name:"otherBucketLabel",type:"string",default:_i18n.i18n.translate("common.ui.aggTypes.buckets.terms.otherBucketLabel",{defaultMessage:"Other"}),displayName:_i18n.i18n.translate("common.ui.aggTypes.otherBucket.labelForOtherBucketLabel",{defaultMessage:"Label for other bucket"}),shouldShow:function shouldShow(agg){return agg.params.otherBucket},write:function write(){}},{name:"missingBucket",default:false,editorComponent:_missing_bucket.MissingBucketParamEditor,write:function write(){}},{name:"missingBucketLabel",default:_i18n.i18n.translate("common.ui.aggTypes.buckets.terms.missingBucketLabel",{defaultMessage:"Missing",description:'Default label used in charts when documents are missing a field.\n          Visible when you create a chart with a terms aggregation and enable "Show missing values"'}),type:"string",displayName:_i18n.i18n.translate("common.ui.aggTypes.otherBucket.labelForMissingValuesLabel",{defaultMessage:"Label for missing values"}),shouldShow:function shouldShow(agg){return agg.params.missingBucket},write:function write(){}},_objectSpread({name:"exclude",displayName:_i18n.i18n.translate("common.ui.aggTypes.buckets.terms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat),_objectSpread({name:"include",displayName:_i18n.i18n.translate("common.ui.aggTypes.buckets.terms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat)]});exports.termsBucketAgg=termsBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateMissingBucket=exports.mergeOtherBucketAggResponse=exports.buildOtherBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _esQuery=__webpack_require__(20);var _agg_groups=__webpack_require__(61);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getNestedAggDSL=function getNestedAggDSL(aggNestedDsl,startFromAggId){if(aggNestedDsl[startFromAggId]){return aggNestedDsl[startFromAggId]}var nestedAggs=_lodash.default.values(aggNestedDsl);var aggs;for(var i=0;i<nestedAggs.length;i++){if(nestedAggs[i].aggs&&(aggs=getNestedAggDSL(nestedAggs[i].aggs,startFromAggId))){return aggs}}};var getAggResultBuckets=function getAggResultBuckets(aggConfigs,response,aggWithOtherBucket,key){var keyParts=key.split("-");var responseAgg=response;var _loop=function _loop(i){if(keyParts[i]){var responseAggs=_lodash.default.values(responseAgg);var _loop2=function _loop2(aggId){var agg=responseAggs[aggId];var aggKey=_lodash.default.keys(responseAgg)[aggId];var aggConfig=_lodash.default.find(aggConfigs,function(agg){return agg.id===aggKey});var bucket=_lodash.default.find(agg.buckets,function(bucket,bucketObjKey){var bucketKey=aggConfig.getKey(bucket,Number.isInteger(bucketObjKey)?null:bucketObjKey).toString();return bucketKey===keyParts[i]});if(bucket){responseAgg=bucket;return"break"}};for(var aggId=0;aggId<responseAggs.length;aggId++){var _ret=_loop2(aggId);if(_ret==="break")break}}};for(var i in keyParts){_loop(i)}if(responseAgg[aggWithOtherBucket.id]){return responseAgg[aggWithOtherBucket.id].buckets}return[]};var getAggConfigResultMissingBuckets=function getAggConfigResultMissingBuckets(responseAggs,aggId){var missingKey="__missing__";var resultBuckets=[];if(responseAggs[aggId]){var matchingBucket=responseAggs[aggId].buckets.find(function(bucket){return bucket.key===missingKey});if(matchingBucket)resultBuckets.push(matchingBucket);return resultBuckets}_lodash.default.each(responseAggs,function(agg){if(agg.buckets){_lodash.default.each(agg.buckets,function(bucket){resultBuckets=[].concat(_toConsumableArray(resultBuckets),_toConsumableArray(getAggConfigResultMissingBuckets(bucket,aggId,missingKey)))})}});return resultBuckets};var getOtherAggTerms=function getOtherAggTerms(requestAgg,key,otherAgg){return requestAgg["other-filter"].filters.filters[key].bool.must_not.filter(function(filter){return filter.match_phrase&&filter.match_phrase[otherAgg.params.field.name]}).map(function(filter){return filter.match_phrase[otherAgg.params.field.name].query})};var buildOtherBucketAgg=function buildOtherBucketAgg(aggConfigs,aggWithOtherBucket,response){var bucketAggs=aggConfigs.filter(function(agg){return agg.type.type===_agg_groups.AggGroupNames.Buckets});var index=bucketAggs.findIndex(function(agg){return agg.id===aggWithOtherBucket.id});var aggs=aggConfigs.toDsl();var indexPattern=aggWithOtherBucket.params.field.indexPattern;var filterAgg=aggConfigs.createAggConfig({type:"filters",id:"other",params:{filters:[]}},{addToAggConfigs:false});var resultAgg={aggs:getNestedAggDSL(aggs,aggWithOtherBucket.id).aggs,filters:filterAgg.toDsl()};var noAggBucketResults=false;var walkBucketTree=function walkBucketTree(aggIndex,aggs,aggId,filters,key){if(aggs[aggId].buckets.length<1){noAggBucketResults=true;return}var agg=aggs[aggId];var newAggIndex=aggIndex+1;var newAgg=bucketAggs[newAggIndex];var currentAgg=bucketAggs[aggIndex];if(aggIndex<index){_lodash.default.each(agg.buckets,function(bucket,bucketObjKey){var bucketKey=currentAgg.getKey(bucket,Number.isInteger(bucketObjKey)?null:bucketObjKey);var filter=_lodash.default.cloneDeep(bucket.filters)||currentAgg.createFilter(bucketKey);var newFilters=_lodash.default.flatten([].concat(_toConsumableArray(filters),[filter]));walkBucketTree(newAggIndex,bucket,newAgg.id,newFilters,"".concat(key,"-").concat(bucketKey.toString()))});return}if(!aggWithOtherBucket.params.missingBucket||agg.buckets.some(function(bucket){return bucket.key==="__missing__"})){filters.push((0,_esQuery.buildExistsFilter)(aggWithOtherBucket.params.field,aggWithOtherBucket.params.field.indexPattern))}_lodash.default.each(agg.buckets,function(bucket){if(bucket.key==="__missing__")return;var filter=currentAgg.createFilter(bucket.key);filter.meta.negate=true;filters.push(filter)});resultAgg.filters.filters[key]={bool:(0,_esQuery.buildQueryFromFilters)(filters,indexPattern)}};walkBucketTree(0,response.aggregations,bucketAggs[0].id,[],"");if(noAggBucketResults){return false}return function(){return{"other-filter":resultAgg}}};exports.buildOtherBucketAgg=buildOtherBucketAgg;var mergeOtherBucketAggResponse=function mergeOtherBucketAggResponse(aggsConfig,response,otherResponse,otherAgg,requestAgg){var updatedResponse=_lodash.default.cloneDeep(response);_lodash.default.each(otherResponse.aggregations["other-filter"].buckets,function(bucket,key){if(!bucket.doc_count)return;var bucketKey=key.replace(/^-/,"");var aggResultBuckets=getAggResultBuckets(aggsConfig,updatedResponse.aggregations,otherAgg,bucketKey);var requestFilterTerms=getOtherAggTerms(requestAgg,key,otherAgg);var phraseFilter=(0,_esQuery.buildPhrasesFilter)(otherAgg.params.field,requestFilterTerms,otherAgg.params.field.indexPattern);phraseFilter.meta.negate=true;bucket.filters=[phraseFilter];bucket.key="__other__";if(aggResultBuckets.some(function(bucket){return bucket.key==="__missing__"})){bucket.filters.push((0,_esQuery.buildExistsFilter)(otherAgg.params.field,otherAgg.params.field.indexPattern))}aggResultBuckets.push(bucket)});return updatedResponse};exports.mergeOtherBucketAggResponse=mergeOtherBucketAggResponse;var updateMissingBucket=function updateMissingBucket(response,aggConfigs,agg){var updatedResponse=_lodash.default.cloneDeep(response);var aggResultBuckets=getAggConfigResultMissingBuckets(updatedResponse.aggregations,agg.id);aggResultBuckets.forEach(function(bucket){bucket.key="__missing__"});return updatedResponse};exports.updateMissingBucket=updateMissingBucket},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OrderAggParamEditor=OrderAggParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _default=__webpack_require__(349);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function OrderAggParamEditor(_ref){var agg=_ref.agg,value=_ref.value,metricAggs=_ref.metricAggs,state=_ref.state,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched,subAggParams=_ref.subAggParams;(0,_react.useEffect)(function(){if(metricAggs){var orderBy=agg.params.orderBy;if(!orderBy||orderBy!=="custom"){setValue(null)}else{var paramDef=agg.type.params.byName.orderAgg;setValue(value||paramDef.makeOrderAgg(agg))}}},[agg.params.orderBy,metricAggs]);var _useState=(0,_react.useState)(true),_useState2=_slicedToArray(_useState,2),innerState=_useState2[0],setInnerState=_useState2[1];if(!agg.params.orderAgg){return null}return _react.default.createElement(_default.DefaultEditorAggParams,{agg:value,groupName:"metrics",className:"visEditorAgg__subAgg",formIsTouched:subAggParams.formIsTouched,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,onAggParamsChange:function onAggParamsChange(){setInnerState(!innerState);subAggParams.onAggParamsChange.apply(subAggParams,arguments)},onAggTypeChange:subAggParams.onAggTypeChange,setValidity:setValidity,setTouched:setTouched})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OrderByParamEditor=OrderByParamEditor;exports.aggFilter=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _agg_utils=__webpack_require__(348);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var aggFilter=["!top_hits","!percentiles","!median","!std_dev","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!avg_bucket","!max_bucket","!min_bucket","!sum_bucket"];exports.aggFilter=aggFilter;var isCompatibleAgg=(0,_agg_utils.isCompatibleAggregation)(aggFilter);function OrderByParamEditor(_ref){var agg=_ref.agg,value=_ref.value,showValidation=_ref.showValidation,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched,metricAggs=_ref.metricAggs;var label=_i18n.i18n.translate("common.ui.aggTypes.orderAgg.orderByLabel",{defaultMessage:"Order by"});var isValid=!!value;(0,_react.useEffect)(function(){setValidity(isValid)},[isValid]);(0,_react.useEffect)(function(){if(!value){var respAgg={id:"_key"};if(metricAggs){respAgg=metricAggs.filter(isCompatibleAgg)[0]||respAgg}setValue(respAgg.id)}},[]);(0,_react.useEffect)(function(){if(metricAggs&&value&&value!=="custom"){var respAgg=metricAggs.filter(isCompatibleAgg).find(function(aggregation){return aggregation.id===value});if(!respAgg){setValue("_key")}}},[metricAggs]);var defaultOptions=[{text:_i18n.i18n.translate("common.ui.aggTypes.orderAgg.customMetricLabel",{defaultMessage:"Custom metric"}),value:"custom"},{text:_i18n.i18n.translate("common.ui.aggTypes.orderAgg.alphabeticalLabel",{defaultMessage:"Alphabetical"}),value:"_key"}];var options=metricAggs?metricAggs.map(function(respAgg){return{text:_i18n.i18n.translate("common.ui.aggTypes.orderAgg.metricLabel",{defaultMessage:"Metric: {metric}",values:{metric:(0,_agg_utils.safeMakeLabel)(respAgg)}}),value:respAgg.id,disabled:!isCompatibleAgg(respAgg)}}):[];return _react.default.createElement(_eui.EuiFormRow,{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,compressed:true},_react.default.createElement(_eui.EuiSelect,{options:[].concat(_toConsumableArray(options),defaultOptions),value:value,onChange:function onChange(ev){return setValue(ev.target.value)},fullWidth:true,isInvalid:showValidation?!isValid:false,onBlur:setTouched,"data-test-subj":"visEditorOrderBy".concat(agg.id)}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MissingBucketParamEditor=MissingBucketParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _switch=__webpack_require__(101);var _migrate_include_exclude_format=__webpack_require__(350);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function MissingBucketParamEditor(props){var fieldTypeIsNotString=!(0,_migrate_include_exclude_format.isStringType)(props.agg);(0,_react.useEffect)(function(){if(fieldTypeIsNotString){props.setValue(false)}},[fieldTypeIsNotString]);return _react.default.createElement(_switch.SwitchParamEditor,_extends({dataTestSubj:"missingBucketSwitch",displayLabel:_i18n.i18n.translate("common.ui.aggTypes.otherBucket.showMissingValuesLabel",{defaultMessage:"Show missing values"}),displayToolTip:_i18n.i18n.translate("common.ui.aggTypes.otherBucket.showMissingValuesTooltip",{defaultMessage:'Only works for fields of type "string". When enabled, include documents with missing '+"values in the search. If this bucket is in the top N, it appears in the chart. "+'If not in the top N, and you enable "Group other values in separate bucket", '+'Elasticsearch adds the missing values to the "other" bucket.'}),disabled:fieldTypeIsNotString},props))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OtherBucketParamEditor=OtherBucketParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _switch=__webpack_require__(101);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function OtherBucketParamEditor(props){return _react.default.createElement(_switch.SwitchParamEditor,_extends({dataTestSubj:"otherBucketSwitch",displayLabel:_i18n.i18n.translate("common.ui.aggTypes.otherBucket.groupValuesLabel",{defaultMessage:"Group other values in separate bucket"}),displayToolTip:_i18n.i18n.translate("common.ui.aggTypes.otherBucket.groupValuesTooltip",{defaultMessage:"Values not in the top N are grouped in this bucket. "+"To include documents with missing values, enable 'Show missing values'."})},props))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterBucketAgg=void 0;var _bucket_agg_type=__webpack_require__(50);var _i18n=__webpack_require__(2);var filterBucketAgg=new _bucket_agg_type.BucketAggType({name:"filter",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.filterTitle",{defaultMessage:"Filter"}),params:[{name:"geo_bounding_box"}]});exports.filterBucketAgg=filterBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filtersBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _angular=_interopRequireDefault(__webpack_require__(17));var _bucket_agg_type=__webpack_require__(50);var _filters=__webpack_require__(1128);var _filters2=__webpack_require__(1129);var _i18n=__webpack_require__(2);var _chrome=_interopRequireDefault(__webpack_require__(7));var _esQuery=__webpack_require__(20);var _legacy=__webpack_require__(71);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getQueryLog=_legacy.setup.query.helpers.getQueryLog;var config=_chrome.default.getUiSettingsClient();var filtersBucketAgg=new _bucket_agg_type.BucketAggType({name:"filters",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.filtersTitle",{defaultMessage:"Filters",description:"The name of an aggregation, that allows to specify multiple individual filters to group data by."}),createFilter:_filters.createFilterFilters,customLabels:false,params:[{name:"filters",editorComponent:_filters2.FiltersParamEditor,default:[{input:{query:"",language:config.get("search:queryLanguage")},label:""}],write:function write(aggConfig,output){var inFilters=aggConfig.params.filters;if(!_lodash.default.size(inFilters))return;inFilters.forEach(function(filter){var persistedLog=getQueryLog(config,"filtersAgg",filter.input.language);persistedLog.add(filter.input.query)});var outFilters=_lodash.default.transform(inFilters,function(filters,filter){var input=_lodash.default.cloneDeep(filter.input);if(!input){console.log('malformed filter agg params, missing "input" query');return}var query=(0,_esQuery.buildEsQuery)(aggConfig.getIndexPattern(),[input],[],config);if(!query){console.log('malformed filter agg params, missing "query" on input');return}var matchAllLabel=filter.input.query===""?"*":"";var label=filter.label||matchAllLabel||(typeof filter.input.query==="string"?filter.input.query:_angular.default.toJson(filter.input.query));filters[label]={query:query}},{});if(!_lodash.default.size(outFilters))return;var params=output.params||(output.params={});params.filters=outFilters}}]});exports.filtersBucketAgg=filtersBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterFilters=createFilterFilters;var _esQuery=__webpack_require__(20);var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createFilterFilters(aggConfig,key){var dslFilters=_lodash.default.get(aggConfig.toDsl(),"filters.filters");var filter=dslFilters[key];if(filter){return(0,_esQuery.buildQueryFilter)(filter.query,aggConfig.getIndexPattern().id,key)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FiltersParamEditor=FiltersParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(1);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _chrome=_interopRequireDefault(__webpack_require__(7));var _filter=__webpack_require__(1130);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var generateId=(0,_eui.htmlIdGenerator)();var config=_chrome.default.getUiSettingsClient();function FiltersParamEditor(_ref){var agg=_ref.agg,_ref$value=_ref.value,value=_ref$value===void 0?[]:_ref$value,setValue=_ref.setValue;var _useState=(0,_react.useState)(function(){return value.map(function(filter){return _objectSpread({},filter,{id:generateId()})})}),_useState2=_slicedToArray(_useState,2),filters=_useState2[0],setFilters=_useState2[1];(0,_react.useEffect)(function(){setValue(filters.map(function(filter){return(0,_lodash.omit)(_objectSpread({},filter,{input:filter.input}),"id")}))},[]);(0,_react.useEffect)(function(){if(value.length!==filters.length||value.some(function(filter,index){return!(0,_lodash.isEqual)(filter,(0,_lodash.omit)(filters[index],"id"))})){setFilters(value.map(function(filter){return _objectSpread({},filter,{id:generateId()})}))}},[value]);var updateFilters=function updateFilters(updatedFilters){setValue(updatedFilters.map(function(filter){return(0,_lodash.omit)(filter,"id")}));setFilters(updatedFilters)};var onAddFilter=function onAddFilter(){return updateFilters([].concat(_toConsumableArray(filters),[{input:{query:"",language:config.get("search:queryLanguage")},label:"",id:generateId()}]))};var onRemoveFilter=function onRemoveFilter(id){return updateFilters(filters.filter(function(filter){return filter.id!==id}))};var onChangeValue=function onChangeValue(id,query,label){return updateFilters(filters.map(function(filter){return filter.id===id?_objectSpread({},filter,{input:query,label:label}):filter}))};return _react.default.createElement(_react.default.Fragment,null,filters.map(function(_ref2,arrayIndex){var input=_ref2.input,label=_ref2.label,id=_ref2.id;return _react.default.createElement(_filter.FilterRow,{key:id,id:id,arrayIndex:arrayIndex,customLabel:label,value:input,autoFocus:arrayIndex===filters.length-1,disableRemove:arrayIndex===0&&filters.length===1,dataTestSubj:"visEditorFilterInput_".concat(agg.id,"_").concat(arrayIndex),agg:agg,onChangeValue:onChangeValue,onRemoveFilter:onRemoveFilter})}),_react.default.createElement(_eui.EuiButton,{iconType:"plusInCircle",fill:true,fullWidth:true,onClick:onAddFilter,size:"s","data-test-subj":"visEditorAddFilterButton"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.aggTypes.filters.addFilterButtonLabel",defaultMessage:"Add filter"})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterRow=FilterRow;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _data=__webpack_require__(24);var _new_platform=__webpack_require__(8);var _storage=__webpack_require__(97);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var localStorage=new _storage.Storage(window.localStorage);function FilterRow(_ref){var id=_ref.id,arrayIndex=_ref.arrayIndex,customLabel=_ref.customLabel,value=_ref.value,autoFocus=_ref.autoFocus,disableRemove=_ref.disableRemove,dataTestSubj=_ref.dataTestSubj,agg=_ref.agg,onChangeValue=_ref.onChangeValue,onRemoveFilter=_ref.onRemoveFilter;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),showCustomLabel=_useState2[0],setShowCustomLabel=_useState2[1];var filterLabel=_i18n.i18n.translate("common.ui.aggTypes.filters.filterLabel",{defaultMessage:"Filter {index}",values:{index:arrayIndex+1}});var FilterControl=_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButtonIcon,{iconType:"tag","aria-label":_i18n.i18n.translate("common.ui.aggTypes.filters.toggleFilterButtonAriaLabel",{defaultMessage:"Toggle filter label"}),"aria-expanded":showCustomLabel,"aria-controls":"visEditorFilterLabel".concat(arrayIndex),onClick:function onClick(){return setShowCustomLabel(!showCustomLabel)}})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButtonIcon,{iconType:"trash",color:"danger",disabled:disableRemove,"aria-label":_i18n.i18n.translate("common.ui.aggTypes.filters.removeFilterButtonAriaLabel",{defaultMessage:"Remove this filter"}),onClick:function onClick(){return onRemoveFilter(id)}})));return _react.default.createElement(_eui.EuiForm,null,_react.default.createElement(_eui.EuiFormRow,{label:"".concat(filterLabel).concat(customLabel?" - ".concat(customLabel):""),labelAppend:FilterControl,fullWidth:true,compressed:true},_react.default.createElement(_data.QueryBarInput,{query:value,indexPatterns:[agg.getIndexPattern()],appName:"filtersAgg",onChange:function onChange(query){return onChangeValue(id,query,customLabel)},disableAutoFocus:!autoFocus,"data-test-subj":dataTestSubj,bubbleSubmitEvent:true,languageSwitcherPopoverAnchorPosition:"leftDown",store:localStorage,uiSettings:_new_platform.npStart.core.uiSettings,savedObjectsClient:_new_platform.npStart.core.savedObjects.client})),showCustomLabel?_react.default.createElement(_eui.EuiFormRow,{id:"visEditorFilterLabel".concat(arrayIndex),label:_i18n.i18n.translate("common.ui.aggTypes.filters.definiteFilterLabel",{defaultMessage:"Filter {index} label",description:"'Filter {index}' represents the name of the filter as a noun, similar to 'label for filter 1'.",values:{index:arrayIndex+1}}),fullWidth:true,compressed:true},_react.default.createElement(_eui.EuiFieldText,{value:customLabel,placeholder:_i18n.i18n.translate("common.ui.aggTypes.filters.labelPlaceholder",{defaultMessage:"Label"}),onChange:function onChange(ev){return onChangeValue(id,value,ev.target.value)},fullWidth:true})):null)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1762)},function(module,exports,__webpack_require__){__webpack_require__(1133);__webpack_require__(1134);__webpack_require__(1143);__webpack_require__(1144)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.inputControlVis=void 0;var _registries=__webpack_require__(80);var _i18n=__webpack_require__(2);var inputControlVis=function inputControlVis(){return{name:"input_control_vis",type:"render",context:{types:[]},help:_i18n.i18n.translate("inputControl.function.help",{defaultMessage:"Input control visualization"}),args:{visConfig:{types:["string"],default:'"{}"'}},fn:function fn(context,args){var params=JSON.parse(args.visConfig);return{type:"render",as:"visualization",value:{visType:"input_control_vis",visConfig:params}}}}};exports.inputControlVis=inputControlVis;_registries.functionsRegistry.register(inputControlVis)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kibanaPie=void 0;var _registries=__webpack_require__(80);var _vislib=__webpack_require__(352);var _i18n=__webpack_require__(2);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var kibanaPie=function kibanaPie(){return{name:"kibana_pie",type:"render",context:{types:["kibana_datatable"]},help:_i18n.i18n.translate("kbnVislibVisTypes.functions.pie.help",{defaultMessage:"Pie visualization"}),args:{visConfig:{types:["string","null"],default:'"{}"'}},fn:function(){var _fn=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context,args){var visConfig,responseHandler,convertedData;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:visConfig=JSON.parse(args.visConfig);responseHandler=(0,_vislib.vislibSlicesResponseHandlerProvider)().handler;_context.next=4;return responseHandler(context,visConfig.dimensions);case 4:convertedData=_context.sent;return _context.abrupt("return",{type:"render",as:"visualization",value:{visData:convertedData,visType:"pie",visConfig:visConfig,params:{listenOnChange:true}}});case 6:case"end":return _context.stop()}}},_callee)}));function fn(_x,_x2){return _fn.apply(this,arguments)}return fn}()}};exports.kibanaPie=kibanaPie;_registries.functionsRegistry.register(kibanaPie)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSeries=getSeries;var _lodash=_interopRequireDefault(__webpack_require__(1));var _get_point=__webpack_require__(1136);var _add_to_siri=__webpack_require__(1137);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getSeries(table,chart){var aspects=chart.aspects;var xAspect=aspects.x[0];var yAspect=aspects.y[0];var zAspect=aspects.z&&aspects.z.length?aspects.z[0]:aspects.z;var multiY=Array.isArray(aspects.y)&&aspects.y.length>1;var yScale=chart.yScale;var partGetPoint=_lodash.default.partial(_get_point.getPoint,table,xAspect,aspects.series,yScale);var series=(0,_lodash.default)(table.rows).transform(function(series,row,rowIndex){if(!multiY){var point=partGetPoint(row,rowIndex,yAspect,zAspect);if(point){var id="".concat(point.series,"-").concat(yAspect.accessor);point.seriesId=id;(0,_add_to_siri.addToSiri)(series,point,id,point.series,yAspect.format,zAspect&&zAspect.format,zAspect&&zAspect.title)}return}aspects.y.forEach(function(y){var point=partGetPoint(row,rowIndex,y,zAspect);if(!point)return;var seriesId=y.accessor;var seriesLabel=y.title;if(aspects.series){var prefix=point.series?point.series+": ":"";seriesId=prefix+seriesId;seriesLabel=prefix+seriesLabel}point.seriesId=seriesId;(0,_add_to_siri.addToSiri)(series,point,seriesId,seriesLabel,y.format,zAspect&&zAspect.format,zAspect&&zAspect.title)})},new Map).thru(function(series){return _toConsumableArray(series.values())}).value();if(multiY){series=_lodash.default.sortBy(series,function(siri){var firstVal=siri.values[0];var y;if(firstVal){y=_lodash.default.find(aspects.y,function(y){return y.accessor===firstVal.accessor})}return y?y.i:series.length})}return series}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPoint=getPoint;var _utilities=__webpack_require__(41);function getPoint(table,x,series,yScale,row,rowIndex,y,z){var xRow=x.accessor===-1?"_all":row[x.accessor];var yRow=row[y.accessor];var zRow=z&&row[z.accessor];var point={x:xRow,y:yRow,z:zRow,extraMetrics:[],yScale:yScale,seriesRaw:series&&{table:table,column:series[0].column,row:rowIndex,value:row[series[0].accessor]},xRaw:{table:table,column:x.column,row:rowIndex,value:xRow},yRaw:{table:table,column:y.column,row:rowIndex,value:yRow},zRaw:z&&{table:table,column:z.column,row:rowIndex,value:zRow},tableRaw:table.$parent&&{table:table.$parent.table,column:table.$parent.column,row:table.$parent.row,value:table.$parent.key,title:table.$parent.name},parent:series?series[0]:null};if(point.y==="NaN"){return}if(series){var seriesArray=series.length?series:[series];point.series=seriesArray.map(function(s){var fieldFormatter=(0,_utilities.getFormat)(s.format);return fieldFormatter.convert(row[s.accessor])}).join(" - ")}else if(y){point.series=y.title}if(yScale){point.y*=yScale}return point}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addToSiri=addToSiri;function addToSiri(series,point,id,yLabel,yFormat,zFormat,zLabel){id=id==null?"":id+"";if(series.has(id)){series.get(id).values.push(point);return}series.set(id,{id:id.split("-").pop(),rawId:id,label:yLabel==null?id:yLabel,count:0,values:[point],format:yFormat,zLabel:zLabel,zFormat:zFormat})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAspects=getAspects;var _fake_x_aspect=__webpack_require__(1139);function getAspects(table,dimensions){var aspects={};Object.keys(dimensions).forEach(function(name){var dimension=Array.isArray(dimensions[name])?dimensions[name]:[dimensions[name]];dimension.forEach(function(d){if(!d){return}var column=table.columns[d.accessor];if(!column){return}if(!aspects[name]){aspects[name]=[]}aspects[name].push({accessor:column.id,column:d.accessor,title:column.name,format:d.format,params:d.params})})});if(!aspects.x){aspects.x=[(0,_fake_x_aspect.makeFakeXAspect)()]}return aspects}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.makeFakeXAspect=makeFakeXAspect;var _i18n=__webpack_require__(2);function makeFakeXAspect(){return{accessor:-1,title:_i18n.i18n.translate("common.ui.aggResponse.allDocsTitle",{defaultMessage:"All docs"}),params:{defaultValue:"_all"},format:{}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initYAxis=initYAxis;function initYAxis(chart){var y=chart.aspects.y;if(Array.isArray(y)){chart.yAxisFormat=y[0].format;chart.yAxisLabel=y.length>1?"":y[0].title}var z=chart.aspects.series;if(z){if(Array.isArray(z)){chart.zAxisFormat=z[0].format;chart.zAxisLabel=""}else{chart.zAxisFormat=z.format;chart.zAxisLabel=z.title}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initXAxis=initXAxis;var _lodash=__webpack_require__(1);var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function initXAxis(chart,table){var _chart$aspects$x$=chart.aspects.x[0],format=_chart$aspects$x$.format,title=_chart$aspects$x$.title,params=_chart$aspects$x$.params,accessor=_chart$aspects$x$.accessor;chart.xAxisOrderedValues=accessor===-1?[params.defaultValue]:(0,_lodash.uniq)(table.rows.map(function(r){return r[accessor]}));chart.xAxisFormat=format;chart.xAxisLabel=title;if(params.interval){chart.ordered={interval:params.date?_moment.default.duration(params.interval):params.interval}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.orderedDateAxis=orderedDateAxis;function orderedDateAxis(chart){var x=chart.aspects.x[0];var bounds=x.params.bounds;chart.ordered.date=true;if(bounds){chart.ordered.min=isNaN(bounds.min)?Date.parse(bounds.min):bounds.min;chart.ordered.max=isNaN(bounds.max)?Date.parse(bounds.max):bounds.max}else{chart.ordered.endzones=false}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.vislib=void 0;var _registries=__webpack_require__(80);var _i18n=__webpack_require__(2);var _vislib=__webpack_require__(352);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var vislib=function vislib(){return{name:"vislib",type:"render",context:{types:["kibana_datatable"]},help:_i18n.i18n.translate("kbnVislibVisTypes.functions.vislib.help",{defaultMessage:"Vislib visualization"}),args:{type:{types:["string"],default:'""'},visConfig:{types:["string","null"],default:'"{}"'}},fn:function(){var _fn=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context,args){var responseHandler,visConfigParams,convertedData;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:responseHandler=(0,_vislib.vislibSeriesResponseHandlerProvider)().handler;visConfigParams=JSON.parse(args.visConfig);_context.next=4;return responseHandler(context,visConfigParams.dimensions);case 4:convertedData=_context.sent;return _context.abrupt("return",{type:"render",as:"visualization",value:{visData:convertedData,visType:args.type,visConfig:visConfigParams,params:{listenOnChange:true}}});case 6:case"end":return _context.stop()}}},_callee)}));function fn(_x,_x2){return _fn.apply(this,arguments)}return fn}()}};exports.vislib=vislib;_registries.functionsRegistry.register(vislib)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timelionVis=void 0;var _registries=__webpack_require__(80);var _lodash=__webpack_require__(1);var _i18n=__webpack_require__(2);var _timelion_request_handler=__webpack_require__(604);var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var timelionVis=function timelionVis(){return{name:"timelion_vis",type:"render",context:{types:["kibana_context","null"]},help:_i18n.i18n.translate("timelion.function.help",{defaultMessage:"Timelion visualization"}),args:{expression:{types:["string"],aliases:["_"],default:'".es(*)"'},interval:{types:["string","null"],default:"auto"}},fn:function(){var _fn=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context,args){var $injector,Private,timelionRequestHandler,visParams,response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _chrome.default.dangerouslyGetActiveInjector();case 2:$injector=_context.sent;Private=$injector.get("Private");timelionRequestHandler=Private(_timelion_request_handler.TimelionRequestHandlerProvider).handler;visParams={expression:args.expression,interval:args.interval};_context.next=8;return timelionRequestHandler({timeRange:(0,_lodash.get)(context,"timeRange",null),query:(0,_lodash.get)(context,"query",null),filters:(0,_lodash.get)(context,"filters",null),forceFetch:true,visParams:visParams});case 8:response=_context.sent;response.visType="timelion";return _context.abrupt("return",{type:"render",as:"visualization",value:{visParams:visParams,visType:"timelion",visData:response}});case 11:case"end":return _context.stop()}}},_callee)}));function fn(_x,_x2){return _fn.apply(this,arguments)}return fn}()}};exports.timelionVis=timelionVis;_registries.functionsRegistry.register(timelionVis)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initializeInterpreter=initializeInterpreter;var _common=__webpack_require__(1146);var _create_handlers=__webpack_require__(1165);var _batched_fetch=__webpack_require__(1166);var _consts=__webpack_require__(606);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function initializeInterpreter(_x){return _initializeInterpreter.apply(this,arguments)}function _initializeInterpreter(){_initializeInterpreter=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(config){var http,ajaxStream,typesRegistry,functionsRegistry,serverFunctionList,types,_serializeProvider,serialize,batch,interpretAst;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:http=config.http,ajaxStream=config.ajaxStream,typesRegistry=config.typesRegistry,functionsRegistry=config.functionsRegistry;_context2.next=3;return http.get(_consts.FUNCTIONS_URL);case 3:serverFunctionList=_context2.sent;types=typesRegistry.toJS();_serializeProvider=(0,_common.serializeProvider)(types),serialize=_serializeProvider.serialize;batch=(0,_batched_fetch.batchedFetch)({ajaxStream:ajaxStream,serialize:serialize});Object.keys(serverFunctionList).forEach(function(functionName){functionsRegistry.register(function(){return _objectSpread({},serverFunctionList[functionName],{fn:function fn(context,args){return batch({functionName:functionName,args:args,context:context})}})})});interpretAst=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(ast,context,handlers){var interpretFn;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_common.interpreterProvider)({types:typesRegistry.toJS(),handlers:_objectSpread({},handlers,{},(0,_create_handlers.createHandlers)()),functions:functionsRegistry.toJS()});case 2:interpretFn=_context.sent;return _context.abrupt("return",interpretFn(ast,context));case 4:case"end":return _context.stop()}}},_callee)}));return function interpretAst(_x2,_x3,_x4){return _ref.apply(this,arguments)}}();return _context2.abrupt("return",{interpretAst:interpretAst});case 10:case"end":return _context2.stop()}}},_callee2)}));return _initializeInterpreter.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={API_ROUTE:true,Datatable:true,DatatableColumn:true,DatatableRow:true,DatatableColumnType:true,ExpressionImage:true,Filter:true,InterpreterErrorType:true,isDatatable:true,KibanaContext:true,KibanaDatatable:true,PointSeries:true,PointSeriesColumns:true,PointSeriesColumn:true,PointSeriesColumnName:true,Render:true,Style:true,Type:true,interpreterProvider:true};Object.defineProperty(exports,"Datatable",{enumerable:true,get:function get(){return _expression_types.Datatable}});Object.defineProperty(exports,"DatatableColumn",{enumerable:true,get:function get(){return _expression_types.DatatableColumn}});Object.defineProperty(exports,"DatatableRow",{enumerable:true,get:function get(){return _expression_types.DatatableRow}});Object.defineProperty(exports,"DatatableColumnType",{enumerable:true,get:function get(){return _expression_types.DatatableColumnType}});Object.defineProperty(exports,"ExpressionImage",{enumerable:true,get:function get(){return _expression_types.ExpressionImage}});Object.defineProperty(exports,"Filter",{enumerable:true,get:function get(){return _expression_types.Filter}});Object.defineProperty(exports,"InterpreterErrorType",{enumerable:true,get:function get(){return _expression_types.InterpreterErrorType}});Object.defineProperty(exports,"isDatatable",{enumerable:true,get:function get(){return _expression_types.isDatatable}});Object.defineProperty(exports,"KibanaContext",{enumerable:true,get:function get(){return _expression_types.KibanaContext}});Object.defineProperty(exports,"KibanaDatatable",{enumerable:true,get:function get(){return _expression_types.KibanaDatatable}});Object.defineProperty(exports,"PointSeries",{enumerable:true,get:function get(){return _expression_types.PointSeries}});Object.defineProperty(exports,"PointSeriesColumns",{enumerable:true,get:function get(){return _expression_types.PointSeriesColumns}});Object.defineProperty(exports,"PointSeriesColumn",{enumerable:true,get:function get(){return _expression_types.PointSeriesColumn}});Object.defineProperty(exports,"PointSeriesColumnName",{enumerable:true,get:function get(){return _expression_types.PointSeriesColumnName}});Object.defineProperty(exports,"Render",{enumerable:true,get:function get(){return _expression_types.Render}});Object.defineProperty(exports,"Style",{enumerable:true,get:function get(){return _expression_types.Style}});Object.defineProperty(exports,"Type",{enumerable:true,get:function get(){return _interpreter.Type}});Object.defineProperty(exports,"interpreterProvider",{enumerable:true,get:function get(){return _interpreter_provider.interpreterProvider}});exports.API_ROUTE=void 0;var _expression_types=__webpack_require__(605);var _serialize_provider=__webpack_require__(1162);Object.keys(_serialize_provider).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _serialize_provider[key]}})});var _interpreter=__webpack_require__(537);var _interpreter_provider=__webpack_require__(1163);var API_ROUTE="/api/interpreter";exports.API_ROUTE=API_ROUTE},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.boolean=void 0;var name="boolean";var boolean=function boolean(){return{name:name,from:{null:function _null(){return false},number:function number(n){return Boolean(n)},string:function string(s){return Boolean(s)}},to:{render:function render(value){var text="".concat(value);return{type:"render",as:"text",value:{text:text}}},datatable:function datatable(value){return{type:"datatable",columns:[{name:"value",type:name}],rows:[{value:value}]}}}}};exports.boolean=boolean},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.datatable=exports.isDatatable=void 0;var _lodash=__webpack_require__(1);var name="datatable";var isDatatable=function isDatatable(datatable){return!!datatable&&datatable.type==="datatable"};exports.isDatatable=isDatatable;var datatable=function datatable(){return{name:name,validate:function validate(table){if(!table.columns){throw new Error("datatable must have a columns array, even if it is empty")}if(!table.rows){throw new Error("datatable must have a rows array, even if it is empty")}},serialize:function serialize(table){var columns=table.columns,rows=table.rows;return _objectSpread({},table,{rows:rows.map(function(row){return columns.map(function(column){return row[column.name]})})})},deserialize:function deserialize(table){var columns=table.columns,rows=table.rows;return _objectSpread({},table,{rows:rows.map(function(row){return(0,_lodash.zipObject)((0,_lodash.map)(columns,"name"),row)})})},from:{null:function _null(){return{type:name,rows:[],columns:[]}},pointseries:function pointseries(context){return{type:name,rows:context.rows,columns:(0,_lodash.map)(context.columns,function(val,colName){return{name:colName,type:val.type}})}}},to:{render:function render(table){return{type:"render",as:"table",value:{datatable:table,paginate:true,perPage:10,showHeader:true}}},pointseries:function pointseries(table){var validFields=["x","y","color","size","text"];var columns=table.columns.filter(function(column){return validFields.includes(column.name)});var rows=table.rows.map(function(row){return(0,_lodash.pick)(row,validFields)});return{type:"pointseries",columns:columns.reduce(function(acc,column){acc[column.name]={type:column.type,expression:column.name,role:"dimension"};return acc},{}),rows:rows}}}}};exports.datatable=datatable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.error=void 0;var name="error";var error=function error(){return{name:name,to:{render:function render(input){return{type:"render",as:name,value:{error:input.error,info:input.info}}}}}};exports.error=error},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filter=void 0;var name="filter";var filter=function filter(){return{name:name,from:{null:function _null(){return{type:name,meta:{},and:[]}}}}};exports.filter=filter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.image=void 0;var name="image";var image=function image(){return{name:name,to:{render:function render(input){return{type:"render",as:"image",value:input}}}}};exports.image=image},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.nullType=void 0;var name="null";var nullType=function nullType(){return{name:name,from:{"*":function _(){return null}}}};exports.nullType=nullType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.number=void 0;var name="number";var number=function number(){return{name:name,from:{null:function _null(){return 0},boolean:function boolean(b){return Number(b)},string:function string(n){return Number(n)}},to:{render:function render(value){var text="".concat(value);return{type:"render",as:"text",value:{text:text}}},datatable:function datatable(value){return{type:"datatable",columns:[{name:"value",type:"number"}],rows:[{value:value}]}}}}};exports.number=number},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pointseries=void 0;var name="pointseries";var pointseries=function pointseries(){return{name:name,from:{null:function _null(){return{type:name,rows:[],columns:{}}}},to:{render:function render(pseries,types){var datatable=types.datatable.from(pseries,types);return{type:"render",as:"table",value:{datatable:datatable,showHeader:true}}}}}};exports.pointseries=pointseries},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.range=void 0;var name="range";var range=function range(){return{name:name,from:{null:function _null(){return{type:"range",from:0,to:0}}},to:{render:function render(value){var text="from ".concat(value.from," to ").concat(value.to);return{type:"render",as:"text",value:{text:text}}}}}};exports.range=range},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.render=void 0;var name="render";var render=function render(){return{name:name,from:{"*":function _(v){return{type:name,as:"debug",value:v}}}}};exports.render=render},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shape=void 0;var name="shape";var shape=function shape(){return{name:name,to:{render:function render(input){return{type:"render",as:name,value:input}}}}};exports.shape=shape},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.string=void 0;var name="string";var string=function string(){return{name:name,from:{null:function _null(){return""},boolean:function boolean(b){return String(b)},number:function number(n){return String(n)}},to:{render:function render(text){return{type:"render",as:"text",value:{text:text}}},datatable:function datatable(value){return{type:"datatable",columns:[{name:"value",type:"string"}],rows:[{value:value}]}}}}};exports.string=string},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.style=void 0;var name="style";var style=function style(){return{name:name,from:{null:function _null(){return{type:"style",spec:{},css:""}}}}};exports.style=style},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kibanaContext=void 0;var name="kibana_context";var kibanaContext=function kibanaContext(){return{name:name,from:{null:function _null(){return{type:name}}},to:{null:function _null(){return{type:"null"}}}}};exports.kibanaContext=kibanaContext},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.kibanaDatatable=void 0;var _lodash=__webpack_require__(1);var name="kibana_datatable";var kibanaDatatable=function kibanaDatatable(){return{name:name,from:{datatable:function datatable(context){return{type:name,rows:context.rows,columns:context.columns.map(function(column){return{id:column.name,name:column.name}})}},pointseries:function pointseries(context){var columns=(0,_lodash.map)(context.columns,function(column,n){return _objectSpread({id:n,name:n},column)});return{type:name,rows:context.rows,columns:columns}}}}};exports.kibanaDatatable=kibanaDatatable},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getType=getType;exports.serializeProvider=serializeProvider;var _lodash=__webpack_require__(1);function getType(node){if(node==null)return"null";if(_typeof(node)==="object"){if(!node.type)throw new Error("Objects must have a type property");return node.type}return _typeof(node)}function serializeProvider(types){return{serialize:provider("serialize"),deserialize:provider("deserialize")};function provider(key){return function(context){var type=getType(context);var typeDef=types[type];var fn=(0,_lodash.get)(typeDef,key)||_lodash.identity;return fn(context)}}}},function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.interpreterProvider=interpreterProvider;Object.defineProperty(exports,"createError",{enumerable:true,get:function get(){return _create_error.createError}});var _lodash=__webpack_require__(1);var _common=__webpack_require__(370);var _create_error=__webpack_require__(1164);function interpreterProvider(config){var functions=config.functions,types=config.types;var handlers=_objectSpread({},config.handlers,{types:types});var cast=(0,_common.castProvider)(types);return interpret;function interpret(_x){return _interpret.apply(this,arguments)}function _interpret(){_interpret=_asyncToGenerator(regeneratorRuntime.mark(function _callee(node){var context,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:context=_args.length>1&&_args[1]!==undefined?_args[1]:null;_context.t0=(0,_common.getType)(node);_context.next=_context.t0==="expression"?4:_context.t0==="string"?5:_context.t0==="number"?5:_context.t0==="null"?5:_context.t0==="boolean"?5:6;break;case 4:return _context.abrupt("return",invokeChain(node.chain,context));case 5:return _context.abrupt("return",node);case 6:throw new Error("Unknown AST object: ".concat(JSON.stringify(node)));case 7:case"end":return _context.stop()}}},_callee)}));return _interpret.apply(this,arguments)}function invokeChain(_x2,_x3){return _invokeChain.apply(this,arguments)}function _invokeChain(){_invokeChain=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(chainArr,context){var chain,link,fnName,fnArgs,fnDef,_ref,resolvedArgs,newContext;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(chainArr.length){_context2.next=2;break}return _context2.abrupt("return",Promise.resolve(context));case 2:if(!(handlers.abortSignal&&handlers.abortSignal.aborted)){_context2.next=4;break}return _context2.abrupt("return",(0,_create_error.createError)({message:"The expression was aborted.",name:"AbortError"}));case 4:chain=(0,_lodash.clone)(chainArr);link=chain.shift();fnName=link.function,fnArgs=link.arguments;fnDef=(0,_common.getByAlias)(functions,fnName);if(fnDef){_context2.next=10;break}return _context2.abrupt("return",(0,_create_error.createError)({message:"Function ".concat(fnName," could not be found.")}));case 10:_context2.prev=10;_context2.next=13;return resolveArgs(fnDef,context,fnArgs);case 13:_ref=_context2.sent;resolvedArgs=_ref.resolvedArgs;_context2.next=17;return invokeFunction(fnDef,context,resolvedArgs);case 17:newContext=_context2.sent;if(!((0,_common.getType)(newContext)==="error")){_context2.next=20;break}return _context2.abrupt("return",newContext);case 20:return _context2.abrupt("return",invokeChain(chain,newContext));case 23:_context2.prev=23;_context2.t0=_context2["catch"](10);_context2.t0.message="[".concat(fnName,"] > ").concat(_context2.t0.message);return _context2.abrupt("return",(0,_create_error.createError)(_context2.t0));case 27:case"end":return _context2.stop()}}},_callee2,null,[[10,23]])}));return _invokeChain.apply(this,arguments)}function invokeFunction(_x4,_x5,_x6){return _invokeFunction.apply(this,arguments)}function _invokeFunction(){_invokeFunction=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(fnDef,context,args){var acceptableContext,fnOutput,returnType,expectedType,type;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:acceptableContext=cast(context,fnDef.context.types);_context3.next=3;return fnDef.fn(acceptableContext,args,handlers);case 3:fnOutput=_context3.sent;returnType=(0,_common.getType)(fnOutput);expectedType=fnDef.type;if(!(expectedType&&returnType!==expectedType)){_context3.next=8;break}throw new Error("Function '".concat(fnDef.name,"' should return '").concat(expectedType,"',")+" actually returned '".concat(returnType,"'"));case 8:type=handlers.types[fnDef.type];if(!(type&&type.validate)){_context3.next=17;break}_context3.prev=10;type.validate(fnOutput);_context3.next=17;break;case 14:_context3.prev=14;_context3.t0=_context3["catch"](10);throw new Error("Output of '".concat(fnDef.name,"' is not a valid type '").concat(fnDef.type,"': ").concat(_context3.t0));case 17:return _context3.abrupt("return",fnOutput);case 18:case"end":return _context3.stop()}}},_callee3,null,[[10,14]])}));return _invokeFunction.apply(this,arguments)}function resolveArgs(_x7,_x8,_x9){return _resolveArgs.apply(this,arguments)}function _resolveArgs(){_resolveArgs=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(fnDef,context,argAsts){var argDefs,dealiasedArgAsts,argAstsWithDefaults,resolveArgFns,argNames,resolvedArgValues,resolvedMultiArgs,resolvedArgs;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:argDefs=fnDef.args;dealiasedArgAsts=(0,_lodash.reduce)(argAsts,function(acc,argAst,argName){var argDef=(0,_common.getByAlias)(argDefs,argName);if(!argDef){throw new Error("Unknown argument '".concat(argName,"' passed to function '").concat(fnDef.name,"'"))}acc[argDef.name]=(acc[argDef.name]||[]).concat(argAst);return acc},{});(0,_lodash.each)(argDefs,function(argDef){var aliases=argDef.aliases,argDefault=argDef.default,argName=argDef.name,required=argDef.required;if(typeof argDefault==="undefined"&&required&&typeof dealiasedArgAsts[argName]==="undefined"){if(aliases.length===0){throw new Error("".concat(fnDef.name," requires an argument"))}else{var errorArg=argName==="_"?aliases[0]:argName;throw new Error("".concat(fnDef.name,' requires an "').concat(errorArg,'" argument'))}}});argAstsWithDefaults=(0,_lodash.reduce)(argDefs,function(acc,argDef,argName){if(typeof acc[argName]==="undefined"&&typeof argDef.default!=="undefined"){acc[argName]=[(0,_common.fromExpression)(argDef.default,"argument")]}return acc},dealiasedArgAsts);resolveArgFns=(0,_lodash.mapValues)(argAstsWithDefaults,function(asts,argName){return asts.map(function(item){return _asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var ctx,newContext,_args4=arguments;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:ctx=_args4.length>0&&_args4[0]!==undefined?_args4[0]:context;_context4.next=3;return interpret(item,ctx);case 3:newContext=_context4.sent;if(!((0,_common.getType)(newContext)==="error")){_context4.next=6;break}throw newContext.error;case 6:return _context4.abrupt("return",cast(newContext,argDefs[argName].types));case 7:case"end":return _context4.stop()}}},_callee4)}))})});argNames=(0,_lodash.keys)(resolveArgFns);_context5.next=8;return Promise.all(argNames.map(function(argName){var interpretFns=resolveArgFns[argName];if(!argDefs[argName].resolve)return interpretFns;return Promise.all(interpretFns.map(function(fn){return fn()}))}));case 8:resolvedArgValues=_context5.sent;resolvedMultiArgs=(0,_lodash.zipObject)(argNames,resolvedArgValues);resolvedArgs=(0,_lodash.mapValues)(resolvedMultiArgs,function(argValues,argName){if(argDefs[argName].multi)return argValues;return(0,_lodash.last)(argValues)});return _context5.abrupt("return",{resolvedArgs:resolvedArgs});case 12:case"end":return _context5.stop()}}},_callee5)}));return _resolveArgs.apply(this,arguments)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createError=void 0;var createError=function createError(err){return{type:"error",error:{stack:true?undefined:undefined,message:typeof err==="string"?err:err.message,name:err&&err.name||"Error"}}};exports.createError=createError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createHandlers=createHandlers;function createHandlers(){return{environment:"client"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.batchedFetch=batchedFetch;var _lodash=_interopRequireDefault(__webpack_require__(1));var _consts=__webpack_require__(606);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function batchedFetch(_ref){var ajaxStream=_ref.ajaxStream,serialize=_ref.serialize,_ref$ms=_ref.ms,ms=_ref$ms===void 0?10:_ref$ms;var id=0;var batch={};var timeout;var nextId=function nextId(){return++id};var reset=function reset(){id=0;batch={};timeout=undefined};var runBatch=function runBatch(){processBatch(ajaxStream,batch);reset()};return function(_ref2){var functionName=_ref2.functionName,context=_ref2.context,args=_ref2.args;if(!timeout){timeout=setTimeout(runBatch,ms)}var request={functionName:functionName,args:args,context:serialize(context)};var duplicate=Object.values(batch).find(function(batchedRequest){return _lodash.default.isMatch(batchedRequest.request,request)});if(duplicate){return duplicate.future.promise}var future=createFuture();var newId=nextId();request.id=newId;batch[newId]={future:future,request:request};return future.promise}}function createFuture(){var resolve;var reject;var promise=new Promise(function(res,rej){resolve=res;reject=rej});return{resolve:resolve,reject:reject,promise:promise}}function processBatch(_x,_x2){return _processBatch.apply(this,arguments)}function _processBatch(){_processBatch=_asyncToGenerator(regeneratorRuntime.mark(function _callee(ajaxStream,batch){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return ajaxStream({url:_consts.FUNCTIONS_URL,body:JSON.stringify({functions:Object.values(batch).map(function(_ref3){var request=_ref3.request;return request})}),onResponse:function onResponse(_ref4){var id=_ref4.id,statusCode=_ref4.statusCode,result=_ref4.result;var future=batch[id].future;if(statusCode>=400){future.reject(result)}else{future.resolve(result)}}});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context["catch"](0);Object.values(batch).forEach(function(_ref5){var future=_ref5.future;future.reject(_context.t0)});case 8:case"end":return _context.stop()}}},_callee,null,[[0,5]])}));return _processBatch.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ajaxStream=void 0;var _ajax_stream=__webpack_require__(1168);var ajaxStream=function ajaxStream(version,basePath){return function(opts){var defaultHeaders={"Content-Type":"application/json","kbn-version":version};return(0,_ajax_stream.ajaxStream)(basePath,defaultHeaders,new XMLHttpRequest,opts)}};exports.ajaxStream=ajaxStream},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ajaxStream=ajaxStream;var _lodash=__webpack_require__(1);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function processBatchResponseStream(handler){var index=0;return function(text){while(index<text.length){var delim=":";var delimIndex=text.indexOf(delim,index);var payloadStart=delimIndex+delim.length;if(delimIndex<0){return}var rawLen=text.slice(index,delimIndex);var payloadLen=parseInt(rawLen,10);var payloadEnd=payloadStart+payloadLen;if(isNaN(payloadLen)){throw new Error("Invalid stream response length: ".concat(rawLen))}if(text.length<payloadEnd){return}var payload=JSON.parse(text.slice(payloadStart,payloadEnd));handler(payload);index=payloadEnd}}}function ajaxStream(basePath,defaultHeaders,req,opts){return new Promise(function(resolve,reject){var url=opts.url,method=opts.method,headers=opts.headers;var complete=(0,_lodash.once)(function(){var err=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;return err?reject(err):resolve(req)});req.open(method||"POST","".concat(basePath,"/").concat(url.replace(/^\//,"")));req.withCredentials=true;Object.entries(Object.assign({},defaultHeaders,headers)).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];return req.setRequestHeader(k,v)});var batchHandler=processBatchResponseStream(opts.onResponse);var processBatch=function processBatch(){try{batchHandler(req.responseText)}catch(err){req.abort();complete(err)}};req.onprogress=processBatch;req.onreadystatechange=function(){processBatch();if(req.readyState===4){if(req.status===0||req.status>=400){complete(new Error("Batch request failed with status ".concat(req.status)))}else{complete()}}};req.send(opts.body)})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.functions=void 0;var _clog=__webpack_require__(1170);var _esaggs=__webpack_require__(1171);var _font=__webpack_require__(1200);var _kibana=__webpack_require__(1204);var _kibana_context=__webpack_require__(1205);var _range=__webpack_require__(1206);var _visualization=__webpack_require__(1207);var _vis_dimension=__webpack_require__(1208);var functions=[_clog.clog,_esaggs.esaggs,_font.font,_kibana.kibana,_kibana_context.kibanaContext,_range.range,_visualization.visualization,_vis_dimension.visDimension];exports.functions=functions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.clog=void 0;var clog=function clog(){return{name:"clog",help:"Outputs the context to the console",fn:function fn(context){console.log(context);return context}}};exports.clog=clog},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.esaggs=void 0;var _lodash=__webpack_require__(1);var _i18n=__webpack_require__(2);var _courier=__webpack_require__(607);var _agg_configs=__webpack_require__(578);var _utilities=__webpack_require__(41);var _chrome=_interopRequireDefault(__webpack_require__(7));var _search_source=__webpack_require__(355);var _query_filter=__webpack_require__(51);var _public=__webpack_require__(24);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var courierRequestHandlerProvider=_courier.CourierRequestHandlerProvider;var courierRequestHandler=courierRequestHandlerProvider().handler;var name="esaggs";var esaggs=function esaggs(){return{name:name,type:"kibana_datatable",context:{types:["kibana_context","null"]},help:_i18n.i18n.translate("interpreter.functions.esaggs.help",{defaultMessage:"Run AggConfig aggregation"}),args:{index:{types:["string","null"],default:null,help:""},metricsAtAllLevels:{types:["boolean"],default:false,help:""},partialRows:{types:["boolean"],default:false,help:""},includeFormatHints:{types:["boolean"],default:false,help:""},aggConfigs:{types:["string"],default:'""',help:""}},fn:function(){var _fn=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context,args,_ref){var inspectorAdapters,abortSignal,$injector,Private,indexPatterns,SearchSource,queryFilter,aggConfigsState,indexPattern,aggs,searchSource,response,table;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:inspectorAdapters=_ref.inspectorAdapters,abortSignal=_ref.abortSignal;_context.next=3;return _chrome.default.dangerouslyGetActiveInjector();case 3:$injector=_context.sent;Private=$injector.get("Private");indexPatterns=Private(_public.IndexPatternsProvider);SearchSource=Private(_search_source.SearchSourceProvider);queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);aggConfigsState=JSON.parse(args.aggConfigs);_context.next=11;return indexPatterns.get(args.index);case 11:indexPattern=_context.sent;aggs=new _agg_configs.AggConfigs(indexPattern,aggConfigsState);searchSource=new SearchSource;searchSource.setField("index",indexPattern);searchSource.setField("size",0);_context.next=18;return courierRequestHandler({searchSource:searchSource,aggs:aggs,timeRange:(0,_lodash.get)(context,"timeRange",undefined),query:(0,_lodash.get)(context,"query",undefined),filters:(0,_lodash.get)(context,"filters",undefined),forceFetch:true,metricsAtAllLevels:args.metricsAtAllLevels,partialRows:args.partialRows,inspectorAdapters:inspectorAdapters,queryFilter:queryFilter,abortSignal:abortSignal});case 18:response=_context.sent;table={type:"kibana_datatable",rows:response.rows,columns:response.columns.map(function(column){var cleanedColumn={id:column.id,name:column.name};if(args.includeFormatHints){cleanedColumn.formatHint=(0,_utilities.createFormat)(column.aggConfig)}return cleanedColumn})};return _context.abrupt("return",table);case 21:case"end":return _context.stop()}}},_callee)}));function fn(_x,_x2,_x3){return _fn.apply(this,arguments)}return fn}()}};exports.esaggs=esaggs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabbedAggResponseWriter=TabbedAggResponseWriter;var _lodash=__webpack_require__(1);var _get_columns=__webpack_require__(415);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function TabbedAggResponseWriter(aggs){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$metricsAtAllLeve=_ref.metricsAtAllLevels,metricsAtAllLevels=_ref$metricsAtAllLeve===void 0?false:_ref$metricsAtAllLeve,_ref$partialRows=_ref.partialRows,partialRows=_ref$partialRows===void 0?false:_ref$partialRows,timeRange=_ref.timeRange;this._removePartialRows=!partialRows;this.rowBuffer={};this.bucketBuffer=[];this.metricBuffer=[];this.aggs=aggs;this.partialRows=partialRows;this.columns=(0,_get_columns.tabifyGetColumns)(aggs.getResponseAggs(),!metricsAtAllLevels);this.aggStack=_toConsumableArray(this.columns);this.rows=[];if(timeRange){var timeRangeKey=Object.keys(timeRange)[0];this.timeRange=timeRange[timeRangeKey];if(this.timeRange){this.timeRange.name=timeRangeKey}}}TabbedAggResponseWriter.prototype.isPartialRow=function(row){return!this.columns.map(function(column){return row.hasOwnProperty(column.id)}).every(function(c){return c===true})};TabbedAggResponseWriter.prototype.row=function(){var _this=this;this.bucketBuffer.forEach(function(bucket){_this.rowBuffer[bucket.id]=bucket.value});this.metricBuffer.forEach(function(metric){_this.rowBuffer[metric.id]=metric.value});if(!(0,_lodash.toArray)(this.rowBuffer).length||this._removePartialRows&&this.isPartialRow(this.rowBuffer)){return}this.rows.push(this.rowBuffer);this.rowBuffer={}};TabbedAggResponseWriter.prototype.response=function(){return{columns:this.columns,rows:this.rows}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabifyBuckets=TabifyBuckets;var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TabifyBuckets(aggResp,aggParams,timeRange){if(_lodash.default.has(aggResp,"buckets")){this.buckets=aggResp.buckets}else if(aggResp){this.buckets=[aggResp]}else{this.buckets=[]}this.objectMode=_lodash.default.isPlainObject(this.buckets);if(this.objectMode){this._keys=_lodash.default.keys(this.buckets);this.length=this._keys.length}else{this.length=this.buckets.length}if(this.length&&aggParams){this._orderBucketsAccordingToParams(aggParams);if(aggParams.drop_partials){this._dropPartials(aggParams,timeRange)}}}TabifyBuckets.prototype.forEach=function(fn){var buckets=this.buckets;if(this.objectMode){this._keys.forEach(function(key){fn(buckets[key],key)})}else{buckets.forEach(function(bucket){fn(bucket,bucket.key)})}};TabifyBuckets.prototype._isRangeEqual=function(range1,range2){return _lodash.default.get(range1,"from",null)===_lodash.default.get(range2,"from",null)&&_lodash.default.get(range1,"to",null)===_lodash.default.get(range2,"to",null)};TabifyBuckets.prototype._orderBucketsAccordingToParams=function(params){var _this=this;if(params.filters&&this.objectMode){this._keys=params.filters.map(function(filter){var query=_lodash.default.get(filter,"input.query.query_string.query",filter.input.query);var queryString=typeof query==="string"?query:JSON.stringify(query);return filter.label||queryString||"*"})}else if(params.ranges&&this.objectMode){this._keys=params.ranges.map(function(range){return _lodash.default.findKey(_this.buckets,function(el){return _this._isRangeEqual(el,range)})})}else if(params.ranges&&params.field.type!=="date"){var ranges=params.ranges;if(params.ipRangeType){ranges=params.ipRangeType==="mask"?ranges.mask:ranges.fromTo}this.buckets=ranges.map(function(range){if(range.mask){return _this.buckets.find(function(el){return el.key===range.mask})}return _this.buckets.find(function(el){return _this._isRangeEqual(el,range)})})}};TabifyBuckets.prototype._dropPartials=function(params,timeRange){if(!timeRange||this.buckets.length<=1||this.objectMode||params.field.name!==timeRange.name){return}var interval=this.buckets[1].key-this.buckets[0].key;this.buckets=this.buckets.filter(function(bucket){if((0,_moment.default)(bucket.key).isBefore(timeRange.gte)){return false}if((0,_moment.default)(bucket.key+interval).isAfter(timeRange.lte)){return false}return true});this.length=this.buckets.length}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildTabularInspectorData=buildTabularInspectorData;var _lodash=__webpack_require__(1);var _vis_filters=__webpack_require__(100);var _adapters=__webpack_require__(115);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function buildTabularInspectorData(_x,_x2){return _buildTabularInspectorData.apply(this,arguments)}function _buildTabularInspectorData(){_buildTabularInspectorData=_asyncToGenerator(regeneratorRuntime.mark(function _callee(table,queryFilter){var aggConfigs,rows,columns;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:aggConfigs=table.columns.map(function(column){return column.aggConfig});rows=table.rows.map(function(row){return table.columns.reduce(function(prev,cur,colIndex){var value=row[cur.id];var fieldFormatter=cur.aggConfig.fieldFormatter("text");prev["col-".concat(colIndex,"-").concat(cur.aggConfig.id)]=new _adapters.FormattedData(value,fieldFormatter(value));return prev},{})});columns=table.columns.map(function(col,colIndex){var field=col.aggConfig.getField();var isCellContentFilterable=col.aggConfig.isFilterable()&&(!field||field.filterable);return{name:col.name,field:"col-".concat(colIndex,"-").concat(col.aggConfig.id),filter:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex(function(row){return row["col-".concat(colIndex,"-").concat(col.aggConfig.id)].raw===value.raw});var filter=(0,_vis_filters.createFilter)(aggConfigs,table,colIndex,rowIndex,value.raw);queryFilter.addFilters(filter)},filterOut:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex(function(row){return row["col-".concat(colIndex,"-").concat(col.aggConfig.id)].raw===value.raw});var filter=(0,_vis_filters.createFilter)(aggConfigs,table,colIndex,rowIndex,value.raw);var notOther=value.raw!=="__other__";var notMissing=value.raw!=="__missing__";if(Array.isArray(filter)){filter.forEach(function(f){return(0,_lodash.set)(f,"meta.negate",notOther&&notMissing)})}else{(0,_lodash.set)(filter,"meta.negate",notOther&&notMissing)}queryFilter.addFilters(filter)}}});return _context.abrupt("return",{columns:columns,rows:rows});case 4:case"end":return _context.stop()}}},_callee)}));return _buildTabularInspectorData.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchSourceProvider=SearchSourceProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _angular=_interopRequireDefault(__webpack_require__(17));var _esQuery=__webpack_require__(20);var _promises=__webpack_require__(57);var _normalize_sort_request=__webpack_require__(1176);var _request=__webpack_require__(609);var _search_request_queue=__webpack_require__(122);var _fetch=__webpack_require__(419);var _field_wildcard=__webpack_require__(614);var _highlight=__webpack_require__(1198);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FIELDS=["type","query","filter","sort","highlight","highlightAll","aggs","from","searchAfter","size","source","version","fields","index"];function parseInitialFields(initialFields){if(!initialFields){return{}}return typeof initialFields==="string"?JSON.parse(initialFields):_lodash.default.cloneDeep(initialFields)}function isIndexPattern(val){return Boolean(val&&typeof val.getIndex==="function")}function SearchSourceProvider(Promise,Private,config){var SearchRequest=Private(_request.SearchRequestProvider);var normalizeSortRequest=Private(_normalize_sort_request.NormalizeSortRequestProvider);var fetchSoon=Private(_fetch.FetchSoonProvider);var _Private=Private(_field_wildcard.FieldWildcardProvider),fieldWildcardFilter=_Private.fieldWildcardFilter;var getConfig=function getConfig(){return config.get.apply(config,arguments)};var forIp=Symbol("for which index pattern?");var SearchSource=function(){function SearchSource(initialFields){var _this=this;_classCallCheck(this,SearchSource);_defineProperty(this,"setField",function(field,value){if(!FIELDS.includes(field)){throw new Error("Can't set field '".concat(field,"' on SearchSource. Acceptable fields are: ").concat(FIELDS.join(", "),"."))}if(field==="index"){var fields=_this._fields;var hasSource=fields.source;var sourceCameFromIp=hasSource&&fields.source.hasOwnProperty(forIp);var sourceIsForOurIp=sourceCameFromIp&&fields.source[forIp]===fields.index;if(sourceIsForOurIp){delete fields.source}if(value===null||value===undefined){delete fields.index;return _this}if(!isIndexPattern(value)){throw new TypeError("expected indexPattern to be an IndexPattern duck.")}fields[field]=value;if(!fields.source){fields.source=function(){return value.getSourceFiltering()};fields.source[forIp]=value}return _this}if(value==null){delete _this._fields[field];return _this}_this._fields[field]=value;return _this});_defineProperty(this,"getField",function(field){if(!FIELDS.includes(field)){throw new Error("Can't get field '".concat(field,"' from SearchSource. Acceptable fields are: ").concat(FIELDS.join(", "),"."))}var searchSource=_this;while(searchSource){var value=searchSource._fields[field];if(value!==void 0){return value}searchSource=searchSource.getParent()}});this._id=_lodash.default.uniqueId("data_source");this._searchStrategyId=undefined;this._fields=parseInitialFields(initialFields);this._parent=undefined;this.history=[];this._requestStartHandlers=[];this._inheritOptions={};this._filterPredicates=[function(filter){return filter},function(filter){var disabled=_lodash.default.get(filter,"meta.disabled");return disabled===undefined||disabled===false},function(filter,data){var index=data.index||_this.getField("index");return!config.get("courier:ignoreFilterIfFieldNotInIndex")||(0,_esQuery.filterMatchesIndex)(filter,index)}]}_createClass(SearchSource,[{key:"setPreferredSearchStrategyId",value:function setPreferredSearchStrategyId(searchStrategyId){this._searchStrategyId=searchStrategyId}},{key:"getPreferredSearchStrategyId",value:function getPreferredSearchStrategyId(){return this._searchStrategyId}},{key:"setFields",value:function setFields(newFields){this._fields=newFields;return this}},{key:"getId",value:function getId(){return this._id}},{key:"getFields",value:function getFields(){return _lodash.default.clone(this._fields)}},{key:"getOwnField",value:function getOwnField(field){if(!FIELDS.includes(field)){throw new Error("Can't get field '".concat(field,"' from SearchSource. Acceptable fields are: ").concat(FIELDS.join(", "),"."))}var value=this._fields[field];if(value!==void 0){return value}}},{key:"create",value:function create(){return new SearchSource}},{key:"createCopy",value:function createCopy(){var json=_angular.default.toJson(this._fields);var newSearchSource=new SearchSource(json);newSearchSource.setField("index",this.getField("index"));newSearchSource.setParent(this.getParent());return newSearchSource}},{key:"createChild",value:function createChild(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var childSearchSource=new SearchSource;childSearchSource.setParent(this,options);return childSearchSource}},{key:"setParent",value:function setParent(parent){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._parent=parent;this._inheritOptions=options;return this}},{key:"getParent",value:function getParent(){return this._parent||undefined}},{key:"fetch",value:function fetch(){var self=this;var req=_lodash.default.first(self._myStartableQueued());if(!req){var errorHandler=function errorHandler(request,error){request.defer.reject(error);request.abort()};req=self._createRequest({errorHandler:errorHandler})}fetchSoon.fetchSearchRequests([req]);return req.getCompletePromise()}},{key:"fetchQueued",value:function fetchQueued(){return fetchSoon.fetchSearchRequests(this._myStartableQueued())}},{key:"cancelQueued",value:function cancelQueued(){var _this2=this;_search_request_queue.searchRequestQueue.getAll().filter(function(req){return req.source===_this2}).forEach(function(req){return req.abort()})}},{key:"onRequestStart",value:function onRequestStart(handler){this._requestStartHandlers.push(handler)}},{key:"requestIsStarting",value:function requestIsStarting(request){var _this3=this;this.activeFetchCount=(this.activeFetchCount||0)+1;this.history=[request];var handlers=_toConsumableArray(this._requestStartHandlers);if(this._inheritOptions.callParentStartHandlers){var searchSource=this.getParent();while(searchSource){handlers.push.apply(handlers,_toConsumableArray(searchSource._requestStartHandlers));searchSource=searchSource.getParent()}}return Promise.map(handlers,function(fn){return fn(_this3,request)}).then(_lodash.default.noop)}},{key:"onResults",value:function onResults(){var self=this;return new Promise(function(resolve,reject){var defer=(0,_promises.createDefer)(Promise);defer.promise.then(resolve,reject);var errorHandler=function errorHandler(request,error){reject(error);request.abort()};self._createRequest({defer:defer,errorHandler:errorHandler})})}},{key:"getSearchRequestBody",value:function(){var _getSearchRequestBody=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var searchRequest;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this._flatten();case 2:searchRequest=_context.sent;return _context.abrupt("return",searchRequest.body);case 4:case"end":return _context.stop()}}},_callee,this)}));function getSearchRequestBody(){return _getSearchRequestBody.apply(this,arguments)}return getSearchRequestBody}()},{key:"requestIsStopped",value:function requestIsStopped(){this.activeFetchCount-=1}},{key:"destroy",value:function destroy(){this.cancelQueued();this._requestStartHandlers.length=0}},{key:"_myStartableQueued",value:function _myStartableQueued(){var _this4=this;return _search_request_queue.searchRequestQueue.getStartable().filter(function(req){return req.source===_this4})}},{key:"_createRequest",value:function _createRequest(_ref){var defer=_ref.defer,errorHandler=_ref.errorHandler;return new SearchRequest({source:this,defer:defer,errorHandler:errorHandler})}},{key:"_mergeProp",value:function _mergeProp(data,val,key){var _this5=this;if(typeof val==="function"){var source=this;return Promise.cast(val(this)).then(function(newVal){return source._mergeProp(data,newVal,key)})}if(val==null||!key||!_lodash.default.isString(key))return;switch(key){case"filter":var filters=Array.isArray(val)?val:[val];filters=filters.filter(function(filter){return _this5._filterPredicates.every(function(predicate){return predicate(filter,data)})});data.filters=[].concat(_toConsumableArray(data.filters||[]),_toConsumableArray(filters));return;case"index":case"type":case"id":case"highlightAll":if(key&&data[key]==null){data[key]=val}return;case"searchAfter":key="search_after";addToBody();break;case"source":key="_source";addToBody();break;case"sort":val=normalizeSortRequest(val,this.getField("index"));addToBody();break;case"query":data.query=(data.query||[]).concat(val);break;case"fields":data[key]=_lodash.default.uniq([].concat(_toConsumableArray(data[key]||[]),_toConsumableArray(val)));break;default:addToBody()}function addToBody(){data.body=data.body||{};if(data.body[key]==null){data.body[key]=val}}}},{key:"_flatten",value:function _flatten(){var flatData={};var root=this;var current=this;return function ittr(){return Promise.all(_lodash.default.map(current._fields,function ittr(value,key){if(Promise.is(value)){return value.then(function(value){return ittr(value,key)})}var prom=root._mergeProp(flatData,value,key);return Promise.is(prom)?prom:null})).then(function(){var parent=current.getParent();if(parent){current=parent;return ittr()}})}().then(function(){flatData.body=flatData.body||{};var computedFields=flatData.index.getComputedFields();flatData.body.stored_fields=computedFields.storedFields;flatData.body.script_fields=flatData.body.script_fields||{};flatData.body.docvalue_fields=flatData.body.docvalue_fields||[];_lodash.default.extend(flatData.body.script_fields,computedFields.scriptFields);flatData.body.docvalue_fields=_lodash.default.union(flatData.body.docvalue_fields,computedFields.docvalueFields);if(flatData.body._source){var filter=fieldWildcardFilter(flatData.body._source.excludes);flatData.body.docvalue_fields=flatData.body.docvalue_fields.filter(function(docvalueField){return filter(docvalueField.field)})}var fields=flatData.fields;if(fields){flatData.body.docvalue_fields=_lodash.default.intersection(flatData.body.docvalue_fields,fields);flatData.body.script_fields=_lodash.default.pick(flatData.body.script_fields,fields);var remainingFields=_lodash.default.difference(fields,_lodash.default.keys(flatData.body.script_fields));flatData.body.stored_fields=remainingFields;_lodash.default.set(flatData.body,"_source.includes",remainingFields)}var esQueryConfigs=(0,_esQuery.getEsQueryConfig)(config);flatData.body.query=(0,_esQuery.buildEsQuery)(flatData.index,flatData.query,flatData.filters,esQueryConfigs);if(flatData.highlightAll!=null){if(flatData.highlightAll&&flatData.body.query){flatData.body.highlight=(0,_highlight.getHighlightRequest)(flatData.body.query,getConfig)}delete flatData.highlightAll}var translateToQuery=function translateToQuery(filter){if(!filter)return;if(filter.query){return filter.query}return filter};(function recurse(aggBranch){if(!aggBranch)return;Object.keys(aggBranch).forEach(function(id){var agg=aggBranch[id];if(agg.filters){var filters=agg.filters.filters;Object.keys(filters).forEach(function(filterId){filters[filterId]=translateToQuery(filters[filterId])})}recurse(agg.aggs||agg.aggregations)})})(flatData.body.aggs||flatData.body.aggregations);return flatData})}}]);return SearchSource}();return SearchSource}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NormalizeSortRequestProvider=NormalizeSortRequestProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NormalizeSortRequestProvider(config){var defaultSortOptions=config.get("sort:options");return function(sortObject,indexPattern){return[].concat(sortObject).map(function(sortable){return normalize(sortable,indexPattern)})};function normalize(sortable,indexPattern){var normalized={};var sortField=_lodash.default.keys(sortable)[0];var sortValue=sortable[sortField];var indexField=indexPattern.fields.byName[sortField];if(indexField&&indexField.scripted&&indexField.sortable){var direction;if(_lodash.default.isString(sortValue))direction=sortValue;if(_lodash.default.isObject(sortValue)&&sortValue.order)direction=sortValue.order;sortField="_script";sortValue={script:{source:indexField.script,lang:indexField.lang},type:castSortType(indexField.type),order:direction}}else{if(_lodash.default.isString(sortValue)){sortValue={order:sortValue}}sortValue=_lodash.default.defaults({},sortValue,defaultSortOptions);if(sortField==="_score"){delete sortValue.unmapped_type}}normalized[sortField]=sortValue;return normalized}}function castSortType(type){var typeCastings={number:"number",string:"string",date:"number",boolean:"string"};var castedType=typeCastings[type];if(!castedType){throw new Error("Unsupported script sort type: ".concat(type))}return castedType}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchRequestProvider",{enumerable:true,get:function get(){return _search_request.SearchRequestProvider}});var _search_request=__webpack_require__(1178)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchRequestProvider=SearchRequestProvider;var _moment=_interopRequireDefault(__webpack_require__(14));var _search_request_queue=__webpack_require__(122);var _promises=__webpack_require__(57);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function SearchRequestProvider(Promise){var SearchRequest=function(){function SearchRequest(_ref){var _this=this;var _source=_ref.source,_defer=_ref.defer,_errorHandler=_ref.errorHandler;_classCallCheck(this,SearchRequest);_defineProperty(this,"clone",function(){var source=_this.source,defer=_this.defer,errorHandler=_this.errorHandler;return new SearchRequest({source:source,defer:defer,errorHandler:errorHandler})});if(!_errorHandler){throw new Error(_i18n.i18n.translate("common.ui.courier.fetch.requireErrorHandlerErrorMessage",{defaultMessage:"{errorHandler} is required",values:{errorHandler:"errorHandler"}}))}this.errorHandler=_errorHandler;this.source=_source;this.defer=_defer||(0,_promises.createDefer)(Promise);this.abortedDefer=(0,_promises.createDefer)(Promise);this.type="search";this.moment=undefined;this.ms=undefined;this.started=false;this.stopped=false;this._isFetchRequested=false;_search_request_queue.searchRequestQueue.add(this)}_createClass(SearchRequest,[{key:"canStart",value:function canStart(){if(this.source._fetchDisabled){return false}if(this.stopped){return false}if(this._isFetchRequested){return false}return true}},{key:"isFetchRequestedAndPending",value:function isFetchRequestedAndPending(){if(this.started){return false}return this._isFetchRequested}},{key:"_setFetchRequested",value:function _setFetchRequested(){this._isFetchRequested=true}},{key:"start",value:function start(){if(this.started){throw new TypeError(_i18n.i18n.translate("common.ui.courier.fetch.unableStartRequestErrorMessage",{defaultMessage:"Unable to start request because it has already started"}))}this.started=true;this.moment=(0,_moment.default)();return this.source.requestIsStarting(this)}},{key:"getFetchParams",value:function getFetchParams(){return this.source._flatten()}},{key:"filterError",value:function filterError(){return false}},{key:"handleResponse",value:function handleResponse(resp){this.success=true;this.resp=resp}},{key:"handleFailure",value:function handleFailure(error){this.success=false;this.resp=error;this.resp=error&&error.resp||error;return this.errorHandler(this,error)}},{key:"isIncomplete",value:function isIncomplete(){return false}},{key:"continue",value:function _continue(){throw new Error(_i18n.i18n.translate("common.ui.courier.fetch.unableContinueRequestErrorMessage",{defaultMessage:"Unable to continue {type} request",values:{type:this.type}}))}},{key:"retry",value:function retry(){var clone=this.clone();this.abort();return clone}},{key:"_markStopped",value:function _markStopped(){if(this.stopped)return;this.stopped=true;this.source.requestIsStopped(this);_search_request_queue.searchRequestQueue.remove(this)}},{key:"abort",value:function abort(){this._markStopped();this.aborted=true;var error=new Error("The request was aborted.");error.name="AbortError";this.abortedDefer.resolve(error);this.abortedDefer=null;this.defer.reject(error);this.defer=null}},{key:"whenAborted",value:function whenAborted(cb){this.abortedDefer.promise.then(cb)}},{key:"complete",value:function complete(){this._markStopped();this.ms=this.moment.diff()*-1;this.defer.resolve(this.resp)}},{key:"getCompletePromise",value:function getCompletePromise(){return this.defer.promise}},{key:"getCompleteOrAbortedPromise",value:function getCompleteOrAbortedPromise(){return Promise.race([this.defer.promise,this.abortedDefer.promise])}}]);return SearchRequest}();return SearchRequest}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.searchRequestQueue=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SearchRequestQueue=function(){function SearchRequestQueue(){_classCallCheck(this,SearchRequestQueue);this._searchRequests=[]}_createClass(SearchRequestQueue,[{key:"getCount",value:function getCount(){return this._searchRequests.length}},{key:"add",value:function add(searchRequest){this._searchRequests.push(searchRequest)}},{key:"remove",value:function remove(searchRequest){this._searchRequests=this._searchRequests.filter(function(existingSearchRequest){return existingSearchRequest!==searchRequest})}},{key:"removeAll",value:function removeAll(){this._searchRequests.length=0}},{key:"abortAll",value:function abortAll(){this._searchRequests.forEach(function(searchRequest){return searchRequest.abort()})}},{key:"getAll",value:function getAll(){return this._searchRequests}},{key:"getSearchRequestAt",value:function getSearchRequestAt(index){return this._searchRequests[index]}},{key:"getInactive",value:function getInactive(){return this._searchRequests.filter(function(searchRequest){return!searchRequest.started})}},{key:"getStartable",value:function getStartable(){return this._searchRequests.filter(function(searchRequest){return searchRequest.canStart()})}},{key:"getPending",value:function getPending(){return this._searchRequests.filter(function(searchRequest){return searchRequest.isFetchRequestedAndPending()})}}]);return SearchRequestQueue}();var searchRequestQueue=new SearchRequestQueue;exports.searchRequestQueue=searchRequestQueue},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FetchSoonProvider=FetchSoonProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _search_request_queue=__webpack_require__(122);var _fetch_now=__webpack_require__(1181);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FetchSoonProvider(Private,Promise,config){var _this=this;var fetchNow=Private(_fetch_now.FetchNowProvider);var fetch=function fetch(){return fetchNow(_search_request_queue.searchRequestQueue.getPending())};var debouncedFetch=_lodash.default.debounce(fetch,{wait:10,maxWait:50});this.fetchSearchRequests=function(requests){requests.forEach(function(req){return req._setFetchRequested()});config.get("courier:batchSearches")?debouncedFetch():fetch();return Promise.all(requests.map(function(req){return req.getCompletePromise()}))};this.fetchQueued=function(){return _this.fetchSearchRequests(_search_request_queue.searchRequestQueue.getStartable())}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FetchNowProvider=FetchNowProvider;var _notify=__webpack_require__(9);var _call_client=__webpack_require__(1182);var _call_response_handlers=__webpack_require__(1191);var _continue_incomplete=__webpack_require__(1196);var _req_status=__webpack_require__(357);var _i18n=__webpack_require__(2);function FetchNowProvider(Private,Promise){var callClient=Private(_call_client.CallClientProvider);var callResponseHandlers=Private(_call_response_handlers.CallResponseHandlersProvider);var continueIncomplete=Private(_continue_incomplete.ContinueIncompleteProvider);var ABORTED=_req_status.RequestStatus.ABORTED;var INCOMPLETE=_req_status.RequestStatus.INCOMPLETE;function fetchNow(searchRequests){return fetchSearchResults(searchRequests.map(function(searchRequest){if(!searchRequest.started){return searchRequest}return searchRequest.retry()})).catch(function(error){(0,_notify.fatalError)(error,"Courier fetch")})}function fetchSearchResults(searchRequests){function replaceAbortedRequests(){searchRequests=searchRequests.map(function(searchRequest){if(searchRequest.aborted){return ABORTED}return searchRequest})}replaceAbortedRequests();return startRequests(searchRequests).then(function(){replaceAbortedRequests();return callClient(searchRequests).catch(function(){})}).then(function(responses){replaceAbortedRequests();return callResponseHandlers(searchRequests,responses)}).then(function(responses){replaceAbortedRequests();return continueIncomplete(searchRequests,responses,fetchSearchResults)}).then(function(responses){replaceAbortedRequests();return responses.map(function(resp){switch(resp){case ABORTED:return null;case INCOMPLETE:throw new Error(_i18n.i18n.translate("common.ui.courier.fetch.failedToClearRequestErrorMessage",{defaultMessage:"Failed to clear incomplete or duplicate request from responses."}));default:return resp}})})}function startRequests(searchRequests){return Promise.map(searchRequests,function(searchRequest){if(searchRequest===ABORTED){return searchRequest}return new Promise(function(resolve){var action=searchRequest.started?searchRequest.continue:searchRequest.start;resolve(action.call(searchRequest))}).catch(function(err){return searchRequest.handleFailure(err)})})}return fetchNow}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallClientProvider=CallClientProvider;var _error_allow_explicit_index=__webpack_require__(1183);var _search_strategy=__webpack_require__(610);var _is_request=__webpack_require__(1187);var _req_status=__webpack_require__(357);var _serialize_fetch_params=__webpack_require__(1188);var _i18n=__webpack_require__(2);var _promises=__webpack_require__(57);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function CallClientProvider(Private,Promise,es,config,sessionId,esShardTimeout){var errorAllowExplicitIndex=Private(_error_allow_explicit_index.ErrorAllowExplicitIndexProvider);var isRequest=Private(_is_request.IsRequestProvider);var serializeFetchParams=Private(_serialize_fetch_params.SerializeFetchParamsProvider);var ABORTED=_req_status.RequestStatus.ABORTED;function callClient(searchRequests){var requestsToFetch=searchRequests.filter(isRequest);var requestsToFetchCount=requestsToFetch.length;if(requestsToFetchCount===0){return Promise.resolve([])}var defer=(0,_promises.createDefer)(Promise);var abortableSearches=[];var areAllSearchRequestsAborted=false;var activeSearchRequests=[];var respondToSearchRequests=function respondToSearchRequests(){var responsesInOriginalRequestOrder=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return Promise.map(searchRequests,function(searchRequest,searchRequestIndex){if(searchRequest.aborted){return ABORTED}var status=searchRequests[searchRequestIndex];if(status===ABORTED){return ABORTED}var activeSearchRequestIndex=activeSearchRequests.indexOf(searchRequest);var isFailedSearchRequest=activeSearchRequestIndex===-1;if(isFailedSearchRequest){return ABORTED}return responsesInOriginalRequestOrder[searchRequestIndex]}).then(function(res){return defer.resolve(res)},function(err){return defer.reject(err)})};var requestWasAborted=Promise.method(function(searchRequest,index){if(searchRequests[index]===ABORTED){defer.reject(new Error(_i18n.i18n.translate("common.ui.courier.fetch.requestWasAbortedTwiceErrorMessage",{defaultMessage:"Request was aborted twice?"})))}requestsToFetchCount--;if(requestsToFetchCount!==0){return}abortableSearches.forEach(function(_ref){var abort=_ref.abort;abort()});areAllSearchRequestsAborted=true;return respondToSearchRequests()});searchRequests.forEach(function(searchRequest,index){if(!isRequest(searchRequest)){return}searchRequest.whenAborted(function(){requestWasAborted(searchRequest,index).catch(defer.reject)})});var searchStrategiesWithRequests=(0,_search_strategy.assignSearchRequestsToSearchStrategies)(requestsToFetch);Promise.resolve().then(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _loop,i,segregatedResponses,responsesInOriginalRequestOrder;return regeneratorRuntime.wrap(function _callee2$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_loop=regeneratorRuntime.mark(function _loop(i){var searchStrategyWithSearchRequests,searchStrategy,searchRequests,_ref5,searching,abort,failedSearchRequests;return regeneratorRuntime.wrap(function _loop$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:searchStrategyWithSearchRequests=searchStrategiesWithRequests[i];searchStrategy=searchStrategyWithSearchRequests.searchStrategy,searchRequests=searchStrategyWithSearchRequests.searchRequests;_context2.next=4;return searchStrategy.search({searchRequests:searchRequests,es:es,Promise:Promise,serializeFetchParams:serializeFetchParams,config:config,sessionId:sessionId,esShardTimeout:esShardTimeout});case 4:_ref5=_context2.sent;searching=_ref5.searching;abort=_ref5.abort;failedSearchRequests=_ref5.failedSearchRequests;searchRequests.forEach(function(searchRequest){if(failedSearchRequests.includes(searchRequest)){return}activeSearchRequests.push(searchRequest)});abortableSearches.push({searching:searching,abort:abort,requestsCount:searchRequests.length});case 10:case"end":return _context2.stop()}}},_loop)});i=0;case 2:if(!(i<searchStrategiesWithRequests.length)){_context3.next=7;break}return _context3.delegateYield(_loop(i),"t0",4);case 4:i++;_context3.next=2;break;case 7:_context3.prev=7;if(!areAllSearchRequestsAborted){_context3.next=10;break}return _context3.abrupt("return");case 10:_context3.next=12;return Promise.all(abortableSearches.map(function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref3){var searching,requestsCount;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searching=_ref3.searching,requestsCount=_ref3.requestsCount;return _context.abrupt("return",searching.catch(function(e){return new Array(requestsCount).fill({error:e})}));case 2:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref4.apply(this,arguments)}}()));case 12:segregatedResponses=_context3.sent;responsesInOriginalRequestOrder=new Array(searchRequests.length);segregatedResponses.forEach(function(responses,strategyIndex){responses.forEach(function(response,responseIndex){var searchRequest=searchStrategiesWithRequests[strategyIndex].searchRequests[responseIndex];var requestIndex=searchRequests.indexOf(searchRequest);responsesInOriginalRequestOrder[requestIndex]=response})});_context3.next=17;return respondToSearchRequests(responsesInOriginalRequestOrder);case 17:_context3.next=24;break;case 19:_context3.prev=19;_context3.t1=_context3["catch"](7);if(!errorAllowExplicitIndex.test(_context3.t1)){_context3.next=23;break}return _context3.abrupt("return",errorAllowExplicitIndex.takeover());case 23:defer.reject(_context3.t1);case 24:case"end":return _context3.stop()}}},_callee2,null,[[7,19]])})));return defer.promise.catch(function(err){searchRequests.forEach(function(searchRequest,index){if(searchRequests[index]!==ABORTED){searchRequest.handleFailure(err)}})})}return callClient}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ErrorAllowExplicitIndexProvider",{enumerable:true,get:function get(){return _error_allow_explicit_index.ErrorAllowExplicitIndexProvider}});var _error_allow_explicit_index=__webpack_require__(1184)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorAllowExplicitIndexProvider=ErrorAllowExplicitIndexProvider;var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);var _routes=_interopRequireDefault(__webpack_require__(19));var _url=__webpack_require__(98);var _error_allow_explicit_index=_interopRequireDefault(__webpack_require__(1185));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}_routes.default.when("/error/multi.allow_explicit_index",{template:_error_allow_explicit_index.default,k7Breadcrumbs:function k7Breadcrumbs(){return[{text:_i18n.i18n.translate("common.ui.errorAllowExplicitIndex.breadcrumbs.errorText",{defaultMessage:"Error"})}]}});function ErrorAllowExplicitIndexProvider(Private,Promise){var kbnUrl=Private(_url.KbnUrlProvider);return new(function(){function ErrorAllowExplicitIndex(){_classCallCheck(this,ErrorAllowExplicitIndex)}_createClass(ErrorAllowExplicitIndex,[{key:"test",value:function test(error){if(!error||error.status!==400){return false}var type=(0,_lodash.get)(error,"body.error.type");var reason=(0,_lodash.get)(error,"body.error.reason");return type==="illegal_argument_exception"&&String(reason).includes("explicit index")}},{key:"takeover",value:function takeover(){kbnUrl.change("/error/multi.allow_explicit_index");return Promise.halt()}}]);return ErrorAllowExplicitIndex}())}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="app-container kbnError--multi-allow-explicit-index euiText">\n  <h3>\n    <icon aria-hidden="true" type="\'alert\'" color="\'danger\'"></icon>\n    <span\n      i18n-id="common.ui.errorAllowExplicitIndex.errorTitle"\n      i18n-default-message="Oh no!">\n    </span>\n  </h3>\n\n  <p\n    i18n-id="common.ui.errorAllowExplicitIndex.errorDescription"\n    i18n-default-message="It looks like your Elasticsearch cluster has the\n    {allowExplicitIndexConfig} setting set to {allowExplicitIndexValue}, which\n    prevents Kibana from making search requests. We use this ability to send a single request to\n    Elasticsearch that searches multiple indexes so that when there are many panels on a dashboard\n    they will load quickly and uniformly."\n    i18n-values="{\n      html_allowExplicitIndexConfig: \'<code>rest.action.multi.allow_explicit_index</code>\',\n      html_allowExplicitIndexValue: \'<code>false</code>\'\n    }"\n  ></p>\n\n  <p\n    i18n-id="common.ui.errorAllowExplicitIndex.errorDisclaimer"\n    i18n-default-message="Unfortunately, until this issue is fixed you won\'t be able to use certain apps in Kibana, like\n    Discover, Visualize and Dashboard."\n  ></p>\n\n  <h3\n    i18n-id="common.ui.errorAllowExplicitIndex.howToFixErrorTitle"\n    i18n-default-message="Ok, how do I fix this?"\n  ></h3>\n  <ol>\n    <li\n      i18n-id="common.ui.errorAllowExplicitIndex.howToFix.removeConfigItemText"\n      i18n-default-message="Remove {allowExplicitIndexConfig} from your Elasticsearch config file."\n      i18n-values="{ html_allowExplicitIndexConfig: \'<code>rest.action.multi.allow_explicit_index: false</code>\' }"\n    ></li>\n    <li\n      i18n-id="common.ui.errorAllowExplicitIndex.howToFix.restartText"\n      i18n-default-message="Restart Elasticsearch."\n    ></li>\n    <li\n      i18n-id="common.ui.errorAllowExplicitIndex.howToFix.goBackText"\n      i18n-default-message="Use the browser\'s back button to return to what you were doing."\n    ></li>\n  </ol>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noOpSearchStrategy=void 0;var _search_error=__webpack_require__(356);var _i18n=__webpack_require__(2);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var noOpSearchStrategy={id:"noOp",search:function(){var _search=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var searchError;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchError=new _search_error.SearchError({status:"418",title:_i18n.i18n.translate("common.ui.courier.noSearchStrategyRegisteredErrorMessageTitle",{defaultMessage:"No search strategy registered"}),message:_i18n.i18n.translate("common.ui.courier.noSearchStrategyRegisteredErrorMessageDescription",{defaultMessage:"Couldn't find a search strategy for the search request"}),type:"NO_OP_SEARCH_STRATEGY",path:""});return _context.abrupt("return",{searching:Promise.reject(searchError),abort:function abort(){},failedSearchRequests:[]});case 2:case"end":return _context.stop()}}},_callee)}));function search(){return _search.apply(this,arguments)}return search}(),isViable:function isViable(){return true}};exports.noOpSearchStrategy=noOpSearchStrategy},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IsRequestProvider=IsRequestProvider;var _request=__webpack_require__(609);function IsRequestProvider(Private){var SearchRequest=Private(_request.SearchRequestProvider);return function isRequest(obj){return obj instanceof SearchRequest}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SerializeFetchParamsProvider",{enumerable:true,get:function get(){return _serialize_fetch_params_provider.SerializeFetchParamsProvider}});var _serialize_fetch_params_provider=__webpack_require__(1189)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SerializeFetchParamsProvider=SerializeFetchParamsProvider;var _serialize_fetch_params=__webpack_require__(1190);function SerializeFetchParamsProvider(Promise,sessionId,config,esShardTimeout){return function(fetchParams){return(0,_serialize_fetch_params.serializeFetchParams)(fetchParams,Promise,sessionId,config,esShardTimeout)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serializeFetchParams=serializeFetchParams;var _get_search_params=__webpack_require__(420);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function serializeFetchParams(requestsFetchParams,Promise,sessionId,config,esShardTimeout){var promises=requestsFetchParams.map(function(fetchParams){return Promise.resolve(fetchParams.index).then(function(indexPattern){var body=_objectSpread({timeout:(0,_get_search_params.getTimeout)(esShardTimeout)},fetchParams.body||{});var index=indexPattern&&indexPattern.getIndex?indexPattern.getIndex():indexPattern;var header={index:index,search_type:fetchParams.search_type,ignore_unavailable:true,preference:(0,_get_search_params.getPreference)(config,sessionId)};return"".concat(JSON.stringify(header),"\n").concat(JSON.stringify(body))})});return Promise.all(promises).then(function(requests){return requests.join("\n")+"\n"})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallResponseHandlersProvider=CallResponseHandlersProvider;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(3);var _notify=__webpack_require__(9);var _errors=__webpack_require__(25);var _req_status=__webpack_require__(357);var _search_error=__webpack_require__(356);var _shard_failure_open_modal_button=__webpack_require__(1192);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function CallResponseHandlersProvider(Promise){var ABORTED=_req_status.RequestStatus.ABORTED;var INCOMPLETE=_req_status.RequestStatus.INCOMPLETE;function callResponseHandlers(searchRequests,responses){return Promise.map(searchRequests,function(searchRequest,index){if(searchRequest===ABORTED||searchRequest.aborted){return ABORTED}var response=responses[index];if(response.timed_out){_notify.toastNotifications.addWarning({title:_i18n.i18n.translate("common.ui.courier.fetch.requestTimedOutNotificationMessage",{defaultMessage:"Data might be incomplete because your request timed out"})})}if(response._shards&&response._shards.failed){var title=_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedNotificationMessage",{defaultMessage:"{shardsFailed} of {shardsTotal} shards failed",values:{shardsFailed:response._shards.failed,shardsTotal:response._shards.total}});var description=_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedNotificationDescription",{defaultMessage:"The data you are seeing might be incomplete or wrong."});var text=_react.default.createElement(_react.default.Fragment,null,description,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_shard_failure_open_modal_button.ShardFailureOpenModalButton,{request:searchRequest.fetchParams.body,response:response,title:title}));_notify.toastNotifications.addWarning({title:title,text:text})}function progress(){if(searchRequest.isIncomplete()){return INCOMPLETE}searchRequest.complete();return response}if(response.error){if(searchRequest.filterError(response)){return progress()}else{return searchRequest.handleFailure(response.error instanceof _search_error.SearchError?response.error:new _errors.RequestFailure(null,response))}}return Promise.try(function(){return searchRequest.handleResponse(response)}).then(progress)})}return callResponseHandlers}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureOpenModalButton=ShardFailureOpenModalButton;var _react=_interopRequireDefault(__webpack_require__(0));var _new_platform=__webpack_require__(8);var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);var _shard_failure_modal=__webpack_require__(1193);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ShardFailureOpenModalButton(_ref){var request=_ref.request,response=_ref.response,title=_ref.title;function onClick(){var modal=_new_platform.npStart.core.overlays.openModal(_react.default.createElement(_shard_failure_modal.ShardFailureModal,{request:request,response:response,title:title,onClose:function onClose(){return modal.close()}}),{className:"shardFailureModal"})}return _react.default.createElement(_eui.EuiTextAlign,{textAlign:"right"},_react.default.createElement(_eui.EuiButton,{color:"warning",size:"s",onClick:onClick,"data-test-subj":"openShardFailureModalBtn"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.courier.fetch.shardsFailedModal.showDetails",defaultMessage:"Show details",description:"Open the modal to show details"})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureModal=ShardFailureModal;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(5);var _i18n=__webpack_require__(2);var _eui=__webpack_require__(3);var _shard_failure_table=__webpack_require__(1194);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ShardFailureModal(_ref){var request=_ref.request,response=_ref.response,title=_ref.title,onClose=_ref.onClose;if(!response||!response._shards||!Array.isArray(response._shards.failures)||!request){return _react.default.createElement(_eui.EuiCallOut,{title:"Sorry, there was an error",color:"danger",iconType:"alert"},"The ShardFailureModal component received invalid properties")}var requestJSON=JSON.stringify(request,null,2);var responseJSON=JSON.stringify(response,null,2);var failures=response._shards.failures;var tabs=[{id:"table",name:_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedModal.tabHeaderShardFailures",{defaultMessage:"Shard failures",description:"Name of the tab displaying shard failures"}),content:_react.default.createElement(_shard_failure_table.ShardFailureTable,{failures:failures})},{id:"json-request",name:_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedModal.tabHeaderRequest",{defaultMessage:"Request",description:"Name of the tab displaying the JSON request"}),content:_react.default.createElement(_eui.EuiCodeBlock,{language:"json",isCopyable:true},requestJSON)},{id:"json-response",name:_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedModal.tabHeaderResponse",{defaultMessage:"Response",description:"Name of the tab displaying the JSON response"}),content:_react.default.createElement(_eui.EuiCodeBlock,{language:"json",isCopyable:true},responseJSON)}];return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,title)),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0],autoFocus:"selected"})),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiCopy,{textToCopy:responseJSON},function(copy){return _react.default.createElement(_eui.EuiButtonEmpty,{onClick:copy},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.courier.fetch.shardsFailedModal.copyToClipboard",defaultMessage:"Copy response to clipboard"}))}),_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onClose()},fill:true,"data-test-sub":"closeShardFailureModal"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.courier.fetch.shardsFailedModal.close",defaultMessage:"Close",description:"Closing the Modal"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureTable=ShardFailureTable;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _services=__webpack_require__(113);var _i18n=__webpack_require__(2);var _shard_failure_description=__webpack_require__(1195);var _shard_failure_description_header=__webpack_require__(613);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ShardFailureTable(_ref){var failures=_ref.failures;var itemList=failures.map(function(failure,idx){return _objectSpread({},{id:String(idx)},{},failure)});var initalMap={};var _useState=(0,_react.useState)(initalMap),_useState2=_slicedToArray(_useState,2),expandMap=_useState2[0],setExpandMap=_useState2[1];var columns=[{align:_services.RIGHT_ALIGNMENT,width:"40px",isExpander:true,render:function render(item){var failureSummeryText=(0,_shard_failure_description_header.getFailureSummaryText)(item);var collapseLabel=_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedModal.tableRowCollapse",{defaultMessage:"Collapse {rowDescription}",description:"Collapse a row of a table with failures",values:{rowDescription:failureSummeryText}});var expandLabel=_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedModal.tableRowExpand",{defaultMessage:"Expand {rowDescription}",description:"Expand a row of a table with failures",values:{rowDescription:failureSummeryText}});return _react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){var map=Object.assign({},expandMap);if(map[item.id]){delete map[item.id]}else{map[item.id]=_react.default.createElement(_shard_failure_description.ShardFailureDescription,item)}setExpandMap(map)},"aria-label":expandMap[item.id]?collapseLabel:expandLabel,iconType:expandMap[item.id]?"arrowUp":"arrowDown"})}},{field:"shard",name:_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedModal.tableColShard",{defaultMessage:"Shard"}),sortable:true,truncateText:true,width:"80px"},{field:"index",name:_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedModal.tableColIndex",{defaultMessage:"Index"}),sortable:true,truncateText:true},{field:"node",name:_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedModal.tableColNode",{defaultMessage:"Node"}),sortable:true,truncateText:true},{field:"reason.type",name:_i18n.i18n.translate("common.ui.courier.fetch.shardsFailedModal.tableColReason",{defaultMessage:"Reason"}),truncateText:true}];var sorting={sort:{field:"index",direction:"desc"}};return _react.default.createElement(_eui.EuiInMemoryTable,{itemId:"id",items:itemList,columns:columns,pagination:true,sorting:sorting,itemIdToExpandedRowMap:expandMap})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatKey=formatKey;exports.formatValueByKey=formatValueByKey;exports.ShardFailureDescription=ShardFailureDescription;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _get_flattened_object=__webpack_require__(517);var _shard_failure_description_header=__webpack_require__(613);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function formatKey(key){var nameCapitalized=key.charAt(0).toUpperCase()+key.slice(1);return nameCapitalized.replace(/[\._]/g," ")}function formatValueByKey(value,key){if(key==="script"||key==="script_stack"){var valueScript=Array.isArray(value)?value.join("\n"):String(value);return _react.default.createElement(_eui.EuiCodeBlock,{language:"java",paddingSize:"s",isCopyable:true},valueScript)}else{return String(value)}}function ShardFailureDescription(props){var flattendReason=(0,_get_flattened_object.getFlattenedObject)(props.reason);var listItems=Object.entries(flattendReason).map(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return{title:formatKey(key),description:formatValueByKey(value,key)}});return _react.default.createElement("div",null,_react.default.createElement(_shard_failure_description_header.ShardFailureDescriptionHeader,props),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiDescriptionList,{listItems:listItems,type:"column",compressed:true,className:"shardFailureModal__desc",titleProps:{className:"shardFailureModal__descTitle"},descriptionProps:{className:"shardFailureModal__descValue"}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ContinueIncompleteProvider=ContinueIncompleteProvider;var _req_status=__webpack_require__(357);function ContinueIncompleteProvider(){var INCOMPLETE=_req_status.RequestStatus.INCOMPLETE;function continueIncompleteRequests(searchRequests,responses,fetchSearchResults){var incompleteSearchRequests=[];responses.forEach(function(response,index){if(response===INCOMPLETE){incompleteSearchRequests.push(searchRequests[index])}});if(!incompleteSearchRequests.length){return responses}return fetchSearchResults(incompleteSearchRequests).then(function(completedResponses){return responses.map(function(prevResponse){if(prevResponse!==INCOMPLETE){return prevResponse}return completedResponses.shift()})})}return continueIncompleteRequests}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldWildcardProvider=FieldWildcardProvider;var _lodash=__webpack_require__(1);function FieldWildcardProvider(config){var metaFields=config.get("metaFields");var makeRegEx=(0,_lodash.memoize)(function makeRegEx(glob){return new RegExp("^"+glob.split("*").map(_lodash.escapeRegExp).join(".*")+"$")});function fieldWildcardMatcher(){var globs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return function matcher(val){if(metaFields.indexOf(val)!==-1){return false}return globs.some(function(p){return makeRegEx(p).test(val)})}}function fieldWildcardFilter(){var globs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var matcher=fieldWildcardMatcher(globs);return function filter(val){return!matcher(val)}}return{makeRegEx:makeRegEx,fieldWildcardMatcher:fieldWildcardMatcher,fieldWildcardFilter:fieldWildcardFilter}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getHighlightHtml",{enumerable:true,get:function get(){return _highlight_html.getHighlightHtml}});Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _highlight_request.getHighlightRequest}});var _highlight_html=__webpack_require__(402);var _highlight_request=__webpack_require__(1199)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getHighlightRequest=getHighlightRequest;var _highlight_tags=__webpack_require__(552);var FRAGMENT_SIZE=Math.pow(2,31)-1;function getHighlightRequest(query,getConfig){if(!getConfig("doc_table:highlight"))return;return{pre_tags:[_highlight_tags.highlightTags.pre],post_tags:[_highlight_tags.highlightTags.post],fields:{"*":{}},fragment_size:FRAGMENT_SIZE}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.font=font;var _inlineStyle=_interopRequireDefault(__webpack_require__(1398));var _i18n=__webpack_require__(2);var _fonts=__webpack_require__(615);var _types=__webpack_require__(1202);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function font(){return{name:"font",aliases:[],type:"style",help:_i18n.i18n.translate("interpreter.functions.fontHelpText",{defaultMessage:"Create a font style."}),context:{types:["null"]},args:{align:{default:"left",help:_i18n.i18n.translate("interpreter.functions.font.args.alignHelpText",{defaultMessage:"The horizontal text alignment."}),options:Object.values(_types.TextAlignment),types:["string"]},color:{help:_i18n.i18n.translate("interpreter.functions.font.args.colorHelpText",{defaultMessage:"The text color."}),types:["string"]},family:{default:'"'.concat(_fonts.openSans.value,'"'),help:_i18n.i18n.translate("interpreter.functions.font.args.familyHelpText",{defaultMessage:"An acceptable {css} web font string",values:{css:"CSS"}}),types:["string"]},italic:{default:false,help:_i18n.i18n.translate("interpreter.functions.font.args.italicHelpText",{defaultMessage:"Italicize the text?"}),options:[true,false],types:["boolean"]},lHeight:{aliases:["lineHeight"],help:_i18n.i18n.translate("interpreter.functions.font.args.lHeightHelpText",{defaultMessage:"The line height in pixels"}),types:["number","null"]},size:{default:14,help:_i18n.i18n.translate("interpreter.functions.font.args.sizeHelpText",{defaultMessage:"The font size in pixels"}),types:["number"]},underline:{default:false,help:_i18n.i18n.translate("interpreter.functions.font.args.underlineHelpText",{defaultMessage:"Underline the text?"}),options:[true,false],types:["boolean"]},weight:{default:"normal",help:_i18n.i18n.translate("interpreter.functions.font.args.weightHelpText",{defaultMessage:"The font weight. For example, {list}, or {end}.",values:{list:Object.values(_types.FontWeight).slice(0,-1).map(function(weight){return'`"'.concat(weight,'"`')}).join(", "),end:'`"'.concat(Object.values(_types.FontWeight).slice(-1)[0],'"`')}}),options:Object.values(_types.FontWeight),types:["string"]}},fn:function fn(_context,args){if(!Object.values(_types.FontWeight).includes(args.weight)){throw new Error(_i18n.i18n.translate("interpreter.functions.font.invalidFontWeightErrorMessage",{defaultMessage:"Invalid font weight: '{weight}'",values:{weight:args.weight}}))}if(!Object.values(_types.TextAlignment).includes(args.align)){throw new Error(_i18n.i18n.translate("interpreter.functions.font.invalidTextAlignmentErrorMessage",{defaultMessage:"Invalid text alignment: '{align}'",values:{align:args.align}}))}var lineHeight=args.lHeight!=null?"".concat(args.lHeight,"px"):"1";var spec={fontFamily:args.family,fontWeight:args.weight,fontStyle:args.italic?_types.FontStyle.ITALIC:_types.FontStyle.NORMAL,textDecoration:args.underline?_types.TextDecoration.UNDERLINE:_types.TextDecoration.NONE,textAlign:args.align,fontSize:"".concat(args.size,"px"),lineHeight:lineHeight};if(args.color){spec.color=args.color}return{type:"style",spec:spec,css:(0,_inlineStyle.default)(spec)}}}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(502)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _style=__webpack_require__(1203);Object.keys(_style).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _style[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FontFamily",{enumerable:true,get:function get(){return _fonts.FontLabel}});Object.defineProperty(exports,"FontValue",{enumerable:true,get:function get(){return _fonts.FontValue}});exports.TextDecoration=exports.TextAlignment=exports.Overflow=exports.FontWeight=exports.FontStyle=exports.BackgroundSize=exports.BackgroundRepeat=void 0;var _fonts=__webpack_require__(615);var BackgroundRepeat;exports.BackgroundRepeat=BackgroundRepeat;(function(BackgroundRepeat){BackgroundRepeat["REPEAT"]="repeat";BackgroundRepeat["REPEAT_NO"]="no-repeat";BackgroundRepeat["REPEAT_X"]="repeat-x";BackgroundRepeat["REPEAT_Y"]="repeat-y";BackgroundRepeat["ROUND"]="round";BackgroundRepeat["SPACE"]="space"})(BackgroundRepeat||(exports.BackgroundRepeat=BackgroundRepeat={}));var BackgroundSize;exports.BackgroundSize=BackgroundSize;(function(BackgroundSize){BackgroundSize["AUTO"]="auto";BackgroundSize["CONTAIN"]="contain";BackgroundSize["COVER"]="cover"})(BackgroundSize||(exports.BackgroundSize=BackgroundSize={}));var FontStyle;exports.FontStyle=FontStyle;(function(FontStyle){FontStyle["ITALIC"]="italic";FontStyle["NORMAL"]="normal"})(FontStyle||(exports.FontStyle=FontStyle={}));var FontWeight;exports.FontWeight=FontWeight;(function(FontWeight){FontWeight["NORMAL"]="normal";FontWeight["BOLD"]="bold";FontWeight["BOLDER"]="bolder";FontWeight["LIGHTER"]="lighter";FontWeight["ONE"]="100";FontWeight["TWO"]="200";FontWeight["THREE"]="300";FontWeight["FOUR"]="400";FontWeight["FIVE"]="500";FontWeight["SIX"]="600";FontWeight["SEVEN"]="700";FontWeight["EIGHT"]="800";FontWeight["NINE"]="900"})(FontWeight||(exports.FontWeight=FontWeight={}));var Overflow;exports.Overflow=Overflow;(function(Overflow){Overflow["AUTO"]="auto";Overflow["HIDDEN"]="hidden";Overflow["SCROLL"]="scroll";Overflow["VISIBLE"]="visible"})(Overflow||(exports.Overflow=Overflow={}));var TextAlignment;exports.TextAlignment=TextAlignment;(function(TextAlignment){TextAlignment["CENTER"]="center";TextAlignment["JUSTIFY"]="justify";TextAlignment["LEFT"]="left";TextAlignment["RIGHT"]="right"})(TextAlignment||(exports.TextAlignment=TextAlignment={}));var TextDecoration;exports.TextDecoration=TextDecoration;(function(TextDecoration){TextDecoration["NONE"]="none";TextDecoration["UNDERLINE"]="underline"})(TextDecoration||(exports.TextDecoration=TextDecoration={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kibana=void 0;var _i18n=__webpack_require__(2);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var kibana=function kibana(){return{name:"kibana",type:"kibana_context",context:{},help:_i18n.i18n.translate("interpreter.functions.kibana.help",{defaultMessage:"Gets kibana global context"}),args:{},fn:function fn(context,args,handlers){var initialContext=handlers.getInitialContext?handlers.getInitialContext():{};if(context.query){initialContext.query=initialContext.query.concat(context.query)}if(context.filters){initialContext.filters=initialContext.filters.concat(context.filters)}var timeRange=initialContext.timeRange||context.timeRange;return _objectSpread({},context,{type:"kibana_context",query:initialContext.query,filters:initialContext.filters,timeRange:timeRange})}}};exports.kibana=kibana},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kibanaContext=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var kibanaContext=function kibanaContext(){return{name:"kibana_context",type:"kibana_context",context:{types:["kibana_context","null"]},help:_i18n.i18n.translate("interpreter.functions.kibana_context.help",{defaultMessage:"Updates kibana global context"}),args:{q:{types:["string","null"],aliases:["query","_"],default:null},filters:{types:["string","null"],default:'"[]"'},timeRange:{types:["string","null"],default:null},savedSearchId:{types:["string","null"],default:null}},fn:function(){var _fn=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context,args){var $injector,savedSearches,queryArg,queries,filters,savedSearch,searchQuery,searchFilters,timeRange;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _chrome.default.dangerouslyGetActiveInjector();case 2:$injector=_context.sent;savedSearches=$injector.get("savedSearches");queryArg=args.q?JSON.parse(args.q):[];queries=Array.isArray(queryArg)?queryArg:[queryArg];filters=args.filters?JSON.parse(args.filters):[];if(!args.savedSearchId){_context.next=15;break}_context.next=10;return savedSearches.get(args.savedSearchId);case 10:savedSearch=_context.sent;searchQuery=savedSearch.searchSource.getField("query");searchFilters=savedSearch.searchSource.getField("filter");queries=queries.concat(searchQuery);filters=filters.concat(searchFilters);case 15:if(context.query){queries=queries.concat(context.query)}if(context.filters){filters=filters.concat(context.filters).filter(function(f){return!f.meta.disabled})}timeRange=args.timeRange?JSON.parse(args.timeRange):context.timeRange;return _context.abrupt("return",{type:"kibana_context",query:queries,filters:filters,timeRange:timeRange});case 19:case"end":return _context.stop()}}},_callee)}));function fn(_x,_x2){return _fn.apply(this,arguments)}return fn}()}};exports.kibanaContext=kibanaContext},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.range=void 0;var _i18n=__webpack_require__(2);var name="range";var range=function range(){return{name:name,help:_i18n.i18n.translate("interpreter.function.range.help",{defaultMessage:"Generates range object"}),type:"range",args:{from:{types:["number"],help:_i18n.i18n.translate("interpreter.function.range.from.help",{defaultMessage:"Start of range"}),required:true},to:{types:["number"],help:_i18n.i18n.translate("interpreter.function.range.to.help",{defaultMessage:"End of range"}),required:true}},fn:function fn(context,args){return{type:"range",from:args.from,to:args.to}}}};exports.range=range},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visualization=void 0;var _lodash=__webpack_require__(1);var _i18n=__webpack_require__(2);var _chrome=_interopRequireDefault(__webpack_require__(7));var _vis_request_handlers=__webpack_require__(354);var _vis_response_handlers=__webpack_require__(353);var _vis_types=__webpack_require__(49);var _public=__webpack_require__(24);var _query_filter=__webpack_require__(51);var _persisted_state=__webpack_require__(99);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function getHandler(from,type){if(typeof type==="function"){return type}if(type==="courier"||type==="none"){return null}var handlerDesc=from.find(function(handler){return handler.name===type});if(!handlerDesc){throw new Error('Could not find handler "'.concat(type,'".'))}return handlerDesc.handler}var visualization=function visualization(){return{name:"visualization",type:"render",help:_i18n.i18n.translate("interpreter.functions.visualization.help",{defaultMessage:"A simple visualization"}),args:{index:{types:["string","null"],default:null},metricsAtAllLevels:{types:["boolean"],default:false},partialRows:{types:["boolean"],default:false},type:{types:["string"],default:""},schemas:{types:["string"],default:'"{}"'},visConfig:{types:["string"],default:'"{}"'},uiState:{types:["string"],default:'"{}"'}},fn:function(){var _fn=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context,args,handlers){var $injector,Private,requestHandlers,responseHandlers,visTypes,indexPatterns,queryFilter,visConfigParams,schemas,visType,requestHandler,responseHandler,indexPattern,uiStateParams,uiState;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _chrome.default.dangerouslyGetActiveInjector();case 2:$injector=_context.sent;Private=$injector.get("Private");requestHandlers=Private(_vis_request_handlers.VisRequestHandlersRegistryProvider);responseHandlers=Private(_vis_response_handlers.VisResponseHandlersRegistryProvider);visTypes=Private(_vis_types.VisTypesRegistryProvider);indexPatterns=Private(_public.IndexPatternsProvider);queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);visConfigParams=JSON.parse(args.visConfig);schemas=JSON.parse(args.schemas);visType=visTypes.byName[args.type||"histogram"];requestHandler=getHandler(requestHandlers,visType.requestHandler);responseHandler=getHandler(responseHandlers,visType.responseHandler);if(!args.index){_context.next=20;break}_context.next=17;return indexPatterns.get(args.index);case 17:_context.t0=_context.sent;_context.next=21;break;case 20:_context.t0=null;case 21:indexPattern=_context.t0;uiStateParams=JSON.parse(args.uiState);uiState=new _persisted_state.PersistedState(uiStateParams);if(!requestHandler){_context.next=28;break}_context.next=27;return requestHandler({partialRows:args.partialRows,metricsAtAllLevels:args.metricsAtAllLevels,index:indexPattern,visParams:visConfigParams,timeRange:(0,_lodash.get)(context,"timeRange",null),query:(0,_lodash.get)(context,"query",null),filters:(0,_lodash.get)(context,"filters",null),uiState:uiState,inspectorAdapters:handlers.inspectorAdapters,queryFilter:queryFilter,forceFetch:true});case 27:context=_context.sent;case 28:if(!responseHandler){_context.next=33;break}if(context.columns){context.columns.forEach(function(column){if(column.aggConfig){column.aggConfig.aggConfigs.schemas=visType.schemas.all}});Object.keys(schemas).forEach(function(key){schemas[key].forEach(function(i){if(context.columns[i]&&context.columns[i].aggConfig){context.columns[i].aggConfig.schema=key}})})}_context.next=32;return responseHandler(context,visConfigParams.dimensions);case 32:context=_context.sent;case 33:return _context.abrupt("return",{type:"render",as:"visualization",value:{visData:context,visType:args.type,visConfig:visConfigParams}});case 34:case"end":return _context.stop()}}},_callee)}));function fn(_x,_x2,_x3){return _fn.apply(this,arguments)}return fn}()}};exports.visualization=visualization},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visDimension=void 0;var _i18n=__webpack_require__(2);var visDimension=function visDimension(){return{name:"visdimension",help:_i18n.i18n.translate("interpreter.function.visDimension.help",{defaultMessage:"Generates visConfig dimension object"}),type:"vis_dimension",context:{types:["kibana_datatable"]},args:{accessor:{types:["string","number"],aliases:["_"],help:_i18n.i18n.translate("interpreter.function.visDimension.accessor.help",{defaultMessage:"Column in your dataset to use (either column index or column name)"})},format:{types:["string"],default:"string"},formatParams:{types:["string"],default:'"{}"'}},fn:function fn(context,args){var accessor=Number.isInteger(args.accessor)?args.accessor:context.columns.find(function(c){return c.id===args.accessor});if(accessor===undefined){throw new Error(_i18n.i18n.translate("interpreter.function.visDimension.error.accessor",{defaultMessage:"Column name provided is invalid"}))}return{type:"vis_dimension",accessor:accessor,format:{id:args.format,params:JSON.parse(args.formatParams)}}}}};exports.visDimension=visDimension},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visualization=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _visualization_loader=__webpack_require__(616);var _vis=__webpack_require__(1216);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var visualization=function visualization(){return{name:"visualization",displayName:"visualization",reuseDomNode:true,render:function(){var _render=_asyncToGenerator(regeneratorRuntime.mark(function _callee(domNode,config,handlers){var visData,visConfig,params,visType,$injector,Private,Vis,uiState;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:visData=config.visData,visConfig=config.visConfig,params=config.params;visType=config.visType||visConfig.type;_context.next=4;return _chrome.default.dangerouslyGetActiveInjector();case 4:$injector=_context.sent;Private=$injector.get("Private");Vis=Private(_vis.VisProvider);if(handlers.vis){if(visConfig){handlers.vis.setCurrentState({type:visType,params:visConfig})}}else{handlers.vis=new Vis({type:visType,params:visConfig});handlers.vis.eventsSubject=handlers.eventsSubject}uiState=handlers.uiState||handlers.vis.getUiState();handlers.onDestroy(function(){return _visualization_loader.visualizationLoader.destroy()});_context.next=12;return _visualization_loader.visualizationLoader.render(domNode,handlers.vis,visData,handlers.vis.params,uiState,params).then(function(){if(handlers.done)handlers.done()});case 12:case"end":return _context.stop()}}},_callee)}));function render(_x,_x2,_x3){return _render.apply(this,arguments)}return render}()}};exports.visualization=visualization},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Visualization=void 0;var _lodash=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _memoize=__webpack_require__(617);var _visualization_chart=__webpack_require__(1211);var _visualization_noresults=__webpack_require__(1214);var _visualization_requesterror=__webpack_require__(1215);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function shouldShowNoResultsMessage(vis,visData){var requiresSearch=(0,_lodash.get)(vis,"type.requiresSearch");var rows=(0,_lodash.get)(visData,"rows");var isZeroHits=(0,_lodash.get)(visData,"hits")===0||rows&&!rows.length;var shouldShowMessage=!(0,_lodash.get)(vis,"type.useCustomNoDataScreen");return Boolean(requiresSearch&&isZeroHits&&shouldShowMessage)}function shouldShowRequestErrorMessage(vis,visData){var requestError=(0,_lodash.get)(vis,"requestError");var showRequestError=(0,_lodash.get)(vis,"showRequestError");return Boolean(!visData&&requestError&&showRequestError)}var Visualization=function(_React$Component){_inherits(Visualization,_React$Component);function Visualization(props){var _this;_classCallCheck(this,Visualization);_this=_possibleConstructorReturn(this,_getPrototypeOf(Visualization).call(this,props));_defineProperty(_assertThisInitialized(_this),"showNoResultsMessage",(0,_memoize.memoizeLast)(shouldShowNoResultsMessage));props.vis._setUiState(props.uiState);return _this}_createClass(Visualization,[{key:"render",value:function render(){var _this$props=this.props,vis=_this$props.vis,visData=_this$props.visData,visParams=_this$props.visParams,onInit=_this$props.onInit,uiState=_this$props.uiState,listenOnChange=_this$props.listenOnChange;var noResults=this.showNoResultsMessage(vis,visData);var requestError=shouldShowRequestErrorMessage(vis,visData);return _react.default.createElement("div",{className:"visualization"},requestError?_react.default.createElement(_visualization_requesterror.VisualizationRequestError,{onInit:onInit,error:vis.requestError}):noResults?_react.default.createElement(_visualization_noresults.VisualizationNoResults,{onInit:onInit}):_react.default.createElement(_visualization_chart.VisualizationChart,{vis:vis,visData:visData,visParams:visParams,onInit:onInit,uiState:uiState,listenOnChange:listenOnChange}))}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){if(nextProps.uiState!==this.props.uiState){throw new Error("Changing uiState on <Visualization/> is not supported!")}return true}}]);return Visualization}(_react.default.Component);exports.Visualization=Visualization},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizationChart=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);var _render_complete=__webpack_require__(82);var _resize_checker=__webpack_require__(619);var _update_status=__webpack_require__(83);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualizationChart=function(_React$Component){_inherits(VisualizationChart,_React$Component);function VisualizationChart(props){var _this;_classCallCheck(this,VisualizationChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(VisualizationChart).call(this,props));_defineProperty(_assertThisInitialized(_this),"resizeChecker",void 0);_defineProperty(_assertThisInitialized(_this),"visualization",void 0);_defineProperty(_assertThisInitialized(_this),"chartDiv",_react.default.createRef());_defineProperty(_assertThisInitialized(_this),"containerDiv",_react.default.createRef());_defineProperty(_assertThisInitialized(_this),"renderSubject",void 0);_defineProperty(_assertThisInitialized(_this),"renderSubscription",void 0);_defineProperty(_assertThisInitialized(_this),"onUiStateChanged",function(){_this.startRenderVisualization()});_this.renderSubject=new Rx.Subject;var render$=_this.renderSubject.asObservable().pipe((0,_operators.share)());var success$=render$.pipe((0,_operators.tap)(function(){if(_this.chartDiv.current){(0,_render_complete.dispatchRenderStart)(_this.chartDiv.current)}}),(0,_operators.filter)(function(_ref){var vis=_ref.vis,visData=_ref.visData,container=_ref.container;return vis&&container&&(!vis.type.requiresSearch||visData)}),(0,_operators.debounceTime)(100),(0,_operators.switchMap)(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref2){var vis,visData,visParams,container,status;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:vis=_ref2.vis,visData=_ref2.visData,visParams=_ref2.visParams,container=_ref2.container;if(_this.visualization){_context.next=3;break}throw new Error("Visualization implementation was not initialized on first render.");case 3:vis.size=[container.clientWidth,container.clientHeight];status=(0,_update_status.getUpdateStatus)(vis.type.requiresUpdateStatus,_assertThisInitialized(_this),_this.props);return _context.abrupt("return",_this.visualization.render(visData,visParams,status));case 6:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref3.apply(this,arguments)}}()));var requestError$=render$.pipe((0,_operators.filter)(function(_ref4){var vis=_ref4.vis;return vis.requestError}));_this.renderSubscription=Rx.merge(success$,requestError$).subscribe(function(){if(_this.chartDiv.current!==null){(0,_render_complete.dispatchRenderComplete)(_this.chartDiv.current)}});return _this}_createClass(VisualizationChart,[{key:"render",value:function render(){return _react.default.createElement("div",{className:"visChart__container kbn-resetFocusState",tabIndex:0,ref:this.containerDiv},_react.default.createElement("p",{className:"euiScreenReaderOnly"},this.props.vis.type.title," visualization, not yet accessible"),_react.default.createElement("div",{"aria-hidden":!this.props.vis.type.isAccessible,className:"visChart",ref:this.chartDiv}))}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;if(!this.chartDiv.current||!this.containerDiv.current){throw new Error("chartDiv and currentDiv reference should always be present.")}var _this$props=this.props,vis=_this$props.vis,onInit=_this$props.onInit;var Visualization=vis.type.visualization;this.visualization=new Visualization(this.chartDiv.current,vis);if(onInit){var visLoaded=this.visualization.isLoaded&&this.visualization.isLoaded();Promise.resolve(visLoaded).then(onInit)}this.resizeChecker=new _resize_checker.ResizeChecker(this.containerDiv.current);this.resizeChecker.on("resize",function(){return _this2.startRenderVisualization()});if(this.props.listenOnChange){this.props.uiState.on("change",this.onUiStateChanged)}this.startRenderVisualization()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.startRenderVisualization()}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.renderSubscription){this.renderSubscription.unsubscribe()}if(this.resizeChecker){this.resizeChecker.destroy()}if(this.visualization){this.visualization.destroy()}}},{key:"startRenderVisualization",value:function startRenderVisualization(){if(this.containerDiv.current&&this.chartDiv.current){this.renderSubject.next({vis:this.props.vis,visData:this.props.visData,visParams:this.props.visParams,container:this.containerDiv.current})}}}]);return VisualizationChart}(_react.default.Component);exports.VisualizationChart=VisualizationChart},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);var _render_complete_helper=__webpack_require__(618);_modules.uiModules.get("kibana").directive("renderComplete",function(){return{controller:function controller($scope,$element){var el=$element[0];var renderCompleteHelper=new _render_complete_helper.RenderCompleteHelper(el);$scope.$on("$destroy",renderCompleteHelper.destroy)}}})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ResizeChecker=void 0;var _events=__webpack_require__(48);var _jquery=_interopRequireDefault(__webpack_require__(12));var _lodash=__webpack_require__(1);var _resizeObserverPolyfill=_interopRequireDefault(__webpack_require__(629));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function validateElArg(el){var $el=(0,_jquery.default)(el);if($el.length!==1){throw new TypeError("ResizeChecker must be constructed with a single DOM element.")}return $el.get(0)}function getSize(el){return[el.clientWidth,el.clientHeight]}var ResizeChecker=function(_EventEmitter){_inherits(ResizeChecker,_EventEmitter);function ResizeChecker(el){var _this;var args=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,ResizeChecker);_this=_possibleConstructorReturn(this,_getPrototypeOf(ResizeChecker).call(this));_defineProperty(_assertThisInitialized(_this),"destroyed",false);_defineProperty(_assertThisInitialized(_this),"el",void 0);_defineProperty(_assertThisInitialized(_this),"observer",void 0);_defineProperty(_assertThisInitialized(_this),"expectedSize",null);_this.el=validateElArg(el);_this.observer=new _resizeObserverPolyfill.default(function(){if(_this.expectedSize){var sameSize=(0,_lodash.isEqual)(getSize(el),_this.expectedSize);_this.expectedSize=null;if(sameSize){return}}_this.emit("resize")});if(!args.disabled){_this.enable()}return _this}_createClass(ResizeChecker,[{key:"enable",value:function enable(){if(this.destroyed){return}this.expectedSize=getSize(this.el);this.observer.observe(this.el)}},{key:"modifySizeWithoutTriggeringResize",value:function modifySizeWithoutTriggeringResize(block){try{block()}finally{if(this.el){this.expectedSize=getSize(this.el)}}}},{key:"destroy",value:function destroy(){if(this.destroyed){return}this.destroyed=true;this.observer.disconnect();this.observer=null;this.expectedSize=null;this.el=null;this.removeAllListeners()}}]);return ResizeChecker}(_events.EventEmitter);exports.ResizeChecker=ResizeChecker},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizationNoResults=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _render_complete=__webpack_require__(82);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualizationNoResults=function(_React$Component){_inherits(VisualizationNoResults,_React$Component);function VisualizationNoResults(){var _getPrototypeOf2;var _this;_classCallCheck(this,VisualizationNoResults);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(VisualizationNoResults)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"containerDiv",_react.default.createRef());return _this}_createClass(VisualizationNoResults,[{key:"render",value:function render(){return _react.default.createElement("div",{className:"visError",ref:this.containerDiv},_react.default.createElement("div",{className:"item top"}),_react.default.createElement("div",{className:"item"},_react.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_react.default.createElement(_eui.EuiIcon,{type:"visualizeApp",size:"m",color:"subdued","aria-hidden":"true"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement("p",null,"No results found"))),_react.default.createElement("div",{className:"item bottom"}))}},{key:"componentDidMount",value:function componentDidMount(){this.afterRender()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.afterRender()}},{key:"afterRender",value:function afterRender(){if(this.props.onInit){this.props.onInit()}if(this.containerDiv.current){(0,_render_complete.dispatchRenderComplete)(this.containerDiv.current)}}}]);return VisualizationNoResults}(_react.default.Component);exports.VisualizationNoResults=VisualizationNoResults},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizationRequestError=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _render_complete=__webpack_require__(82);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualizationRequestError=function(_React$Component){_inherits(VisualizationRequestError,_React$Component);function VisualizationRequestError(){var _getPrototypeOf2;var _this;_classCallCheck(this,VisualizationRequestError);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(VisualizationRequestError)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"containerDiv",_react.default.createRef());return _this}_createClass(VisualizationRequestError,[{key:"render",value:function render(){var error=this.props.error;var errorMessage=error&&error.message||error;return _react.default.createElement("div",{className:"visError",ref:this.containerDiv},_react.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_react.default.createElement(_eui.EuiIcon,{type:"alert",size:"m",color:"danger","aria-hidden":"true"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),errorMessage))}},{key:"componentDidMount",value:function componentDidMount(){this.afterRender()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.afterRender()}},{key:"afterRender",value:function afterRender(){if(this.props.onInit){this.props.onInit()}if(this.containerDiv.current){(0,_render_complete.dispatchRenderComplete)(this.containerDiv.current)}}}]);return VisualizationRequestError}(_react.default.Component);exports.VisualizationRequestError=VisualizationRequestError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisProvider=VisProvider;var _events=__webpack_require__(48);var _lodash=_interopRequireDefault(__webpack_require__(1));var _vis_types=__webpack_require__(49);var _persisted_state=__webpack_require__(99);var _query_filter=__webpack_require__(51);var _timefilter=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function VisProvider(Private,indexPatterns,getAppState){var visTypes=Private(_vis_types.VisTypesRegistryProvider);var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var Vis=function(_EventEmitter){_inherits(Vis,_EventEmitter);function Vis(){var _this;var visState=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{type:"histogram"};_classCallCheck(this,Vis);_this=_possibleConstructorReturn(this,_getPrototypeOf(Vis).call(this));_this._setUiState(new _persisted_state.PersistedState);_this.setState(visState);_this.sessionState={};_this.API={indexPatterns:indexPatterns,timeFilter:_timefilter.timefilter,queryFilter:queryFilter,events:{filter:function filter(data){if(!_this.eventsSubject)return;_this.eventsSubject.next({name:"filterBucket",data:data})},brush:function brush(data){if(!_this.eventsSubject)return;_this.eventsSubject.next({name:"brush",data:data})}},getAppState:getAppState};return _this}_createClass(Vis,[{key:"setState",value:function setState(state){this.title=state.title||"";var type=state.type||this.type;if(_lodash.default.isString(type)){this.type=visTypes.byName[type];if(!this.type){throw new Error('Invalid type "'.concat(type,'"'))}}else{this.type=type}this.params=_lodash.default.defaultsDeep({},_lodash.default.cloneDeep(state.params||{}),_lodash.default.cloneDeep(this.type.visConfig.defaults||{}))}},{key:"setCurrentState",value:function setCurrentState(state){this.setState(state)}},{key:"getState",value:function getState(){return{title:this.title,type:this.type.name,params:_lodash.default.cloneDeep(this.params)}}},{key:"updateState",value:function updateState(){this.emit("update")}},{key:"forceReload",value:function forceReload(){this.emit("reload")}},{key:"isHierarchical",value:function isHierarchical(){if(_lodash.default.isFunction(this.type.hierarchicalData)){return!!this.type.hierarchicalData(this)}else{return!!this.type.hierarchicalData}}},{key:"hasUiState",value:function hasUiState(){return!!this.__uiState}},{key:"_setUiState",value:function _setUiState(uiState){if(uiState instanceof _persisted_state.PersistedState){this.__uiState=uiState}}},{key:"getUiState",value:function getUiState(){return this.__uiState}},{key:"uiStateVal",value:function uiStateVal(key,val){if(this.hasUiState()){if(_lodash.default.isUndefined(val)){return this.__uiState.get(key)}return this.__uiState.set(key,val)}return val}}]);return Vis}(_events.EventEmitter);return Vis}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LegacyDependenciesPlugin=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _legacy_module=__webpack_require__(1218);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var LegacyDependenciesPlugin=function(){function LegacyDependenciesPlugin(){_classCallCheck(this,LegacyDependenciesPlugin)}_createClass(LegacyDependenciesPlugin,[{key:"setup",value:function setup(){(0,_legacy_module.initLegacyModule)();return{savedObjectsClient:_chrome.default.getSavedObjectsClient()}}},{key:"start",value:function start(core){}}]);return LegacyDependenciesPlugin}();exports.LegacyDependenciesPlugin=LegacyDependenciesPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initLegacyModule=void 0;var _lodash=__webpack_require__(1);var _i18n=__webpack_require__(11);var _modules=__webpack_require__(6);var _new_platform=__webpack_require__(8);var _filter=__webpack_require__(405);var _apply_filter_directive=_interopRequireDefault(__webpack_require__(1219));var _map_and_flatten_filters=__webpack_require__(564);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var initLegacyModule=(0,_lodash.once)(function(){_modules.uiModules.get("app/kibana",["react"]).directive("filterBar",function(){return{restrict:"E",template:"",compile:function compile(elem){var child=document.createElement("filter-bar-helper");var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=elem[0].attributes[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var attr=_step.value;child.setAttribute(attr.name,attr.value)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}child.setAttribute("ui-settings","uiSettings");elem.append(child);var linkFn=function linkFn($scope){$scope.uiSettings=_new_platform.npSetup.core.uiSettings};return linkFn}}}).directive("filterBarHelper",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_filter.FilterBar),[["uiSettings",{watchDepth:"reference"}],["onFiltersUpdated",{watchDepth:"reference"}],["indexPatterns",{watchDepth:"collection"}],["filters",{watchDepth:"collection"}],["className",{watchDepth:"reference"}]])}).directive("applyFiltersPopoverComponent",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_filter.ApplyFiltersPopover))}).directive("applyFiltersPopover",function(indexPatterns){return{template:_apply_filter_directive.default,restrict:"E",scope:{filters:"=",onCancel:"=",onSubmit:"="},link:function link($scope){$scope.state={};$scope.$watch("filters",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filters){var mappedFilters;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_map_and_flatten_filters.mapAndFlattenFilters)(indexPatterns,filters);case 2:mappedFilters=_context.sent;$scope.state={filters:mappedFilters,key:Date.now()};case 4:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}())}}})});exports.initLegacyModule=initLegacyModule},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<apply-filters-popover-component\n  ng-if="state.key"\n  key="state.key"\n  filters="state.filters"\n  on-cancel="onCancel"\n  on-submit="onSubmit"\n></apply-filters-popover-component>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.significantTermsBucketAgg=void 0;var _i18n=__webpack_require__(2);var _size=__webpack_require__(414);var _bucket_agg_type=__webpack_require__(50);var _terms=__webpack_require__(600);var _migrate_include_exclude_format=__webpack_require__(350);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var significantTermsBucketAgg=new _bucket_agg_type.BucketAggType({name:"significant_terms",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.significantTermsTitle",{defaultMessage:"Significant Terms"}),makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("common.ui.aggTypes.buckets.significantTermsLabel",{defaultMessage:"Top {size} unusual terms in {fieldName}",values:{size:aggConfig.params.size,fieldName:aggConfig.getFieldDisplayName()}})},createFilter:_terms.createFilterTerms,params:[{name:"field",type:"field",scriptable:false,filterFieldTypes:"string"},{name:"size",editorComponent:_size.SizeParamEditor,default:""},_objectSpread({name:"exclude",displayName:_i18n.i18n.translate("common.ui.aggTypes.buckets.significantTerms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat),_objectSpread({name:"include",displayName:_i18n.i18n.translate("common.ui.aggTypes.buckets.significantTerms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat)]});exports.significantTermsBucketAgg=significantTermsBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoHashBucketAgg=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _bucket_agg_type=__webpack_require__(50);var _auto_precision=__webpack_require__(1222);var _use_geocentroid=__webpack_require__(1223);var _is_filtered_by_collar=__webpack_require__(1224);var _precision=__webpack_require__(1225);var _decode_geo_hash=__webpack_require__(421);var _geo_utils=__webpack_require__(1226);var _i18n=__webpack_require__(2);var _agg_groups=__webpack_require__(61);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var config=_chrome.default.getUiSettingsClient();var defaultPrecision=2;var maxPrecision=parseInt(config.get("visualization:tileMap:maxPrecision"),10)||12;var zoomPrecision={};var minGeohashPixels=16;for(var zoom=0;zoom<=21;zoom+=1){var worldPixels=256*Math.pow(2,zoom);zoomPrecision[zoom]=1;for(var precision=2;precision<=maxPrecision;precision+=1){var columns=(0,_decode_geo_hash.geohashColumns)(precision);if(worldPixels/columns>=minGeohashPixels){zoomPrecision[zoom]=precision}else{break}}}function getPrecision(precision){precision=parseInt(precision,10);if(isNaN(precision)){precision=defaultPrecision}if(precision>maxPrecision){return maxPrecision}return precision}function isOutsideCollar(bounds,collar){return bounds&&collar&&!(0,_geo_utils.geoContains)(collar,bounds)}var geoHashBucketAgg=new _bucket_agg_type.BucketAggType({name:"geohash_grid",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.geohashGridTitle",{defaultMessage:"Geohash"}),params:[{name:"field",type:"field",filterFieldTypes:"geo_point"},{name:"autoPrecision",editorComponent:_auto_precision.AutoPrecisionParamEditor,default:true,write:function write(){}},{name:"precision",editorComponent:_precision.PrecisionParamEditor,default:defaultPrecision,deserialize:getPrecision,write:function write(aggConfig,output){var currZoom=aggConfig.params.mapZoom;var autoPrecisionVal=zoomPrecision[currZoom];output.params.precision=aggConfig.params.autoPrecision?autoPrecisionVal:getPrecision(aggConfig.params.precision)}},{name:"useGeocentroid",editorComponent:_use_geocentroid.UseGeocentroidParamEditor,default:true,write:function write(){}},{name:"isFilteredByCollar",editorComponent:_is_filtered_by_collar.IsFilteredByCollarParamEditor,default:true,write:function write(){}},{name:"mapZoom",default:2,write:function write(){}},{name:"mapCenter",default:[0,0],write:function write(){}},{name:"mapBounds",default:null,write:function write(){}}],getRequestAggs:function getRequestAggs(agg){var aggs=[];var params=agg.params;if(params.isFilteredByCollar&&agg.getField()){var mapBounds=params.mapBounds,mapZoom=params.mapZoom;if(mapBounds){var mapCollar;if(!agg.lastMapCollar||agg.lastMapCollar.zoom!==mapZoom||isOutsideCollar(mapBounds,agg.lastMapCollar)){mapCollar=(0,_geo_utils.scaleBounds)(mapBounds);mapCollar.zoom=mapZoom;agg.lastMapCollar=mapCollar}else{mapCollar=agg.lastMapCollar}var boundingBox=_defineProperty({ignore_unmapped:true},agg.getField().name,{top_left:mapCollar.top_left,bottom_right:mapCollar.bottom_right});aggs.push(agg.aggConfigs.createAggConfig({type:"filter",id:"filter_agg",enabled:true,params:{geo_bounding_box:boundingBox},schema:{group:_agg_groups.AggGroupNames.Buckets}},{addToAggConfigs:false}))}}aggs.push(agg);if(params.useGeocentroid){aggs.push(agg.aggConfigs.createAggConfig({type:"geo_centroid",enabled:true,params:{field:agg.getField()}},{addToAggConfigs:false}))}return aggs}});exports.geoHashBucketAgg=geoHashBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AutoPrecisionParamEditor=AutoPrecisionParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AutoPrecisionParamEditor(_ref){var value=_ref.value,setValue=_ref.setValue;var label=_i18n.i18n.translate("common.ui.aggTypes.changePrecisionLabel",{defaultMessage:"Change precision on map zoom"});return _react.default.createElement(_eui.EuiFormRow,{compressed:true},_react.default.createElement(_eui.EuiSwitch,{label:label,checked:value,onChange:function onChange(ev){return setValue(ev.target.checked)}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UseGeocentroidParamEditor=UseGeocentroidParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function UseGeocentroidParamEditor(_ref){var value=_ref.value,setValue=_ref.setValue;var label=_i18n.i18n.translate("common.ui.aggTypes.placeMarkersOffGridLabel",{defaultMessage:"Place markers off grid (use geocentroid)"});return _react.default.createElement(_eui.EuiFormRow,{compressed:true},_react.default.createElement(_eui.EuiSwitch,{label:label,checked:value,onChange:function onChange(ev){return setValue(ev.target.checked)}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IsFilteredByCollarParamEditor=IsFilteredByCollarParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _switch=__webpack_require__(101);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function IsFilteredByCollarParamEditor(props){return _react.default.createElement(_switch.SwitchParamEditor,_extends({displayLabel:_i18n.i18n.translate("common.ui.aggTypes.onlyRequestDataAroundMapExtentLabel",{defaultMessage:"Only request data around map extent"}),displayToolTip:_i18n.i18n.translate("common.ui.aggTypes.onlyRequestDataAroundMapExtentTooltip",{defaultMessage:"Apply geo_bounding_box filter aggregation to narrow the subject area to the map view box with collar"}),dataTestSubj:"isFilteredByCollarCheckbox"},props))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrecisionParamEditor=PrecisionParamEditor;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=_chrome.default.getUiSettingsClient();function PrecisionParamEditor(_ref){var agg=_ref.agg,value=_ref.value,setValue=_ref.setValue;if(agg.params.autoPrecision){return null}var label=_i18n.i18n.translate("common.ui.aggTypes.precisionLabel",{defaultMessage:"Precision"});return _react.default.createElement(_eui.EuiFormRow,{label:label,compressed:true},_react.default.createElement(_eui.EuiRange,{min:1,max:config.get("visualization:tileMap:maxPrecision"),value:value,onChange:function onChange(ev){return setValue(Number(ev.currentTarget.value))},"data-test-subj":"visEditorMapPrecision".concat(agg.id),showValue:true}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoContains=geoContains;exports.scaleBounds=scaleBounds;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function geoContains(collar,bounds){if(bounds.top_left.lat>collar.top_left.lat||bounds.top_left.lon<collar.top_left.lon){return false}if(bounds.bottom_right.lat<collar.bottom_right.lat||bounds.bottom_right.lon>collar.bottom_right.lon){return false}return true}function scaleBounds(bounds){if(!bounds)return;var scale=.5;var topLeft=bounds.top_left;var bottomRight=bounds.bottom_right;var latDiff=_lodash.default.round(Math.abs(topLeft.lat-bottomRight.lat),5);var lonDiff=_lodash.default.round(Math.abs(bottomRight.lon-topLeft.lon),5);if(latDiff===0)latDiff=lonDiff;var latDelta=latDiff*scale;var topLeftLat=_lodash.default.round(topLeft.lat,5)+latDelta;if(topLeftLat>90)topLeftLat=90;var bottomRightLat=_lodash.default.round(bottomRight.lat,5)-latDelta;if(bottomRightLat<-90)bottomRightLat=-90;var lonDelta=lonDiff*scale;var topLeftLon=_lodash.default.round(topLeft.lon,5)-lonDelta;if(topLeftLon<-180)topLeftLon=-180;var bottomRightLon=_lodash.default.round(bottomRight.lon,5)+lonDelta;if(bottomRightLon>180)bottomRightLon=180;return{top_left:{lat:topLeftLat,lon:topLeftLon},bottom_right:{lat:bottomRightLat,lon:bottomRightLon}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoTileBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _bucket_agg_type=__webpack_require__(50);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var geoTileBucketAgg=new _bucket_agg_type.BucketAggType({name:"geotile_grid",title:_i18n.i18n.translate("common.ui.aggTypes.buckets.geotileGridTitle",{defaultMessage:"Geotile"}),params:[{name:"field",type:"field",filterFieldTypes:"geo_point"},{name:"useGeocentroid",default:true,write:_lodash.default.noop},{name:"precision",default:0}],getRequestAggs:function getRequestAggs(agg){var aggs=[];var params=agg.params;aggs.push(agg);if(params.useGeocentroid){aggs.push(agg.aggConfigs.createAggConfig({type:"geo_centroid",enabled:true,params:{field:agg.getField()}},{addToAggConfigs:false}))}return aggs}});exports.geoTileBucketAgg=geoTileBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketSumMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _make_nested_label=__webpack_require__(70);var _sibling_pipeline_agg_helper=__webpack_require__(358);var _i18n=__webpack_require__(2);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallSumLabel=_i18n.i18n.translate("common.ui.aggTypes.metrics.overallSumLabel",{defaultMessage:"overall sum"});var bucketSumMetricAgg=new _metric_agg_type.MetricAggType({name:"sum_bucket",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.sumBucketTitle",{defaultMessage:"Sum Bucket"}),makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallSumLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketSumMetricAgg=bucketSumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.siblingPipelineAggWriter=void 0;var siblingPipelineAggWriter=function siblingPipelineAggWriter(agg,output){if(!agg.params.customMetric)return;var metricAgg=agg.params.customMetric;var bucketAgg=agg.params.customBucket;if(metricAgg.type.name!=="count"){bucketAgg.subAggs=(output.subAggs||[]).concat(metricAgg);output.params.buckets_path="".concat(bucketAgg.id,">").concat(metricAgg.id)}else{output.params.buckets_path=bucketAgg.id+">_count"}output.parentAggs=(output.parentAggs||[]).concat(bucketAgg)};exports.siblingPipelineAggWriter=siblingPipelineAggWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SubMetricParamEditor=SubMetricParamEditor;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _default=__webpack_require__(349);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function SubMetricParamEditor(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,metricAggs=_ref.metricAggs,state=_ref.state,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched,subAggParams=_ref.subAggParams;var metricTitle=_i18n.i18n.translate("common.ui.aggTypes.metrics.metricTitle",{defaultMessage:"Metric"});var bucketTitle=_i18n.i18n.translate("common.ui.aggTypes.metrics.bucketTitle",{defaultMessage:"Bucket"});var type=aggParam.name;var aggTitle=type==="customMetric"?metricTitle:bucketTitle;var aggGroup=type==="customMetric"?_default.AggGroupNames.Metrics:_default.AggGroupNames.Buckets;(0,_react.useEffect)(function(){setValue(agg.params[type]||agg.type.params.byName[type].makeAgg(agg))},[]);var _useState=(0,_react.useState)(true),_useState2=_slicedToArray(_useState,2),innerState=_useState2[0],setInnerState=_useState2[1];if(!agg.params[type]){return null}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFormLabel,null,aggTitle),_react.default.createElement(_default.DefaultEditorAggParams,{agg:agg.params[type],groupName:aggGroup,className:"visEditorAgg__subAgg",formIsTouched:subAggParams.formIsTouched,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,onAggParamsChange:function onAggParamsChange(){setInnerState(!innerState);subAggParams.onAggParamsChange.apply(subAggParams,arguments)},onAggTypeChange:subAggParams.onAggTypeChange,setValidity:setValidity,setTouched:setTouched}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketAvgMetricAgg=void 0;var _lodash=__webpack_require__(1);var _metric_agg_type=__webpack_require__(23);var _make_nested_label=__webpack_require__(70);var _sibling_pipeline_agg_helper=__webpack_require__(358);var _i18n=__webpack_require__(2);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallAverageLabel=_i18n.i18n.translate("common.ui.aggTypes.metrics.overallAverageLabel",{defaultMessage:"overall average"});var bucketAvgMetricAgg=new _metric_agg_type.MetricAggType({name:"avg_bucket",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.averageBucketTitle",{defaultMessage:"Average Bucket"}),makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallAverageLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat,getValue:function getValue(agg,bucket){var customMetric=agg.params.customMetric;var scaleMetrics=customMetric.type&&customMetric.type.isScalable();var value=bucket[agg.id]&&bucket[agg.id].value;if(scaleMetrics&&agg.params.customBucket.type.name==="date_histogram"){var aggInfo=agg.params.customBucket.write();value*=(0,_lodash.get)(aggInfo,"bucketInterval.scale",1)}return value}});exports.bucketAvgMetricAgg=bucketAvgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketMinMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _make_nested_label=__webpack_require__(70);var _sibling_pipeline_agg_helper=__webpack_require__(358);var _i18n=__webpack_require__(2);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallMinLabel=_i18n.i18n.translate("common.ui.aggTypes.metrics.overallMinLabel",{defaultMessage:"overall min"});var bucketMinMetricAgg=new _metric_agg_type.MetricAggType({name:"min_bucket",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.minBucketTitle",{defaultMessage:"Min Bucket"}),makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallMinLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketMinMetricAgg=bucketMinMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketMaxMetricAgg=void 0;var _metric_agg_type=__webpack_require__(23);var _make_nested_label=__webpack_require__(70);var _sibling_pipeline_agg_helper=__webpack_require__(358);var _i18n=__webpack_require__(2);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallMaxLabel=_i18n.i18n.translate("common.ui.aggTypes.metrics.overallMaxLabel",{defaultMessage:"overall max"});var bucketMaxMetricAgg=new _metric_agg_type.MetricAggType({name:"max_bucket",title:_i18n.i18n.translate("common.ui.aggTypes.metrics.maxBucketTitle",{defaultMessage:"Max Bucket"}),makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallMaxLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketMaxMetricAgg=bucketMaxMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateVisualizationConfig=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var updateVisualizationConfig=function updateVisualizationConfig(stateConfig,config){if(!stateConfig||stateConfig.seriesParams)return;if(!["line","area","histogram"].includes(config.type))return;var isUserDefinedYAxis=config.setYExtents;var defaultYExtents=config.defaultYExtents;var mode=["stacked","overlap"].includes(config.mode)?"normal":config.mode||"normal";config.valueAxes[0].scale=_objectSpread({},config.valueAxes[0].scale,{type:config.scale||"linear",setYExtents:config.setYExtents||false,defaultYExtents:config.defaultYExtents||false,boundsMargin:defaultYExtents?config.boundsMargin:0,min:isUserDefinedYAxis?config.yAxis.min:undefined,max:isUserDefinedYAxis?config.yAxis.max:undefined,mode:mode});var interpolate=config.smoothLines?"cardinal":config.interpolate;var stacked=["stacked","percentage","wiggle","silhouette"].includes(config.mode);config.seriesParams[0]=_objectSpread({},config.seriesParams[0],{type:config.type||"line",mode:stacked?"stacked":"normal",interpolate:interpolate,drawLinesBetweenPoints:config.drawLinesBetweenPoints,showCircles:config.showCircles,radiusRatio:config.radiusRatio})};exports.updateVisualizationConfig=updateVisualizationConfig},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1236)},function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(17));var _modules=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").config(function($provide){function strictEquality(a,b){return a===b||a!==a&&b!==b}function errorNotAssignable(source,target){throw Error('Unable to accept change to bound $scope property "'+source+'"'+' because source expression "'+target+'" is not assignable!')}$provide.decorator("$rootScope",function($delegate,$parse){$delegate.constructor.prototype.$bind=function(to,from,$sourceScope){var $source=$sourceScope||this.$parent;var $target=this;var $to=$parse(to);if(!$to.assign)errorNotAssignable(to,from);var $from=$parse(from);var getTarget=function getTarget(){return $to($target)};var setTarget=function setTarget(v){return $to.assign($target,v)};var getSource=function getSource(){return $from($source)};var setSource=function setSource(v){return $from.assignOrFail($source,v)};var lastSourceVal=getSource();$from.assignOrFail=$from.assign||function(){$to($target,lastSourceVal=$from($source));errorNotAssignable(from,to)};var strict=!$from.literal;var compare=strict?strictEquality:_angular.default.equals;setTarget(lastSourceVal);$target.$watch(function(){var sourceVal=getSource();var targetVal=getTarget();var outOfSync=!compare(sourceVal,targetVal);var sourceChanged=outOfSync&&!compare(sourceVal,lastSourceVal);if(sourceChanged)setTarget(sourceVal);else if(outOfSync)setSource(targetVal);return lastSourceVal=sourceVal},null,!strict)};return $delegate})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"BaseVisType",{enumerable:true,get:function get(){return _base_vis_type.BaseVisType}});Object.defineProperty(exports,"AngularVisTypeProvider",{enumerable:true,get:function get(){return _angular_vis_type.AngularVisTypeProvider}});Object.defineProperty(exports,"VislibVisTypeProvider",{enumerable:true,get:function get(){return _vislib_vis_type.VislibVisTypeProvider}});Object.defineProperty(exports,"ReactVisType",{enumerable:true,get:function get(){return _react_vis_type.ReactVisType}});var _base_vis_type=__webpack_require__(359);var _angular_vis_type=__webpack_require__(1238);var _vislib_vis_type=__webpack_require__(1239);var _react_vis_type=__webpack_require__(1309)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AngularVisTypeProvider=AngularVisTypeProvider;var _base_vis_type=__webpack_require__(359);var _jquery=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function AngularVisTypeProvider($compile,$rootScope){var AngularVisController=function(){function AngularVisController(domeElement,vis){_classCallCheck(this,AngularVisController);this.el=(0,_jquery.default)(domeElement);this.vis=vis}_createClass(AngularVisController,[{key:"render",value:function render(esResponse,visParams,status){var _this=this;return new Promise(function(resolve,reject){var updateScope=function updateScope(){_this.$scope.vis=_this.vis;_this.$scope.visState=_this.vis.getState();_this.$scope.esResponse=esResponse;_this.$scope.visParams=visParams;_this.$scope.renderComplete=resolve;_this.$scope.renderFailed=reject;_this.$scope.resize=Date.now();_this.$scope.updateStatus=status;_this.$scope.$apply()};if(!_this.$scope){_this.$scope=$rootScope.$new();_this.$scope.uiState=_this.vis.getUiState();updateScope();_this.el.html($compile(_this.vis.type.visConfig.template)(_this.$scope));_this.$scope.$apply()}else{updateScope()}})}},{key:"destroy",value:function destroy(){if(this.$scope){this.$scope.$destroy();this.$scope=null}}}]);return AngularVisController}();var AngularVisType=function(_BaseVisType){_inherits(AngularVisType,_BaseVisType);function AngularVisType(opts){var _this2;_classCallCheck(this,AngularVisType);opts.visualization=AngularVisController;_this2=_possibleConstructorReturn(this,_getPrototypeOf(AngularVisType).call(this,opts));_this2.visConfig.template=opts.visConfig?opts.visConfig.template:opts.template;if(!_this2.visConfig.template){throw new Error("Missing template for AngularVisType")}return _this2}return AngularVisType}(_base_vis_type.BaseVisType);return AngularVisType}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibVisTypeProvider=VislibVisTypeProvider;__webpack_require__(1240);__webpack_require__(1242);__webpack_require__(1244);var _vislib_vis_legend=__webpack_require__(1251);var _base_vis_type=__webpack_require__(359);var _vislib=_interopRequireDefault(__webpack_require__(423));var _vis_filters=__webpack_require__(100);var _jquery=_interopRequireDefault(__webpack_require__(12));var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function VislibVisTypeProvider(Private,$rootScope,$compile){var vislib=Private(_vislib.default);var visFilters=Private(_vis_filters.VisFiltersProvider);var legendClassName={top:"visLib--legend-top",bottom:"visLib--legend-bottom",left:"visLib--legend-left",right:"visLib--legend-right"};var VislibVisController=function(){function VislibVisController(el,vis){_classCallCheck(this,VislibVisController);this.el=el;this.vis=vis;this.$scope=null;this.container=document.createElement("div");this.container.className="visLib";this.el.appendChild(this.container);this.chartEl=document.createElement("div");this.chartEl.className="visLib__chart";this.container.appendChild(this.chartEl)}_createClass(VislibVisController,[{key:"render",value:function render(esResponse,visParams){var _this=this;if(this.vis.vislibVis){this.destroy()}return new Promise(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(resolve){var legendHtml;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(_this.el.clientWidth===0||_this.el.clientHeight===0)){_context.next=2;break}return _context.abrupt("return",resolve());case 2:_this.vis.vislibVis=new vislib.Vis(_this.chartEl,visParams);_this.vis.vislibVis.on("brush",_this.vis.API.events.brush);_this.vis.vislibVis.on("click",_this.vis.API.events.filter);_this.vis.vislibVis.on("renderComplete",resolve);_this.vis.vislibVis.initVisConfig(esResponse,_this.vis.getUiState());if(visParams.addLegend){(0,_jquery.default)(_this.container).attr("class",function(i,cls){return cls.replace(/visLib--legend-\S+/g,"")}).addClass(legendClassName[visParams.legendPosition]);_this.$scope=$rootScope.$new();_this.$scope.refreshLegend=0;_this.$scope.vis=_this.vis;_this.$scope.visData=esResponse;_this.$scope.visParams=visParams;_this.$scope.uiState=_this.$scope.vis.getUiState();legendHtml=$compile("<vislib-legend></vislib-legend>")(_this.$scope);_this.container.appendChild(legendHtml[0]);_this.$scope.$digest()}_this.vis.vislibVis.render(esResponse,_this.vis.getUiState());if(visParams.addLegend&&_vislib_vis_legend.CUSTOM_LEGEND_VIS_TYPES.includes(_this.vis.vislibVis.visConfigArgs.type)){_this.$scope.refreshLegend++;_this.$scope.$digest();_this.vis.vislibVis.render(esResponse,_this.vis.getUiState())}case 10:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}())}},{key:"destroy",value:function destroy(){if(this.vis.vislibVis){this.vis.vislibVis.off("brush",this.vis.API.events.brush);this.vis.vislibVis.off("click",this.vis.API.events.filter);this.vis.vislibVis.destroy();delete this.vis.vislibVis}(0,_jquery.default)(this.container).find("vislib-legend").remove();if(this.$scope){this.$scope.$destroy();this.$scope=null}}}]);return VislibVisController}();var VislibVisType=function(_BaseVisType){_inherits(VislibVisType,_BaseVisType);function VislibVisType(opts){var _this2;_classCallCheck(this,VislibVisType);if(!opts.responseHandler){opts.responseHandler="vislib_series";opts.responseHandlerConfig={asAggConfigResults:true}}opts.events=(0,_lodash.defaultsDeep)({},opts.events,{brush:{defaultAction:visFilters.brush}});opts.visualization=VislibVisController;_this2=_possibleConstructorReturn(this,_getPrototypeOf(VislibVisType).call(this,opts));_this2.refreshLegend=0;return _this2}return VislibVisType}(_base_vis_type.BaseVisType);return VislibVisType}},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);var _line_interpolation_option=_interopRequireDefault(__webpack_require__(1241));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("lineInterpolationOption",function(){return{restrict:"E",template:_line_interpolation_option.default,replace:true}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div>\n  <label>\n    Line Mode\n  </label>\n  <select\n    class="form-control"\n    ng-model="editorState.params.interpolate"\n    ng-options="mode.value as mode.text for mode in vis.type.params.interpolationModes"\n  >\n  </select>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);var _i18n=__webpack_require__(2);var _heatmap_options=_interopRequireDefault(__webpack_require__(1243));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("heatmapOptions",function(){return{restrict:"E",template:_heatmap_options.default,replace:true,link:function link($scope){$scope.collections=$scope.vis.type.editorConfig.collections;var verticalRotation=270;$scope.showColorRange=false;$scope.showLabels=false;$scope.customColors=false;$scope.valueAxis=$scope.editorState.params.valueAxes[0];$scope.options={rotateLabels:$scope.valueAxis.labels.rotate===verticalRotation};$scope.$watch("options.rotateLabels",function(rotate){$scope.editorState.params.valueAxes[0].labels.rotate=rotate?verticalRotation:0});$scope.resetColors=function(){$scope.uiState.set("vis.colors",null);$scope.customColors=false};$scope.toggleColorRangeSection=function(){var checkbox=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;$scope.showColorRange=!$scope.showColorRange;if(checkbox&&!$scope.editorState.params.setColorRange)$scope.showColorRange=false;if(!checkbox&&$scope.showColorRange&&!$scope.editorState.params.setColorRange)$scope.editorState.params.setColorRange=true};$scope.toggleLabelSection=function(){var checkbox=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;$scope.showLabels=!$scope.showLabels;if(checkbox&&!$scope.valueAxis.labels.show)$scope.showLabels=false;if($scope.showLabels&&!$scope.valueAxis.labels.show){$scope.editorState.params.valueAxes[0].labels.show=true}};$scope.getGreaterThan=function(index){if(index===0)return-Infinity;return $scope.editorState.params.colorsRange[index-1].to};$scope.addRange=function(){var previousRange=_lodash.default.last($scope.editorState.params.colorsRange);var from=previousRange?previousRange.to:0;$scope.editorState.params.colorsRange.push({from:from,to:null})};$scope.removeRange=function(index){$scope.editorState.params.colorsRange.splice(index,1)};$scope.getColor=function(index){var defaultColors=this.uiState.get("vis.defaultColors");var overwriteColors=this.uiState.get("vis.colors");var colors=defaultColors?_lodash.default.defaults({},overwriteColors,defaultColors):overwriteColors;return colors?Object.values(colors)[index]:"transparent"};$scope.uiState.on("colorChanged",function(){$scope.customColors=true});$scope.requiredText=_i18n.i18n.translate("kbnVislibVisTypes.controls.heatmapOptions.requiredText",{defaultMessage:"Required:"})}}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div>\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="colorSchema"\n      i18n-id="kbnVislibVisTypes.controls.heatmapOptions.colorSchemaLabel"\n      i18n-default-message="Color Schema"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <select\n        id="colorSchema"\n        class="kuiSelect visEditorSidebar__select"\n        ng-model="editorState.params.colorSchema"\n        ng-options="mode.id as mode.label for mode in collections.colorSchemas"\n      ></select>\n    </div>\n    <div\n      class="text-info text-center"\n      ng-show="customColors"\n      ng-click="resetColors()"\n      kbn-accessible-click\n      i18n-id="kbnVislibVisTypes.controls.heatmapOptions.resetColorsTitle"\n      i18n-default-message="reset colors"\n    ></div>\n  </div>\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="invertColors"\n      i18n-id="kbnVislibVisTypes.controls.heatmapOptions.reverseColorSchemaLabel"\n      i18n-default-message="Reverse Color Schema"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input class="kuiCheckBox" id="invertColors" type="checkbox" ng-model="editorState.params.invertColors">\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="axisScale"\n      i18n-id="kbnVislibVisTypes.controls.heatmapOptions.colorScaleLabel"\n      i18n-default-message="Color Scale"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <select\n        id="axisScale"\n        class="kuiSelect visEditorSidebar__select"\n        ng-model="editorState.params.valueAxes[0].scale.type"\n        ng-options="mode for mode in collections.scales"\n      ></select>\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="defaultYExtents"\n      i18n-id="kbnVislibVisTypes.controls.heatmapOptions.scaleToDataBoundsLabel"\n      i18n-default-message="Scale to Data Bounds"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input class="kuiCheckBox" id="defaultYExtents" type="checkbox" ng-model="editorState.params.valueAxes[0].scale.defaultYExtents">\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__formRow" ng-if="!editorState.params.setColorRange">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="percentageMode"\n      i18n-id="kbnVislibVisTypes.controls.heatmapOptions.percentageModeLabel"\n      i18n-default-message="Percentage Mode"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input class="kuiCheckBox" id="percentageMode" type="checkbox" ng-model="editorState.params.percentageMode">\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__formRow" ng-if="!editorState.params.setColorRange">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="colorsNumber"\n      i18n-id="kbnVislibVisTypes.controls.heatmapOptions.colorsNumberLabel"\n      i18n-default-message="Number of colors"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input\n        data-test-subj="heatmapOptionsColorsNumberInput"\n        id="colorsNumber"\n        class="visEditorSidebar__input"\n        ng-model="editorState.params.colorsNumber"\n        type="number"\n        greater-than="1"\n        less-than="11"\n      >\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__collapsible--margin">\n    <div class="visEditorSidebar__collapsibleTitle">\n      <div\n        class="visEditorSidebar__collapsibleTitleLabel"\n        ng-click="toggleColorRangeSection()"\n        kbn-accessible-click\n        aria-expanded="{{!!showColorRange}}"\n        aria-controls="heatmapOptionsRanges"\n        aria-label="Toggle custom ranges options"\n      >\n        <icon color="\'primary\'" aria-hidden="true" ng-if="showColorRange" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon color="\'primary\'" aria-hidden="true" ng-if="!showColorRange" type="\'arrowRight\'" size="\'s\'"></icon>\n\n        <span\n          class="visEditorSidebar__collapsibleTitleText"\n          i18n-id="kbnVislibVisTypes.controls.heatmapOptions.customRangesTitle"\n          i18n-default-message="Custom Ranges"\n        ></span>\n      </div>\n      <input\n        data-test-subj="heatmapEnableCustomRanges"\n        aria-label="Enable custom ranges"\n        ng-model="editorState.params.setColorRange"\n        type="checkbox"\n        ng-change="toggleColorRangeSection(true)"\n        kbn-accessible-click\n      >\n    </div>\n\n    <div\n      id="heatmapOptionsRanges"\n      ng-if="editorState.params.setColorRange"\n      ng-show="showColorRange"\n    >\n\n      <table\n        data-test-subj="heatmapCustomRangesTable"\n        class="visEditorAgg__rangesTable form-group"\n        ng-show="editorState.params.colorsRange.length">\n        <tr>\n          <th scope="col">\n            <label\n              id="heatmapCustomRangeFrom"\n              i18n-id="kbnVislibVisTypes.controls.heatmapOptions.fromLabel"\n              i18n-default-message="From"\n            ></label>\n          </th>\n          <th scope="col" colspan="2">\n            <label\n              id="heatmapCustomRangeTo"\n              i18n-id="kbnVislibVisTypes.controls.heatmapOptions.toLabel"\n              i18n-default-message="To"\n            ></label>\n          </th>\n        </tr>\n\n        <tr ng-repeat="range in editorState.params.colorsRange track by $index">\n          <td>\n            <input\n              aria-labelledby="heatmapCustomRangeFrom"\n              ng-model="range.from"\n              type="number"\n              class="form-control"\n              name="range.from"\n              greater-or-equal-than="getGreaterThan($index)"\n              step="any" />\n          </td>\n          <td>\n            <input\n              aria-labelledby="heatmapCustomRangeTo"\n              ng-model="range.to"\n              type="number"\n              class="form-control"\n              name="range.to"\n              greater-than="range.from"\n              step="any" />\n          </td>\n          <td>\n            <button\n              type="button"\n              ng-click="removeRange($index)"\n              class="kuiButton kuiButton--danger kuiButton--small"\n            >\n              <span class="kuiIcon fa-times"></span>\n            </button>\n          </td>\n        </tr>\n      </table>\n\n      <div class="hintbox" ng-show="!editorState.params.colorsRange.length">\n        <p\n          i18n-id="kbnVislibVisTypes.controls.heatmapOptions.specifiedRangeNumberWarningMessage"\n          i18n-default-message="{icon} {required} You must specify at least one range."\n          i18n-values="{\n            html_icon: \'<span class=\\\'kuiIcon fa-danger text-danger\\\'></span>\',\n            html_required: \'<strong>\' + requiredText + \'</strong>\'\n          }"\n        ></p>\n      </div>\n\n      <button\n        ng-click="addRange()"\n        class="kuiButton kuiButton--primary kuiButton--fullWidth"\n        data-test-subj="heatmapAddRangeButton"\n        i18n-id="kbnVislibVisTypes.controls.heatmapOptions.addRangeButtonLabel"\n        i18n-default-message="Add Range"\n      ></button>\n      <div class="euiSpacer euiSpacer--s"></div>\n      <div\n        class="text text-center text-info"\n        i18n-id="kbnVislibVisTypes.controls.heatmapOptions.howToChangeColorsDescription"\n        i18n-default-message="Note: colors can be changed in the legend"\n      ></div>\n\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__collapsible--margin">\n    <div class="visEditorSidebar__collapsibleTitle">\n      <div\n        class="visEditorSidebar__collapsibleTitleLabel"\n        ng-click="toggleLabelSection()"\n        kbn-accessible-click\n        aria-expanded="{{!!showLabels}}"\n        aria-controls="heatmapOptionsLabels"\n      >\n        <icon color="\'primary\'" aria-hidden="true" ng-if="showLabels" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon color="\'primary\'" aria-hidden="true" ng-if="!showLabels" type="\'arrowRight\'" size="\'s\'"></icon>\n\n        <span\n          class="visEditorSidebar__collapsibleTitleText"\n          i18n-id="kbnVislibVisTypes.controls.heatmapOptions.showLabelsTitle"\n          i18n-default-message="Show Labels"\n        ></span>\n      </div>\n      <input\n        aria-label="Show labels"\n        ng-model="editorState.params.valueAxes[0].labels.show"\n        type="checkbox"\n      >\n    </div>\n    <div\n      id="heatmapOptionsLabels"\n      ng-if="editorState.params.valueAxes[0].labels.show"\n      ng-show="showLabels"\n    >\n\n      <div class="visEditorSidebar__formRow visEditorSidebar__formRow--expand">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="rotateLabels"\n          i18n-id="kbnVislibVisTypes.controls.heatmapOptions.rotateLabel"\n          i18n-default-message="Rotate"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <input class="kuiCheckBox" id="rotateLabels" type="checkbox" ng-model="options.rotateLabels">\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow visEditorSidebar__formRow--expand">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="overwriteColor"\n          i18n-id="kbnVislibVisTypes.controls.heatmapOptions.overwriteAutomaticColorLabel"\n          i18n-default-message="Overwrite automatic color"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <input class="kuiCheckBox" id="overwriteColor" type="checkbox" ng-model="editorState.params.valueAxes[0].labels.overwriteColor">\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow" ng-show="editorState.params.valueAxes[0].labels.overwriteColor">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="labelColor"\n          i18n-id="kbnVislibVisTypes.controls.heatmapOptions.colorLabel"\n          i18n-default-message="Color"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <input\n            id="labelColor"\n            class="visEditorSidebar__input"\n            ng-model="editorState.params.valueAxes[0].labels.color"\n          >\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1245);__webpack_require__(1247);__webpack_require__(1249)},function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(6);var _value_axes=_interopRequireDefault(__webpack_require__(1246));var _agg_utils=__webpack_require__(348);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("vislibValueAxes",function(){return{restrict:"E",template:_value_axes.default,replace:true,link:function link($scope){var isCategoryAxisHorizontal=true;function mapPosition(position){switch(position){case"bottom":return"left";case"top":return"right";case"left":return"bottom";case"right":return"top"}}function mapPositionOpposite(position){switch(position){case"bottom":return"top";case"top":return"bottom";case"left":return"right";case"right":return"left"}}$scope.rotateOptions=[{name:"horizontal",value:0},{name:"vertical",value:90},{name:"angled",value:75}];$scope.$watch("editorState.params.categoryAxes[0].position",function(position){isCategoryAxisHorizontal=["top","bottom"].includes(position);$scope.editorState.params.valueAxes.forEach(function(axis){var axisIsHorizontal=["top","bottom"].includes(axis.position);if(axisIsHorizontal===isCategoryAxisHorizontal){axis.position=mapPosition(axis.position);$scope.updateAxisName(axis)}})});$scope.getSeries=function(axis){var isFirst=$scope.editorState.params.valueAxes[0]===axis;var series=$scope.editorState.params.seriesParams.filter(function(series){return series.valueAxis===axis.id||isFirst&&!series.valueAxis});return series.map(function(series){return series.data.label}).join(", ")};$scope.getSeriesShort=function(axis){var maxStringLength=30;return $scope.getSeries(axis).substring(0,maxStringLength)};$scope.isPositionDisabled=function(position){if(isCategoryAxisHorizontal){return["top","bottom"].includes(position)}return["left","right"].includes(position)};$scope.addValueAxis=function(){var firstAxis=$scope.editorState.params.valueAxes[0];var newAxis=_lodash.default.cloneDeep(firstAxis);newAxis.id="ValueAxis-"+$scope.editorState.params.valueAxes.reduce(function(value,axis){if(axis.id.substr(0,10)==="ValueAxis-"){var num=parseInt(axis.id.substr(10));if(num>=value)value=num+1}return value},1);newAxis.position=mapPositionOpposite(firstAxis.position);var axisName=_lodash.default.capitalize(newAxis.position)+"Axis-";newAxis.name=axisName+$scope.editorState.params.valueAxes.reduce(function(value,axis){if(axis.name.substr(0,axisName.length)===axisName){var num=parseInt(axis.name.substr(axisName.length));if(num>=value)value=num+1}return value},1);$scope.editorState.params.valueAxes.push(newAxis);return newAxis};$scope.removeValueAxis=function(axis){if($scope.editorState.params.valueAxes.length>1){_lodash.default.remove($scope.editorState.params.valueAxes,function(valAxis){return valAxis.id===axis.id})}};$scope.updateExtents=function(axis){if(!axis.scale.setYExtents){delete axis.scale.min;delete axis.scale.max}};$scope.updateBoundsMargin=function(axis){if(!axis.scale.defaultYExtents){delete axis.scale.boundsMargin}};$scope.updateAxisName=function(axis){var axisName=_lodash.default.capitalize(axis.position)+"Axis-";axis.name=axisName+$scope.editorState.params.valueAxes.reduce(function(value,axis){if(axis.name.substr(0,axisName.length)===axisName){var num=parseInt(axis.name.substr(axisName.length));if(num>=value)value=num+1}return value},1)};var lastCustomLabels={};var lastMatchingSeriesAggType="";var lastMatchingSeriesAggField="";$scope.updateAxisTitle=function(){$scope.editorState.params.valueAxes.forEach(function(axis,axisNumber){var newCustomLabel="";var isFirst=axisNumber===0;var matchingSeries=[];$scope.editorState.params.seriesParams.forEach(function(series,i){var isMatchingSeries=isFirst&&!series.valueAxis||series.valueAxis===axis.id;if(isMatchingSeries){var seriesNumber=0;$scope.editorState.aggs.forEach(function(agg){if(agg.schema.name==="metric"){if(seriesNumber===i)matchingSeries.push(agg);seriesNumber++}})}});if(matchingSeries.length===1){newCustomLabel=matchingSeries[0].makeLabel()}var matchingSeriesAggType=_lodash.default.get(matchingSeries,"[0]type.name","");var matchingSeriesAggField=_lodash.default.get(matchingSeries,"[0]params.field.name","");if(lastCustomLabels[axis.id]!==newCustomLabel&&newCustomLabel!==""){var isFirstRender=Object.keys(lastCustomLabels).length===0;var aggTypeIsChanged=lastMatchingSeriesAggType!==matchingSeriesAggType;var aggFieldIsChanged=lastMatchingSeriesAggField!==matchingSeriesAggField;var aggIsChanged=aggTypeIsChanged||aggFieldIsChanged;var axisTitleIsEmpty=axis.title.text==="";var lastCustomLabelMatchesAxisTitle=lastCustomLabels[axis.id]===axis.title.text;if(!isFirstRender&&(aggIsChanged||axisTitleIsEmpty||lastCustomLabelMatchesAxisTitle)){axis.title.text=newCustomLabel}lastCustomLabels[axis.id]=newCustomLabel}lastMatchingSeriesAggType=matchingSeriesAggType;lastMatchingSeriesAggField=matchingSeriesAggField})};$scope.$watch(function(){return $scope.editorState.aggs.map(function(agg){return(0,_agg_utils.safeMakeLabel)(agg)}).join()},function(){$scope.updateAxisTitle()})}}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section kuiSideBarSection__main">\n  <div class="visEditorSidebar__sectionTitle">\n    <div\n      i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.yAxisTitle"\n      i18n-default-message="Y-Axes"\n    ></div>\n\n    <button\n      data-test-subj="visualizeAddYAxisButton"\n      aria-label="Add Y axis"\n      ng-click="addValueAxis()"\n      tooltip="Add Y axis"\n      tooltip-append-to-body="true"\n      type="button"\n    >\n      <icon color="\'primary\'" aria-hidden="true" type="\'plusInCircleFilled\'" size="\'m\'"></icon>\n    </button>\n  </div>\n\n  <div\n    ng-repeat="axis in editorState.params.valueAxes track by axis.id"\n    class="visEditorSidebar__section visEditorSidebar__collapsible"\n  >\n    <div class="visEditorSidebar__collapsibleTitle">\n      <div\n        data-test-subj="toggleYAxisOptions-{{axis.id}}"\n        class="visEditorSidebar__collapsibleTitleLabel"\n        ng-click="isValueAxisOpen = !isValueAxisOpen"\n        kbn-accessible-click\n        aria-expanded="{{!!isValueAxisOpen}}"\n        aria-controls="axisOptions{{axis.id}}"\n        aria-label="Toggle {{axis.name}} options"\n      >\n        <icon class="kuiSideBarOptionsLink__caret" color="\'primary\'" aria-hidden="true" ng-if="isValueAxisOpen" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon class="kuiSideBarOptionsLink__caret" color="\'primary\'" aria-hidden="true" ng-if="!isValueAxisOpen" type="\'arrowRight\'" size="\'s\'"></icon>\n\n        <span class="visEditorSidebar__collapsibleTitleText">\n          {{axis.name}}\n        </span>\n      </div>\n\n      <div class="visEditorSidebar__collapsibleTitleDescription" tooltip="{{getSeries(axis)}}">{{getSeriesShort(axis)}}</div>\n\n      <button\n        ng-hide="editorState.params.valueAxes.length === 1"\n        aria-label="Remove Y axis"\n        ng-click="removeValueAxis(axis)"\n        tooltip="Remove Y axis"\n        tooltip-append-to-body="true"\n        type="button"\n      >\n        <icon color="\'danger\'" aria-hidden="true" type="\'cross\'" size="\'m\'"></icon>\n      </button>\n    </div>\n\n    <div id="axisOptions{{axis.id}}" ng-show="isValueAxisOpen">\n      \x3c!-- General --\x3e\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="{ \'valueAxisShow\' + $index }"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.showLabel"\n          i18n-default-message="Show"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <input class="kuiCheckBox" id="{ \'valueAxisShow\' + $index }" type="checkbox" ng-model="axis.show">\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="{{ \'valueAxisTitle\' + $index }}"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.titleLabel"\n          i18n-default-message="Title"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <input\n            id="{{ \'valueAxisTitle\' + $index }}"\n            class="kuiInput visEditorSidebar__input"\n            type="text"\n            ng-model="axis.title.text"\n          >\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="{{ \'valueAxisPosition\' + $index }}"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.positionLabel"\n          i18n-default-message="Position"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            id="{{ \'valueAxisPosition\' + $index }}"\n            class="kuiSelect visEditorSidebar__select"\n            ng-change="updateAxisName(axis)"\n            ng-model="axis.position"\n            ng-options="mode disable when isPositionDisabled(mode) for mode in vis.type.editorConfig.collections.positions"\n          ></select>\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="{{ \'valueAxisMode\' + $index }}"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.modeLabel"\n          i18n-default-message="Mode"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            id="{{ \'valueAxisMode\' + $index }}"\n            class="kuiSelect visEditorSidebar__select"\n            ng-model="axis.scale.mode"\n            ng-options="mode for mode in vis.type.editorConfig.collections.axisModes"\n          ></select>\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="{{ \'valueAxisScaleType\' + $index }}"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.scaleTypeLabel"\n          i18n-default-message="Scale Type"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            data-test-subj="scaleSelectYAxis-{{axis.id}}"\n            id="{{ \'valueAxisScaleType\' + $index }}"\n            class="kuiSelect visEditorSidebar__select"\n            ng-model="axis.scale.type"\n            ng-options="type for type in vis.type.editorConfig.collections.scaleTypes"\n          ></select>\n        </div>\n      </div>\n\n\n      \x3c!-- Advanced options --\x3e\n      <div class="visEditorSidebar__collapsible--margin">\n        <a\n          data-test-subj="toggleYAxisAdvancedOptions-{{axis.id}}"\n          class="visEditorSidebar__collapsibleTitle"\n          ng-click="isValueAxisAdvancedOptionsOpen = !isValueAxisAdvancedOptionsOpen"\n          kbn-accessible-click\n        >\n          <span>\n            <icon class="visEditorSidebar__advancedLinkIcon" color="\'primary\'" aria-hidden="true" ng-if="isValueAxisAdvancedOptionsOpen" type="\'arrowDown\'" size="\'s\'"></icon>\n            <icon class="visEditorSidebar__advancedLinkIcon" color="\'primary\'" aria-hidden="true" ng-if="!isValueAxisAdvancedOptionsOpen" type="\'arrowRight\'" size="\'s\'"></icon>\n\n            <span\n              class="kuiSideBarOptionsLink__text"\n              ng-show="!isValueAxisAdvancedOptionsOpen"\n              i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.showAdvancedOptionsLabel"\n              i18n-default-message="Show Advanced Options"\n            ></span>\n            <span\n              class="kuiSideBarOptionsLink__text"\n              ng-show="isValueAxisAdvancedOptionsOpen"\n              i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.hideAdvancedOptionsLabel"\n              i18n-default-message="Hide Advanced Options"\n            ></span>\n          </span>\n        </a>\n\n        <div ng-show="isValueAxisAdvancedOptionsOpen">\n\n          \x3c!-- Labels --\x3e\n          <h6\n            class="visEditorSidebar__formTitle"\n            i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.labelsTitle"\n            i18n-default-message="Labels"\n          ></h6>\n\n          <div class="visEditorSidebar__formRow">\n            <label\n              class="visEditorSidebar__formLabel"\n              for="{{ \'valueAxisShowLabels\' + $index }}"\n              i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.showLabelsLabel"\n              i18n-default-message="Show Labels"\n            ></label>\n            <div class="visEditorSidebar__formControl">\n              <input class="kuiCheckBox" id="{{ \'valueAxisShowLabels\' + $index }}" type="checkbox" ng-model="axis.labels.show">\n            </div>\n          </div>\n\n          <div class="visEditorSidebar__formRow">\n            <label\n              class="visEditorSidebar__formLabel"\n              for="{{ \'valueAxisFilterLabels\' + $index }}"\n              i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.filterLabelsLabel"\n              i18n-default-message="Filter Labels"\n            ></label>\n            <div class="visEditorSidebar__formControl">\n              <input\n                data-test-subj="yAxisFilterLabelsCheckbox-{{axis.id}}"\n                class="kuiCheckBox"\n                id="{{ \'valueAxisFilterLabels\' + $index }}"\n                type="checkbox"\n                ng-model="axis.labels.filter"\n              >\n            </div>\n          </div>\n\n          <div class="visEditorSidebar__formRow">\n            <label\n              class="visEditorSidebar__formLabel"\n              for="{{ \'valueAxisRotateLabels\' + $index }}"\n              i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.rotateLabel"\n              i18n-default-message="Rotate"\n            ></label>\n            <div class="visEditorSidebar__formControl">\n              <select\n                id="{{ \'valueAxisRotateLabels\' + $index }}"\n                class="kuiSelect visEditorSidebar__select"\n                ng-model="axis.labels.rotate"\n                ng-options="mode.value as mode.name for mode in rotateOptions"\n              ></select>\n            </div>\n          </div>\n\n          <div class="visEditorSidebar__formRow">\n            <label\n              class="visEditorSidebar__formLabel"\n              for="{{ \'valueAxisTruncateLabels\' + $index }}"\n              i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.truncateLabel"\n              i18n-default-message="Truncate"\n            ></label>\n            <div class="visEditorSidebar__formControl">\n              <input\n                id="{{ \'valueAxisTruncateLabels\' + $index }}"\n                class="kuiInput visEditorSidebar__input"\n                type="number"\n                ng-model="axis.labels.truncate"\n              >\n            </div>\n          </div>\n\n\n          \x3c!-- Custom Extents --\x3e\n          <h6\n            class="visEditorSidebar__formTitle"\n            i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.customExtentsTitle"\n            i18n-default-message="Custom Extents"\n          ></h6>\n\n          <div class="visEditorSidebar__formRow visEditorSidebar__formRow--expand">\n            <label\n              class="visEditorSidebar__formLabel"\n              for="{ \'defaultYExtents\' + $index }"\n              i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.scaleToDataBoundsLabel"\n              i18n-default-message="Scale to Data Bounds"\n            ></label>\n            <div class="visEditorSidebar__formControl">\n              <input class="kuiCheckBox" id="{ \'defaultYExtents\' + $index }" type="checkbox" ng-model="axis.scale.defaultYExtents" ng-change="updateBoundsMargin(axis)">\n            </div>\n          </div>\n\n          <div ng-if="axis.scale.defaultYExtents">\n            <div class="visEditorSidebar__formRow">\n              <label\n                class="visEditorSidebar__formLabel"\n                i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.scaleToDataBounds.boundsMargin"\n                i18n-default-message="Bounds Margin"\n              ></label>\n              <div class="visEditorSidebar__formControl">\n                <input\n                  name="yBoundsMargin"\n                  class="kuiInput visEditorSidebar__input"\n                  type="number"\n                  step="0.1"\n                  greater-or-equal-than="0"\n                  ng-model="axis.scale.boundsMargin">\n              </div>\n            </div>\n            <div ng-show="axis.scale.boundsMargin < 0">\n              <span\n                class="text-danger"\n                i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.scaleToDataBounds.minNeededBoundsMargin"\n                i18n-default-message="Bounds Margin must be greater than or equal to 0"\n              ></span>\n            </div>\n          </div>\n\n          <div class="visEditorSidebar__formRow visEditorSidebar__formRow--expand">\n            <label\n              class="visEditorSidebar__formLabel"\n              for="{ \'setYExtents\' + $index }"\n              i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.setAxisExtentsLabel"\n              i18n-default-message="Set Axis Extents"\n            ></label>\n            <div class="visEditorSidebar__formControl">\n              <input class="kuiCheckBox" id="{ \'setYExtents\' + $index }" type="checkbox" ng-model="axis.scale.setYExtents" ng-change="updateExtents(axis)">\n            </div>\n          </div>\n\n          <div ng-if="axis.scale.setYExtents">\n            <div class="visEditorSidebar__formRow">\n              <label\n                class="visEditorSidebar__formLabel"\n                i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.maxLabel"\n                i18n-default-message="Max"\n              ></label>\n              <div class="visEditorSidebar__formControl">\n                <input\n                  name="yMax"\n                  class="kuiInput visEditorSidebar__input"\n                  type="number"\n                  step="0.1"\n                  greater-than="axis.scale.min"\n                  ng-model="axis.scale.max"\n                >\n              </div>\n            </div>\n\n            <div class="visEditorSidebar__formRow">\n              <label\n                class="visEditorSidebar__formLabel"\n                i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.minLabel"\n                i18n-default-message="Min"\n              ></label>\n              <div class="visEditorSidebar__formControl">\n                <input\n                  name="yMin"\n                  class="kuiInput visEditorSidebar__input"\n                  type="number"\n                  step="0.1"\n                  greater-than="axis.scale.type === \'log\' ? 0 : undefined"\n                  less-than="axis.scale.max"\n                  ng-model="axis.scale.min"\n                >\n              </div>\n            </div>\n            <div ng-show="axis.scale.type === \'log\' && axis.scale.min <= 0">\n              <span\n                class="text-danger"\n                i18n-id="kbnVislibVisTypes.controls.pointSeries.valueAxes.minNeededScaleText"\n                i18n-default-message="Min must exceed 0 when a log scale is selected"\n              ></span>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);var _category_axis=_interopRequireDefault(__webpack_require__(1248));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("vislibCategoryAxis",function(){return{restrict:"E",template:_category_axis.default,replace:true,link:function link($scope){$scope.rotateOptions=[{name:"horizontal",value:0},{name:"vertical",value:90},{name:"angled",value:75}]}}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section kuiSideBarSection__main">\n  <div class="visEditorSidebar__sectionTitle">\n    <div\n      i18n-id="kbnVislibVisTypes.controls.pointSeries.categoryAxis.xAxisTitle"\n      i18n-default-message="X-Axis"\n    ></div>\n  </div>\n\n  \x3c!-- General --\x3e\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="categoryAxisShow"\n      i18n-id="kbnVislibVisTypes.controls.pointSeries.categoryAxis.showLabel"\n      i18n-default-message="Show"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input class="kuiCheckBox" id="categoryAxisShow" type="checkbox" ng-model="editorState.params.categoryAxes[0].show">\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="categoryAxisPosition"\n      i18n-id="kbnVislibVisTypes.controls.pointSeries.categoryAxis.positionLabel"\n      i18n-default-message="Position"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <select\n        id="categoryAxisPosition"\n        class="kuiSelect visEditorSidebar__select"\n        ng-model="editorState.params.categoryAxes[0].position"\n        ng-options="mode for mode in vis.type.editorConfig.collections.positions"\n      ></select>\n    </div>\n  </div>\n\n\n  \x3c!-- Advanced options --\x3e\n  <div class="visEditorSidebar__collapsible--margin">\n    <a\n      class="visEditorSidebar__collapsibleTitle"\n      ng-click="isCategoryAxisAdvancedOptionsOpen = !isCategoryAxisAdvancedOptionsOpen"\n      kbn-accessible-click\n    >\n      <span>\n        <icon class="visEditorSidebar__advancedLinkIcon" color="\'primary\'" aria-hidden="true" ng-if="isCategoryAxisAdvancedOptionsOpen" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon class="visEditorSidebar__advancedLinkIcon" color="\'primary\'" aria-hidden="true" ng-if="!isCategoryAxisAdvancedOptionsOpen" type="\'arrowRight\'" size="\'s\'"></icon>\n\n\n        <span\n          ng-show="!isCategoryAxisAdvancedOptionsOpen"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.categoryAxis.showAdvancedOptionsLabel"\n          i18n-default-message="Show Advanced Options"\n        ></span>\n        <span\n          ng-show="isCategoryAxisAdvancedOptionsOpen"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.categoryAxis.hideAdvancedOptionsLabel"\n          i18n-default-message="Hide Advanced Options"\n        ></span>\n      </span>\n    </a>\n\n    <div ng-show="isCategoryAxisAdvancedOptionsOpen">\n      \x3c!-- Labels --\x3e\n      <h6\n        class="visEditorSidebar__formTitle"\n        i18n-id="kbnVislibVisTypes.controls.pointSeries.categoryAxis.labelsTitle"\n        i18n-default-message="Labels"\n      ></h6>\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="categoryAxisShowLabels"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.categoryAxis.showLabelsLabel"\n          i18n-default-message="Show Labels"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <input class="kuiCheckBox" id="categoryAxisShowLabels" type="checkbox" ng-model="editorState.params.categoryAxes[0].labels.show">\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="categoryAxisShowFilter"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.categoryAxis.filterLabelsLabel"\n          i18n-default-message="Filter Labels"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <input class="kuiCheckBox" id="categoryAxisShowFilter" type="checkbox" ng-model="editorState.params.categoryAxes[0].labels.filter">\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="categoryAxisRotateLabels"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.categoryAxis.rotateLabel"\n          i18n-default-message="Rotate"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            id="categoryAxisRotateLabels"\n            class="kuiSelect visEditorSidebar__select"\n            ng-model="editorState.params.categoryAxes[0].labels.rotate"\n            ng-options="mode.value as mode.name for mode in rotateOptions"\n          ></select>\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="categoryAxisTruncateLabels"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.categoryAxis.truncateLabel"\n          i18n-default-message="Truncate"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <input\n            id="categoryAxisTruncateLabels"\n            class="kuiInput visEditorSidebar__input"\n            type="number"\n            ng-model="editorState.params.categoryAxes[0].labels.truncate"\n          >\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(6);var _series=_interopRequireDefault(__webpack_require__(1250));var _agg_utils=__webpack_require__(348);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("vislibSeries",function(){return{restrict:"E",template:_series.default,replace:true,link:function link($scope){function makeSerie(id,label){var last=$scope.series[$scope.series.length-1];return{show:true,mode:last?last.mode:"normal",type:last?last.type:"line",drawLinesBetweenPoints:last?last.drawLinesBetweenPoints:true,showCircles:last?last.showCircles:true,interpolate:last?last.interpolate:"linear",lineWidth:last?last.lineWidth:2,data:{id:id,label:label},valueAxis:last?last.valueAxis:$scope.editorState.params.valueAxes[0].id}}$scope.series=$scope.editorState.params.seriesParams;$scope.$watch(function(){return $scope.editorState.aggs.map(function(agg){return(0,_agg_utils.safeMakeLabel)(agg)}).join()},function(){var schemaTitle=$scope.vis.type.schemas.metrics[0].title;var metrics=$scope.editorState.aggs.filter(function(agg){var isMetric=agg.type&&agg.type.type==="metrics";return isMetric&&agg.schema.title===schemaTitle});$scope.editorState.params.seriesParams=metrics.map(function(agg){var params=$scope.editorState.params.seriesParams.find(function(param){return param.data.id===agg.id});if(params){params.data.label=agg.makeLabel();return params}else{var series=makeSerie(agg.id,agg.makeLabel());return series}})});$scope.$watch(function(){return $scope.editorState.params.seriesParams.map(function(series){return series.type}).join()},function(){var types=_lodash.default.uniq(_lodash.default.map($scope.editorState.params.seriesParams,"type"));$scope.vis.type.type=types.length===1?types[0]:"histogram"});$scope.$watch("editorState.params.valueAxes.length",function(){$scope.editorState.params.seriesParams.forEach(function(series){if(!$scope.editorState.params.valueAxes.find(function(axis){return axis.id===series.valueAxis})){series.valueAxis=$scope.editorState.params.valueAxes[0].id}})});$scope.changeValueAxis=function(index){var series=$scope.editorState.params.seriesParams[index];if(series.valueAxis==="new"){var axis=$scope.addValueAxis();series.valueAxis=axis.id}$scope.updateAxisTitle()}}}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section kuiSideBarSection__main">\n  <div class="visEditorSidebar__sectionTitle">\n    <div\n      i18n-id="kbnVislibVisTypes.controls.pointSeries.series.metricsTitle"\n      i18n-default-message="Metrics"\n    ></div>\n  </div>\n\n  <div\n    ng-repeat="chart in editorState.params.seriesParams track by $index"\n    class="visEditorSidebar__section visEditorSidebar__collapsible"\n  >\n    <div class="visEditorSidebar__collapsibleTitle">\n      <div\n        ng-init="isSeriesOpen = ($index === 0)"\n        class="visEditorSidebar__collapsibleTitleLabel"\n        ng-click="isSeriesOpen = !isSeriesOpen"\n        kbn-accessible-click\n        aria-expanded="{{!!isSeriesOpen}}"\n        aria-controls="visSeriesOptions{{$index}}"\n        aria-label="Toggle {{chart.data.label}} options"\n      >\n        <icon color="\'primary\'" aria-hidden="true" ng-if="isSeriesOpen" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon color="\'primary\'" aria-hidden="true" ng-if="!isSeriesOpen" type="\'arrowRight\'" size="\'s\'"></icon>\n\n        <span class="visEditorSidebar__collapsibleTitleText">\n          {{chart.data.label}}\n        </span>\n      </div>\n    </div>\n\n    <div id="visSeriesOptions{{$index}}" ng-show="isSeriesOpen">\n      \x3c!-- General --\x3e\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="{{ \'seriesType\' + $index }}"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.series.chartTypeLabel"\n          i18n-default-message="Chart Type"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            id="{{ \'seriesType\' + $index }}"\n            class="kuiSelect visEditorSidebar__select"\n            ng-model="chart.type"\n            ng-options="mode.value as mode.text for mode in vis.type.editorConfig.collections.chartTypes"\n          ></select>\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="{{ \'seriesMode\' + $index }}"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.series.modeLabel"\n          i18n-default-message="Mode"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            id="{{ \'seriesMode\' + $index }}"\n            class="kuiSelect visEditorSidebar__select"\n            ng-model="chart.mode"\n            ng-options="mode for mode in vis.type.editorConfig.collections.chartModes"\n          ></select>\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="{{ \'seriesValueAxis\' + $index }}"\n          i18n-id="kbnVislibVisTypes.controls.pointSeries.series.valueAxisLabel"\n          i18n-default-message="Value Axis"\n        ></label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            id="{{ \'seriesValueAxis\' + $index }}"\n            class="kuiSelect visEditorSidebar__select"\n            ng-model="chart.valueAxis"\n            ng-change="changeValueAxis($index)"\n          >\n            <option ng-repeat="axis in editorState.params.valueAxes track by axis.id" value="{{axis.id}}">{{axis.name}}</option>\n            <option\n              value="new"\n              i18n-id="kbnVislibVisTypes.controls.pointSeries.series.newAxisLabel"\n              i18n-default-message="New Axis…"\n            ></option>\n          </select>\n        </div>\n      </div>\n\n      <div ng-show="chart.type == \'line\' || chart.type == \'area\'">\n        <div class="visEditorSidebar__formRow">\n          <label\n            class="visEditorSidebar__formLabel"\n            for="{{ \'lineMode\' + $index }}"\n            i18n-id="kbnVislibVisTypes.controls.pointSeries.series.lineModeLabel"\n            i18n-default-message="Line Mode"\n          ></label>\n          <div class="visEditorSidebar__formControl">\n            <select\n              id="{{ \'lineMode\' + $index }}"\n              class="kuiSelect visEditorSidebar__select"\n              ng-model="chart.interpolate"\n              ng-options="mode.value as mode.text for mode in vis.type.editorConfig.collections.interpolationModes"\n            >\n            </select>\n          </div>\n        </div>\n      </div>\n      <div ng-show="chart.type == \'line\'">\n        <div class="visEditorSidebar__formRow">\n          <label\n            class="visEditorSidebar__formLabel"\n            for="{{ \'drawLines\' + $index }}"\n            i18n-id="kbnVislibVisTypes.controls.pointSeries.series.showLineLabel"\n            i18n-default-message="Show Line"\n          ></label>\n          <div class="visEditorSidebar__formControl">\n            <input class="kuiCheckBox" id="{{ \'drawLines\' + $index }}" type="checkbox" ng-model="chart.drawLinesBetweenPoints">\n          </div>\n        </div>\n\n        <div class="visEditorSidebar__formRow">\n          <label\n            class="visEditorSidebar__formLabel"\n            for="{{ \'showCircles\' + $index }}"\n            i18n-id="kbnVislibVisTypes.controls.pointSeries.series.showCirclesLabel"\n            i18n-default-message="Show Circles"\n          ></label>\n          <div class="visEditorSidebar__formControl">\n            <input class="kuiCheckBox" id="{{ \'showCircles\' + $index }}" type="checkbox" ng-model="chart.showCircles">\n          </div>\n        </div>\n\n        <div class="visEditorSidebar__formRow">\n          <label\n            class="visEditorSidebar__formLabel"\n            i18n-id="kbnVislibVisTypes.controls.pointSeries.series.lineWidthLabel"\n            i18n-default-message="Line Width"\n          ></label>\n          <div class="visEditorSidebar__formControl">\n            <input name="lineWidth"\n                   class="kuiInput visEditorSidebar__input"\n                   type="number"\n                   step="0.5"\n                   ng-model="chart.lineWidth"\n            >\n          </div>\n        </div>\n\n      </div>\n\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CUSTOM_LEGEND_VIS_TYPES=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(2);var _vislib_vis_legend=_interopRequireDefault(__webpack_require__(1252));var _data=__webpack_require__(422);var _modules=__webpack_require__(6);var _vis_filters=__webpack_require__(100);var _eui=__webpack_require__(3);var _utilities=__webpack_require__(41);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CUSTOM_LEGEND_VIS_TYPES=["heatmap","gauge"];exports.CUSTOM_LEGEND_VIS_TYPES=CUSTOM_LEGEND_VIS_TYPES;_modules.uiModules.get("kibana").directive("vislibLegend",function($timeout){return{restrict:"E",template:_vislib_vis_legend.default,link:function link($scope){$scope.legendId=(0,_eui.htmlIdGenerator)()("legend");$scope.open=$scope.uiState.get("vis.legendOpen",true);$scope.$watch("visData",function(data){if(!data)return;$scope.data=data});$scope.$watch("refreshLegend",function(){refresh()});$scope.highlight=function(event){var el=event.currentTarget;var handler=$scope.vis.vislibVis.handler;if(!handler||typeof handler.highlight!=="function"){return}handler.highlight.call(el,handler.el)};$scope.unhighlight=function(event){var el=event.currentTarget;var handler=$scope.vis.vislibVis.handler;if(!handler||typeof handler.unHighlight!=="function"){return}handler.unHighlight.call(el,handler.el)};$scope.setColor=function(label,color){var colors=$scope.uiState.get("vis.colors")||{};if(colors[label]===color)delete colors[label];else colors[label]=color;$scope.uiState.setSilent("vis.colors",null);$scope.uiState.set("vis.colors",colors);$scope.uiState.emit("colorChanged");refresh()};$scope.toggleLegend=function(){var bwcAddLegend=$scope.vis.params.addLegend;var bwcLegendStateDefault=bwcAddLegend==null?true:bwcAddLegend;$scope.open=!$scope.uiState.get("vis.legendOpen",bwcLegendStateDefault);$timeout(function(){$scope.uiState.set("vis.legendOpen",$scope.open)})};$scope.filter=function(legendData,negate){$scope.vis.API.events.filter({data:legendData.values,negate:negate})};$scope.canFilter=function(legendData){if(CUSTOM_LEGEND_VIS_TYPES.includes($scope.vis.vislibVis.visConfigArgs.type)){return false}var filters=(0,_vis_filters.createFiltersFromEvent)({aggConfigs:$scope.tableAggs,data:legendData.values});return filters.length};$scope.onLegendEntryKeydown=function(event){if(event.keyCode===_eui.keyCodes.ESCAPE){event.preventDefault();event.stopPropagation();$scope.shownDetails=undefined}};$scope.toggleDetails=function(label){$scope.shownDetails=$scope.shownDetails===label?undefined:label};$scope.areDetailsVisible=function(label){return $scope.shownDetails===label};$scope.colors=["#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function refresh(){var vislibVis=$scope.vis.vislibVis;if(!vislibVis||!vislibVis.visConfig){$scope.labels=[{label:_i18n.i18n.translate("common.ui.vis.visTypes.legend.loadingLabel",{defaultMessage:"loading…"})}];return}if($scope.uiState.get("vis.legendOpen")==null&&$scope.vis.params.addLegend!=null){$scope.open=$scope.vis.params.addLegend}if(CUSTOM_LEGEND_VIS_TYPES.includes(vislibVis.visConfigArgs.type)){var labels=vislibVis.getLegendLabels();if(labels){$scope.labels=_lodash.default.map(labels,function(label){return{label:label}})}}else{$scope.labels=getLabels($scope.data,vislibVis.visConfigArgs.type)}if(vislibVis.visConfig){$scope.getColor=vislibVis.visConfig.data.getColorFunc()}$scope.tableAggs=(0,_utilities.getTableAggs)($scope.vis)}function getLabels(data,type){if(!data)return[];data=data.columns||data.rows||[data];if(type==="pie")return _data.Data.prototype.pieNames(data);return getSeriesLabels(data)}function getSeriesLabels(data){var values=data.map(function(chart){return chart.series}).reduce(function(a,b){return a.concat(b)},[]);return _lodash.default.compact(_lodash.default.uniq(values,"label")).map(function(label){return _objectSpread({},label,{values:[label.values[0].seriesRaw]})})}}}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visLegend" ng-if="labels.length">\n  <button\n    type="button"\n    ng-click="toggleLegend()"\n    class="kuiCollapseButton visLegend__toggle"\n    ng-class="{\'visLegend__toggle--isOpen\': open}"\n    aria-label="{{::\'common.ui.vis.visTypes.legend.toggleLegendButtonAriaLabel\' | i18n: { defaultMessage: \'Toggle legend\' } }}"\n    aria-expanded="{{!!open}}"\n    aria-controls="{{::legendId}}"\n    data-test-subj="vislibToggleLegend"\n    title="{{::\'common.ui.vis.visTypes.legend.toggleLegendButtonTitle\' | i18n: { defaultMessage: \'Toggle legend\' } }}"\n  >\n    <icon type="\'list\'"></icon>\n  </button>\n  <ul class="visLegend__list" ng-show="open" id="{{::legendId}}">\n\n    <li\n      ng-repeat="legendData in labels track by legendData.label"\n      ng-mouseenter="highlight($event)"\n      ng-mouseleave="unhighlight($event)"\n      data-label="{{legendData.label}}"\n      class="visLegend__value color"\n    >\n\n      <div ng-keydown="onLegendEntryKeydown($event)">\n        <div\n          kbn-accessible-click\n          data-label="{{legendData.label}}"\n          ng-focus="highlight($event)"\n          ng-blur="unhighlight($event)"\n          ng-click="$parent.toggleDetails(legendData.label)"\n          ng-class="$parent.areDetailsVisible(legendData.label) ? \'visLegend__valueTitle--full\' : \'visLegend__valueTitle--truncate\'"\n          class="visLegend__valueTitle"\n          title="{{legendData.label}}"\n          aria-label="{{::\'common.ui.vis.visTypes.legend.toggleOptionsButtonAriaLabel\' | i18n: { defaultMessage: \'{legendDataLabel}, toggle options\', values: { legendDataLabel: legendData.label } } }}"\n          data-test-subj="legend-{{legendData.label}}"\n        >\n          <i\n            class="fa fa-circle"\n            ng-style="{color: getColor(legendData.label)}"\n            data-test-subj="legendSelectedColor-{{getColor(legendData.label)}}"\n          ></i>\n          {{legendData.label}}\n        </div>\n\n        <div ng-if="$parent.areDetailsVisible(legendData.label)" class="visLegend__valueDetails">\n          <div\n            class="kuiButtonGroup kuiButtonGroup--united kuiButtonGroup--fullWidth"\n            ng-show="canFilter(legendData)"\n          >\n            <button\n              class="kuiButton kuiButton--basic kuiButton--small"\n              ng-click="filter(legendData, false)"\n              aria-label="{{::\'common.ui.vis.visTypes.legend.filterForValueButtonAriaLabel\' | i18n: { defaultMessage: \'Filter for value {legendDataLabel}\', values: { legendDataLabel: legendData.label } } }}"\n              data-test-subj="legend-{{legendData.label}}-filterIn"\n            >\n              <span class="kuiIcon fa-search-plus"></span>\n            </button>\n\n            <button\n              class="kuiButton kuiButton--basic kuiButton--small"\n              ng-click="filter(legendData, true)"\n              aria-label="{{::\'common.ui.vis.visTypes.legend.filterOutValueButtonAriaLabel\' | i18n: { defaultMessage: \'Filter out value {legendDataLabel}\', values: { legendDataLabel: legendData.label } } }}"\n              data-test-subj="legend-{{legendData.label}}-filterOut"\n            >\n              <span class="kuiIcon fa-search-minus"></span>\n            </button>\n          </div>\n\n          <div class="visLegend__valueColorPicker" role="listbox">\n            <span\n              id="{{legendId}}ColorPickerDesc"\n              class="euiScreenReaderOnly"\n              i18n-id="common.ui.vis.visTypes.legend.setColorScreenReaderDescription"\n              i18n-default-message="Set color for value {legendDataLabel}"\n              i18n-values="{ legendDataLabel: legendData.label }"\n            >\n            </span>\n            <i\n              ng-repeat="choice in colors"\n              kbn-accessible-click\n              role="option"\n              aria-label="{{choice}}"\n              aria-describedby="{{legendId}}ColorPickerDesc"\n              aria-selected="{{choice === getColor(legendData.label)}}"\n              ng-click="setColor(legendData.label, choice)"\n              ng-class="choice == getColor(legendData.label) ? \'fa-circle-o\' : \'fa-circle\'"\n              ng-style="{color: choice}" class="fa dot visLegend__valueColorPickerDot"\n              data-test-subj="legendSelectColor-{{choice}}"\n            >\n            </i>\n          </div>\n\n        </div>\n      </div>\n\n    </li>\n  </ul>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.injectZeros=injectZeros;var _ordered_x_keys=__webpack_require__(620);var _zero_filled_array=__webpack_require__(1256);var _zero_fill_data_array=__webpack_require__(1257);function injectZeros(obj,data){var orderBucketsBySum=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var keys=(0,_ordered_x_keys.orderXValues)(data,orderBucketsBySum);obj.forEach(function(series){var zeroArray=(0,_zero_filled_array.createZeroFilledArray)(keys,series.label);series.values=(0,_zero_fill_data_array.zeroFillDataArray)(zeroArray,series.values)});return obj}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getUniqKeys=getUniqKeys;var _lodash=__webpack_require__(1);var _flatten_data=__webpack_require__(1255);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getUniqKeys(obj){if(!(0,_lodash.isObject)(obj)){throw new TypeError("getUniqKeys expects an object")}var flattenedData=(0,_flatten_data.flattenData)(obj);var uniqueXValues=new Map;var charts;if(!obj.series){charts=obj.rows?obj.rows:obj.columns}else{charts=[obj]}var isDate=charts.every(function(chart){return chart.ordered&&chart.ordered.date});var isOrdered=charts.every(function(chart){return chart.ordered});var initXValue=function initXValue(key,index){uniqueXValues.set(key,{index:index,isDate:isDate,isOrdered:isOrdered,isNumber:(0,_lodash.isNumber)(key),sum:0})};if(obj.xAxisOrderedValues){obj.xAxisOrderedValues.forEach(initXValue)}flattenedData.forEach(function(d){var key=d.x;var prev=uniqueXValues.get(key);if(!prev){initXValue(key,uniqueXValues.size);prev=uniqueXValues.get(key)}uniqueXValues.set(key,_objectSpread({},prev,{sum:prev.sum+d.y}))});return uniqueXValues}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.flattenData=flattenData;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function flattenData(obj){var charts;if(!_lodash.default.isObject(obj)||!obj.rows&&!obj.columns&&!obj.series){throw new TypeError("flattenData expects an object with a series, rows, or columns key")}if(!obj.series){charts=obj.rows?obj.rows:obj.columns}return(0,_lodash.default)(charts?charts:[obj]).pluck("series").flattenDeep().pluck("values").flattenDeep().filter(Boolean).value()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createZeroFilledArray=createZeroFilledArray;function createZeroFilledArray(arr,label){if(!Array.isArray(arr)){throw new Error("createZeroFilledArray expects an array of strings or numbers")}var zeroFilledArray=[];arr.forEach(function(val){zeroFilledArray.push({x:val,xi:Infinity,y:0,series:label})});return zeroFilledArray}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.zeroFillDataArray=zeroFillDataArray;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function zeroFillDataArray(arr1,arr2){if(!Array.isArray(arr1)||!Array.isArray(arr2)){throw new TypeError("zeroFillDataArray expects 2 arrays")}var i;var val;var index;var max=arr2.length;var getX=function getX(d){return d.x===val.x};for(i=0;i<max;i++){val=arr2[i];index=_lodash.default.findIndex(arr1,getX);arr1.splice(index,1,val)}return arr1}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.labels=labels;var _lodash=_interopRequireDefault(__webpack_require__(1));var _data_array=__webpack_require__(1259);var _uniq_labels=__webpack_require__(1261);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function labels(obj){if(!_lodash.default.isObject(obj)){throw new TypeError("LabelUtil expects an object")}return(0,_uniq_labels.uniqLabels)((0,_data_array.dataArray)(obj))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dataArray=dataArray;var _lodash=_interopRequireDefault(__webpack_require__(1));var _flatten_series=__webpack_require__(1260);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function dataArray(obj){if(!_lodash.default.isObject(obj)||!obj.rows&&!obj.columns&&!obj.series){throw new TypeError("GetArrayUtilService expects an object with a series, rows, or columns key")}if(!obj.series)return(0,_flatten_series.flattenSeries)(obj);return obj.series}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.flattenSeries=flattenSeries;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function flattenSeries(obj){if(!_lodash.default.isObject(obj)||!obj.rows&&!obj.columns){throw new TypeError("GetSeriesUtilService expects an object with either a rows or columns key")}obj=obj.rows?obj.rows:obj.columns;return _lodash.default.chain(obj).pluck("series").flattenDeep().value()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uniqLabels=uniqLabels;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function uniqLabels(arr){if(!Array.isArray(arr)){throw new TypeError("UniqLabelUtil expects an array of objects")}return(0,_lodash.default)(arr).pluck("label").unique().value()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.vislibColor=vislibColor;var _lodash=_interopRequireDefault(__webpack_require__(1));var _mapped_colors=__webpack_require__(621);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function vislibColor(arrayOfStringsOrNumbers,colorMapping){colorMapping=colorMapping||{};if(!Array.isArray(arrayOfStringsOrNumbers)){throw new Error("ColorUtil expects an array")}arrayOfStringsOrNumbers.forEach(function(val){if(!_lodash.default.isString(val)&&!_lodash.default.isNumber(val)&&!_lodash.default.isUndefined(val)){throw new TypeError("ColorUtil expects an array of strings, numbers, or undefined values")}});_mapped_colors.mappedColors.mapKeys(arrayOfStringsOrNumbers);return function(value){return colorMapping[value]||_mapped_colors.mappedColors.get(value)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createColorPalette=createColorPalette;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _seed_colors=__webpack_require__(622);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var offset=300;var fraction=function fraction(goal){var walkTree=function walkTree(numerator,denominator,bytes){if(bytes.length){return walkTree(numerator*2+(bytes.pop()?1:-1),denominator*2,bytes)}else{return numerator/denominator}};var b=(goal+2).toString(2).split("").map(function(num){return parseInt(num,10)});b.shift();return walkTree(1,2,b)};function createColorPalette(num){if(!_lodash.default.isNumber(num)){throw new TypeError("ColorPaletteUtilService expects a number")}var colors=_seed_colors.seedColors;var seedLength=_seed_colors.seedColors.length;_lodash.default.times(num-seedLength,function(i){colors.push(_d.default.hsl((fraction(i+seedLength+1)*360+offset)%360,.5,.5).toString())});return colors}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibProvider=VislibProvider;__webpack_require__(623);__webpack_require__(624);__webpack_require__(625);__webpack_require__(626);__webpack_require__(422);__webpack_require__(627);var _mapped_colors=__webpack_require__(621);var _vis=__webpack_require__(1296);function VislibProvider(Private,$rootScope){$rootScope.$on("$routeChangeStart",function(){return _mapped_colors.mappedColors.purge()});return{version:"0.0.0",Vis:Private(_vis.VislibVisProvider)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.vislibGaugeConfig=vislibGaugeConfig;function vislibGaugeConfig(config){return config}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.columnLayout=columnLayout;var _chart_split=__webpack_require__(1267);var _y_axis_split=__webpack_require__(1268);var _x_axis_split=__webpack_require__(1269);var _chart_title_split=__webpack_require__(1270);function columnLayout(el,data){if(!el||!data){throw new Error("Both an el and data need to be specified")}return[{parent:el,type:"div",class:"visWrapper",datum:data,children:[{type:"div",class:"visAxis--y",children:[{type:"div",class:"visAxis__spacer--y visAxis__spacer--y-top"},{type:"div",class:"visAxis__column--y visAxis__column--left",children:[{type:"div",class:"visAxis__splitTitles--y",splits:_chart_title_split.chartTitleSplit},{type:"div",class:"visAxis__splitAxes--y",splits:_y_axis_split.yAxisSplit}]},{type:"div",class:"visAxis__spacer--y visAxis__spacer--y-bottom"}]},{type:"div",class:"visWrapper__column",children:[{type:"div",class:"visAxis--x visAxis__column--top",children:[{type:"div",class:"visAxis__splitAxes--x",splits:_x_axis_split.xAxisSplit}]},{type:"div",class:"visWrapper__chart",splits:_chart_split.chartSplit},{type:"div",class:"visWrapper__alerts"},{type:"div",class:"visAxis--x visAxis__column--bottom",children:[{type:"div",class:"visAxis__splitAxes--x",splits:_x_axis_split.xAxisSplit},{type:"div",class:"visAxis__splitTitles--x",splits:_chart_title_split.chartTitleSplit}]}]},{type:"div",class:"visAxis--y",children:[{type:"div",class:"visAxis__spacer--y visAxis__spacer--y-top"},{type:"div",class:"visAxis__column--y visAxis__column--right",children:[{type:"div",class:"visAxis__splitAxes--y",splits:_y_axis_split.yAxisSplit}]},{type:"div",class:"visAxis__spacer--y visAxis__spacer--y-bottom"}]}]}]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.chartSplit=chartSplit;var _d=_interopRequireDefault(__webpack_require__(15));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function chartSplit(selection,parent){selection.each(function(data){var div=_d.default.select(this).attr("class",function(){if(data.rows){return"visWrapper__splitCharts--row"}else if(data.columns){return"visWrapper__splitCharts--column"}else{if(parent){return"visWrapper__chart--first visWrapper__chart--last visWrapper__chart"}return this.className+" visWrapper__chart"}});var divClass="";var chartsNumber;var charts=div.selectAll("charts").append("div").data(function(d){if(d.rows){chartsNumber=d.rows.length;return d.rows}else if(d.columns){chartsNumber=d.columns.length;return d.columns}else{divClass="chart";chartsNumber=1;return[d]}}).enter().append("div").attr("class",function(d,i){var fullDivClass=divClass;if(fullDivClass!=="chart"){if(chartsNumber>1){if(i===0){fullDivClass+=" visWrapper__chart--first"}else if(i===chartsNumber-1){fullDivClass+=" visWrapper__chart--last"}}else{fullDivClass+=" visWrapper__chart--first visWrapper__chart--last"}}return fullDivClass});if(!data.series){charts.call(chartSplit)}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.yAxisSplit=yAxisSplit;var _d=_interopRequireDefault(__webpack_require__(15));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function yAxisSplit(selection){selection.each(function(){var div=_d.default.select(this);var rows;div.selectAll(".y-axis-div").append("div").data(function(d){rows=d.rows?d.rows.length:1;return d.rows?d.rows:[d]}).enter().append("div").attr("class",function(d,i){var divClass="";if(i===0){divClass+=" visWrapper__chart--first"}if(i===rows-1){divClass+=" visWrapper__chart--last"}return"y-axis-div axis-div"+divClass})})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.xAxisSplit=xAxisSplit;var _d=_interopRequireDefault(__webpack_require__(15));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function xAxisSplit(selection){selection.each(function(){var div=_d.default.select(this);var columns;div.selectAll(".x-axis-div").append("div").data(function(d){columns=d.columns?d.columns.length:1;return d.columns?d.columns:[d]}).enter().append("div").attr("class",function(d,i){var divClass="";if(i===0){divClass+=" visWrapper__chart--first"}if(i===columns-1){divClass+=" visWrapper__chart--last"}return"x-axis-div axis-div"+divClass})})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.chartTitleSplit=chartTitleSplit;var _d=_interopRequireDefault(__webpack_require__(15));var _jquery=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function chartTitleSplit(selection){selection.each(function(data){var div=_d.default.select(this);var parent=(0,_jquery.default)(this).parents(".visWrapper");if(!data.series){div.selectAll(".chart-title").data(function(d){return d.rows?d.rows:d.columns}).enter().append("div").attr("class","chart-title");if(data.rows){parent.find(".visAxis__splitTitles--x").remove()}else{parent.find(".visAxis__splitTitles--y").remove()}return div}return _d.default.select(this).remove()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pieLayout=pieLayout;var _chart_split=__webpack_require__(1272);var _chart_title_split=__webpack_require__(1273);function pieLayout(el,data){if(!el||!data){throw new Error("Both an el and data need to be specified")}return[{parent:el,type:"div",class:"visWrapper",datum:data,children:[{type:"div",class:"visAxis__splitTitles--y",splits:_chart_title_split.chartTitleSplit},{type:"div",class:"visWrapper__column",children:[{type:"div",class:"visWrapper__chart",splits:_chart_split.chartSplit},{type:"div",class:"visAxis__splitTitles--x",splits:_chart_title_split.chartTitleSplit}]}]}]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.chartSplit=chartSplit;var _d=_interopRequireDefault(__webpack_require__(15));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function chartSplit(selection){selection.each(function(data){var div=_d.default.select(this).attr("class",function(){if(data.rows){return"visWrapper__splitCharts--row"}else if(data.columns){return"visWrapper__splitCharts--column"}else{return"visWrapper__chart"}});var divClass;var charts=div.selectAll("charts").append("div").data(function(d){if(d.rows){divClass="chart-row";return d.rows}else if(d.columns){divClass="chart-column";return d.columns}else{divClass="chart";return[d]}}).enter().append("div").attr("class",function(){return divClass});if(!data.slices){charts.call(chartSplit)}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.chartTitleSplit=chartTitleSplit;var _d=_interopRequireDefault(__webpack_require__(15));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function chartTitleSplit(selection,parent){selection.each(function(data){var div=_d.default.select(this);if(!data.slices){div.selectAll(".chart-title").append("div").data(function(d){return d.rows?d.rows:d.columns}).enter().append("div").attr("class","chart-title");if(data.rows){_d.default.select(parent).select(".visAxis__splitTitles--x").remove()}else{_d.default.select(parent).select(".visAxis__splitTitles--y").remove()}return div}return _d.default.select(this).remove()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.gaugeLayout=gaugeLayout;var _chart_split=__webpack_require__(1275);function gaugeLayout(el,data){if(!el||!data){throw new Error("Both an el and data need to be specified")}return[{parent:el,type:"div",class:"visWrapper",datum:data,children:[{type:"div",class:"visAxis__splitTitles--y"},{type:"div",class:"visWrapper__column",children:[{type:"div",class:"visWrapper__chart",splits:_chart_split.chartSplit},{type:"div",class:"visWrapper__alerts"},{type:"div",class:"visAxis__splitTitles--x"}]}]}]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.chartSplit=chartSplit;var _d=_interopRequireDefault(__webpack_require__(15));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function chartSplit(selection){selection.each(function(data){var div=_d.default.select(this).attr("class",function(){if(data.rows){return"visWrapper__splitCharts--row"}else if(data.columns){return"visWrapper__splitCharts--column"}else{return"visWrapper__chart"}});var divClass;var charts=div.selectAll("charts").append("div").data(function(d){if(d.rows){divClass="chart-row";return d.rows}else if(d.columns){divClass="chart-column";return d.columns}else{divClass="chart";return[d]}}).enter().append("div").attr("class",function(){return divClass});if(!data.series){charts.call(chartSplit)}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeries=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));var _tooltip=__webpack_require__(424);var _chart=__webpack_require__(425);var _time_marker=__webpack_require__(1285);var _series_types=__webpack_require__(1286);var _touchdownTmpl=_interopRequireDefault(__webpack_require__(1291));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var seriTypes=_series_types.seriesTypes;var touchdownTmpl=_lodash.default.template(_touchdownTmpl.default);var PointSeries=function(_Chart){_inherits(PointSeries,_Chart);function PointSeries(handler,chartEl,chartData){var _this;_classCallCheck(this,PointSeries);_this=_possibleConstructorReturn(this,_getPrototypeOf(PointSeries).call(this,handler,chartEl,chartData));_this.handler=handler;_this.chartData=chartData;_this.chartEl=chartEl;_this.chartConfig=_this.findChartConfig();_this.handler.pointSeries=_assertThisInitialized(_this);return _this}_createClass(PointSeries,[{key:"findChartConfig",value:function findChartConfig(){var charts=this.handler.visConfig.get("charts");var chartIndex=this.handler.data.chartData().indexOf(this.chartData);return charts[chartIndex]}},{key:"getSeries",value:function getSeries(seriesId){return this.series.find(function(series){return series.chartData.aggId===seriesId})}},{key:"addBackground",value:function addBackground(svg,width,height){var startX=0;var startY=0;return svg.append("rect").attr("x",startX).attr("y",startY).attr("width",width).attr("height",height).attr("fill","transparent").attr("class","background")}},{key:"addGrid",value:function addGrid(svg){var _svg$node$getBBox=svg.node().getBBox(),width=_svg$node$getBBox.width,height=_svg$node$getBBox.height;return svg.append("g").attr("class","grid").call(this.handler.grid.draw(width,height))}},{key:"addClipPath",value:function addClipPath(svg){var _svg$node$getBBox2=svg.node().getBBox(),width=_svg$node$getBBox2.width,height=_svg$node$getBBox2.height;var startX=0;var startY=0;this.clipPathId="chart-area"+_lodash.default.uniqueId();return svg.append("clipPath").attr("id",this.clipPathId).append("rect").attr("x",startX).attr("y",startY).attr("width",width).attr("height",height)}},{key:"addEvents",value:function addEvents(svg){var isBrushable=this.events.isBrushable();if(isBrushable){this.events.addBrushEvent(svg)}}},{key:"createEndZones",value:function createEndZones(svg){var self=this;var xAxis=this.handler.categoryAxes[0];var xScale=xAxis.getScale();var ordered=xAxis.ordered;var isHorizontal=xAxis.axisConfig.isHorizontal();var missingMinMax=!ordered||_lodash.default.isUndefined(ordered.min)||_lodash.default.isUndefined(ordered.max);if(missingMinMax||ordered.endzones===false)return;var _svg$node$getBBox3=svg.node().getBBox(),width=_svg$node$getBBox3.width,height=_svg$node$getBBox3.height;var oneUnit=(ordered.units||_lodash.default.identity)(1);var drawInverted=isHorizontal||xAxis.axisConfig.get("scale.inverted",false);var size=isHorizontal?width:height;var leftEndzone={x:drawInverted?0:Math.max(xScale(ordered.min),0),w:drawInverted?Math.max(xScale(ordered.min),0):height-Math.max(xScale(ordered.min),0)};var expandLastBucket=xAxis.axisConfig.get("scale.expandLastBucket");var rightLastVal=expandLastBucket?ordered.max:Math.min(ordered.max,_lodash.default.last(xAxis.values));var rightStart=rightLastVal+oneUnit;var rightEndzone={x:drawInverted?xScale(rightStart):0,w:drawInverted?Math.max(size-xScale(rightStart),0):xScale(rightStart)};this.endzones=svg.selectAll(".layer").data([leftEndzone,rightEndzone]).enter().insert("g",".brush").attr("class","endzone").append("rect").attr("class","zone").attr("x",function(d){return isHorizontal?d.x:0}).attr("y",function(d){return isHorizontal?0:d.x}).attr("height",function(d){return isHorizontal?height:d.w}).attr("width",function(d){return isHorizontal?d.w:width});function callPlay(event){var boundData=event.target.__data__;var mouseChartXCoord=event.clientX-self.chartEl.getBoundingClientRect().left;var mouseChartYCoord=event.clientY-self.chartEl.getBoundingClientRect().top;var wholeBucket=boundData&&boundData.x!=null;var min=drawInverted?leftEndzone.w:rightEndzone.w;var max=drawInverted?rightEndzone.x:leftEndzone.x;var xLeft=isHorizontal?mouseChartXCoord:mouseChartYCoord;var xRight=isHorizontal?mouseChartXCoord:mouseChartYCoord;if(wholeBucket){xLeft=xScale(boundData.x);xRight=xScale(xAxis.addInterval(boundData.x))}return{wholeBucket:wholeBucket,touchdown:min>xLeft||max<xRight}}function textFormatter(){return touchdownTmpl(callPlay(_d.default.event))}var endzoneTT=new _tooltip.Tooltip("endzones",this.handler.el,textFormatter,null);this.tooltips.push(endzoneTT);endzoneTT.order=0;endzoneTT.showCondition=function inEndzone(){return callPlay(_d.default.event).touchdown};endzoneTT.render()(svg)}},{key:"calculateRadiusLimits",value:function calculateRadiusLimits(data){this.radii=(0,_lodash.default)(data.series).map(function(series){return _lodash.default.map(series.values,"z")}).flattenDeep().reduce(function(result,val){if(result.min>val)result.min=val;if(result.max<val)result.max=val;return result},{min:Infinity,max:-Infinity})}},{key:"draw",value:function draw(){var self=this;var $elem=(0,_jquery.default)(this.chartEl);var width=this.chartConfig.width=$elem.width();var height=this.chartConfig.height=$elem.height();var xScale=this.handler.categoryAxes[0].getScale();var addTimeMarker=this.chartConfig.addTimeMarker;var times=this.chartConfig.times||[];var div;var svg;return function(selection){selection.each(function(data){var el=this;div=_d.default.select(el);svg=div.append("svg").attr("focusable","false").attr("width",width).attr("height",height);self.addBackground(svg,width,height);self.addGrid(svg);self.addClipPath(svg);self.addEvents(svg);self.createEndZones(svg);self.calculateRadiusLimits(data);self.series=[];_lodash.default.each(self.chartConfig.series,function(seriArgs,i){if(!seriArgs.show)return;var SeriClass=seriTypes[seriArgs.type||self.handler.visConfig.get("chart.type")]||seriTypes.line;var series=new SeriClass(self.handler,svg,data.series[i],seriArgs);series.events=self.events;svg.call(series.draw());self.series.push(series)});if(addTimeMarker){var toTime=new Date(xScale.domain()[1].getTime()+6e4);var currentTime=new Date;if(toTime>currentTime){new _time_marker.TimeMarker(times,xScale,height).render(svg)}}return svg})}}}]);return PointSeries}(_chart.Chart);exports.PointSeries=PointSeries},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Tooltip=Tooltip;exports.TooltipProvider=TooltipProvider;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _binder=__webpack_require__(628);var _position_tooltip=__webpack_require__(1279);var _jquery=_interopRequireDefault(__webpack_require__(12));var _eui_theme_light=_interopRequireDefault(__webpack_require__(643));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var allContents=[];var tooltipColumnPadding=parseInt(_eui_theme_light.default.euiSizeXS||0,10)*2;var tooltipTableMargin=parseInt(_eui_theme_light.default.euiSizeS||0,10)*2;var tooltipMaxWidth=parseInt(_eui_theme_light.default.euiSizeXL||0,10)*10;function Tooltip(id,el,formatter,events){if(!(this instanceof Tooltip)){return new Tooltip(id,el,formatter,events)}this.id=id;this.el=el;this.order=100;this.formatter=formatter;this.events=events;this.containerClass="visWrapper";this.tooltipClass="visTooltip";this.tooltipSizerClass="visTooltip__sizingClone";this.showCondition=_lodash.default.constant(true);this.binder=new _binder.Binder}Tooltip.prototype.$get=_lodash.default.once(function(){return(0,_jquery.default)("<div>").addClass(this.tooltipClass).appendTo(document.body)});Tooltip.prototype.$getSizer=_lodash.default.once(function(){return this.$get().clone().removeClass(this.tooltipClass).addClass(this.tooltipSizerClass).appendTo(document.body)});Tooltip.prototype.show=function(){var $tooltip=this.$get();var $chart=this.$getChart();var html=$tooltip.html();if(!$chart)return;var placement=(0,_position_tooltip.positionTooltip)({$window:(0,_jquery.default)(window),$chart:$chart,$el:$tooltip,$sizer:this.$getSizer(),event:_d.default.event},html);$tooltip.css({visibility:"visible",left:placement.left,top:placement.top});var tooltipColumns=$tooltip.find("tbody > tr:nth-of-type(1) > td").length;if(tooltipColumns===2){var tooltipWidth=$tooltip.outerWidth();var valueColumn=$tooltip.find("tr:nth-of-type(1) > td:nth-child(2)");if(valueColumn.length!==1){return}var valueColumnSize=valueColumn.outerWidth();var isGratherThanHalf=valueColumnSize>tooltipWidth/2;var containerMaxWidth=isGratherThanHalf?tooltipWidth/2-tooltipTableMargin-tooltipColumnPadding*2:tooltipWidth-valueColumnSize-tooltipTableMargin-tooltipColumnPadding;$tooltip.find(".visTooltip__labelContainer").css({"max-width":containerMaxWidth});if(isGratherThanHalf&&tooltipWidth===tooltipMaxWidth){$tooltip.find(".visTooltip__valueContainer").css({"max-width":containerMaxWidth})}}else if(tooltipColumns===3){var _tooltipWidth=$tooltip.outerWidth();var _valueColumn=$tooltip.find("tr:nth-of-type(1) > td:nth-child(3)");if(_valueColumn.length!==1){return}var _valueColumnSize=_valueColumn.outerWidth();var _containerMaxWidth=(_tooltipWidth-_valueColumnSize-tooltipTableMargin)/2-tooltipColumnPadding;$tooltip.find(".visTooltip__labelContainer").css({"max-width":_containerMaxWidth})}};Tooltip.prototype.hide=function(){var $tooltip=this.$get();allContents=[];$tooltip.css({visibility:"hidden",left:"-500px",top:"-500px"})};Tooltip.prototype.$getChart=function(){var chart=(0,_jquery.default)(this.container&&this.container.node());return chart.length?chart:false};Tooltip.prototype.render=function(){var self=this;return function(selection){var $tooltip=self.$get();var id=self.id;var order=self.order;if(self.container===undefined||self.container!==_d.default.select(self.el).select("."+self.containerClass)){self.container=_d.default.select(self.el).select("."+self.containerClass)}var $chart=self.$getChart();if($chart){self.binder.jqOn($chart,"mouseleave",function(){$chart.removeData("previousPlacement")})}selection.each(function(d,i){var element=_d.default.select(this);function render(html){allContents=_lodash.default.filter(allContents,function(content){return content.id!==id});if(html)allContents.push({id:id,html:html,order:order});var allHtml=(0,_lodash.default)(allContents).sortBy("order").pluck("html").compact().join("\n");if(allHtml){$tooltip.html(allHtml);self.show()}else{self.hide()}}self.binder.fakeD3Bind(this,"mousemove",function(){if(!self.showCondition.call(element,d,i)){return render()}var events=self.events?self.events.eventResponse(d,i):d;return render(self.formatter(events))});self.binder.fakeD3Bind(this,"mouseleave",function(){render()})})}};Tooltip.prototype.destroy=function(){this.hide();this.binder.destroy()};function TooltipProvider(){return Tooltip}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Binder=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _jquery=_interopRequireDefault(__webpack_require__(12));var _binder=__webpack_require__(388);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Binder=function(_BinderBase){_inherits(Binder,_BinderBase);function Binder($scope){var _this;_classCallCheck(this,Binder);_this=_possibleConstructorReturn(this,_getPrototypeOf(Binder).call(this));if($scope){$scope.$on("$destroy",function(){return _this.destroy()})}return _this}_createClass(Binder,[{key:"jqOn",value:function jqOn(el){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var $el=(0,_jquery.default)(el);$el.on.apply($el,args);this.disposal.push(function(){return $el.off.apply($el,args)})}},{key:"fakeD3Bind",value:function fakeD3Bind(el,event,handler){var _this2=this;this.jqOn(el,event,function(e){var o=_d.default.event;_d.default.event=e;try{handler.apply(_this2,[_this2.__data__])}finally{_d.default.event=o}})}}]);return Binder}(_binder.BinderBase);exports.Binder=Binder},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.positionTooltip=positionTooltip;var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var OFFSET=10;var $clone;var propDirs={top:"north",left:"west"};function positionTooltip(opts,html){if(!opts)return;var $chart=(0,_jquery.default)(opts.$chart);var $el=(0,_jquery.default)(opts.$el);var $window=(0,_jquery.default)(opts.$window||window);var $sizer=(0,_jquery.default)(opts.$sizer);var prev=$chart.data("previousPlacement")||{};var event=opts.event;if(!$chart.length||!$el.length)return;var size=getTtSize(html||$el.html(),$sizer);var pos=getBasePosition(size,event);var overflow=getOverflow(size,pos,[$chart,$window]);var placement=placeToAvoidOverflow(pos,prev,overflow);$chart.data("previousPlacement",placement);return placement}function getTtSize(ttHtml,$sizer){if($sizer.html()!==ttHtml){$sizer.html(ttHtml)}var size={width:$sizer.outerWidth(),height:$sizer.outerHeight()};return size}function getBasePosition(size,event){return{east:event.clientX+OFFSET,west:event.clientX-size.width-OFFSET,south:event.clientY+OFFSET,north:event.clientY-size.height-OFFSET}}function getBounds($el){var bounds=_jquery.default.isWindow($el[0])?{top:0,left:0}:$el.offset();bounds.top+=$el.scrollTop();bounds.left+=$el.scrollLeft();bounds.bottom=bounds.top+$el.outerHeight();bounds.right=bounds.left+$el.outerWidth();bounds.area=(bounds.bottom-bounds.top)*(bounds.right-bounds.left);return bounds}function getOverflow(size,pos,containers){var overflow={};containers.map(getBounds).sort(function(a,b){return a.area-b.area}).forEach(function(bounds){mergeOverflows(overflow,{north:bounds.top-pos.north,east:pos.east+size.width-bounds.right,south:pos.south+size.height-bounds.bottom,west:bounds.left-pos.west})});(window.overflows||(window.overflows=[])).push(overflow);return overflow}function mergeOverflows(dest,src){_lodash.default.merge(dest,src,function(a,b){if(a==null||b==null)return a||b;if(a<0&&b<0)return Math.min(a,b);return Math.max(a,b)});if(dest.east&&dest.west&&dest.east>0&&dest.west>0&&(src.east<0||src.west<0)){if(src.east<src.west){dest.east=src.east}else{dest.west=src.west}}}function pickPlacement(prop,pos,overflow,prev,pref,fallback,placement){var stash="_"+prop;var dirs=_lodash.default.unique([prev[stash],pref,fallback].filter(Boolean));var dir;var value;for(var i=0;i<dirs.length;i++){dir=dirs[i];if(overflow[dir]>0)continue;value=pos[dir];break}if(value==null){dir=dirs[0];var offset=overflow[dir];if(propDirs[prop]===dir){offset=offset*-1}value=pos[dir]-offset}placement[prop]=value;placement[stash]=dir}function placeToAvoidOverflow(pos,prev,overflow){var placement={};pickPlacement("top",pos,overflow,prev,"south","north",placement);pickPlacement("left",pos,overflow,prev,"east","west",placement);return placement}positionTooltip.getTtSize=getTtSize;positionTooltip.getBasePosition=getBasePosition;positionTooltip.getOverflow=getOverflow;positionTooltip.getBounds=getBounds;positionTooltip.placeToAvoidOverflow=placeToAvoidOverflow;positionTooltip.removeClone=function(){$clone&&$clone.remove();$clone=null}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dataLabel=dataLabel;var _d=_interopRequireDefault(__webpack_require__(15));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function dataLabel(selection,label){_d.default.select(selection).attr("data-label",label)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Dispatch=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=__webpack_require__(1);var _jquery=_interopRequireDefault(__webpack_require__(12));var _simple_emitter=__webpack_require__(393);var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var config=_chrome.default.getUiSettingsClient();var Dispatch=function(_SimpleEmitter){_inherits(Dispatch,_SimpleEmitter);function Dispatch(handler){var _this;_classCallCheck(this,Dispatch);_this=_possibleConstructorReturn(this,_getPrototypeOf(Dispatch).call(this));_this.handler=handler;_this._listeners={};return _this}_createClass(Dispatch,[{key:"_pieClickResponse",value:function _pieClickResponse(data){var points=[];var dataPointer=data;while(dataPointer&&dataPointer.rawData){points.push(dataPointer.rawData);dataPointer=dataPointer.parent}if((0,_lodash.get)(data,"rawData.table.$parent")){var _get=(0,_lodash.get)(data,"rawData.table.$parent"),table=_get.table,column=_get.column,row=_get.row,key=_get.key;points.push({table:table,column:column,row:row,value:key})}return points}},{key:"_seriesClickResponse",value:function _seriesClickResponse(data){var points=[];["xRaw","yRaw","zRaw","seriesRaw","rawData","tableRaw"].forEach(function(val){if(data[val]&&data[val].column!==undefined&&data[val].row!==undefined){points.push(data[val])}});return points}},{key:"clickEventResponse",value:function clickEventResponse(d){var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var isSlices=props.isSlices;if(isSlices===undefined){var _data=_d.default.event.target.nearestViewportElement?_d.default.event.target.nearestViewportElement.__data__:_d.default.event.target.__data__;isSlices=!!(_data&&_data.slices)}var data=d.input||d;return{e:_d.default.event,data:isSlices?this._pieClickResponse(data):this._seriesClickResponse(data)}}},{key:"_isSeriesInPercentageMode",value:function _isSeriesInPercentageMode(rawId,series,visConfig){if(!rawId||!Array.isArray(series)||!visConfig){return false}var _series$find=series.find(function(series){return series.rawId===rawId}),id=_series$find.id;if(!id){return false}var seriesParams=visConfig.get("seriesParams",[]);var _ref=seriesParams.find(function(param){return param.data.id===id})||{},valueAxisId=_ref.valueAxis;if(!valueAxisId){return false}var usedValueAxis=visConfig.get("valueAxes",[]).find(function(valueAxis){return valueAxis.id===valueAxisId});return(0,_lodash.get)(usedValueAxis,"scale.mode")==="percentage"}},{key:"eventResponse",value:function eventResponse(d,i){var datum=d._input||d;var data=_d.default.event.target.nearestViewportElement?_d.default.event.target.nearestViewportElement.__data__:_d.default.event.target.__data__;var label=d.label?d.label:d.series||"Count";var isSeries=!!(data&&data.series);var isSlices=!!(data&&data.slices);var series=isSeries?data.series:undefined;var slices=isSlices?data.slices:undefined;var handler=this.handler;var color=(0,_lodash.get)(handler,"data.color");var config=handler&&handler.visConfig;var isPercentageMode=this._isSeriesInPercentageMode(d.seriesId,series,config);var eventData={value:d.y,point:datum,datum:datum,label:label,color:color?color(label):undefined,pointIndex:i,series:series,slices:slices,config:config,data:data,e:_d.default.event,handler:handler,isPercentageMode:isPercentageMode};return eventData}},{key:"addEvent",value:function addEvent(event,callback){return function(selection){selection.each(function(){var element=_d.default.select(this);if(typeof callback==="function"){return element.on(event,callback)}})}}},{key:"addHoverEvent",value:function addHoverEvent(){var self=this;var isClickable=this.listenerCount("click")>0;var addEvent=this.addEvent;var $el=this.handler.el;if(!this.handler.highlight){this.handler.highlight=self.highlight}function hover(d,i){if(isClickable){self.addMousePointer.call(this,arguments)}self.handler.highlight.call(this,$el);self.emit("hover",self.eventResponse(d,i))}return addEvent("mouseover",hover)}},{key:"addMouseoutEvent",value:function addMouseoutEvent(){var self=this;var addEvent=this.addEvent;var $el=this.handler.el;if(!this.handler.unHighlight){this.handler.unHighlight=self.unHighlight}function mouseout(){self.handler.unHighlight.call(this,$el)}return addEvent("mouseout",mouseout)}},{key:"addClickEvent",value:function addClickEvent(){var _this2=this;var onClick=function onClick(d){return _this2.emit("click",_this2.clickEventResponse(d))};return this.addEvent("click",onClick)}},{key:"allowBrushing",value:function allowBrushing(){var xAxis=this.handler.categoryAxes[0];return Boolean(xAxis.ordered)}},{key:"isBrushable",value:function isBrushable(){return this.allowBrushing()&&this.listenerCount("brush")>0}},{key:"addBrushEvent",value:function addBrushEvent(svg){if(!this.isBrushable())return;var xScale=this.handler.categoryAxes[0].getScale();this.createBrush(xScale,svg)}},{key:"addMousePointer",value:function addMousePointer(){return _d.default.select(this).style("cursor","pointer")}},{key:"highlight",value:function highlight(element){var label=this.getAttribute("data-label");if(!label)return;var dimming=config.get("visualization:dimmingOpacity");(0,_jquery.default)(element).parent().find("[data-label]").css("opacity",1).not(function(els,el){return String((0,_jquery.default)(el).data("label"))===label}).css("opacity",justifyOpacity(dimming))}},{key:"unHighlight",value:function unHighlight(element){(0,_jquery.default)("[data-label]",element.parentNode).css("opacity",1)}},{key:"createBrush",value:function createBrush(xScale,svg){var self=this;var visConfig=self.handler.visConfig;var _svg$node$getBBox=svg.node().getBBox(),width=_svg$node$getBBox.width,height=_svg$node$getBBox.height;var isHorizontal=self.handler.categoryAxes[0].axisConfig.isHorizontal();var brush=_d.default.svg.brush();if(isHorizontal){brush.x(xScale)}else{brush.y(xScale)}brush.on("brushend",function brushEnd(){var data=_d.default.select(this).data()[0];var isTimeSeries=data.ordered&&data.ordered.date;var selected=xScale.domain().filter(function(d){return brush.extent()[0]<=xScale(d)&&xScale(d)<=brush.extent()[1]});var range=isTimeSeries?brush.extent():selected;return self.emit("brush",{range:range,config:visConfig,e:_d.default.event,data:data})});if(self.listenerCount("brush")){var rect=svg.insert("g","g").attr("class","brush").call(brush).call(function(brushG){var brushHandler=brushG.on("mousedown.brush");if(!brushHandler)return;brushG.on("mousedown.brush",function(){if(validBrushClick(_d.default.event))brushHandler.apply(this,arguments)})}).selectAll("rect");if(isHorizontal){rect.attr("height",height)}else{rect.attr("width",width)}return brush}}}]);return Dispatch}(_simple_emitter.SimpleEmitter);exports.Dispatch=Dispatch;function validBrushClick(event){return event.button===0}function justifyOpacity(opacity){var decimalNumber=parseFloat(opacity,10);var fallbackOpacity=.5;return 0<=decimalNumber&&decimalNumber<=1?decimalNumber:fallbackOpacity}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.collectBranch=collectBranch;function collectBranch(leaf){function walk(item,memo){var depth=item.depth-1;function getFieldName(i){if(i.rawData&&i.rawData.column>-1){var _i$rawData=i.rawData,column=_i$rawData.column,table=_i$rawData.table;return table.columns[column].name}return i.name||"level ".concat(i.depth)}memo.unshift({depth:depth,field:getFieldName(item),bucket:item.name,metric:item.size,item:item});if(item.parent&&item.parent.parent){return walk(item.parent,memo)}else{return memo}}return walk(leaf,[])}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<table class="visTooltip__table">\n  <thead>\n    <tr class="eui-textLeft visTooltip__label">\n      <th\n        scope="col"\n        i18n-id="common.ui.aggResponse.fieldLabel"\n        i18n-default-message="field"\n      ></th>\n      <th\n        scope="col"\n        i18n-id="common.ui.aggResponse.valueLabel"\n        i18n-default-message="value"\n      ></th>\n      <th scope="col">{{metricCol.label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="visTooltip__value" ng-repeat="row in rows track by $index">\n      <td>\n        <div class="visTooltip__labelContainer"><span ng-bind-html="row.spacer"></span>{{row.field}}</div>\n      </td>\n      <td>\n        <div class="visTooltip__labelContainer">{{row.bucket}}\n      </td>\n      <td>{{row.metric}}</td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<table>\n  <tbody>\n    <tr ng-repeat="detail in details" >\n      <td class="visTooltip__label">\n        <div class="visTooltip__labelContainer">{{detail.label}}</div>\n      </td>\n      <td class="visTooltip__value">\n        <div class="visTooltip__valueContainer">{{detail.value}}<span ng-if="detail.percent"> ({{detail.percent}})</span></div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeMarker=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _datemath=_interopRequireDefault(__webpack_require__(55));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var TimeMarker=function(){function TimeMarker(times,xScale,height){_classCallCheck(this,TimeMarker);var currentTimeArr=[{time:(new Date).getTime(),class:"time-marker",color:"#c80000",opacity:.3,width:2}];this.xScale=xScale;this.height=height;this.times=times.length?times.map(function(d){return{time:_datemath.default.parse(d.time),class:d.class||"time-marker",color:d.color||"#c80000",opacity:d.opacity||.3,width:d.width||2}}):currentTimeArr}_createClass(TimeMarker,[{key:"_isTimeBasedChart",value:function _isTimeBasedChart(selection){var data=selection.data();return data.every(function(datum){return datum.ordered&&datum.ordered.date})}},{key:"render",value:function render(selection){var self=this;if(!self._isTimeBasedChart(selection))return;selection.each(function(){_d.default.select(this).selectAll("time-marker").data(self.times).enter().append("line").attr("class",function(d){return d.class}).attr("pointer-events","none").attr("stroke",function(d){return d.color}).attr("stroke-width",function(d){return d.width}).attr("stroke-opacity",function(d){return d.opacity}).attr("x1",function(d){return self.xScale(d.time)}).attr("x2",function(d){return self.xScale(d.time)}).attr("y1",self.height).attr("y2",self.xScale.range()[0])})}}]);return TimeMarker}();exports.TimeMarker=TimeMarker},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.seriesTypes=void 0;var _column_chart=__webpack_require__(1287);var _line_chart=__webpack_require__(1288);var _area_chart=__webpack_require__(1289);var _heatmap_chart=__webpack_require__(1290);var seriesTypes={histogram:_column_chart.ColumnChart,line:_line_chart.LineChart,area:_area_chart.AreaChart,heatmap:_heatmap_chart.HeatmapChart};exports.seriesTypes=seriesTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColumnChart=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _d=_interopRequireDefault(__webpack_require__(15));var _services=__webpack_require__(113);var _point_series=__webpack_require__(360);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var defaults={mode:"normal",showTooltip:true,color:undefined,fillColor:undefined,showLabel:true};function datumWidth(defaultWidth,datum,nextDatum,scale,gutterWidth){var groupCount=arguments.length>5&&arguments[5]!==undefined?arguments[5]:1;var datumWidth=defaultWidth;if(nextDatum){datumWidth=(scale(nextDatum.x)-scale(datum.x)-gutterWidth)/groupCount;if(datumWidth>defaultWidth){datumWidth=defaultWidth}}return datumWidth}var ColumnChart=function(_PointSeries){_inherits(ColumnChart,_PointSeries);function ColumnChart(handler,chartEl,chartData,seriesConfigArgs){var _this;_classCallCheck(this,ColumnChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(ColumnChart).call(this,handler,chartEl,chartData,seriesConfigArgs));_this.seriesConfig=_lodash.default.defaults(seriesConfigArgs||{},defaults);_this.labelOptions=_lodash.default.defaults(handler.visConfig.get("labels",{}),defaults.showLabel);return _this}_createClass(ColumnChart,[{key:"addBars",value:function addBars(svg,data){var self=this;var color=this.handler.data.getColorFunc();var tooltip=this.baseChart.tooltip;var isTooltip=this.handler.visConfig.get("tooltip.show");var layer=svg.append("g").attr("class","series histogram").attr("clip-path","url(#"+this.baseChart.clipPathId+")");var bars=layer.selectAll("rect").data(data.values.filter(function(d){return!_lodash.default.isNull(d.y)}));bars.exit().remove();bars.enter().append("rect").attr("data-label",data.label).attr("fill",function(){return color(data.label)}).attr("stroke",function(){return color(data.label)});self.updateBars(bars);if(isTooltip){bars.call(tooltip.render())}return bars}},{key:"updateBars",value:function updateBars(bars){if(this.seriesConfig.mode==="stacked"){return this.addStackedBars(bars)}return this.addGroupedBars(bars)}},{key:"addStackedBars",value:function addStackedBars(bars){var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var isTimeScale=this.getCategoryAxis().axisConfig.isTimeDomain();var isLabels=this.labelOptions.show;var yMin=yScale.domain()[0];var gutterSpacingPercentage=.15;var chartData=this.chartData;var groupCount=this.getGroupedCount();var groupNum=this.getGroupedNum(this.chartData);var barWidth;var gutterWidth;if(isTimeScale){var _this$handler$data$ge=this.handler.data.get("ordered"),min=_this$handler$data$ge.min,interval=_this$handler$data$ge.interval;var intervalWidth=xScale(min+interval)-xScale(min);intervalWidth=Math.abs(intervalWidth);gutterWidth=intervalWidth*gutterSpacingPercentage;barWidth=(intervalWidth-gutterWidth)/groupCount}function x(d,i){if(isTimeScale){return xScale(d.x)+datumWidth(barWidth,d,bars.data()[i+1],xScale,gutterWidth,groupCount)*groupNum}return xScale(d.x)+xScale.rangeBand()/groupCount*groupNum}function y(d){if(isHorizontal&&d.y<0||!isHorizontal&&d.y>0){return yScale(d.y0)}return yScale(d.y0+d.y)}function labelX(d,i){return x(d,i)+widthFunc(d,i)/2}function labelY(d){return y(d)+heightFunc(d)/2}function labelDisplay(d,i){if(isHorizontal&&this.getBBox().width>widthFunc(d,i))return"none";if(!isHorizontal&&this.getBBox().width>heightFunc(d))return"none";if(isHorizontal&&this.getBBox().height>heightFunc(d))return"none";if(!isHorizontal&&this.getBBox().height>widthFunc(d,i))return"none";return"block"}function widthFunc(d,i){if(isTimeScale){return datumWidth(barWidth,d,bars.data()[i+1],xScale,gutterWidth,groupCount)}return xScale.rangeBand()/groupCount}function heightFunc(d){if(d.y0===0&&yMin>0){return yScale(yMin)-yScale(d.y)}return Math.abs(yScale(d.y0)-yScale(d.y0+d.y))}function formatValue(d){return chartData.yAxisFormatter(d.y)}bars.attr("x",isHorizontal?x:y).attr("width",isHorizontal?widthFunc:heightFunc).attr("y",isHorizontal?y:x).attr("height",isHorizontal?heightFunc:widthFunc);var layer=_d.default.select(bars[0].parentNode);var barLabels=layer.selectAll("text").data(chartData.values.filter(function(d){return!_lodash.default.isNull(d.y)}));if(isLabels){var colorFunc=this.handler.data.getColorFunc();var d3Color=_d.default.rgb(colorFunc(chartData.label));var labelClass;if((0,_services.isColorDark)(d3Color.r,d3Color.g,d3Color.b)){labelClass="visColumnChart__bar-label--light"}else{labelClass="visColumnChart__bar-label--dark"}barLabels.enter().append("text").text(formatValue).attr("class","visColumnChart__barLabel visColumnChart__barLabel--stack ".concat(labelClass)).attr("x",isHorizontal?labelX:labelY).attr("y",isHorizontal?labelY:labelX).attr("display",labelDisplay)}return bars}},{key:"addGroupedBars",value:function addGroupedBars(bars){var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var chartData=this.chartData;var groupCount=this.getGroupedCount();var groupNum=this.getGroupedNum(this.chartData);var gutterSpacingPercentage=.15;var isTimeScale=this.getCategoryAxis().axisConfig.isTimeDomain();var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var isLogScale=this.getValueAxis().axisConfig.isLogScale();var isLabels=this.labelOptions.show;var barWidth;var gutterWidth;if(isTimeScale){var _this$handler$data$ge2=this.handler.data.get("ordered"),min=_this$handler$data$ge2.min,interval=_this$handler$data$ge2.interval;var intervalWidth=xScale(min+interval)-xScale(min);intervalWidth=Math.abs(intervalWidth);gutterWidth=intervalWidth*gutterSpacingPercentage;barWidth=(intervalWidth-gutterWidth)/groupCount}function x(d,i){if(isTimeScale){return xScale(d.x)+datumWidth(barWidth,d,bars.data()[i+1],xScale,gutterWidth,groupCount)*groupNum}return xScale(d.x)+xScale.rangeBand()/groupCount*groupNum}function y(d){if(isHorizontal&&d.y<0||!isHorizontal&&d.y>0){return yScale(0)}return yScale(d.y)}function labelX(d,i){return x(d,i)+widthFunc(d,i)/2}function labelY(d){if(isHorizontal){return d.y>=0?y(d)-4:y(d)+heightFunc(d)+this.getBBox().height}return d.y>=0?y(d)+heightFunc(d)+4:y(d)-this.getBBox().width-4}function labelDisplay(d,i){if(isHorizontal&&this.getBBox().width>widthFunc(d,i)){return"none"}if(!isHorizontal&&this.getBBox().height>widthFunc(d)){return"none"}return"block"}function widthFunc(d,i){if(isTimeScale){return datumWidth(barWidth,d,bars.data()[i+1],xScale,gutterWidth,groupCount)}return xScale.rangeBand()/groupCount}function heightFunc(d){var baseValue=isLogScale?1:0;return Math.abs(yScale(baseValue)-yScale(d.y))}function formatValue(d){return chartData.yAxisFormatter(d.y)}bars.attr("x",isHorizontal?x:y).attr("width",isHorizontal?widthFunc:heightFunc).attr("y",isHorizontal?y:x).attr("height",isHorizontal?heightFunc:widthFunc);var layer=_d.default.select(bars[0].parentNode);var barLabels=layer.selectAll("text").data(chartData.values.filter(function(d){return!_lodash.default.isNull(d.y)}));barLabels.exit().remove();if(isLabels){var labelColor=this.handler.data.getColorFunc()(chartData.label);barLabels.enter().append("text").text(formatValue).attr("class","visColumnChart__barLabel").attr("x",isHorizontal?labelX:labelY).attr("y",isHorizontal?labelY:labelX).attr("dominant-baseline",isHorizontal?"auto":"central").attr("text-anchor",isHorizontal?"middle":"start").attr("fill",labelColor).attr("display",labelDisplay)}return bars}},{key:"draw",value:function draw(){var self=this;return function(selection){selection.each(function(){var svg=self.chartEl.append("g");svg.data([self.chartData]);var bars=self.addBars(svg,self.chartData);self.addCircleEvents(bars);if(self.thresholdLineOptions.show){self.addThresholdLine(self.chartEl)}self.events.emit("rendered",{chart:self.chartData});return svg})}}}]);return ColumnChart}(_point_series.PointSeries);exports.ColumnChart=ColumnChart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LineChart=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _point_series=__webpack_require__(360);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var defaults={mode:"normal",showCircles:true,radiusRatio:9,showLines:true,interpolate:"linear",lineWidth:2,color:undefined,fillColor:undefined};var LineChart=function(_PointSeries){_inherits(LineChart,_PointSeries);function LineChart(handler,chartEl,chartData,seriesConfigArgs){var _this;_classCallCheck(this,LineChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(LineChart).call(this,handler,chartEl,chartData,seriesConfigArgs));_this.seriesConfig=_lodash.default.defaults(seriesConfigArgs||{},defaults);return _this}_createClass(LineChart,[{key:"addCircles",value:function addCircles(svg,data){var self=this;var showCircles=this.seriesConfig.showCircles;var color=this.handler.data.getColorFunc();var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var ordered=this.handler.data.get("ordered");var tooltip=this.baseChart.tooltip;var isTooltip=this.handler.visConfig.get("tooltip.show");var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var lineWidth=this.seriesConfig.lineWidth;var radii=this.baseChart.radii;var radiusStep=(radii.max-radii.min||radii.max*100)/Math.pow(this.seriesConfig.radiusRatio,2);var layer=svg.append("g").attr("class","points line").attr("clip-path","url(#"+this.baseChart.clipPathId+")");var circles=layer.selectAll("circle").data(function appendData(){return data.values.filter(function(d){return!_lodash.default.isNull(d.y)&&(d.y||!d.y0)})});circles.exit().remove();function cx(d){if(ordered&&ordered.date){return xScale(d.x)}return xScale(d.x)+xScale.rangeBand()/2}function cy(d){var y0=d.y0||0;var y=d.y||0;return yScale(y0+y)}function cColor(d){return color(d.series)}function colorCircle(d){var parent=_d.default.select(this).node().parentNode;var lengthOfParent=_d.default.select(parent).data()[0].length;var isVisible=lengthOfParent===1;if(!showCircles&&!isVisible)return"none";return cColor(d)}function getCircleRadiusFn(modifier){return function getCircleRadius(d){var width=self.baseChart.chartConfig.width;var height=self.baseChart.chartConfig.height;var circleRadius=(d.z-radii.min)/radiusStep;var baseMagicNumber=2;var base=circleRadius?Math.sqrt(circleRadius+baseMagicNumber)+lineWidth:lineWidth;return _lodash.default.min([base,width,height])+(modifier||0)}}circles.enter().append("circle").attr("r",getCircleRadiusFn()).attr("fill-opacity",this.seriesConfig.drawLinesBetweenPoints?1:.7).attr("cx",isHorizontal?cx:cy).attr("cy",isHorizontal?cy:cx).attr("class","circle-decoration").attr("data-label",data.label).attr("fill",colorCircle);circles.enter().append("circle").attr("r",getCircleRadiusFn(10)).attr("cx",isHorizontal?cx:cy).attr("cy",isHorizontal?cy:cx).attr("fill","transparent").attr("class","circle").attr("data-label",data.label).attr("stroke",cColor).attr("stroke-width",0);if(isTooltip){circles.call(tooltip.render())}return circles}},{key:"addLine",value:function addLine(svg,data){var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var color=this.handler.data.getColorFunc();var ordered=this.handler.data.get("ordered");var lineWidth=this.seriesConfig.lineWidth;var interpolate=this.seriesConfig.interpolate;var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var line=svg.append("g").attr("class","pathgroup lines").attr("clip-path","url(#"+this.baseChart.clipPathId+")");function cx(d){if(ordered&&ordered.date){return xScale(d.x)}return xScale(d.x)+xScale.rangeBand()/2}function cy(d){var y=d.y||0;var y0=d.y0||0;return yScale(y0+y)}line.append("path").attr("data-label",data.label).attr("d",function(){var d3Line=_d.default.svg.line().defined(function(d){return!_lodash.default.isNull(d.y)}).interpolate(interpolate).x(isHorizontal?cx:cy).y(isHorizontal?cy:cx);return d3Line(data.values)}).attr("fill","none").attr("stroke",function(){return color(data.label)}).attr("stroke-width",lineWidth);return line}},{key:"draw",value:function draw(){var self=this;return function(selection){selection.each(function(){var svg=self.chartEl.append("g");svg.data([self.chartData]);if(self.seriesConfig.drawLinesBetweenPoints){self.addLine(svg,self.chartData)}var circles=self.addCircles(svg,self.chartData);self.addCircleEvents(circles);if(self.thresholdLineOptions.show){self.addThresholdLine(self.chartEl)}self.events.emit("rendered",{chart:self.chartData});return svg})}}}]);return LineChart}(_point_series.PointSeries);exports.LineChart=LineChart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AreaChart=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));var _point_series=__webpack_require__(360);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var defaults={mode:"normal",showCircles:true,radiusRatio:9,showLines:true,interpolate:"linear",color:undefined,fillColor:undefined};var AreaChart=function(_PointSeries){_inherits(AreaChart,_PointSeries);function AreaChart(handler,chartEl,chartData,seriesConfigArgs){var _this;_classCallCheck(this,AreaChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(AreaChart).call(this,handler,chartEl,chartData,seriesConfigArgs));_this.seriesConfig=_lodash.default.defaults(seriesConfigArgs||{},defaults);_this.isOverlapping=_this.seriesConfig.mode!=="stacked";if(_this.isOverlapping){var defaultOpacity=.6;_this.seriesConfig.defaultOpacity=defaultOpacity;handler.highlight=function(element){var label=this.getAttribute("data-label");if(!label)return;var highlightOpacity=.8;var highlightElements=(0,_jquery.default)("[data-label]",element.parentNode).filter(function(els,el){return"".concat((0,_jquery.default)(el).data("label"))===label});(0,_jquery.default)("[data-label]",element.parentNode).not(highlightElements).css("opacity",defaultOpacity/2);highlightElements.css("opacity",highlightOpacity)};handler.unHighlight=function(element){(0,_jquery.default)("[data-label]",element).css("opacity",defaultOpacity);(0,_jquery.default)("[data-label]",(0,_jquery.default)(element).siblings()).css("opacity",1)}}return _this}_createClass(AreaChart,[{key:"addPath",value:function addPath(svg,data){var ordered=this.handler.data.get("ordered");var isTimeSeries=ordered&&ordered.date;var isOverlapping=this.isOverlapping;var color=this.handler.data.getColorFunc();var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var interpolate=this.seriesConfig.interpolate;var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var layer=svg.append("g").attr("class",function(d,i){return"series series-"+i});var path=layer.append("path").attr("data-label",data.label).style("fill",function(){return color(data.label)}).style("stroke",function(){return color(data.label)}).classed("visAreaChart__overlapArea",function(){return isOverlapping}).attr("clip-path","url(#"+this.baseChart.clipPathId+")");function x(d){if(isTimeSeries){return xScale(d.x)}return xScale(d.x)+xScale.rangeBand()/2}function y1(d){var y0=d.y0||0;var y=d.y||0;return yScale(y0+y)}function y0(d){var y0=d.y0||0;return yScale(y0)}function getArea(){if(isHorizontal){return _d.default.svg.area().x(x).y0(y0).y1(y1)}else{return _d.default.svg.area().y(x).x0(y0).x1(y1)}}path.attr("d",function(){var area=getArea().defined(function(d){return!_lodash.default.isNull(d.y)}).interpolate(interpolate);return area(data.values)}).style("stroke-width","1px");return path}},{key:"addCircles",value:function addCircles(svg,data){var color=this.handler.data.getColorFunc();var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var ordered=this.handler.data.get("ordered");var circleRadius=12;var circleStrokeWidth=0;var tooltip=this.baseChart.tooltip;var isTooltip=this.handler.visConfig.get("tooltip.show");var isOverlapping=this.isOverlapping;var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var layer=svg.append("g").attr("class","points area").attr("clip-path","url(#"+this.baseChart.clipPathId+")");var circles=layer.selectAll("circles").data(function appendData(){return data.values.filter(function isZeroOrNull(d){return d.y!==0&&!_lodash.default.isNull(d.y)})});circles.exit().remove();circles.enter().append("circle").attr("data-label",data.label).attr("stroke",function(){return color(data.label)}).attr("fill","transparent").attr("stroke-width",circleStrokeWidth);function cx(d){if(ordered&&ordered.date){return xScale(d.x)}return xScale(d.x)+xScale.rangeBand()/2}function cy(d){var y=d.y||0;if(isOverlapping){return yScale(y)}return yScale(d.y0+y)}circles.attr("cx",isHorizontal?cx:cy).attr("cy",isHorizontal?cy:cx).attr("r",circleRadius);if(isTooltip){circles.call(tooltip.render())}return circles}},{key:"addPathEvents",value:function addPathEvents(path){var events=this.events;if(this.handler.visConfig.get("enableHover")){var hover=events.addHoverEvent();var mouseout=events.addMouseoutEvent();path.call(hover).call(mouseout)}}},{key:"draw",value:function draw(){var self=this;return function(selection){selection.each(function(){var svg=self.chartEl.append("g");svg.data([self.chartData]);var path=self.addPath(svg,self.chartData);self.addPathEvents(path);var circles=self.addCircles(svg,self.chartData);self.addCircleEvents(circles);if(self.thresholdLineOptions.show){self.addThresholdLine(self.chartEl)}self.events.emit("rendered",{chart:self.chartData});return svg})}}}]);return AreaChart}(_point_series.PointSeries);exports.AreaChart=AreaChart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HeatmapChart=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(14));var _point_series=__webpack_require__(360);var _heatmap_color=__webpack_require__(427);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var defaults={color:undefined,fillColor:undefined};var HeatmapChart=function(_PointSeries){_inherits(HeatmapChart,_PointSeries);function HeatmapChart(handler,chartEl,chartData,seriesConfigArgs){var _this;_classCallCheck(this,HeatmapChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(HeatmapChart).call(this,handler,chartEl,chartData,seriesConfigArgs));_this.seriesConfig=_lodash.default.defaults(seriesConfigArgs||{},defaults);_this.handler.visConfig.set("legend",{labels:_this.getHeatmapLabels(_this.handler.visConfig),colors:_this.getHeatmapColors(_this.handler.visConfig)});var colors=_this.handler.visConfig.get("legend.colors",null);if(colors){_this.handler.vis.uiState.setSilent("vis.defaultColors",null);_this.handler.vis.uiState.setSilent("vis.defaultColors",colors)}return _this}_createClass(HeatmapChart,[{key:"getHeatmapLabels",value:function getHeatmapLabels(cfg){var percentageMode=cfg.get("percentageMode");var colorsNumber=cfg.get("colorsNumber");var colorsRange=cfg.get("colorsRange");var zAxisConfig=this.getValueAxis().axisConfig;var zAxisFormatter=zAxisConfig.get("labels.axisFormatter");var zScale=this.getValueAxis().getScale();var _zScale$domain=zScale.domain(),_zScale$domain2=_slicedToArray(_zScale$domain,2),min=_zScale$domain2[0],max=_zScale$domain2[1];var labels=[];var maxColorCnt=10;if(cfg.get("setColorRange")){colorsRange.forEach(function(range){var from=isFinite(range.from)?zAxisFormatter(range.from):range.from;var to=isFinite(range.to)?zAxisFormatter(range.to):range.to;labels.push("".concat(from," - ").concat(to))})}else{if(max===min){return[min.toString()]}for(var i=0;i<colorsNumber;i++){var label=void 0;var val=i/colorsNumber;var nextVal=(i+1)/colorsNumber;if(percentageMode){val=Math.ceil(val*100);nextVal=Math.ceil(nextVal*100);label="".concat(val,"% - ").concat(nextVal,"%")}else{val=val*(max-min)+min;nextVal=nextVal*(max-min)+min;if(max-min>maxColorCnt){var valInt=Math.ceil(val);if(i===0){val=valInt===val?val:valInt-1}else{val=valInt}nextVal=Math.ceil(nextVal)}if(isFinite(val))val=zAxisFormatter(val);if(isFinite(nextVal))nextVal=zAxisFormatter(nextVal);label="".concat(val," - ").concat(nextVal)}labels.push(label)}}return labels}},{key:"getHeatmapColors",value:function getHeatmapColors(cfg){var invertColors=cfg.get("invertColors");var colorSchema=cfg.get("colorSchema");var labels=this.getHeatmapLabels(cfg);var colors={};for(var i in labels){if(labels[i]){var val=invertColors?1-i/labels.length:i/labels.length;colors[labels[i]]=(0,_heatmap_color.getHeatmapColors)(val,colorSchema)}}return colors}},{key:"addSquares",value:function addSquares(svg,data){var xScale=this.getCategoryAxis().getScale();var yScale=this.handler.categoryAxes[1].getScale();var zScale=this.getValueAxis().getScale();var tooltip=this.baseChart.tooltip;var isTooltip=this.handler.visConfig.get("tooltip.show");var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var colorsNumber=this.handler.visConfig.get("colorsNumber");var setColorRange=this.handler.visConfig.get("setColorRange");var colorsRange=this.handler.visConfig.get("colorsRange");var color=this.handler.data.getColorFunc();var labels=this.handler.visConfig.get("legend.labels");var zAxisConfig=this.getValueAxis().axisConfig;var zAxisFormatter=zAxisConfig.get("labels.axisFormatter");var showLabels=zAxisConfig.get("labels.show");var overwriteLabelColor=zAxisConfig.get("labels.overwriteColor",false);var layer=svg.append("g").attr("class","series");var squares=layer.selectAll("g.square").data(data.values);squares.exit().remove();var barWidth;if(this.getCategoryAxis().axisConfig.isTimeDomain()){var _this$handler$data$ge=this.handler.data.get("ordered"),_min=_this$handler$data$ge.min,interval=_this$handler$data$ge.interval;var start=_min;var end=(0,_moment.default)(_min).add(interval).valueOf();barWidth=xScale(end)-xScale(start);if(!isHorizontal)barWidth*=-1}function x(d){return xScale(d.x)}function y(d){return yScale(d.series)}var _zScale$domain3=zScale.domain(),_zScale$domain4=_slicedToArray(_zScale$domain3,2),min=_zScale$domain4[0],max=_zScale$domain4[1];function getColorBucket(d){var val=0;if(setColorRange&&colorsRange.length){var bucket=_lodash.default.find(colorsRange,function(range){return range.from<=d.y&&range.to>d.y});return bucket?colorsRange.indexOf(bucket):-1}else{if(isNaN(min)||isNaN(max)){val=colorsNumber-1}else if(min===max){val=0}else{val=(d.y-min)/(max-min);val=Math.min(colorsNumber-1,Math.floor(val*colorsNumber))}}if(d.y==null){return-1}return!isNaN(val)?val:-1}function label(d){var colorBucket=getColorBucket(d);if(colorBucket<0)d.hide=true;return labels[colorBucket]}function z(d){if(label(d)==="")return"transparent";return color(label(d))}var squareWidth=barWidth||xScale.rangeBand();var squareHeight=yScale.rangeBand();squares.enter().append("g").attr("class","square");squares.append("rect").attr("x",x).attr("width",squareWidth).attr("y",y).attr("height",squareHeight).attr("data-label",label).attr("fill",z).attr("style","cursor: pointer; stroke: black; stroke-width: 0.1px").style("display",function(d){return d.hide?"none":"initial"});if(showLabels){var rotate=zAxisConfig.get("labels.rotate");var rotateRad=rotate*Math.PI/180;var cellPadding=5;var maxLength=Math.min(Math.abs(squareWidth/Math.cos(rotateRad)),Math.abs(squareHeight/Math.sin(rotateRad)))-cellPadding;var maxHeight=Math.min(Math.abs(squareWidth/Math.sin(rotateRad)),Math.abs(squareHeight/Math.cos(rotateRad)))-cellPadding;var labelColor;if(overwriteLabelColor){labelColor=zAxisConfig.get("labels.color")}else{labelColor=function labelColor(d){var bgColor=z(d);var color=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(bgColor);return color&&(0,_eui.isColorDark)(parseInt(color[1]),parseInt(color[2]),parseInt(color[3]))?"#FFF":"#222"}}var hiddenLabels=false;squares.append("text").text(function(d){return zAxisFormatter(d.y)}).style("display",function(d){var textLength=this.getBBox().width;var textHeight=this.getBBox().height;var textTooLong=textLength>maxLength;var textTooWide=textHeight>maxHeight;if(!d.hide&&(textTooLong||textTooWide)){hiddenLabels=true}return d.hide||textTooLong||textTooWide?"none":"initial"}).style("dominant-baseline","central").style("text-anchor","middle").style("fill",labelColor).attr("x",function(d){var center=x(d)+squareWidth/2;return center}).attr("y",function(d){var center=y(d)+squareHeight/2;return center}).attr("transform",function(d){var horizontalCenter=x(d)+squareWidth/2;var verticalCenter=y(d)+squareHeight/2;return"rotate(".concat(rotate,",").concat(horizontalCenter,",").concat(verticalCenter,")")});if(hiddenLabels){this.baseChart.handler.alerts.show("Some labels were hidden due to size constraints")}}if(isTooltip){squares.call(tooltip.render())}return squares.selectAll("rect")}},{key:"draw",value:function draw(){var self=this;return function(selection){selection.each(function(){var svg=self.chartEl.append("g");svg.data([self.chartData]);var squares=self.addSquares(svg,self.chartData);self.addCircleEvents(squares);self.events.emit("rendered",{chart:self.chartData});return svg})}}}]);return HeatmapChart}(_point_series.PointSeries);exports.HeatmapChart=HeatmapChart},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<p class="visTooltip__header">\n  <i class="fa fa-info-circle visTooltip__headerIcon"></i>\n  <span class="visTooltip__headerText">\n    <%= wholeBucket ? \'Part of this bucket\' : \'This area\' %>\n    may contain partial data. The selected time range does not fully cover it.\n  </span>\n</p>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PieChart=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));var _numeral=_interopRequireDefault(__webpack_require__(429));var _errors=__webpack_require__(25);var _chart=__webpack_require__(425);var _truncate_labels=__webpack_require__(632);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var defaults={isDonut:false,showTooltip:true,color:undefined,fillColor:undefined};var PieChart=function(_Chart){_inherits(PieChart,_Chart);function PieChart(handler,chartEl,chartData){var _this;_classCallCheck(this,PieChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(PieChart).call(this,handler,chartEl,chartData));var charts=_this.handler.data.getVisData();_this._validatePieData(charts);_this._attr=_lodash.default.defaults(handler.visConfig.get("chart",{}),defaults);return _this}_createClass(PieChart,[{key:"_validatePieData",value:function _validatePieData(charts){var isAllZeros=charts.every(function(chart){return chart.slices.children.length===0});if(isAllZeros){throw new _errors.PieContainsAllZeros}}},{key:"addPathEvents",value:function addPathEvents(element){var events=this.events;return element.call(events.addHoverEvent()).call(events.addMouseoutEvent()).call(events.addClickEvent())}},{key:"convertToPercentage",value:function convertToPercentage(slices){(function assignPercentages(slices){if(slices.sumOfChildren!=null)return;var parent=slices;var children=parent.children;var parentPercent=parent.percentOfParent;var sum=parent.sumOfChildren=Math.abs(children.reduce(function(sum,child){return sum+Math.abs(child.size)},0));children.forEach(function(child){child.percentOfGroup=Math.abs(child.size)/sum;child.percentOfParent=child.percentOfGroup;if(parentPercent!=null){child.percentOfParent*=parentPercent}if(child.children){assignPercentages(child)}})})(slices)}},{key:"addPath",value:function addPath(width,height,svg,slices){var self=this;var marginFactor=.95;var isDonut=self._attr.isDonut;var radius=Math.min(width,height)/2*marginFactor;var color=self.handler.data.getPieColorFunc();var tooltip=self.tooltip;var isTooltip=self._attr.addTooltip;var arcs=svg.append("g").attr("class","arcs");var labels=svg.append("g").attr("class","labels");var showLabels=self._attr.labels.show;var showValues=self._attr.labels.values;var truncateLabelLength=self._attr.labels.truncate;var showOnlyOnLastLevel=self._attr.labels.last_level;var partition=_d.default.layout.partition().sort(null).value(function(d){return d.percentOfParent*100});var x=_d.default.scale.linear().range([0,2*Math.PI]);var y=_d.default.scale.sqrt().range([0,showLabels?radius*.7:radius]);var startAngle=function startAngle(d){return Math.max(0,Math.min(2*Math.PI,x(d.x)))};var endAngle=function endAngle(d){if(d.dx<1e-8)return x(d.x);return Math.max(0,Math.min(2*Math.PI,x(d.x+d.dx)))};var arc=_d.default.svg.arc().startAngle(startAngle).endAngle(endAngle).innerRadius(function(d){if(d.depth===1&&!isDonut){return 0}return Math.max(0,y(d.y))}).outerRadius(function(d){return Math.max(0,y(d.y+d.dy))});var outerArc=_d.default.svg.arc().startAngle(startAngle).endAngle(endAngle).innerRadius(radius*.8).outerRadius(radius*.8);var maxDepth=0;var path=arcs.datum(slices).selectAll("path").data(partition.nodes).enter().append("path").attr("d",arc).attr("class",function(d){if(d.depth===0){return}if(d.depth>maxDepth)maxDepth=d.depth;return"slice"}).attr("data-test-subj",function(d){if(d.name){return"pieSlice-".concat(d.name.split(" ").join("-"))}}).call(self._addIdentifier,"name").style("fill",function(d){if(d.depth===0){return"none"}return color(d.name)});if(showLabels){var labelGroups=labels.datum(slices).selectAll(".label").data(partition.nodes);var svgParentNode=svg.node().parentNode.parentNode;var svgBBox={width:svgParentNode.clientWidth,height:svgParentNode.clientHeight};var labelLayout=_d.default.geom.quadtree().extent([[-svgBBox.width,-svgBBox.height],[svgBBox.width,svgBBox.height]]).x(function(d){return d.position.x}).y(function(d){return d.position.y})([]);labelGroups.enter().append("g").attr("class","label").append("text").text(function(d){if(d.depth===0){_d.default.select(this.parentNode).remove();return}if(showValues){var value=(0,_numeral.default)(d.value/100).format("0.[00]%");return"".concat(d.name," (").concat(value,")")}return d.name}).text(function(){return(0,_truncate_labels.truncateLabel)(this,truncateLabelLength)}).attr("text-anchor",function(d){var midAngle=startAngle(d)+(endAngle(d)-startAngle(d))/2;return midAngle<Math.PI?"start":"end"}).attr("class","label-text").each(function resolveConflicts(d){if(d.depth===0)return;var parentNode=this.parentNode;if(showOnlyOnLastLevel&&maxDepth!==d.depth){_d.default.select(parentNode).remove();return}var bbox=this.getBBox();var pos=outerArc.centroid(d);var midAngle=startAngle(d)+(endAngle(d)-startAngle(d))/2;pos[1]+=4;pos[0]=(.7+d.depth/10)*radius*(midAngle<Math.PI?1:-1);d.position={x:pos[0],y:pos[1],left:midAngle<Math.PI?pos[0]:pos[0]-bbox.width,right:midAngle>Math.PI?pos[0]+bbox.width:pos[0],bottom:pos[1]+5,top:pos[1]-bbox.height-5};var conflicts=[];labelLayout.visit(function(node){if(!node.point)return;if(conflicts.length)return true;var point=node.point.position;var current=d.position;if(point){var horizontalConflict=point.left<0&&current.left<0||point.left>0&&current.left>0;var verticalConflict=point.top>=current.top&&point.top<=current.bottom||point.top<=current.top&&point.bottom>=current.top;if(horizontalConflict&&verticalConflict){point.point=node.point;conflicts.push(point)}return true}});if(conflicts.length){_d.default.select(parentNode).remove();return}labelLayout.add(d)}).attr("x",function(d){if(d.depth===0||!d.position){return}return d.position.x}).attr("y",function(d){if(d.depth===0||!d.position){return}return d.position.y});labelGroups.append("polyline").attr("points",function(d){if(d.depth===0||!d.position){return}var pos1=outerArc.centroid(d);var x2=d.position.x>0?d.position.x-10:d.position.x+10;var pos2=[x2,d.position.y-4];pos1[1]=pos2[1];return[arc.centroid(d),pos1,pos2]}).attr("class","label-line")}if(isTooltip){path.call(tooltip.render())}return path}},{key:"_validateContainerSize",value:function _validateContainerSize(width,height){var minWidth=20;var minHeight=20;if(width<=minWidth||height<=minHeight){throw new _errors.ContainerTooSmall}}},{key:"draw",value:function draw(){var self=this;return function(selection){selection.each(function(data){var slices=data.slices;var div=_d.default.select(this);var width=(0,_jquery.default)(this).width();var height=(0,_jquery.default)(this).height();if(!slices.children.length)return;self.convertToPercentage(slices);self._validateContainerSize(width,height);var svg=div.append("svg").attr("width",width).attr("height",height).attr("focusable","false").append("g").attr("transform","translate("+width/2+","+height/2+")");var path=self.addPath(width,height,svg,slices);self.addPathEvents(path);self.events.emit("rendered",{chart:data});return svg})}}}]);return PieChart}(_chart.Chart);exports.PieChart=PieChart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GaugeChart=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _chart=__webpack_require__(425);var _gauge_types=__webpack_require__(1294);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var GaugeChart=function(_Chart){_inherits(GaugeChart,_Chart);function GaugeChart(handler,chartEl,chartData){var _this;_classCallCheck(this,GaugeChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(GaugeChart).call(this,handler,chartEl,chartData));_this.gaugeConfig=handler.visConfig.get("gauge",{});_this.gauge=new _gauge_types.gaugeTypes[_this.gaugeConfig.type](_assertThisInitialized(_this));return _this}_createClass(GaugeChart,[{key:"addEvents",value:function addEvents(element){var events=this.events;return element.call(events.addHoverEvent()).call(events.addMouseoutEvent()).call(events.addClickEvent())}},{key:"calcGaugeDim",value:function calcGaugeDim(alignment,containerDom,nrOfItems){var containerWidth=containerDom.clientWidth;var containerHeight=containerDom.clientHeight;var containerMargin=25;var gaugeBottomMargin=Math.ceil(25/nrOfItems);var availableWidth=containerWidth-containerMargin;var availableHeight=containerHeight-containerMargin;var adaptedWidth=Math.floor(availableWidth/nrOfItems);var adaptedHeight=Math.floor(availableHeight/nrOfItems)-gaugeBottomMargin;switch(alignment){case"vertical":return{width:containerWidth,height:adaptedHeight,alignment:alignment};case"horizontal":return{width:adaptedWidth,height:availableHeight,alignment:alignment};default:return{width:availableWidth<availableHeight?containerWidth:adaptedWidth,height:availableWidth<availableHeight?adaptedHeight:availableHeight,alignment:availableWidth<availableHeight?"vertical":"horizontal"}}}},{key:"draw",value:function draw(){var self=this;var gaugeConfig=this.gaugeConfig;return function(selection){selection.each(function(data){var div=_d.default.select(this);var _self$calcGaugeDim=self.calcGaugeDim(gaugeConfig.alignment,this,data.series.length),width=_self$calcGaugeDim.width,height=_self$calcGaugeDim.height;if(height<0||width<0)return;div.style("text-align","center").style("overflow-y","auto");data.series.forEach(function(series){var svg=div.append("svg").style("display","inline-block").style("overflow","hidden").attr("focusable","false").attr("width",width);var g=svg.append("g");var gauges=self.gauge.drawGauge(g,series,width,height);svg.attr("height",height);self.addEvents(gauges)});div.append("div").attr("class","chart-title").style("text-align","center").text(data.label||data.yAxisLabel);self.events.emit("rendered",{chart:data});return div})}}}]);return GaugeChart}(_chart.Chart);exports.GaugeChart=GaugeChart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.gaugeTypes=void 0;var _meter=__webpack_require__(1295);var gaugeTypes={meter:_meter.MeterGauge};exports.gaugeTypes=gaugeTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MeterGauge=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _heatmap_color=__webpack_require__(427);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var arcAngles={angleFactor:.75,maxAngle:2*Math.PI*1.3,minAngle:2*Math.PI*.7};var circleAngles={angleFactor:1,maxAngle:2*Math.PI,minAngle:0};var defaultConfig={showTooltip:true,percentageMode:true,innerSpace:5,extents:[0,1e4],scale:{show:true,color:"#666",width:2,ticks:10,tickLength:8},labels:{show:true,color:"#666"},style:{bgWidth:.5,width:.9}};var MeterGauge=function(){function MeterGauge(gaugeChart){_classCallCheck(this,MeterGauge);this.gaugeChart=gaugeChart;this.gaugeConfig=gaugeChart.gaugeConfig;this.gaugeConfig=_lodash.default.defaultsDeep(this.gaugeConfig,defaultConfig);this.gaugeChart.handler.visConfig.set("legend",{labels:this.getLabels(),colors:this.getColors()});var colors=this.gaugeChart.handler.visConfig.get("legend.colors",null);if(colors){this.gaugeChart.handler.vis.uiState.setSilent("vis.defaultColors",null);this.gaugeChart.handler.vis.uiState.setSilent("vis.defaultColors",colors)}this.colorFunc=this.gaugeChart.handler.data.getColorFunc()}_createClass(MeterGauge,[{key:"getLabels",value:function getLabels(){var isPercentageMode=this.gaugeConfig.percentageMode;var colorsRange=this.gaugeConfig.colorsRange;var max=_lodash.default.last(colorsRange).to;var labels=[];colorsRange.forEach(function(range){var from=isPercentageMode?Math.round(100*range.from/max):range.from;var to=isPercentageMode?Math.round(100*range.to/max):range.to;labels.push("".concat(from," - ").concat(to))});return labels}},{key:"getColors",value:function getColors(){var invertColors=this.gaugeConfig.invertColors;var colorSchema=this.gaugeConfig.colorSchema;var colorsRange=this.gaugeConfig.colorsRange;var labels=this.getLabels();var colors={};for(var i=0;i<labels.length;i+=1){var divider=Math.max(colorsRange.length-1,1);var val=invertColors?1-i/divider:i/divider;colors[labels[i]]=(0,_heatmap_color.getHeatmapColors)(val,colorSchema)}return colors}},{key:"getBucket",value:function getBucket(val){var bucket=_lodash.default.findIndex(this.gaugeConfig.colorsRange,function(range){return range.from<=val&&range.to>val});if(bucket===-1){if(val<this.gaugeConfig.colorsRange[0].from)bucket=0;else bucket=this.gaugeConfig.colorsRange.length-1}return bucket}},{key:"getLabel",value:function getLabel(val){var bucket=this.getBucket(val);var labels=this.gaugeChart.handler.visConfig.get("legend.labels");return labels[bucket]}},{key:"getColorBucket",value:function getColorBucket(val){var bucket=this.getBucket(val);var labels=this.gaugeChart.handler.visConfig.get("legend.labels");return this.colorFunc(labels[bucket])}},{key:"drawScale",value:function drawScale(svg,radius,angle){var _this=this;var scaleWidth=this.gaugeConfig.scale.width;var tickLength=this.gaugeConfig.scale.tickLength;var scaleTicks=this.gaugeConfig.scale.ticks;var scale=svg.append("g");this.gaugeConfig.colorsRange.forEach(function(range){var color=_this.getColorBucket(range.from);var scaleArc=_d.default.svg.arc().startAngle(angle(range.from)).endAngle(angle(range.to)).innerRadius(radius).outerRadius(radius+scaleWidth);scale.append("path").attr("d",scaleArc).style("stroke",color).style("fill",color)});var extents=angle.domain();for(var i=0;i<=scaleTicks;i++){var val=i*(extents[1]-extents[0])/scaleTicks;var tickAngle=angle(val)-Math.PI/2;var x0=Math.cos(tickAngle)*radius;var x1=Math.cos(tickAngle)*(radius-tickLength);var y0=Math.sin(tickAngle)*radius;var y1=Math.sin(tickAngle)*(radius-tickLength);var color=this.getColorBucket(val);scale.append("line").attr("x1",x0).attr("x2",x1).attr("y1",y0).attr("y2",y1).style("stroke-width",scaleWidth).style("stroke",color)}return scale}},{key:"drawGauge",value:function drawGauge(svg,data,width,height){var _this2=this;var marginFactor=.95;var tooltip=this.gaugeChart.tooltip;var isTooltip=this.gaugeChart.handler.visConfig.get("addTooltip");var isDisplayWarning=this.gaugeChart.handler.visConfig.get("isDisplayWarning",false);var _ref=this.gaugeConfig.gaugeType==="Circle"?circleAngles:arcAngles,angleFactor=_ref.angleFactor,maxAngle=_ref.maxAngle,minAngle=_ref.minAngle;var maxRadius=Math.min(width,height/angleFactor)/2*marginFactor;var extendRange=this.gaugeConfig.extendRange;var maxY=_lodash.default.max(data.values,"y").y;var min=this.gaugeConfig.colorsRange[0].from;var max=_lodash.default.last(this.gaugeConfig.colorsRange).to;var angle=_d.default.scale.linear().range([minAngle,maxAngle]).domain([min,extendRange&&max<maxY?maxY:max]);var radius=_d.default.scale.linear().range([0,maxRadius]).domain([this.gaugeConfig.innerSpace+1,0]);var totalWidth=Math.abs(radius(0)-radius(1));var bgPadding=totalWidth*(1-this.gaugeConfig.style.bgWidth)/2;var gaugePadding=totalWidth*(1-this.gaugeConfig.style.width)/2;var getInnerFreeSpace=function getInnerFreeSpace(){return radius(1)*2-(_this2.gaugeConfig.scale.show?_this2.gaugeConfig.scale.tickLength*2:-Math.max(bgPadding,gaugePadding)*2)};var arc=_d.default.svg.arc().startAngle(minAngle).endAngle(function(d){return Math.max(0,Math.min(maxAngle,angle(Math.max(min,d.y))))}).innerRadius(function(d,i,j){return Math.max(0,radius(j+1)+gaugePadding)}).outerRadius(function(d,i,j){return Math.max(0,radius(j)-gaugePadding)});var bgArc=_d.default.svg.arc().startAngle(minAngle).endAngle(maxAngle).innerRadius(function(d,i,j){return Math.max(0,radius(j+1)+bgPadding)}).outerRadius(function(d,i,j){return Math.max(0,radius(j)-bgPadding)});var gaugeHolders=svg.selectAll("path").data([data]).enter().append("g").attr("data-label",function(d){return _this2.getLabel(d.values[0].y)});var gauges=gaugeHolders.selectAll("g").data(function(d){return d.values}).enter();gauges.append("path").attr("d",bgArc).style("fill",this.gaugeConfig.style.bgFill);var series=gauges.append("path").attr("d",arc).style("fill",function(d){return _this2.getColorBucket(Math.max(min,d.y))});var smallContainer=svg.node().getBBox().height<70;var hiddenLabels=smallContainer;var valueLabelHidden=false;gauges.append("text").attr("class","chart-label").attr("y",-5).text(function(d){if(_this2.gaugeConfig.percentageMode){var percentage=(d.y-min)/(max-min);return data.yAxisFormatter(percentage)}return data.yAxisFormatter(d.y)}).attr("style","dominant-baseline: central;").style("text-anchor","middle").style("font-size","2em").style("display",function(){var textLength=this.getBBox().width;var textTooLong=textLength>=getInnerFreeSpace()-6;if(textTooLong){hiddenLabels=true;valueLabelHidden=true}return textTooLong?"none":"initial"});if(this.gaugeConfig.labels.show){svg.append("text").attr("class","chart-label").text(data.label).attr("y",-30).attr("style","dominant-baseline: central; text-anchor: middle;").style("display",function(){var textLength=this.getBBox().width;var textTooLong=textLength>maxRadius;if(textTooLong){hiddenLabels=true}return smallContainer||textTooLong?"none":"initial"});svg.append("text").attr("class","chart-label").text(this.gaugeConfig.style.subText).attr("y",20).attr("style","dominant-baseline: central; text-anchor: middle;").style("display",function(){var textLength=this.getBBox().width;var textTooLong=textLength>maxRadius;if(textTooLong){hiddenLabels=true}return valueLabelHidden||smallContainer||textTooLong?"none":"initial"})}if(this.gaugeConfig.scale.show){this.drawScale(svg,radius(1),angle)}if(isTooltip){series.each(function(){var gauge=_d.default.select(this);gauge.call(tooltip.render())})}if(hiddenLabels&&isDisplayWarning){this.gaugeChart.handler.alerts.show("Some labels were hidden due to size constraints")}var transformX=width/2;var transformY=height/2>maxRadius?height/2:maxRadius;svg.attr("transform","translate(".concat(transformX,", ").concat(transformY,")"));return series}}]);return MeterGauge}();exports.MeterGauge=MeterGauge},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibVisProvider=VislibVisProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _d=_interopRequireDefault(__webpack_require__(15));var _events=__webpack_require__(48);var _chrome=_interopRequireDefault(__webpack_require__(7));var _errors=__webpack_require__(25);var _vis_config=__webpack_require__(1297);var _handler=__webpack_require__(1298);var _hierarchical_tooltip_formatter=__webpack_require__(630);var _pointseries_tooltip_formatter=__webpack_require__(631);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var config=_chrome.default.getUiSettingsClient();function VislibVisProvider(Private){(0,_hierarchical_tooltip_formatter.setHierarchicalTooltipFormatter)(Private);(0,_pointseries_tooltip_formatter.setPointSeriesTooltipFormatter)(Private);var Vis=function(_EventEmitter){_inherits(Vis,_EventEmitter);function Vis($el,visConfigArgs){var _this;_classCallCheck(this,Vis);_this=_possibleConstructorReturn(this,_getPrototypeOf(Vis).call(this));_this.el=$el.get?$el.get(0):$el;_this.visConfigArgs=_lodash.default.cloneDeep(visConfigArgs);_this.visConfigArgs.dimmingOpacity=config.get("visualization:dimmingOpacity");_this.visConfigArgs.heatmapMaxBuckets=config.get("visualization:heatmap:maxBuckets");return _this}_createClass(Vis,[{key:"hasLegend",value:function hasLegend(){return this.visConfigArgs.addLegend}},{key:"initVisConfig",value:function initVisConfig(data,uiState){this.data=data;this.uiState=uiState;this.visConfig=new _vis_config.VisConfig(this.visConfigArgs,this.data,this.uiState,this.el)}},{key:"render",value:function render(data,uiState){if(!data){throw new Error("No valid data!")}if(this.handler){this.data=null;this._runOnHandler("destroy")}this.initVisConfig(data,uiState);this.handler=new _handler.Handler(this,this.visConfig);this._runOnHandler("render")}},{key:"getLegendLabels",value:function getLegendLabels(){return this.visConfig?this.visConfig.get("legend.labels",null):null}},{key:"getLegendColors",value:function getLegendColors(){return this.visConfig?this.visConfig.get("legend.colors",null):null}},{key:"_runOnHandler",value:function _runOnHandler(method){try{this.handler[method]()}catch(error){if(error instanceof _errors.KbnError){error.displayToScreen(this.handler)}else{throw error}}}},{key:"destroy",value:function destroy(){var selection=_d.default.select(this.el).select(".visWrapper");if(this.handler)this._runOnHandler("destroy");selection.remove()}},{key:"set",value:function set(name,val){this.visConfigArgs[name]=val;this.render(this.data,this.uiState)}},{key:"get",value:function get(name){return this.visConfig.get(name)}},{key:"on",value:function on(event,listener){var first=this.listenerCount(event)===0;var ret=_events.EventEmitter.prototype.on.call(this,event,listener);var added=this.listenerCount(event)>0;if(first&&added&&this.handler)this.handler.enable(event);return ret}},{key:"off",value:function off(event,listener){var last=this.listenerCount(event)===1;var ret=_events.EventEmitter.prototype.off.call(this,event,listener);var removed=this.listenerCount(event)===0;if(last&&removed&&this.handler)this.handler.disable(event);return ret}},{key:"removeAllListeners",value:function removeAllListeners(event){var ret=_events.EventEmitter.prototype.removeAllListeners.call(this,event);this.handler.disable(event);return ret}}]);return Vis}(_events.EventEmitter);return Vis}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisConfig=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _types=__webpack_require__(625);var _data=__webpack_require__(422);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var DEFAULT_VIS_CONFIG={style:{margin:{top:10,right:3,bottom:5,left:3}},alerts:[],categoryAxes:[],valueAxes:[],grid:{}};var VisConfig=function(){function VisConfig(visConfigArgs,data,uiState,el){_classCallCheck(this,VisConfig);this.data=new _data.Data(data,uiState);var visType=_types.vislibTypesConfig[visConfigArgs.type];var typeDefaults=visType(visConfigArgs,this.data);this._values=_lodash.default.defaultsDeep({},typeDefaults,DEFAULT_VIS_CONFIG);this._values.el=el}_createClass(VisConfig,[{key:"get",value:function get(property,defaults){if(_lodash.default.has(this._values,property)||typeof defaults!=="undefined"){return _lodash.default.get(this._values,property,defaults)}else{throw new Error("Accessing invalid config property: ".concat(property));return defaults}}},{key:"set",value:function set(property,value){return _lodash.default.set(this._values,property,value)}}]);return VisConfig}();exports.VisConfig=VisConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Handler=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _markdownIt=_interopRequireDefault(__webpack_require__(426));var _errors=__webpack_require__(25);var _binder=__webpack_require__(628);var _layout=__webpack_require__(1299);var _chart_title=__webpack_require__(635);var _alerts=__webpack_require__(1307);var _axis=__webpack_require__(633);var _chart_grid=__webpack_require__(1308);var _vis_types=__webpack_require__(627);var _render_complete=__webpack_require__(82);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var markdownIt=new _markdownIt.default({html:false,linkify:true});var Handler=function(){function Handler(vis,visConfig){_classCallCheck(this,Handler);this.el=visConfig.get("el");this.ChartClass=_vis_types.visTypes[visConfig.get("type")];this.charts=[];this.vis=vis;this.visConfig=visConfig;this.data=visConfig.data;this.categoryAxes=visConfig.get("categoryAxes").map(function(axisArgs){return new _axis.Axis(visConfig,axisArgs)});this.valueAxes=visConfig.get("valueAxes").map(function(axisArgs){return new _axis.Axis(visConfig,axisArgs)});this.chartTitle=new _chart_title.ChartTitle(visConfig);this.alerts=new _alerts.Alerts(this,visConfig.get("alerts"));this.grid=new _chart_grid.ChartGrid(this,visConfig.get("grid"));if(visConfig.get("type")==="point_series"){this.data.stackData(this)}if(visConfig.get("resize",false)){this.resize=visConfig.get("resize")}this.layout=new _layout.Layout(visConfig);this.binder=new _binder.Binder;this.renderArray=_lodash.default.filter([this.layout,this.chartTitle,this.alerts],Boolean);this.renderArray=this.renderArray.concat(this.valueAxes).concat(this.categoryAxes.slice().reverse());this.getProxyHandler=_lodash.default.memoize(function(event){var self=this;return function(e){self.vis.emit(event,e)}});this.enable=this.chartEventProxyToggle("on");this.disable=this.chartEventProxyToggle("off")}_createClass(Handler,[{key:"_validateData",value:function _validateData(){var dataType=this.data.type;if(!dataType){throw new _errors.NoResults}}},{key:"render",value:function render(){if(this.visConfig.get("error",null))return this.error(this.visConfig.get("error"));var self=this;var binder=this.binder,_this$charts=this.charts,charts=_this$charts===void 0?[]:_this$charts;var selection=_d.default.select(this.el);selection.selectAll("*").remove();this._validateData();this.renderArray.forEach(function(property){if(typeof property.render==="function"){property.render()}});var loadedCount=0;var chartSelection=selection.selectAll(".chart");chartSelection.each(function(chartData){var chart=new self.ChartClass(self,this,chartData);self.vis.eventNames().forEach(function(event){self.enable(event,chart)});binder.on(chart.events,"rendered",function(){loadedCount++;if(loadedCount===chartSelection.length){self.vis.emit("renderComplete")}});charts.push(chart);chart.render()})}},{key:"chartEventProxyToggle",value:function chartEventProxyToggle(method){return function(event,chart){var proxyHandler=this.getProxyHandler(event);_lodash.default.each(chart?[chart]:this.charts,function(chart){chart.events[method](event,proxyHandler)})}}},{key:"removeAll",value:function removeAll(el){return _d.default.select(el).selectAll("*").remove()}},{key:"error",value:function error(message){this.removeAll(this.el);var div=_d.default.select(this.el).append("div").attr("class","visError chart error").attr("data-test-subj","visLibVisualizeError");div.append("h4").text(markdownIt.renderInline(message));(0,_render_complete.dispatchRenderComplete)(this.el);return div}},{key:"destroy",value:function destroy(){this.binder.destroy();this.renderArray.forEach(function(renderable){if(_lodash.default.isFunction(renderable.destroy)){renderable.destroy()}});this.charts.splice(0).forEach(function(chart){if(_lodash.default.isFunction(chart.destroy)){chart.destroy()}})}}]);return Handler}();exports.Handler=Handler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Layout=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));var _layout_types=__webpack_require__(626);var _axis=__webpack_require__(1300);var _chart_title=__webpack_require__(635);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Layout=function(){function Layout(config){_classCallCheck(this,Layout);this.el=config.get("el");this.data=config.data.data;this.opts=config;this.layoutType=_layout_types.layoutTypes[config.get("type")](this.el,this.data)}_createClass(Layout,[{key:"render",value:function render(){this.removeAll(this.el);this.createLayout(this.layoutType);if(this.opts.get("type")==="point_series"){this.updateCategoryAxisSize()}}},{key:"createLayout",value:function createLayout(arr){var _this=this;return _lodash.default.each(arr,function(obj){_this.layout(obj)})}},{key:"updateCategoryAxisSize",value:function updateCategoryAxisSize(){var visConfig=this.opts;var axisConfig=visConfig.get("categoryAxes[0]");var axis=new _axis.Axis(visConfig,axisConfig);var position=axis.axisConfig.get("position");var chartTitle=new _chart_title.ChartTitle(visConfig);var axisWrapperElement=(0,_jquery.default)(this.el).find(".visAxis__column--".concat(position));axisWrapperElement.css("visibility","hidden");axis.render();chartTitle.render();var width=axisWrapperElement.width();var height=axisWrapperElement.height();axis.destroy();(0,_jquery.default)(this.el).find(".chart-title svg").remove();axisWrapperElement.css("visibility","");if(axis.axisConfig.isHorizontal()){var spacerNodes=(0,_jquery.default)(this.el).find(".visAxis__spacer--y-".concat(position));spacerNodes.height("".concat(height,"px"))}else{axisWrapperElement.find(".visAxis__splitAxes--y").width("".concat(width,"px"))}}},{key:"layout",value:function layout(obj){if(!obj.parent){throw new Error("No parent element provided")}if(!obj.type){throw new Error("No element type provided")}if(typeof obj.type!=="string"){throw new Error(obj.type+" must be a string")}if(typeof obj.parent==="string"&&obj.parent.charAt(0)!=="."){obj.parent="."+obj.parent}var childEl=this.appendElem(obj.parent,obj.type,obj.class);if(obj.datum){childEl.datum(obj.datum)}if(obj.splits){childEl.call(obj.splits,obj.parent,this.opts)}if(obj.children){var newParent=childEl[0][0];_lodash.default.forEach(obj.children,function(obj){if(!obj.parent){obj.parent=newParent}});this.createLayout(obj.children)}return childEl}},{key:"appendElem",value:function appendElem(el,type,className){if(!el||!type||!className){throw new Error("Function requires that an el, type, and class be provided")}if(typeof el==="string"){el=_d.default.select(this.el).select(el)[0][0]}return _d.default.select(el).append(type).attr("class",className)}},{key:"removeAll",value:function removeAll(el){return _d.default.select(el).selectAll("*").remove()}}]);return Layout}();exports.Layout=Layout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Axis",{enumerable:true,get:function get(){return _axis.Axis}});var _axis=__webpack_require__(633)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AxisTitle=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _jquery=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AxisTitle=function(){function AxisTitle(axisConfig){_classCallCheck(this,AxisTitle);this.axisConfig=axisConfig;this.elSelector=this.axisConfig.get("title.elSelector").replace("{pos}",this.axisConfig.get("position"))}_createClass(AxisTitle,[{key:"render",value:function render(){_d.default.select(this.axisConfig.get("rootEl")).selectAll(this.elSelector).call(this.draw())}},{key:"destroy",value:function destroy(){(0,_jquery.default)(this.axisConfig.get("rootEl")).find(this.elSelector).find("svg").remove()}},{key:"draw",value:function draw(){var config=this.axisConfig;return function(selection){selection.each(function(){if(!config.get("show")&&!config.get("title.show",false))return;var el=this;var div=_d.default.select(el);var width=(0,_jquery.default)(el).width();var height=(0,_jquery.default)(el).height();var axisPrefix=config.isHorizontal()?"x":"y";var svg=div.append("svg").attr("focusable","false").attr("width",width).attr("height",height).attr("class","axis-title ".concat(axisPrefix,"-axis-title"));var bbox=svg.append("text").attr("transform",function(){if(config.isHorizontal()){return"translate(".concat(width/2,",0)")}return"translate(0,".concat(height/2,") rotate(270)")}).attr("text-anchor","middle").attr("dominant-baseline","hanging").text(config.get("title.text")).node().getBBox();if(config.isHorizontal()){svg.attr("height",Math.ceil(bbox.height))}else{svg.attr("width",Math.ceil(bbox.height))}})}}}]);return AxisTitle}();exports.AxisTitle=AxisTitle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AxisLabels=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _jquery=_interopRequireDefault(__webpack_require__(12));var _truncate_labels=__webpack_require__(632);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AxisLabels=function(){function AxisLabels(axisConfig,scale){_classCallCheck(this,AxisLabels);this.axisConfig=axisConfig;this.axisScale=scale}_createClass(AxisLabels,[{key:"render",value:function render(selection){selection.call(this.draw())}},{key:"rotateAxisLabels",value:function rotateAxisLabels(){var config=this.axisConfig;return function(selection){var text=selection.selectAll(".tick text");if(config.get("labels.rotate")){text.style("text-anchor",function(){var currentValue=(0,_jquery.default)(this).css("text-anchor");var rotateDeg=config.get("labels.rotate");if(!rotateDeg)return currentValue;else{var position=config.get("position");switch(position){case"top":return"end";case"bottom":return"end";default:if(rotateDeg===90||rotateDeg===-90)return"middle";return currentValue}}}).attr("dy",function(){return config.isHorizontal()?"0.3em":"0"}).attr("transform",function rotate(d,j){var position=config.get("position");var rotateDeg=position==="top"?config.get("labels.rotate"):-config.get("labels.rotate");if((0,_jquery.default)(this).css("text-anchor")==="middle"){var coord=text[0][j].getBBox();var transX=coord.x+coord.width/2;var transY=coord.y+coord.height/2;return"rotate(".concat(rotateDeg,", ").concat(transX,", ").concat(transY,")")}else{var _transX=this.attributes.x.nodeValue;var _transY=this.attributes.y.nodeValue;return"rotate(".concat(rotateDeg,", ").concat(_transX,", ").concat(_transY,")")}})}}}},{key:"truncateLabels",value:function truncateLabels(){var config=this.axisConfig;return function(selection){if(!config.get("labels.truncate"))return;selection.selectAll(".tick text").text(function(){return(0,_truncate_labels.truncateLabel)(this,config.get("labels.truncate"))})}}},{key:"filterAxisLabels",value:function filterAxisLabels(){var self=this;var config=this.axisConfig;var startPos=0;var padding=1.1;return function(selection){if(!config.get("labels.filter"))return;var el=(0,_jquery.default)(config.get("rootEl")).find(config.get("elSelector"));var maxSize=config.isHorizontal()?el.width():el.height();var scaleRange=self.axisScale.scale.range();var scaleWidth=Math.abs(scaleRange[scaleRange.length-1]-scaleRange[0]);var scaleStartPad=.5*(maxSize-scaleWidth);selection.selectAll(".tick text").text(function(d){var par=_d.default.select(this.parentNode).node();var myPos=scaleStartPad+self.axisScale.scale(d);var mySize=(config.isHorizontal()?par.getBBox().width:par.getBBox().height)*padding;var halfSize=mySize/2;if(startPos+halfSize<myPos&&maxSize>myPos+halfSize){startPos=myPos+halfSize;return this.textContent}else{_d.default.select(this.parentNode).remove()}})}}},{key:"draw",value:function draw(){var self=this;var config=this.axisConfig;return function(selection){selection.each(function(){selection.selectAll("text").attr("style",function(){var currentStyle=_d.default.select(this).attr("style");return"".concat(currentStyle," font-size: ").concat(config.get("labels.fontSize"),";")});if(!config.get("labels.show"))selection.selectAll("text").attr("style","display: none;");selection.call(self.truncateLabels());selection.call(self.rotateAxisLabels());selection.call(self.filterAxisLabels())})}}}]);return AxisLabels}();exports.AxisLabels=AxisLabels},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AxisScale=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(14));var _errors=__webpack_require__(25);var _time_ticks=__webpack_require__(1304);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AxisScale=function(){function AxisScale(axisConfig,visConfig){_classCallCheck(this,AxisScale);this.axisConfig=axisConfig;this.visConfig=visConfig;if(this.axisConfig.get("type")==="category"){this.values=this.axisConfig.values;this.ordered=this.axisConfig.ordered}}_createClass(AxisScale,[{key:"getScaleType",value:function getScaleType(){return this.axisConfig.getScaleType()}},{key:"validateUserExtents",value:function validateUserExtents(domain){var config=this.axisConfig;return domain.map(function(val){val=parseFloat(val);if(isNaN(val))throw new Error(val+" is not a valid number");if(config.isPercentage()&&config.isUserDefined())return val/100;return val})}},{key:"getTimeDomain",value:function getTimeDomain(data){return[this.minExtent(data),this.maxExtent(data)]}},{key:"minExtent",value:function minExtent(data){return this.calculateExtent(data||this.values,"min")}},{key:"maxExtent",value:function maxExtent(data){return this.calculateExtent(data||this.values,"max")}},{key:"calculateExtent",value:function calculateExtent(data,extent){var ordered=this.ordered;var opts=[ordered[extent]];var point=_d.default[extent](data);if(this.axisConfig.get("scale.expandLastBucket")&&extent==="max"){point=this.addInterval(point)}opts.push(point);return _d.default[extent](opts.reduce(function(opts,v){if(!_lodash.default.isNumber(v))v=+v;if(!isNaN(v))opts.push(v);return opts},[]))}},{key:"addInterval",value:function addInterval(x){return this.modByInterval(x,+1)}},{key:"subtractInterval",value:function subtractInterval(x){return this.modByInterval(x,-1)}},{key:"modByInterval",value:function modByInterval(x,n){var ordered=this.ordered;if(!ordered)return x;var interval=ordered.interval;if(!interval)return x;if(!ordered.date){return x+=ordered.interval*n}var y=(0,_moment.default)(x);var method=n>0?"add":"subtract";_lodash.default.times(Math.abs(n),function(){y[method](interval)});return y.valueOf()}},{key:"getAllPoints",value:function getAllPoints(){var _this=this;var config=this.axisConfig;var data=this.visConfig.data.chartData();var chartPoints=_lodash.default.reduce(data,function(chartPoints,chart,chartIndex){var points=chart.series.reduce(function(points,seri,seriIndex){var seriConfig=_this.visConfig.get("charts[".concat(chartIndex,"].series[").concat(seriIndex,"]"));var matchingValueAxis=!!seriConfig.valueAxis&&seriConfig.valueAxis===config.get("id");var isFirstAxis=config.get("id")===_this.visConfig.get("valueAxes[0].id");if(matchingValueAxis||!seriConfig.valueAxis&&isFirstAxis){var axisPoints=seri.values.map(function(val){if(val.y0){return val.y0+val.y}return val.y});return points.concat(axisPoints)}return points},[]);return chartPoints.concat(points)},[]);return chartPoints}},{key:"getYMin",value:function getYMin(){return _d.default.min(this.getAllPoints())}},{key:"getYMax",value:function getYMax(){return _d.default.max(this.getAllPoints())}},{key:"getExtents",value:function getExtents(){if(this.axisConfig.get("type")==="category"){if(this.axisConfig.isTimeDomain())return this.getTimeDomain(this.values);if(this.axisConfig.isOrdinal())return this.values}var min=this.axisConfig.get("scale.min",this.getYMin());var max=this.axisConfig.get("scale.max",this.getYMax());var domain=[min,max];if(this.axisConfig.isUserDefined())return this.validateUserExtents(domain);if(this.axisConfig.isLogScale())return this.logDomain(min,max);if(this.axisConfig.isYExtents()){var scaleBoundsMargin=this.axisConfig.get("scale.boundsMargin");if(scaleBoundsMargin===0){return domain}else{if(max<0){domain[1]=domain[1]+scaleBoundsMargin}if(min>0){domain[0]=domain[0]-scaleBoundsMargin}return domain}}return[Math.min(0,min),Math.max(0,max)]}},{key:"getDomain",value:function getDomain(length){var domain=this.getExtents();var pad=this.axisConfig.get("padForLabels");if(pad>0&&this.canApplyNice()){var domainLength=domain[1]-domain[0];var valuePerPixel=domainLength/length;var padValue=valuePerPixel*pad;if(domain[0]<0){domain[0]-=padValue}domain[1]+=padValue}return domain}},{key:"getRange",value:function getRange(length){if(this.axisConfig.isHorizontal()){return!this.axisConfig.get("scale.inverted")?[0,length]:[length,0]}else{return this.axisConfig.get("scale.inverted")?[0,length]:[length,0]}}},{key:"throwCustomError",value:function throwCustomError(message){throw new Error(message)}},{key:"throwLogScaleValuesError",value:function throwLogScaleValuesError(){throw new _errors.InvalidLogScaleValues}},{key:"logDomain",value:function logDomain(min,max){if(min<0||max<0)return this.throwLogScaleValuesError();return[1,max]}},{key:"getD3Scale",value:function getD3Scale(scaleTypeArg){var scaleType=scaleTypeArg||"linear";if(scaleType==="square root")scaleType="sqrt";if(this.axisConfig.isTimeDomain()){return _d.default.time.scale.utc()}if(this.axisConfig.isOrdinal())return _d.default.scale.ordinal();if(typeof _d.default.scale[scaleType]!=="function"){return this.throwCustomError("Axis.getScaleType: ".concat(scaleType," is not a function"))}return _d.default.scale[scaleType]()}},{key:"canApplyNice",value:function canApplyNice(){var config=this.axisConfig;return!config.isUserDefined()&&!config.isYExtents()&&!config.isOrdinal()&&!config.isTimeDomain()}},{key:"getScale",value:function getScale(length){var config=this.axisConfig;var scale=this.getD3Scale(config.getScaleType());var domain=this.getDomain(length);var range=this.getRange(length);var padding=config.get("style.rangePadding");var outerPadding=config.get("style.rangeOuterPadding");this.scale=scale.domain(domain);if(config.isOrdinal()){this.scale.rangeBands(range,padding,outerPadding)}else{this.scale.range(range)}if(this.canApplyNice())this.scale.nice();if(this.scale.clamp)this.scale.clamp(true);this.validateScale(this.scale);if(this.axisConfig.isTimeDomain()){this.scale.timezoneCorrectedTicks=(0,_time_ticks.timeTicks)(scale)}return this.scale}},{key:"validateScale",value:function validateScale(scale){if(!scale||_lodash.default.isNaN(scale))throw new Error("scale is "+scale)}}]);return AxisScale}();exports.AxisScale=AxisScale},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timeTicks=void 0;var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var timeTicks=function timeTicks(scale){var domain=scale.domain();var startOffset=(0,_moment.default)(domain[0]).utcOffset();var shiftedDomain=domain.map(function(val){return(0,_moment.default)(val).add(startOffset,"minute")});var tickScale=scale.copy().domain(shiftedDomain);return function(n){var ticks=tickScale.ticks(n);var timePerTick=(domain[1]-domain[0])/ticks.length;var hourTicks=timePerTick<1e3*60*60*12;return ticks.map(function(d){var currentOffset=(0,_moment.default)(d).utcOffset();return(0,_moment.default)(d).subtract(hourTicks?startOffset:currentOffset,"minute").valueOf()})}};exports.timeTicks=timeTicks},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AxisConfig=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _d=_interopRequireDefault(__webpack_require__(15));var _scale_modes=__webpack_require__(1306);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var defaults={show:true,type:"value",elSelector:".visAxis__column--{pos} .axis-div",position:"left",scale:{type:"linear",expandLastBucket:true,inverted:false,defaultYExtents:null,boundsMargin:0,setYExtents:null,min:null,max:null,mode:_scale_modes.SCALE_MODES.NORMAL},style:{color:"#ddd",lineWidth:"1px",opacity:1,tickColor:"#ddd",tickWidth:"1px",tickLength:"6px",rangePadding:.1,rangeOuterPadding:0},labels:{axisFormatter:null,show:true,rotate:0,rotateAnchor:"center",filter:false,color:"#ddd",font:'"Open Sans", "Lato", "Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"8pt",truncate:100},title:{text:"",elSelector:".visAxis__column--{pos} .axis-div"},padForLabels:0};var padForLabelsX=40;var padForLabelsY=15;var categoryDefaults={type:"category",position:"bottom"};var valueDefaults={labels:{axisFormatter:_d.default.format("n")}};var horizontalDefaults={labels:{rotate:0,rotateAnchor:"end",filter:true,truncate:0}};var verticalDefaults={labels:{rotateAnchor:"middle"}};var AxisConfig=function(){function AxisConfig(chartConfig,axisConfigArgs){_classCallCheck(this,AxisConfig);var isCategoryType=axisConfigArgs.type==="category";var typeDefaults=isCategoryType?_lodash.default.cloneDeep(categoryDefaults):_lodash.default.cloneDeep(valueDefaults);var axisConfigArgsClone=_lodash.default.cloneDeep(axisConfigArgs);var isCategoryAxis=axisConfigArgsClone.type==="category";var isHorizontal=axisConfigArgsClone.position&&["top","bottom"].includes(axisConfigArgsClone.position);_lodash.default.merge(typeDefaults,isHorizontal||isCategoryAxis?horizontalDefaults:verticalDefaults);this._values=_lodash.default.defaultsDeep({},axisConfigArgsClone,typeDefaults,defaults);this._values.elSelector=this._values.elSelector.replace("{pos}",this._values.position);this._values.rootEl=chartConfig.get("el");this.data=chartConfig.data;if(isCategoryAxis){if(!this._values.values){this.values=this.data.xValues(chartConfig.get("orderBucketsBySum",false));this.ordered=this.data.get("ordered")}else{this.values=this._values.values}if(!this._values.labels.axisFormatter){this._values.labels.axisFormatter=this.data.data.xAxisFormatter||this.data.get("xAxisFormatter")}}if(this.get("type")==="value"){var isWiggleOrSilhouette=this.get("scale.mode")===_scale_modes.SCALE_MODES.WIGGLE||this.get("scale.mode")===_scale_modes.SCALE_MODES.SILHOUETTE;if(isWiggleOrSilhouette){this._values.scale.defaultYExtents=false;if(!axisConfigArgs.show){this._values.show=false;this._values.title.show=true}}if(this.isLogScale()){this._values.labels.filter=true}}if(axisConfigArgs.title==null||axisConfigArgs.title.text==null){var label=isCategoryAxis?"xAxisLabel":"yAxisLabel";this.set("title.text",this.data.get(label))}if(this.isHorizontal()&&this.isOrdinal()){this._values.labels.filter=_lodash.default.get(axisConfigArgs,"labels.filter",false);this._values.labels.rotate=_lodash.default.get(axisConfigArgs,"labels.rotate",90);this._values.labels.truncate=_lodash.default.get(axisConfigArgs,"labels.truncate",100)}if(this.get("type")==="category"&&!this.isHorizontal()){this._values.scale.inverted=_lodash.default.get(axisConfigArgs,"scale.inverted",true)}if(chartConfig.get("labels.show",false)&&!isCategoryAxis){this._values.padForLabels=isHorizontal?padForLabelsX:padForLabelsY}var offset;var stacked=true;switch(this.get("scale.mode")){case _scale_modes.SCALE_MODES.NORMAL:offset="zero";stacked=false;break;case _scale_modes.SCALE_MODES.GROUPED:offset="group";stacked=false;break;case _scale_modes.SCALE_MODES.PERCENTAGE:offset=function expand(data){var n=data.length;var m=data[0].length;var y0=[];for(var j=0;j<m;++j){var o=0;for(var i=0;i<n;i++){o+=data[i][j][1]}if(o){for(var _i=0;_i<n;_i++){data[_i][j][1]/=o}}}for(var _j=0;_j<m;++_j){y0[_j]=0}return y0};break;default:offset=this.get("scale.mode")}this.set("scale.offset",_lodash.default.get(axisConfigArgs,"scale.offset",offset));this.set("scale.stacked",stacked)}_createClass(AxisConfig,[{key:"get",value:function get(property,defaults){if(typeof defaults==="undefined"&&!_lodash.default.has(this._values,property)){throw new Error("Accessing invalid config property: ".concat(property))}var val=_lodash.default.get(this._values,property,defaults);if(val==null&&defaults!=null)return defaults;return val}},{key:"set",value:function set(property,value){return _lodash.default.set(this._values,property,value)}},{key:"isHorizontal",value:function isHorizontal(){return this._values.position==="top"||this._values.position==="bottom"}},{key:"isOrdinal",value:function isOrdinal(){return!!this.values&&!this.isTimeDomain()}},{key:"isTimeDomain",value:function isTimeDomain(){return this.ordered&&this.ordered.date}},{key:"isPercentage",value:function isPercentage(){return this._values.scale.mode===_scale_modes.SCALE_MODES.PERCENTAGE}},{key:"isUserDefined",value:function isUserDefined(){return this._values.scale.setYExtents}},{key:"isYExtents",value:function isYExtents(){return this._values.scale.defaultYExtents}},{key:"isLogScale",value:function isLogScale(){return this.getScaleType()==="log"}},{key:"getScaleType",value:function getScaleType(){return this._values.scale.type}}]);return AxisConfig}();exports.AxisConfig=AxisConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SCALE_MODES=void 0;var SCALE_MODES={NORMAL:"normal",PERCENTAGE:"percentage",WIGGLE:"wiggle",SILHOUETTE:"silhouette",GROUPED:"grouped",ALL:["normal","percentage","wiggle","silhouette"]};exports.SCALE_MODES=SCALE_MODES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Alerts=void 0;var _jquery=_interopRequireDefault(__webpack_require__(12));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Alerts=function(){function Alerts(vis,alertDefs){var _this=this;_classCallCheck(this,Alerts);this.vis=vis;this.data=vis.data;this.alertDefs=_lodash.default.cloneDeep(alertDefs);this.alerts=(0,_lodash.default)(alertDefs).map(function(alertDef){if(!alertDef)return;if(alertDef.test&&!alertDef.test(vis,_this.data))return;return _this._addAlert(alertDef)}).compact()}_createClass(Alerts,[{key:"_addAlert",value:function _addAlert(alertDef){var type=alertDef.type||"info";var icon=alertDef.icon||type;var msg=alertDef.msg;var $icon=(0,_jquery.default)("<i>").addClass("visAlerts__icon fa fa-"+icon);var $text=(0,_jquery.default)("<p>").addClass("visAlerts__text").text(msg);var $closeIcon=(0,_jquery.default)("<i>").addClass("fa fa-close");var $closeDiv=(0,_jquery.default)("<div>").addClass("visAlerts__close").append($closeIcon);var $alert=(0,_jquery.default)("<div>").addClass("visAlert visAlert--"+type).append([$icon,$text,$closeDiv]);$closeDiv.on("click",function(){$alert.remove()});return $alert}},{key:"render",value:function render(){var alerts=this.alerts;var vis=this.vis;(0,_jquery.default)(vis.el).find(".visWrapper__alerts").append((0,_jquery.default)("<div>").addClass("visAlerts__tray"));if(!alerts.size())return;(0,_jquery.default)(vis.el).find(".visAlerts__tray").append(alerts.value())}},{key:"show",value:function show(msg,type){var vis=this.vis;var alert={msg:msg,type:type};if(this.alertDefs.find(function(alertDef){return alertDef.msg===alert.msg}))return;this.alertDefs.push(alert);(0,_jquery.default)(vis.el).find(".visAlerts__tray").append(this._addAlert(alert))}},{key:"destroy",value:function destroy(){(0,_jquery.default)(this.vis.el).find(".visWrapper__alerts").remove()}}]);return Alerts}();exports.Alerts=Alerts},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ChartGrid=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var defaults={style:{color:"rgba(105,112,125,0.2)"},categoryLines:false,valueAxis:undefined};var ChartGrid=function(){function ChartGrid(handler,gridConfig){_classCallCheck(this,ChartGrid);if(!gridConfig)return;this._handler=handler;this._values=_lodash.default.defaultsDeep({},gridConfig,defaults)}_createClass(ChartGrid,[{key:"drawLine",value:function drawLine(svg,tick,axis,width,height){var isHorizontal=axis.axisConfig.isHorizontal();var scale=axis.getScale();svg.append("path").attr("d",function(){var x0=isHorizontal?tick:0;var x1=isHorizontal?tick:width;var y0=!isHorizontal?tick:0;var y1=!isHorizontal?tick:height;var d3Line=_d.default.svg.line().x(function(d){return isHorizontal?scale(d[0]):d[0]}).y(function(d){return!isHorizontal?scale(d[1]):d[1]});return d3Line([[x0,y0],[x1,y1]])}).attr("fill","none").attr("stroke",this.get("style.color")).attr("stroke-width",1)}},{key:"drawCategoryLines",value:function drawCategoryLines(svg,width,height){var _this=this;var axis=this._handler.categoryAxes[0];if(!axis)return;var ticks=axis.getScale().ticks;if(!ticks)return;ticks().forEach(function(tick){_this.drawLine(svg,tick,axis,width,height)})}},{key:"drawValueLines",value:function drawValueLines(svg,width,height){var _this2=this;var axis=this._handler.valueAxes.find(function(axis){return axis.axisConfig.get("id")===_this2.get("valueAxis")});if(!axis)return;var ticks=axis.getScale().ticks;if(!ticks)return;ticks().forEach(function(tick){_this2.drawLine(svg,tick,axis,width,height)})}},{key:"draw",value:function draw(width,height){var self=this;return function(selection){if(!self._values)return;selection.each(function(){if(self.get("categoryLines"))self.drawCategoryLines(_d.default.select(this),width,height);if(self.get("valueAxis",false))self.drawValueLines(_d.default.select(this),width,height)})}}},{key:"get",value:function get(property,defaults){if(_lodash.default.has(this._values,property)||typeof defaults!=="undefined"){return _lodash.default.get(this._values,property,defaults)}else{throw new Error("Accessing invalid config property: ".concat(property));return defaults}}},{key:"set",value:function set(property,value){return _lodash.default.set(this._values,property,value)}}]);return ChartGrid}();exports.ChartGrid=ChartGrid},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReactVisType=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(13);var _chrome=_interopRequireDefault(__webpack_require__(7));var _i18n=__webpack_require__(11);var _base_vis_type=__webpack_require__(359);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var ReactVisController=function(){function ReactVisController(element,vis){_classCallCheck(this,ReactVisController);this.el=element;this.vis=vis}_createClass(ReactVisController,[{key:"render",value:function render(visData,visParams,updateStatus){var _this=this;this.visData=visData;return new Promise(function(resolve){var Component=_this.vis.type.visConfig.component;var config=_chrome.default.getUiSettingsClient();(0,_reactDom.render)(_react.default.createElement(_i18n.I18nContext,null,_react.default.createElement(Component,{config:config,vis:_this.vis,visData:visData,visParams:visParams,renderComplete:resolve,updateStatus:updateStatus})),_this.el)})}},{key:"destroy",value:function destroy(){(0,_reactDom.unmountComponentAtNode)(this.el)}}]);return ReactVisController}();var ReactVisType=function(_BaseVisType){_inherits(ReactVisType,_BaseVisType);function ReactVisType(opts){var _this2;_classCallCheck(this,ReactVisType);_this2=_possibleConstructorReturn(this,_getPrototypeOf(ReactVisType).call(this,_objectSpread({},opts,{visualization:ReactVisController})));if(!_this2.visConfig.component){throw new Error("Missing component for ReactVisType")}return _this2}return ReactVisType}(_base_vis_type.BaseVisType);exports.ReactVisType=ReactVisType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visTypeAliasRegistry=void 0;var registry=[];var visTypeAliasRegistry={get:function get(){return[].concat(registry)},add:function add(newVisTypeAlias){if(registry.find(function(visTypeAlias){return visTypeAlias.name===newVisTypeAlias.name})){throw new Error("".concat(newVisTypeAlias.name," already registered"))}registry.push(newVisTypeAlias)}};exports.visTypeAliasRegistry=visTypeAliasRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;var _plugin=__webpack_require__(1312);function plugin(initializerContext){return new _plugin.MetricsPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricsPlugin=void 0;var _metrics_fn=__webpack_require__(1313);var _metrics_type=__webpack_require__(1315);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MetricsPlugin=function(){function MetricsPlugin(initializerContext){_classCallCheck(this,MetricsPlugin);_defineProperty(this,"initializerContext",void 0);this.initializerContext=initializerContext}_createClass(MetricsPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(core,_ref){var data,visualizations;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_ref.data,visualizations=_ref.visualizations;data.expressions.registerFunction(_metrics_fn.createMetricsFn);visualizations.types.VisTypesRegistryProvider.register(_metrics_type.createMetricsTypeDefinition);case 3:case"end":return _context.stop()}}},_callee)}));function setup(_x,_x2){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){}}]);return MetricsPlugin}();exports.MetricsPlugin=MetricsPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMetricsFn=void 0;var _lodash=__webpack_require__(1);var _i18n=__webpack_require__(2);var _persisted_state=__webpack_require__(99);var _chrome=_interopRequireDefault(__webpack_require__(7));var _request_handler=__webpack_require__(636);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var name="tsvb";var createMetricsFn=function createMetricsFn(){return{name:name,type:"render",context:{types:["kibana_context","null"]},help:_i18n.i18n.translate("tsvb.function.help",{defaultMessage:"TSVB visualization"}),args:{params:{types:["string"],default:'"{}"',help:""},uiState:{types:["string"],default:'"{}"',help:""}},fn:function(){var _fn=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context,args){var uiSettings,metricsRequestHandler,params,uiStateParams,uiState,response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:uiSettings=_chrome.default.getUiSettingsClient();metricsRequestHandler=(0,_request_handler.createMetricsRequestHandler)(uiSettings);params=JSON.parse(args.params);uiStateParams=JSON.parse(args.uiState);uiState=new _persisted_state.PersistedState(uiStateParams);_context.next=7;return metricsRequestHandler({timeRange:(0,_lodash.get)(context,"timeRange",null),query:(0,_lodash.get)(context,"query",null),filters:(0,_lodash.get)(context,"filters",null),visParams:params,uiState:uiState});case 7:response=_context.sent;response.visType="metrics";return _context.abrupt("return",{type:"render",as:"visualization",value:{uiState:uiState,visType:"metrics",visConfig:params,visData:response}});case 10:case"end":return _context.stop()}}},_callee)}));function fn(_x,_x2){return _fn.apply(this,arguments)}return fn}()}};exports.createMetricsFn=createMetricsFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateInterval=validateInterval;var _parse_interval=__webpack_require__(593);var _interval_regexp=__webpack_require__(637);var _i18n=__webpack_require__(2);function validateInterval(bounds,panel,maxBuckets){var interval=panel.interval;var min=bounds.min,max=bounds.max;if(!interval)return;if(interval==="auto")return;var greaterThanMatch=interval.match(_interval_regexp.GTE_INTERVAL_RE);if(greaterThanMatch)return;var duration=(0,_parse_interval.parseInterval)(interval);if(duration){var span=max.valueOf()-min.valueOf();var buckets=Math.floor(span/duration.asMilliseconds());if(buckets>maxBuckets){throw new Error(_i18n.i18n.translate("tsvb.validateInterval.notifier.maxBucketsExceededErrorMessage",{defaultMessage:"Max buckets exceeded: {buckets} is greater than {maxBuckets}, try a larger time interval in the panel options.",values:{buckets:buckets,maxBuckets:maxBuckets}}))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMetricsTypeDefinition=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _i18n=__webpack_require__(2);var _default_feedback_message=__webpack_require__(346);var _public=__webpack_require__(30);var _request_handler=__webpack_require__(636);var _editor_controller=__webpack_require__(1316);var _panel_types=__webpack_require__(102);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createMetricsTypeDefinition=function createMetricsTypeDefinition(){var uiSettings=_chrome.default.getUiSettingsClient();var savedObjectsClient=_chrome.default.getSavedObjectsClient();var EditorController=(0,_editor_controller.createEditorController)(uiSettings,savedObjectsClient);var metricsRequestHandler=(0,_request_handler.createMetricsRequestHandler)(uiSettings);return _public.visFactory.createReactVisualization({name:"metrics",title:_i18n.i18n.translate("tsvb.kbnVisTypes.metricsTitle",{defaultMessage:"TSVB"}),description:_i18n.i18n.translate("tsvb.kbnVisTypes.metricsDescription",{defaultMessage:"Build time-series using a visual pipeline interface"}),icon:"visVisualBuilder",feedbackMessage:_default_feedback_message.defaultFeedbackMessage,visConfig:{defaults:{id:"61ca57f0-469d-11e7-af02-69e470af7417",type:_panel_types.PANEL_TYPES.TIMESERIES,series:[{id:"61ca57f1-469d-11e7-af02-69e470af7417",color:"#68BC00",split_mode:"everything",metrics:[{id:"61ca57f2-469d-11e7-af02-69e470af7417",type:"count"}],separate_axis:0,axis_position:"right",formatter:"number",chart_type:"line",line_width:1,point_size:1,fill:.5,stacked:"none"}],time_field:"",index_pattern:"",interval:"",axis_position:"left",axis_formatter:"number",axis_scale:"normal",show_legend:1,show_grid:1},component:__webpack_require__(640).VisEditor},editor:EditorController,editorConfig:{component:__webpack_require__(640).VisEditor},options:{showQueryBar:false,showFilterBar:false,showIndexSelection:false},requestHandler:metricsRequestHandler,responseHandler:"none"})};exports.createMetricsTypeDefinition=createMetricsTypeDefinition},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createEditorController=createEditorController;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(13);var _i18n=__webpack_require__(11);var _fetch_fields=__webpack_require__(638);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createEditorController(config,savedObjectsClient){var _temp;return _temp=function(){function _temp(el,savedObj){var _this=this;_classCallCheck(this,_temp);_defineProperty(this,"fetchDefaultIndexPattern",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return savedObjectsClient.get("index-pattern",config.get("defaultIndex"));case 2:indexPattern=_context.sent;return _context.abrupt("return",indexPattern.attributes);case 4:case"end":return _context.stop()}}},_callee)})));_defineProperty(this,"fetchDefaultParams",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _ref3,title,timeFieldName;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.fetchDefaultIndexPattern();case 2:_ref3=_context2.sent;title=_ref3.title;timeFieldName=_ref3.timeFieldName;_this.state.vis.params.default_index_pattern=title;_this.state.vis.params.default_timefield=timeFieldName;_context2.next=9;return(0,_fetch_fields.fetchIndexPatternFields)(_this.state.vis);case 9:_this.state.vis.fields=_context2.sent;_this.state.isLoaded=true;case 11:case"end":return _context2.stop()}}},_callee2)})));_defineProperty(this,"getComponent",function(){return _this.state.vis.type.editorConfig.component});this.el=el;this.state={savedObj:savedObj,vis:savedObj.vis,isLoaded:false}}_createClass(_temp,[{key:"render",value:function(){var _render2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(params){var Component;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:Component=this.getComponent();_context3.t0=!this.state.isLoaded;if(!_context3.t0){_context3.next=5;break}_context3.next=5;return this.fetchDefaultParams();case 5:(0,_reactDom.render)(_react.default.createElement(_i18n.I18nContext,null,_react.default.createElement(Component,{config:config,vis:this.state.vis,visFields:this.state.vis.fields,visParams:this.state.vis.params,savedObj:this.state.savedObj,timeRange:params.timeRange,renderComplete:function renderComplete(){},isEditorMode:true,appState:params.appState})),this.el);case 6:case"end":return _context3.stop()}}},_callee3,this)}));function render(_x){return _render2.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){(0,_reactDom.unmountComponentAtNode)(this.el)}}]);return _temp}(),_temp}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisEditorVisualization=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(1);var _eui=__webpack_require__(3);var _visualize_loader=__webpack_require__(362);var _react2=__webpack_require__(5);var _get_interval=__webpack_require__(363);var _panel_types=__webpack_require__(102);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MIN_CHART_HEIGHT=250;var VisEditorVisualizationUI=function(_Component){_inherits(VisEditorVisualizationUI,_Component);function VisEditorVisualizationUI(props){var _this;_classCallCheck(this,VisEditorVisualizationUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(VisEditorVisualizationUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleMouseDown",function(){window.addEventListener("mouseup",_this.handleMouseUp);_this.setState({dragging:true})});_defineProperty(_assertThisInitialized(_this),"handleMouseUp",function(){window.removeEventListener("mouseup",_this.handleMouseUp);_this.setState({dragging:false})});_defineProperty(_assertThisInitialized(_this),"handleMouseMove",function(event){if(_this.state.dragging){_this.setState(function(prevState){return{height:Math.max(MIN_CHART_HEIGHT,prevState.height+event.movementY)}})}});_defineProperty(_assertThisInitialized(_this),"onSizeHandleKeyDown",function(ev){var keyCode=ev.keyCode;if(keyCode===_eui.keyCodes.UP||keyCode===_eui.keyCodes.DOWN){ev.preventDefault();_this.setState(function(prevState){var newHeight=prevState.height+(keyCode===_eui.keyCodes.UP?-15:15);return{height:Math.max(MIN_CHART_HEIGHT,newHeight)}})}});_this.state={height:MIN_CHART_HEIGHT,dragging:false,panelInterval:0};_this._visEl=_react.default.createRef();_this._subscription=null;return _this}_createClass(VisEditorVisualizationUI,[{key:"_loadVisualization",value:function(){var _loadVisualization2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var loader,_this$props,uiState,timeRange,appState,savedObj,onDataChange;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_visualize_loader.getVisualizeLoader)();case 2:loader=_context.sent;if(this._visEl.current){_context.next=5;break}return _context.abrupt("return");case 5:_this$props=this.props,uiState=_this$props.uiState,timeRange=_this$props.timeRange,appState=_this$props.appState,savedObj=_this$props.savedObj,onDataChange=_this$props.onDataChange;this._handler=loader.embedVisualizationWithSavedObject(this._visEl.current,savedObj,{listenOnChange:false,uiState:uiState,timeRange:timeRange,appState:appState});this._subscription=this._handler.data$.subscribe(function(data){_this2.setPanelInterval(data.visData);onDataChange(data)});case 8:case"end":return _context.stop()}}},_callee,this)}));function _loadVisualization(){return _loadVisualization2.apply(this,arguments)}return _loadVisualization}()},{key:"setPanelInterval",value:function setPanelInterval(visData){var panelInterval=(0,_get_interval.getInterval)(visData,this.props.model);if(this.state.panelInterval!==panelInterval){this.setState({panelInterval:panelInterval})}}},{key:"hasShowPanelIntervalValue",value:function hasShowPanelIntervalValue(){var type=(0,_lodash.get)(this.props,"model.type","");var interval=(0,_lodash.get)(this.props,"model.interval",_get_interval.AUTO_INTERVAL);return[_panel_types.PANEL_TYPES.METRIC,_panel_types.PANEL_TYPES.TOP_N,_panel_types.PANEL_TYPES.GAUGE,_panel_types.PANEL_TYPES.MARKDOWN,_panel_types.PANEL_TYPES.TABLE].includes(type)&&((0,_get_interval.isAutoInterval)(interval)||(0,_get_interval.isGteInterval)(interval))}},{key:"getFormattedPanelInterval",value:function getFormattedPanelInterval(){var interval=(0,_get_interval.convertIntervalIntoUnit)(this.state.panelInterval,false);return interval?"".concat(interval.unitValue).concat(interval.unitString):null}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("mousemove",this.handleMouseMove);window.removeEventListener("mouseup",this.handleMouseUp);if(this._handler){this._handler.destroy()}if(this._subscription){this._subscription.unsubscribe()}}},{key:"componentDidMount",value:function componentDidMount(){window.addEventListener("mousemove",this.handleMouseMove);this._loadVisualization()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this._handler&&!(0,_lodash.isEqual)(this.props.timeRange,prevProps.timeRange)){this._handler.update({timeRange:this.props.timeRange})}}},{key:"render",value:function render(){var _this$props2=this.props,dirty=_this$props2.dirty,autoApply=_this$props2.autoApply,title=_this$props2.title,description=_this$props2.description,onToggleAutoApply=_this$props2.onToggleAutoApply,onCommit=_this$props2.onCommit;var style={height:this.state.height};if(this.state.dragging){style.userSelect="none"}var panelInterval=this.hasShowPanelIntervalValue()&&this.getFormattedPanelInterval();var applyMessage=_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.changesSuccessfullyAppliedMessage",defaultMessage:"The latest changes have been applied."});if(dirty){applyMessage=_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.changesHaveNotBeenAppliedMessage",defaultMessage:"The changes to this visualization have not been applied."})}if(autoApply){applyMessage=_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.changesWillBeAutomaticallyAppliedMessage",defaultMessage:"The changes will be automatically applied."})}var applyButton=_react.default.createElement(_eui.EuiFlexGroup,{className:"tvbEditorVisualization__apply",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiSwitch,{id:"tsvbAutoApplyInput",label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.autoApplyLabel",defaultMessage:"Auto apply"}),checked:autoApply,onChange:onToggleAutoApply})),panelInterval&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{color:"default",size:"xs"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.panelInterval",defaultMessage:"Interval: {panelInterval}",values:{panelInterval:panelInterval}})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{color:dirty?"default":"subdued",size:"xs"},_react.default.createElement("p",null,applyMessage))),!autoApply&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{iconType:"play",fill:true,size:"s",onClick:onCommit,disabled:!dirty,"data-test-subj":"applyBtn"},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.applyChangesLabel",defaultMessage:"Apply changes"}))));return _react.default.createElement("div",null,_react.default.createElement("div",{style:style,className:"tvbEditorVisualization","data-shared-items-container":true,"data-title":title,"data-description":description,ref:this._visEl}),_react.default.createElement("div",{className:"tvbEditor--hideForReporting"},applyButton,_react.default.createElement("button",{className:"tvbEditorVisualization__draghandle",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyDown:this.onSizeHandleKeyDown,"aria-label":this.props.intl.formatMessage({id:"tsvb.colorRules.adjustChartSizeAriaLabel",defaultMessage:"Press up/down to adjust the chart size"})},_react.default.createElement("i",{className:"fa fa-ellipsis-h"}))))}}]);return VisEditorVisualizationUI}(_react.Component);VisEditorVisualizationUI.propTypes={model:_propTypes.default.object,onCommit:_propTypes.default.func,uiState:_propTypes.default.object,onToggleAutoApply:_propTypes.default.func,savedObj:_propTypes.default.object,timeRange:_propTypes.default.object,dirty:_propTypes.default.bool,autoApply:_propTypes.default.bool,appState:_propTypes.default.object};var VisEditorVisualization=(0,_react2.injectI18n)(VisEditorVisualizationUI);exports.VisEditorVisualization=VisEditorVisualization},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddedVisualizeHandler=void 0;var _events=__webpack_require__(48);var _lodash=__webpack_require__(1);var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);var _i18n=__webpack_require__(2);var _notify=__webpack_require__(9);var _registries=__webpack_require__(80);var _inspector=__webpack_require__(641);var _render_complete=__webpack_require__(82);var _timefilter=__webpack_require__(22);var _vis_filters=__webpack_require__(100);var _pipeline_data_loader=__webpack_require__(1340);var _visualization_loader=__webpack_require__(616);var _visualize_data_loader=__webpack_require__(1343);var _public=__webpack_require__(24);var _adapters=__webpack_require__(115);var _utilities=__webpack_require__(41);var _utils=__webpack_require__(1344);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RENDER_COMPLETE_EVENT="render_complete";var DATA_SHARED_ITEM="data-shared-item";var LOADING_ATTRIBUTE="data-loading";var RENDERING_COUNT_ATTRIBUTE="data-rendering-count";var EmbeddedVisualizeHandler=function(){function EmbeddedVisualizeHandler(element,savedObject,params){var _this=this;_classCallCheck(this,EmbeddedVisualizeHandler);this.element=element;_defineProperty(this,"data$",void 0);_defineProperty(this,"inspectorAdapters",{});_defineProperty(this,"vis",void 0);_defineProperty(this,"handlers",void 0);_defineProperty(this,"loaded",false);_defineProperty(this,"destroyed",false);_defineProperty(this,"pipelineDataLoader",false);_defineProperty(this,"listeners",new _events.EventEmitter);_defineProperty(this,"firstRenderComplete",void 0);_defineProperty(this,"renderCompleteHelper",void 0);_defineProperty(this,"shouldForceNextFetch",false);_defineProperty(this,"debouncedFetchAndRender",(0,_lodash.debounce)(function(){if(_this.destroyed){return}var forceFetch=_this.shouldForceNextFetch;_this.shouldForceNextFetch=false;_this.fetch(forceFetch).then(_this.render)},100));_defineProperty(this,"dataLoaderParams",void 0);_defineProperty(this,"appState",void 0);_defineProperty(this,"uiState",void 0);_defineProperty(this,"dataLoader",void 0);_defineProperty(this,"dataSubject",void 0);_defineProperty(this,"actions",{});_defineProperty(this,"events$",void 0);_defineProperty(this,"autoFetch",void 0);_defineProperty(this,"abortController",void 0);_defineProperty(this,"autoRefreshFetchSubscription",void 0);_defineProperty(this,"render",function(){var response=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var executeRenderer=_this.rendererProvider(response);if(!executeRenderer){return}executeRenderer().then(function(){if(!_this.loaded){_this.loaded=true;if(_this.autoFetch){_this.fetchAndRender()}}})});_defineProperty(this,"openInspector",function(){return _inspector.Inspector.open(_this.inspectorAdapters,{title:_this.vis.title})});_defineProperty(this,"hasInspector",function(){return _inspector.Inspector.isAvailable(_this.inspectorAdapters)});_defineProperty(this,"reload",function(){_this.fetchAndRender(true)});_defineProperty(this,"incrementRenderingCount",function(){var renderingCount=Number(_this.element.getAttribute(RENDERING_COUNT_ATTRIBUTE)||0);_this.element.setAttribute(RENDERING_COUNT_ATTRIBUTE,"".concat(renderingCount+1))});_defineProperty(this,"onRenderCompleteListener",function(){_this.listeners.emit(RENDER_COMPLETE_EVENT);_this.element.removeAttribute(LOADING_ATTRIBUTE);_this.incrementRenderingCount()});_defineProperty(this,"onUiStateChange",function(){_this.fetchAndRender()});_defineProperty(this,"getActiveInspectorAdapters",function(){var adapters={};var typeAdapters=_this.vis.type.inspectorAdapters;if(typeAdapters&&typeAdapters.requests||_this.vis.type.requestHandler==="courier"){adapters.requests=new _adapters.RequestAdapter}if(typeAdapters&&typeAdapters.data||_this.vis.type.requestHandler==="courier"){adapters.data=new _adapters.DataAdapter}if(typeAdapters&&typeAdapters.custom){Object.entries(typeAdapters.custom).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],Adapter=_ref2[1];adapters[key]=new Adapter})}return adapters});_defineProperty(this,"fetchAndRender",function(){var forceFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_this.shouldForceNextFetch=forceFetch||_this.shouldForceNextFetch;_this.element.setAttribute(LOADING_ATTRIBUTE,"");_this.debouncedFetchAndRender()});_defineProperty(this,"handleVisUpdate",function(){if(_this.appState){_this.appState.vis=_this.vis.getState();_this.appState.save()}_this.fetchAndRender()});_defineProperty(this,"cancel",function(){if(_this.abortController)_this.abortController.abort()});_defineProperty(this,"fetch",function(){var forceFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_this.cancel();_this.abortController=new AbortController;_this.dataLoaderParams.abortSignal=_this.abortController.signal;_this.dataLoaderParams.aggs=_this.vis.getAggConfig();_this.dataLoaderParams.forceFetch=forceFetch;_this.dataLoaderParams.inspectorAdapters=_this.inspectorAdapters;_this.vis.filters={timeRange:_this.dataLoaderParams.timeRange};_this.vis.requestError=undefined;_this.vis.showRequestError=false;return _this.dataLoader.fetch(_objectSpread({},_this.dataLoaderParams)).then(function(data){if(data&&data.type==="error"){throw data.error}if(data&&data.value){_this.dataSubject.next(data.value)}return data}).catch(_this.handleDataLoaderError)});_defineProperty(this,"handleDataLoaderError",function(error){if(error&&error.name==="AbortError")return;if(_this.dataLoaderParams.searchSource&&_this.dataLoaderParams.searchSource.cancelQueued){_this.dataLoaderParams.searchSource.cancelQueued()}_this.vis.requestError=error;_this.vis.showRequestError=error.type&&["NO_OP_SEARCH_STRATEGY","UNSUPPORTED_QUERY"].includes(error.type);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("common.ui.visualize.dataLoaderError",{defaultMessage:"Error in visualization"}),text:error.message})});_defineProperty(this,"rendererProvider",function(response){var renderer=null;var args=[];if(_this.pipelineDataLoader){renderer=_registries.registries.renderers.get((0,_lodash.get)(response||{},"as","visualization"));args=[_this.element,(0,_lodash.get)(response,"value",{visType:_this.vis.type.name}),_this.handlers]}else{renderer=_visualization_loader.visualizationLoader;args=[_this.element,_this.vis,(0,_lodash.get)(response,"value.visData",null),(0,_lodash.get)(response,"value.visConfig",_this.vis.params),_this.uiState,{listenOnChange:false}]}if(!renderer){return null}return function(){var _renderer;return(_renderer=renderer).render.apply(_renderer,_toConsumableArray(args))}});var searchSource=savedObject.searchSource,vis=savedObject.vis;var appState=params.appState,uiState=params.uiState,queryFilter=params.queryFilter,timeRange=params.timeRange,filters=params.filters,query=params.query,_params$autoFetch=params.autoFetch,autoFetch=_params$autoFetch===void 0?true:_params$autoFetch,_params$pipelineDataL=params.pipelineDataLoader,pipelineDataLoader=_params$pipelineDataL===void 0?false:_params$pipelineDataL,Private=params.Private;this.dataLoaderParams={searchSource:searchSource,timeRange:timeRange,query:query,queryFilter:queryFilter,filters:filters,uiState:uiState,aggs:vis.getAggConfig(),forceFetch:false};this.pipelineDataLoader=pipelineDataLoader;this.firstRenderComplete=new Promise(function(resolve){_this.listeners.once(RENDER_COMPLETE_EVENT,resolve)});element.setAttribute(LOADING_ATTRIBUTE,"");element.setAttribute(DATA_SHARED_ITEM,"");element.setAttribute(RENDERING_COUNT_ATTRIBUTE,"0");element.addEventListener("renderComplete",this.onRenderCompleteListener);this.autoFetch=autoFetch;this.appState=appState;this.vis=vis;if(uiState){vis._setUiState(uiState)}this.uiState=this.vis.getUiState();this.handlers={vis:this.vis,uiState:this.uiState,onDestroy:function onDestroy(fn){return _this.handlers.destroyFn=fn}};this.vis.on("update",this.handleVisUpdate);this.vis.on("reload",this.reload);this.uiState.on("change",this.onUiStateChange);if(autoFetch){this.autoRefreshFetchSubscription=_timefilter.timefilter.getAutoRefreshFetch$().subscribe(this.reload)}this.vis.API.getGeohashBounds=function(){return(0,_utils.queryGeohashBounds)(_this.vis,{filters:_this.dataLoaderParams.filters,query:_this.dataLoaderParams.query})};this.dataLoader=pipelineDataLoader?new _pipeline_data_loader.PipelineDataLoader(vis):new _visualize_data_loader.VisualizeDataLoader(vis,Private);var visFilters=Private(_vis_filters.VisFiltersProvider);this.renderCompleteHelper=new _render_complete.RenderCompleteHelper(element);this.inspectorAdapters=this.getActiveInspectorAdapters();this.vis.openInspector=this.openInspector;this.vis.hasInspector=this.hasInspector;(0,_lodash.forEach)(this.vis.type.events,function(event,eventName){if(event.disabled||!eventName){return}else{_this.actions[eventName]=event.defaultAction}});this.handlers.eventsSubject=new Rx.Subject;this.vis.eventsSubject=this.handlers.eventsSubject;this.events$=this.handlers.eventsSubject.asObservable().pipe((0,_operators.share)());this.events$.subscribe(function(event){if(_this.actions[event.name]){event.data.aggConfigs=(0,_utilities.getTableAggs)(_this.vis);var newFilters=_this.actions[event.name](event.data)||[];visFilters.pushFilters(newFilters)}});this.dataSubject=new Rx.Subject;this.data$=this.dataSubject.asObservable().pipe((0,_operators.share)());this.render()}_createClass(EmbeddedVisualizeHandler,[{key:"update",value:function update(){var _this2=this;var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var dataAttrs=params.dataAttrs;if(dataAttrs){Object.keys(dataAttrs).forEach(function(key){if(dataAttrs[key]===null){_this2.element.removeAttribute("data-".concat(key));return}_this2.element.setAttribute("data-".concat(key),dataAttrs[key])})}var fetchRequired=false;if(params.hasOwnProperty("timeRange")&&!(0,_lodash.isEqual)(this.dataLoaderParams.timeRange,params.timeRange)){fetchRequired=true;this.dataLoaderParams.timeRange=params.timeRange}if(params.hasOwnProperty("filters")&&!(0,_public.onlyDisabledFiltersChanged)(this.dataLoaderParams.filters,params.filters)){fetchRequired=true;this.dataLoaderParams.filters=params.filters}if(params.hasOwnProperty("query")&&!(0,_lodash.isEqual)(this.dataLoaderParams.query,params.query)){fetchRequired=true;this.dataLoaderParams.query=params.query}if(fetchRequired){this.fetchAndRender()}}},{key:"destroy",value:function destroy(){this.destroyed=true;this.cancel();this.debouncedFetchAndRender.cancel();if(this.autoFetch){if(this.autoRefreshFetchSubscription)this.autoRefreshFetchSubscription.unsubscribe()}this.vis.removeListener("reload",this.reload);this.vis.removeListener("update",this.handleVisUpdate);this.element.removeEventListener("renderComplete",this.onRenderCompleteListener);this.uiState.off("change",this.onUiStateChange);_visualization_loader.visualizationLoader.destroy(this.element);this.renderCompleteHelper.destroy();if(this.handlers.destroyFn){this.handlers.destroyFn()}}},{key:"getElement",value:function getElement(){return this.element}},{key:"whenFirstRenderComplete",value:function whenFirstRenderComplete(){return this.firstRenderComplete}},{key:"addRenderCompleteListener",value:function addRenderCompleteListener(listener){this.listeners.addListener(RENDER_COMPLETE_EVENT,listener)}},{key:"removeRenderCompleteListener",value:function removeRenderCompleteListener(listener){this.listeners.removeListener(RENDER_COMPLETE_EVENT,listener)}}]);return EmbeddedVisualizeHandler}();exports.EmbeddedVisualizeHandler=EmbeddedVisualizeHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"InspectorSession",{enumerable:true,get:function get(){return _public.InspectorSession}});exports.Inspector=void 0;var _new_platform=__webpack_require__(8);var _public=__webpack_require__(428);var Inspector={isAvailable:_new_platform.npStart.plugins.inspector.isAvailable,open:_new_platform.npStart.plugins.inspector.open};exports.Inspector=Inspector},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorPublicPlugin=void 0;var _i18n=__webpack_require__(2);var React=_interopRequireWildcard(__webpack_require__(0));var _view_registry=__webpack_require__(1321);var _inspector_panel=__webpack_require__(1322);var _views=__webpack_require__(1324);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorPublicPlugin=function(){function InspectorPublicPlugin(initializerContext){_classCallCheck(this,InspectorPublicPlugin);_defineProperty(this,"views",void 0)}_createClass(InspectorPublicPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(core){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.views=new _view_registry.InspectorViewRegistry;this.views.register((0,_views.getDataViewDescription)(core.uiSettings));this.views.register((0,_views.getRequestsViewDescription)());return _context.abrupt("return",{registerView:this.views.register.bind(this.views),__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{views:this.views}});case 4:case"end":return _context.stop()}}},_callee,this)}));function setup(_x){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){var _this=this;var isAvailable=function isAvailable(adapters){return _this.views.getVisible(adapters).length>0};var closeButtonLabel=_i18n.i18n.translate("inspector.closeButton",{defaultMessage:"Close Inspector"});var open=function open(adapters){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var views=_this.views.getVisible(adapters);if(!views||views.length===0){throw new Error("Tried to open an inspector without views being available.\n          Make sure to call Inspector.isAvailable() with the same adapters before to check\n          if an inspector can be shown.")}return core.overlays.openFlyout(React.createElement(_inspector_panel.InspectorPanel,{views:views,adapters:adapters,title:options.title}),{"data-test-subj":"inspectorPanel",closeButtonAriaLabel:closeButtonLabel})};return{isAvailable:isAvailable,open:open}}},{key:"stop",value:function stop(){}}]);return InspectorPublicPlugin}();exports.InspectorPublicPlugin=InspectorPublicPlugin},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewRegistry=void 0;var _events=__webpack_require__(48);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorViewRegistry=function(_EventEmitter){_inherits(InspectorViewRegistry,_EventEmitter);function InspectorViewRegistry(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorViewRegistry);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorViewRegistry)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"views",[]);return _this}_createClass(InspectorViewRegistry,[{key:"register",value:function register(view){if(!view){return}this.views.push(view);this.views.sort(function(a,b){return(a.order||Number.MAX_VALUE)-(b.order||Number.MAX_VALUE)});this.emit("change")}},{key:"getAll",value:function getAll(){return this.views}},{key:"getVisible",value:function getVisible(adapters){if(!adapters){return[]}return this.views.filter(function(view){return!view.shouldShow||view.shouldShow(adapters)})}}]);return InspectorViewRegistry}(_events.EventEmitter);exports.InspectorViewRegistry=InspectorViewRegistry},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorPanel=void 0;var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _eui=__webpack_require__(3);var _inspector_view_chooser=__webpack_require__(1323);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function hasAdaptersChanged(oldAdapters,newAdapters){return Object.keys(oldAdapters).length!==Object.keys(newAdapters).length||Object.keys(oldAdapters).some(function(key){return oldAdapters[key]!==newAdapters[key]})}var inspectorTitle=_i18n.i18n.translate("inspector.title",{defaultMessage:"Inspector"});var InspectorPanel=function(_Component){_inherits(InspectorPanel,_Component);function InspectorPanel(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{selectedView:_this.props.views[0],views:_this.props.views,adapters:_objectSpread({},_this.props.adapters)});_defineProperty(_assertThisInitialized(_this),"onViewSelected",function(view){if(view!==_this.state.selectedView){_this.setState({selectedView:view})}});return _this}_createClass(InspectorPanel,[{key:"renderSelectedPanel",value:function renderSelectedPanel(){return _react.default.createElement(this.state.selectedView.component,{adapters:this.props.adapters,title:this.props.title||""})}},{key:"render",value:function render(){var _this$props=this.props,views=_this$props.views,title=_this$props.title;var selectedView=this.state.selectedView;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h1",null,title))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_inspector_view_chooser.InspectorViewChooser,{views:views,onViewSelected:this.onViewSelected,selectedView:selectedView})))),_react.default.createElement(_eui.EuiFlyoutBody,null,this.renderSelectedPanel()))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if(hasAdaptersChanged(prevState.adapters,nextProps.adapters)){throw new Error("Adapters are not allowed to be changed on an open InspectorPanel.")}var selectedViewMustChange=nextProps.views!==prevState.views&&!nextProps.views.includes(prevState.selectedView);return{views:nextProps.views,selectedView:selectedViewMustChange?nextProps.views[0]:prevState.selectedView}}}]);return InspectorPanel}(_react.Component);exports.InspectorPanel=InspectorPanel;_defineProperty(InspectorPanel,"defaultProps",{title:inspectorTitle});_defineProperty(InspectorPanel,"propTypes",{adapters:_propTypes.default.object.isRequired,views:function views(props,propName,componentName){if(!Array.isArray(props.views)||props.views.length<1){throw new Error("".concat(propName," prop must be an array of at least one element in ").concat(componentName,"."))}},title:_propTypes.default.string})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewChooser=void 0;var _react=__webpack_require__(5);var _react2=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorViewChooser=function(_Component){_inherits(InspectorViewChooser,_Component);function InspectorViewChooser(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorViewChooser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorViewChooser)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSelectorOpen:false});_defineProperty(_assertThisInitialized(_this),"toggleSelector",function(){_this.setState(function(prev){return{isSelectorOpen:!prev.isSelectorOpen}})});_defineProperty(_assertThisInitialized(_this),"closeSelector",function(){_this.setState({isSelectorOpen:false})});_defineProperty(_assertThisInitialized(_this),"renderView",function(view,index){return _react2.default.createElement(_eui.EuiContextMenuItem,{key:index,onClick:function onClick(){_this.props.onViewSelected(view);_this.closeSelector()},toolTipContent:view.help,toolTipPosition:"left","data-test-subj":"inspectorViewChooser".concat(view.title)},view.title)});return _this}_createClass(InspectorViewChooser,[{key:"renderViewButton",value:function renderViewButton(){return _react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"arrowDown",iconSide:"right",onClick:this.toggleSelector,"data-test-subj":"inspectorViewChooser"},_react2.default.createElement(_react.FormattedMessage,{id:"inspector.view",defaultMessage:"View: {viewName}",values:{viewName:this.props.selectedView.title}}))}},{key:"renderSingleView",value:function renderSingleView(){return _react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:this.props.selectedView.help},_react2.default.createElement(_react.FormattedMessage,{id:"inspector.view",defaultMessage:"View: {viewName}",values:{viewName:this.props.selectedView.title}}))}},{key:"render",value:function render(){var views=this.props.views;if(views.length<2){return this.renderSingleView()}var triggerButton=this.renderViewButton();return _react2.default.createElement(_eui.EuiPopover,{id:"inspectorViewChooser",ownFocus:true,button:triggerButton,isOpen:this.state.isSelectorOpen,closePopover:this.closeSelector,panelPaddingSize:"none",anchorPosition:"downRight",repositionOnScroll:true},_react2.default.createElement(_eui.EuiContextMenuPanel,{items:views.map(this.renderView)}))}}]);return InspectorViewChooser}(_react2.Component);exports.InspectorViewChooser=InspectorViewChooser;_defineProperty(InspectorViewChooser,"propTypes",{views:_propTypes.default.array.isRequired,onViewSelected:_propTypes.default.func.isRequired,selectedView:_propTypes.default.object.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getDataViewDescription",{enumerable:true,get:function get(){return _data.getDataViewDescription}});Object.defineProperty(exports,"getRequestsViewDescription",{enumerable:true,get:function get(){return _requests.getRequestsViewDescription}});var _data=__webpack_require__(1325);var _requests=__webpack_require__(1330)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDataViewDescription=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _data_view=__webpack_require__(1326);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var getDataViewDescription=function getDataViewDescription(uiSettings){return{title:_i18n.i18n.translate("inspector.data.dataTitle",{defaultMessage:"Data"}),order:10,help:_i18n.i18n.translate("inspector.data.dataDescriptionTooltip",{defaultMessage:"View the data behind the visualization"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.data)},component:function component(props){return _react.default.createElement(_data_view.DataViewComponent,_extends({},props,{uiSettings:uiSettings}))}}};exports.getDataViewDescription=getDataViewDescription},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataViewComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);var _data_table=__webpack_require__(1327);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataViewComponent=function(_Component){_inherits(DataViewComponent,_Component);function DataViewComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataViewComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataViewComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{});_defineProperty(_assertThisInitialized(_this),"_isMounted",false);_defineProperty(_assertThisInitialized(_this),"onUpdateData",function(type){if(type==="tabular"){_this.setState({tabularData:null,tabularOptions:{},tabularPromise:_this.props.adapters.data.getTabular()})}});return _this}_createClass(DataViewComponent,[{key:"finishLoadingData",value:function(){var _finishLoadingData=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var tabularPromise,tabularData;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:tabularPromise=this.state.tabularPromise;if(!tabularPromise){_context.next=6;break}_context.next=4;return tabularPromise;case 4:tabularData=_context.sent;if(this._isMounted){this.setState({tabularData:tabularData.data,tabularOptions:tabularData.options,tabularPromise:null})}case 6:case"end":return _context.stop()}}},_callee,this)}));function finishLoadingData(){return _finishLoadingData.apply(this,arguments)}return finishLoadingData}()},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.props.adapters.data.on("change",this.onUpdateData);this.finishLoadingData()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.props.adapters.data.removeListener("change",this.onUpdateData)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.finishLoadingData()}},{key:"render",value:function render(){if(this.state.tabularPromise){return DataViewComponent.renderLoading()}else if(!this.state.tabularData){return DataViewComponent.renderNoData()}return _react.default.createElement(_data_table.DataTableFormat,{data:this.state.tabularData,isFormatted:this.state.tabularOptions.returnsFormattedValues,exportTitle:this.props.title,uiSettings:this.props.uiSettings})}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,state){if(state&&nextProps.adapters===state.adapters){return null}return{adapters:nextProps.adapters,tabularData:null,tabularOptions:{},tabularPromise:nextProps.adapters.data.getTabular()}}},{key:"renderNoData",value:function renderNoData(){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.noDataAvailableTitle",defaultMessage:"No data available"})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.noDataAvailableDescription",defaultMessage:"The element did not provide any data."})))})}},{key:"renderLoading",value:function renderLoading(){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center",style:{height:"100%"}},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPanel,{className:"eui-textCenter"},_react.default.createElement(_eui.EuiLoadingChart,{size:"m"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.gatheringDataLabel",defaultMessage:"Gathering data"}))))))}}]);return DataViewComponent}(_react.Component);exports.DataViewComponent=DataViewComponent;_defineProperty(DataViewComponent,"propTypes",{uiSettings:_propTypes.default.object.isRequired,adapters:_propTypes.default.object.isRequired,title:_propTypes.default.string.isRequired})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataTableFormat=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _i18n=__webpack_require__(2);var _download_options=__webpack_require__(1328);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataTableFormat=function(_Component){_inherits(DataTableFormat,_Component);function DataTableFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataTableFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataTableFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"csvSeparator",_this.props.uiSettings.get("csv:separator",","));_defineProperty(_assertThisInitialized(_this),"quoteValues",_this.props.uiSettings.get("csv:quoteValues",true));_defineProperty(_assertThisInitialized(_this),"state",{});return _this}_createClass(DataTableFormat,[{key:"render",value:function render(){var _this$state=this.state,columns=_this$state.columns,rows=_this$state.rows;var pagination={pageSizeOptions:[10,20,50],initialPageSize:20};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:true}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_download_options.DataDownloadOptions,{isFormatted:this.props.isFormatted,title:this.props.exportTitle,csvSeparator:this.csvSeparator,quoteValues:this.quoteValues,columns:columns,rows:rows}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiInMemoryTable,{className:"insDataTableFormat__table","data-test-subj":"inspectorTable",columns:columns,items:rows,sorting:true,pagination:pagination}))}}],[{key:"renderCell",value:function renderCell(dataColumn,value){var isFormatted=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},isFormatted?value.formatted:value),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"none",alignItems:"center"},dataColumn.filter&&_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.filterForValueButtonTooltip",defaultMessage:"Filter for value"})},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"plusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspector.data.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":"filterForInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return dataColumn.filter(value)}})),dataColumn.filterOut&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.filterOutValueButtonTooltip",defaultMessage:"Filter out value"})},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"minusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspector.data.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":"filterOutInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return dataColumn.filterOut(value)}}))))))}},{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref){var data=_ref.data,isFormatted=_ref.isFormatted;if(!data){return{columns:null,rows:null}}var columns=data.columns.map(function(dataColumn){return{name:dataColumn.name,field:dataColumn.field,sortable:isFormatted?function(row){return row[dataColumn.field].raw}:true,render:function render(value){return DataTableFormat.renderCell(dataColumn,value,isFormatted)}}});return{columns:columns,rows:data.rows}}}]);return DataTableFormat}(_react.Component);exports.DataTableFormat=DataTableFormat;_defineProperty(DataTableFormat,"propTypes",{data:_propTypes.default.object.isRequired,exportTitle:_propTypes.default.string.isRequired,uiSettings:_propTypes.default.object.isRequired,isFormatted:_propTypes.default.bool})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataDownloadOptions=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);var _export_csv=__webpack_require__(1329);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataDownloadOptions=function(_Component){_inherits(DataDownloadOptions,_Component);function DataDownloadOptions(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataDownloadOptions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataDownloadOptions)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"onTogglePopover",function(){_this.setState(function(state){return{isPopoverOpen:!state.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_defineProperty(_assertThisInitialized(_this),"exportCsv",function(){var customParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};(0,_export_csv.exportAsCsv)(_objectSpread({filename:"".concat(_this.props.title,".csv"),columns:_this.props.columns,rows:_this.props.rows,csvSeparator:_this.props.csvSeparator,quoteValues:_this.props.quoteValues},customParams))});_defineProperty(_assertThisInitialized(_this),"exportFormattedCsv",function(){_this.exportCsv({valueFormatter:function valueFormatter(item){return item.formatted}})});_defineProperty(_assertThisInitialized(_this),"exportFormattedAsRawCsv",function(){_this.exportCsv({valueFormatter:function valueFormatter(item){return item.raw}})});return _this}_createClass(DataDownloadOptions,[{key:"renderUnformattedDownload",value:function renderUnformattedDownload(){return _react.default.createElement(_eui.EuiButton,{size:"s",onClick:this.exportCsv},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.downloadCSVButtonLabel",defaultMessage:"Download CSV"}))}},{key:"renderFormattedDownloads",value:function renderFormattedDownloads(){var button=_react.default.createElement(_eui.EuiButton,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.onTogglePopover},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.downloadCSVToggleButtonLabel",defaultMessage:"Download CSV"}));var items=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"csv",onClick:this.exportFormattedCsv,toolTipContent:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.formattedCSVButtonTooltip",defaultMessage:"Download the data in table format"}),toolTipPosition:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.formattedCSVButtonLabel",defaultMessage:"Formatted CSV"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"rawCsv",onClick:this.exportFormattedAsRawCsv,toolTipContent:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.rawCSVButtonTooltip",defaultMessage:"Download the data as provided, for example, dates as timestamps"}),toolTipPosition:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.rawCSVButtonLabel",defaultMessage:"Raw CSV"}))];return _react.default.createElement(_eui.EuiPopover,{id:"inspectorDownloadData",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",repositionOnScroll:true},_react.default.createElement(_eui.EuiContextMenuPanel,{className:"eui-textNoWrap",items:items}))}},{key:"render",value:function render(){return this.props.isFormatted?this.renderFormattedDownloads():this.renderUnformattedDownload()}}]);return DataDownloadOptions}(_react.Component);exports.DataDownloadOptions=DataDownloadOptions;_defineProperty(DataDownloadOptions,"propTypes",{title:_propTypes.default.string.isRequired,csvSeparator:_propTypes.default.string.isRequired,quoteValues:_propTypes.default.bool.isRequired,isFormatted:_propTypes.default.bool,columns:_propTypes.default.array,rows:_propTypes.default.array})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.exportAsCsv=exportAsCsv;var _lodash=__webpack_require__(1);var _filesaver=__webpack_require__(435);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var LINE_FEED_CHARACTER="\r\n";var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val,quoteValues){if((0,_lodash.isObject)(val)){val=val.valueOf()}val=String(val);if(quoteValues&&nonAlphaNumRE.test(val)){val='"'.concat(val.replace(allDoubleQuoteRE,'""'),'"')}return val}function buildCsv(columns,rows,csvSeparator,quoteValues,valueFormatter){var header=columns.map(function(col){return escape(col.name,quoteValues)});var orderedFieldNames=columns.map(function(col){return col.field});var csvRows=rows.map(function(row){return orderedFieldNames.map(function(field){return escape(valueFormatter?valueFormatter(row[field]):row[field],quoteValues)})});return[header].concat(_toConsumableArray(csvRows)).map(function(row){return row.join(csvSeparator)}).join(LINE_FEED_CHARACTER)+LINE_FEED_CHARACTER}function exportAsCsv(_ref){var filename=_ref.filename,columns=_ref.columns,rows=_ref.rows,valueFormatter=_ref.valueFormatter,csvSeparator=_ref.csvSeparator,quoteValues=_ref.quoteValues;var type="text/plain;charset=utf-8";var csv=new Blob([buildCsv(columns,rows,csvSeparator,quoteValues,valueFormatter)],{type:type});(0,_filesaver.saveAs)(csv,filename)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRequestsViewDescription=void 0;var _i18n=__webpack_require__(2);var _requests_view=__webpack_require__(1331);var getRequestsViewDescription=function getRequestsViewDescription(){return{title:_i18n.i18n.translate("inspector.requests.requestsTitle",{defaultMessage:"Requests"}),order:20,help:_i18n.i18n.translate("inspector.requests.requestsDescriptionTooltip",{defaultMessage:"View the requests that collected the data"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.requests)},component:_requests_view.RequestsViewComponent}};exports.getRequestsViewDescription=getRequestsViewDescription},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestsViewComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);var _adapters=__webpack_require__(399);var _request_selector=__webpack_require__(1332);var _request_details=__webpack_require__(1333);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestsViewComponent=function(_Component){_inherits(RequestsViewComponent,_Component);function RequestsViewComponent(props){var _this;_classCallCheck(this,RequestsViewComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestsViewComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"_onRequestsChange",function(){var requests=_this.props.adapters.requests.getRequests();var newState={requests:requests};if(!requests.includes(_this.state.request)){newState.request=requests.length?requests[0]:null}_this.setState(newState)});_defineProperty(_assertThisInitialized(_this),"selectRequest",function(request){if(request!==_this.state.request){_this.setState({request:request})}});props.adapters.requests.on("change",_this._onRequestsChange);var _requests=props.adapters.requests.getRequests();_this.state={requests:_requests,request:_requests.length?_requests[0]:null};return _this}_createClass(RequestsViewComponent,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.adapters.requests.removeListener("change",this._onRequestsChange)}},{key:"render",value:function render(){if(!this.state.requests||!this.state.requests.length){return RequestsViewComponent.renderEmptyRequests()}var failedCount=this.state.requests.filter(function(req){return req.status===_adapters.RequestStatus.ERROR}).length;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("p",{role:"status","aria-live":"polite","aria-atomic":"true"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestWasMadeDescription",defaultMessage:"{requestsCount, plural, one {# request was} other {# requests were} } made{failedRequests}",values:{requestsCount:this.state.requests.length,failedRequests:failedCount>0?_react.default.createElement(_eui.EuiTextColor,{color:"danger"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestWasMadeDescription.requestHadFailureText",defaultMessage:", {failedCount} had a failure",values:{failedCount:failedCount}})):""}}))),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_request_selector.RequestSelector,{requests:this.state.requests,selectedRequest:this.state.request,onRequestChanged:this.selectRequest}),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),this.state.request&&this.state.request.description&&_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("p",null,this.state.request.description)),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),this.state.request&&_react.default.createElement(_request_details.RequestDetails,{request:this.state.request}))}}],[{key:"renderEmptyRequests",value:function renderEmptyRequests(){return _react.default.createElement(_eui.EuiEmptyPrompt,{"data-test-subj":"inspectorNoRequestsMessage",title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedTitle",defaultMessage:"No requests logged"})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedDescription.elementHasNotLoggedAnyRequestsText",defaultMessage:"The element hasn't logged any requests (yet)."})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedDescription.whatDoesItUsuallyMeanText",defaultMessage:"This usually means that there was no need to fetch any data or that the element has not yet started fetching data."})))})}}]);return RequestsViewComponent}(_react.Component);exports.RequestsViewComponent=RequestsViewComponent;_defineProperty(RequestsViewComponent,"propTypes",{adapters:_propTypes.default.object.isRequired,title:_propTypes.default.string.isRequired})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestSelector=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(5);var _propTypes=_interopRequireDefault(__webpack_require__(10));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(3);var _adapters=__webpack_require__(399);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestSelector=function(_Component){_inherits(RequestSelector,_Component);function RequestSelector(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestSelector);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestSelector)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_defineProperty(_assertThisInitialized(_this),"renderRequestDropdownItem",function(request,index){var hasFailed=request.status===_adapters.RequestStatus.ERROR;var inProgress=request.status===_adapters.RequestStatus.PENDING;return _react.default.createElement(_eui.EuiContextMenuItem,{key:index,icon:request===_this.props.selectedRequest?"check":"empty",onClick:function onClick(){_this.props.onRequestChanged(request);_this.closePopover()},toolTipContent:request.description,toolTipPosition:"left","data-test-subj":"inspectorRequestChooser".concat(request.name)},_react.default.createElement(_eui.EuiTextColor,{color:hasFailed?"danger":"default"},request.name,hasFailed&&_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.failedLabel",defaultMessage:" (failed)"}),inProgress&&_react.default.createElement(_eui.EuiLoadingSpinner,{size:"s","aria-label":_i18n.i18n.translate("inspector.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"}),className:"insRequestSelector__menuSpinner"})))});return _this}_createClass(RequestSelector,[{key:"renderRequestDropdown",value:function renderRequestDropdown(){var button=_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.togglePopover,"data-test-subj":"inspectorRequestChooser"},this.props.selectedRequest.name);return _react.default.createElement(_eui.EuiPopover,{id:"inspectorRequestChooser",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft",repositionOnScroll:true},_react.default.createElement(_eui.EuiContextMenuPanel,{items:this.props.requests.map(this.renderRequestDropdownItem),"data-test-subj":"inspectorRequestChooserMenuPanel"}))}},{key:"render",value:function render(){var _this$props=this.props,selectedRequest=_this$props.selectedRequest,requests=_this$props.requests;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestLabel",defaultMessage:"Request:"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:true},requests.length<=1&&_react.default.createElement("div",{className:"insRequestSelector__singleRequest","data-test-subj":"inspectorRequestName"},selectedRequest.name),requests.length>1&&this.renderRequestDropdown()),_react.default.createElement(_eui.EuiFlexItem,{grow:false},selectedRequest.status!==_adapters.RequestStatus.PENDING&&_react.default.createElement(_eui.EuiToolTip,{position:"left",title:selectedRequest.status===_adapters.RequestStatus.OK?_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestSucceededTooltipTitle",defaultMessage:"Request succeeded"}):_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestFailedTooltipTitle",defaultMessage:"Request failed"}),content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestTooltipDescription",defaultMessage:"The total time the request took."})},_react.default.createElement(_eui.EuiBadge,{color:selectedRequest.status===_adapters.RequestStatus.OK?"secondary":"danger",iconType:selectedRequest.status===_adapters.RequestStatus.OK?"check":"cross"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestTimeLabel",defaultMessage:"{requestTime}ms",values:{requestTime:selectedRequest.time}}))),selectedRequest.status===_adapters.RequestStatus.PENDING&&_react.default.createElement(_eui.EuiLoadingSpinner,{size:"m","aria-label":_i18n.i18n.translate("inspector.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"})})))}}]);return RequestSelector}(_react.Component);exports.RequestSelector=RequestSelector;_defineProperty(RequestSelector,"propTypes",{requests:_propTypes.default.array.isRequired,selectedRequest:_propTypes.default.object.isRequired,onRequestChanged:_propTypes.default.func})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetails=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(3);var _details=__webpack_require__(1334);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DETAILS=[{name:"Statistics",label:_i18n.i18n.translate("inspector.requests.statisticsTabLabel",{defaultMessage:"Statistics"}),component:_details.RequestDetailsStats},{name:"Request",label:_i18n.i18n.translate("inspector.requests.requestTabLabel",{defaultMessage:"Request"}),component:_details.RequestDetailsRequest},{name:"Response",label:_i18n.i18n.translate("inspector.requests.responseTabLabel",{defaultMessage:"Response"}),component:_details.RequestDetailsResponse}];var RequestDetails=function(_Component){_inherits(RequestDetails,_Component);function RequestDetails(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestDetails);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestDetails)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{availableDetails:[],selectedDetail:null});_defineProperty(_assertThisInitialized(_this),"selectDetailsTab",function(detail){if(detail!==_this.state.selectedDetail){_this.setState({selectedDetail:detail})}});_defineProperty(_assertThisInitialized(_this),"renderDetailTab",function(detail){return _react.default.createElement(_eui.EuiTab,{key:detail.name,isSelected:detail===_this.state.selectedDetail,onClick:function onClick(){return _this.selectDetailsTab(detail)},"data-test-subj":"inspectorRequestDetail".concat(detail.name)},detail.label)});return _this}_createClass(RequestDetails,[{key:"render",value:function render(){var _this$state=this.state,selectedDetail=_this$state.selectedDetail,availableDetails=_this$state.availableDetails;var DetailComponent=RequestDetails.getSelectedDetailComponent(selectedDetail);if(!availableDetails.length||!DetailComponent){return null}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTabs,{size:"s"},this.state.availableDetails.map(this.renderDetailTab)),_react.default.createElement(DetailComponent,{request:this.props.request}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var selectedDetail=prevState&&prevState.selectedDetail;var availableDetails=DETAILS.filter(function(detail){return!detail.component.shouldShow||detail.component.shouldShow(nextProps.request)});if(selectedDetail&&availableDetails.includes(selectedDetail)){return{availableDetails:availableDetails}}return{availableDetails:availableDetails,selectedDetail:availableDetails[0]}}},{key:"getSelectedDetailComponent",value:function getSelectedDetailComponent(detail){return detail?detail.component:null}}]);return RequestDetails}(_react.Component);exports.RequestDetails=RequestDetails;_defineProperty(RequestDetails,"propTypes",{request:_propTypes.default.object.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RequestDetailsRequest",{enumerable:true,get:function get(){return _req_details_request.RequestDetailsRequest}});Object.defineProperty(exports,"RequestDetailsResponse",{enumerable:true,get:function get(){return _req_details_response.RequestDetailsResponse}});Object.defineProperty(exports,"RequestDetailsStats",{enumerable:true,get:function get(){return _req_details_stats.RequestDetailsStats}});var _req_details_request=__webpack_require__(1335);var _req_details_response=__webpack_require__(1336);var _req_details_stats=__webpack_require__(1337)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsRequest=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsRequest=function(_Component){_inherits(RequestDetailsRequest,_Component);function RequestDetailsRequest(){_classCallCheck(this,RequestDetailsRequest);return _possibleConstructorReturn(this,_getPrototypeOf(RequestDetailsRequest).apply(this,arguments))}_createClass(RequestDetailsRequest,[{key:"render",value:function render(){var json=this.props.request.json;if(!json){return null}return _react.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",isCopyable:true,"data-test-subj":"inspectorRequestBody"},JSON.stringify(json,null,2))}}]);return RequestDetailsRequest}(_react.Component);exports.RequestDetailsRequest=RequestDetailsRequest;_defineProperty(RequestDetailsRequest,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsRequest,"shouldShow",function(request){return Boolean(request&&request.json)})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsResponse=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsResponse=function(_Component){_inherits(RequestDetailsResponse,_Component);function RequestDetailsResponse(){_classCallCheck(this,RequestDetailsResponse);return _possibleConstructorReturn(this,_getPrototypeOf(RequestDetailsResponse).apply(this,arguments))}_createClass(RequestDetailsResponse,[{key:"render",value:function render(){var responseJSON=RequestDetailsResponse.getResponseJson(this.props.request);if(!responseJSON){return null}return _react.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",isCopyable:true,"data-test-subj":"inspectorResponseBody"},JSON.stringify(responseJSON,null,2))}}]);return RequestDetailsResponse}(_react.Component);exports.RequestDetailsResponse=RequestDetailsResponse;_defineProperty(RequestDetailsResponse,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsResponse,"shouldShow",function(request){return Boolean(RequestDetailsResponse.getResponseJson(request))});_defineProperty(RequestDetailsResponse,"getResponseJson",function(request){return request.response?request.response.json:null})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsStats=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsStats=function(_Component){_inherits(RequestDetailsStats,_Component);function RequestDetailsStats(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestDetailsStats);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestDetailsStats)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderStatRow",function(stat){return[_react.default.createElement(_eui.EuiTableRow,{key:stat.id},_react.default.createElement(_eui.EuiTableRowCell,null,_react.default.createElement("span",{className:"insRequestDetailsStats__icon"},stat.description?_react.default.createElement(_eui.EuiIconTip,{"aria-label":_i18n.i18n.translate("inspector.requests.descriptionRowIconAriaLabel",{defaultMessage:"Description"}),type:"questionInCircle",color:"subdued",content:stat.description}):_react.default.createElement(_eui.EuiIcon,{type:"empty"})),stat.label),_react.default.createElement(_eui.EuiTableRowCell,null,stat.value))]});return _this}_createClass(RequestDetailsStats,[{key:"render",value:function render(){var stats=this.props.request.stats;if(!stats){return null}var sortedStats=Object.keys(stats).sort().map(function(id){return _objectSpread({id:id},stats[id])});return _react.default.createElement(_eui.EuiTable,{responsive:false},_react.default.createElement(_eui.EuiTableBody,null,sortedStats.map(this.renderStatRow)))}}]);return RequestDetailsStats}(_react.Component);exports.RequestDetailsStats=RequestDetailsStats;_defineProperty(RequestDetailsStats,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsStats,"shouldShow",function(request){return Boolean(request.stats&&Object.keys(request.stats).length)})},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"InspectorViewDescription",{enumerable:true,get:function get(){return _types.InspectorViewDescription}});exports.viewRegistry=void 0;var _new_platform=__webpack_require__(8);var _types=__webpack_require__(642);var viewRegistry=_new_platform.npSetup.plugins.inspector.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.views;exports.viewRegistry=viewRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PipelineDataLoader=void 0;var _pipeline_helpers=__webpack_require__(1341);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var PipelineDataLoader=function(){function PipelineDataLoader(vis){_classCallCheck(this,PipelineDataLoader);this.vis=vis}_createClass(PipelineDataLoader,[{key:"fetch",value:function(){var _fetch=_asyncToGenerator(regeneratorRuntime.mark(function _callee(params){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_pipeline_helpers.buildPipeline)(this.vis,params);case 2:this.vis.pipelineExpression=_context.sent;return _context.abrupt("return",(0,_pipeline_helpers.runPipeline)(this.vis.pipelineExpression,{},{getInitialContext:function getInitialContext(){return{type:"kibana_context",query:params.query,timeRange:params.timeRange,filters:params.filters?params.filters.filter(function(filter){return!filter.meta.disabled}):undefined}},inspectorAdapters:params.inspectorAdapters,abortSignal:params.abortSignal}));case 4:case"end":return _context.stop()}}},_callee,this)}));function fetch(_x){return _fetch.apply(this,arguments)}return fetch}()}]);return PipelineDataLoader}();exports.PipelineDataLoader=PipelineDataLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"buildPipeline",{enumerable:true,get:function get(){return _build_pipeline.buildPipeline}});Object.defineProperty(exports,"runPipeline",{enumerable:true,get:function get(){return _run_pipeline.runPipeline}});var _build_pipeline=__webpack_require__(430);var _run_pipeline=__webpack_require__(1342)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.runPipeline=void 0;var _common=__webpack_require__(370);var _interpreter=__webpack_require__(601);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var runPipeline=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(expression,context,handlers){var ast,_ref2,interpreter,pipelineResponse;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ast=(0,_common.fromExpression)(expression);_context.next=3;return(0,_interpreter.getInterpreter)();case 3:_ref2=_context.sent;interpreter=_ref2.interpreter;_context.next=7;return interpreter.interpretAst(ast,context,handlers);case 7:pipelineResponse=_context.sent;return _context.abrupt("return",pipelineResponse);case 9:case"end":return _context.stop()}}},_callee)}));return function runPipeline(_x,_x2,_x3){return _ref.apply(this,arguments)}}();exports.runPipeline=runPipeline},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeDataLoader=void 0;var _lodash=__webpack_require__(1);var _build_pipeline=__webpack_require__(430);var _vis_request_handlers=__webpack_require__(354);var _vis_response_handlers=__webpack_require__(353);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getHandler(from,type){if(typeof type==="function"){return type}var handlerDesc=from.find(function(handler){return handler.name===type});if(!handlerDesc){throw new Error('Could not find handler "'.concat(type,'".'))}return handlerDesc.handler}var VisualizeDataLoader=function(){function VisualizeDataLoader(vis,Private){_classCallCheck(this,VisualizeDataLoader);this.vis=vis;_defineProperty(this,"requestHandler",void 0);_defineProperty(this,"responseHandler",void 0);_defineProperty(this,"visData",void 0);_defineProperty(this,"previousVisState",void 0);_defineProperty(this,"previousRequestHandlerResponse",void 0);var _vis$type=vis.type,requestHandler=_vis$type.requestHandler,responseHandler=_vis$type.responseHandler;var requestHandlers=Private(_vis_request_handlers.VisRequestHandlersRegistryProvider);var responseHandlers=Private(_vis_response_handlers.VisResponseHandlersRegistryProvider);this.requestHandler=getHandler(requestHandlers,requestHandler);this.responseHandler=getHandler(responseHandlers,responseHandler)}_createClass(VisualizeDataLoader,[{key:"fetch",value:function(){var _fetch=_asyncToGenerator(regeneratorRuntime.mark(function _callee(params){var visParams,filters,savedFilters,query,requestHandlerResponse,canSkipResponseHandler;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_build_pipeline.getVisParams)(this.vis,{searchSource:params.searchSource,timeRange:params.timeRange,abortSignal:params.abortSignal});case 2:visParams=_context.sent;filters=params.filters||[];savedFilters=params.searchSource.getField("filter")||[];query=params.query||params.searchSource.getField("query");_context.next=8;return this.requestHandler(_objectSpread({partialRows:this.vis.params.partialRows||this.vis.type.requiresPartialRows,metricsAtAllLevels:this.vis.isHierarchical(),visParams:visParams},params,{query:query,filters:filters.concat(savedFilters).filter(function(f){return!f.meta.disabled}),abortSignal:params.abortSignal}));case 8:requestHandlerResponse=_context.sent;canSkipResponseHandler=this.previousRequestHandlerResponse&&this.previousRequestHandlerResponse===requestHandlerResponse&&this.previousVisState&&(0,_lodash.isEqual)(this.previousVisState,this.vis.getState());this.previousVisState=this.vis.getState();this.previousRequestHandlerResponse=requestHandlerResponse;if(canSkipResponseHandler){_context.next=16;break}_context.next=15;return Promise.resolve(this.responseHandler(requestHandlerResponse,visParams.dimensions));case 15:this.visData=_context.sent;case 16:return _context.abrupt("return",{as:"visualization",value:{visType:this.vis.type.name,visData:this.visData,visConfig:visParams,params:{}}});case 17:case"end":return _context.stop()}}},_callee,this)}));function fetch(_x){return _fetch.apply(this,arguments)}return fetch}()}]);return VisualizeDataLoader}();exports.VisualizeDataLoader=VisualizeDataLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"queryGeohashBounds",{enumerable:true,get:function get(){return _query_geohash_bounds.queryGeohashBounds}});var _query_geohash_bounds=__webpack_require__(1345)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.queryGeohashBounds=queryGeohashBounds;var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(1);var _notify=__webpack_require__(9);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function queryGeohashBounds(_x,_x2){return _queryGeohashBounds.apply(this,arguments)}function _queryGeohashBounds(){_queryGeohashBounds=_asyncToGenerator(regeneratorRuntime.mark(function _callee(vis,params){var agg,searchSource,filters,query,esResp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:agg=vis.getAggConfig().find(function(a){return(0,_lodash.get)(a,"type.dslName")==="geohash_grid"});if(!agg){_context.next=19;break}searchSource=vis.searchSource.createChild();searchSource.setField("size",0);searchSource.setField("aggs",function(){var geoBoundsAgg=vis.getAggConfig().createAggConfig({type:"geo_bounds",enabled:true,params:{field:agg.getField()},schema:"metric"},{addToAggConfigs:false});return{1:geoBoundsAgg.toDsl()}});filters=params.filters,query=params.query;if(filters){searchSource.setField("filter",function(){var activeFilters=_toConsumableArray(filters);var indexPattern=agg.getIndexPattern();var useTimeFilter=!!indexPattern.timeFieldName;if(useTimeFilter){activeFilters.push(vis.API.timeFilter.createFilter(indexPattern))}return activeFilters})}if(query){searchSource.setField("query",query)}_context.prev=8;_context.next=11;return searchSource.fetch();case 11:esResp=_context.sent;return _context.abrupt("return",(0,_lodash.get)(esResp,"aggregations.1.bounds"));case 15:_context.prev=15;_context.t0=_context["catch"](8);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("common.ui.visualize.queryGeohashBounds.unableToGetBoundErrorTitle",{defaultMessage:"Unable to get bounds"}),text:"".concat(_context.t0.message)});return _context.abrupt("return");case 19:case"end":return _context.stop()}}},_callee,null,[[8,15]])}));return _queryGeohashBounds.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Visualization=Visualization;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _vis=__webpack_require__(1347);var _vis2=__webpack_require__(1376);var _vis3=__webpack_require__(1380);var _vis4=__webpack_require__(1382);var _vis5=__webpack_require__(1384);var _vis6=__webpack_require__(1388);var _error=__webpack_require__(652);var _no_data=__webpack_require__(1389);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var types={timeseries:_vis.TimeseriesVisualization,metric:_vis2.metric,top_n:_vis3.TopNVisualization,table:_vis4.TableVis,gauge:_vis5.gauge,markdown:_vis6.MarkdownVisualization};function Visualization(props){var visData=props.visData,model=props.model;var error=_lodash.default.get(visData,"".concat(model.id,".error"));if(error){return _react.default.createElement("div",{className:props.className},_react.default.createElement(_error.ErrorComponent,{error:error}))}var path=visData.type==="table"?"series":"".concat(model.id,".series");var noData=_lodash.default.get(visData,path,[]).length===0;if(noData){return _react.default.createElement("div",{className:props.className},_react.default.createElement(_no_data.NoDataComponent,null))}var component=types[model.type];if(component){return _react.default.createElement(component,{dateFormat:props.dateFormat,backgroundColor:props.backgroundColor,model:props.model,onBrush:props.onBrush,onChange:props.onChange,onUiState:props.onUiState,uiState:props.uiState,visData:visData.type===model.type?visData:{},getConfig:props.getConfig})}return _react.default.createElement("div",{className:props.className})}Visualization.propTypes={backgroundColor:_propTypes.default.string,className:_propTypes.default.string,model:_propTypes.default.object,onBrush:_propTypes.default.func,onChange:_propTypes.default.func,onUiState:_propTypes.default.func,uiState:_propTypes.default.object,visData:_propTypes.default.object,dateFormat:_propTypes.default.string,getConfig:_propTypes.default.func};Visualization.defaultProps={className:"tvbVis"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeseriesVisualization=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _notify=__webpack_require__(9);var _tick_formatter=__webpack_require__(85);var _lodash=_interopRequireDefault(__webpack_require__(1));var _timeseries=__webpack_require__(1348);var _public=__webpack_require__(104);var _replace_vars=__webpack_require__(364);var _get_axis_label_string=__webpack_require__(1374);var _get_interval=__webpack_require__(363);var _create_xaxis_formatter=__webpack_require__(1375);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function hasSeparateAxis(row){return row.separate_axis}var TimeseriesVisualization=function(_Component){_inherits(TimeseriesVisualization,_Component);function TimeseriesVisualization(){var _getPrototypeOf2;var _this;_classCallCheck(this,TimeseriesVisualization);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TimeseriesVisualization)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getInterval",function(){var _this$props=_this.props,visData=_this$props.visData,model=_this$props.model;return(0,_get_interval.getInterval)(visData,model)});_defineProperty(_assertThisInitialized(_this),"xaxisFormatter",function(val){var _this$props$visData=_this.props.visData,scaledDataFormat=_this$props$visData.scaledDataFormat,dateFormat=_this$props$visData.dateFormat;if(!scaledDataFormat||!dateFormat)return val;var formatter=(0,_create_xaxis_formatter.createXaxisFormatter)(_this.getInterval(),scaledDataFormat,dateFormat);return formatter(val)});return _this}_createClass(TimeseriesVisualization,[{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.showToastNotification&&this.notificationReason!==this.showToastNotification.reason){if(this.notification){_notify.toastNotifications.remove(this.notification)}this.notificationReason=this.showToastNotification.reason;this.notification=_notify.toastNotifications.addDanger({title:this.showToastNotification.title,text:_react.default.createElement(_public.MarkdownSimple,null,this.showToastNotification.reason)})}if(!this.showToastNotification&&this.notification){_notify.toastNotifications.remove(this.notification);this.notificationReason=null;this.notification=null}}},{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,backgroundColor=_this$props2.backgroundColor,model=_this$props2.model,visData=_this$props2.visData;var series=_lodash.default.get(visData,"".concat(model.id,".series"),[]);var annotations;this.showToastNotification=null;if(model.annotations&&Array.isArray(model.annotations)){annotations=model.annotations.map(function(annotation){var data=_lodash.default.get(visData,"".concat(model.id,".annotations.").concat(annotation.id),[]).map(function(item){return[item.key,item.docs]});return{id:annotation.id,color:annotation.color,icon:annotation.icon,series:data.map(function(s){return[s[0],s[1].map(function(doc){var vars=(0,_replace_vars.replaceVars)(annotation.template,null,doc);if(vars instanceof Error){_this2.showToastNotification=vars.error.caused_by;return annotation.template}return vars})]})}})}var seriesModel=model.series.map(function(s){return _lodash.default.cloneDeep(s)});var firstSeries=seriesModel.find(function(s){return s.formatter&&!s.separate_axis});var formatter=(0,_tick_formatter.tickFormatter)(_lodash.default.get(firstSeries,"formatter"),_lodash.default.get(firstSeries,"value_template"),this.props.getConfig);var mainAxis={position:model.axis_position,tickFormatter:formatter,axisFormatter:_lodash.default.get(firstSeries,"formatter","number"),axisFormatterTemplate:_lodash.default.get(firstSeries,"value_template")};if(model.axis_min)mainAxis.min=model.axis_min;if(model.axis_max)mainAxis.max=model.axis_max;if(model.axis_scale==="log"){mainAxis.mode="log";mainAxis.transform=function(value){return value>0?Math.log(value)/Math.LN10:null};mainAxis.inverseTransform=function(value){return Math.pow(10,value)}}var yaxes=[mainAxis];seriesModel.forEach(function(s){series.filter(function(r){return _lodash.default.startsWith(r.id,s.id)}).forEach(function(r){return r.tickFormatter=(0,_tick_formatter.tickFormatter)(s.formatter,s.value_template,_this2.props.getConfig)});if(s.hide_in_legend){series.filter(function(r){return _lodash.default.startsWith(r.id,s.id)}).forEach(function(r){return delete r.label})}if(s.stacked!=="none"){series.filter(function(r){return _lodash.default.startsWith(r.id,s.id)}).forEach(function(row){row.data=row.data.map(function(point){if(!point[1])return[point[0],0];return point})})}if(s.stacked==="percent"){s.separate_axis=true;s.axisFormatter="percent";s.axis_min=0;s.axis_max=1;s.axis_position=model.axis_position;var seriesData=series.filter(function(r){return _lodash.default.startsWith(r.id,s.id)});var first=seriesData[0];if(first){first.data.forEach(function(row,index){var rowSum=seriesData.reduce(function(acc,item){return item.data[index][1]+acc},0);seriesData.forEach(function(item){item.data[index][1]=rowSum&&item.data[index][1]/rowSum||0})})}}});var interval=this.getInterval();var axisCount=1;if(seriesModel.some(hasSeparateAxis)){seriesModel.forEach(function(row){if(row.separate_axis){axisCount++;var _formatter=(0,_tick_formatter.tickFormatter)(row.formatter,row.value_template,_this2.props.getConfig);var yaxis={alignTicksWithAxis:1,position:row.axis_position,tickFormatter:_formatter,axisFormatter:row.axis_formatter,axisFormatterTemplate:row.value_template};if(row.axis_min!=null)yaxis.min=row.axis_min;if(row.axis_max!=null)yaxis.max=row.axis_max;yaxes.push(yaxis);series.filter(function(r){return _lodash.default.startsWith(r.id,row.id)}).forEach(function(r){r.yaxis=axisCount})}})}var panelBackgroundColor=model.background_color||backgroundColor;var style={backgroundColor:panelBackgroundColor};var params={dateFormat:this.props.dateFormat,crosshair:true,tickFormatter:formatter,legendPosition:model.legend_position||"right",backgroundColor:panelBackgroundColor,series:series,annotations:annotations,yaxes:yaxes,showGrid:Boolean(model.show_grid),legend:Boolean(model.show_legend),xAxisFormatter:this.xaxisFormatter,onBrush:function onBrush(ranges){if(_this2.props.onBrush)_this2.props.onBrush(ranges)}};if(interval){params.xaxisLabel=(0,_get_axis_label_string.getAxisLabelString)(interval)}return _react.default.createElement("div",{className:"tvbVis",style:style},_react.default.createElement(_timeseries.Timeseries,params))}}]);return TimeseriesVisualization}(_react.Component);exports.TimeseriesVisualization=TimeseriesVisualization;TimeseriesVisualization.propTypes={backgroundColor:_propTypes.default.string,className:_propTypes.default.string,model:_propTypes.default.object,onBrush:_propTypes.default.func,onChange:_propTypes.default.func,visData:_propTypes.default.object,dateFormat:_propTypes.default.string,getConfig:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Timeseries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(26));var _lodash=_interopRequireDefault(__webpack_require__(1));var _get_last_value=__webpack_require__(72);var _set_is_reversed=__webpack_require__(103);var _timeseries_chart=__webpack_require__(1349);var _legend=__webpack_require__(1367);var _events=__webpack_require__(646);var _reactcss=_interopRequireDefault(__webpack_require__(63));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Timeseries=function(_Component){_inherits(Timeseries,_Component);function Timeseries(props){var _this;_classCallCheck(this,Timeseries);_this=_possibleConstructorReturn(this,_getPrototypeOf(Timeseries).call(this,props));var values=_this.getLastValues(props);_this.state={showLegend:props.legend!=null?props.legend:true,values:values||{},show:_lodash.default.keys(values)||[],ignoreLegendUpdates:false,ignoreVisibilityUpdates:false};_this.toggleFilter=_this.toggleFilter.bind(_assertThisInitialized(_this));_this.handleHideClick=_this.handleHideClick.bind(_assertThisInitialized(_this));_this.plothover=_this.plothover.bind(_assertThisInitialized(_this));return _this}_createClass(Timeseries,[{key:"filterLegend",value:function filterLegend(id){if(!_lodash.default.has(this.state.values,id))return[];var notAllShown=_lodash.default.keys(this.state.values).length!==this.state.show.length;var isCurrentlyShown=_lodash.default.includes(this.state.show,id);var show=[];if(notAllShown&&isCurrentlyShown){this.setState({ignoreVisibilityUpdates:false,show:Object.keys(this.state.values)})}else{show.push(id);this.setState({ignoreVisibilityUpdates:true,show:[id]})}return show}},{key:"toggleFilter",value:function toggleFilter(event,id){var show=this.filterLegend(id);if(_lodash.default.isFunction(this.props.onFilter)){this.props.onFilter(show)}_events.eventBus.trigger("toggleFilter",id,this)}},{key:"getLastValues",value:function getLastValues(props){var values={};props.series.forEach(function(row){if(!row.id)row.id=row.label;values[row.id]=(0,_get_last_value.getLastValue)(row.data)});return values}},{key:"updateLegend",value:function updateLegend(pos,item){var values={};if(pos){this.props.series.forEach(function(row){if(row.data&&Array.isArray(row.data)){if(item&&row.data[item.dataIndex]&&row.data[item.dataIndex][0]===item.datapoint[0]){values[row.id]=row.data[item.dataIndex][1]}else{var closest;for(var i=0;i<row.data.length;i++){closest=i;if(row.data[i]&&pos.x<row.data[i][0])break}if(!row.data[closest])return values[row.id]=null;var _row$data$closest=_slicedToArray(row.data[closest],2),value=_row$data$closest[1];values[row.id]=value!=null&&value||null}}})}else{_lodash.default.assign(values,this.getLastValues(this.props))}this.setState({values:values})}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(props){if(props.legend!==this.props.legend)this.setState({showLegend:props.legend});if(!this.state.ignoreLegendUpdates){var values=this.getLastValues(props);var currentKeys=_lodash.default.keys(this.state.values);var keys=_lodash.default.keys(values);var diff=_lodash.default.difference(keys,currentKeys);var nextState={values:values};if(diff.length&&!this.state.ignoreVisibilityUpdates){nextState.show=keys}this.setState(nextState)}}},{key:"plothover",value:function plothover(event,pos,item){this.updateLegend(pos,item)}},{key:"handleHideClick",value:function handleHideClick(){this.setState({showLegend:!this.state.showLegend})}},{key:"render",value:function render(){var classes=(0,_classnames.default)("tvbVisTimeSeries",{"tvbVisTimeSeries--reversed":(0,_set_is_reversed.isBackgroundInverted)(this.props.backgroundColor)});var styles=(0,_reactcss.default)({bottomLegend:{content:{flexDirection:"column"}}},{bottomLegend:this.props.legendPosition==="bottom"});return _react.default.createElement("div",{className:classes,"data-test-subj":"timeseriesChart"},_react.default.createElement("div",{style:styles.content,className:"tvbVisTimeSeries__content"},_react.default.createElement("div",{className:"tvbVisTimeSeries__visualization"},_react.default.createElement(_timeseries_chart.TimeseriesChart,{dateFormat:this.props.dateFormat,crosshair:this.props.crosshair,onBrush:this.props.onBrush,plothover:this.plothover,backgroundColor:this.props.backgroundColor,series:this.props.series,annotations:this.props.annotations,show:this.state.show,showGrid:this.props.showGrid,tickFormatter:this.props.tickFormatter,options:this.props.options,xaxisLabel:this.props.xaxisLabel,yaxes:this.props.yaxes,xAxisFormatter:this.props.xAxisFormatter})),_react.default.createElement(_legend.Legend,{legendPosition:this.props.legendPosition,onClick:this.handleHideClick,onToggle:this.toggleFilter,series:this.props.series,showLegend:this.state.showLegend,seriesValues:this.state.values,seriesFilter:this.state.show,tickFormatter:this.props.tickFormatter})))}}]);return Timeseries}(_react.Component);exports.Timeseries=Timeseries;Timeseries.defaultProps={legend:true,showGrid:true};Timeseries.propTypes={legend:_propTypes.default.bool,legendPosition:_propTypes.default.string,onFilter:_propTypes.default.func,series:_propTypes.default.array,annotations:_propTypes.default.array,backgroundColor:_propTypes.default.string,options:_propTypes.default.object,tickFormatter:_propTypes.default.func,showGrid:_propTypes.default.bool,xaxisLabel:_propTypes.default.string,dateFormat:_propTypes.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scaleUp=scaleUp;exports.scaleDown=scaleDown;exports.TimeseriesChart=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(26));var _set_is_reversed=__webpack_require__(103);var _moment=_interopRequireDefault(__webpack_require__(14));var _reactcss=_interopRequireDefault(__webpack_require__(63));var _flot_chart=__webpack_require__(1350);var _annotation=__webpack_require__(1366);var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function scaleUp(value){return window.devicePixelRatio*value}function scaleDown(value){return value/window.devicePixelRatio}var TimeseriesChart=function(_Component){_inherits(TimeseriesChart,_Component);function TimeseriesChart(props){var _this;_classCallCheck(this,TimeseriesChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(TimeseriesChart).call(this,props));_this.state={annotations:[],showTooltip:false,mouseHoverTimer:false};_this.handleMouseLeave=_this.handleMouseLeave.bind(_assertThisInitialized(_this));_this.handleMouseOver=_this.handleMouseOver.bind(_assertThisInitialized(_this));_this.renderAnnotations=_this.renderAnnotations.bind(_assertThisInitialized(_this));_this.handleDraw=_this.handleDraw.bind(_assertThisInitialized(_this));return _this}_createClass(TimeseriesChart,[{key:"calculateLeftRight",value:function calculateLeftRight(item,plot){var canvas=plot.getCanvas();var point=plot.pointOffset({x:item.datapoint[0],y:item.datapoint[1]});var edge=(scaleUp(point.left)+10)/canvas.width;var right;var left;if(edge>.5){right=scaleDown(canvas.width)-point.left;left=null}else{right=null;left=point.left}return[left,right]}},{key:"handleDraw",value:function handleDraw(plot){if(!plot||!this.props.annotations)return;var annotations=this.props.annotations.reduce(function(acc,anno){return acc.concat(anno.series.map(function(series){return{series:series,plot:plot,key:"".concat(anno.id,"-").concat(series[0]),icon:anno.icon,color:anno.color}}))},[]);this.setState({annotations:annotations})}},{key:"handleMouseOver",value:function handleMouseOver(e,pos,item,plot){if(typeof this.state.mouseHoverTimer==="number"){window.clearTimeout(this.state.mouseHoverTimer)}if(item){var plotOffset=plot.getPlotOffset();var point=plot.pointOffset({x:item.datapoint[0],y:item.datapoint[1]});var _this$calculateLeftRi=this.calculateLeftRight(item,plot),_this$calculateLeftRi2=_slicedToArray(_this$calculateLeftRi,2),left=_this$calculateLeftRi2[0],right=_this$calculateLeftRi2[1];var top=point.top;this.setState({showTooltip:true,item:item,left:left,right:right,top:top+10,bottom:plotOffset.bottom})}}},{key:"handleMouseLeave",value:function handleMouseLeave(){var _this2=this;this.state.mouseHoverTimer=window.setTimeout(function(){_this2.setState({showTooltip:false})},250)}},{key:"renderAnnotations",value:function renderAnnotations(annotation){return _react.default.createElement(_annotation.Annotation,{series:annotation.series,plot:annotation.plot,key:annotation.key,icon:annotation.icon,color:annotation.color})}},{key:"render",value:function render(){var _this3=this;var _this$state=this.state,item=_this$state.item,right=_this$state.right,top=_this$state.top,left=_this$state.left;var series=this.props.series;var tooltip;var styles=(0,_reactcss.default)({showTooltip:{tooltipContainer:{top:top-8,left:left,right:right}},hideTooltip:{tooltipContainer:{display:"none"}}},{showTooltip:this.state.showTooltip,hideTooltip:!this.state.showTooltip});if(item){var metric=series.find(function(r){return r.id===item.series.id});var formatter=metric&&metric.tickFormatter||this.props.tickFormatter||function(v){return v};var value=item.datapoint[2]?item.datapoint[1]-item.datapoint[2]:item.datapoint[1];tooltip=_react.default.createElement("div",{className:"tvbTooltip__container tvbTooltip__container--".concat(right?"right":"left"),style:styles.tooltipContainer},_react.default.createElement("span",{className:"tvbTooltip__caret"}),_react.default.createElement("div",{className:"tvbTooltip"},_react.default.createElement("div",{className:"tvbTooltip__timestamp"},(0,_moment.default)(item.datapoint[0]).format(this.props.dateFormat)),_react.default.createElement("div",{className:"tvbTooltip__item"},_react.default.createElement(_eui.EuiIcon,{className:"tvbTooltip__icon",type:"dot",color:item.series.color}),_react.default.createElement("div",{className:"tvbTooltip__labelContainer"},_react.default.createElement("div",{className:"tvbTooltip__label"},item.series.label),_react.default.createElement("div",{className:"tvbTooltip__value"},formatter(value))))))}var params={crosshair:this.props.crosshair,onPlotCreate:this.handlePlotCreate,onBrush:this.props.onBrush,onMouseLeave:this.handleMouseLeave,onMouseOver:this.handleMouseOver,onDraw:this.handleDraw,options:this.props.options,plothover:this.props.plothover,reversed:(0,_set_is_reversed.isBackgroundDark)(this.props.backgroundColor),series:this.props.series,annotations:this.props.annotations,showGrid:this.props.showGrid,show:this.props.show,tickFormatter:this.props.tickFormatter,yaxes:this.props.yaxes,xAxisFormatter:this.props.xAxisFormatter};var annotations=this.state.annotations.map(this.renderAnnotations);var axisLabelClass=(0,_classnames.default)("tvbVisTimeSeries__axisLabel",{"tvbVisTimeSeries__axisLabel--reversed":(0,_set_is_reversed.isBackgroundInverted)(this.props.backgroundColor)});return _react.default.createElement("div",{ref:function ref(el){return _this3.container=el},className:"tvbVisTimeSeries__container"},tooltip,annotations,_react.default.createElement(_flot_chart.FlotChart,params),_react.default.createElement("div",{className:axisLabelClass},this.props.xaxisLabel))}}]);return TimeseriesChart}(_react.Component);exports.TimeseriesChart=TimeseriesChart;TimeseriesChart.defaultProps={showGrid:true,dateFormat:"ll LTS"};TimeseriesChart.propTypes={crosshair:_propTypes.default.bool,onBrush:_propTypes.default.func,options:_propTypes.default.object,plothover:_propTypes.default.func,backgroundColor:_propTypes.default.string,series:_propTypes.default.array,annotations:_propTypes.default.array,show:_propTypes.default.array,tickFormatter:_propTypes.default.func,yaxes:_propTypes.default.array,showGrid:_propTypes.default.bool,xaxisLabel:_propTypes.default.string,dateFormat:_propTypes.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FlotChart=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _reactDom=__webpack_require__(13);var _lodash=_interopRequireDefault(__webpack_require__(1));var _flotCharts=_interopRequireDefault(__webpack_require__(1351));var _events=__webpack_require__(646);var _resize=__webpack_require__(1363);var _calculate_bar_width=__webpack_require__(1364);var _calculate_fill_color=__webpack_require__(1365);var _colors=__webpack_require__(647);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var FlotChart=function(_Component){_inherits(FlotChart,_Component);function FlotChart(props){var _this;_classCallCheck(this,FlotChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(FlotChart).call(this,props));_this.handleResize=_this.handleResize.bind(_assertThisInitialized(_this));return _this}_createClass(FlotChart,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(props){var _this2=this;if(!this.plot)return true;if(props.reversed!==this.props.reversed){return true}if(props.showGrid!==this.props.showGrid)return true;if(props.yaxes&&this.props.yaxes){var valuesChanged=props.yaxes.some(function(axis,i){if(_this2.props.yaxes[i]){return axis.position!==_this2.props.yaxes[i].position||axis.max!==_this2.props.yaxes[i].max||axis.min!==_this2.props.yaxes[i].min||axis.axisFormatter!==_this2.props.yaxes[i].axisFormatter||axis.mode!==_this2.props.yaxes[i].mode||axis.axisFormatterTemplate!==_this2.props.yaxes[i].axisFormatterTemplate}});if(props.yaxes.length!==this.props.yaxes.length||valuesChanged){return true}}return false}},{key:"shutdownChart",value:function shutdownChart(){if(!this.plot)return;(0,_flotCharts.default)(this.target).off("plothover",this.props.plothover);if(this.props.onMouseOver)(0,_flotCharts.default)(this.target).off("plothover",this.handleMouseOver);if(this.props.onMouseLeave)(0,_flotCharts.default)(this.target).off("mouseleave",this.handleMouseLeave);if(this.props.onBrush)(0,_flotCharts.default)(this.target).off("plotselected",this.brushChart);this.plot.shutdown();if(this.props.crosshair){(0,_flotCharts.default)(this.target).off("plothover",this.handlePlotover);_events.eventBus.off("thorPlotover",this.handleThorPlotover);_events.eventBus.off("thorPlotleave",this.handleThorPlotleave)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.shutdownChart()}},{key:"filterByShow",value:function filterByShow(show){if(show){return function(metric){return show.some(function(id){return _lodash.default.startsWith(id,metric.id)})}}return function(){return true}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(newProps){if(this.plot){var series=newProps.series;var options=this.plot.getOptions();_lodash.default.set(options,"series.bars.barWidth",(0,_calculate_bar_width.calculateBarWidth)(series));_lodash.default.set(options,"xaxes[0].ticks",this.calculateTicks());this.plot.setData(this.calculateData(series,newProps.show));this.plot.setupGrid();this.plot.draw();if(!_lodash.default.isEqual(this.props.series,newProps.series))this.handleDraw(this.plot)}else{this.renderChart()}}},{key:"componentDidMount",value:function componentDidMount(){this.renderChart()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.shutdownChart();this.renderChart()}},{key:"calculateData",value:function calculateData(data,show){var _this3=this;return(0,_lodash.default)(data).filter(this.filterByShow(show)).map(function(set){if(_lodash.default.isPlainObject(set)){return _objectSpread({},set,{lines:_this3.computeColor(set.lines,set.color),bars:_this3.computeColor(set.bars,set.color)})}return{color:"#990000",data:set}}).reverse().value()}},{key:"computeColor",value:function computeColor(style,color){if(style&&style.show){var _calculateFillColor=(0,_calculate_fill_color.calculateFillColor)(color,style.fill),fill=_calculateFillColor.fill,fillColor=_calculateFillColor.fillColor;return _objectSpread({},style,{fill:fill,fillColor:fillColor})}return style}},{key:"handleDraw",value:function handleDraw(plot){if(this.props.onDraw)this.props.onDraw(plot)}},{key:"getOptions",value:function getOptions(props){var yaxes=props.yaxes||[{}];var lineColor=_colors.COLORS.lineColor;var textColor=props.reversed?_colors.COLORS.textColorReversed:_colors.COLORS.textColor;var borderWidth={bottom:1,top:0,left:0,right:0};if(yaxes.some(function(y){return y.position==="left"}))borderWidth.left=1;if(yaxes.some(function(y){return y.position==="right"}))borderWidth.right=1;if(props.showGrid){borderWidth.top=1;borderWidth.left=1;borderWidth.right=1}var opts={legend:{show:false},yaxes:yaxes.map(function(axis){axis.tickLength=props.showGrid?null:0;return axis}),yaxis:{color:lineColor,font:{color:textColor,size:11},tickFormatter:props.tickFormatter},xaxis:{tickLength:props.showGrid?null:0,color:lineColor,timezone:"browser",mode:"time",font:{color:textColor,size:11},ticks:this.calculateTicks()},series:{shadowSize:0},grid:{margin:0,borderWidth:borderWidth,borderColor:lineColor,hoverable:true,mouseActiveRadius:200}};if(props.crosshair){_lodash.default.set(opts,"crosshair",{mode:"x",color:"#C66",lineWidth:1})}if(props.onBrush){_lodash.default.set(opts,"selection",{mode:"x",color:textColor})}if(props.xAxisFormatter){_lodash.default.set(opts,"xaxis.tickFormatter",props.xAxisFormatter)}_lodash.default.set(opts,"series.bars.barWidth",(0,_calculate_bar_width.calculateBarWidth)(props.series));return _lodash.default.assign(opts,props.options)}},{key:"calculateTicks",value:function calculateTicks(){var sample=this.props.xAxisFormatter(new Date);var tickLetterWidth=7;var tickPadding=45;var ticks=Math.floor(this.target.clientWidth/(sample.length*tickLetterWidth+tickPadding));return ticks}},{key:"handleResize",value:function handleResize(){var resize=(0,_reactDom.findDOMNode)(this.resize);if(!this.rendered){this.renderChart();return}if(resize&&resize.clientHeight>0&&resize.clientHeight>0){if(!this.plot)return;var options=this.plot.getOptions();_lodash.default.set(options,"xaxes[0].ticks",this.calculateTicks());this.plot.resize();this.plot.setupGrid();this.plot.draw();this.handleDraw(this.plot)}}},{key:"renderChart",value:function renderChart(){var _this4=this;var resize=(0,_reactDom.findDOMNode)(this.resize);if(resize.clientWidth>0&&resize.clientHeight>0){this.rendered=true;var series=this.props.series;var data=this.calculateData(series,this.props.show);this.plot=_flotCharts.default.plot(this.target,data,this.getOptions(this.props));this.handleDraw(this.plot);_lodash.default.defer(function(){return _this4.handleResize()});this.handleMouseOver=function(){var _this4$props;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(_this4.props.onMouseOver)(_this4$props=_this4.props).onMouseOver.apply(_this4$props,args.concat([_this4.plot]))};this.handleMouseLeave=function(){var _this4$props2;for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}if(_this4.props.onMouseLeave)(_this4$props2=_this4.props).onMouseLeave.apply(_this4$props2,args.concat([_this4.plot]))};(0,_flotCharts.default)(this.target).on("plothover",this.handleMouseOver);(0,_flotCharts.default)(this.target).on("mouseleave",this.handleMouseLeave);if(this.props.crosshair){this.handleThorPlotover=function(e,pos,item,originalPlot){if(_this4.plot!==originalPlot){_this4.plot.setCrosshair({x:_lodash.default.get(pos,"x")});_this4.props.plothover(e,pos,item)}};this.handlePlotover=function(e,pos,item){return _events.eventBus.trigger("thorPlotover",[pos,item,_this4.plot])};this.handlePlotleave=function(){return _events.eventBus.trigger("thorPlotleave")};this.handleThorPlotleave=function(e){if(_this4.plot)_this4.plot.clearCrosshair();if(_this4.props.plothover)_this4.props.plothover(e)};(0,_flotCharts.default)(this.target).on("plothover",this.handlePlotover);(0,_flotCharts.default)(this.target).on("mouseleave",this.handlePlotleave);_events.eventBus.on("thorPlotover",this.handleThorPlotover);_events.eventBus.on("thorPlotleave",this.handleThorPlotleave)}if(_lodash.default.isFunction(this.props.plothover)){(0,_flotCharts.default)(this.target).bind("plothover",this.props.plothover)}(0,_flotCharts.default)(this.target).on("mouseleave",function(){_events.eventBus.trigger("thorPlotleave")});if(_lodash.default.isFunction(this.props.onBrush)){this.brushChart=function(e,ranges){_this4.props.onBrush(ranges);_this4.plot.clearSelection()};(0,_flotCharts.default)(this.target).on("plotselected",this.brushChart)}}}},{key:"render",value:function render(){var _this5=this;return _react.default.createElement(_resize.Resize,{onResize:this.handleResize,ref:function ref(el){return _this5.resize=el},className:"tvbVisTimeSeries__container"},_react.default.createElement("div",{ref:function ref(el){return _this5.target=el},className:"tvbVisTimeSeries__container"}))}}]);return FlotChart}(_react.Component);exports.FlotChart=FlotChart;FlotChart.defaultProps={showGrid:true};FlotChart.propTypes={crosshair:_propTypes.default.bool,onBrush:_propTypes.default.func,onPlotCreate:_propTypes.default.func,onMouseOver:_propTypes.default.func,onMouseLeave:_propTypes.default.func,options:_propTypes.default.object,plothover:_propTypes.default.func,reversed:_propTypes.default.bool,series:_propTypes.default.array,show:_propTypes.default.array,tickFormatter:_propTypes.default.func,showGrid:_propTypes.default.bool,yaxes:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}if(window)window.jQuery=_jquery.default;__webpack_require__(1352);__webpack_require__(1353);__webpack_require__(1354);__webpack_require__(1355);__webpack_require__(1356);__webpack_require__(1357);__webpack_require__(1358);__webpack_require__(1359);__webpack_require__(1360);__webpack_require__(1361);__webpack_require__(1362);module.exports=_jquery.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=a!=null?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i){o[c.charAt(i)]+=d}return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i){o[c.charAt(i)]*=f}return o.normalize()};o.toString=function(){if(o.a>=1){return"rgb("+[o.r,o.g,o.b].join(",")+")"}else{return"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"}};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(c!=""&&c!="transparent")break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),"body"));if(c=="rgba(0, 0, 0, 0)")c="transparent";return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55);if(res=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55,parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if(name=="transparent")return m(255,255,255,0);else{res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])}};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function($){var hasOwnProperty=Object.prototype.hasOwnProperty;if(!$.fn.detach){$.fn.detach=function(){return this.each(function(){if(this.parentNode){this.parentNode.removeChild(this)}})}}function Canvas(cls,container){var element=container.children("."+cls)[0];if(element==null){element=document.createElement("canvas");element.className=cls;$(element).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(container);if(!element.getContext){if(window.G_vmlCanvasManager){element=window.G_vmlCanvasManager.initElement(element)}else{throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.")}}}this.element=element;var context=this.context=element.getContext("2d");var devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;this.pixelRatio=devicePixelRatio/backingStoreRatio;this.resize(container.width(),container.height());this.textContainer=null;this.text={};this._textCache={}}Canvas.prototype.resize=function(width,height){if(width<=0||height<=0){throw new Error("Invalid dimensions for plot, width = "+width+", height = "+height)}var element=this.element,context=this.context,pixelRatio=this.pixelRatio;if(this.width!=width){element.width=width*pixelRatio;element.style.width=width+"px";this.width=width}if(this.height!=height){element.height=height*pixelRatio;element.style.height=height+"px";this.height=height}context.restore();context.save();context.scale(pixelRatio,pixelRatio)};Canvas.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};Canvas.prototype.render=function(){var cache=this._textCache;for(var layerKey in cache){if(hasOwnProperty.call(cache,layerKey)){var layer=this.getTextLayer(layerKey),layerCache=cache[layerKey];layer.hide();for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var i=0,position;position=positions[i];i++){if(position.active){if(!position.rendered){layer.append(position.element);position.rendered=true}}else{positions.splice(i--,1);if(position.rendered){position.element.detach()}}}if(positions.length==0){delete styleCache[key]}}}}}layer.show()}}};Canvas.prototype.getTextLayer=function(classes){var layer=this.text[classes];if(layer==null){if(this.textContainer==null){this.textContainer=$("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)}layer=this.text[classes]=$("<div></div>").addClass(classes).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)}return layer};Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){var textStyle,layerCache,styleCache,info;text=""+text;if(_typeof(font)==="object"){textStyle=font.style+" "+font.variant+" "+font.weight+" "+font.size+"px/"+font.lineHeight+"px "+font.family}else{textStyle=font}layerCache=this._textCache[layer];if(layerCache==null){layerCache=this._textCache[layer]={}}styleCache=layerCache[textStyle];if(styleCache==null){styleCache=layerCache[textStyle]={}}info=styleCache[text];if(info==null){var element=$("<div></div>").html(text).css({position:"absolute","max-width":width,top:-9999}).appendTo(this.getTextLayer(layer));if(_typeof(font)==="object"){element.css({font:textStyle,color:font.color})}else if(typeof font==="string"){element.addClass(font)}info=styleCache[text]={width:element.outerWidth(true),height:element.outerHeight(true),element:element,positions:[]};element.detach()}return info};Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions;if(halign=="center"){x-=info.width/2}else if(halign=="right"){x-=info.width}if(valign=="middle"){y-=info.height/2}else if(valign=="bottom"){y-=info.height}for(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=true;return}}position={active:true,rendered:false,element:positions.length?info.element.clone():info.element,x:x,y:y};positions.push(position);position.element.css({top:Math.round(y),left:Math.round(x),"text-align":halign})};Canvas.prototype.removeText=function(layer,x,y,text,font,angle){if(text==null){var layerCache=this._textCache[layer];if(layerCache!=null){for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var i=0,position;position=positions[i];i++){position.active=false}}}}}}}else{var positions=this.getTextInfo(layer,text,font,angle).positions;for(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=false}}}};function Plot(placeholder,data_,options_,plugins){var series=[],options={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false,zero:true},shadowSize:3,highlightColor:null},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],plotOffset={left:0,right:0,top:0,bottom:0},plotWidth=0,plotHeight=0,hooks={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},plot=this;plot.setData=setData;plot.setupGrid=setupGrid;plot.draw=draw;plot.getPlaceholder=function(){return placeholder};plot.getCanvas=function(){return surface.element};plot.getPlotOffset=function(){return plotOffset};plot.width=function(){return plotWidth};plot.height=function(){return plotHeight};plot.offset=function(){var o=eventHolder.offset();o.left+=plotOffset.left;o.top+=plotOffset.top;return o};plot.getData=function(){return series};plot.getAxes=function(){var res={},i;$.each(xaxes.concat(yaxes),function(_,axis){if(axis)res[axis.direction+(axis.n!=1?axis.n:"")+"axis"]=axis});return res};plot.getXAxes=function(){return xaxes};plot.getYAxes=function(){return yaxes};plot.c2p=canvasToAxisCoords;plot.p2c=axisToCanvasCoords;plot.getOptions=function(){return options};plot.highlight=highlight;plot.unhighlight=unhighlight;plot.triggerRedrawOverlay=triggerRedrawOverlay;plot.pointOffset=function(point){return{left:parseInt(xaxes[axisNumber(point,"x")-1].p2c(+point.x)+plotOffset.left,10),top:parseInt(yaxes[axisNumber(point,"y")-1].p2c(+point.y)+plotOffset.top,10)}};plot.shutdown=shutdown;plot.destroy=function(){shutdown();placeholder.removeData("plot").empty();series=[];options=null;surface=null;overlay=null;eventHolder=null;ctx=null;octx=null;xaxes=[];yaxes=[];hooks=null;highlights=[];plot=null};plot.resize=function(){var width=placeholder.width(),height=placeholder.height();surface.resize(width,height);overlay.resize(width,height)};plot.hooks=hooks;initPlugins(plot);parseOptions(options_);setupCanvases();setData(data_);setupGrid();draw();bindEvents();function executeHooks(hook,args){args=[plot].concat(args);for(var i=0;i<hook.length;++i){hook[i].apply(this,args)}}function initPlugins(){var classes={Canvas:Canvas};for(var i=0;i<plugins.length;++i){var p=plugins[i];p.init(plot,classes);if(p.options)$.extend(true,options,p.options)}}function parseOptions(opts){$.extend(true,options,opts);if(opts&&opts.colors){options.colors=opts.colors}if(options.xaxis.color==null)options.xaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString();if(options.yaxis.color==null)options.yaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString();if(options.xaxis.tickColor==null)options.xaxis.tickColor=options.grid.tickColor||options.xaxis.color;if(options.yaxis.tickColor==null)options.yaxis.tickColor=options.grid.tickColor||options.yaxis.color;if(options.grid.borderColor==null)options.grid.borderColor=options.grid.color;if(options.grid.tickColor==null)options.grid.tickColor=$.color.parse(options.grid.color).scale("a",.22).toString();var i,axisOptions,axisCount,fontSize=placeholder.css("font-size"),fontSizeDefault=fontSize?+fontSize.replace("px",""):13,fontDefaults={style:placeholder.css("font-style"),size:Math.round(.8*fontSizeDefault),variant:placeholder.css("font-variant"),weight:placeholder.css("font-weight"),family:placeholder.css("font-family")};axisCount=options.xaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.xaxes[i];if(axisOptions&&!axisOptions.tickColor){axisOptions.tickColor=axisOptions.color}axisOptions=$.extend(true,{},options.xaxis,axisOptions);options.xaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);if(!axisOptions.font.color){axisOptions.font.color=axisOptions.color}if(!axisOptions.font.lineHeight){axisOptions.font.lineHeight=Math.round(axisOptions.font.size*1.15)}}}axisCount=options.yaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.yaxes[i];if(axisOptions&&!axisOptions.tickColor){axisOptions.tickColor=axisOptions.color}axisOptions=$.extend(true,{},options.yaxis,axisOptions);options.yaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);if(!axisOptions.font.color){axisOptions.font.color=axisOptions.color}if(!axisOptions.font.lineHeight){axisOptions.font.lineHeight=Math.round(axisOptions.font.size*1.15)}}}if(options.xaxis.noTicks&&options.xaxis.ticks==null)options.xaxis.ticks=options.xaxis.noTicks;if(options.yaxis.noTicks&&options.yaxis.ticks==null)options.yaxis.ticks=options.yaxis.noTicks;if(options.x2axis){options.xaxes[1]=$.extend(true,{},options.xaxis,options.x2axis);options.xaxes[1].position="top";if(options.x2axis.min==null){options.xaxes[1].min=null}if(options.x2axis.max==null){options.xaxes[1].max=null}}if(options.y2axis){options.yaxes[1]=$.extend(true,{},options.yaxis,options.y2axis);options.yaxes[1].position="right";if(options.y2axis.min==null){options.yaxes[1].min=null}if(options.y2axis.max==null){options.yaxes[1].max=null}}if(options.grid.coloredAreas)options.grid.markings=options.grid.coloredAreas;if(options.grid.coloredAreasColor)options.grid.markingsColor=options.grid.coloredAreasColor;if(options.lines)$.extend(true,options.series.lines,options.lines);if(options.points)$.extend(true,options.series.points,options.points);if(options.bars)$.extend(true,options.series.bars,options.bars);if(options.shadowSize!=null)options.series.shadowSize=options.shadowSize;if(options.highlightColor!=null)options.series.highlightColor=options.highlightColor;for(i=0;i<options.xaxes.length;++i){getOrCreateAxis(xaxes,i+1).options=options.xaxes[i]}for(i=0;i<options.yaxes.length;++i){getOrCreateAxis(yaxes,i+1).options=options.yaxes[i]}for(var n in hooks){if(options.hooks[n]&&options.hooks[n].length)hooks[n]=hooks[n].concat(options.hooks[n])}executeHooks(hooks.processOptions,[options])}function setData(d){series=parseData(d);fillInSeriesOptions();processData()}function parseData(d){var res=[];for(var i=0;i<d.length;++i){var s=$.extend(true,{},options.series);if(d[i].data!=null){s.data=d[i].data;delete d[i].data;$.extend(true,s,d[i]);d[i].data=s.data}else s.data=d[i];res.push(s)}return res}function axisNumber(obj,coord){var a=obj[coord+"axis"];if(_typeof(a)=="object")a=a.n;if(typeof a!="number")a=1;return a}function allAxes(){return $.grep(xaxes.concat(yaxes),function(a){return a})}function canvasToAxisCoords(pos){var res={},i,axis;for(i=0;i<xaxes.length;++i){axis=xaxes[i];if(axis&&axis.used)res["x"+axis.n]=axis.c2p(pos.left)}for(i=0;i<yaxes.length;++i){axis=yaxes[i];if(axis&&axis.used)res["y"+axis.n]=axis.c2p(pos.top)}if(res.x1!==undefined)res.x=res.x1;if(res.y1!==undefined)res.y=res.y1;return res}function axisToCanvasCoords(pos){var res={},i,axis,key;for(i=0;i<xaxes.length;++i){axis=xaxes[i];if(axis&&axis.used){key="x"+axis.n;if(pos[key]==null&&axis.n==1)key="x";if(pos[key]!=null){res.left=axis.p2c(pos[key]);break}}}for(i=0;i<yaxes.length;++i){axis=yaxes[i];if(axis&&axis.used){key="y"+axis.n;if(pos[key]==null&&axis.n==1)key="y";if(pos[key]!=null){res.top=axis.p2c(pos[key]);break}}}return res}function getOrCreateAxis(axes,number){if(!axes[number-1])axes[number-1]={n:number,direction:axes==xaxes?"x":"y",options:$.extend(true,{},axes==xaxes?options.xaxis:options.yaxis)};return axes[number-1]}function fillInSeriesOptions(){var neededColors=series.length,maxIndex=-1,i;for(i=0;i<series.length;++i){var sc=series[i].color;if(sc!=null){neededColors--;if(typeof sc=="number"&&sc>maxIndex){maxIndex=sc}}}if(neededColors<=maxIndex){neededColors=maxIndex+1}var c,colors=[],colorPool=options.colors,colorPoolSize=colorPool.length,variation=0;for(i=0;i<neededColors;i++){c=$.color.parse(colorPool[i%colorPoolSize]||"#666");if(i%colorPoolSize==0&&i){if(variation>=0){if(variation<.5){variation=-variation-.2}else variation=0}else variation=-variation}colors[i]=c.scale("rgb",1+variation)}var colori=0,s;for(i=0;i<series.length;++i){s=series[i];if(s.color==null){s.color=colors[colori].toString();++colori}else if(typeof s.color=="number")s.color=colors[s.color].toString();if(s.lines.show==null){var v,show=true;for(v in s){if(s[v]&&s[v].show){show=false;break}}if(show)s.lines.show=true}if(s.lines.zero==null){s.lines.zero=!!s.lines.fill}s.xaxis=getOrCreateAxis(xaxes,axisNumber(s,"x"));s.yaxis=getOrCreateAxis(yaxes,axisNumber(s,"y"))}}function processData(){var topSentry=Number.POSITIVE_INFINITY,bottomSentry=Number.NEGATIVE_INFINITY,fakeInfinity=Number.MAX_VALUE,i,j,k,m,length,s,points,ps,x,y,axis,val,f,p,data,format;function updateAxis(axis,min,max){if(min<axis.datamin&&min!=-fakeInfinity)axis.datamin=min;if(max>axis.datamax&&max!=fakeInfinity)axis.datamax=max}$.each(allAxes(),function(_,axis){axis.datamin=topSentry;axis.datamax=bottomSentry;axis.used=false});for(i=0;i<series.length;++i){s=series[i];s.datapoints={points:[]};executeHooks(hooks.processRawData,[s,s.data,s.datapoints])}for(i=0;i<series.length;++i){s=series[i];data=s.data;format=s.datapoints.format;if(!format){format=[];format.push({x:true,number:true,required:true});format.push({y:true,number:true,required:true});if(s.bars.show||s.lines.show&&s.lines.fill){var autoscale=!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero);format.push({y:true,number:true,required:false,defaultValue:0,autoscale:autoscale});if(s.bars.horizontal){delete format[format.length-1].y;format[format.length-1].x=true}}s.datapoints.format=format}if(s.datapoints.pointsize!=null)continue;s.datapoints.pointsize=format.length;ps=s.datapoints.pointsize;points=s.datapoints.points;var insertSteps=s.lines.show&&s.lines.steps;s.xaxis.used=s.yaxis.used=true;for(j=k=0;j<data.length;++j,k+=ps){p=data[j];var nullify=p==null;if(!nullify){for(m=0;m<ps;++m){val=p[m];f=format[m];if(f){if(f.number&&val!=null){val=+val;if(isNaN(val))val=null;else if(val==Infinity)val=fakeInfinity;else if(val==-Infinity)val=-fakeInfinity}if(val==null){if(f.required)nullify=true;if(f.defaultValue!=null)val=f.defaultValue}}points[k+m]=val}}if(nullify){for(m=0;m<ps;++m){val=points[k+m];if(val!=null){f=format[m];if(f.autoscale!==false){if(f.x){updateAxis(s.xaxis,val,val)}if(f.y){updateAxis(s.yaxis,val,val)}}}points[k+m]=null}}else{if(insertSteps&&k>0&&points[k-ps]!=null&&points[k-ps]!=points[k]&&points[k-ps+1]!=points[k+1]){for(m=0;m<ps;++m){points[k+ps+m]=points[k+m]}points[k+1]=points[k-ps+1];k+=ps}}}}for(i=0;i<series.length;++i){s=series[i];executeHooks(hooks.processDatapoints,[s,s.datapoints])}for(i=0;i<series.length;++i){s=series[i];points=s.datapoints.points;ps=s.datapoints.pointsize;format=s.datapoints.format;var xmin=topSentry,ymin=topSentry,xmax=bottomSentry,ymax=bottomSentry;for(j=0;j<points.length;j+=ps){if(points[j]==null)continue;for(m=0;m<ps;++m){val=points[j+m];f=format[m];if(!f||f.autoscale===false||val==fakeInfinity||val==-fakeInfinity)continue;if(f.x){if(val<xmin)xmin=val;if(val>xmax)xmax=val}if(f.y){if(val<ymin)ymin=val;if(val>ymax)ymax=val}}}if(s.bars.show){var delta;switch(s.bars.align){case"left":delta=0;break;case"right":delta=-s.bars.barWidth;break;default:delta=-s.bars.barWidth/2}if(s.bars.horizontal){ymin+=delta;ymax+=delta+s.bars.barWidth}else{xmin+=delta;xmax+=delta+s.bars.barWidth}}updateAxis(s.xaxis,xmin,xmax);updateAxis(s.yaxis,ymin,ymax)}$.each(allAxes(),function(_,axis){if(axis.datamin==topSentry)axis.datamin=null;if(axis.datamax==bottomSentry)axis.datamax=null})}function setupCanvases(){placeholder.css("padding",0).children().filter(function(){return!$(this).hasClass("flot-overlay")&&!$(this).hasClass("flot-base")}).remove();if(placeholder.css("position")=="static")placeholder.css("position","relative");surface=new Canvas("flot-base",placeholder);overlay=new Canvas("flot-overlay",placeholder);ctx=surface.context;octx=overlay.context;eventHolder=$(overlay.element).unbind();var existing=placeholder.data("plot");if(existing){existing.shutdown();overlay.clear()}placeholder.data("plot",plot)}function bindEvents(){if(options.grid.hoverable){eventHolder.mousemove(onMouseMove);eventHolder.bind("mouseleave",onMouseLeave)}if(options.grid.clickable)eventHolder.click(onClick);executeHooks(hooks.bindEvents,[eventHolder])}function shutdown(){if(redrawTimeout)clearTimeout(redrawTimeout);eventHolder.unbind("mousemove",onMouseMove);eventHolder.unbind("mouseleave",onMouseLeave);eventHolder.unbind("click",onClick);executeHooks(hooks.shutdown,[eventHolder])}function setTransformationHelpers(axis){function identity(x){return x}var s,m,t=axis.options.transform||identity,it=axis.options.inverseTransform;if(axis.direction=="x"){s=axis.scale=plotWidth/Math.abs(t(axis.max)-t(axis.min));m=Math.min(t(axis.max),t(axis.min))}else{s=axis.scale=plotHeight/Math.abs(t(axis.max)-t(axis.min));s=-s;m=Math.max(t(axis.max),t(axis.min))}if(t==identity)axis.p2c=function(p){return(p-m)*s};else axis.p2c=function(p){return(t(p)-m)*s};if(!it)axis.c2p=function(c){return m+c/s};else axis.c2p=function(c){return it(m+c/s)}}function measureTickLabels(axis){var opts=axis.options,ticks=axis.ticks||[],labelWidth=opts.labelWidth||0,labelHeight=opts.labelHeight||0,maxWidth=labelWidth||(axis.direction=="x"?Math.floor(surface.width/(ticks.length||1)):null),legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=opts.font||"flot-tick-label tickLabel";for(var i=0;i<ticks.length;++i){var t=ticks[i];if(!t.label)continue;var info=surface.getTextInfo(layer,t.label,font,null,maxWidth);labelWidth=Math.max(labelWidth,info.width);labelHeight=Math.max(labelHeight,info.height)}axis.labelWidth=opts.labelWidth||labelWidth;axis.labelHeight=opts.labelHeight||labelHeight}function allocateAxisBoxFirstPhase(axis){var lw=axis.labelWidth,lh=axis.labelHeight,pos=axis.options.position,isXAxis=axis.direction==="x",tickLength=axis.options.tickLength,axisMargin=options.grid.axisMargin,padding=options.grid.labelMargin,innermost=true,outermost=true,first=true,found=false;$.each(isXAxis?xaxes:yaxes,function(i,a){if(a&&(a.show||a.reserveSpace)){if(a===axis){found=true}else if(a.options.position===pos){if(found){outermost=false}else{innermost=false}}if(!found){first=false}}});if(outermost){axisMargin=0}if(tickLength==null){tickLength=first?"full":5}if(!isNaN(+tickLength))padding+=+tickLength;if(isXAxis){lh+=padding;if(pos=="bottom"){plotOffset.bottom+=lh+axisMargin;axis.box={top:surface.height-plotOffset.bottom,height:lh}}else{axis.box={top:plotOffset.top+axisMargin,height:lh};plotOffset.top+=lh+axisMargin}}else{lw+=padding;if(pos=="left"){axis.box={left:plotOffset.left+axisMargin,width:lw};plotOffset.left+=lw+axisMargin}else{plotOffset.right+=lw+axisMargin;axis.box={left:surface.width-plotOffset.right,width:lw}}}axis.position=pos;axis.tickLength=tickLength;axis.box.padding=padding;axis.innermost=innermost}function allocateAxisBoxSecondPhase(axis){if(axis.direction=="x"){axis.box.left=plotOffset.left-axis.labelWidth/2;axis.box.width=surface.width-plotOffset.left-plotOffset.right+axis.labelWidth}else{axis.box.top=plotOffset.top-axis.labelHeight/2;axis.box.height=surface.height-plotOffset.bottom-plotOffset.top+axis.labelHeight}}function adjustLayoutForThingsStickingOut(){var minMargin=options.grid.minBorderMargin,axis,i;if(minMargin==null){minMargin=0;for(i=0;i<series.length;++i){minMargin=Math.max(minMargin,2*(series[i].points.radius+series[i].points.lineWidth/2))}}var margins={left:minMargin,right:minMargin,top:minMargin,bottom:minMargin};$.each(allAxes(),function(_,axis){if(axis.reserveSpace&&axis.ticks&&axis.ticks.length){if(axis.direction==="x"){margins.left=Math.max(margins.left,axis.labelWidth/2);margins.right=Math.max(margins.right,axis.labelWidth/2)}else{margins.bottom=Math.max(margins.bottom,axis.labelHeight/2);margins.top=Math.max(margins.top,axis.labelHeight/2)}}});plotOffset.left=Math.ceil(Math.max(margins.left,plotOffset.left));plotOffset.right=Math.ceil(Math.max(margins.right,plotOffset.right));plotOffset.top=Math.ceil(Math.max(margins.top,plotOffset.top));plotOffset.bottom=Math.ceil(Math.max(margins.bottom,plotOffset.bottom))}function setupGrid(){var i,axes=allAxes(),showGrid=options.grid.show;for(var a in plotOffset){var margin=options.grid.margin||0;plotOffset[a]=typeof margin=="number"?margin:margin[a]||0}executeHooks(hooks.processOffset,[plotOffset]);for(var a in plotOffset){if(_typeof(options.grid.borderWidth)=="object"){plotOffset[a]+=showGrid?options.grid.borderWidth[a]:0}else{plotOffset[a]+=showGrid?options.grid.borderWidth:0}}$.each(axes,function(_,axis){var axisOpts=axis.options;axis.show=axisOpts.show==null?axis.used:axisOpts.show;axis.reserveSpace=axisOpts.reserveSpace==null?axis.show:axisOpts.reserveSpace;setRange(axis)});if(showGrid){var allocatedAxes=$.grep(axes,function(axis){return axis.show||axis.reserveSpace});$.each(allocatedAxes,function(_,axis){setupTickGeneration(axis);setTicks(axis);snapRangeToTicks(axis,axis.ticks);measureTickLabels(axis)});for(i=allocatedAxes.length-1;i>=0;--i){allocateAxisBoxFirstPhase(allocatedAxes[i])}adjustLayoutForThingsStickingOut();$.each(allocatedAxes,function(_,axis){allocateAxisBoxSecondPhase(axis)})}plotWidth=surface.width-plotOffset.left-plotOffset.right;plotHeight=surface.height-plotOffset.bottom-plotOffset.top;$.each(axes,function(_,axis){setTransformationHelpers(axis)});if(showGrid){drawAxisLabels()}insertLegend()}function setRange(axis){var opts=axis.options,min=+(opts.min!=null?opts.min:axis.datamin),max=+(opts.max!=null?opts.max:axis.datamax),delta=max-min;if(delta==0){var widen=max==0?1:.01;if(opts.min==null)min-=widen;if(opts.max==null||opts.min!=null)max+=widen}else{var margin=opts.autoscaleMargin;if(margin!=null){if(opts.min==null){min-=delta*margin;if(min<0&&axis.datamin!=null&&axis.datamin>=0)min=0}if(opts.max==null){max+=delta*margin;if(max>0&&axis.datamax!=null&&axis.datamax<=0)max=0}}}axis.min=min;axis.max=max}function setupTickGeneration(axis){var opts=axis.options;var noTicks;if(typeof opts.ticks=="number"&&opts.ticks>0)noTicks=opts.ticks;else noTicks=.3*Math.sqrt(axis.direction=="x"?surface.width:surface.height);var delta=(axis.max-axis.min)/noTicks,dec=-Math.floor(Math.log(delta)/Math.LN10),maxDec=opts.tickDecimals;if(maxDec!=null&&dec>maxDec){dec=maxDec}var magn=Math.pow(10,-dec),norm=delta/magn,size;if(norm<1.5){size=1}else if(norm<3){size=2;if(norm>2.25&&(maxDec==null||dec+1<=maxDec)){size=2.5;++dec}}else if(norm<7.5){size=5}else{size=10}size*=magn;if(opts.minTickSize!=null&&size<opts.minTickSize){size=opts.minTickSize}axis.delta=delta;axis.tickDecimals=Math.max(0,maxDec!=null?maxDec:dec);axis.tickSize=opts.tickSize||size;if(opts.mode=="time"&&!axis.tickGenerator){throw new Error("Time mode requires the flot.time plugin.")}if(!axis.tickGenerator){axis.tickGenerator=function(axis){var ticks=[],start=floorInBase(axis.min,axis.tickSize),i=0,v=Number.NaN,prev;do{prev=v;v=start+i*axis.tickSize;ticks.push(v);++i}while(v<axis.max&&v!=prev);return ticks};axis.tickFormatter=function(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;var formatted=""+Math.round(value*factor)/factor;if(axis.tickDecimals!=null){var decimal=formatted.indexOf(".");var precision=decimal==-1?0:formatted.length-decimal-1;if(precision<axis.tickDecimals){return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}}return formatted}}if($.isFunction(opts.tickFormatter))axis.tickFormatter=function(v,axis){return""+opts.tickFormatter(v,axis)};if(opts.alignTicksWithAxis!=null){var otherAxis=(axis.direction=="x"?xaxes:yaxes)[opts.alignTicksWithAxis-1];if(otherAxis&&otherAxis.used&&otherAxis!=axis){var niceTicks=axis.tickGenerator(axis);if(niceTicks.length>0){if(opts.min==null)axis.min=Math.min(axis.min,niceTicks[0]);if(opts.max==null&&niceTicks.length>1)axis.max=Math.max(axis.max,niceTicks[niceTicks.length-1])}axis.tickGenerator=function(axis){var ticks=[],v,i;for(i=0;i<otherAxis.ticks.length;++i){v=(otherAxis.ticks[i].v-otherAxis.min)/(otherAxis.max-otherAxis.min);v=axis.min+v*(axis.max-axis.min);ticks.push(v)}return ticks};if(!axis.mode&&opts.tickDecimals==null){var extraDec=Math.max(0,-Math.floor(Math.log(axis.delta)/Math.LN10)+1),ts=axis.tickGenerator(axis);if(!(ts.length>1&&/\..*0$/.test((ts[1]-ts[0]).toFixed(extraDec))))axis.tickDecimals=extraDec}}}}function setTicks(axis){var oticks=axis.options.ticks,ticks=[];if(oticks==null||typeof oticks=="number"&&oticks>0)ticks=axis.tickGenerator(axis);else if(oticks){if($.isFunction(oticks))ticks=oticks(axis);else ticks=oticks}var i,v;axis.ticks=[];for(i=0;i<ticks.length;++i){var label=null;var t=ticks[i];if(_typeof(t)=="object"){v=+t[0];if(t.length>1)label=t[1]}else v=+t;if(label==null)label=axis.tickFormatter(v,axis);if(!isNaN(v))axis.ticks.push({v:v,label:label})}}function snapRangeToTicks(axis,ticks){if(axis.options.autoscaleMargin&&ticks.length>0){if(axis.options.min==null)axis.min=Math.min(axis.min,ticks[0].v);if(axis.options.max==null&&ticks.length>1)axis.max=Math.max(axis.max,ticks[ticks.length-1].v)}}function draw(){surface.clear();executeHooks(hooks.drawBackground,[ctx]);var grid=options.grid;if(grid.show&&grid.backgroundColor)drawBackground();if(grid.show&&!grid.aboveData){drawGrid()}for(var i=0;i<series.length;++i){executeHooks(hooks.drawSeries,[ctx,series[i]]);drawSeries(series[i])}executeHooks(hooks.draw,[ctx]);if(grid.show&&grid.aboveData){drawGrid()}surface.render();triggerRedrawOverlay()}function extractRange(ranges,coord){var axis,from,to,key,axes=allAxes();for(var i=0;i<axes.length;++i){axis=axes[i];if(axis.direction==coord){key=coord+axis.n+"axis";if(!ranges[key]&&axis.n==1)key=coord+"axis";if(ranges[key]){from=ranges[key].from;to=ranges[key].to;break}}}if(!ranges[key]){axis=coord=="x"?xaxes[0]:yaxes[0];from=ranges[coord+"1"];to=ranges[coord+"2"]}if(from!=null&&to!=null&&from>to){var tmp=from;from=to;to=tmp}return{from:from,to:to,axis:axis}}function drawBackground(){ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.fillStyle=getColorOrGradient(options.grid.backgroundColor,plotHeight,0,"rgba(255, 255, 255, 0)");ctx.fillRect(0,0,plotWidth,plotHeight);ctx.restore()}function drawGrid(){var i,axes,bw,bc;ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var markings=options.grid.markings;if(markings){if($.isFunction(markings)){axes=plot.getAxes();axes.xmin=axes.xaxis.min;axes.xmax=axes.xaxis.max;axes.ymin=axes.yaxis.min;axes.ymax=axes.yaxis.max;markings=markings(axes)}for(i=0;i<markings.length;++i){var m=markings[i],xrange=extractRange(m,"x"),yrange=extractRange(m,"y");if(xrange.from==null)xrange.from=xrange.axis.min;if(xrange.to==null)xrange.to=xrange.axis.max;if(yrange.from==null)yrange.from=yrange.axis.min;if(yrange.to==null)yrange.to=yrange.axis.max;if(xrange.to<xrange.axis.min||xrange.from>xrange.axis.max||yrange.to<yrange.axis.min||yrange.from>yrange.axis.max)continue;xrange.from=Math.max(xrange.from,xrange.axis.min);xrange.to=Math.min(xrange.to,xrange.axis.max);yrange.from=Math.max(yrange.from,yrange.axis.min);yrange.to=Math.min(yrange.to,yrange.axis.max);var xequal=xrange.from===xrange.to,yequal=yrange.from===yrange.to;if(xequal&&yequal){continue}xrange.from=Math.floor(xrange.axis.p2c(xrange.from));xrange.to=Math.floor(xrange.axis.p2c(xrange.to));yrange.from=Math.floor(yrange.axis.p2c(yrange.from));yrange.to=Math.floor(yrange.axis.p2c(yrange.to));if(xequal||yequal){var lineWidth=m.lineWidth||options.grid.markingsLineWidth,subPixel=lineWidth%2?.5:0;ctx.beginPath();ctx.strokeStyle=m.color||options.grid.markingsColor;ctx.lineWidth=lineWidth;if(xequal){ctx.moveTo(xrange.to+subPixel,yrange.from);ctx.lineTo(xrange.to+subPixel,yrange.to)}else{ctx.moveTo(xrange.from,yrange.to+subPixel);ctx.lineTo(xrange.to,yrange.to+subPixel)}ctx.stroke()}else{ctx.fillStyle=m.color||options.grid.markingsColor;ctx.fillRect(xrange.from,yrange.to,xrange.to-xrange.from,yrange.from-yrange.to)}}}axes=allAxes();bw=options.grid.borderWidth;for(var j=0;j<axes.length;++j){var axis=axes[j],box=axis.box,t=axis.tickLength,x,y,xoff,yoff;if(!axis.show||axis.ticks.length==0)continue;ctx.lineWidth=1;if(axis.direction=="x"){x=0;if(t=="full")y=axis.position=="top"?0:plotHeight;else y=box.top-plotOffset.top+(axis.position=="top"?box.height:0)}else{y=0;if(t=="full")x=axis.position=="left"?0:plotWidth;else x=box.left-plotOffset.left+(axis.position=="left"?box.width:0)}if(!axis.innermost){ctx.strokeStyle=axis.options.color;ctx.beginPath();xoff=yoff=0;if(axis.direction=="x")xoff=plotWidth+1;else yoff=plotHeight+1;if(ctx.lineWidth==1){if(axis.direction=="x"){y=Math.floor(y)+.5}else{x=Math.floor(x)+.5}}ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff);ctx.stroke()}ctx.strokeStyle=axis.options.tickColor;ctx.beginPath();for(i=0;i<axis.ticks.length;++i){var v=axis.ticks[i].v;xoff=yoff=0;if(isNaN(v)||v<axis.min||v>axis.max||t=="full"&&(_typeof(bw)=="object"&&bw[axis.position]>0||bw>0)&&(v==axis.min||v==axis.max))continue;if(axis.direction=="x"){x=axis.p2c(v);yoff=t=="full"?-plotHeight:t;if(axis.position=="top")yoff=-yoff}else{y=axis.p2c(v);xoff=t=="full"?-plotWidth:t;if(axis.position=="left")xoff=-xoff}if(ctx.lineWidth==1){if(axis.direction=="x")x=Math.floor(x)+.5;else y=Math.floor(y)+.5}ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff)}ctx.stroke()}if(bw){bc=options.grid.borderColor;if(_typeof(bw)=="object"||_typeof(bc)=="object"){if(_typeof(bw)!=="object"){bw={top:bw,right:bw,bottom:bw,left:bw}}if(_typeof(bc)!=="object"){bc={top:bc,right:bc,bottom:bc,left:bc}}if(bw.top>0){ctx.strokeStyle=bc.top;ctx.lineWidth=bw.top;ctx.beginPath();ctx.moveTo(0-bw.left,0-bw.top/2);ctx.lineTo(plotWidth,0-bw.top/2);ctx.stroke()}if(bw.right>0){ctx.strokeStyle=bc.right;ctx.lineWidth=bw.right;ctx.beginPath();ctx.moveTo(plotWidth+bw.right/2,0-bw.top);ctx.lineTo(plotWidth+bw.right/2,plotHeight);ctx.stroke()}if(bw.bottom>0){ctx.strokeStyle=bc.bottom;ctx.lineWidth=bw.bottom;ctx.beginPath();ctx.moveTo(plotWidth+bw.right,plotHeight+bw.bottom/2);ctx.lineTo(0,plotHeight+bw.bottom/2);ctx.stroke()}if(bw.left>0){ctx.strokeStyle=bc.left;ctx.lineWidth=bw.left;ctx.beginPath();ctx.moveTo(0-bw.left/2,plotHeight+bw.bottom);ctx.lineTo(0-bw.left/2,0);ctx.stroke()}}else{ctx.lineWidth=bw;ctx.strokeStyle=options.grid.borderColor;ctx.strokeRect(-bw/2,-bw/2,plotWidth+bw,plotHeight+bw)}}ctx.restore()}function drawAxisLabels(){$.each(allAxes(),function(_,axis){var box=axis.box,legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=axis.options.font||"flot-tick-label tickLabel",tick,x,y,halign,valign;surface.removeText(layer);if(!axis.show||axis.ticks.length==0)return;for(var i=0;i<axis.ticks.length;++i){tick=axis.ticks[i];if(!tick.label||tick.v<axis.min||tick.v>axis.max)continue;if(axis.direction=="x"){halign="center";x=plotOffset.left+axis.p2c(tick.v);if(axis.position=="bottom"){y=box.top+box.padding}else{y=box.top+box.height-box.padding;valign="bottom"}}else{valign="middle";y=plotOffset.top+axis.p2c(tick.v);if(axis.position=="left"){x=box.left+box.width-box.padding;halign="right"}else{x=box.left+box.padding}}surface.addText(layer,x,y,tick.label,font,null,null,halign,valign)}})}function drawSeries(series){if(series.lines.show)drawSeriesLines(series);if(series.bars.show)drawSeriesBars(series);if(series.points.show)drawSeriesPoints(series)}function drawSeriesLines(series){function plotLine(datapoints,xoffset,yoffset,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,prevx=null,prevy=null;ctx.beginPath();for(var i=ps;i<points.length;i+=ps){var x1=points[i-ps],y1=points[i-ps+1],x2=points[i],y2=points[i+1];if(x1==null||x2==null)continue;if(y1<=y2&&y1<axisy.min){if(y2<axisy.min)continue;x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min}else if(y2<=y1&&y2<axisy.min){if(y1<axisy.min)continue;x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min}if(y1>=y2&&y1>axisy.max){if(y2>axisy.max)continue;x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max}else if(y2>=y1&&y2>axisy.max){if(y1>axisy.max)continue;x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max}if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max}if(x1!=prevx||y1!=prevy)ctx.moveTo(axisx.p2c(x1)+xoffset,axisy.p2c(y1)+yoffset);prevx=x2;prevy=y2;ctx.lineTo(axisx.p2c(x2)+xoffset,axisy.p2c(y2)+yoffset)}ctx.stroke()}function plotLineArea(datapoints,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,bottom=Math.min(Math.max(0,axisy.min),axisy.max),i=0,top,areaOpen=false,ypos=1,segmentStart=0,segmentEnd=0;while(true){if(ps>0&&i>points.length+ps)break;i+=ps;var x1=points[i-ps],y1=points[i-ps+ypos],x2=points[i],y2=points[i+ypos];if(areaOpen){if(ps>0&&x1!=null&&x2==null){segmentEnd=i;ps=-ps;ypos=2;continue}if(ps<0&&i==segmentStart+ps){ctx.fill();areaOpen=false;ps=-ps;ypos=1;i=segmentStart=segmentEnd+ps;continue}}if(x1==null||x2==null)continue;if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max}if(!areaOpen){ctx.beginPath();ctx.moveTo(axisx.p2c(x1),axisy.p2c(bottom));areaOpen=true}if(y1>=axisy.max&&y2>=axisy.max){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.max));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.max));continue}else if(y1<=axisy.min&&y2<=axisy.min){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.min));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.min));continue}var x1old=x1,x2old=x2;if(y1<=y2&&y1<axisy.min&&y2>=axisy.min){x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min}else if(y2<=y1&&y2<axisy.min&&y1>=axisy.min){x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min}if(y1>=y2&&y1>axisy.max&&y2<=axisy.max){x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max}else if(y2>=y1&&y2>axisy.max&&y1<=axisy.max){x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max}if(x1!=x1old){ctx.lineTo(axisx.p2c(x1old),axisy.p2c(y1))}ctx.lineTo(axisx.p2c(x1),axisy.p2c(y1));ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));if(x2!=x2old){ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));ctx.lineTo(axisx.p2c(x2old),axisy.p2c(y2))}}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineJoin="round";var lw=series.lines.lineWidth,sw=series.shadowSize;if(lw>0&&sw>0){ctx.lineWidth=sw;ctx.strokeStyle="rgba(0,0,0,0.1)";var angle=Math.PI/18;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/2),Math.cos(angle)*(lw/2+sw/2),series.xaxis,series.yaxis);ctx.lineWidth=sw/2;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/4),Math.cos(angle)*(lw/2+sw/4),series.xaxis,series.yaxis)}ctx.lineWidth=lw;ctx.strokeStyle=series.color;var fillStyle=getFillStyle(series.lines,series.color,0,plotHeight);if(fillStyle){ctx.fillStyle=fillStyle;plotLineArea(series.datapoints,series.xaxis,series.yaxis)}if(lw>0)plotLine(series.datapoints,0,0,series.xaxis,series.yaxis);ctx.restore()}function drawSeriesPoints(series){function plotPoints(datapoints,radius,fillStyle,offset,shadow,axisx,axisy,symbol){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){var x=points[i],y=points[i+1];if(x==null||x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)continue;ctx.beginPath();x=axisx.p2c(x);y=axisy.p2c(y)+offset;if(symbol=="circle")ctx.arc(x,y,radius,0,shadow?Math.PI:Math.PI*2,false);else symbol(ctx,x,y,radius,shadow);ctx.closePath();if(fillStyle){ctx.fillStyle=fillStyle;ctx.fill()}ctx.stroke()}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var lw=series.points.lineWidth,sw=series.shadowSize,radius=series.points.radius,symbol=series.points.symbol;if(lw==0)lw=1e-4;if(lw>0&&sw>0){var w=sw/2;ctx.lineWidth=w;ctx.strokeStyle="rgba(0,0,0,0.1)";plotPoints(series.datapoints,radius,null,w+w/2,true,series.xaxis,series.yaxis,symbol);ctx.strokeStyle="rgba(0,0,0,0.2)";plotPoints(series.datapoints,radius,null,w/2,true,series.xaxis,series.yaxis,symbol)}ctx.lineWidth=lw;ctx.strokeStyle=series.color;plotPoints(series.datapoints,radius,getFillStyle(series.points,series.color),0,false,series.xaxis,series.yaxis,symbol);ctx.restore()}function drawBar(x,y,b,barLeft,barRight,fillStyleCallback,axisx,axisy,c,horizontal,lineWidth){var left,right,bottom,top,drawLeft,drawRight,drawTop,drawBottom,tmp;if(horizontal){drawBottom=drawRight=drawTop=true;drawLeft=false;left=b;right=x;top=y+barLeft;bottom=y+barRight;if(right<left){tmp=right;right=left;left=tmp;drawLeft=true;drawRight=false}}else{drawLeft=drawRight=drawTop=true;drawBottom=false;left=x+barLeft;right=x+barRight;bottom=b;top=y;if(top<bottom){tmp=top;top=bottom;bottom=tmp;drawBottom=true;drawTop=false}}if(right<axisx.min||left>axisx.max||top<axisy.min||bottom>axisy.max)return;if(left<axisx.min){left=axisx.min;drawLeft=false}if(right>axisx.max){right=axisx.max;drawRight=false}if(bottom<axisy.min){bottom=axisy.min;drawBottom=false}if(top>axisy.max){top=axisy.max;drawTop=false}left=axisx.p2c(left);bottom=axisy.p2c(bottom);right=axisx.p2c(right);top=axisy.p2c(top);if(fillStyleCallback){c.fillStyle=fillStyleCallback(bottom,top);c.fillRect(left,top,right-left,bottom-top)}if(lineWidth>0&&(drawLeft||drawRight||drawTop||drawBottom)){c.beginPath();c.moveTo(left,bottom);if(drawLeft)c.lineTo(left,top);else c.moveTo(left,top);if(drawTop)c.lineTo(right,top);else c.moveTo(right,top);if(drawRight)c.lineTo(right,bottom);else c.moveTo(right,bottom);if(drawBottom)c.lineTo(left,bottom);else c.moveTo(left,bottom);c.stroke()}}function drawSeriesBars(series){function plotBars(datapoints,barLeft,barRight,fillStyleCallback,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){if(points[i]==null)continue;drawBar(points[i],points[i+1],points[i+2],barLeft,barRight,fillStyleCallback,axisx,axisy,ctx,series.bars.horizontal,series.bars.lineWidth)}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineWidth=series.bars.lineWidth;ctx.strokeStyle=series.color;var barLeft;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}var fillStyleCallback=series.bars.fill?function(bottom,top){return getFillStyle(series.bars,series.color,bottom,top)}:null;plotBars(series.datapoints,barLeft,barLeft+series.bars.barWidth,fillStyleCallback,series.xaxis,series.yaxis);ctx.restore()}function getFillStyle(filloptions,seriesColor,bottom,top){var fill=filloptions.fill;if(!fill)return null;if(filloptions.fillColor)return getColorOrGradient(filloptions.fillColor,bottom,top,seriesColor);var c=$.color.parse(seriesColor);c.a=typeof fill=="number"?fill:.4;c.normalize();return c.toString()}function insertLegend(){if(options.legend.container!=null){$(options.legend.container).html("")}else{placeholder.find(".legend").remove()}if(!options.legend.show){return}var fragments=[],entries=[],rowStarted=false,lf=options.legend.labelFormatter,s,label;for(var i=0;i<series.length;++i){s=series[i];if(s.label){label=lf?lf(s.label,s):s.label;if(label){entries.push({label:label,color:s.color})}}}if(options.legend.sorted){if($.isFunction(options.legend.sorted)){entries.sort(options.legend.sorted)}else if(options.legend.sorted=="reverse"){entries.reverse()}else{var ascending=options.legend.sorted!="descending";entries.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=ascending?1:-1})}}for(var i=0;i<entries.length;++i){var entry=entries[i];if(i%options.legend.noColumns==0){if(rowStarted)fragments.push("</tr>");fragments.push("<tr>");rowStarted=true}fragments.push('<td class="legendColorBox"><div style="border:1px solid '+options.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+entry.color+';overflow:hidden"></div></div></td>'+'<td class="legendLabel" data-test-subj="flotLegendLabel">'+entry.label+"</td>")}if(rowStarted)fragments.push("</tr>");if(fragments.length==0)return;var table='<table style="font-size:smaller;color:'+options.grid.color+'">'+fragments.join("")+"</table>";if(options.legend.container!=null)$(options.legend.container).html(table);else{var pos="",p=options.legend.position,m=options.legend.margin;if(m[0]==null)m=[m,m];if(p.charAt(0)=="n")pos+="top:"+(m[1]+plotOffset.top)+"px;";else if(p.charAt(0)=="s")pos+="bottom:"+(m[1]+plotOffset.bottom)+"px;";if(p.charAt(1)=="e")pos+="right:"+(m[0]+plotOffset.right)+"px;";else if(p.charAt(1)=="w")pos+="left:"+(m[0]+plotOffset.left)+"px;";var legend=$('<div class="legend">'+table.replace('style="','style="position:absolute;'+pos+";")+"</div>").appendTo(placeholder);if(options.legend.backgroundOpacity!=0){var c=options.legend.backgroundColor;if(c==null){c=options.grid.backgroundColor;if(c&&typeof c=="string")c=$.color.parse(c);else c=$.color.extract(legend,"background-color");c.a=1;c=c.toString()}var div=legend.children();$('<div style="position:absolute;width:'+div.width()+"px;height:"+div.height()+"px;"+pos+"background-color:"+c+';"> </div>').prependTo(legend).css("opacity",options.legend.backgroundOpacity)}}}var highlights=[],redrawTimeout=null;function findNearbyItem(mouseX,mouseY,seriesFilter){var maxDistance=options.grid.mouseActiveRadius,smallestDistance=maxDistance*maxDistance+1,item=null,foundPoint=false,i,j,ps;for(i=series.length-1;i>=0;--i){if(!seriesFilter(series[i]))continue;var s=series[i],axisx=s.xaxis,axisy=s.yaxis,points=s.datapoints.points,mx=axisx.c2p(mouseX),my=axisy.c2p(mouseY),maxx=maxDistance/axisx.scale,maxy=maxDistance/axisy.scale;ps=s.datapoints.pointsize;if(axisx.options.inverseTransform)maxx=Number.MAX_VALUE;if(axisy.options.inverseTransform)maxy=Number.MAX_VALUE;if(s.lines.show||s.points.show){for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1];if(x==null)continue;if(x-mx>maxx||x-mx<-maxx||y-my>maxy||y-my<-maxy)continue;var dx=Math.abs(axisx.p2c(x)-mouseX),dy=Math.abs(axisy.p2c(y)-mouseY),dist=dx*dx+dy*dy;if(dist<smallestDistance){smallestDistance=dist;item=[i,j/ps]}}}if(s.bars.show&&!item){var barLeft,barRight;switch(s.bars.align){case"left":barLeft=0;break;case"right":barLeft=-s.bars.barWidth;break;default:barLeft=-s.bars.barWidth/2}barRight=barLeft+s.bars.barWidth;for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1],b=points[j+2];if(x==null)continue;if(series[i].bars.horizontal?mx<=Math.max(b,x)&&mx>=Math.min(b,x)&&my>=y+barLeft&&my<=y+barRight:mx>=x+barLeft&&mx<=x+barRight&&my>=Math.min(b,y)&&my<=Math.max(b,y))item=[i,j/ps]}}}if(item){i=item[0];j=item[1];ps=series[i].datapoints.pointsize;return{datapoint:series[i].datapoints.points.slice(j*ps,(j+1)*ps),dataIndex:j,series:series[i],seriesIndex:i}}return null}function onMouseMove(e){if(options.grid.hoverable)triggerClickHoverEvent("plothover",e,function(s){return s["hoverable"]!=false})}function onMouseLeave(e){if(options.grid.hoverable)triggerClickHoverEvent("plothover",e,function(s){return false})}function onClick(e){triggerClickHoverEvent("plotclick",e,function(s){return s["clickable"]!=false})}function triggerClickHoverEvent(eventname,event,seriesFilter){var offset=eventHolder.offset(),canvasX=event.pageX-offset.left-plotOffset.left,canvasY=event.pageY-offset.top-plotOffset.top,pos=canvasToAxisCoords({left:canvasX,top:canvasY});pos.pageX=event.pageX;pos.pageY=event.pageY;var item=findNearbyItem(canvasX,canvasY,seriesFilter);if(item){item.pageX=parseInt(item.series.xaxis.p2c(item.datapoint[0])+offset.left+plotOffset.left,10);item.pageY=parseInt(item.series.yaxis.p2c(item.datapoint[1])+offset.top+plotOffset.top,10)}if(options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.auto==eventname&&!(item&&h.series==item.series&&h.point[0]==item.datapoint[0]&&h.point[1]==item.datapoint[1]))unhighlight(h.series,h.point)}if(item)highlight(item.series,item.datapoint,eventname)}placeholder.trigger(eventname,[pos,item])}function triggerRedrawOverlay(){var t=options.interaction.redrawOverlayInterval;if(t==-1){drawOverlay();return}if(!redrawTimeout)redrawTimeout=setTimeout(drawOverlay,t)}function drawOverlay(){redrawTimeout=null;octx.save();overlay.clear();octx.translate(plotOffset.left,plotOffset.top);var i,hi;for(i=0;i<highlights.length;++i){hi=highlights[i];if(hi.series.bars.show)drawBarHighlight(hi.series,hi.point);else drawPointHighlight(hi.series,hi.point)}octx.restore();executeHooks(hooks.drawOverlay,[octx])}function highlight(s,point,auto){if(typeof s=="number")s=series[s];if(typeof point=="number"){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);if(i==-1){highlights.push({series:s,point:point,auto:auto});triggerRedrawOverlay()}else if(!auto)highlights[i].auto=false}function unhighlight(s,point){if(s==null&&point==null){highlights=[];triggerRedrawOverlay();return}if(typeof s=="number")s=series[s];if(typeof point=="number"){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);if(i!=-1){highlights.splice(i,1);triggerRedrawOverlay()}}function indexOfHighlight(s,p){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s&&h.point[0]==p[0]&&h.point[1]==p[1])return i}return-1}function drawPointHighlight(series,point){var x=point[0],y=point[1],axisx=series.xaxis,axisy=series.yaxis,highlightColor=typeof series.highlightColor==="string"?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString();if(x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)return;var pointRadius=series.points.radius+series.points.lineWidth/2;octx.lineWidth=pointRadius;octx.strokeStyle=highlightColor;var radius=1.5*pointRadius;x=axisx.p2c(x);y=axisy.p2c(y);octx.beginPath();if(series.points.symbol=="circle")octx.arc(x,y,radius,0,2*Math.PI,false);else series.points.symbol(octx,x,y,radius,false);octx.closePath();octx.stroke()}function drawBarHighlight(series,point){var highlightColor=typeof series.highlightColor==="string"?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString(),fillStyle=highlightColor,barLeft;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}octx.lineWidth=series.bars.lineWidth;octx.strokeStyle=highlightColor;drawBar(point[0],point[1],point[2]||0,barLeft,barLeft+series.bars.barWidth,function(){return fillStyle},series.xaxis,series.yaxis,octx,series.bars.horizontal,series.bars.lineWidth)}function getColorOrGradient(spec,bottom,top,defaultColor){if(typeof spec=="string")return spec;else{var gradient=ctx.createLinearGradient(0,top,0,bottom);for(var i=0,l=spec.colors.length;i<l;++i){var c=spec.colors[i];if(typeof c!="string"){var co=$.color.parse(defaultColor);if(c.brightness!=null)co=co.scale("rgb",c.brightness);if(c.opacity!=null)co.a*=c.opacity;c=co.toString()}gradient.addColorStop(i/(l-1),c)}return gradient}}}$.plot=function(placeholder,data,options){var plot=new Plot($(placeholder),data,options,$.plot.plugins);return plot};$.plot.version="0.8.3";$.plot.plugins=[];$.fn.plot=function(data,options){return this.each(function(){$.plot(this,data,options)})};function floorInBase(n,base){return base*Math.floor(n/base)}})(jQuery)},function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(2);(function($){var options={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function floorInBase(n,base){return base*Math.floor(n/base)}function formatDate(d,fmt,monthNames,dayNames){if(typeof d.strftime=="function"){return d.strftime(fmt)}var leftPad=function leftPad(n,pad){n=""+n;pad=""+(pad==null?"0":pad);return n.length==1?pad+n:n};var r=[];var escape=false;var hours=d.getHours();var isAM=hours<12;if(monthNames==null){monthNames=[_i18n.i18n.translate("common.ui.flotCharts.janLabel",{defaultMessage:"Jan"}),_i18n.i18n.translate("common.ui.flotCharts.febLabel",{defaultMessage:"Feb"}),_i18n.i18n.translate("common.ui.flotCharts.marLabel",{defaultMessage:"Mar"}),_i18n.i18n.translate("common.ui.flotCharts.aprLabel",{defaultMessage:"Apr"}),_i18n.i18n.translate("common.ui.flotCharts.mayLabel",{defaultMessage:"May"}),_i18n.i18n.translate("common.ui.flotCharts.junLabel",{defaultMessage:"Jun"}),_i18n.i18n.translate("common.ui.flotCharts.julLabel",{defaultMessage:"Jul"}),_i18n.i18n.translate("common.ui.flotCharts.augLabel",{defaultMessage:"Aug"}),_i18n.i18n.translate("common.ui.flotCharts.sepLabel",{defaultMessage:"Sep"}),_i18n.i18n.translate("common.ui.flotCharts.octLabel",{defaultMessage:"Oct"}),_i18n.i18n.translate("common.ui.flotCharts.novLabel",{defaultMessage:"Nov"}),_i18n.i18n.translate("common.ui.flotCharts.decLabel",{defaultMessage:"Dec"})]}if(dayNames==null){dayNames=[_i18n.i18n.translate("common.ui.flotCharts.sunLabel",{defaultMessage:"Sun"}),_i18n.i18n.translate("common.ui.flotCharts.monLabel",{defaultMessage:"Mon"}),_i18n.i18n.translate("common.ui.flotCharts.tueLabel",{defaultMessage:"Tue"}),_i18n.i18n.translate("common.ui.flotCharts.wedLabel",{defaultMessage:"Wed"}),_i18n.i18n.translate("common.ui.flotCharts.thuLabel",{defaultMessage:"Thu"}),_i18n.i18n.translate("common.ui.flotCharts.friLabel",{defaultMessage:"Fri"}),_i18n.i18n.translate("common.ui.flotCharts.satLabel",{defaultMessage:"Sat"})]}var hours12;if(hours>12){hours12=hours-12}else if(hours==0){hours12=12}else{hours12=hours}for(var i=0;i<fmt.length;++i){var c=fmt.charAt(i);if(escape){switch(c){case"a":c=""+dayNames[d.getDay()];break;case"b":c=""+monthNames[d.getMonth()];break;case"d":c=leftPad(d.getDate());break;case"e":c=leftPad(d.getDate()," ");break;case"h":case"H":c=leftPad(hours);break;case"I":c=leftPad(hours12);break;case"l":c=leftPad(hours12," ");break;case"m":c=leftPad(d.getMonth()+1);break;case"M":c=leftPad(d.getMinutes());break;case"q":c=""+(Math.floor(d.getMonth()/3)+1);break;case"S":c=leftPad(d.getSeconds());break;case"y":c=leftPad(d.getFullYear()%100);break;case"Y":c=""+d.getFullYear();break;case"p":c=isAM?""+"am":""+"pm";break;case"P":c=isAM?""+"AM":""+"PM";break;case"w":c=""+d.getDay();break}r.push(c);escape=false}else{if(c=="%"){escape=true}else{r.push(c)}}}return r.join("")}function makeUtcWrapper(d){function addProxyMethod(sourceObj,sourceMethod,targetObj,targetMethod){sourceObj[sourceMethod]=function(){return targetObj[targetMethod].apply(targetObj,arguments)}}var utc={date:d};if(d.strftime!=undefined){addProxyMethod(utc,"strftime",d,"strftime")}addProxyMethod(utc,"getTime",d,"getTime");addProxyMethod(utc,"setTime",d,"setTime");var props=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var p=0;p<props.length;p++){addProxyMethod(utc,"get"+props[p],d,"getUTC"+props[p]);addProxyMethod(utc,"set"+props[p],d,"setUTC"+props[p])}return utc}function dateGenerator(ts,opts){if(opts.timezone=="browser"){return new Date(ts)}else if(!opts.timezone||opts.timezone=="utc"){return makeUtcWrapper(new Date(ts))}else if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var d=new timezoneJS.Date;d.setTimezone(opts.timezone);d.setTime(ts);return d}else{return makeUtcWrapper(new Date(ts))}}var timeUnitSize={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3};var baseSpec=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]];var specMonths=baseSpec.concat([[3,"month"],[6,"month"],[1,"year"]]);var specQuarters=baseSpec.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function init(plot){plot.hooks.processOptions.push(function(plot,options){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;if(opts.mode=="time"){axis.tickGenerator=function(axis){var ticks=[];var d=dateGenerator(axis.min,opts);var minSize=0;var spec=opts.tickSize&&opts.tickSize[1]==="quarter"||opts.minTickSize&&opts.minTickSize[1]==="quarter"?specQuarters:specMonths;if(opts.minTickSize!=null){if(typeof opts.tickSize=="number"){minSize=opts.tickSize}else{minSize=opts.minTickSize[0]*timeUnitSize[opts.minTickSize[1]]}}for(var i=0;i<spec.length-1;++i){if(axis.delta<(spec[i][0]*timeUnitSize[spec[i][1]]+spec[i+1][0]*timeUnitSize[spec[i+1][1]])/2&&spec[i][0]*timeUnitSize[spec[i][1]]>=minSize){break}}var size=spec[i][0];var unit=spec[i][1];if(unit=="year"){if(opts.minTickSize!=null&&opts.minTickSize[1]=="year"){size=Math.floor(opts.minTickSize[0])}else{var magn=Math.pow(10,Math.floor(Math.log(axis.delta/timeUnitSize.year)/Math.LN10));var norm=axis.delta/timeUnitSize.year/magn;if(norm<1.5){size=1}else if(norm<3){size=2}else if(norm<7.5){size=5}else{size=10}size*=magn}if(size<1){size=1}}axis.tickSize=opts.tickSize||[size,unit];var tickSize=axis.tickSize[0];unit=axis.tickSize[1];var step=tickSize*timeUnitSize[unit];if(unit=="second"){d.setSeconds(floorInBase(d.getSeconds(),tickSize))}else if(unit=="minute"){d.setMinutes(floorInBase(d.getMinutes(),tickSize))}else if(unit=="hour"){d.setHours(floorInBase(d.getHours(),tickSize))}else if(unit=="month"){d.setMonth(floorInBase(d.getMonth(),tickSize))}else if(unit=="quarter"){d.setMonth(3*floorInBase(d.getMonth()/3,tickSize))}else if(unit=="year"){d.setFullYear(floorInBase(d.getFullYear(),tickSize))}d.setMilliseconds(0);if(step>=timeUnitSize.minute){d.setSeconds(0)}if(step>=timeUnitSize.hour){d.setMinutes(0)}if(step>=timeUnitSize.day){d.setHours(0)}if(step>=timeUnitSize.day*4){d.setDate(1)}if(step>=timeUnitSize.month*2){d.setMonth(floorInBase(d.getMonth(),3))}if(step>=timeUnitSize.quarter*2){d.setMonth(floorInBase(d.getMonth(),6))}if(step>=timeUnitSize.year){d.setMonth(0)}var carry=0;var v=Number.NaN;var prev;do{prev=v;v=d.getTime();ticks.push(v);if(unit=="month"||unit=="quarter"){if(tickSize<1){d.setDate(1);var start=d.getTime();d.setMonth(d.getMonth()+(unit=="quarter"?3:1));var end=d.getTime();d.setTime(v+carry*timeUnitSize.hour+(end-start)*tickSize);carry=d.getHours();d.setHours(0)}else{d.setMonth(d.getMonth()+tickSize*(unit=="quarter"?3:1))}}else if(unit=="year"){d.setFullYear(d.getFullYear()+tickSize)}else{d.setTime(v+step)}}while(v<axis.max&&v!=prev);return ticks};axis.tickFormatter=function(v,axis){var d=dateGenerator(v,axis.options);if(opts.timeformat!=null){return formatDate(d,opts.timeformat,opts.monthNames,opts.dayNames)}var useQuarters=axis.options.tickSize&&axis.options.tickSize[1]=="quarter"||axis.options.minTickSize&&axis.options.minTickSize[1]=="quarter";var t=axis.tickSize[0]*timeUnitSize[axis.tickSize[1]];var span=axis.max-axis.min;var suffix=opts.twelveHourClock?" %p":"";var hourCode=opts.twelveHourClock?"%I":"%H";var fmt;if(t<timeUnitSize.minute){fmt=hourCode+":%M:%S"+suffix}else if(t<timeUnitSize.day){if(span<2*timeUnitSize.day){fmt=hourCode+":%M"+suffix}else{fmt="%b %d "+hourCode+":%M"+suffix}}else if(t<timeUnitSize.month){fmt="%b %d"}else if(useQuarters&&t<timeUnitSize.quarter||!useQuarters&&t<timeUnitSize.year){if(span<timeUnitSize.year){fmt="%b"}else{fmt="%b %Y"}}else if(useQuarters&&t<timeUnitSize.year){if(span<timeUnitSize.year){fmt="Q%q"}else{fmt="Q%q %Y"}}else{fmt="%Y"}var rt=formatDate(d,fmt,opts.monthNames,opts.dayNames);return rt}}})})}$.plot.plugins.push({init:init,options:options,name:"time",version:"1.0"});$.plot.formatDate=formatDate;$.plot.dateGenerator=dateGenerator})(jQuery)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function($){var options={canvas:true};var render,getTextInfo,addText;var hasOwnProperty=Object.prototype.hasOwnProperty;function init(plot,classes){var Canvas=classes.Canvas;if(render==null){getTextInfo=Canvas.prototype.getTextInfo,addText=Canvas.prototype.addText,render=Canvas.prototype.render}Canvas.prototype.render=function(){if(!plot.getOptions().canvas){return render.call(this)}var context=this.context,cache=this._textCache;context.save();context.textBaseline="middle";for(var layerKey in cache){if(hasOwnProperty.call(cache,layerKey)){var layerCache=cache[layerKey];for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey],updateStyles=true;for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var info=styleCache[key],positions=info.positions,lines=info.lines;if(updateStyles){context.fillStyle=info.font.color;context.font=info.font.definition;updateStyles=false}for(var i=0,position;position=positions[i];i++){if(position.active){for(var j=0,line;line=position.lines[j];j++){context.fillText(lines[j].text,line[0],line[1])}}else{positions.splice(i--,1)}}if(positions.length==0){delete styleCache[key]}}}}}}}context.restore()};Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){if(!plot.getOptions().canvas){return getTextInfo.call(this,layer,text,font,angle,width)}var textStyle,layerCache,styleCache,info;text=""+text;if(_typeof(font)==="object"){textStyle=font.style+" "+font.variant+" "+font.weight+" "+font.size+"px "+font.family}else{textStyle=font}layerCache=this._textCache[layer];if(layerCache==null){layerCache=this._textCache[layer]={}}styleCache=layerCache[textStyle];if(styleCache==null){styleCache=layerCache[textStyle]={}}info=styleCache[text];if(info==null){var context=this.context;if(_typeof(font)!=="object"){var element=$("<div>&nbsp;</div>").css("position","absolute").addClass(typeof font==="string"?font:null).appendTo(this.getTextLayer(layer));font={lineHeight:element.height(),style:element.css("font-style"),variant:element.css("font-variant"),weight:element.css("font-weight"),family:element.css("font-family"),color:element.css("color")};font.size=element.css("line-height",1).height();element.remove()}textStyle=font.style+" "+font.variant+" "+font.weight+" "+font.size+"px "+font.family;info=styleCache[text]={width:0,height:0,positions:[],lines:[],font:{definition:textStyle,color:font.color}};context.save();context.font=textStyle;var lines=(text+"").replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n");for(var i=0;i<lines.length;++i){var lineText=lines[i],measured=context.measureText(lineText);info.width=Math.max(measured.width,info.width);info.height+=font.lineHeight;info.lines.push({text:lineText,width:measured.width,height:font.lineHeight})}context.restore()}return info};Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){if(!plot.getOptions().canvas){return addText.call(this,layer,x,y,text,font,angle,width,halign,valign)}var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions,lines=info.lines;y+=info.height/lines.length/2;if(valign=="middle"){y=Math.round(y-info.height/2)}else if(valign=="bottom"){y=Math.round(y-info.height)}else{y=Math.round(y)}if(!!(window.opera&&window.opera.version().split(".")[0]<12)){y-=2}for(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=true;return}}position={active:true,lines:[],x:x,y:y};positions.push(position);for(var i=0,line;line=lines[i];i++){if(halign=="center"){position.lines.push([Math.round(x-line.width/2),y])}else if(halign=="right"){position.lines.push([Math.round(x-line.width),y])}else{position.lines.push([Math.round(x),y])}y+=line.height}}}$.plot.plugins.push({init:init,options:options,name:"canvas",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){function processRawData(plot,series,datapoints){var handlers={square:function square(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI)/2;ctx.rect(x-size,y-size,size+size,size+size)},diamond:function diamond(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI/2);ctx.moveTo(x-size,y);ctx.lineTo(x,y-size);ctx.lineTo(x+size,y);ctx.lineTo(x,y+size);ctx.lineTo(x-size,y)},triangle:function triangle(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3));var height=size*Math.sin(Math.PI/3);ctx.moveTo(x-size/2,y+height/2);ctx.lineTo(x+size/2,y+height/2);if(!shadow){ctx.lineTo(x,y-height/2);ctx.lineTo(x-size/2,y+height/2)}},cross:function cross(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI)/2;ctx.moveTo(x-size,y-size);ctx.lineTo(x+size,y+size);ctx.moveTo(x-size,y+size);ctx.lineTo(x+size,y-size)}};var s=series.points.symbol;if(handlers[s])series.points.symbol=handlers[s]}function init(plot){plot.hooks.processDatapoints.push(processRawData)}$.plot.plugins.push({init:init,name:"symbols",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function init(plot){var crosshair={x:-1,y:-1,locked:false};plot.setCrosshair=function setCrosshair(pos){if(!pos)crosshair.x=-1;else{var o=plot.p2c(pos);crosshair.x=Math.max(0,Math.min(o.left,plot.width()));crosshair.y=Math.max(0,Math.min(o.top,plot.height()))}plot.triggerRedrawOverlay()};plot.clearCrosshair=plot.setCrosshair;plot.lockCrosshair=function lockCrosshair(pos){if(pos)plot.setCrosshair(pos);crosshair.locked=true};plot.unlockCrosshair=function unlockCrosshair(){crosshair.locked=false};function onMouseOut(e){if(crosshair.locked)return;if(crosshair.x!=-1){crosshair.x=-1;plot.triggerRedrawOverlay()}}function onMouseMove(e){if(crosshair.locked)return;if(plot.getSelection&&plot.getSelection()){crosshair.x=-1;return}var offset=plot.offset();crosshair.x=Math.max(0,Math.min(e.pageX-offset.left,plot.width()));crosshair.y=Math.max(0,Math.min(e.pageY-offset.top,plot.height()));plot.triggerRedrawOverlay()}plot.hooks.bindEvents.push(function(plot,eventHolder){if(!plot.getOptions().crosshair.mode)return;eventHolder.mouseout(onMouseOut);eventHolder.mousemove(onMouseMove)});plot.hooks.drawOverlay.push(function(plot,ctx){var c=plot.getOptions().crosshair;if(!c.mode)return;var plotOffset=plot.getPlotOffset();ctx.save();ctx.translate(plotOffset.left,plotOffset.top);if(crosshair.x!=-1){var adj=plot.getOptions().crosshair.lineWidth%2?.5:0;ctx.strokeStyle=c.color;ctx.lineWidth=c.lineWidth;ctx.lineJoin="round";ctx.beginPath();if(c.mode.indexOf("x")!=-1){var drawX=Math.floor(crosshair.x)+adj;ctx.moveTo(drawX,0);ctx.lineTo(drawX,plot.height())}if(c.mode.indexOf("y")!=-1){var drawY=Math.floor(crosshair.y)+adj;ctx.moveTo(0,drawY);ctx.lineTo(plot.width(),drawY)}ctx.stroke()}ctx.restore()});plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mouseout",onMouseOut);eventHolder.unbind("mousemove",onMouseMove)})}$.plot.plugins.push({init:init,options:options,name:"crosshair",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){function init(plot){var selection={first:{x:-1,y:-1},second:{x:-1,y:-1},show:false,active:false};var savedhandlers={};var mouseUpHandler=null;function onMouseMove(e){if(selection.active){updateSelection(e);plot.getPlaceholder().trigger("plotselecting",[getSelection()])}}function onMouseDown(e){if(e.which!=1)return;document.body.focus();if(document.onselectstart!==undefined&&savedhandlers.onselectstart==null){savedhandlers.onselectstart=document.onselectstart;document.onselectstart=function(){return false}}if(document.ondrag!==undefined&&savedhandlers.ondrag==null){savedhandlers.ondrag=document.ondrag;document.ondrag=function(){return false}}setSelectionPos(selection.first,e);selection.active=true;mouseUpHandler=function mouseUpHandler(e){onMouseUp(e)};$(document).one("mouseup",mouseUpHandler)}function onMouseUp(e){mouseUpHandler=null;if(document.onselectstart!==undefined)document.onselectstart=savedhandlers.onselectstart;if(document.ondrag!==undefined)document.ondrag=savedhandlers.ondrag;selection.active=false;updateSelection(e);if(selectionIsSane())triggerSelectedEvent();else{plot.getPlaceholder().trigger("plotunselected",[]);plot.getPlaceholder().trigger("plotselecting",[null])}return false}function getSelection(){if(!selectionIsSane())return null;if(!selection.show)return null;var r={},c1=selection.first,c2=selection.second;$.each(plot.getAxes(),function(name,axis){if(axis.used){var p1=axis.c2p(c1[axis.direction]),p2=axis.c2p(c2[axis.direction]);r[name]={from:Math.min(p1,p2),to:Math.max(p1,p2)}}});return r}function triggerSelectedEvent(){var r=getSelection();plot.getPlaceholder().trigger("plotselected",[r]);if(r.xaxis&&r.yaxis)plot.getPlaceholder().trigger("selected",[{x1:r.xaxis.from,y1:r.yaxis.from,x2:r.xaxis.to,y2:r.yaxis.to}])}function clamp(min,value,max){return value<min?min:value>max?max:value}function setSelectionPos(pos,e){var o=plot.getOptions();var offset=plot.getPlaceholder().offset();var plotOffset=plot.getPlotOffset();pos.x=clamp(0,e.pageX-offset.left-plotOffset.left,plot.width());pos.y=clamp(0,e.pageY-offset.top-plotOffset.top,plot.height());if(o.selection.mode=="y")pos.x=pos==selection.first?0:plot.width();if(o.selection.mode=="x")pos.y=pos==selection.first?0:plot.height()}function updateSelection(pos){if(pos.pageX==null)return;setSelectionPos(selection.second,pos);if(selectionIsSane()){selection.show=true;plot.triggerRedrawOverlay()}else clearSelection(true)}function clearSelection(preventEvent){if(selection.show){selection.show=false;plot.triggerRedrawOverlay();if(!preventEvent)plot.getPlaceholder().trigger("plotunselected",[])}}function extractRange(ranges,coord){var axis,from,to,key,axes=plot.getAxes();for(var k in axes){axis=axes[k];if(axis.direction==coord){key=coord+axis.n+"axis";if(!ranges[key]&&axis.n==1)key=coord+"axis";if(ranges[key]){from=ranges[key].from;to=ranges[key].to;break}}}if(!ranges[key]){axis=coord=="x"?plot.getXAxes()[0]:plot.getYAxes()[0];from=ranges[coord+"1"];to=ranges[coord+"2"]}if(from!=null&&to!=null&&from>to){var tmp=from;from=to;to=tmp}return{from:from,to:to,axis:axis}}function setSelection(ranges,preventEvent){var axis,range,o=plot.getOptions();if(o.selection.mode=="y"){selection.first.x=0;selection.second.x=plot.width()}else{range=extractRange(ranges,"x");selection.first.x=range.axis.p2c(range.from);selection.second.x=range.axis.p2c(range.to)}if(o.selection.mode=="x"){selection.first.y=0;selection.second.y=plot.height()}else{range=extractRange(ranges,"y");selection.first.y=range.axis.p2c(range.from);selection.second.y=range.axis.p2c(range.to)}selection.show=true;plot.triggerRedrawOverlay();if(!preventEvent&&selectionIsSane())triggerSelectedEvent()}function selectionIsSane(){var minSize=plot.getOptions().selection.minSize;return Math.abs(selection.second.x-selection.first.x)>=minSize&&Math.abs(selection.second.y-selection.first.y)>=minSize}plot.clearSelection=clearSelection;plot.setSelection=setSelection;plot.getSelection=getSelection;plot.hooks.bindEvents.push(function(plot,eventHolder){var o=plot.getOptions();if(o.selection.mode!=null){eventHolder.mousemove(onMouseMove);eventHolder.mousedown(onMouseDown)}});plot.hooks.drawOverlay.push(function(plot,ctx){if(selection.show&&selectionIsSane()){var plotOffset=plot.getPlotOffset();var o=plot.getOptions();ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var c=$.color.parse(o.selection.color);ctx.strokeStyle=c.scale("a",.8).toString();ctx.lineWidth=1;ctx.lineJoin=o.selection.shape;ctx.fillStyle=c.scale("a",.4).toString();var x=Math.min(selection.first.x,selection.second.x)+.5,y=Math.min(selection.first.y,selection.second.y)+.5,w=Math.abs(selection.second.x-selection.first.x)-1,h=Math.abs(selection.second.y-selection.first.y)-1;ctx.fillRect(x,y,w,h);ctx.strokeRect(x,y,w,h);ctx.restore()}});plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mousemove",onMouseMove);eventHolder.unbind("mousedown",onMouseDown);if(mouseUpHandler)$(document).unbind("mouseup",mouseUpHandler)})}$.plot.plugins.push({init:init,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(2);(function($){var REDRAW_ATTEMPTS=10;var REDRAW_SHRINK=.95;function init(plot){var canvas=null,target=null,options=null,maxRadius=null,centerLeft=null,centerTop=null,processed=false,ctx=null;var highlights=[];plot.hooks.processOptions.push(function(plot,options){if(options.series.pie.show){options.grid.show=false;if(options.series.pie.label.show=="auto"){if(options.legend.show){options.series.pie.label.show=false}else{options.series.pie.label.show=true}}if(options.series.pie.radius=="auto"){if(options.series.pie.label.show){options.series.pie.radius=3/4}else{options.series.pie.radius=1}}if(options.series.pie.tilt>1){options.series.pie.tilt=1}else if(options.series.pie.tilt<0){options.series.pie.tilt=0}}});plot.hooks.bindEvents.push(function(plot,eventHolder){var options=plot.getOptions();if(options.series.pie.show){if(options.grid.hoverable){eventHolder.unbind("mousemove").mousemove(onMouseMove)}if(options.grid.clickable){eventHolder.unbind("click").click(onClick)}}});plot.hooks.processDatapoints.push(function(plot,series,data,datapoints){var options=plot.getOptions();if(options.series.pie.show){processDatapoints(plot,series,data,datapoints)}});plot.hooks.drawOverlay.push(function(plot,octx){var options=plot.getOptions();if(options.series.pie.show){drawOverlay(plot,octx)}});plot.hooks.draw.push(function(plot,newCtx){var options=plot.getOptions();if(options.series.pie.show){draw(plot,newCtx)}});function processDatapoints(plot,series,datapoints){if(!processed){processed=true;canvas=plot.getCanvas();target=$(canvas).parent();options=plot.getOptions();plot.setData(combine(plot.getData()))}}function combine(data){var total=0,combined=0,numCombined=0,color=options.series.pie.combine.color,newdata=[];for(var i=0;i<data.length;++i){var value=data[i].data;if($.isArray(value)&&value.length==1){value=value[0]}if($.isArray(value)){if(!isNaN(parseFloat(value[1]))&&isFinite(value[1])){value[1]=+value[1]}else{value[1]=0}}else if(!isNaN(parseFloat(value))&&isFinite(value)){value=[1,+value]}else{value=[1,0]}data[i].data=[value]}for(var i=0;i<data.length;++i){total+=data[i].data[0][1]}for(var i=0;i<data.length;++i){var value=data[i].data[0][1];if(value/total<=options.series.pie.combine.threshold){combined+=value;numCombined++;if(!color){color=data[i].color}}}for(var i=0;i<data.length;++i){var value=data[i].data[0][1];if(numCombined<2||value/total>options.series.pie.combine.threshold){newdata.push($.extend(data[i],{data:[[1,value]],color:data[i].color,label:data[i].label,angle:value*Math.PI*2/total,percent:value/(total/100)}))}}if(numCombined>1){newdata.push({data:[[1,combined]],color:color,label:options.series.pie.combine.label,angle:combined*Math.PI*2/total,percent:combined/(total/100)})}return newdata}function draw(plot,newCtx){if(!target){return}var canvasWidth=plot.getPlaceholder().width(),canvasHeight=plot.getPlaceholder().height(),legendWidth=target.children().filter(".legend").children().width()||0;ctx=newCtx;processed=false;maxRadius=Math.min(canvasWidth,canvasHeight/options.series.pie.tilt)/2;centerTop=canvasHeight/2+options.series.pie.offset.top;centerLeft=canvasWidth/2;if(options.series.pie.offset.left=="auto"){if(options.legend.position.match("w")){centerLeft+=legendWidth/2}else{centerLeft-=legendWidth/2}if(centerLeft<maxRadius){centerLeft=maxRadius}else if(centerLeft>canvasWidth-maxRadius){centerLeft=canvasWidth-maxRadius}}else{centerLeft+=options.series.pie.offset.left}var slices=plot.getData(),attempts=0;do{if(attempts>0){maxRadius*=REDRAW_SHRINK}attempts+=1;clear();if(options.series.pie.tilt<=.8){drawShadow()}}while(!drawPie()&&attempts<REDRAW_ATTEMPTS);if(attempts>=REDRAW_ATTEMPTS){clear();var errorMessage=_i18n.i18n.translate("common.ui.flotCharts.pie.unableToDrawLabelsInsideCanvasErrorMessage",{defaultMessage:"Could not draw pie with labels contained inside canvas"});target.prepend("<div class='error'>".concat(errorMessage,"</div>"))}if(plot.setSeries&&plot.insertLegend){plot.setSeries(slices);plot.insertLegend()}function clear(){ctx.clearRect(0,0,canvasWidth,canvasHeight);target.children().filter(".pieLabel, .pieLabelBackground").remove()}function drawShadow(){var shadowLeft=options.series.pie.shadow.left;var shadowTop=options.series.pie.shadow.top;var edge=10;var alpha=options.series.pie.shadow.alpha;var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;if(radius>=canvasWidth/2-shadowLeft||radius*options.series.pie.tilt>=canvasHeight/2-shadowTop||radius<=edge){return}ctx.save();ctx.translate(shadowLeft,shadowTop);ctx.globalAlpha=alpha;ctx.fillStyle="#000";ctx.translate(centerLeft,centerTop);ctx.scale(1,options.series.pie.tilt);for(var i=1;i<=edge;i++){ctx.beginPath();ctx.arc(0,0,radius,0,Math.PI*2,false);ctx.fill();radius-=i}ctx.restore()}function drawPie(){var startAngle=Math.PI*options.series.pie.startAngle;var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;ctx.save();ctx.translate(centerLeft,centerTop);ctx.scale(1,options.series.pie.tilt);ctx.save();var currentAngle=startAngle;for(var i=0;i<slices.length;++i){slices[i].startAngle=currentAngle;drawSlice(slices[i].angle,slices[i].color,true)}ctx.restore();if(options.series.pie.stroke.width>0){ctx.save();ctx.lineWidth=options.series.pie.stroke.width;currentAngle=startAngle;for(var i=0;i<slices.length;++i){drawSlice(slices[i].angle,options.series.pie.stroke.color,false)}ctx.restore()}drawDonutHole(ctx);ctx.restore();if(options.series.pie.label.show){return drawLabels()}else return true;function drawSlice(angle,color,fill){if(angle<=0||isNaN(angle)){return}if(fill){ctx.fillStyle=color}else{ctx.strokeStyle=color;ctx.lineJoin="round"}ctx.beginPath();if(Math.abs(angle-Math.PI*2)>1e-9){ctx.moveTo(0,0)}ctx.arc(0,0,radius,currentAngle,currentAngle+angle/2,false);ctx.arc(0,0,radius,currentAngle+angle/2,currentAngle+angle,false);ctx.closePath();currentAngle+=angle;if(fill){ctx.fill()}else{ctx.stroke()}}function drawLabels(){var currentAngle=startAngle;var radius=options.series.pie.label.radius>1?options.series.pie.label.radius:maxRadius*options.series.pie.label.radius;for(var i=0;i<slices.length;++i){if(slices[i].percent>=options.series.pie.label.threshold*100){if(!drawLabel(slices[i],currentAngle,i)){return false}}currentAngle+=slices[i].angle}return true;function drawLabel(slice,startAngle,index){if(slice.data[0][1]==0){return true}var lf=options.legend.labelFormatter,text,plf=options.series.pie.label.formatter;if(lf){text=lf(slice.label,slice)}else{text=slice.label}if(plf){text=plf(text,slice)}var halfAngle=(startAngle+slice.angle+startAngle)/2;var x=centerLeft+Math.round(Math.cos(halfAngle)*radius);var y=centerTop+Math.round(Math.sin(halfAngle)*radius)*options.series.pie.tilt;var html="<span class='pieLabel' id='pieLabel"+index+"' style='position:absolute;top:"+y+"px;left:"+x+"px;'>"+text+"</span>";target.append(html);var label=target.children("#pieLabel"+index);var labelTop=y-label.height()/2;var labelLeft=x-label.width()/2;label.css("top",labelTop);label.css("left",labelLeft);if(0-labelTop>0||0-labelLeft>0||canvasHeight-(labelTop+label.height())<0||canvasWidth-(labelLeft+label.width())<0){return false}if(options.series.pie.label.background.opacity!=0){var c=options.series.pie.label.background.color;if(c==null){c=slice.color}var pos="top:"+labelTop+"px;left:"+labelLeft+"px;";$("<div class='pieLabelBackground' style='position:absolute;width:"+label.width()+"px;height:"+label.height()+"px;"+pos+"background-color:"+c+";'></div>").css("opacity",options.series.pie.label.background.opacity).insertBefore(label)}return true}}}}function drawDonutHole(layer){if(options.series.pie.innerRadius>0){layer.save();var innerRadius=options.series.pie.innerRadius>1?options.series.pie.innerRadius:maxRadius*options.series.pie.innerRadius;layer.globalCompositeOperation="destination-out";layer.beginPath();layer.fillStyle=options.series.pie.stroke.color;layer.arc(0,0,innerRadius,0,Math.PI*2,false);layer.fill();layer.closePath();layer.restore();layer.save();layer.beginPath();layer.strokeStyle=options.series.pie.stroke.color;layer.arc(0,0,innerRadius,0,Math.PI*2,false);layer.stroke();layer.closePath();layer.restore()}}function isPointInPoly(poly,pt){for(var c=false,i=-1,l=poly.length,j=l-1;++i<l;j=i){(poly[i][1]<=pt[1]&&pt[1]<poly[j][1]||poly[j][1]<=pt[1]&&pt[1]<poly[i][1])&&pt[0]<(poly[j][0]-poly[i][0])*(pt[1]-poly[i][1])/(poly[j][1]-poly[i][1])+poly[i][0]&&(c=!c)}return c}function findNearbySlice(mouseX,mouseY){var slices=plot.getData(),options=plot.getOptions(),radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius,x,y;for(var i=0;i<slices.length;++i){var s=slices[i];if(s.pie.show){ctx.save();ctx.beginPath();ctx.moveTo(0,0);ctx.arc(0,0,radius,s.startAngle,s.startAngle+s.angle/2,false);ctx.arc(0,0,radius,s.startAngle+s.angle/2,s.startAngle+s.angle,false);ctx.closePath();x=mouseX-centerLeft;y=mouseY-centerTop;if(ctx.isPointInPath){if(ctx.isPointInPath(mouseX-centerLeft,mouseY-centerTop)){ctx.restore();return{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}}else{var p1X=radius*Math.cos(s.startAngle),p1Y=radius*Math.sin(s.startAngle),p2X=radius*Math.cos(s.startAngle+s.angle/4),p2Y=radius*Math.sin(s.startAngle+s.angle/4),p3X=radius*Math.cos(s.startAngle+s.angle/2),p3Y=radius*Math.sin(s.startAngle+s.angle/2),p4X=radius*Math.cos(s.startAngle+s.angle/1.5),p4Y=radius*Math.sin(s.startAngle+s.angle/1.5),p5X=radius*Math.cos(s.startAngle+s.angle),p5Y=radius*Math.sin(s.startAngle+s.angle),arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]],arrPoint=[x,y];if(isPointInPoly(arrPoly,arrPoint)){ctx.restore();return{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}}ctx.restore()}}return null}function onMouseMove(e){triggerClickHoverEvent("plothover",e)}function onClick(e){triggerClickHoverEvent("plotclick",e)}function triggerClickHoverEvent(eventname,e){var offset=plot.offset();var canvasX=parseInt(e.pageX-offset.left);var canvasY=parseInt(e.pageY-offset.top);var item=findNearbySlice(canvasX,canvasY);if(options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.auto==eventname&&!(item&&h.series==item.series)){unhighlight(h.series)}}}if(item){highlight(item.series,eventname)}var pos={pageX:e.pageX,pageY:e.pageY};target.trigger(eventname,[pos,item])}function highlight(s,auto){var i=indexOfHighlight(s);if(i==-1){highlights.push({series:s,auto:auto});plot.triggerRedrawOverlay()}else if(!auto){highlights[i].auto=false}}function unhighlight(s){if(s==null){highlights=[];plot.triggerRedrawOverlay()}var i=indexOfHighlight(s);if(i!=-1){highlights.splice(i,1);plot.triggerRedrawOverlay()}}function indexOfHighlight(s){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s)return i}return-1}function drawOverlay(plot,octx){var options=plot.getOptions();var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;octx.save();octx.translate(centerLeft,centerTop);octx.scale(1,options.series.pie.tilt);for(var i=0;i<highlights.length;++i){drawHighlight(highlights[i].series)}drawDonutHole(octx);octx.restore();function drawHighlight(series){if(series.angle<=0||isNaN(series.angle)){return}octx.fillStyle="rgba(255, 255, 255, "+options.series.pie.highlight.opacity+")";octx.beginPath();if(Math.abs(series.angle-Math.PI*2)>1e-9){octx.moveTo(0,0)}octx.arc(0,0,radius,series.startAngle,series.startAngle+series.angle/2,false);octx.arc(0,0,radius,series.startAngle+series.angle/2,series.startAngle+series.angle,false);octx.closePath();octx.fill()}}}var options={series:{pie:{show:false,radius:"auto",innerRadius:0,startAngle:3/2,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function formatter(label,slice){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+slice.color+";'>"+label+"<br/>"+Math.round(slice.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};$.plot.plugins.push({init:init,options:options,name:"pie",version:"1.1"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{stack:null}};function init(plot){function findMatchingSeries(s,allseries){var res=null;for(var i=0;i<allseries.length;++i){if(s==allseries[i])break;if(allseries[i].stack==s.stack)res=allseries[i]}return res}function stackData(plot,s,datapoints){if(s.stack==null||s.stack===false)return;var other=findMatchingSeries(s,plot.getData());if(!other)return;var ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],px,py,intery,qx,qy,bottom,withlines=s.lines.show,horizontal=s.bars.horizontal,withbottom=ps>2&&(horizontal?datapoints.format[2].x:datapoints.format[2].y),withsteps=withlines&&s.lines.steps,fromgap=true,keyOffset=horizontal?1:0,accumulateOffset=horizontal?0:1,i=0,j=0,l,m;while(true){if(i>=points.length)break;l=newpoints.length;if(points[i]==null){for(m=0;m<ps;++m){newpoints.push(points[i+m])}i+=ps}else if(j>=otherpoints.length){if(!withlines){for(m=0;m<ps;++m){newpoints.push(points[i+m])}}i+=ps}else if(otherpoints[j]==null){for(m=0;m<ps;++m){newpoints.push(null)}fromgap=true;j+=otherps}else{px=points[i+keyOffset];py=points[i+accumulateOffset];qx=otherpoints[j+keyOffset];qy=otherpoints[j+accumulateOffset];bottom=0;if(px==qx){for(m=0;m<ps;++m){newpoints.push(points[i+m])}newpoints[l+accumulateOffset]+=qy;bottom=qy;i+=ps;j+=otherps}else if(px>qx){if(withlines&&i>0&&points[i-ps]!=null){intery=py+(points[i-ps+accumulateOffset]-py)*(qx-px)/(points[i-ps+keyOffset]-px);newpoints.push(qx);newpoints.push(intery+qy);for(m=2;m<ps;++m){newpoints.push(points[i+m])}bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m){newpoints.push(points[i+m])}if(withlines&&j>0&&otherpoints[j-otherps]!=null)bottom=qy+(otherpoints[j-otherps+accumulateOffset]-qy)*(px-qx)/(otherpoints[j-otherps+keyOffset]-qx);newpoints[l+accumulateOffset]+=bottom;i+=ps}fromgap=false;if(l!=newpoints.length&&withbottom)newpoints[l+2]+=bottom}if(withsteps&&l!=newpoints.length&&l>0&&newpoints[l]!=null&&newpoints[l]!=newpoints[l-ps]&&newpoints[l+1]!=newpoints[l-ps+1]){for(m=0;m<ps;++m){newpoints[l+ps+m]=newpoints[l+m]}newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}plot.hooks.processDatapoints.push(stackData)}$.plot.plugins.push({init:init,options:options,name:"stack",version:"1.2"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{threshold:null}};function init(plot){function thresholdData(plot,s,datapoints,below,color){var ps=datapoints.pointsize,i,x,y,p,prevp,thresholded=$.extend({},s);thresholded.datapoints={points:[],pointsize:ps,format:datapoints.format};thresholded.label=null;thresholded.color=color;thresholded.threshold=null;thresholded.originSeries=s;thresholded.data=[];var origpoints=datapoints.points,addCrossingPoints=s.lines.show;var threspoints=[];var newpoints=[];var m;for(i=0;i<origpoints.length;i+=ps){x=origpoints[i];y=origpoints[i+1];prevp=p;if(y<below)p=threspoints;else p=newpoints;if(addCrossingPoints&&prevp!=p&&x!=null&&i>0&&origpoints[i-ps]!=null){var interx=x+(below-y)*(x-origpoints[i-ps])/(y-origpoints[i-ps+1]);prevp.push(interx);prevp.push(below);for(m=2;m<ps;++m){prevp.push(origpoints[i+m])}p.push(null);p.push(null);for(m=2;m<ps;++m){p.push(origpoints[i+m])}p.push(interx);p.push(below);for(m=2;m<ps;++m){p.push(origpoints[i+m])}}p.push(x);p.push(y);for(m=2;m<ps;++m){p.push(origpoints[i+m])}}datapoints.points=newpoints;thresholded.datapoints.points=threspoints;if(thresholded.datapoints.points.length>0){var origIndex=$.inArray(s,plot.getData());plot.getData().splice(origIndex+1,0,thresholded)}}function processThresholds(plot,s,datapoints){if(!s.threshold)return;if(s.threshold instanceof Array){s.threshold.sort(function(a,b){return a.below-b.below});$(s.threshold).each(function(i,th){thresholdData(plot,s,datapoints,th.below,th.color)})}else{thresholdData(plot,s,datapoints,s.threshold.below,s.threshold.color)}}plot.hooks.processDatapoints.push(processThresholds)}$.plot.plugins.push({init:init,options:options,name:"threshold",version:"1.2"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{fillBetween:null}};function init(plot){function findBottomSeries(s,allseries){var i;for(i=0;i<allseries.length;++i){if(allseries[i].id===s.fillBetween){return allseries[i]}}if(typeof s.fillBetween==="number"){if(s.fillBetween<0||s.fillBetween>=allseries.length){return null}return allseries[s.fillBetween]}return null}function computeFillBottoms(plot,s,datapoints){if(s.fillBetween==null){return}var other=findBottomSeries(s,plot.getData());if(!other){return}var ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],px,py,intery,qx,qy,bottom,withlines=s.lines.show,withbottom=ps>2&&datapoints.format[2].y,withsteps=withlines&&s.lines.steps,fromgap=true,i=0,j=0,l,m;while(true){if(i>=points.length){break}l=newpoints.length;if(points[i]==null){for(m=0;m<ps;++m){newpoints.push(points[i+m])}i+=ps}else if(j>=otherpoints.length){if(!withlines){for(m=0;m<ps;++m){newpoints.push(points[i+m])}}i+=ps}else if(otherpoints[j]==null){for(m=0;m<ps;++m){newpoints.push(null)}fromgap=true;j+=otherps}else{px=points[i];py=points[i+1];qx=otherpoints[j];qy=otherpoints[j+1];bottom=0;if(px===qx){for(m=0;m<ps;++m){newpoints.push(points[i+m])}bottom=qy;i+=ps;j+=otherps}else if(px>qx){if(withlines&&i>0&&points[i-ps]!=null){intery=py+(points[i-ps+1]-py)*(qx-px)/(points[i-ps]-px);newpoints.push(qx);newpoints.push(intery);for(m=2;m<ps;++m){newpoints.push(points[i+m])}bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m){newpoints.push(points[i+m])}if(withlines&&j>0&&otherpoints[j-otherps]!=null){bottom=qy+(otherpoints[j-otherps+1]-qy)*(px-qx)/(otherpoints[j-otherps]-qx)}i+=ps}fromgap=false;if(l!==newpoints.length&&withbottom){newpoints[l+2]=bottom}}if(withsteps&&l!==newpoints.length&&l>0&&newpoints[l]!==null&&newpoints[l]!==newpoints[l-ps]&&newpoints[l+1]!==newpoints[l-ps+1]){for(m=0;m<ps;++m){newpoints[l+ps+m]=newpoints[l+m]}newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}plot.hooks.processDatapoints.push(computeFillBottoms)}$.plot.plugins.push({init:init,options:options,name:"fillbetween",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){function log10(value){return Math.log(value)/Math.LN10}function floorAsLog10(value){return Math.floor(log10(value))}function ceilAsLog10(value){return Math.ceil(log10(value))}function floorInBase(n,base){return base*Math.floor(n/base)}function getUnicodePower(power){var superscripts=["⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹"],result="",str_power=""+power;for(var i=0;i<str_power.length;i++){if(str_power[i]==="+"){}else if(str_power[i]==="-"){result+="⁻"}else{result+=superscripts[str_power[i]]}}return result}function init(plot){plot.hooks.processOptions.push(function(plot){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;if(opts.mode==="log"){axis.tickGenerator=function(axis){var ticks=[],end=ceilAsLog10(axis.max),start=floorAsLog10(axis.min),tick=Number.NaN,i=0;if(axis.min===null||axis.min<=0){start=0;axis.min=.6}if(end<=start){ticks=[1e-6,1e-5,1e-4,.001,.01,.1,1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9]}else if(log10(axis.max)-log10(axis.datamin)<1){var prev;start=floorInBase(axis.min,axis.tickSize);do{prev=tick;tick=start+i*axis.tickSize;ticks.push(tick);++i}while(tick<axis.max&&tick!==prev)}else{for(;i<=end-start;i++){tick=Math.pow(10,start+i);ticks.push(tick)}var length=ticks.length;if(end-start<6){for(var j=1;j<length*2-1;j+=2){tick=ticks[j-1]*5;ticks.splice(j,0,tick)}}}return ticks};axis.tickFormatter=function(value,axis){var formatted;if(log10(axis.max)-log10(axis.datamin)<1){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;formatted=""+Math.round(value*factor)/factor;if(axis.tickDecimals!==null){var decimal=formatted.indexOf(".");var precision=decimal===-1?0:formatted.length-decimal-1;if(precision<axis.tickDecimals){return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}}}else{var multiplier="",exponential=parseFloat(value).toExponential(0),power=getUnicodePower(exponential.slice(2));if(exponential[0]!=="1"){multiplier=exponential[0]+"x"}formatted=multiplier+"10"+power}return formatted}}})})}$.plot.plugins.push({init:init,name:"log",version:"0.9"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Resize=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _reactDom=__webpack_require__(13);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Resize=function(_Component){_inherits(Resize,_Component);function Resize(props){var _this;_classCallCheck(this,Resize);_this=_possibleConstructorReturn(this,_getPrototypeOf(Resize).call(this,props));_this.state={};_this.handleResize=_this.handleResize.bind(_assertThisInitialized(_this));return _this}_createClass(Resize,[{key:"checkSize",value:function checkSize(){var _this2=this;var el=(0,_reactDom.findDOMNode)(this.el);if(!el)return;this.timeout=setTimeout(function(){var _this2$state=_this2.state,currentHeight=_this2$state.currentHeight,currentWidth=_this2$state.currentWidth;if(currentHeight!==el.parentNode.clientHeight||currentWidth!==el.parentNode.clientWidth){_this2.setState({currentWidth:el.parentNode.clientWidth,currentHeight:el.parentNode.clientHeight});_this2.handleResize()}clearTimeout(_this2.timeout);_this2.checkSize()},this.props.frequency)}},{key:"componentDidMount",value:function componentDidMount(){this.checkSize()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"handleResize",value:function handleResize(){if(this.props.onResize)this.props.onResize()}},{key:"render",value:function render(){var _this3=this;var style=this.props.style||{};var className=this.props.className||"";return _react.default.createElement("div",{style:style,className:className,ref:function ref(el){return _this3.el=el}},this.props.children)}}]);return Resize}(_react.Component);exports.Resize=Resize;Resize.defaultProps={frequency:500};Resize.propTypes={frequency:_propTypes.default.number,onResize:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateBarWidth=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var calculateBarWidth=function calculateBarWidth(series){var multiplier=arguments.length>1&&arguments[1]!==undefined?arguments[1]:.7;var first=_lodash.default.first(series);try{return(first.data[1][0]-first.data[0][0])*multiplier}catch(e){return 1e3}};exports.calculateBarWidth=calculateBarWidth},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateFillColor=void 0;var _color=_interopRequireDefault(__webpack_require__(659));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var calculateFillColor=function calculateFillColor(color){var fill=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var initialColor=new _color.default(color).rgb();var opacity=Math.min(Number(fill),1)*initialColor.valpha;var _initialColor$color=_slicedToArray(initialColor.color,3),r=_initialColor$color[0],g=_initialColor$color[1],b=_initialColor$color[2];return{fill:opacity>0,fillColor:new _color.default([r,g,b,Number(opacity.toFixed(2))]).string()}};exports.calculateFillColor=calculateFillColor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Annotation=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _moment=_interopRequireDefault(__webpack_require__(14));var _reactcss=_interopRequireDefault(__webpack_require__(63));var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Annotation=function(_Component){_inherits(Annotation,_Component);function Annotation(props){_classCallCheck(this,Annotation);return _possibleConstructorReturn(this,_getPrototypeOf(Annotation).call(this,props))}_createClass(Annotation,[{key:"renderTooltip",value:function renderTooltip(){var _this$props$series=_slicedToArray(this.props.series,2),timestamp=_this$props$series[0],messageSource=_this$props$series[1];var messages=messageSource.map(function(message,i){return _react.default.createElement("div",{key:"".concat(message,"-").concat(i),className:"tvbVisAnnotation__message"},message)});return _react.default.createElement("div",null,_react.default.createElement("div",{className:"tvbTooltip__timestamp"},(0,_moment.default)(timestamp).format("lll")),messages)}},{key:"render",value:function render(){var _this$props=this.props,color=_this$props.color,plot=_this$props.plot,icon=_this$props.icon,series=_this$props.series;var offset=plot.pointOffset({x:series[0],y:0});var tooltip=this.renderTooltip();var style=(0,_reactcss.default)({default:{container:{left:offset.left-6,bottom:0,top:5},line:{backgroundColor:color},icon:{color:color}}});return _react.default.createElement("div",{className:"tvbVisAnnotation",style:style.container},_react.default.createElement("div",{className:"tvbVisAnnotation__line",style:style.line}),_react.default.createElement(_eui.EuiToolTip,{className:"tvbVisAnnotation__tooltip",content:tooltip,position:"top"},_react.default.createElement("i",{className:"tvbVisAnnotation__icon fa ".concat(icon),style:style.icon})))}}]);return Annotation}(_react.Component);exports.Annotation=Annotation;Annotation.propTypes={series:_propTypes.default.array,icon:_propTypes.default.string,color:_propTypes.default.string,plot:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Legend=Legend;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _vertical_legend=__webpack_require__(1368);var _horizontal_legend=__webpack_require__(1369);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Legend(props){if(props.legendPosition==="bottom"){return _react.default.createElement(_horizontal_legend.HorizontalLegend,props)}return _react.default.createElement(_vertical_legend.VerticalLegend,props)}Legend.propTypes={legendPosition:_propTypes.default.string,onClick:_propTypes.default.func,onToggle:_propTypes.default.func,series:_propTypes.default.array,showLegend:_propTypes.default.bool,seriesValues:_propTypes.default.object,seriesFilter:_propTypes.default.array,tickFormatter:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VerticalLegend=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _create_legend_series=__webpack_require__(648);var _reactcss=_interopRequireDefault(__webpack_require__(63));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VerticalLegend=(0,_react2.injectI18n)(function(props){var rows=props.series.map((0,_create_legend_series.createLegendSeries)(props));var htmlId=(0,_eui.htmlIdGenerator)();var hideLegend=!props.showLegend;var leftLegend=props.legendPosition==="left";var styles=(0,_reactcss.default)({default:{legend:{width:200}},leftLegend:{legend:{order:"-1"},control:{order:"2"}},hideLegend:{legend:{width:24},series:{display:"none"}}},{hideLegend:hideLegend,leftLegend:leftLegend});var openIcon=leftLegend?"arrowRight":"arrowLeft";var closeIcon=leftLegend?"arrowLeft":"arrowRight";var legendToggleIcon=hideLegend?"".concat(openIcon):"".concat(closeIcon);return _react.default.createElement("div",{className:"tvbLegend",style:styles.legend},_react.default.createElement(_eui.EuiButtonIcon,{className:"tvbLegend__toggle",style:styles.control,iconType:legendToggleIcon,color:"text",iconSize:"s",onClick:props.onClick,"aria-label":props.intl.formatMessage({id:"tsvb.verticalLegend.toggleChartAriaLabel",defaultMessage:"Toggle chart legend"}),title:props.intl.formatMessage({id:"tsvb.verticalLegend.toggleChartAriaLabel",defaultMessage:"Toggle chart legend"}),"aria-expanded":!!props.showLegend,"aria-controls":htmlId("legend")}),_react.default.createElement("div",{className:"tvbLegend__series",style:styles.series,id:htmlId("legend")},rows))});exports.VerticalLegend=VerticalLegend;VerticalLegend.propTypes={legendPosition:_propTypes.default.string,onClick:_propTypes.default.func,onToggle:_propTypes.default.func,series:_propTypes.default.array,showLegend:_propTypes.default.bool,seriesValues:_propTypes.default.object,seriesFilter:_propTypes.default.array,tickFormatter:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HorizontalLegend=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _create_legend_series=__webpack_require__(648);var _reactcss=_interopRequireDefault(__webpack_require__(63));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HorizontalLegend=(0,_react2.injectI18n)(function(props){var rows=props.series.map((0,_create_legend_series.createLegendSeries)(props));var htmlId=(0,_eui.htmlIdGenerator)();var styles=(0,_reactcss.default)({hideLegend:{legend:{display:"none"}}},{hideLegend:!props.showLegend});var legendToggleIcon="arrowDown";if(!props.showLegend){legendToggleIcon="arrowUp"}return _react.default.createElement("div",{className:"tvbLegend tvbLegend--horizontal"},_react.default.createElement(_eui.EuiButtonIcon,{className:"tvbLegend__toggle",iconType:legendToggleIcon,color:"text",iconSize:"s",onClick:props.onClick,"aria-label":props.intl.formatMessage({id:"tsvb.horizontalLegend.toggleChartAriaLabel",defaultMessage:"Toggle chart legend"}),title:props.intl.formatMessage({id:"tsvb.horizontalLegend.toggleChartAriaLabel",defaultMessage:"Toggle chart legend"}),"aria-expanded":!!props.showLegend,"aria-controls":htmlId("legend")}),_react.default.createElement("div",{className:"tvbLegend__series",style:styles.legend,id:htmlId("legend")},rows))});exports.HorizontalLegend=HorizontalLegend;HorizontalLegend.propTypes={legendPosition:_propTypes.default.string,onClick:_propTypes.default.func,onToggle:_propTypes.default.func,series:_propTypes.default.array,showLegend:_propTypes.default.bool,seriesValues:_propTypes.default.object,seriesFilter:_propTypes.default.array,tickFormatter:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TopNavMenu",{enumerable:true,get:function get(){return _top_nav_menu.TopNavMenu}});Object.defineProperty(exports,"TopNavMenuData",{enumerable:true,get:function get(){return _top_nav_menu_data.TopNavMenuData}});var _top_nav_menu=__webpack_require__(1371);var _top_nav_menu_data=__webpack_require__(1373)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNavMenu=TopNavMenu;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _top_nav_menu_item=__webpack_require__(1372);var _public=__webpack_require__(24);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TopNavMenu(props){function renderItems(){if(!props.config)return;return props.config.map(function(menuItem,i){return _react.default.createElement(_eui.EuiFlexItem,{grow:false,key:"nav-menu-".concat(i)},_react.default.createElement(_top_nav_menu_item.TopNavMenuItem,menuItem))})}function renderSearchBar(){if(!props.showSearchBar||!props.savedObjectsClient)return;return _react.default.createElement(_public.SearchBar,{savedObjectsClient:props.savedObjectsClient,query:props.query,filters:props.filters,toasts:props.toasts,uiSettings:props.uiSettings,showQueryBar:props.showQueryBar,showQueryInput:props.showQueryInput,showFilterBar:props.showFilterBar,showDatePicker:props.showDatePicker,appName:props.appName,screenTitle:props.screenTitle,onQuerySubmit:props.onQuerySubmit,onFiltersUpdated:props.onFiltersUpdated,dateRangeFrom:props.dateRangeFrom,dateRangeTo:props.dateRangeTo,isRefreshPaused:props.isRefreshPaused,showAutoRefreshOnly:props.showAutoRefreshOnly,onRefreshChange:props.onRefreshChange,refreshInterval:props.refreshInterval,indexPatterns:props.indexPatterns,store:props.store,savedQuery:props.savedQuery,showSaveQuery:props.showSaveQuery,onClearSavedQuery:props.onClearSavedQuery,onSaved:props.onSaved,onSavedQueryUpdated:props.onSavedQueryUpdated})}function renderLayout(){return _react.default.createElement("span",{className:"kbnTopNavMenu__wrapper"},_react.default.createElement(_eui.EuiFlexGroup,{"data-test-subj":"top-nav",justifyContent:"flexStart",gutterSize:"none",className:"kbnTopNavMenu",responsive:false},renderItems()),renderSearchBar())}return _react.default.createElement(_react2.I18nProvider,null,renderLayout())}TopNavMenu.defaultProps={showSearchBar:false,showQueryBar:true,showQueryInput:true,showDatePicker:true,showFilterBar:true,screenTitle:""}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNavMenuItem=TopNavMenuItem;var _lodash=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TopNavMenuItem(props){function isDisabled(){var val=(0,_lodash.isFunction)(props.disableButton)?props.disableButton():props.disableButton;return val}function getTooltip(){var val=(0,_lodash.isFunction)(props.tooltip)?props.tooltip():props.tooltip;return val}function handleClick(e){if(isDisabled())return;props.run(e.currentTarget)}var btn=_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",isDisabled:isDisabled(),onClick:handleClick,"data-test-subj":props.testId},(0,_lodash.capitalize)(props.label||props.id));var tooltip=getTooltip();if(tooltip){return _react.default.createElement(_eui.EuiToolTip,{content:tooltip},btn)}else{return btn}}TopNavMenuItem.defaultProps={disableButton:false,tooltip:""}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAxisLabelString=getAxisLabelString;var _get_interval=__webpack_require__(363);var _i18n=__webpack_require__(2);function getAxisLabelString(interval){var convertedValue=(0,_get_interval.convertIntervalIntoUnit)(interval);if(convertedValue){return _i18n.i18n.translate("tsvb.axisLabelOptions.axisLabel",{defaultMessage:"per {unitValue} {unitString}",values:{unitValue:convertedValue.unitValue,unitString:convertedValue.unitString}})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFormat=getFormat;exports.createXaxisFormatter=createXaxisFormatter;var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFormat(interval,rules,dateFormat){for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval>=_moment.default.duration(rule[0])){return rule[1]}}return dateFormat}function createXaxisFormatter(interval,rules,dateFormat){return function(val){return(0,_moment.default)(val).format(getFormat(interval,rules,dateFormat))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.metric=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _vis_with_splits=__webpack_require__(649);var _tick_formatter=__webpack_require__(85);var _lodash=_interopRequireWildcard(__webpack_require__(1));var _metric=__webpack_require__(1378);var _get_last_value=__webpack_require__(72);var _set_is_reversed=__webpack_require__(103);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getColors(props){var model=props.model,visData=props.visData;var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]).filter(function(s){return!(0,_lodash.isUndefined)(s)});var color;var background;if(model.background_color_rules){model.background_color_rules.forEach(function(rule){if(rule.operator&&rule.value!=null){var value=series[0]&&(0,_get_last_value.getLastValue)(series[0].data)||0;if(_lodash.default[rule.operator](value,rule.value)){background=rule.background_color;color=rule.color}}})}return{color:color,background:background}}function MetricVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var colors=getColors(props);var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]).filter(function(row){return row}).map(function(row,i){var seriesDef=model.series.find(function(s){return(0,_lodash.includes)(row.id,s.id)});var newProps={};if(seriesDef){newProps.formatter=(0,_tick_formatter.tickFormatter)(seriesDef.formatter,seriesDef.value_template,props.getConfig)}if(i===0&&colors.color)newProps.color=colors.color;return(0,_lodash.assign)({},(0,_lodash.pick)(row,["label","data"]),newProps)});var panelBackgroundColor=colors.background||backgroundColor;var style={backgroundColor:panelBackgroundColor};var params={metric:series[0],additionalLabel:props.additionalLabel,reversed:(0,_set_is_reversed.isBackgroundInverted)(panelBackgroundColor)};if(series[1]){params.secondary=series[1]}return _react.default.createElement("div",{className:"tvbVis",style:style},_react.default.createElement(_metric.Metric,params))}MetricVisualization.propTypes={backgroundColor:_propTypes.default.string,className:_propTypes.default.string,additionalLabel:_propTypes.default.string,model:_propTypes.default.object,onBrush:_propTypes.default.func,onChange:_propTypes.default.func,visData:_propTypes.default.object,getConfig:_propTypes.default.func};var metric=(0,_vis_with_splits.visWithSplits)(MetricVisualization);exports.metric=metric},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDisplayName=getDisplayName;function getDisplayName(Component){return Component.displayName||Component.name||"Component"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Metric=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _get_last_value=__webpack_require__(72);var _reactcss=_interopRequireDefault(__webpack_require__(63));var _calculate_coordinates=__webpack_require__(432);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Metric=function(_Component){_inherits(Metric,_Component);function Metric(props){var _this;_classCallCheck(this,Metric);_this=_possibleConstructorReturn(this,_getPrototypeOf(Metric).call(this,props));_this.state={scale:1,left:0,top:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_assertThisInitialized(_this));return _this}_createClass(Metric,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates.calculateCoordinates)(_this2.inner,_this2.resize,_this2.state);if(newState&&_this2.state&&!_lodash.default.isEqual(newState,_this2.state)){_this2.handleResize()}check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates.calculateCoordinates)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,metric=_this$props.metric,secondary=_this$props.secondary;var _this$state=this.state,scale=_this$state.scale,translateX=_this$state.translateX,translateY=_this$state.translateY;var primaryFormatter=metric&&(metric.tickFormatter||metric.formatter)||function(n){return n};var primaryValue=primaryFormatter((0,_get_last_value.getLastValue)(metric&&metric.data||0));var styles=(0,_reactcss.default)({default:{container:{},inner:{top:this.state.top||0,left:this.state.left||0,transform:"matrix(".concat(scale,", 0, 0, ").concat(scale,", ").concat(translateX,", ").concat(translateY,")")},primary_value:{},secondary_value:{}},reversed:{primary_value:{},secondary_value:{}}},this.props);if(this.props.backgroundColor)styles.container.backgroundColor=this.props.backgroundColor;if(metric&&metric.color)styles.primary_value.color=metric.color;var primaryLabel;if(metric&&metric.label){primaryLabel=_react.default.createElement("div",{className:"tvbVisMetric__label--primary"},metric.label)}var secondarySnippet;if(secondary){var secondaryFormatter=secondary.formatter||function(n){return n};var secondaryValue=secondaryFormatter((0,_get_last_value.getLastValue)(secondary.data));if(secondary.color)styles.secondary_value.color=secondary.color;var secondaryLabel;if(secondary.label){secondaryLabel=_react.default.createElement("div",{className:"tvbVisMetric__label--secondary"},secondary.label)}secondarySnippet=_react.default.createElement("div",{className:"tvbVisMetric__secondary"},secondaryLabel,_react.default.createElement("div",{style:styles.secondary_value,className:"tvbVisMetric__value--secondary"},secondaryValue))}var additionalLabel;if(this.props.additionalLabel){additionalLabel=_react.default.createElement("div",{className:"tvbVisMetric__label--additional"},this.props.additionalLabel)}var className="tvbVisMetric";if(!styles.container.backgroundColor){className+=" tvbVisMetric--noBackground"}if(this.props.reversed){className+=" tvbVisMetric--reversed"}return _react.default.createElement("div",{className:className,style:styles.container},_react.default.createElement("div",{ref:function ref(el){return _this3.resize=el},className:"tvbVisMetric__resize"},_react.default.createElement("div",{ref:function ref(el){return _this3.inner=el},className:"tvbVisMetric__inner",style:styles.inner},_react.default.createElement("div",{className:"tvbVisMetric__primary"},primaryLabel,_react.default.createElement("div",{style:styles.primary_value,"data-test-subj":"tsvbMetricValue",className:"tvbVisMetric__value--primary"},primaryValue)),secondarySnippet,additionalLabel)))}}]);return Metric}(_react.Component);exports.Metric=Metric;Metric.propTypes={backgroundColor:_propTypes.default.string,metric:_propTypes.default.object,secondary:_propTypes.default.object,reversed:_propTypes.default.bool,additionalLabel:_propTypes.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calcDimensions=calcDimensions;function calcDimensions(el,scale){var newWidth=Math.floor(el.clientWidth*scale);var newHeight=Math.floor(el.clientHeight*scale);return[newWidth,newHeight]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNVisualization=TopNVisualization;var _tick_formatter=__webpack_require__(85);var _top_n=__webpack_require__(1381);var _get_last_value=__webpack_require__(72);var _set_is_reversed=__webpack_require__(103);var _replace_vars=__webpack_require__(364);var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OPERATORS={gt:_lodash.gt,gte:_lodash.gte,lt:_lodash.lt,lte:_lodash.lte};function sortByDirection(data,direction,fn){if(direction==="desc"){return(0,_lodash.sortBy)(data,fn).reverse()}return(0,_lodash.sortBy)(data,fn)}function sortSeries(visData,model){var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]);return model.series.reduce(function(acc,item){var itemSeries=series.filter(function(s){var id=(0,_lodash.first)(s.id.split(/:/));return id===item.id});var direction=item.terms_direction||"desc";if(item.terms_order_by==="_key")return acc.concat(itemSeries);return acc.concat(sortByDirection(itemSeries,direction,function(s){return(0,_get_last_value.getLastValue)(s.data)}))},[])}function TopNVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var series=sortSeries(visData,model).map(function(item){var id=(0,_lodash.first)(item.id.split(/:/));var seriesConfig=model.series.find(function(s){return s.id===id});if(seriesConfig){var formatter=(0,_tick_formatter.tickFormatter)(seriesConfig.formatter,seriesConfig.value_template,props.getConfig);var value=(0,_get_last_value.getLastValue)(item.data);var color=item.color||seriesConfig.color;if(model.bar_color_rules){model.bar_color_rules.forEach(function(rule){if(rule.operator&&rule.value!=null&&rule.bar_color){if(OPERATORS[rule.operator](value,rule.value)){color=rule.bar_color}}})}return _objectSpread({},item,{color:color,tickFormatter:formatter})}return item});var panelBackgroundColor=model.background_color||backgroundColor;var style={backgroundColor:panelBackgroundColor};var params={series:series,reversed:(0,_set_is_reversed.isBackgroundInverted)(panelBackgroundColor)};if(model.drilldown_url){params.onClick=function(item){window.location=(0,_replace_vars.replaceVars)(model.drilldown_url,{},{key:item.label})}}return _react.default.createElement("div",{className:"tvbVis",style:style},_react.default.createElement(_top_n.TopN,params))}TopNVisualization.propTypes={backgroundColor:_propTypes.default.string,className:_propTypes.default.string,model:_propTypes.default.object,onBrush:_propTypes.default.func,onChange:_propTypes.default.func,visData:_propTypes.default.object,getConfig:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopN=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _get_last_value=__webpack_require__(72);var _reactcss=_interopRequireDefault(__webpack_require__(63));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var TopN=function(_Component){_inherits(TopN,_Component);function TopN(props){var _this;_classCallCheck(this,TopN);_this=_possibleConstructorReturn(this,_getPrototypeOf(TopN).call(this,props));_this.tableRef=_react.default.createRef();_this.state={labelMaxWidth:150};return _this}_createClass(TopN,[{key:"componentDidMount",value:function componentDidMount(){this.setState({labelMaxWidth:this.labelMaxWidth})}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){if(prevState.labelMaxWidth!==this.labelMaxWidth){this.setState({labelMaxWidth:this.labelMaxWidth})}}},{key:"handleClick",value:function handleClick(item){var _this2=this;return function(){if(_this2.props.onClick){_this2.props.onClick(item)}}}},{key:"renderRow",value:function renderRow(maxValue){var _this3=this;return function(item){var key="".concat(item.id||item.label);var lastValue=(0,_get_last_value.getLastValue)(item.data);var formatter=item.tickFormatter||_this3.props.tickFormatter;var value=formatter(lastValue);var width="".concat(100*(lastValue/maxValue),"%");var backgroundColor=item.color;var styles=(0,_reactcss.default)({default:{innerBar:{width:width,backgroundColor:backgroundColor},label:{maxWidth:_this3.state.labelMaxWidth}},onClick:{row:{cursor:"pointer"}}},_this3.props);return _react.default.createElement("tr",{key:key,onClick:_this3.handleClick(_objectSpread({lastValue:lastValue},item)),style:styles.row},_react.default.createElement("td",{title:item.label,className:"tvbVisTopN__label",style:styles.label},item.label),_react.default.createElement("td",{width:"100%",className:"tvbVisTopN__bar"},_react.default.createElement("div",{className:"tvbVisTopN__innerBar",style:styles.innerBar})),_react.default.createElement("td",{className:"tvbVisTopN__value","data-test-subj":"tsvbTopNValue"},value))}}},{key:"render",value:function render(){if(!this.props.series)return null;var maxValue=this.props.series.reduce(function(max,series){var lastValue=(0,_get_last_value.getLastValue)(series.data);return lastValue>max?lastValue:max},0);var rows=this.props.series.map(this.renderRow(maxValue));var className="tvbVisTopN";if(this.props.reversed){className+=" tvbVisTopN--reversed"}return _react.default.createElement("div",{className:className},_react.default.createElement("table",{className:"tvbVisTopN__table","data-test-subj":"tvbVisTopNTable",ref:this.tableRef},_react.default.createElement("tbody",null,rows)))}},{key:"labelMaxWidth",get:function get(){return this.tableRef.current.offsetWidth*.35}}]);return TopN}(_react.Component);exports.TopN=TopN;TopN.defaultProps={tickFormatter:function tickFormatter(n){return n},onClick:function onClick(i){return i},direction:"desc"};TopN.propTypes={tickFormatter:_propTypes.default.func,onClick:_propTypes.default.func,series:_propTypes.default.array,reversed:_propTypes.default.bool,direction:_propTypes.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TableVis=void 0;var _lodash=_interopRequireWildcard(__webpack_require__(1));var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _field_formats=__webpack_require__(32);var _tick_formatter=__webpack_require__(85);var _calculate_label=__webpack_require__(431);var _is_sortable=__webpack_require__(1383);var _eui=__webpack_require__(3);var _replace_vars=__webpack_require__(364);var _react2=__webpack_require__(5);var _metric_types=__webpack_require__(365);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DateFormat=_field_formats.fieldFormats.getType("date");function getColor(rules,colorKey,value){var color;if(rules){rules.forEach(function(rule){if(rule.operator&&rule.value!=null){if(_lodash.default[rule.operator](value,rule.value)){color=rule[colorKey]}}})}return color}var TableVis=function(_Component){_inherits(TableVis,_Component);function TableVis(props){var _this;_classCallCheck(this,TableVis);_this=_possibleConstructorReturn(this,_getPrototypeOf(TableVis).call(this,props));_defineProperty(_assertThisInitialized(_this),"renderRow",function(row){var model=_this.props.model;var rowDisplay=model.pivot_type==="date"?_this.dateFormatter.convert(row.key):row.key;if(model.drilldown_url){var url=(0,_replace_vars.replaceVars)(model.drilldown_url,{},{key:row.key});rowDisplay=_react.default.createElement("a",{href:url},rowDisplay)}var columns=row.series.filter(function(item){return item}).map(function(item){var column=_this.visibleSeries.find(function(c){return c.id===item.id});if(!column)return null;var formatter=(0,_tick_formatter.tickFormatter)(column.formatter,column.value_template,_this.props.getConfig);var value=formatter(item.last);var trend;if(column.trend_arrows){var trendIcon=item.slope>0?"sortUp":"sortDown";trend=_react.default.createElement("span",null,"  ",_react.default.createElement(_eui.EuiIcon,{type:trendIcon,color:"subdued"}))}var style={color:getColor(column.color_rules,"text",item.last)};return _react.default.createElement("td",{key:"".concat(row.key,"-").concat(item.id),"data-test-subj":"tvbTableVis__value",className:"eui-textRight",style:style},_react.default.createElement("span",null,value),trend)});return _react.default.createElement("tr",{key:row.key},_react.default.createElement("td",null,rowDisplay),columns)});_this.dateFormatter=new DateFormat({},_this.props.getConfig);return _this}_createClass(TableVis,[{key:"renderHeader",value:function renderHeader(){var _this$props=this.props,model=_this$props.model,uiState=_this$props.uiState,onUiState=_this$props.onUiState;var stateKey="".concat(model.type,".sort");var sort=uiState.get(stateKey,{column:"_default_",order:"asc"});var calculateHeaderLabel=function calculateHeaderLabel(metric,item){var defaultLabel=item.label||(0,_calculate_label.calculateLabel)(metric,item.metrics);switch(metric.type){case _metric_types.METRIC_TYPES.PERCENTILE:return"".concat(defaultLabel," (").concat((0,_lodash.last)(metric.percentiles).value||0,")");case _metric_types.METRIC_TYPES.PERCENTILE_RANK:return"".concat(defaultLabel," (").concat((0,_lodash.last)(metric.values)||0,")");default:return defaultLabel}};var columns=this.visibleSeries.map(function(item){var metric=(0,_lodash.last)(item.metrics);var label=calculateHeaderLabel(metric,item);var handleClick=function handleClick(){if(!(0,_is_sortable.isSortable)(metric))return;var order;if(sort.column===item.id){order=sort.order==="asc"?"desc":"asc"}else{order="asc"}onUiState(stateKey,{column:item.id,order:order})};var sortComponent;if((0,_is_sortable.isSortable)(metric)){var _sortIcon;if(sort.column===item.id){_sortIcon=sort.order==="asc"?"sortUp":"sortDown"}else{_sortIcon="empty"}sortComponent=_react.default.createElement(_eui.EuiIcon,{type:_sortIcon})}var headerContent=_react.default.createElement("span",null,label," ",sortComponent);if(!(0,_is_sortable.isSortable)(metric)){headerContent=_react.default.createElement(_eui.EuiToolTip,{content:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.columnNotSortableTooltip",defaultMessage:"This column is not sortable"})},headerContent)}return _react.default.createElement("th",{onClick:handleClick,key:item.id,scope:"col"},headerContent)});var label=model.pivot_label||model.pivot_field||model.pivot_id;var sortIcon;if(sort.column==="_default_"){sortIcon=sort.order==="asc"?"sortUp":"sortDown"}else{sortIcon="empty"}var sortComponent=_react.default.createElement(_eui.EuiIcon,{type:sortIcon});var handleSortClick=function handleSortClick(){var order;if(sort.column==="_default_"){order=sort.order==="asc"?"desc":"asc"}else{order="asc"}onUiState(stateKey,{column:"_default_",order:order})};return _react.default.createElement("tr",null,_react.default.createElement("th",{className:"eui-textLeft",scope:"col",onClick:handleSortClick},label," ",sortComponent),columns)}},{key:"render",value:function render(){var _this$props2=this.props,visData=_this$props2.visData,model=_this$props2.model;var header=this.renderHeader();var rows;if((0,_lodash.isArray)(visData.series)&&visData.series.length){rows=visData.series.map(this.renderRow)}else{var message=model.pivot_id?_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.noResultsAvailableMessage",defaultMessage:"No results available."}):_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.noResultsAvailableWithDescriptionMessage",defaultMessage:"No results available. You must choose a group by field for this visualization."});rows=_react.default.createElement("tr",null,_react.default.createElement("td",{colSpan:this.visibleSeries.length+1},message))}return _react.default.createElement("div",{className:"tvbVis","data-test-subj":"tableView"},_react.default.createElement("table",{className:"table"},_react.default.createElement("thead",null,header),_react.default.createElement("tbody",null,rows)))}},{key:"visibleSeries",get:function get(){return(0,_lodash.get)(this.props,"model.series",[]).filter(function(series){return!series.hidden})}}]);return TableVis}(_react.Component);exports.TableVis=TableVis;TableVis.defaultProps={sort:{}};TableVis.propTypes={visData:_propTypes.default.object,model:_propTypes.default.object,backgroundColor:_propTypes.default.string,onPaginate:_propTypes.default.func,onUiState:_propTypes.default.func,uiState:_propTypes.default.object,pageNumber:_propTypes.default.number,getConfig:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isSortable=isSortable;var _basic_aggs=__webpack_require__(651);function isSortable(metric){return _basic_aggs.basicAggs.includes(metric.type)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.gauge=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _vis_with_splits=__webpack_require__(649);var _tick_formatter=__webpack_require__(85);var _lodash=_interopRequireWildcard(__webpack_require__(1));var _gauge=__webpack_require__(1385);var _get_last_value=__webpack_require__(72);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getColors(props){var model=props.model,visData=props.visData;var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]).filter(function(s){return!(0,_lodash.isUndefined)(s)});var text;var gauge;if(model.gauge_color_rules){model.gauge_color_rules.forEach(function(rule){if(rule.operator&&rule.value!=null){var value=series[0]&&(0,_get_last_value.getLastValue)(series[0].data)||0;if(_lodash.default[rule.operator](value,rule.value)){gauge=rule.gauge;text=rule.text}}})}return{text:text,gauge:gauge}}function GaugeVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var colors=getColors(props);var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]).filter(function(row){return row}).map(function(row,i){var seriesDef=model.series.find(function(s){return(0,_lodash.includes)(row.id,s.id)});var newProps={};if(seriesDef){newProps.formatter=(0,_tick_formatter.tickFormatter)(seriesDef.formatter,seriesDef.value_template,props.getConfig)}if(i===0&&colors.gauge)newProps.color=colors.gauge;return(0,_lodash.assign)({},row,newProps)});var panelBackgroundColor=model.background_color||backgroundColor;var style={backgroundColor:panelBackgroundColor};var params={metric:series[0],type:model.gauge_style||"half",additionalLabel:props.additionalLabel,backgroundColor:panelBackgroundColor};if(colors.text){params.valueColor=colors.text}if(model.gauge_width)params.gaugeLine=model.gauge_width;if(model.gauge_inner_color)params.innerColor=model.gauge_inner_color;if(model.gauge_inner_width)params.innerLine=model.gauge_inner_width;if(model.gauge_max!=null)params.max=model.gauge_max;return _react.default.createElement("div",{className:"tvbVis",style:style},_react.default.createElement(_gauge.Gauge,params))}GaugeVisualization.propTypes={backgroundColor:_propTypes.default.string,className:_propTypes.default.string,additionalLabel:_propTypes.default.string,model:_propTypes.default.object,onBrush:_propTypes.default.func,onChange:_propTypes.default.func,visData:_propTypes.default.object,getConfig:_propTypes.default.func};var gauge=(0,_vis_with_splits.visWithSplits)(GaugeVisualization);exports.gauge=gauge},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Gauge=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(26));var _set_is_reversed=__webpack_require__(103);var _get_last_value=__webpack_require__(72);var _get_value_by=__webpack_require__(1386);var _gauge_vis=__webpack_require__(1387);var _reactcss=_interopRequireDefault(__webpack_require__(63));var _calculate_coordinates=__webpack_require__(432);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Gauge=function(_Component){_inherits(Gauge,_Component);function Gauge(props){var _this;_classCallCheck(this,Gauge);_this=_possibleConstructorReturn(this,_getPrototypeOf(Gauge).call(this,props));_this.state={scale:1,top:0,left:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_assertThisInitialized(_this));return _this}_createClass(Gauge,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates.calculateCoordinates)(_this2.inner,_this2.resize,_this2.state);if(newState&&_this2.state&&!_lodash.default.isEqual(newState,_this2.state)){_this2.handleResize()}check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates.calculateCoordinates)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,metric=_this$props.metric,type=_this$props.type;var _this$state=this.state,scale=_this$state.scale,translateX=_this$state.translateX,translateY=_this$state.translateY;var value=metric&&(0,_get_last_value.getLastValue)(metric.data)||0;var max=metric&&(0,_get_value_by.getValueBy)("max",metric.data)||1;var formatter=metric&&(metric.tickFormatter||metric.formatter)||this.props.tickFormatter||function(v){return v};var title=metric&&metric.label||"";var styles=(0,_reactcss.default)({default:{inner:{top:this.state.top||0,left:this.state.left||0,transform:"matrix(".concat(scale,", 0, 0, ").concat(scale,", ").concat(translateX,", ").concat(translateY,")")}},valueColor:{value:{color:this.props.valueColor}}},this.props);var gaugeProps={value:value,reversed:(0,_set_is_reversed.isBackgroundDark)(this.props.backgroundColor),gaugeLine:this.props.gaugeLine,innerLine:this.props.innerLine,innerColor:this.props.innerColor,max:this.props.max||max,color:metric&&metric.color||"#8ac336",type:type};var metrics;var additionalLabel;if(this.props.additionalLabel){additionalLabel=_react.default.createElement("div",{className:"tvbVisGauge__additionalLabel"},this.props.additionalLabel)}if(type==="half"){metrics=_react.default.createElement("div",{className:"tvbVisHalfGauge__metrics",ref:function ref(el){return _this3.inner=el},style:styles.inner},_react.default.createElement("div",{className:"tvbVisGauge__label",ref:"title"},title),_react.default.createElement("div",{className:"tvbVisGauge__value",style:styles.value,ref:"label"},formatter(value)),additionalLabel)}else{metrics=_react.default.createElement("div",{className:"tvbVisCircleGauge__metrics",ref:function ref(el){return _this3.inner=el},style:styles.inner},_react.default.createElement("div",{className:"tvbVisGauge__value",style:styles.value,ref:"label"},formatter(value)),_react.default.createElement("div",{className:"tvbVisGauge__label",ref:"title"},title),additionalLabel)}var classes=(0,_classnames.default)({tvbVisHalfGauge:type==="half",tvbVisCircleGauge:type==="circle","tvbVisGauge--reversed":(0,_set_is_reversed.isBackgroundInverted)(this.props.backgroundColor)});return _react.default.createElement("div",{className:classes},_react.default.createElement("div",{ref:function ref(el){return _this3.resize=el},className:"tvbVisGauge__resize","data-test-subj":"tvbVisGaugeContainer"},metrics,_react.default.createElement(_gauge_vis.GaugeVis,gaugeProps)))}}]);return Gauge}(_react.Component);exports.Gauge=Gauge;Gauge.defaultProps={type:"half",innerLine:2,gaugeLine:10};Gauge.propTypes={gaugeLine:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),innerColor:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),innerLine:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),max:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),metric:_propTypes.default.object,backgroundColor:_propTypes.default.string,type:_propTypes.default.oneOf(["half","circle"]),valueColor:_propTypes.default.string,additionalLabel:_propTypes.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getValueBy=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getValueBy=function getValueBy(fn,data){if(_lodash.default.isNumber(data))return data;if(!Array.isArray(data))return 0;var values=data.map(function(v){return v[1]});return _lodash.default[fn](values)};exports.getValueBy=getValueBy},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GaugeVis=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _reactcss=_interopRequireDefault(__webpack_require__(63));var _calculate_coordinates=__webpack_require__(432);var _colors=__webpack_require__(647);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var GaugeVis=function(_Component){_inherits(GaugeVis,_Component);function GaugeVis(props){var _this;_classCallCheck(this,GaugeVis);_this=_possibleConstructorReturn(this,_getPrototypeOf(GaugeVis).call(this,props));_this.state={scale:1,top:0,left:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_assertThisInitialized(_this));return _this}_createClass(GaugeVis,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates.calculateCoordinates)(_this2.inner,_this2.resize,_this2.state);if(newState&&_this2.state&&!_lodash.default.isEqual(newState,_this2.state)){_this2.handleResize()}check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates.calculateCoordinates)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,type=_this$props.type,value=_this$props.value,max=_this$props.max,color=_this$props.color;var _this$state=this.state,scale=_this$state.scale,translateX=_this$state.translateX,translateY=_this$state.translateY;var size=2*Math.PI*50;var sliceSize=type==="half"?.6:1;var percent=value<max?value/max:1;var styles=(0,_reactcss.default)({default:{resize:{position:"relative",display:"flex",rowDirection:"column",flex:"1 0 auto",overflow:"hidden"},svg:{position:"absolute",top:this.state.top,left:this.state.left,transform:"matrix(".concat(scale,", 0, 0, ").concat(scale,", ").concat(translateX,", ").concat(translateY,")")},innerLine:{strokeWidth:this.props.innerLine},gaugeLine:{strokeWidth:this.props.gaugeLine}},half:{svg:{transform:"matrix(".concat(scale,", 0, 0, ").concat(scale,", ").concat(translateX,", ").concat(translateY,")")}}},{half:type==="half"});var props={circle:{r:50,cx:60,cy:60,fill:"rgba(0,0,0,0)",stroke:color,strokeWidth:this.props.gaugeLine,strokeDasharray:"".concat(percent*sliceSize*size," ").concat(size),transform:"rotate(-90 60 60)"},circleBackground:{r:50,cx:60,cy:60,fill:"rgba(0,0,0,0)",stroke:_colors.COLORS.lineColor,strokeDasharray:"".concat(sliceSize*size," ").concat(size),strokeWidth:this.props.innerLine}};if(type==="half"){props.circle.transform="rotate(-197.8 60 60)";props.circleBackground.transform="rotate(162 60 60)"}if(this.props.innerColor){props.circleBackground.stroke=this.props.innerColor}var svg;if(type==="half"){svg=_react.default.createElement("svg",{width:120.72,height:78.72},_react.default.createElement("circle",_extends({},props.circleBackground,{style:styles.innerLine})),_react.default.createElement("circle",_extends({},props.circle,{style:styles.gaugeLine})))}else{svg=_react.default.createElement("svg",{width:120.72,height:120.72},_react.default.createElement("circle",props.circleBackground),_react.default.createElement("circle",props.circle))}return _react.default.createElement("div",{ref:function ref(el){return _this3.resize=el},style:styles.resize},_react.default.createElement("div",{style:styles.svg,ref:function ref(el){return _this3.inner=el}},svg))}}]);return GaugeVis}(_react.Component);exports.GaugeVis=GaugeVis;GaugeVis.defaultProps={innerLine:2,gaugeLine:10};GaugeVis.propTypes={color:_propTypes.default.string,gaugeLine:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),innerColor:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),innerLine:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),max:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),metric:_propTypes.default.object,reversed:_propTypes.default.bool,value:_propTypes.default.number,type:_propTypes.default.oneOf(["half","circle"])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownVisualization=MarkdownVisualization;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(26));var _uuid=_interopRequireDefault(__webpack_require__(31));var _lodash=__webpack_require__(1);var _public=__webpack_require__(104);var _error=__webpack_require__(652);var _replace_vars=__webpack_require__(364);var _convert_series_to_vars=__webpack_require__(653);var _set_is_reversed=__webpack_require__(103);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getMarkdownId=function getMarkdownId(id){return"markdown-".concat(id)};function MarkdownVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData,dateFormat=props.dateFormat;var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]);var variables=(0,_convert_series_to_vars.convertSeriesToVars)(series,model,dateFormat,props.getConfig);var markdownElementId=getMarkdownId(_uuid.default.v1());var panelBackgroundColor=model.background_color||backgroundColor;var style={backgroundColor:panelBackgroundColor};var markdown;var markdownCss="";if(model.markdown){var markdownSource=(0,_replace_vars.replaceVars)(model.markdown,{},_objectSpread({_all:variables},variables));if(model.markdown_css){markdownCss=model.markdown_css.replace(new RegExp(getMarkdownId(model.id),"g"),markdownElementId)}var markdownClasses=(0,_classnames.default)("kbnMarkdown__body",{"kbnMarkdown__body--reversed":(0,_set_is_reversed.isBackgroundInverted)(panelBackgroundColor)});var contentClasses=(0,_classnames.default)("tvbMarkdown__content","tvbMarkdown__content--".concat(model.markdown_vertical_align),{"tvbMarkdown__content-isScrolling":model.markdown_scrollbars},markdownClasses);var markdownError=markdownSource instanceof Error?markdownSource:null;markdown=_react.default.createElement("div",{className:"tvbMarkdown","data-test-subj":"tsvbMarkdown"},markdownError&&_react.default.createElement(_error.ErrorComponent,{error:markdownError}),_react.default.createElement("style",{type:"text/css"},markdownCss),_react.default.createElement("div",{className:contentClasses},_react.default.createElement("div",{id:markdownElementId},!markdownError&&_react.default.createElement(_public.Markdown,{markdown:markdownSource,openLinksInNewTab:model.markdown_openLinksInNewTab}))))}return _react.default.createElement("div",{className:"tvbVis",style:style},markdown)}MarkdownVisualization.propTypes={backgroundColor:_propTypes.default.string,className:_propTypes.default.string,model:_propTypes.default.object,onBrush:_propTypes.default.func,onChange:_propTypes.default.func,visData:_propTypes.default.object,dateFormat:_propTypes.default.string,getConfig:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoDataComponent=NoDataComponent;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NoDataComponent(){return _react.default.createElement("div",{className:"visError","data-test-subj":"noTSVBDataMessage"},_react.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_react.default.createElement(_eui.EuiIcon,{type:"visualizeApp",size:"m",color:"subdued","aria-hidden":"true"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.noDataDescription",defaultMessage:"No data to display for the selected metrics"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisPicker=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _panel_types=__webpack_require__(102);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function VisPickerItem(props){var label=props.label,type=props.type,selected=props.selected;var itemClassName="tvbVisPickerItem";return _react.default.createElement(_eui.EuiTab,{className:itemClassName,isSelected:selected,onClick:function onClick(){return props.onClick(type)},"data-test-subj":"".concat(type,"TsvbTypeBtn")},label)}VisPickerItem.propTypes={label:_propTypes.default.string,onClick:_propTypes.default.func,type:_propTypes.default.string,selected:_propTypes.default.bool};var VisPicker=(0,_react2.injectI18n)(function(props){var handleChange=function handleChange(type){props.onChange({type:type})};var model=props.model,intl=props.intl;var tabs=[{type:_panel_types.PANEL_TYPES.TIMESERIES,label:intl.formatMessage({id:"tsvb.visPicker.timeSeriesLabel",defaultMessage:"Time Series"})},{type:_panel_types.PANEL_TYPES.METRIC,label:intl.formatMessage({id:"tsvb.visPicker.metricLabel",defaultMessage:"Metric"})},{type:_panel_types.PANEL_TYPES.TOP_N,label:intl.formatMessage({id:"tsvb.visPicker.topNLabel",defaultMessage:"Top N"})},{type:_panel_types.PANEL_TYPES.GAUGE,label:intl.formatMessage({id:"tsvb.visPicker.gaugeLabel",defaultMessage:"Gauge"})},{type:_panel_types.PANEL_TYPES.MARKDOWN,label:"Markdown"},{type:_panel_types.PANEL_TYPES.TABLE,label:intl.formatMessage({id:"tsvb.visPicker.tableLabel",defaultMessage:"Table"})}].map(function(item){return _react.default.createElement(VisPickerItem,_extends({key:item.type,onClick:handleChange,selected:item.type===model.type},item))});return _react.default.createElement(_eui.EuiTabs,null,tabs)});exports.VisPicker=VisPicker;VisPicker.propTypes={model:_propTypes.default.object,onChange:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelConfig=PanelConfig;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _timeseries=__webpack_require__(1392);var _metric=__webpack_require__(1452);var _top_n=__webpack_require__(1453);var _table=__webpack_require__(1454);var _gauge=__webpack_require__(1455);var _markdown=__webpack_require__(1456);var _react2=__webpack_require__(5);var _form_validation_context=__webpack_require__(657);var _vis_data_context=__webpack_require__(366);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var types={timeseries:_timeseries.TimeseriesPanelConfig,table:_table.TablePanelConfig,metric:_metric.MetricPanelConfig,top_n:_top_n.TopNPanelConfig,gauge:_gauge.GaugePanelConfig,markdown:_markdown.MarkdownPanelConfig};var checkModelValidity=function checkModelValidity(validationResults){return Boolean(Object.values(validationResults).every(function(isValid){return isValid}))};function PanelConfig(props){var model=props.model;var Component=types[model.type];var _useState=(0,_react.useState)({}),_useState2=_slicedToArray(_useState,1),formValidationResults=_useState2[0];var _useState3=(0,_react.useState)({}),_useState4=_slicedToArray(_useState3,2),visData=_useState4[0],setVisData=_useState4[1];(0,_react.useEffect)(function(){model.isModelInvalid=!checkModelValidity(formValidationResults)});(0,_react.useEffect)(function(){var visDataSubscription=props.visData$.subscribe(function(){var visData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return setVisData(visData)});return function cleanup(){visDataSubscription.unsubscribe()}},[props.visData$]);var updateControlValidity=function updateControlValidity(controlKey,isControlValid){formValidationResults[controlKey]=isControlValid};if(Component){return _react.default.createElement(_form_validation_context.FormValidationContext.Provider,{value:updateControlValidity},_react.default.createElement(_vis_data_context.VisDataContext.Provider,{value:visData},_react.default.createElement(Component,props)))}return _react.default.createElement("div",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.missingPanelConfigDescription",defaultMessage:"Missing panel config for “{modelType}”",values:{modelType:model.type}}))}PanelConfig.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func,dateFormat:_propTypes.default.string,visData$:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeseriesPanelConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _series_editor=__webpack_require__(105);var _annotations_editor=__webpack_require__(1450);var _index_pattern=__webpack_require__(76);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _color_picker=__webpack_require__(52);var _yes_no=__webpack_require__(54);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _get_default_query_language=__webpack_require__(43);var _query_bar_wrapper=__webpack_require__(46);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var TimeseriesPanelConfigUi=function(_Component){_inherits(TimeseriesPanelConfigUi,_Component);function TimeseriesPanelConfigUi(props){var _this;_classCallCheck(this,TimeseriesPanelConfigUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(TimeseriesPanelConfigUi).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(TimeseriesPanelConfigUi,[{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var defaults={filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()},axis_max:"",axis_min:"",legend_position:"right",show_grid:1};var model=_objectSpread({},defaults,{},this.props.model);var selectedTab=this.state.selectedTab;var handleSelectChange=(0,_create_select_handler.createSelectHandler)(this.props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var intl=this.props.intl;var positionOptions=[{label:intl.formatMessage({id:"tsvb.timeseries.positionOptions.rightLabel",defaultMessage:"Right"}),value:"right"},{label:intl.formatMessage({id:"tsvb.timeseries.positionOptions.leftLabel",defaultMessage:"Left"}),value:"left"}];var selectedPositionOption=positionOptions.find(function(option){return model.axis_position===option.value});var scaleOptions=[{label:intl.formatMessage({id:"tsvb.timeseries.scaleOptions.normalLabel",defaultMessage:"Normal"}),value:"normal"},{label:intl.formatMessage({id:"tsvb.timeseries.scaleOptions.logLabel",defaultMessage:"Log"}),value:"log"}];var selectedAxisScaleOption=scaleOptions.find(function(option){return model.axis_scale===option.value});var legendPositionOptions=[{label:intl.formatMessage({id:"tsvb.timeseries.legendPositionOptions.rightLabel",defaultMessage:"Right"}),value:"right"},{label:intl.formatMessage({id:"tsvb.timeseries.legendPositionOptions.leftLabel",defaultMessage:"Left"}),value:"left"},{label:intl.formatMessage({id:"tsvb.timeseries.legendPositionOptions.bottomLabel",defaultMessage:"Bottom"}),value:"bottom"}];var selectedLegendPosOption=legendPositionOptions.find(function(option){return model.legend_position===option.value});var view;if(selectedTab==="data"){view=_react.default.createElement(_series_editor.SeriesEditor,{fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange})}else if(selectedTab==="annotations"){view=_react.default.createElement(_annotations_editor.AnnotationsEditor,{fields:this.props.fields,model:this.props.model,name:"annotations",onChange:this.props.onChange})}else{view=_react.default.createElement("div",{className:"tvbPanelConfig__container"},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.dataLabel",defaultMessage:"Data"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this2.props.onChange({filter:filter})},indexPatterns:[model.index_pattern||model.default_index_pattern]}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.styleLabel",defaultMessage:"Style"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("axisMin"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisMinLabel",defaultMessage:"Axis min"})},_react.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("axis_min"),value:model.axis_min}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("axisMax"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisMaxLabel",defaultMessage:"Axis max"})},_react.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("axis_max"),value:model.axis_max}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("axisPos"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisPositionLabel",defaultMessage:"Axis position"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:positionOptions,selectedOptions:selectedPositionOption?[selectedPositionOption]:[],onChange:handleSelectChange("axis_position"),singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("axisScale"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisScaleLabel",defaultMessage:"Axis scale"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:scaleOptions,selectedOptions:selectedAxisScaleOption?[selectedAxisScaleOption]:[],onChange:handleSelectChange("axis_scale"),singleSelection:{asPlainText:true}})))),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_color_picker.ColorPicker,{onChange:this.props.onChange,name:"background_color",value:model.background_color})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.showLegendLabel",defaultMessage:"Show legend?"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_yes_no.YesNo,{value:model.show_legend,name:"show_legend",onChange:this.props.onChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0},htmlFor:htmlId("legendPos")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.legendPositionLabel",defaultMessage:"Legend position"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("legendPos"),options:legendPositionOptions,selectedOptions:selectedLegendPosOption?[selectedLegendPosOption]:[],onChange:handleSelectChange("legend_position"),singleSelection:{asPlainText:true}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.displayGridLabel",defaultMessage:"Display grid"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_yes_no.YesNo,{value:model.show_grid,name:"show_grid",onChange:this.props.onChange})))))}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")},"data-test-subj":"timeSeriesEditorPanelOptionsBtn"},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"})),_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="annotations",onClick:function onClick(){return _this2.switchTab("annotations")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.annotationsTab.annotationsButtonLabel",defaultMessage:"Annotations"}))),view)}}]);return TimeseriesPanelConfigUi}(_react.Component);TimeseriesPanelConfigUi.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func};var TimeseriesPanelConfig=(0,_react2.injectI18n)(TimeseriesPanelConfigUi);exports.TimeseriesPanelConfig=TimeseriesPanelConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reIdSeries=void 0;var _uuid=_interopRequireDefault(__webpack_require__(31));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var reIdSeries=function reIdSeries(source){var series=_lodash.default.cloneDeep(source);series.id=_uuid.default.v1();series.metrics.forEach(function(metric){var id=_uuid.default.v1();var metricId=metric.id;metric.id=id;if(series.terms_order_by===metricId)series.terms_order_by=id;series.metrics.filter(function(r){return r.field===metricId}).forEach(function(r){return r.field=id});series.metrics.filter(function(r){return r.type==="calculation"&&r.variables.some(function(v){return v.field===metricId})}).forEach(function(r){r.variables.filter(function(v){return v.field===metricId}).forEach(function(v){v.id=_uuid.default.v1();v.field=id})})});return series};exports.reIdSeries=reIdSeries},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Series=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(1);var _series=__webpack_require__(1395);var _series2=__webpack_require__(1442);var _series3=__webpack_require__(1443);var _series4=__webpack_require__(1444);var _series5=__webpack_require__(1446);var _series6=__webpack_require__(1447);var _react2=__webpack_require__(5);var _vis_data_context=__webpack_require__(366);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var lookup={top_n:_series3.TopNSeries,table:_series4.TableSeries,metric:_series2.MetricSeries,timeseries:_series.TimeseriesSeries,gauge:_series5.GaugeSeries,markdown:_series6.MarkdownSeries};var Series=function(_Component){_inherits(Series,_Component);function Series(){var _getPrototypeOf2;var _this;_classCallCheck(this,Series);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Series)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{visible:true,selectedTab:"metrics"});_defineProperty(_assertThisInitialized(_this),"switchTab",function(selectedTab){_this.setState({selectedTab:selectedTab})});_defineProperty(_assertThisInitialized(_this),"handleChange",function(part){if(_this.props.onChange){var model=_this.props.model;var doc=(0,_lodash.assign)({},model,part);_this.props.onChange(doc)}});_defineProperty(_assertThisInitialized(_this),"togglePanelActivation",function(){var model=_this.props.model;_this.handleChange({hidden:!model.hidden})});_defineProperty(_assertThisInitialized(_this),"toggleVisible",function(e){e.preventDefault();_this.setState({visible:!_this.state.visible})});return _this}_createClass(Series,[{key:"render",value:function render(){var _this2=this;var panel=this.props.panel;var Component=lookup[panel.type];return Boolean(Component)?_react.default.createElement(_vis_data_context.VisDataContext.Consumer,null,function(visData){return _react.default.createElement(Component,{className:_this2.props.className,disableAdd:_this2.props.disableAdd,uiRestrictions:visData.uiRestrictions,disableDelete:_this2.props.disableDelete,fields:_this2.props.fields,name:_this2.props.name,onAdd:_this2.props.onAdd,onChange:_this2.handleChange,onClone:_this2.props.onClone,onDelete:_this2.props.onDelete,model:_this2.props.model,panel:_this2.props.panel,selectedTab:_this2.state.selectedTab,style:_this2.props.style,switchTab:_this2.switchTab,toggleVisible:_this2.toggleVisible,togglePanelActivation:_this2.togglePanelActivation,visible:_this2.state.visible,dragHandleProps:_this2.props.dragHandleProps,indexPatternForQuery:panel.index_pattern||panel.default_index_pattern})}):_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.missingSeriesComponentDescription",defaultMessage:"Missing Series component for panel type: {panelType}",values:{panelType:panel.type}})}}]);return Series}(_react.Component);exports.Series=Series;Series.defaultProps={name:"metrics"};Series.propTypes={className:_propTypes.default.string,disableAdd:_propTypes.default.bool,disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,name:_propTypes.default.string,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onClone:_propTypes.default.func,onDelete:_propTypes.default.func,model:_propTypes.default.object,panel:_propTypes.default.object,dragHandleProps:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeseriesSeries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _color_picker=__webpack_require__(52);var _add_delete_buttons=__webpack_require__(42);var _aggs=__webpack_require__(106);var _config=__webpack_require__(1433);var _series_drag_handler=__webpack_require__(86);var _eui=__webpack_require__(3);var _split=__webpack_require__(123);var _create_text_handler=__webpack_require__(21);var _react2=__webpack_require__(5);var _panel_types=__webpack_require__(102);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TimeseriesSeriesUI=(0,_react2.injectI18n)(function(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,onChange=props.onChange,visible=props.visible,intl=props.intl,name=props.name,uiRestrictions=props.uiRestrictions;var defaults={label:"",type:_panel_types.PANEL_TYPES.TIMESERIES};var model=_objectSpread({},defaults,{},props.model);var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react.default.createElement("div",null,_react.default.createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}),_react.default.createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react.default.createElement(_split.Split,{onChange:props.onChange,fields:fields,panel:panel,model:model,uiRestrictions:uiRestrictions})))}else{seriesBody=_react.default.createElement(_config.TimeseriesConfig,{fields:props.fields,model:model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react.default.createElement("div",{className:"tvbSeries__body"},_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.tab.metricsLabel",defaultMessage:"Metrics"})),_react.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.tab.optionsLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker=_react.default.createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});return _react.default.createElement("div",{className:"".concat(props.className),style:props.style},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.timeSeries.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},colorPicker),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.timeSeries.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react.default.createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.timeSeries.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.timeSeries.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.timeSeries.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,togglePanelActivation:props.togglePanelActivation,isPanelActive:!model.hidden,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)});TimeseriesSeriesUI.propTypes={className:_propTypes.default.string,colorPicker:_propTypes.default.bool,disableAdd:_propTypes.default.bool,disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,name:_propTypes.default.string,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onClone:_propTypes.default.func,onDelete:_propTypes.default.func,model:_propTypes.default.object,panel:_propTypes.default.object,selectedTab:_propTypes.default.string,style:_propTypes.default.object,switchTab:_propTypes.default.func,toggleVisible:_propTypes.default.func,visible:_propTypes.default.bool,togglePanelActivation:_propTypes.default.func,uiRestrictions:_propTypes.default.object,dragHandleProps:_propTypes.default.object,indexPatternForQuery:_propTypes.default.string};var TimeseriesSeries=(0,_react2.injectI18n)(TimeseriesSeriesUI);exports.TimeseriesSeries=TimeseriesSeries},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomColorPicker=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _common=__webpack_require__(1399);var _ChromeFields=_interopRequireDefault(__webpack_require__(1400));var _ChromePointer=_interopRequireDefault(__webpack_require__(1401));var _ChromePointerCircle=_interopRequireDefault(__webpack_require__(1402));var _CompactColor=_interopRequireDefault(__webpack_require__(1403));var _color=_interopRequireDefault(__webpack_require__(1457));var _reactAddonsShallowCompare=_interopRequireDefault(__webpack_require__(1459));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var CustomColorPickerUI=function(_Component){_inherits(CustomColorPickerUI,_Component);function CustomColorPickerUI(props){var _this;_classCallCheck(this,CustomColorPickerUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(CustomColorPickerUI).call(this,props));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this}_createClass(CustomColorPickerUI,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState){return(0,_reactAddonsShallowCompare.default)(nextProps,nextState)}},{key:"handleChange",value:function handleChange(data){this.props.onChange(data)}},{key:"render",value:function render(){var _this2=this;var rgb=this.props.rgb;var styles={active:{background:"rgba(".concat(rgb.r,", ").concat(rgb.g,", ").concat(rgb.b,", ").concat(rgb.a,")")},Saturation:{radius:"2px 2px 0 0 "},Hue:{radius:"2px"},Alpha:{radius:"2px"}};var handleSwatchChange=function handleSwatchChange(data){if(data.hex){_color.default.isValidHex(data.hex)&&_this2.props.onChange({hex:data.hex,source:"hex"})}else{_this2.props.onChange(data)}};var swatches=this.props.colors.map(function(c){return _react.default.createElement(_CompactColor.default,{key:c,color:c,onClick:handleSwatchChange})});return _react.default.createElement("div",{className:"tvbColorPickerPopUp","data-test-subj":"tvbColorPickerPopUp"},_react.default.createElement("div",{className:"tvbColorPickerPopUp__saturation"},_react.default.createElement(_common.Saturation,_extends({style:styles.Saturation},this.props,{pointer:_ChromePointerCircle.default,onChange:this.handleChange}))),_react.default.createElement("div",{className:"tvbColorPickerPopUp__body"},_react.default.createElement("div",{className:"tvbColorPickerPopUp__controls"},_react.default.createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__color-disableAlpha":"tvbColorPickerPopUp__color"},_react.default.createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__swatch-disableAlpha":"tvbColorPickerPopUp__swatch"},_react.default.createElement("div",{className:"tvbColorPickerPopUp__active"}),_react.default.createElement(_common.Checkboard,null))),_react.default.createElement("div",{className:"tvbColorPickerPopUp__toggles"},_react.default.createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__hue-disableAlpha":"tvbColorPickerPopUp__hue"},_react.default.createElement(_common.Hue,_extends({style:styles.Hue},this.props,{pointer:_ChromePointer.default,onChange:this.handleChange}))),_react.default.createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__alpha-disableAlpha":"tvbColorPickerPopUp__alpha"},_react.default.createElement(_common.Alpha,_extends({style:styles.Alpha},this.props,{pointer:_ChromePointer.default,onChange:this.handleChange}))))),_react.default.createElement(_ChromeFields.default,_extends({},this.props,{onChange:this.handleChange,disableAlpha:this.props.disableAlpha})),_react.default.createElement("div",{className:"tvbColorPickerPopUp__swatches"},swatches)))}}]);return CustomColorPickerUI}(_react.Component);CustomColorPickerUI.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#0F1419","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]};CustomColorPickerUI.propTypes={color:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.object]),onChangeComplete:_propTypes.default.func,onChange:_propTypes.default.func};var CustomColorPicker=(0,_common.ColorWrap)(CustomColorPickerUI);exports.CustomColorPicker=CustomColorPicker},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(13)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2108)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(312)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2304)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2460)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2461)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2462)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Agg=Agg;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_to_component=__webpack_require__(1405);var _unsupported_agg=__webpack_require__(1430);var _temporary_unsupported_agg=__webpack_require__(1431);var _check_ui_restrictions=__webpack_require__(107);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function Agg(props){var model=props.model,uiRestrictions=props.uiRestrictions;var Component=_agg_to_component.aggToComponent[model.type];if(!Component){Component=_unsupported_agg.UnsupportedAgg}else if(!(0,_check_ui_restrictions.isMetricEnabled)(model.type,uiRestrictions)){Component=_temporary_unsupported_agg.TemporaryUnsupportedAgg}var style=_objectSpread({cursor:"default"},props.style);return _react.default.createElement("div",{className:props.className,style:style},_react.default.createElement(Component,{fields:props.fields,disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onChange:props.onChange,onDelete:props.onDelete,panel:props.panel,series:props.series,siblings:props.siblings,uiRestrictions:props.uiRestrictions,dragHandleProps:props.dragHandleProps}))}Agg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array,uiRestrictions:_propTypes.default.object,dragHandleProps:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggToComponent=void 0;var _moving_average=__webpack_require__(1406);var _derivative=__webpack_require__(1411);var _calculation=__webpack_require__(1412);var _std_agg=__webpack_require__(1413);var _percentile=__webpack_require__(1414);var _cumulative_sum=__webpack_require__(1416);var _std_deviation=__webpack_require__(1417);var _std_sibling=__webpack_require__(1418);var _series_agg=__webpack_require__(1419);var _serial_diff=__webpack_require__(1420);var _positive_only=__webpack_require__(1421);var _filter_ratio=__webpack_require__(1422);var _percentile_rank=__webpack_require__(1423);var _static=__webpack_require__(1427);var _math=__webpack_require__(1428);var _top_hit=__webpack_require__(1429);var aggToComponent={count:_std_agg.StandardAgg,avg:_std_agg.StandardAgg,max:_std_agg.StandardAgg,min:_std_agg.StandardAgg,sum:_std_agg.StandardAgg,std_deviation:_std_deviation.StandardDeviationAgg,sum_of_squares:_std_agg.StandardAgg,variance:_std_agg.StandardAgg,avg_bucket:_std_sibling.StandardSiblingAgg,max_bucket:_std_sibling.StandardSiblingAgg,min_bucket:_std_sibling.StandardSiblingAgg,sum_bucket:_std_sibling.StandardSiblingAgg,variance_bucket:_std_sibling.StandardSiblingAgg,sum_of_squares_bucket:_std_sibling.StandardSiblingAgg,std_deviation_bucket:_std_sibling.StandardSiblingAgg,percentile:_percentile.PercentileAgg,percentile_rank:_percentile_rank.PercentileRankAgg,cardinality:_std_agg.StandardAgg,value_count:_std_agg.StandardAgg,calculation:_calculation.CalculationAgg,cumulative_sum:_cumulative_sum.CumulativeSumAgg,moving_average:_moving_average.MovingAverageAgg,derivative:_derivative.DerivativeAgg,series_agg:_series_agg.SeriesAgg,serial_diff:_serial_diff.SerialDiffAgg,filter_ratio:_filter_ratio.FilterRatioAgg,positive_only:_positive_only.PositiveOnlyAgg,static:_static.Static,math:_math.MathAgg,top_hit:_top_hit.TopHitAgg};exports.aggToComponent=aggToComponent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MovingAverageAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _agg_row=__webpack_require__(28);var _agg_select=__webpack_require__(34);var _metric_select=__webpack_require__(73);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _create_number_handler=__webpack_require__(654);var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _model_options=__webpack_require__(1410);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULTS={model_type:_model_options.MODEL_TYPES.UNWEIGHTED,alpha:.3,beta:.1,gamma:.3,period:1,multiplicative:true,window:5};var shouldShowHint=function shouldShowHint(_ref){var type=_ref.model_type,window=_ref.window,period=_ref.period;return type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_TRIPLE&&period*2>window};var MovingAverageAgg=function MovingAverageAgg(props){var siblings=props.siblings;var model=_objectSpread({},DEFAULTS,{},props.model);var modelOptions=[{label:_i18n.i18n.translate("tsvb.movingAverage.modelOptions.simpleLabel",{defaultMessage:"Simple"}),value:_model_options.MODEL_TYPES.UNWEIGHTED},{label:_i18n.i18n.translate("tsvb.movingAverage.modelOptions.linearLabel",{defaultMessage:"Linear"}),value:_model_options.MODEL_TYPES.WEIGHTED_LINEAR},{label:_i18n.i18n.translate("tsvb.movingAverage.modelOptions.exponentiallyWeightedLabel",{defaultMessage:"Exponentially Weighted"}),value:_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL},{label:_i18n.i18n.translate("tsvb.movingAverage.modelOptions.holtLinearLabel",{defaultMessage:"Holt-Linear"}),value:_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_DOUBLE},{label:_i18n.i18n.translate("tsvb.movingAverage.modelOptions.holtWintersLabel",{defaultMessage:"Holt-Winters"}),value:_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_TRIPLE}];var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleNumberChange=(0,_create_number_handler.createNumberHandler)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();var selectedModelOption=modelOptions.find(function(_ref2){var value=_ref2.value;return model.model_type===value});var multiplicativeOptions=[{label:_i18n.i18n.translate("tsvb.movingAverage.multiplicativeOptions.true",{defaultMessage:"True"}),value:true},{label:_i18n.i18n.translate("tsvb.movingAverage.multiplicativeOptions.false",{defaultMessage:"False"}),value:false}];var selectedMultiplicative=multiplicativeOptions.find(function(_ref3){var value=_ref3.value;return model.multiplicative===value});return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_i18n.i18n.translate("tsvb.movingAverage.aggregationLabel",{defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_i18n.i18n.translate("tsvb.movingAverage.metricLabel",{defaultMessage:"Metric"})},_react.default.createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("model_type"),label:_i18n.i18n.translate("tsvb.movingAverage.modelLabel",{defaultMessage:"Model"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,placeholder:_i18n.i18n.translate("tsvb.movingAverage.model.selectPlaceholder",{defaultMessage:"Select"}),options:modelOptions,selectedOptions:selectedModelOption?[selectedModelOption]:[],onChange:handleSelectChange("model_type"),singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("windowSize"),label:_i18n.i18n.translate("tsvb.movingAverage.windowSizeLabel",{defaultMessage:"Window Size"}),helpText:shouldShowHint(model)&&_i18n.i18n.translate("tsvb.movingAverage.windowSizeHint",{defaultMessage:"Window must always be at least twice the size of your period"})},_react.default.createElement("input",{className:"tvbAgg__input",type:"text",onChange:handleNumberChange("window"),value:model.window})))),(model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL||model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_DOUBLE||model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_TRIPLE)&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("alpha"),label:_i18n.i18n.translate("tsvb.movingAverage.alpha",{defaultMessage:"Alpha"})},_react.default.createElement(_eui.EuiFieldNumber,{step:.1,onChange:handleNumberChange("alpha"),value:model.alpha}))),(model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_DOUBLE||model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_TRIPLE)&&_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("beta"),label:_i18n.i18n.translate("tsvb.movingAverage.beta",{defaultMessage:"Beta"})},_react.default.createElement(_eui.EuiFieldNumber,{step:.1,onChange:handleNumberChange("beta"),value:model.beta}))),model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_TRIPLE&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("gamma"),label:_i18n.i18n.translate("tsvb.movingAverage.gamma",{defaultMessage:"Gamma"})},_react.default.createElement(_eui.EuiFieldNumber,{step:.1,onChange:handleNumberChange("gamma"),value:model.gamma}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("period"),label:_i18n.i18n.translate("tsvb.movingAverage.period",{defaultMessage:"Period"})},_react.default.createElement(_eui.EuiFieldNumber,{step:1,onChange:handleNumberChange("period"),value:model.period}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("multiplicative"),label:_i18n.i18n.translate("tsvb.movingAverage.multiplicative",{defaultMessage:"Multiplicative"})},_react.default.createElement(_eui.EuiComboBox,{placeholder:_i18n.i18n.translate("tsvb.movingAverage.multiplicative.selectPlaceholder",{defaultMessage:"Select"}),options:multiplicativeOptions,selectedOptions:selectedMultiplicative?[selectedMultiplicative]:[],onChange:handleSelectChange("multiplicative"),singleSelection:{asPlainText:true}})))))))};exports.MovingAverageAgg=MovingAverageAgg;MovingAverageAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_UI_RESTRICTION=exports.RESTRICTIONS_KEYS=void 0;var RESTRICTIONS_KEYS={WHITE_LISTED_GROUP_BY_FIELDS:"whiteListedGroupByFields",WHITE_LISTED_METRICS:"whiteListedMetrics",WHITE_LISTED_TIMERANGE_MODES:"whiteListedTimerangeModes"};exports.RESTRICTIONS_KEYS=RESTRICTIONS_KEYS;var DEFAULT_UI_RESTRICTION={"*":true};exports.DEFAULT_UI_RESTRICTION=DEFAULT_UI_RESTRICTION},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateSiblings=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getAncestors(siblings,item){var ancestors=item.id&&[item.id]||[];siblings.forEach(function(sib){if(_lodash.default.includes(ancestors,sib.field)){ancestors.push(sib.id)}});return ancestors}var calculateSiblings=function calculateSiblings(siblings,model){var ancestors=getAncestors(siblings,model);return siblings.filter(function(row){return!_lodash.default.includes(ancestors,row.id)})};exports.calculateSiblings=calculateSiblings},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toPercentileNumber=void 0;var percentileNumberTest=/\d+\.\d+/;var toPercentileNumber=function toPercentileNumber(value){return percentileNumberTest.test("".concat(value))?value:"".concat(value,".0")};exports.toPercentileNumber=toPercentileNumber},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MODEL_TYPES=void 0;var MODEL_TYPES={UNWEIGHTED:"simple",WEIGHTED_EXPONENTIAL:"ewma",WEIGHTED_EXPONENTIAL_DOUBLE:"holt",WEIGHTED_EXPONENTIAL_TRIPLE:"holt_winters",WEIGHTED_LINEAR:"linear"};exports.MODEL_TYPES=MODEL_TYPES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DerivativeAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(34);var _metric_select=__webpack_require__(73);var _agg_row=__webpack_require__(28);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DerivativeAgg=function DerivativeAgg(props){var siblings=props.siblings;var defaults={unit:""};var model=_objectSpread({},defaults,{},props.model);var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.derivative.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type"),fullWidth:true})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.derivative.metricLabel",defaultMessage:"Metric"}),fullWidth:true},_react.default.createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field,fullWidth:true}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("units"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.derivative.unitsLabel",defaultMessage:"Units (1s, 1m, etc)",description:"1s and 1m are required values and must not be translated."}),fullWidth:true},_react.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("unit"),value:model.unit,fullWidth:true})))))};exports.DerivativeAgg=DerivativeAgg;DerivativeAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CalculationAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _uuid=_interopRequireDefault(__webpack_require__(31));var _agg_row=__webpack_require__(28);var _agg_select=__webpack_require__(34);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _vars=__webpack_require__(656);var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var CalculationAgg=function(_Component){_inherits(CalculationAgg,_Component);function CalculationAgg(){_classCallCheck(this,CalculationAgg);return _possibleConstructorReturn(this,_getPrototypeOf(CalculationAgg).apply(this,arguments))}_createClass(CalculationAgg,[{key:"componentWillMount",value:function componentWillMount(){if(!this.props.model.variables){this.props.onChange(_lodash.default.assign({},this.props.model,{variables:[{id:_uuid.default.v1()}]}))}}},{key:"render",value:function render(){var siblings=this.props.siblings;var defaults={script:""};var model=_objectSpread({},defaults,{},this.props.model);var handleChange=(0,_create_change_handler.createChangeHandler)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react.default.createElement(_agg_row.AggRow,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings,dragHandleProps:this.props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"l"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.calculation.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:this.props.panel.type,siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("variables")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.calculation.variablesLabel",defaultMessage:"Variables"})),_react.default.createElement(_vars.CalculationVars,{id:htmlId("variables"),metrics:siblings,onChange:handleChange,name:"variables",model:model})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("painless"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.calculation.painlessScriptLabel",defaultMessage:"Painless Script"}),fullWidth:true,helpText:_react.default.createElement("div",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.calculation.painlessScriptDescription",defaultMessage:"Variables are keys on the {params} object, i.e. {paramsName}. To access the bucket interval (in milliseconds) use {paramsInterval}.",values:{params:_react.default.createElement(_eui.EuiCode,null,"params"),paramsName:_react.default.createElement(_eui.EuiCode,null,"params.<name>"),paramsInterval:_react.default.createElement(_eui.EuiCode,null,"params._interval")}}))},_react.default.createElement(_eui.EuiTextArea,{onChange:handleTextChange("script"),value:model.script,fullWidth:true})))))}}]);return CalculationAgg}(_react.Component);exports.CalculationAgg=CalculationAgg;CalculationAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StandardAgg=StandardAgg;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(34);var _field_select=__webpack_require__(53);var _agg_row=__webpack_require__(28);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _es_types=__webpack_require__(75);var _metric_types=__webpack_require__(365);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StandardAgg(props){var model=props.model,panel=props.panel,series=props.series,fields=props.fields,uiRestrictions=props.uiRestrictions;var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var restrictFields=model.type===_metric_types.METRIC_TYPES.CARDINALITY?[]:[_es_types.ES_TYPES.NUMBER];var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.stdAgg.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,uiRestrictions:uiRestrictions,onChange:handleSelectChange("type"),fullWidth:true})),model.type!=="count"?_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.stdAgg.fieldLabel",defaultMessage:"Field"}),fullWidth:true},_react.default.createElement(_field_select.FieldSelect,{fields:fields,type:model.type,restrict:restrictFields,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field"),uiRestrictions:uiRestrictions,fullWidth:true}))):null))}StandardAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array,uiRestrictions:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentileAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _agg_select=__webpack_require__(34);var _field_select=__webpack_require__(53);var _agg_row=__webpack_require__(28);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _es_types=__webpack_require__(75);var _percentile_ui=__webpack_require__(1415);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var RESTRICT_FIELDS=[_es_types.ES_TYPES.NUMBER];var PercentileAgg=function(_Component){_inherits(PercentileAgg,_Component);function PercentileAgg(){_classCallCheck(this,PercentileAgg);return _possibleConstructorReturn(this,_getPrototypeOf(PercentileAgg).apply(this,arguments))}_createClass(PercentileAgg,[{key:"componentWillMount",value:function componentWillMount(){if(!this.props.model.percentiles){this.props.onChange(_lodash.default.assign({},this.props.model,{percentiles:[(0,_percentile_ui.newPercentile)({value:50})]}))}}},{key:"render",value:function render(){var _this$props=this.props,series=_this$props.series,model=_this$props.model,panel=_this$props.panel,fields=_this$props.fields;var handleChange=(0,_create_change_handler.createChangeHandler)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();return _react.default.createElement(_agg_row.AggRow,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings,dragHandleProps:this.props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.percentile.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:this.props.panel.type,siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.percentile.fieldLabel",defaultMessage:"Field"})},_react.default.createElement(_field_select.FieldSelect,{fields:fields,type:model.type,restrict:RESTRICT_FIELDS,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_percentile_ui.Percentiles,{onChange:handleChange,name:"percentiles",model:model,panel:panel}))}}]);return PercentileAgg}(_react.Component);exports.PercentileAgg=PercentileAgg;PercentileAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Percentiles=exports.newPercentile=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _collection_actions=__webpack_require__(74);var _add_delete_buttons=__webpack_require__(42);var _uuid=_interopRequireDefault(__webpack_require__(31));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var newPercentile=function newPercentile(opts){return _lodash.default.assign({id:_uuid.default.v1(),mode:"line",shade:.2},opts)};exports.newPercentile=newPercentile;var PercentilesUi=function(_Component){_inherits(PercentilesUi,_Component);function PercentilesUi(){var _getPrototypeOf2;var _this;_classCallCheck(this,PercentilesUi);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PercentilesUi)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderRow",function(row,i,items){var defaults={value:"",percentile:"",shade:""};var model=_objectSpread({},defaults,{},row);var _this$props=_this.props,intl=_this$props.intl,panel=_this$props.panel;var percentileFieldNumber=_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFieldNumber,{"aria-label":intl.formatMessage({id:"tsvb.percentile.percentileAriaLabel",defaultMessage:"Percentile"}),placeholder:0,max:100,min:0,step:1,onChange:_this.handleTextChange(model,"value"),value:model.value===""?"":Number(model.value)}));if(panel.type==="table"){return percentileFieldNumber}var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,_this.props,newPercentile);var handleDelete=_collection_actions.collectionActions.handleDelete.bind(null,_this.props,model);var modeOptions=[{label:intl.formatMessage({id:"tsvb.percentile.modeOptions.lineLabel",defaultMessage:"Line"}),value:"line"},{label:intl.formatMessage({id:"tsvb.percentile.modeOptions.bandLabel",defaultMessage:"Band"}),value:"band"}];var optionsStyle={};if(model.mode==="line"){optionsStyle.display="none"}var labelStyle={marginBottom:0};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});return _react.default.createElement(_eui.EuiFlexItem,{key:model.id},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",responsive:false,gutterSize:"s"},percentileFieldNumber,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("mode")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.percentile.modeLabel",defaultMessage:"Mode:"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("mode"),options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:_this.handleTextChange(model,"mode"),singleSelection:{asPlainText:true}})),_react.default.createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("fillTo")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.percentile.fillToLabel",defaultMessage:"Fill to:"}))),_react.default.createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react.default.createElement(_eui.EuiFieldNumber,{id:htmlId("fillTo"),step:1,onChange:_this.handleTextChange(model,"percentile"),value:Number(model.percentile)})),_react.default.createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("shade")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.percentile.shadeLabel",defaultMessage:"Shade (0 to 1):"}))),_react.default.createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react.default.createElement(_eui.EuiFieldNumber,{id:htmlId("shade"),style:optionsStyle,step:.1,onChange:_this.handleTextChange(model,"shade"),value:Number(model.shade)})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false}))))});return _this}_createClass(PercentilesUi,[{key:"handleTextChange",value:function handleTextChange(item,name){var _this2=this;return function(e){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash.default.get(e,"[0].value",_lodash.default.get(e,"target.value"));handleChange(_lodash.default.assign({},item,part))}}},{key:"render",value:function render(){var _this$props2=this.props,model=_this$props2.model,name=_this$props2.name,panel=_this$props2.panel;if(!model[name])return _react.default.createElement("div",null);var rows;if(panel.type==="table"){rows=this.renderRow(_lodash.default.last(model[name]))}else{rows=model[name].map(this.renderRow)}return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},rows)}}]);return PercentilesUi}(_react.Component);PercentilesUi.defaultProps={name:"percentile"};PercentilesUi.propTypes={name:_propTypes.default.string,model:_propTypes.default.object,panel:_propTypes.default.object,onChange:_propTypes.default.func};var Percentiles=(0,_react2.injectI18n)(PercentilesUi);exports.Percentiles=Percentiles},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CumulativeSumAgg=CumulativeSumAgg;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_row=__webpack_require__(28);var _agg_select=__webpack_require__(34);var _metric_select=__webpack_require__(73);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function CumulativeSumAgg(props){var model=props.model,siblings=props.siblings;var htmlId=(0,_eui.htmlIdGenerator)();var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.cumulativeSum.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.cumulativeSum.metricLabel",defaultMessage:"Metric"})},_react.default.createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))))}CumulativeSumAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StandardDeviationAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(34);var _field_select=__webpack_require__(53);var _agg_row=__webpack_require__(28);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _es_types=__webpack_require__(75);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RESTRICT_FIELDS=[_es_types.ES_TYPES.NUMBER];var StandardDeviationAggUi=function StandardDeviationAggUi(props){var series=props.series,panel=props.panel,fields=props.fields,intl=props.intl;var defaults={sigma:""};var model=_objectSpread({},defaults,{},props.model);var modeOptions=[{label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.rawLabel",defaultMessage:"Raw"}),value:"raw"},{label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.upperBoundLabel",defaultMessage:"Upper Bound"}),value:"upper"},{label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.lowerBoundLabel",defaultMessage:"Lower Bound"}),value:"lower"}];if(panel.type!=="table"){modeOptions.push({label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.boundsBandLabel",defaultMessage:"Bounds Band"}),value:"band"})}var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.stdDeviation.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.stdDeviation.fieldLabel",defaultMessage:"Field"})},_react.default.createElement(_field_select.FieldSelect,{fields:fields,type:model.type,restrict:RESTRICT_FIELDS,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("sigma"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.stdDeviation.sigmaLabel",defaultMessage:"Sigma"})},_react.default.createElement(_eui.EuiFieldText,{value:model.sigma,onChange:handleTextChange("sigma")}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("mode"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.stdDeviation.modeLabel",defaultMessage:"Mode"})},_react.default.createElement(_eui.EuiComboBox,{options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:handleSelectChange("mode"),singleSelection:{asPlainText:true}})))))};StandardDeviationAggUi.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array};var StandardDeviationAgg=(0,_react2.injectI18n)(StandardDeviationAggUi);exports.StandardDeviationAgg=StandardDeviationAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StandardSiblingAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_row=__webpack_require__(28);var _metric_select=__webpack_require__(73);var _agg_select=__webpack_require__(34);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var StandardSiblingAggUi=function StandardSiblingAggUi(props){var siblings=props.siblings,intl=props.intl;var defaults={sigma:""};var model=_objectSpread({},defaults,{},props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var stdDev={};if(model.type==="std_deviation_bucket"){stdDev.sigma=_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("sigma"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.stdSibling.sigmaLabel",defaultMessage:"Sigma"})},_react.default.createElement(_eui.EuiFieldText,{value:model.sigma,onChange:handleTextChange("sigma")})));var modeOptions=[{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.rawLabel",defaultMessage:"Raw"}),value:"raw"},{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.upperBoundLabel",defaultMessage:"Upper Bound"}),value:"upper"},{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.lowerBoundLabel",defaultMessage:"Lower Bound"}),value:"lower"},{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.boundsBandLabel",defaultMessage:"Bounds Band"}),value:"band"}];var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});stdDev.mode=_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("mode"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.stdSibling.modeLabel",defaultMessage:"Mode"})},_react.default.createElement(_eui.EuiComboBox,{options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:handleSelectChange("mode"),singleSelection:{asPlainText:true}})))}return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.stdSibling.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,uiRestrictions:props.uiRestrictions,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.stdSibling.metricLabel",defaultMessage:"Metric"})},_react.default.createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),exclude:["percentile"],metrics:siblings,metric:model,value:model.field}))),stdDev.sigma,stdDev.mode))};StandardSiblingAggUi.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array,uiRestrictions:_propTypes.default.object};var StandardSiblingAgg=(0,_react2.injectI18n)(StandardSiblingAggUi);exports.StandardSiblingAgg=StandardSiblingAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeriesAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(34);var _agg_row=__webpack_require__(28);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SeriesAggUi(props){var panel=props.panel,model=props.model,intl=props.intl;var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();var functionOptions=[{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.sumLabel",defaultMessage:"Sum"}),value:"sum"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.maxLabel",defaultMessage:"Max"}),value:"max"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.minLabel",defaultMessage:"Min"}),value:"min"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.avgLabel",defaultMessage:"Avg"}),value:"mean"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallSumLabel",defaultMessage:"Overall Sum"}),value:"overall_sum"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallMaxLabel",defaultMessage:"Overall Max"}),value:"overall_max"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallMinLabel",defaultMessage:"Overall Min"}),value:"overall_min"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallAvgLabel",defaultMessage:"Overall Avg"}),value:"overall_avg"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.cumulativeSumLabel",defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"}];var selectedFunctionOption=functionOptions.find(function(option){return model.function===option.value});if(panel.type==="table"){return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiTitle,{className:"tvbAggRow__unavailable",size:"xxxs"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.seriesAgg.seriesAggIsNotCompatibleLabel",defaultMessage:"Series Agg is not compatible with the table visualization."}))))}return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.seriesAgg.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("function"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.seriesAgg.functionLabel",defaultMessage:"Function"})},_react.default.createElement(_eui.EuiComboBox,{options:functionOptions,selectedOptions:selectedFunctionOption?[selectedFunctionOption]:[],onChange:handleSelectChange("function"),singleSelection:{asPlainText:true}})))))}SeriesAggUi.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array};var SeriesAgg=(0,_react2.injectI18n)(SeriesAggUi);exports.SeriesAgg=SeriesAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SerialDiffAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(34);var _metric_select=__webpack_require__(73);var _agg_row=__webpack_require__(28);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _create_number_handler=__webpack_require__(654);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SerialDiffAgg=function SerialDiffAgg(props){var siblings=props.siblings;var defaults={lag:""};var model=_objectSpread({},defaults,{},props.model);var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleNumberChange=(0,_create_number_handler.createNumberHandler)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.serialDiff.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.serialDiff.metricLabel",defaultMessage:"Metric"})},_react.default.createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("lag"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.serialDiff.lagLabel",defaultMessage:"Lag",description:"'Lag' refers to the parameter name of the serial diff translation https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-pipeline-serialdiff-aggregation.html. This should only be translated if there is a reasaonable word explaining what that parameter does."})},_react.default.createElement("input",{className:"tvbAgg__input",onChange:handleNumberChange("lag"),value:model.lag,type:"text"})))))};exports.SerialDiffAgg=SerialDiffAgg;SerialDiffAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PositiveOnlyAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(34);var _metric_select=__webpack_require__(73);var _agg_row=__webpack_require__(28);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PositiveOnlyAgg=function PositiveOnlyAgg(props){var siblings=props.siblings;var defaults={unit:""};var model=_objectSpread({},defaults,{},props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.positiveOnly.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.positiveOnly.metricLabel",defaultMessage:"Metric"})},_react.default.createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))))};exports.PositiveOnlyAgg=PositiveOnlyAgg;PositiveOnlyAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterRatioAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(34);var _field_select=__webpack_require__(53);var _agg_row=__webpack_require__(28);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _es_types=__webpack_require__(75);var _metric_types=__webpack_require__(365);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterRatioAgg=function FilterRatioAgg(props){var series=props.series,fields=props.fields,panel=props.panel;var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,props.model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var defaults={numerator:"*",denominator:"*",metric_agg:"count"};var model=_objectSpread({},defaults,{},props.model);var htmlId=(0,_eui.htmlIdGenerator)();var restrictFields=model.metric_agg===_metric_types.METRIC_TYPES.CARDINALITY?[]:[_es_types.ES_TYPES.NUMBER];return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.filterRatio.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("numerator"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.filterRatio.numeratorLabel",defaultMessage:"Numerator"})},_react.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("numerator"),value:model.numerator}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("denominator"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.filterRatio.denominatorLabel",defaultMessage:"Denominator"})},_react.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("denominator"),value:model.denominator})))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("metric")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.filterRatio.metricAggregationLabel",defaultMessage:"Metric Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("metric"),siblings:props.siblings,panelType:"metrics",value:model.metric_agg,onChange:handleSelectChange("metric_agg")})),model.metric_agg!=="count"?_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("aggField"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.filterRatio.fieldLabel",defaultMessage:"Field"})},_react.default.createElement(_field_select.FieldSelect,{fields:fields,type:model.metric_agg,restrict:restrictFields,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")}))):null))};exports.FilterRatioAgg=FilterRatioAgg;FilterRatioAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PercentileRankAgg",{enumerable:true,get:function get(){return _percentile_rank.PercentileRankAgg}});var _percentile_rank=__webpack_require__(1424)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentileRankAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _agg_select=__webpack_require__(34);var _field_select=__webpack_require__(53);var _agg_row=__webpack_require__(28);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _percentile_rank_values=__webpack_require__(1425);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _es_types=__webpack_require__(75);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RESTRICT_FIELDS=[_es_types.ES_TYPES.NUMBER];var PercentileRankAgg=function PercentileRankAgg(props){var series=props.series,panel=props.panel,fields=props.fields;var defaults={values:[""]};var model=_objectSpread({},defaults,{},props.model);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();var isTablePanel=panel.type==="table";var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handlePercentileRankValuesChange=function handlePercentileRankValuesChange(values){handleChange((0,_lodash.assign)({},model,{values:values}))};return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.percentileRank.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.percentileRank.fieldLabel",defaultMessage:"Field"})},_react.default.createElement(_field_select.FieldSelect,{fields:fields,type:model.type,restrict:RESTRICT_FIELDS,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_percentile_rank_values.PercentileRankValues,{disableAdd:isTablePanel,disableDelete:isTablePanel,showOnlyLastRow:isTablePanel,model:model.values,onChange:handlePercentileRankValuesChange}))};exports.PercentileRankAgg=PercentileRankAgg;PercentileRankAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentileRankValues=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _eui=__webpack_require__(3);var _multi_value_row=__webpack_require__(1426);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var PercentileRankValues=function PercentileRankValues(props){var model=props.model||[];var onChange=props.onChange,disableAdd=props.disableAdd,disableDelete=props.disableDelete,showOnlyLastRow=props.showOnlyLastRow;var onChangeValue=function onChangeValue(_ref){var value=_ref.value,id=_ref.id;model[id]=value;onChange(model)};var onDeleteValue=function onDeleteValue(_ref2){var id=_ref2.id;return onChange(model.filter(function(item,currentIndex){return id!==currentIndex}))};var onAddValue=function onAddValue(){return onChange([].concat(_toConsumableArray(model),[""]))};var renderRow=function renderRow(_ref3){var rowModel=_ref3.rowModel,disableDelete=_ref3.disableDelete,disableAdd=_ref3.disableAdd;return _react.default.createElement(_multi_value_row.MultiValueRow,{key:"percentileRankValue__item".concat(rowModel.id),onAdd:onAddValue,onChange:onChangeValue,onDelete:onDeleteValue,disableDelete:disableDelete,disableAdd:disableAdd,model:rowModel})};return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column",responsive:false,gutterSize:"xs"},showOnlyLastRow&&renderRow({rowModel:{id:model.length-1,value:(0,_lodash.last)(model)},disableAdd:true,disableDelete:true}),!showOnlyLastRow&&model.map(function(value,id,array){return renderRow({rowModel:{id:id,value:value},disableAdd:disableAdd,disableDelete:disableDelete||array.length<2})}))};exports.PercentileRankValues=PercentileRankValues;PercentileRankValues.propTypes={model:_propTypes.default.array,onChange:_propTypes.default.func,disableDelete:_propTypes.default.bool,disableAdd:_propTypes.default.bool,showOnlyLastRow:_propTypes.default.bool}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MultiValueRow=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);var _add_delete_buttons=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MultiValueRow=function MultiValueRow(_ref){var model=_ref.model,onChange=_ref.onChange,_onDelete=_ref.onDelete,onAdd=_ref.onAdd,disableAdd=_ref.disableAdd,disableDelete=_ref.disableDelete;var htmlId=(0,_eui.htmlIdGenerator)();var onFieldNumberChange=function onFieldNumberChange(event){return onChange(_objectSpread({},model,{value:(0,_lodash.get)(event,"target.value")}))};return _react.default.createElement("div",{className:"tvbAggRow__multiValueRow"},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("value")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.multivalueRow.valueLabel",defaultMessage:"Value:"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFieldNumber,{value:model.value===""?"":Number(model.value),placeholder:0,onChange:onFieldNumberChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:onAdd,onDelete:function onDelete(){return _onDelete(model)},disableDelete:disableDelete,disableAdd:disableAdd}))),_react.default.createElement(_eui.EuiSpacer,null))};exports.MultiValueRow=MultiValueRow;MultiValueRow.defaultProps={model:{id:null,value:""}};MultiValueRow.propTypes={model:_propTypes.default.object,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,onAdd:_propTypes.default.func,defaultAddValue:_propTypes.default.string,disableDelete:_propTypes.default.bool}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Static=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(34);var _agg_row=__webpack_require__(28);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Static=function Static(props){var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,props.model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var defaults={numerator:"*",denominator:"*",metric_agg:"count",value:""};var model=_objectSpread({},defaults,{},props.model);var htmlId=(0,_eui.htmlIdGenerator)();return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.static.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("staticValue"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.static.staticValuesLabel",defaultMessage:"Static Value"})},_react.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("value"),value:model.value===""?"":Number(model.value),step:.1})))))};exports.Static=Static;Static.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MathAgg=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _lodash=_interopRequireDefault(__webpack_require__(1));var _uuid=_interopRequireDefault(__webpack_require__(31));var _agg_row=__webpack_require__(28);var _agg_select=__webpack_require__(34);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _vars=__webpack_require__(656);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var MathAgg=function(_Component){_inherits(MathAgg,_Component);function MathAgg(){_classCallCheck(this,MathAgg);return _possibleConstructorReturn(this,_getPrototypeOf(MathAgg).apply(this,arguments))}_createClass(MathAgg,[{key:"componentWillMount",value:function componentWillMount(){if(!this.props.model.variables){this.props.onChange(_lodash.default.assign({},this.props.model,{variables:[{id:_uuid.default.v1()}]}))}}},{key:"render",value:function render(){var siblings=this.props.siblings;var htmlId=(0,_eui.htmlIdGenerator)();var defaults={script:""};var model=_objectSpread({},defaults,{},this.props.model);var handleChange=(0,_create_change_handler.createChangeHandler)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);return _react.default.createElement(_agg_row.AggRow,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings,dragHandleProps:this.props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"l"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.math.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("variables")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.math.variablesLabel",defaultMessage:"Variables"})),_react.default.createElement(_vars.CalculationVars,{id:htmlId("variables"),metrics:siblings,onChange:handleChange,name:"variables",model:model,includeSiblings:true})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:"mathExpressionInput",label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.math.expressionLabel",defaultMessage:"Expression"}),fullWidth:true,helpText:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.math.expressionDescription",defaultMessage:"This field uses basic math expressions (see {link}) - Variables are keys on the {params} object, i.e. {paramsName} To access all the data use {paramsValues} for an array of the values and {paramsTimestamps} for an array of the timestamps. {paramsTimestamp} is available for the current bucket's timestamp, {paramsIndex} is available for the current bucket's index, and {paramsInterval}s available for the interval in milliseconds.",values:{link:_react.default.createElement(_eui.EuiLink,{href:"https://github.com/elastic/tinymath/blob/master/docs/functions.md",target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.math.expressionDescription.tinyMathLinkText",defaultMessage:"TinyMath"})),params:_react.default.createElement(_eui.EuiCode,null,"params"),paramsName:_react.default.createElement(_eui.EuiCode,null,"params.<name>"),paramsValues:_react.default.createElement(_eui.EuiCode,null,"params._all.<name>.values"),paramsTimestamps:_react.default.createElement(_eui.EuiCode,null,"params._all.<name>.timestamps"),paramsTimestamp:_react.default.createElement(_eui.EuiCode,null,"params._timestamp"),paramsIndex:_react.default.createElement(_eui.EuiCode,null,"params._index"),paramsInterval:_react.default.createElement(_eui.EuiCode,null,"params._interval")}})},_react.default.createElement(_eui.EuiTextArea,{"data-test-subj":"mathExpression",onChange:handleTextChange("script"),fullWidth:true,value:model.script})))))}}]);return MathAgg}(_react.Component);exports.MathAgg=MathAgg;MathAgg.propTypes={disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,model:_propTypes.default.object,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onDelete:_propTypes.default.func,panel:_propTypes.default.object,series:_propTypes.default.object,siblings:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopHitAgg=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _agg_row=__webpack_require__(28);var _agg_select=__webpack_require__(34);var _field_select=__webpack_require__(53);var _i18n=__webpack_require__(2);var _create_change_handler=__webpack_require__(35);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _es_types=__webpack_require__(75);var _panel_types=__webpack_require__(102);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var isFieldTypeEnabled=function isFieldTypeEnabled(fieldRestrictions,fieldType){return fieldRestrictions.length?fieldRestrictions.includes(fieldType):true};var getAggWithOptions=function getAggWithOptions(){var field=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var fieldTypesRestriction=arguments.length>1?arguments[1]:undefined;if(isFieldTypeEnabled(fieldTypesRestriction,field.type)){switch(field.type){case _es_types.ES_TYPES.NUMBER:return[{label:_i18n.i18n.translate("tsvb.topHit.aggWithOptions.averageLabel",{defaultMessage:"Avg"}),value:"avg"},{label:_i18n.i18n.translate("tsvb.topHit.aggWithOptions.maxLabel",{defaultMessage:"Max"}),value:"max"},{label:_i18n.i18n.translate("tsvb.topHit.aggWithOptions.minLabel",{defaultMessage:"Min"}),value:"min"},{label:_i18n.i18n.translate("tsvb.topHit.aggWithOptions.sumLabel",{defaultMessage:"Sum"}),value:"sum"}];case _es_types.ES_TYPES.KEYWORD:case _es_types.ES_TYPES.STRING:return[{label:_i18n.i18n.translate("tsvb.topHit.aggWithOptions.concatenate",{defaultMessage:"Concatenate"}),value:"concat"}]}}return[]};var getOrderOptions=function getOrderOptions(){return[{label:_i18n.i18n.translate("tsvb.topHit.orderOptions.ascLabel",{defaultMessage:"Asc"}),value:"asc"},{label:_i18n.i18n.translate("tsvb.topHit.orderOptions.descLabel",{defaultMessage:"Desc"}),value:"desc"}]};var ORDER_DATE_RESTRICT_FIELDS=[_es_types.ES_TYPES.DATE];var TopHitAggUi=function TopHitAggUi(props){var fields=props.fields,series=props.series,panel=props.panel;var defaults={size:1,agg_with:"noop",order:"desc"};var model=_objectSpread({},defaults,{},props.model);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var aggWithOptionsRestrictFields=[_panel_types.PANEL_TYPES.TABLE,_panel_types.PANEL_TYPES.METRIC,_panel_types.PANEL_TYPES.MARKDOWN].includes(panel.type)?[_es_types.ES_TYPES.NUMBER,_es_types.ES_TYPES.KEYWORD,_es_types.ES_TYPES.STRING]:[_es_types.ES_TYPES.NUMBER];var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var field=fields[indexPattern].find(function(f){return f.name===model.field});var aggWithOptions=getAggWithOptions(field,aggWithOptionsRestrictFields);var orderOptions=getOrderOptions();var htmlId=(0,_eui.htmlIdGenerator)();var selectedAggWithOption=aggWithOptions.find(function(option){return model.agg_with===option.value});var selectedOrderOption=orderOptions.find(function(option){return model.order===option.value});return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topHit.aggregationLabel",defaultMessage:"Aggregation"})),_react.default.createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topHit.fieldLabel",defaultMessage:"Field"})},_react.default.createElement(_field_select.FieldSelect,{fields:fields,type:model.type,restrict:aggWithOptionsRestrictFields,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("size"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topHit.sizeLabel",defaultMessage:"Size"})},_react.default.createElement("input",{className:"tvbAgg__input",value:model.size,onChange:handleTextChange("size")}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("agg_with"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topHit.aggregateWithLabel",defaultMessage:"Aggregate with"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,placeholder:_i18n.i18n.translate("tsvb.topHit.aggregateWith.selectPlaceholder",{defaultMessage:"Select..."}),options:aggWithOptions,selectedOptions:selectedAggWithOption?[selectedAggWithOption]:[],onChange:handleSelectChange("agg_with"),singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("order_by"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topHit.orderByLabel",defaultMessage:"Order by"})},_react.default.createElement(_field_select.FieldSelect,{restrict:ORDER_DATE_RESTRICT_FIELDS,value:model.order_by,onChange:handleSelectChange("order_by"),indexPattern:indexPattern,fields:fields}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("order"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topHit.orderLabel",defaultMessage:"Order"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,placeholder:_i18n.i18n.translate("tsvb.topHit.order.selectPlaceholder",{defaultMessage:"Select..."}),options:orderOptions,selectedOptions:selectedOrderOption?[selectedOrderOption]:[],onChange:handleSelectChange("order"),singleSelection:{asPlainText:true}})))))};var TopHitAgg=(0,_react2.injectI18n)(TopHitAggUi);exports.TopHitAgg=TopHitAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnsupportedAgg=UnsupportedAgg;var _agg_row=__webpack_require__(28);var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function UnsupportedAgg(props){return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiTitle,{className:"tvbAggRow__unavailable",size:"xxxs"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.unsupportedAgg.aggIsNotSupportedDescription",defaultMessage:"The {modelType} aggregation is no longer supported.",values:{modelType:_react.default.createElement(_eui.EuiCode,null,props.model.type)}}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TemporaryUnsupportedAgg=TemporaryUnsupportedAgg;var _agg_row=__webpack_require__(28);var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TemporaryUnsupportedAgg(props){return _react.default.createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react.default.createElement(_eui.EuiTitle,{className:"tvbAggRow__unavailable",size:"xxxs"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.unsupportedAgg.aggIsTemporaryUnsupportedDescription",defaultMessage:"The {modelType} aggregation is currently unsupported.",values:{modelType:_react.default.createElement(_eui.EuiCode,null,props.model.type)}}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.seriesChangeHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _new_metric_agg_fn=__webpack_require__(433);var _agg_lookup=__webpack_require__(650);var _collection_actions=__webpack_require__(74);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var seriesChangeHandler=function seriesChangeHandler(props,items){return function(doc){if(items.length===1&&!(0,_agg_lookup.isBasicAgg)(doc)){_collection_actions.handleAdd.call(null,props,function(){var metric=(0,_new_metric_agg_fn.newMetricAggFn)();metric.type=doc.type;var incompatPipelines=["calculation","series_agg"];if(!_lodash.default.contains(incompatPipelines,doc.type))metric.field=doc.id;return metric})}else{_collection_actions.handleChange.call(null,props,doc)}}};exports.seriesChangeHandler=seriesChangeHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeseriesConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _data_format_picker=__webpack_require__(434);var _create_select_handler=__webpack_require__(18);var _yes_no=__webpack_require__(54);var _create_text_handler=__webpack_require__(21);var _index_pattern=__webpack_require__(76);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _get_default_query_language=__webpack_require__(43);var _query_bar_wrapper=__webpack_require__(46);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TimeseriesConfig=(0,_react2.injectI18n)(function(props){var handleSelectChange=(0,_create_select_handler.createSelectHandler)(props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(props.onChange);var defaults={fill:"",line_width:"",point_size:"",value_template:"{{value}}",offset_time:"",split_color_mode:"gradient",axis_min:"",axis_max:"",stacked:"none",steps:0};var model=_objectSpread({},defaults,{},props.model);var htmlId=(0,_eui.htmlIdGenerator)();var intl=props.intl;var stackedOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.noneLabel",defaultMessage:"None"}),value:"none"},{label:intl.formatMessage({id:"tsvb.timeSeries.stackedLabel",defaultMessage:"Stacked"}),value:"stacked"},{label:intl.formatMessage({id:"tsvb.timeSeries.stackedWithinSeriesLabel",defaultMessage:"Stacked within series"}),value:"stacked_within_series"},{label:intl.formatMessage({id:"tsvb.timeSeries.percentLabel",defaultMessage:"Percent"}),value:"percent"}];var selectedStackedOption=stackedOptions.find(function(option){return model.stacked===option.value});var positionOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.rightLabel",defaultMessage:"Right"}),value:"right"},{label:intl.formatMessage({id:"tsvb.timeSeries.leftLabel",defaultMessage:"Left"}),value:"left"}];var selectedAxisPosOption=positionOptions.find(function(option){return model.axis_position===option.value});var chartTypeOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.barLabel",defaultMessage:"Bar"}),value:"bar"},{label:intl.formatMessage({id:"tsvb.timeSeries.lineLabel",defaultMessage:"Line"}),value:"line"}];var selectedChartTypeOption=chartTypeOptions.find(function(option){return model.chart_type===option.value});var splitColorOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.gradientLabel",defaultMessage:"Gradient"}),value:"gradient"},{label:intl.formatMessage({id:"tsvb.timeSeries.rainbowLabel",defaultMessage:"Rainbow"}),value:"rainbow"}];var selectedSplitColorOption=splitColorOptions.find(function(option){return model.split_color_mode===option.value});var type;if(model.chart_type==="line"){type=_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("chartType"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.chartTypeLabel",defaultMessage:"Chart type"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:chartTypeOptions,selectedOptions:selectedChartTypeOption?[selectedChartTypeOption]:[],onChange:handleSelectChange("chart_type"),singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("stacked"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.stackedLabel",defaultMessage:"Stacked"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:stackedOptions,selectedOptions:selectedStackedOption?[selectedStackedOption]:[],onChange:handleSelectChange("stacked"),singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("fill"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.fillLabel",defaultMessage:"Fill (0 to 1)"})},_react.default.createElement(_eui.EuiFieldNumber,{step:.1,onChange:handleTextChange("fill"),value:Number(model.fill)}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("lineWidth"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.lineWidthLabel",defaultMessage:"Line width"})},_react.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("line_width"),value:Number(model.line_width)}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("pointSize"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.pointSizeLabel",defaultMessage:"Point size"})},_react.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("point_size"),value:Number(model.point_size)}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.stepsLabel",defaultMessage:"Steps"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.steps,name:"steps",onChange:props.onChange})))}if(model.chart_type==="bar"){type=_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("chartType"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartBar.chartTypeLabel",defaultMessage:"Chart type"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:chartTypeOptions,selectedOptions:selectedChartTypeOption?[selectedChartTypeOption]:[],onChange:handleSelectChange("chart_type"),singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("stacked"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartBar.stackedLabel",defaultMessage:"Stacked"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:stackedOptions,selectedOptions:selectedStackedOption?[selectedStackedOption]:[],onChange:handleSelectChange("stacked"),singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("fill"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartBar.fillLabel",defaultMessage:"Fill (0 to 1)"})},_react.default.createElement(_eui.EuiFieldNumber,{step:.5,onChange:handleTextChange("fill"),value:Number(model.fill)}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("lineWidth"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartBar.lineWidthLabel",defaultMessage:"Line width"})},_react.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("line_width"),value:Number(model.line_width)}))))}var disableSeparateYaxis=model.separate_axis?false:true;var seriesIndexPattern=props.model.override_index_pattern&&props.model.series_index_pattern?props.model.series_index_pattern:props.indexPatternForQuery;return _react.default.createElement("div",{className:"tvbAggRow"},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_data_format_picker.DataFormatPicker,{onChange:handleSelectChange("formatter"),value:model.formatter})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("template"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.templateLabel",defaultMessage:"Template"}),helpText:_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.templateHelpText",defaultMessage:"eg.{templateExample}",values:{templateExample:_react.default.createElement(_eui.EuiCode,null,"{{value}}/s")}})),fullWidth:true},_react.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("value_template"),value:model.value_template,fullWidth:true,"data-test-subj":"tsvb_series_value"})))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("series_filter"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.filterLabel",defaultMessage:"Filter"}),fullWidth:true},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter&&model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter&&model.filter.query?model.filter.query:""},onChange:function onChange(filter){return props.onChange({filter:filter})},indexPatterns:[seriesIndexPattern]}))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),type,_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("offset"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.offsetSeriesTimeLabel",defaultMessage:"Offset series time by (1m, 1h, 1w, 1d)",description:"1m, 1h, 1w, 1d are required values and must not be translated."})},_react.default.createElement(_eui.EuiFieldText,{"data-test-subj":"offsetTimeSeries",onChange:handleTextChange("offset_time"),value:model.offset_time}))),_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.hideInLegendLabel",defaultMessage:"Hide in legend"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.hide_in_legend,name:"hide_in_legend",onChange:props.onChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("splitColor"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.splitColorThemeLabel",defaultMessage:"Split color theme"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:splitColorOptions,selectedOptions:selectedSplitColorOption?[selectedSplitColorOption]:[],onChange:handleSelectChange("split_color_mode"),singleSelection:{asPlainText:true}})))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.separateAxisLabel",defaultMessage:"Separate axis?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.separate_axis,name:"separate_axis",onChange:props.onChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("axisMin"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.axisMinLabel",defaultMessage:"Axis min"})},_react.default.createElement("input",{className:"tvbAgg__input",type:"number",disabled:disableSeparateYaxis,onChange:handleTextChange("axis_min"),value:model.axis_min}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("axisMax"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.axisMaxLabel",defaultMessage:"Axis max"})},_react.default.createElement("input",{className:"tvbAgg__input",disabled:disableSeparateYaxis,onChange:handleTextChange("axis_max"),value:model.axis_max}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("axisPos"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.axisPositionLabel",defaultMessage:"Axis position"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,isDisabled:disableSeparateYaxis,options:positionOptions,selectedOptions:selectedAxisPosOption?[selectedAxisPosOption]:[],onChange:handleSelectChange("axis_position"),singleSelection:{asPlainText:true}})))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.overrideIndexPatternLabel",defaultMessage:"Override Index Pattern?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.override_index_pattern,name:"override_index_pattern",onChange:props.onChange})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_index_pattern.IndexPattern,_extends({},props,{prefix:"series_",disabled:!model.override_index_pattern,"with-interval":true})))))});exports.TimeseriesConfig=TimeseriesConfig;TimeseriesConfig.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func,indexPatternForQuery:_propTypes.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TIME_RANGE_MODE_KEY=exports.TIME_RANGE_DATA_MODES=void 0;var TIME_RANGE_DATA_MODES={ENTIRE_TIME_RANGE:"entire_time_range",LAST_VALUE:"last_value"};exports.TIME_RANGE_DATA_MODES=TIME_RANGE_DATA_MODES;var TIME_RANGE_MODE_KEY="time_range_mode";exports.TIME_RANGE_MODE_KEY=TIME_RANGE_MODE_KEY},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByTerms=exports.SplitByTermsUI=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _group_by_select=__webpack_require__(124);var _create_text_handler=__webpack_require__(21);var _create_select_handler=__webpack_require__(18);var _field_select=__webpack_require__(53);var _metric_select=__webpack_require__(73);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _field_types=__webpack_require__(1436);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULTS={terms_direction:"desc",terms_size:10,terms_order_by:"_count"};var SplitByTermsUI=function SplitByTermsUI(_ref){var onChange=_ref.onChange,indexPattern=_ref.indexPattern,intl=_ref.intl,seriesModel=_ref.model,fields=_ref.fields,uiRestrictions=_ref.uiRestrictions;var htmlId=(0,_eui.htmlIdGenerator)();var handleTextChange=(0,_create_text_handler.createTextHandler)(onChange);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(onChange);var model=_objectSpread({},DEFAULTS,{},seriesModel);var metrics=model.metrics;var defaultCount={value:"_count",label:intl.formatMessage({id:"tsvb.splits.terms.defaultCountLabel",defaultMessage:"Doc Count (default)"})};var terms={value:"_key",label:intl.formatMessage({id:"tsvb.splits.terms.termsLabel",defaultMessage:"Terms"})};var dirOptions=[{value:"desc",label:intl.formatMessage({id:"tsvb.splits.terms.dirOptions.descendingLabel",defaultMessage:"Descending"})},{value:"asc",label:intl.formatMessage({id:"tsvb.splits.terms.dirOptions.ascendingLabel",defaultMessage:"Ascending"})}];var selectedDirectionOption=dirOptions.find(function(option){return model.terms_direction===option.value});var selectedField=(0,_lodash.find)(fields[indexPattern],function(_ref2){var name=_ref2.name;return name===model.terms_field});var selectedFieldType=(0,_lodash.get)(selectedField,"type");return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.groupByLabel",defaultMessage:"Group by"})},_react.default.createElement(_group_by_select.GroupBySelect,{value:model.split_mode,onChange:handleSelectChange("split_mode"),uiRestrictions:uiRestrictions}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("by"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.byLabel",defaultMessage:"By",description:"This labels a field selector allowing the user to chose 'by' which field to group."})},_react.default.createElement(_field_select.FieldSelect,{indexPattern:indexPattern,onChange:handleSelectChange("terms_field"),value:model.terms_field,fields:fields,uiRestrictions:uiRestrictions,type:"terms"})))),selectedFieldType===_field_types.FIELD_TYPES.STRING&&_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("include"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.includeLabel",defaultMessage:"Include"})},_react.default.createElement(_eui.EuiFieldText,{value:model.terms_include,onChange:handleTextChange("terms_include")}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("exclude"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.excludeLabel",defaultMessage:"Exclude"})},_react.default.createElement(_eui.EuiFieldText,{value:model.terms_exclude,onChange:handleTextChange("terms_exclude")})))),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("top"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.topLabel",defaultMessage:"Top"})},_react.default.createElement(_eui.EuiFieldNumber,{placeholder:intl.formatMessage({id:"tsvb.splits.terms.sizePlaceholder",defaultMessage:"Size"}),value:Number(model.terms_size),onChange:handleTextChange("terms_size")}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("order"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.orderByLabel",defaultMessage:"Order by"})},_react.default.createElement(_metric_select.MetricSelect,{metrics:metrics,clearable:false,additionalOptions:[defaultCount,terms],onChange:handleSelectChange("terms_order_by"),restrict:"basic",value:model.terms_order_by}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("direction"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.directionLabel",defaultMessage:"Direction"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:dirOptions,selectedOptions:selectedDirectionOption?[selectedDirectionOption]:[],onChange:handleSelectChange("terms_direction"),singleSelection:{asPlainText:true}})))))};exports.SplitByTermsUI=SplitByTermsUI;SplitByTermsUI.propTypes={intl:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func,indexPattern:_propTypes.default.string,fields:_propTypes.default.object,uiRestrictions:_propTypes.default.object};var SplitByTerms=(0,_react2.injectI18n)(SplitByTermsUI);exports.SplitByTerms=SplitByTerms},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FIELD_TYPES=void 0;var FIELD_TYPES={BOOLEAN:"boolean",DATE:"date",GEO:"geo_point",NUMBER:"number",STRING:"string"};exports.FIELD_TYPES=FIELD_TYPES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByFilter=void 0;var _create_select_handler=__webpack_require__(18);var _group_by_select=__webpack_require__(124);var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _get_default_query_language=__webpack_require__(43);var _query_bar_wrapper=__webpack_require__(46);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SplitByFilter=function SplitByFilter(props){var _onChange=props.onChange,uiRestrictions=props.uiRestrictions,indexPattern=props.indexPattern;var defaults={filter:{language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:""}};var model=_objectSpread({},defaults,{},props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleSelectChange=(0,_create_select_handler.createSelectHandler)(_onChange);return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.filter.groupByLabel",defaultMessage:"Group by"})},_react.default.createElement(_group_by_select.GroupBySelect,{value:model.split_mode,onChange:handleSelectChange("split_mode"),uiRestrictions:uiRestrictions}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("query"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.filter.queryStringLabel",defaultMessage:"Query string"})},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _onChange({filter:filter})},indexPatterns:[indexPattern]}))))};exports.SplitByFilter=SplitByFilter;SplitByFilter.propTypes={model:_propTypes.default.object,onChange:_propTypes.default.func,uiRestrictions:_propTypes.default.object,indexPatterns:_propTypes.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByFilters=void 0;var _create_select_handler=__webpack_require__(18);var _group_by_select=__webpack_require__(124);var _filter_items=__webpack_require__(1439);var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SplitByFilters=function SplitByFilters(props){var onChange=props.onChange,model=props.model,uiRestrictions=props.uiRestrictions,indexPattern=props.indexPattern;var htmlId=(0,_eui.htmlIdGenerator)();var handleSelectChange=(0,_create_select_handler.createSelectHandler)(onChange);return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.filters.groupByLabel",defaultMessage:"Group by"})},_react.default.createElement(_group_by_select.GroupBySelect,{value:model.split_mode,onChange:handleSelectChange("split_mode"),uiRestrictions:uiRestrictions})))),_react.default.createElement(_filter_items.FilterItems,{name:"split_filters",model:model,onChange:onChange,indexPatterns:indexPattern}))};exports.SplitByFilters=SplitByFilters;SplitByFilters.propTypes={model:_propTypes.default.object,onChange:_propTypes.default.func,uiRestrictions:_propTypes.default.object,indexPatterns:_propTypes.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterItems=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _collection_actions=__webpack_require__(74);var _add_delete_buttons=__webpack_require__(42);var _color_picker=__webpack_require__(52);var _uuid=_interopRequireDefault(__webpack_require__(31));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _get_default_query_language=__webpack_require__(43);var _query_bar_wrapper=__webpack_require__(46);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterItemsUi=function(_Component){_inherits(FilterItemsUi,_Component);function FilterItemsUi(props){var _this;_classCallCheck(this,FilterItemsUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(FilterItemsUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleQueryChange",function(model,filter){var part={filter:filter};_collection_actions.collectionActions.handleChange(_this.props,_lodash.default.assign({},model,part))});_this.renderRow=_this.renderRow.bind(_assertThisInitialized(_this));return _this}_createClass(FilterItemsUi,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this2.props);handleChange(_lodash.default.assign({},item,_defineProperty({},name,_lodash.default.get(e,"value",_lodash.default.get(e,"target.value")))))}}},{key:"renderRow",value:function renderRow(row,i,items){var _this3=this;var indexPatterns=this.props.indexPatterns;var defaults={filter:"",label:""};var model=_objectSpread({},defaults,{},row);var handleChange=function handleChange(part){var fn=_collection_actions.collectionActions.handleChange.bind(null,_this3.props);fn(_lodash.default.assign({},model,part))};var newFilter=function newFilter(){return{color:_this3.props.model.color,id:_uuid.default.v1(),filter:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:""}}};var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,this.props,newFilter);var handleDelete=_collection_actions.collectionActions.handleDelete.bind(null,this.props,model);var intl=this.props.intl;return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",className:"tvbAggRow",alignItems:"center",key:model.id},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:handleChange,name:"color",value:model.color})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(query){return _this3.handleQueryChange(model,query)},indexPatterns:[indexPatterns]})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{placeholder:intl.formatMessage({id:"tsvb.splits.filterItems.labelPlaceholder",defaultMessage:"Label"}),"aria-label":intl.formatMessage({id:"tsvb.splits.filterItems.labelAriaLabel",defaultMessage:"Label"}),onChange:this.handleChange(model,"label"),value:model.label,fullWidth:true})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false})))}},{key:"render",value:function render(){var _this$props=this.props,model=_this$props.model,name=_this$props.name;if(!model[name])return _react.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react.default.createElement("div",null,rows)}}]);return FilterItemsUi}(_react.Component);FilterItemsUi.propTypes={name:_propTypes.default.string,model:_propTypes.default.object,onChange:_propTypes.default.func,indexPatterns:_propTypes.default.string};var FilterItems=(0,_react2.injectI18n)(FilterItemsUi);exports.FilterItems=FilterItems},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByEverything=void 0;var _create_select_handler=__webpack_require__(18);var _group_by_select=__webpack_require__(124);var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SplitByEverything=function SplitByEverything(props){var onChange=props.onChange,model=props.model,uiRestrictions=props.uiRestrictions;var htmlId=(0,_eui.htmlIdGenerator)();var handleSelectChange=(0,_create_select_handler.createSelectHandler)(onChange);return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.everything.groupByLabel",defaultMessage:"Group by"})},_react.default.createElement(_group_by_select.GroupBySelect,{value:model.split_mode,onChange:handleSelectChange("split_mode"),uiRestrictions:uiRestrictions}))))};exports.SplitByEverything=SplitByEverything;SplitByEverything.propTypes={model:_propTypes.default.object,onChange:_propTypes.default.func,uiRestrictions:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitUnsupported=void 0;var _create_select_handler=__webpack_require__(18);var _group_by_select=__webpack_require__(124);var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SplitUnsupported=function SplitUnsupported(props){var onChange=props.onChange,model=props.model,uiRestrictions=props.uiRestrictions;var htmlId=(0,_eui.htmlIdGenerator)();var handleSelectChange=(0,_create_select_handler.createSelectHandler)(onChange);return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.splits.everything.groupByLabel",defaultMessage:"Group by"})},_react.default.createElement(_group_by_select.GroupBySelect,{value:model.split_mode,onChange:handleSelectChange("split_mode"),uiRestrictions:uiRestrictions}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{className:"tvbAggRow__unavailable",size:"xxxs"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.unsupportedSplit.splitIsUnsupportedDescription",defaultMessage:"Split by {modelType} is unsupported.",values:{modelType:_react.default.createElement(_eui.EuiCode,null,model.split_mode)}})))))};exports.SplitUnsupported=SplitUnsupported;SplitUnsupported.propTypes={model:_propTypes.default.object,onChange:_propTypes.default.func,uiRestrictions:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricSeries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _color_picker=__webpack_require__(52);var _add_delete_buttons=__webpack_require__(42);var _series_config=__webpack_require__(367);var _split=__webpack_require__(123);var _series_drag_handler=__webpack_require__(86);var _eui=__webpack_require__(3);var _create_text_handler=__webpack_require__(21);var _react2=__webpack_require__(5);var _aggs=__webpack_require__(106);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function MetricSeriesUi(props){var panel=props.panel,fields=props.fields,name=props.name,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl,uiRestrictions=props.uiRestrictions;var defaults={label:""};var model=_objectSpread({},defaults,{},props.model);var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react.default.createElement("div",null,_react.default.createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}),_react.default.createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react.default.createElement(_split.Split,{onChange:props.onChange,fields:fields,panel:panel,model:model,uiRestrictions:uiRestrictions})))}else{seriesBody=_react.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react.default.createElement("div",{className:"tvbSeries__body"},_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.metric.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),_react.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker;if(props.colorPicker){colorPicker=_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color}))}return _react.default.createElement("div",{className:"".concat(props.className),style:props.style},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.metric.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),colorPicker,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.metric.editor.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react.default.createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.metric.editor.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.metric.editor.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.metric.editor.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,togglePanelActivation:props.togglePanelActivation,isPanelActive:!model.hidden,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}MetricSeriesUi.propTypes={className:_propTypes.default.string,colorPicker:_propTypes.default.bool,disableAdd:_propTypes.default.bool,disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,name:_propTypes.default.string,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onClone:_propTypes.default.func,onDelete:_propTypes.default.func,model:_propTypes.default.object,panel:_propTypes.default.object,selectedTab:_propTypes.default.string,style:_propTypes.default.object,switchTab:_propTypes.default.func,toggleVisible:_propTypes.default.func,visible:_propTypes.default.bool,togglePanelActivation:_propTypes.default.func,uiRestrictions:_propTypes.default.object,dragHandleProps:_propTypes.default.object,indexPatternForQuery:_propTypes.default.string};var MetricSeries=(0,_react2.injectI18n)(MetricSeriesUi);exports.MetricSeries=MetricSeries},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNSeries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _color_picker=__webpack_require__(52);var _add_delete_buttons=__webpack_require__(42);var _series_config=__webpack_require__(367);var _split=__webpack_require__(123);var _series_drag_handler=__webpack_require__(86);var _eui=__webpack_require__(3);var _create_text_handler=__webpack_require__(21);var _react2=__webpack_require__(5);var _aggs=__webpack_require__(106);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TopNSeries=(0,_react2.injectI18n)(function(props){var panel=props.panel,model=props.model,name=props.name,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl,uiRestrictions=props.uiRestrictions;var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react.default.createElement("div",null,_react.default.createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}),_react.default.createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react.default.createElement(_split.Split,{onChange:props.onChange,fields:fields,panel:panel,model:model,uiRestrictions:uiRestrictions})))}else{seriesBody=_react.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react.default.createElement("div",{className:"tvbSeries__body"},_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.tab.metricsLabel",defaultMessage:"Metrics"})),_react.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.tab.optionsLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker=_react.default.createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});return _react.default.createElement("div",{className:"".concat(props.className),style:props.style},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.topN.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},colorPicker),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.topN.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react.default.createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.topN.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.topN.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.topN.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,togglePanelActivation:props.togglePanelActivation,isPanelActive:!model.hidden,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)});exports.TopNSeries=TopNSeries;TopNSeries.propTypes={className:_propTypes.default.string,colorPicker:_propTypes.default.bool,disableAdd:_propTypes.default.bool,disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,name:_propTypes.default.string,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onClone:_propTypes.default.func,onDelete:_propTypes.default.func,model:_propTypes.default.object,panel:_propTypes.default.object,selectedTab:_propTypes.default.string,style:_propTypes.default.object,switchTab:_propTypes.default.func,toggleVisible:_propTypes.default.func,visible:_propTypes.default.bool,togglePanelActivation:_propTypes.default.func,uiRestrictions:_propTypes.default.object,dragHandleProps:_propTypes.default.object,indexPatternForQuery:_propTypes.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TableSeries=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _add_delete_buttons=__webpack_require__(42);var _config=__webpack_require__(1445);var _series_drag_handler=__webpack_require__(86);var _eui=__webpack_require__(3);var _create_text_handler=__webpack_require__(21);var _react2=__webpack_require__(5);var _aggs=__webpack_require__(106);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TableSeriesUI(props){var model=props.model,onAdd=props.onAdd,name=props.name,fields=props.fields,panel=props.panel,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl,uiRestrictions=props.uiRestrictions;var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react.default.createElement("div",null,_react.default.createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}))}else{seriesBody=_react.default.createElement(_config.TableSeriesConfig,{panel:props.panel,fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react.default.createElement("div",{className:"tvbSeries__body"},_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.tab.metricsLabel",defaultMessage:"Metrics"})),_react.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.tab.optionsLabel",defaultMessage:"Options"}))),seriesBody)}return _react.default.createElement("div",{className:"".concat(props.className),style:props.style},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.table.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,"aria-label":intl.formatMessage({id:"tsvb.table.labelAriaLabel",defaultMessage:"Label"}),onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.table.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react.default.createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.table.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.table.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.table.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,togglePanelActivation:props.togglePanelActivation,isPanelActive:!model.hidden,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}TableSeriesUI.propTypes={className:_propTypes.default.string,disableAdd:_propTypes.default.bool,disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,name:_propTypes.default.string,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onClone:_propTypes.default.func,onDelete:_propTypes.default.func,model:_propTypes.default.object,panel:_propTypes.default.object,selectedTab:_propTypes.default.string,style:_propTypes.default.object,switchTab:_propTypes.default.func,toggleVisible:_propTypes.default.func,visible:_propTypes.default.bool,togglePanelActivation:_propTypes.default.func,uiRestrictions:_propTypes.default.object,dragHandleProps:_propTypes.default.object,indexPatternForQuery:_propTypes.default.string};var TableSeries=(0,_react2.injectI18n)(TableSeriesUI);exports.TableSeries=TableSeries},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TableSeriesConfig=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _uuid=_interopRequireDefault(__webpack_require__(31));var _data_format_picker=__webpack_require__(434);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _field_select=__webpack_require__(53);var _yes_no=__webpack_require__(54);var _color_rules=__webpack_require__(368);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _get_default_query_language=__webpack_require__(43);var _query_bar_wrapper=__webpack_require__(46);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var TableSeriesConfigUI=function(_Component){_inherits(TableSeriesConfigUI,_Component);function TableSeriesConfigUI(){_classCallCheck(this,TableSeriesConfigUI);return _possibleConstructorReturn(this,_getPrototypeOf(TableSeriesConfigUI).apply(this,arguments))}_createClass(TableSeriesConfigUI,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;if(!model.color_rules||model.color_rules&&model.color_rules.length===0){this.props.onChange({color_rules:[{id:_uuid.default.v1()}]})}}},{key:"render",value:function render(){var _this=this;var defaults={offset_time:"",value_template:""};var model=_objectSpread({},defaults,{},this.props.model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(this.props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var intl=this.props.intl;var functionOptions=[{label:intl.formatMessage({id:"tsvb.table.sumLabel",defaultMessage:"Sum"}),value:"sum"},{label:intl.formatMessage({id:"tsvb.table.maxLabel",defaultMessage:"Max"}),value:"max"},{label:intl.formatMessage({id:"tsvb.table.minLabel",defaultMessage:"Min"}),value:"min"},{label:intl.formatMessage({id:"tsvb.table.avgLabel",defaultMessage:"Avg"}),value:"mean"},{label:intl.formatMessage({id:"tsvb.table.overallSumLabel",defaultMessage:"Overall Sum"}),value:"overall_sum"},{label:intl.formatMessage({id:"tsvb.table.overallMaxLabel",defaultMessage:"Overall Max"}),value:"overall_max"},{label:intl.formatMessage({id:"tsvb.table.overallMinLabel",defaultMessage:"Overall Min"}),value:"overall_min"},{label:intl.formatMessage({id:"tsvb.table.overallAvgLabel",defaultMessage:"Overall Avg"}),value:"overall_avg"},{label:intl.formatMessage({id:"tsvb.table.cumulativeSumLabel",defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"}];var selectedAggFuncOption=functionOptions.find(function(option){return model.aggregate_function===option.value});return _react.default.createElement("div",{className:"tvbAggRow"},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_data_format_picker.DataFormatPicker,{onChange:handleSelectChange("formatter"),value:model.formatter})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("template"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.templateLabel",defaultMessage:"Template"}),helpText:_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.templateHelpText",defaultMessage:"eg.{templateExample}",values:{templateExample:_react.default.createElement(_eui.EuiCode,null,"{{value}}/s")}})),fullWidth:true},_react.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("value_template"),value:model.value_template,fullWidth:true})))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("filterInput"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.filterLabel",defaultMessage:"Filter"}),fullWidth:true},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter&&model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter&&model.filter.query?model.filter.query:""},onChange:function onChange(filter){return _this.props.onChange({filter:filter})},indexPatterns:[this.props.indexPatternForQuery]}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.showTrendArrowsLabel",defaultMessage:"Show trend arrows?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.trend_arrows,name:"trend_arrows",onChange:this.props.onChange}))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.fieldLabel",defaultMessage:"Field"})},_react.default.createElement(_field_select.FieldSelect,{fields:this.props.fields,indexPattern:this.props.panel.index_pattern,value:model.aggregate_by,onChange:handleSelectChange("aggregate_by"),fullWidth:true}))),_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("aggregateFunctionInput"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.aggregateFunctionLabel",defaultMessage:"Aggregate function"}),fullWidth:true},_react.default.createElement(_eui.EuiComboBox,{options:functionOptions,selectedOptions:selectedAggFuncOption?[selectedAggFuncOption]:[],onChange:handleSelectChange("aggregate_function"),singleSelection:{asPlainText:true},fullWidth:true})))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.colorRulesLabel",defaultMessage:"Color rules"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_color_rules.ColorRules,{primaryName:"text",primaryVarName:"text",hideSecondary:true,model:model,onChange:this.props.onChange,name:"color_rules"}))}}]);return TableSeriesConfigUI}(_react.Component);TableSeriesConfigUI.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func,indexPatternForQuery:_propTypes.default.string};var TableSeriesConfig=(0,_react2.injectI18n)(TableSeriesConfigUI);exports.TableSeriesConfig=TableSeriesConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GaugeSeries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _color_picker=__webpack_require__(52);var _add_delete_buttons=__webpack_require__(42);var _series_config=__webpack_require__(367);var _split=__webpack_require__(123);var _series_drag_handler=__webpack_require__(86);var _eui=__webpack_require__(3);var _create_text_handler=__webpack_require__(21);var _react2=__webpack_require__(5);var _aggs=__webpack_require__(106);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function GaugeSeriesUi(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,name=props.name,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl,uiRestrictions=props.uiRestrictions;var defaults={label:""};var model=_objectSpread({},defaults,{},props.model);var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react.default.createElement("div",null,_react.default.createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}),_react.default.createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react.default.createElement(_split.Split,{onChange:props.onChange,fields:fields,panel:panel,model:model,uiRestrictions:uiRestrictions})))}else{seriesBody=_react.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react.default.createElement("div",{className:"tvbSeries__body"},_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),_react.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker=_react.default.createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});return _react.default.createElement("div",{className:"".concat(props.className),style:props.style},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.gauge.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},colorPicker),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.gauge.editor.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react.default.createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.gauge.editor.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.gauge.editor.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.gauge.editor.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}GaugeSeriesUi.propTypes={className:_propTypes.default.string,colorPicker:_propTypes.default.bool,disableAdd:_propTypes.default.bool,disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,name:_propTypes.default.string,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onClone:_propTypes.default.func,onDelete:_propTypes.default.func,model:_propTypes.default.object,panel:_propTypes.default.object,selectedTab:_propTypes.default.string,style:_propTypes.default.object,switchTab:_propTypes.default.func,toggleVisible:_propTypes.default.func,visible:_propTypes.default.bool,uiRestrictions:_propTypes.default.object,dragHandleProps:_propTypes.default.object,indexPatternForQuery:_propTypes.default.string};var GaugeSeries=(0,_react2.injectI18n)(GaugeSeriesUi);exports.GaugeSeries=GaugeSeries},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownSeries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _add_delete_buttons=__webpack_require__(42);var _series_config=__webpack_require__(367);var _split=__webpack_require__(123);var _create_text_handler=__webpack_require__(21);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _aggs=__webpack_require__(106);var _series_drag_handler=__webpack_require__(86);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function MarkdownSeriesUi(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl,name=props.name,uiRestrictions=props.uiRestrictions;var defaults={label:"",var_name:""};var model=_objectSpread({},defaults,{},props.model);var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react.default.createElement("div",null,_react.default.createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}),_react.default.createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react.default.createElement(_split.Split,{onChange:props.onChange,fields:fields,panel:panel,model:model,uiRestrictions:uiRestrictions})))}else{seriesBody=_react.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react.default.createElement("div",{className:"tvbSeries__body"},_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),_react.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),seriesBody)}return _react.default.createElement("div",{className:"".concat(props.className),style:props.style},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.markdown.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.markdown.editor.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("var_name"),placeholder:intl.formatMessage({id:"tsvb.markdown.editor.variableNamePlaceholder",defaultMessage:"Variable name"}),value:model.var_name})),_react.default.createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:true}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.markdown.editor.addSeriesTooltip",defaultMessage:"Add series"}),deleteTooltip:intl.formatMessage({id:"tsvb.markdown.editor.deleteSeriesTooltip",defaultMessage:"Delete series"}),cloneTooltip:intl.formatMessage({id:"tsvb.markdown.editor.cloneSeriesTooltip",defaultMessage:"Clone series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}MarkdownSeriesUi.propTypes={className:_propTypes.default.string,colorPicker:_propTypes.default.bool,disableAdd:_propTypes.default.bool,disableDelete:_propTypes.default.bool,fields:_propTypes.default.object,name:_propTypes.default.string,onAdd:_propTypes.default.func,onChange:_propTypes.default.func,onClone:_propTypes.default.func,onDelete:_propTypes.default.func,model:_propTypes.default.object,panel:_propTypes.default.object,selectedTab:_propTypes.default.string,style:_propTypes.default.object,switchTab:_propTypes.default.func,toggleVisible:_propTypes.default.func,visible:_propTypes.default.bool,uiRestrictions:_propTypes.default.object,dragHandleProps:_propTypes.default.object,indexPatternForQuery:_propTypes.default.string};var MarkdownSeries=(0,_react2.injectI18n)(MarkdownSeriesUi);exports.MarkdownSeries=MarkdownSeries},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.newSeriesFn=void 0;var _uuid=_interopRequireDefault(__webpack_require__(31));var _lodash=_interopRequireDefault(__webpack_require__(1));var _new_metric_agg_fn=__webpack_require__(433);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var newSeriesFn=function newSeriesFn(){var obj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _lodash.default.assign({id:_uuid.default.v1(),color:"#68BC00",split_mode:"everything",metrics:[(0,_new_metric_agg_fn.newMetricAggFn)()],separate_axis:0,axis_position:"right",formatter:"number",chart_type:"line",line_width:1,point_size:1,fill:.5,stacked:"none"},obj)};exports.newSeriesFn=newSeriesFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reorder=void 0;function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var reorder=function reorder(list,startIndex,endIndex){var result=Array.from(list);var _result$splice=result.splice(startIndex,1),_result$splice2=_slicedToArray(_result$splice,1),removed=_result$splice2[0];result.splice(endIndex,0,removed);return result};exports.reorder=reorder},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnnotationsEditor=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _collection_actions=__webpack_require__(74);var _es_types=__webpack_require__(75);var _add_delete_buttons=__webpack_require__(42);var _color_picker=__webpack_require__(52);var _field_select=__webpack_require__(53);var _uuid=_interopRequireDefault(__webpack_require__(31));var _icon_select=__webpack_require__(1451);var _yes_no=__webpack_require__(54);var _query_bar_wrapper=__webpack_require__(46);var _get_default_query_language=__webpack_require__(43);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function newAnnotation(){return{id:_uuid.default.v1(),color:"#F00",index_pattern:"*",time_field:"@timestamp",icon:"fa-tag",ignore_global_filters:1,ignore_panel_filters:1}}var RESTRICT_FIELDS=[_es_types.ES_TYPES.DATE];var AnnotationsEditor=function(_Component){_inherits(AnnotationsEditor,_Component);function AnnotationsEditor(props){var _this;_classCallCheck(this,AnnotationsEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(AnnotationsEditor).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleQueryChange",function(model,filter){var part={query_string:filter};_collection_actions.collectionActions.handleChange(_this.props,_objectSpread({},model,{},part))});_this.renderRow=_this.renderRow.bind(_assertThisInitialized(_this));return _this}_createClass(AnnotationsEditor,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash.default.get(e,"[0].value",_lodash.default.get(e,"target.value"));handleChange(_lodash.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row){var _this3=this;var defaults={fields:"",template:"",index_pattern:"*",query_string:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()}};var model=_objectSpread({},defaults,{},row);var handleChange=function handleChange(part){var fn=_collection_actions.collectionActions.handleChange.bind(null,_this3.props);fn(_lodash.default.assign({},model,part))};var togglePanelActivation=function togglePanelActivation(){handleChange({hidden:!model.hidden})};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,this.props,newAnnotation);var handleDelete=_collection_actions.collectionActions.handleDelete.bind(null,this.props,model);return _react.default.createElement("div",{className:"tvbAnnotationsEditor",key:model.id},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:handleChange,name:"color",value:model.color})),_react.default.createElement(_eui.EuiFlexItem,{className:"tvbAggRow__children"},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("indexPattern"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.indexPatternLabel",defaultMessage:"Index pattern (required)"}),fullWidth:true},_react.default.createElement(_eui.EuiFieldText,{onChange:this.handleChange(model,"index_pattern"),value:model.index_pattern,fullWidth:true}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("timeField"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.timeFieldLabel",defaultMessage:"Time field (required)"}),fullWidth:true},_react.default.createElement(_field_select.FieldSelect,{restrict:RESTRICT_FIELDS,value:model.time_field,onChange:this.handleChange(model,"time_field"),indexPattern:model.index_pattern,fields:this.props.fields,fullWidth:true})))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("queryString"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.queryStringLabel",defaultMessage:"Query string"}),fullWidth:true},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.query_string.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.query_string.query||""},onChange:function onChange(query){return _this3.handleQueryChange(model,query)},indexPatterns:[model.index_pattern]}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.ignoreGlobalFiltersLabel",defaultMessage:"Ignore global filters?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.ignore_global_filters,name:"ignore_global_filters",onChange:handleChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.ignorePanelFiltersLabel",defaultMessage:"Ignore panel filters?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.ignore_panel_filters,name:"ignore_panel_filters",onChange:handleChange}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("icon"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.iconLabel",defaultMessage:"Icon (required)"})},_react.default.createElement(_icon_select.IconSelect,{value:model.icon,onChange:this.handleChange(model,"icon")}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("fields"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.fieldsLabel",defaultMessage:"Fields (required - comma separated paths)"}),fullWidth:true},_react.default.createElement(_eui.EuiFieldText,{onChange:this.handleChange(model,"fields"),value:model.fields,fullWidth:true}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("rowTemplate"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.rowTemplateLabel",defaultMessage:"Row template (required)"}),helpText:_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.rowTemplateHelpText",defaultMessage:"eg.{rowTemplateExample}",values:{rowTemplateExample:_react.default.createElement(_eui.EuiCode,null,"{{field}}")}})),fullWidth:true},_react.default.createElement(_eui.EuiFieldText,{onChange:this.handleChange(model,"template"),value:model.template,fullWidth:true}))))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:handleAdd,onDelete:handleDelete,togglePanelActivation:togglePanelActivation,isPanelActive:!model.hidden}))))}},{key:"render",value:function render(){var model=this.props.model;var content;if(!model.annotations||!model.annotations.length){var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,this.props,newAnnotation);content=_react.default.createElement(_eui.EuiText,{textAlign:"center"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.howToCreateAnnotationDataSourceDescription",defaultMessage:"Click the button below to create an annotation data source."})),_react.default.createElement(_eui.EuiButton,{fill:true,onClick:handleAdd},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.addDataSourceButtonLabel",defaultMessage:"Add data source"})))}else{var annotations=model.annotations.map(this.renderRow);content=_react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.dataSourcesLabel",defaultMessage:"Data sources"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),annotations)}return _react.default.createElement("div",{className:"tvbAnnotationsEditor__container"},content)}}]);return AnnotationsEditor}(_react.Component);exports.AnnotationsEditor=AnnotationsEditor;AnnotationsEditor.defaultProps={name:"annotations"};AnnotationsEditor.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,name:_propTypes.default.string,onChange:_propTypes.default.func,uiSettings:_propTypes.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IconSelect=IconSelect;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderOption(option){var icon=option.value;var label=option.label;return _react.default.createElement("span",null,_react.default.createElement("span",{className:"kuiIcon ".concat(icon),"aria-hidden":"true"})," ".concat(label))}function IconSelect(props){var selectedIcon=props.icons.find(function(option){return props.value===option.value});return _react.default.createElement(_eui.EuiComboBox,{isClearable:false,id:props.id,options:props.icons,selectedOptions:selectedIcon?[selectedIcon]:[],onChange:props.onChange,singleSelection:{asPlainText:true},renderOption:renderOption})}IconSelect.defaultProps={icons:[{value:"fa-asterisk",label:_i18n.i18n.translate("tsvb.iconSelect.asteriskLabel",{defaultMessage:"Asterisk"})},{value:"fa-bell",label:_i18n.i18n.translate("tsvb.iconSelect.bellLabel",{defaultMessage:"Bell"})},{value:"fa-bolt",label:_i18n.i18n.translate("tsvb.iconSelect.boltLabel",{defaultMessage:"Bolt"})},{value:"fa-bomb",label:_i18n.i18n.translate("tsvb.iconSelect.bombLabel",{defaultMessage:"Bomb"})},{value:"fa-bug",label:_i18n.i18n.translate("tsvb.iconSelect.bugLabel",{defaultMessage:"Bug"})},{value:"fa-comment",label:_i18n.i18n.translate("tsvb.iconSelect.commentLabel",{defaultMessage:"Comment"})},{value:"fa-exclamation-circle",label:_i18n.i18n.translate("tsvb.iconSelect.exclamationCircleLabel",{defaultMessage:"Exclamation Circle"})},{value:"fa-exclamation-triangle",label:_i18n.i18n.translate("tsvb.iconSelect.exclamationTriangleLabel",{defaultMessage:"Exclamation Triangle"})},{value:"fa-fire",label:_i18n.i18n.translate("tsvb.iconSelect.fireLabel",{defaultMessage:"Fire"})},{value:"fa-flag",label:_i18n.i18n.translate("tsvb.iconSelect.flagLabel",{defaultMessage:"Flag"})},{value:"fa-heart",label:_i18n.i18n.translate("tsvb.iconSelect.heartLabel",{defaultMessage:"Heart"})},{value:"fa-map-marker",label:_i18n.i18n.translate("tsvb.iconSelect.mapMarkerLabel",{defaultMessage:"Map Marker"})},{value:"fa-map-pin",label:_i18n.i18n.translate("tsvb.iconSelect.mapPinLabel",{defaultMessage:"Map Pin"})},{value:"fa-star",label:_i18n.i18n.translate("tsvb.iconSelect.starLabel",{defaultMessage:"Star"})},{value:"fa-tag",label:_i18n.i18n.translate("tsvb.iconSelect.tagLabel",{defaultMessage:"Tag"})}]};IconSelect.propTypes={icons:_propTypes.default.array,id:_propTypes.default.string,onChange:_propTypes.default.func,value:_propTypes.default.string.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricPanelConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _series_editor=__webpack_require__(105);var _index_pattern=__webpack_require__(76);var _color_rules=__webpack_require__(368);var _yes_no=__webpack_require__(54);var _uuid=_interopRequireDefault(__webpack_require__(31));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _query_bar_wrapper=__webpack_require__(46);var _get_default_query_language=__webpack_require__(43);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var MetricPanelConfig=function(_Component){_inherits(MetricPanelConfig,_Component);function MetricPanelConfig(props){var _this;_classCallCheck(this,MetricPanelConfig);_this=_possibleConstructorReturn(this,_getPrototypeOf(MetricPanelConfig).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(MetricPanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;if(!model.background_color_rules||model.background_color_rules&&model.background_color_rules.length===0){this.props.onChange({background_color_rules:[{id:_uuid.default.v1()}]})}}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()}};var model=_objectSpread({},defaults,{},this.props.model);var htmlId=(0,_eui.htmlIdGenerator)();var view;if(selectedTab==="data"){view=_react.default.createElement(_series_editor.SeriesEditor,{colorPicker:false,fields:this.props.fields,limit:2,model:this.props.model,name:this.props.name,onChange:this.props.onChange})}else{view=_react.default.createElement("div",{className:"tvbPanelConfig__container"},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.dataLabel",defaultMessage:"Data"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this2.props.onChange({filter:filter})},indexPatterns:[model.index_pattern||model.default_index_pattern]}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_color_rules.ColorRules,{model:model,onChange:this.props.onChange,name:"background_color_rules"})))}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.metric.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")},"data-test-subj":"metricEditorPanelOptionsBtn"},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return MetricPanelConfig}(_react.Component);exports.MetricPanelConfig=MetricPanelConfig;MetricPanelConfig.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNPanelConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _series_editor=__webpack_require__(105);var _index_pattern=__webpack_require__(76);var _create_text_handler=__webpack_require__(21);var _color_rules=__webpack_require__(368);var _color_picker=__webpack_require__(52);var _uuid=_interopRequireDefault(__webpack_require__(31));var _yes_no=__webpack_require__(54);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _get_default_query_language=__webpack_require__(43);var _query_bar_wrapper=__webpack_require__(46);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var TopNPanelConfig=function(_Component){_inherits(TopNPanelConfig,_Component);function TopNPanelConfig(props){var _this;_classCallCheck(this,TopNPanelConfig);_this=_possibleConstructorReturn(this,_getPrototypeOf(TopNPanelConfig).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(TopNPanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};if(!model.bar_color_rules||model.bar_color_rules&&model.bar_color_rules.length===0){parts.bar_color_rules=[{id:_uuid.default.v1()}]}this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={drilldown_url:"",filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()}};var model=_objectSpread({},defaults,{},this.props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleTextChange=(0,_create_text_handler.createTextHandler)(this.props.onChange);var view;if(selectedTab==="data"){view=_react.default.createElement(_series_editor.SeriesEditor,{colorPicker:false,fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange})}else{view=_react.default.createElement("div",{className:"tvbPanelConfig__container"},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.dataLabel",defaultMessage:"Data"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFormRow,{id:htmlId("itemUrl"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.itemUrlLabel",defaultMessage:"Item url"}),helpText:_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.itemUrlDescription",defaultMessage:"This supports mustache templating. {key} is set to the term.",values:{key:_react.default.createElement(_eui.EuiCode,null,"{{key}}")}}))},_react.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("drilldown_url"),value:model.drilldown_url})),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this2.props.onChange({filter:filter})},indexPatterns:[model.index_pattern||model.default_index_pattern]}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.styleLabel",defaultMessage:"Style"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_color_picker.ColorPicker,{onChange:this.props.onChange,name:"background_color",value:model.background_color}))),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_color_rules.ColorRules,{model:model,primaryVarName:"bar_color",primaryName:"bar",hideSecondary:true,onChange:this.props.onChange,name:"bar_color_rules"})))}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return TopNPanelConfig}(_react.Component);exports.TopNPanelConfig=TopNPanelConfig;TopNPanelConfig.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TablePanelConfig=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _field_select=__webpack_require__(53);var _series_editor=__webpack_require__(105);var _index_pattern=__webpack_require__(76);var _create_text_handler=__webpack_require__(21);var _lodash=__webpack_require__(1);var _uuid=_interopRequireDefault(__webpack_require__(31));var _yes_no=__webpack_require__(54);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _query_bar_wrapper=__webpack_require__(46);var _get_default_query_language=__webpack_require__(43);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TablePanelConfig=function(_Component){_inherits(TablePanelConfig,_Component);function TablePanelConfig(props){var _this;_classCallCheck(this,TablePanelConfig);_this=_possibleConstructorReturn(this,_getPrototypeOf(TablePanelConfig).call(this,props));_defineProperty(_assertThisInitialized(_this),"handlePivotChange",function(selectedOption){var _this$props=_this.props,fields=_this$props.fields,model=_this$props.model;var pivotId=(0,_lodash.get)(selectedOption,"[0].value",null);var field=fields[model.index_pattern].find(function(field){return field.name===pivotId});var pivotType=(0,_lodash.get)(field,"type",model.pivot_type);_this.props.onChange({pivot_id:pivotId,pivot_type:pivotType})});_this.state={selectedTab:"data"};return _this}_createClass(TablePanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};if(!model.bar_color_rules||model.bar_color_rules&&model.bar_color_rules.length===0){parts.bar_color_rules=[{id:_uuid.default.v1()}]}this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={drilldown_url:"",filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()},pivot_label:"",pivot_rows:10,pivot_type:""};var model=_objectSpread({},defaults,{},this.props.model);var handleTextChange=(0,_create_text_handler.createTextHandler)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var view;if(selectedTab==="data"){view=_react.default.createElement("div",null,_react.default.createElement("div",{className:"tvbPanelConfig__container"},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.dataTab.defineFieldDescription",defaultMessage:"For the table visualization you need to define a field to group by using a terms aggregation."}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,{"data-test-subj":"groupByField"},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.dataTab.groupByFieldLabel",defaultMessage:"Group by field"})},_react.default.createElement(_field_select.FieldSelect,{fields:this.props.fields,value:model.pivot_id,indexPattern:model.index_pattern,onChange:this.handlePivotChange,fullWidth:true}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("pivotLabelInput"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.dataTab.columnLabel",defaultMessage:"Column label"}),fullWidth:true},_react.default.createElement(_eui.EuiFieldText,{"data-test-subj":"columnLabelName",onChange:handleTextChange("pivot_label"),value:model.pivot_label,fullWidth:true}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{id:htmlId("pivotRowsInput"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.dataTab.rowsLabel",defaultMessage:"Rows"})},_react.default.createElement("input",{className:"tvbAgg__input",type:"number",onChange:handleTextChange("pivot_rows"),value:model.pivot_rows})))))),_react.default.createElement(_series_editor.SeriesEditor,{fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange}))}else{view=_react.default.createElement("div",{className:"tvbPanelConfig__container"},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.dataLabel",defaultMessage:"Data"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFormRow,{id:htmlId("drilldownInput"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.itemUrlLabel",defaultMessage:"Item url"}),helpText:_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.itemUrlHelpText",defaultMessage:"This supports mustache templating. {key} is set to the term.",values:{key:_react.default.createElement(_eui.EuiCode,null,"{{key}}")}}))},_react.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("drilldown_url"),value:model.drilldown_url})),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilterInput"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this2.props.onChange({filter:filter})},indexPatterns:[model.index_pattern||model.default_index_pattern]}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("globalFilterOption")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{id:htmlId("globalFilterOption"),value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))))}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.dataTab.columnsButtonLabel",defaultMessage:"Columns"})),_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return TablePanelConfig}(_react.Component);exports.TablePanelConfig=TablePanelConfig;TablePanelConfig.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GaugePanelConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _series_editor=__webpack_require__(105);var _index_pattern=__webpack_require__(76);var _create_select_handler=__webpack_require__(18);var _create_text_handler=__webpack_require__(21);var _color_rules=__webpack_require__(368);var _color_picker=__webpack_require__(52);var _uuid=_interopRequireDefault(__webpack_require__(31));var _yes_no=__webpack_require__(54);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _query_bar_wrapper=__webpack_require__(46);var _get_default_query_language=__webpack_require__(43);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var GaugePanelConfigUi=function(_Component){_inherits(GaugePanelConfigUi,_Component);function GaugePanelConfigUi(props){var _this;_classCallCheck(this,GaugePanelConfigUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(GaugePanelConfigUi).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(GaugePanelConfigUi,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};if(!model.gauge_color_rules||model.gauge_color_rules&&model.gauge_color_rules.length===0){parts.gauge_color_rules=[{id:_uuid.default.v1()}]}if(model.gauge_width==null)parts.gauge_width=10;if(model.gauge_inner_width==null)parts.gauge_inner_width=10;if(model.gauge_style==null)parts.gauge_style="half";this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var intl=this.props.intl;var defaults={gauge_max:"",filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()},gauge_style:"circle",gauge_inner_width:"",gauge_width:""};var model=_objectSpread({},defaults,{},this.props.model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(this.props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(this.props.onChange);var styleOptions=[{label:intl.formatMessage({id:"tsvb.gauge.styleOptions.circleLabel",defaultMessage:"Circle"}),value:"circle"},{label:intl.formatMessage({id:"tsvb.gauge.styleOptions.halfCircleLabel",defaultMessage:"Half Circle"}),value:"half"}];var htmlId=(0,_eui.htmlIdGenerator)();var selectedGaugeStyleOption=styleOptions.find(function(option){return model.gauge_style===option.value});var view;if(selectedTab==="data"){view=_react.default.createElement(_series_editor.SeriesEditor,{colorPicker:true,fields:this.props.fields,limit:1,model:this.props.model,name:this.props.name,onChange:this.props.onChange})}else{view=_react.default.createElement("div",{className:"tvbPanelConfig__container"},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.dataLabel",defaultMessage:"Data"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this2.props.onChange({filter:filter})},indexPatterns:[model.index_pattern||model.default_index_pattern]}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.styleLabel",defaultMessage:"Style"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("gaugeMax"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.gaugeMaxLabel",defaultMessage:"Gauge max (empty for auto)"})},_react.default.createElement("input",{id:htmlId("gaugeMax"),className:"tvbAgg__input",type:"number",onChange:handleTextChange("gauge_max"),value:model.gauge_max}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("gaugeStyle"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.gaugeStyleLabel",defaultMessage:"Gauge style"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,options:styleOptions,selectedOptions:selectedGaugeStyleOption?[selectedGaugeStyleOption]:[],onChange:handleSelectChange("gauge_style"),singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("innerLine"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.innerLineWidthLabel",defaultMessage:"Inner line width"})},_react.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("gauge_inner_width"),value:Number(model.gauge_inner_width)}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("gaugeLine"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.gaugeLineWidthLabel",defaultMessage:"Gauge line width"})},_react.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("gauge_width"),value:Number(model.gauge_width)})))),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_color_picker.ColorPicker,{onChange:this.props.onChange,name:"background_color",value:model.background_color})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.innerColorLabel",defaultMessage:"Inner color:"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_color_picker.ColorPicker,{onChange:this.props.onChange,name:"gauge_inner_color",value:model.gauge_inner_color}))),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_color_rules.ColorRules,{primaryName:"gauge color",primaryVarName:"gauge",secondaryName:"text color",secondaryVarName:"text",model:model,onChange:this.props.onChange,name:"gauge_color_rules"})))}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return GaugePanelConfigUi}(_react.Component);GaugePanelConfigUi.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func};var GaugePanelConfig=(0,_react2.injectI18n)(GaugePanelConfigUi);exports.GaugePanelConfig=GaugePanelConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownPanelConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _series_editor=__webpack_require__(105);var _index_pattern=__webpack_require__(76);__webpack_require__(1460);var _create_select_handler=__webpack_require__(18);var _color_picker=__webpack_require__(52);var _yes_no=__webpack_require__(54);var _markdown_editor=__webpack_require__(1458);var _lessBrowser=_interopRequireDefault(__webpack_require__(1475));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _query_bar_wrapper=__webpack_require__(46);var _get_default_query_language=__webpack_require__(43);var _vis_data_context=__webpack_require__(366);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var lessC=(0,_lessBrowser.default)(window,{env:"production"});var MarkdownPanelConfigUi=function(_Component){_inherits(MarkdownPanelConfigUi,_Component);function MarkdownPanelConfigUi(props){var _this;_classCallCheck(this,MarkdownPanelConfigUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(MarkdownPanelConfigUi).call(this,props));_this.state={selectedTab:"markdown"};_this.handleCSSChange=_this.handleCSSChange.bind(_assertThisInitialized(_this));return _this}_createClass(MarkdownPanelConfigUi,[{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"handleCSSChange",value:function handleCSSChange(value){var _this2=this;var model=this.props.model;var lessSrc="#markdown-".concat(model.id," {\n  ").concat(value,"\n}");lessC.render(lessSrc,{compress:true},function(e,output){var parts={markdown_less:value};if(output){parts.markdown_css=output.css}_this2.props.onChange(parts)})}},{key:"render",value:function render(){var _this3=this;var defaults={filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()}};var model=_objectSpread({},defaults,{},this.props.model);var selectedTab=this.state.selectedTab;var handleSelectChange=(0,_create_select_handler.createSelectHandler)(this.props.onChange);var intl=this.props.intl;var htmlId=(0,_eui.htmlIdGenerator)();var alignOptions=[{label:intl.formatMessage({id:"tsvb.markdown.alignOptions.topLabel",defaultMessage:"Top"}),value:"top"},{label:intl.formatMessage({id:"tsvb.markdown.alignOptions.middleLabel",defaultMessage:"Middle"}),value:"middle"},{label:intl.formatMessage({id:"tsvb.markdown.alignOptions.bottomLabel",defaultMessage:"Bottom"}),value:"bottom"}];var selectedAlignOption=alignOptions.find(function(option){return model.markdown_vertical_align===option.value});var view;if(selectedTab==="markdown"){view=_react.default.createElement(_vis_data_context.VisDataContext.Consumer,null,function(visData){return _react.default.createElement(_markdown_editor.MarkdownEditor,_extends({visData:visData},_this3.props))})}else if(selectedTab==="data"){view=_react.default.createElement(_series_editor.SeriesEditor,{colorPicker:false,fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange})}else{view=_react.default.createElement("div",{className:"tvbPanelConfig__container"},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.dataLabel",defaultMessage:"Data"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react.default.createElement(_query_bar_wrapper.QueryBarWrapper,{query:{language:model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this3.props.onChange({filter:filter})},indexPatterns:[model.index_pattern||model.default_index_pattern]}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_yes_no.YesNo,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.styleLabel",defaultMessage:"Style"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_color_picker.ColorPicker,{onChange:this.props.onChange,name:"background_color",value:model.background_color})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.showScrollbarsLabel",defaultMessage:"Show scrollbars?"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_yes_no.YesNo,{value:model.markdown_scrollbars,name:"markdown_scrollbars",onChange:this.props.onChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.openLinksInNewTab",defaultMessage:"Open links in new tab?"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_yes_no.YesNo,{value:model.markdown_openLinksInNewTab,name:"markdown_openLinksInNewTab",onChange:this.props.onChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0},htmlFor:htmlId("valign")},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.verticalAlignmentLabel",defaultMessage:"Vertical alignment:"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiComboBox,{id:htmlId("valign"),isClearable:false,options:alignOptions,selectedOptions:selectedAlignOption?[selectedAlignOption]:[],onChange:handleSelectChange("markdown_vertical_align"),singleSelection:{asPlainText:true}}))),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.customCSSLabel",defaultMessage:"Custom CSS (supports Less)",description:"CSS and Less are names of technologies and should not be translated."}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiCodeEditor,{mode:"less",theme:"github",width:"100%",name:"ace-css-".concat(model.id),setOptions:{fontSize:"14px"},value:model.markdown_less,onChange:this.handleCSSChange})))}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTabs,{size:"s"},_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="markdown",onClick:function onClick(){return _this3.switchTab("markdown")},"data-test-subj":"markdown-subtab"},"Markdown"),_react.default.createElement(_eui.EuiTab,{"data-test-subj":"data-subtab",isSelected:selectedTab==="data",onClick:function onClick(){return _this3.switchTab("data")}},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this3.switchTab("options")},"data-test-subj":"options-subtab"},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return MarkdownPanelConfigUi}(_react.Component);MarkdownPanelConfigUi.propTypes={fields:_propTypes.default.object,model:_propTypes.default.object,onChange:_propTypes.default.func,dateFormat:_propTypes.default.string};var MarkdownPanelConfig=(0,_react2.injectI18n)(MarkdownPanelConfigUi);exports.MarkdownPanelConfig=MarkdownPanelConfig},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(308)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownEditor=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _tick_formatter=__webpack_require__(85);var _convert_series_to_vars=__webpack_require__(653);var _lodash=_interopRequireDefault(__webpack_require__(1));__webpack_require__(671);__webpack_require__(1468);var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MarkdownEditor=function(_Component){_inherits(MarkdownEditor,_Component);function MarkdownEditor(){var _getPrototypeOf2;var _this;_classCallCheck(this,MarkdownEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MarkdownEditor)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"handleChange",function(value){_this.props.onChange({markdown:value})});_defineProperty(_assertThisInitialized(_this),"handleOnLoad",function(ace){_this.ace=ace});return _this}_createClass(MarkdownEditor,[{key:"handleVarClick",value:function handleVarClick(snippet){var _this2=this;return function(){if(_this2.ace)_this2.ace.insert(snippet)}}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,visData=_this$props.visData,model=_this$props.model,dateFormat=_this$props.dateFormat;if(!visData){return null}var series=_lodash.default.get(visData,"".concat(model.id,".series"),[]);var variables=(0,_convert_series_to_vars.convertSeriesToVars)(series,model,dateFormat,this.props.getConfig);var rows=[];var rawFormatter=(0,_tick_formatter.tickFormatter)("0.[0000]",null,this.props.getConfig);var createPrimitiveRow=function createPrimitiveRow(key){var snippet="{{ ".concat(key," }}");var value=_lodash.default.get(variables,key);if(/raw$/.test(key))value=rawFormatter(value);rows.push(_react.default.createElement("tr",{key:key},_react.default.createElement("td",null,_react.default.createElement("a",{onClick:_this3.handleVarClick(snippet)},snippet)),_react.default.createElement("td",null,_react.default.createElement("code",null,"“",value,"”"))))};var createArrayRow=function createArrayRow(key){var snippet="{{# ".concat(key," }}{{/ ").concat(key," }}");var date=_lodash.default.get(variables,"".concat(key,"[0][0]"));var value=_lodash.default.get(variables,"".concat(key,"[0][1]"));if(/raw$/.test(key))value=rawFormatter(value);rows.push(_react.default.createElement("tr",{key:key},_react.default.createElement("td",null,_react.default.createElement("a",{onClick:_this3.handleVarClick(snippet)},"{{ ".concat(key," }}"))),_react.default.createElement("td",null,_react.default.createElement("code",null,"[ [ “",date,"”, “",value,"” ], ... ]"))))};function walk(obj){var path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];for(var name in obj){if(Array.isArray(obj[name])){createArrayRow(path.concat(name).join("."))}else if(_lodash.default.isObject(obj[name])){walk(obj[name],path.concat(name))}else{createPrimitiveRow(path.concat(name).join("."))}}}walk(variables);return _react.default.createElement("div",{className:"tvbMarkdownEditor"},_react.default.createElement("div",{className:"tvbMarkdownEditor__editor"},_react.default.createElement(_eui.EuiCodeEditor,{onLoad:this.handleOnLoad,mode:"markdown",theme:"github",width:"100%",height:"100%",name:"ace-".concat(model.id),setOptions:{wrap:true,fontSize:"14px"},value:model.markdown,onChange:this.handleChange})),_react.default.createElement("div",{className:"tvbMarkdownEditor__variables"},_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.howToUseVariablesInMarkdownDescription",defaultMessage:"The following variables can be used in the Markdown by using the Handlebar (mustache) syntax. {handlebarLink} on the available expressions.",values:{handlebarLink:_react.default.createElement("a",{href:"http://handlebarsjs.com/expressions.html",target:"_BLANK",rel:"noreferrer noopener"},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.howUseVariablesInMarkdownDescription.documentationLinkText",defaultMessage:"Click here for documentation"}))}}))),_react.default.createElement("table",{className:"table","data-test-subj":"tsvbMarkdownVariablesTable"},_react.default.createElement("thead",null,_react.default.createElement("tr",null,_react.default.createElement("th",{scope:"col"},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.nameLabel",defaultMessage:"Name"})),_react.default.createElement("th",{scope:"col"},_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.valueLabel",defaultMessage:"Value"})))),_react.default.createElement("tbody",null,rows)),rows.length===0&&_react.default.createElement(_eui.EuiTitle,{size:"xxs",className:"tsvbMarkdownVariablesTable__noVariables","data-test-subj":"tvbMarkdownEditor__noVariables"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.noVariablesAvailableDescription",defaultMessage:"No variables available for the selected data metrics."}))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.howToAccessEntireTreeDescription",defaultMessage:"There is also a special variable named {all} which you can use to access the entire tree. This is useful for creating lists with data from a group by:",values:{all:_react.default.createElement("code",null,"_all")}}))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiCodeBlock,null,"# All servers:\n\n    {{#each _all}}\n    - {{ label }} {{ last.formatted }}\n    {{/each}}")))}}]);return MarkdownEditor}(_react.Component);exports.MarkdownEditor=MarkdownEditor;MarkdownEditor.propTypes={onChange:_propTypes.default.func,model:_propTypes.default.object,dateFormat:_propTypes.default.string,visData:_propTypes.default.object}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2302)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1871)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.brushHandler=void 0;var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var brushHandler=function brushHandler(timefilter){return function(ranges){timefilter.setTime({from:(0,_moment.default)(ranges.xaxis.from).toISOString(),to:(0,_moment.default)(ranges.xaxis.to).toISOString(),mode:"absolute"})}};exports.brushHandler=brushHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(8);var _public=__webpack_require__(30);var _shim=__webpack_require__(1463);var _=__webpack_require__(1469);var regionmapsConfig=_new_platform.npSetup.core.injectedMetadata.getInjectedVar("regionmap");var plugins={visualizations:_public.visualizations,data:_new_platform.npSetup.plugins.data,__LEGACY:new _shim.LegacyDependenciesPlugin(regionmapsConfig)};var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core,plugins);exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core);exports.start=start},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _legacy_dependencies_plugin=__webpack_require__(1464);Object.keys(_legacy_dependencies_plugin).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _legacy_dependencies_plugin[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LegacyDependenciesPlugin=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));__webpack_require__(369);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var LegacyDependenciesPlugin=function(){function LegacyDependenciesPlugin(regionmapsConfig){_classCallCheck(this,LegacyDependenciesPlugin);this.regionmapsConfig=regionmapsConfig}_createClass(LegacyDependenciesPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var $injector;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _chrome.default.dangerouslyGetActiveInjector();case 2:$injector=_context.sent;return _context.abrupt("return",{$injector:$injector,regionmapsConfig:this.regionmapsConfig,serviceSettings:$injector.get("serviceSettings")});case 4:case"end":return _context.stop()}}},_callee,this)}));function setup(){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){}}]);return LegacyDependenciesPlugin}();exports.LegacyDependenciesPlugin=LegacyDependenciesPlugin},function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.EMSClient=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _tms_service=__webpack_require__(1466);var _file_layer=__webpack_require__(1467);var _nodeFetch=_interopRequireDefault(__webpack_require__(1535));var _url=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var extendUrl=function extendUrl(url,props){return modifyUrlLocal(url,function(parsed){return _lodash.default.merge(parsed,props)})};function modifyUrlLocal(url,block){var parsed=(0,_url.parse)(url,true);var meaningfulParts={protocol:parsed.protocol,slashes:parsed.slashes,auth:parsed.auth,hostname:parsed.hostname,port:parsed.port,pathname:parsed.pathname,query:parsed.query||{},hash:parsed.hash};var modifiedParts=block(meaningfulParts)||meaningfulParts;return(0,_url.format)({protocol:modifiedParts.protocol,slashes:modifiedParts.slashes,auth:modifiedParts.auth,hostname:modifiedParts.hostname,port:modifiedParts.port,pathname:modifiedParts.pathname,query:modifiedParts.query,hash:modifiedParts.hash})}var unescapeTemplateVars=function unescapeTemplateVars(url){var ENCODED_TEMPLATE_VARS_RE=/%7B(\w+?)%7D/g;return url.replace(ENCODED_TEMPLATE_VARS_RE,function(total,varName){return"{".concat(varName,"}")})};var DEFAULT_LANGUAGE="en";var EMSClient=function(){function EMSClient(_ref){var kbnVersion=_ref.kbnVersion,manifestServiceUrl=_ref.manifestServiceUrl,htmlSanitizer=_ref.htmlSanitizer,language=_ref.language,landingPageUrl=_ref.landingPageUrl,fetchFunction=_ref.fetchFunction,proxyPath=_ref.proxyPath;_classCallCheck(this,EMSClient);_defineProperty(this,"EMS_LOAD_TIMEOUT",32e3);this._queryParams={elastic_tile_service_tos:"agree",my_app_name:"kibana",my_app_version:kbnVersion};this._sanitizer=htmlSanitizer?htmlSanitizer:function(x){return x};this._manifestServiceUrl=manifestServiceUrl;this._loadFileLayers=null;this._loadTMSServices=null;this._emsLandingPageUrl=typeof landingPageUrl==="string"?landingPageUrl:"";this._language=typeof language==="string"?language:DEFAULT_LANGUAGE;this._fetchFunction=typeof fetchFunction==="function"?fetchFunction:_nodeFetch.default;this._proxyPath=typeof proxyPath==="string"?proxyPath:"";this._invalidateSettings()}_createClass(EMSClient,[{key:"getDefaultLocale",value:function getDefaultLocale(){return DEFAULT_LANGUAGE}},{key:"getLocale",value:function getLocale(){return this._language}},{key:"getValueInLanguage",value:function getValueInLanguage(i18nObject){if(!i18nObject){return""}return i18nObject[this._language]?i18nObject[this._language]:i18nObject[DEFAULT_LANGUAGE]}},{key:"getManifest",value:function(){var _getManifest=_asyncToGenerator(regeneratorRuntime.mark(function _callee(manifestUrl){var url,result;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;url=extendUrl(manifestUrl,{query:this._queryParams});_context.next=4;return this._fetchWithTimeout(url);case 4:result=_context.sent;if(!result){_context.next=11;break}_context.next=8;return result.json();case 8:_context.t0=_context.sent;_context.next=12;break;case 11:_context.t0=null;case 12:return _context.abrupt("return",_context.t0);case 15:_context.prev=15;_context.t1=_context["catch"](0);if(!_context.t1){_context.t1=new Error("Unknown error")}if(!(_context.t1 instanceof Error)){_context.t1=new Error(_context.t1.data||"status ".concat(_context.t1.statusText||_context.t1.status))}throw new Error("Unable to retrieve manifest from ".concat(manifestUrl,": ").concat(_context.t1.message));case 20:case"end":return _context.stop()}}},_callee,this,[[0,15]])}));function getManifest(_x){return _getManifest.apply(this,arguments)}return getManifest}()},{key:"_fetchWithTimeout",value:function _fetchWithTimeout(url){var _this=this;return new Promise(function(resolve,reject){var timer=setTimeout(function(){return reject(new Error("Request to ".concat(url," timed out")))},_this.EMS_LOAD_TIMEOUT);_this._fetchFunction(url).then(function(response){clearTimeout(timer);resolve(response)},function(err){clearTimeout(timer);reject(err)})})}},{key:"addQueryParams",value:function addQueryParams(additionalQueryParams){for(var key in additionalQueryParams){if(additionalQueryParams.hasOwnProperty(key)){if(additionalQueryParams[key]!==this._queryParams[key]){this._queryParams=_lodash.default.assign({},this._queryParams,additionalQueryParams);this._invalidateSettings();break}}}}},{key:"_getManifestWithParams",value:function(){var _getManifestWithParams2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(url){var extendedUrl;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:extendedUrl=this.extendUrlWithParams(url);_context2.next=3;return this.getManifest(extendedUrl);case 3:return _context2.abrupt("return",_context2.sent);case 4:case"end":return _context2.stop()}}},_callee2,this)}));function _getManifestWithParams(_x2){return _getManifestWithParams2.apply(this,arguments)}return _getManifestWithParams}()},{key:"_invalidateSettings",value:function _invalidateSettings(){var _this2=this;this._getMainCatalog=_lodash.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this2._getManifestWithParams(_this2._manifestServiceUrl);case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}}},_callee3)})));this._getDefaultTMSCatalog=_lodash.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var catalogue,firstService,url;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this2._getMainCatalog();case 2:catalogue=_context4.sent;firstService=catalogue.services.find(function(service){return service.type==="tms"});if(firstService){_context4.next=6;break}return _context4.abrupt("return",[]);case 6:url=_this2._proxyPath+firstService.manifest;_context4.next=9;return _this2.getManifest(url);case 9:return _context4.abrupt("return",_context4.sent);case 10:case"end":return _context4.stop()}}},_callee4)})));this._getDefaultFileCatalog=_lodash.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var catalogue,firstService,url;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this2._getMainCatalog();case 2:catalogue=_context5.sent;firstService=catalogue.services.find(function(service){return service.type==="file"});if(firstService){_context5.next=6;break}return _context5.abrupt("return",[]);case 6:url=_this2._proxyPath+firstService.manifest;_context5.next=9;return _this2.getManifest(url);case 9:return _context5.abrupt("return",_context5.sent);case 10:case"end":return _context5.stop()}}},_callee5)})));this._loadTMSServices=_lodash.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var tmsManifest;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _this2._getDefaultTMSCatalog();case 2:tmsManifest=_context6.sent;return _context6.abrupt("return",tmsManifest.services.map(function(serviceConfig){return new _tms_service.TMSService(serviceConfig,_this2,_this2._proxyPath)}));case 4:case"end":return _context6.stop()}}},_callee6)})));this._loadFileLayers=_lodash.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var fileManifest;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this2._getDefaultFileCatalog();case 2:fileManifest=_context7.sent;return _context7.abrupt("return",fileManifest.layers.map(function(layerConfig){return new _file_layer.FileLayer(layerConfig,_this2,_this2._proxyPath)}));case 4:case"end":return _context7.stop()}}},_callee7)})))}},{key:"getMainManifest",value:function(){var _getMainManifest=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this._getMainCatalog();case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop()}}},_callee8,this)}));function getMainManifest(){return _getMainManifest.apply(this,arguments)}return getMainManifest}()},{key:"getDefaultFileManifest",value:function(){var _getDefaultFileManifest=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this._getDefaultFileCatalog();case 2:return _context9.abrupt("return",_context9.sent);case 3:case"end":return _context9.stop()}}},_callee9,this)}));function getDefaultFileManifest(){return _getDefaultFileManifest.apply(this,arguments)}return getDefaultFileManifest}()},{key:"getDefaultTMSManifest",value:function(){var _getDefaultTMSManifest=_asyncToGenerator(regeneratorRuntime.mark(function _callee10(){return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this._getDefaultTMSCatalog();case 2:return _context10.abrupt("return",_context10.sent);case 3:case"end":return _context10.stop()}}},_callee10,this)}));function getDefaultTMSManifest(){return _getDefaultTMSManifest.apply(this,arguments)}return getDefaultTMSManifest}()},{key:"getFileLayers",value:function(){var _getFileLayers=_asyncToGenerator(regeneratorRuntime.mark(function _callee11(){return regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return this._loadFileLayers();case 2:return _context11.abrupt("return",_context11.sent);case 3:case"end":return _context11.stop()}}},_callee11,this)}));function getFileLayers(){return _getFileLayers.apply(this,arguments)}return getFileLayers}()},{key:"getTMSServices",value:function(){var _getTMSServices=_asyncToGenerator(regeneratorRuntime.mark(function _callee12(){return regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return this._loadTMSServices();case 2:return _context12.abrupt("return",_context12.sent);case 3:case"end":return _context12.stop()}}},_callee12,this)}));function getTMSServices(){return _getTMSServices.apply(this,arguments)}return getTMSServices}()},{key:"getLandingPageUrl",value:function getLandingPageUrl(){return this._emsLandingPageUrl}},{key:"sanitizeHtml",value:function sanitizeHtml(html){return this._sanitizer(html)}},{key:"extendUrlWithParams",value:function extendUrlWithParams(url){return unescapeTemplateVars(extendUrl(url,{query:this._queryParams}))}},{key:"findFileLayerById",value:function(){var _findFileLayerById=_asyncToGenerator(regeneratorRuntime.mark(function _callee13(id){var fileLayers,i;return regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return this.getFileLayers();case 2:fileLayers=_context13.sent;i=0;case 4:if(!(i<fileLayers.length)){_context13.next=10;break}if(!fileLayers[i].hasId(id)){_context13.next=7;break}return _context13.abrupt("return",fileLayers[i]);case 7:i++;_context13.next=4;break;case 10:case"end":return _context13.stop()}}},_callee13,this)}));function findFileLayerById(_x3){return _findFileLayerById.apply(this,arguments)}return findFileLayerById}()},{key:"findTMSServiceById",value:function(){var _findTMSServiceById=_asyncToGenerator(regeneratorRuntime.mark(function _callee14(id){var tmsServices,i;return regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return this.getTMSServices();case 2:tmsServices=_context14.sent;i=0;case 4:if(!(i<tmsServices.length)){_context14.next=10;break}if(!tmsServices[i].hasId(id)){_context14.next=7;break}return _context14.abrupt("return",tmsServices[i]);case 7:i++;_context14.next=4;break;case 10:case"end":return _context14.stop()}}},_callee14,this)}));function findTMSServiceById(_x4){return _findTMSServiceById.apply(this,arguments)}return findTMSServiceById}()}]);return EMSClient}();exports.EMSClient=EMSClient},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty2(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.TMSService=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _origin=__webpack_require__(87);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TMSService=function(){function TMSService(config,emsClient,proxyPath){var _this=this;_classCallCheck(this,TMSService);_defineProperty(this,"_getRasterStyleJson",_lodash.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var rasterUrl,url;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rasterUrl=_this._getStyleUrlForLocale("raster");url=_this._proxyPath+rasterUrl;return _context.abrupt("return",_this._emsClient.getManifest(_this._emsClient.extendUrlWithParams(url)));case 3:case"end":return _context.stop()}}},_callee)}))));_defineProperty(this,"_getVectorStyleJsonRaw",_lodash.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var vectorUrl,url,vectorJson;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:vectorUrl=_this._getStyleUrlForLocale("vector");url=_this._proxyPath+vectorUrl;_context2.next=4;return _this._emsClient.getManifest(_this._emsClient.extendUrlWithParams(url));case 4:vectorJson=_context2.sent;return _context2.abrupt("return",_objectSpread({},vectorJson));case 6:case"end":return _context2.stop()}}},_callee2)}))));_defineProperty(this,"_getVectorStyleJsonInlined",_lodash.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var vectorJson,inlinedSources,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,sourceName,sourceUrl,extendedUrl,sourceJson,extendedTileUrls;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this._getVectorStyleJsonRaw();case 2:vectorJson=_context3.sent;inlinedSources={};_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context3.prev=7;_iterator=Object.getOwnPropertyNames(vectorJson.sources)[Symbol.iterator]();case 9:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context3.next=21;break}sourceName=_step.value;sourceUrl=_this._proxyPath+vectorJson.sources[sourceName].url;extendedUrl=_this._emsClient.extendUrlWithParams(sourceUrl);_context3.next=15;return _this._emsClient.getManifest(extendedUrl);case 15:sourceJson=_context3.sent;extendedTileUrls=sourceJson.tiles.map(function(tileUrl){var url=_this._proxyPath+tileUrl;return _this._emsClient.extendUrlWithParams(url)});inlinedSources[sourceName]=_objectSpread({type:"vector"},sourceJson,{tiles:extendedTileUrls});case 18:_iteratorNormalCompletion=true;_context3.next=9;break;case 21:_context3.next=27;break;case 23:_context3.prev=23;_context3.t0=_context3["catch"](7);_didIteratorError=true;_iteratorError=_context3.t0;case 27:_context3.prev=27;_context3.prev=28;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 30:_context3.prev=30;if(!_didIteratorError){_context3.next=33;break}throw _iteratorError;case 33:return _context3.finish(30);case 34:return _context3.finish(27);case 35:_context3.t1=_objectSpread;_context3.t2={};_context3.t3=vectorJson;_context3.t4=inlinedSources;_context3.next=41;return _this._getSpriteSheetRootPath();case 41:_context3.t5=_context3.sent;_context3.t6={sources:_context3.t4,sprite:_context3.t5};return _context3.abrupt("return",(0,_context3.t1)(_context3.t2,_context3.t3,_context3.t6));case 44:case"end":return _context3.stop()}}},_callee3,null,[[7,23,27,35],[28,,30,34]])}))));this._config=config;this._emsClient=emsClient;this._proxyPath=proxyPath}_createClass(TMSService,[{key:"_getFormats",value:function _getFormats(formatType,locale){return this._config.formats.filter(function(format){return format.locale===locale&&format.format===formatType})}},{key:"_getStyleUrlForLocale",value:function _getStyleUrlForLocale(formatType){var vectorFormats=this._getFormats(formatType,this._emsClient.getLocale());if(!vectorFormats.length){vectorFormats=this._getFormats(formatType,this._emsClient.getDefaultLocale())}if(!vectorFormats.length){throw new Error("Cannot find ".concat(formatType," tile layer for locale ").concat(this._emsClient.getLocale()," or ").concat(this._emsClient.getDefaultLocale()))}var defaultStyle=vectorFormats[0];if(defaultStyle&&defaultStyle.hasOwnProperty("url")){return defaultStyle.url}}},{key:"getDefaultRasterStyle",value:function(){var _getDefaultRasterStyle=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this._getRasterStyleJson();case 2:return _context4.abrupt("return",_context4.sent);case 3:case"end":return _context4.stop()}}},_callee4,this)}));function getDefaultRasterStyle(){return _getDefaultRasterStyle.apply(this,arguments)}return getDefaultRasterStyle}()},{key:"getUrlTemplate",value:function(){var _getUrlTemplate=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var tileJson,directUrl;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this._getRasterStyleJson();case 2:tileJson=_context5.sent;directUrl=this._proxyPath+tileJson.tiles[0];return _context5.abrupt("return",this._emsClient.extendUrlWithParams(directUrl));case 5:case"end":return _context5.stop()}}},_callee5,this)}));function getUrlTemplate(){return _getUrlTemplate.apply(this,arguments)}return getUrlTemplate}()},{key:"getUrlTemplateForVector",value:function(){var _getUrlTemplateForVector=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(sourceId){var tileJson,directUrl;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this._getVectorStyleJsonInlined();case 2:tileJson=_context6.sent;if(!(!tileJson.sources[sourceId]||!tileJson.sources[sourceId].tiles)){_context6.next=5;break}return _context6.abrupt("return",null);case 5:directUrl=this._proxyPath+tileJson.sources[sourceId].tiles[0];return _context6.abrupt("return",this._emsClient.extendUrlWithParams(directUrl));case 7:case"end":return _context6.stop()}}},_callee6,this)}));function getUrlTemplateForVector(_x){return _getUrlTemplateForVector.apply(this,arguments)}return getUrlTemplateForVector}()},{key:"getVectorStyleSheet",value:function(){var _getVectorStyleSheet=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this._getVectorStyleJsonInlined();case 2:return _context7.abrupt("return",_context7.sent);case 3:case"end":return _context7.stop()}}},_callee7,this)}));function getVectorStyleSheet(){return _getVectorStyleSheet.apply(this,arguments)}return getVectorStyleSheet}()},{key:"getVectorStyleSheetRaw",value:function(){var _getVectorStyleSheetRaw=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this._getVectorStyleJsonRaw();case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop()}}},_callee8,this)}));function getVectorStyleSheetRaw(){return _getVectorStyleSheetRaw.apply(this,arguments)}return getVectorStyleSheetRaw}()},{key:"getSpriteSheetMeta",value:function(){var _getSpriteSheetMeta=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){var isRetina,metaUrl,spritePngs,metaUrlExtended,jsonMeta,_args9=arguments;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:isRetina=_args9.length>0&&_args9[0]!==undefined?_args9[0]:false;_context9.next=3;return this.getSpriteSheetJsonPath(isRetina);case 3:metaUrl=_context9.sent;_context9.next=6;return this.getSpriteSheetPngPath(isRetina);case 6:spritePngs=_context9.sent;metaUrlExtended=this._emsClient.extendUrlWithParams(metaUrl);_context9.next=10;return this._emsClient.getManifest(metaUrlExtended);case 10:jsonMeta=_context9.sent;return _context9.abrupt("return",{png:spritePngs,json:jsonMeta});case 12:case"end":return _context9.stop()}}},_callee9,this)}));function getSpriteSheetMeta(){return _getSpriteSheetMeta.apply(this,arguments)}return getSpriteSheetMeta}()},{key:"_getSpriteSheetRootPath",value:function(){var _getSpriteSheetRootPath2=_asyncToGenerator(regeneratorRuntime.mark(function _callee10(){var vectorStyleJson;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this._getVectorStyleJsonRaw();case 2:vectorStyleJson=_context10.sent;return _context10.abrupt("return",this._proxyPath+vectorStyleJson.sprite);case 4:case"end":return _context10.stop()}}},_callee10,this)}));function _getSpriteSheetRootPath(){return _getSpriteSheetRootPath2.apply(this,arguments)}return _getSpriteSheetRootPath}()},{key:"getSpriteSheetJsonPath",value:function(){var _getSpriteSheetJsonPath=_asyncToGenerator(regeneratorRuntime.mark(function _callee11(){var isRetina,spriteSheetRootPath,suffix,_args11=arguments;return regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:isRetina=_args11.length>0&&_args11[0]!==undefined?_args11[0]:false;_context11.next=3;return this._getSpriteSheetRootPath();case 3:spriteSheetRootPath=_context11.sent;suffix=isRetina?"@2x":"";return _context11.abrupt("return",spriteSheetRootPath+suffix+".json");case 6:case"end":return _context11.stop()}}},_callee11,this)}));function getSpriteSheetJsonPath(){return _getSpriteSheetJsonPath.apply(this,arguments)}return getSpriteSheetJsonPath}()},{key:"getSpriteSheetPngPath",value:function(){var _getSpriteSheetPngPath=_asyncToGenerator(regeneratorRuntime.mark(function _callee12(){var isRetina,spriteSheetRootPath,suffix,_args12=arguments;return regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:isRetina=_args12.length>0&&_args12[0]!==undefined?_args12[0]:false;_context12.next=3;return this._getSpriteSheetRootPath();case 3:spriteSheetRootPath=_context12.sent;suffix=isRetina?"@2x":"";return _context12.abrupt("return",spriteSheetRootPath+suffix+".png");case 6:case"end":return _context12.stop()}}},_callee12,this)}));function getSpriteSheetPngPath(){return _getSpriteSheetPngPath.apply(this,arguments)}return getSpriteSheetPngPath}()},{key:"getDisplayName",value:function getDisplayName(){return this._emsClient.getValueInLanguage(this._config.name)}},{key:"getAttributions",value:function getAttributions(){var _this2=this;return this._config.attribution.map(function(attribution){var url=_this2._emsClient.getValueInLanguage(attribution.url);var label=_this2._emsClient.getValueInLanguage(attribution.label);return{url:url,label:label}})}},{key:"getHTMLAttribution",value:function getHTMLAttribution(){var _this3=this;var attributions=this._config.attribution.map(function(attribution){var url=_this3._emsClient.getValueInLanguage(attribution.url);var label=_this3._emsClient.getValueInLanguage(attribution.label);var html=url?'<a rel="noreferrer noopener" href="'.concat(url,'">').concat(label,"</a>"):label;return _this3._emsClient.sanitizeHtml("".concat(html))});return"<p>".concat(attributions.join(" | "),"</p>");//!!!this is the current convention used in Kibana
}},{key:"getMarkdownAttribution",value:function getMarkdownAttribution(){var _this4=this;var attributions=this._config.attribution.map(function(attribution){var url=_this4._emsClient.getValueInLanguage(attribution.url);var label=_this4._emsClient.getValueInLanguage(attribution.label);return"[".concat(label,"](").concat(url,")")});return attributions.join("|")}},{key:"getMinZoom",value:function(){var _getMinZoom=_asyncToGenerator(regeneratorRuntime.mark(function _callee13(){var tileJson;return regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return this._getRasterStyleJson();case 2:tileJson=_context13.sent;return _context13.abrupt("return",tileJson.minzoom);case 4:case"end":return _context13.stop()}}},_callee13,this)}));function getMinZoom(){return _getMinZoom.apply(this,arguments)}return getMinZoom}()},{key:"getMaxZoom",value:function(){var _getMaxZoom=_asyncToGenerator(regeneratorRuntime.mark(function _callee14(){var tileJson;return regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return this._getRasterStyleJson();case 2:tileJson=_context14.sent;return _context14.abrupt("return",tileJson.maxzoom);case 4:case"end":return _context14.stop()}}},_callee14,this)}));function getMaxZoom(){return _getMaxZoom.apply(this,arguments)}return getMaxZoom}()},{key:"getId",value:function getId(){return this._config.id}},{key:"hasId",value:function hasId(id){return this._config.id===id}},{key:"getOrigin",value:function getOrigin(){return _origin.ORIGIN.EMS}}]);return TMSService}();exports.TMSService=TMSService},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.FileLayer=void 0;var _origin=__webpack_require__(87);var _url=_interopRequireDefault(__webpack_require__(38));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FileLayer=function(){function FileLayer(config,emsClient,proxyPath){_classCallCheck(this,FileLayer);this._config=config;this._emsClient=emsClient;this._proxyPath=proxyPath}_createClass(FileLayer,[{key:"getAttributions",value:function getAttributions(){var _this=this;return this._config.attribution.map(function(attribution){var url=_this._emsClient.getValueInLanguage(attribution.url);var label=_this._emsClient.getValueInLanguage(attribution.label);return{url:url,label:label}})}},{key:"getHTMLAttribution",value:function getHTMLAttribution(){var _this2=this;var attributions=this._config.attribution.map(function(attribution){var url=_this2._emsClient.getValueInLanguage(attribution.url);var label=_this2._emsClient.getValueInLanguage(attribution.label);var html=url?"<a href=".concat(url,">").concat(label,"</a>"):label;return _this2._emsClient.sanitizeHtml(html)});return attributions.join(" | ");//!!!this is the current convention used in Kibana
}},{key:"getFieldsInLanguage",value:function getFieldsInLanguage(){var _this3=this;return this._config.fields.map(function(field){return{type:field.type,name:field.id,description:_this3._emsClient.getValueInLanguage(field.label)}})}},{key:"getDisplayName",value:function getDisplayName(){var layerName=this._emsClient.getValueInLanguage(this._config.layer_name);return layerName?layerName:""}},{key:"getId",value:function getId(){return this._config.layer_id}},{key:"hasId",value:function hasId(id){var matchesLegacyId=this._config.legacy_ids.indexOf(id)>=0;return this._config.layer_id===id||matchesLegacyId}},{key:"_getDefaultFormat",value:function _getDefaultFormat(){var defaultFormat=this._config.formats.find(function(format){return format.legacy_default});if(defaultFormat){return defaultFormat}return this._config.formats[0]}},{key:"getEMSHotLink",value:function getEMSHotLink(){var landingPageString=this._emsClient.getLandingPageUrl();var urlObject=_url.default.parse(landingPageString);urlObject.hash="file/".concat(this.getId());urlObject.query=_objectSpread({},urlObject.query,{locale:this._emsClient.getLocale()});return _url.default.format(urlObject)}},{key:"getDefaultFormatType",value:function getDefaultFormatType(){var format=this._getDefaultFormat();return format.type}},{key:"getDefaultFormatMeta",value:function getDefaultFormatMeta(){var format=this._getDefaultFormat();return format.meta}},{key:"getDefaultFormatUrl",value:function getDefaultFormatUrl(){var format=this._getDefaultFormat();var url=this._emsClient.extendUrlWithParams(format.url);return this._proxyPath+url}},{key:"getCreatedAt",value:function getCreatedAt(){return this._config.created_at}},{key:"getOrigin",value:function getOrigin(){return _origin.ORIGIN.EMS}}]);return FileLayer}();exports.FileLayer=FileLayer},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1876)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;var _plugin=__webpack_require__(1470);function plugin(initializerContext){return new _plugin.RegionMapPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RegionMapPlugin=void 0;var _region_map_fn=__webpack_require__(1471);var _region_map_type=__webpack_require__(1472);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RegionMapPlugin=function(){function RegionMapPlugin(initializerContext){_classCallCheck(this,RegionMapPlugin);_defineProperty(this,"initializerContext",void 0);this.initializerContext=initializerContext}_createClass(RegionMapPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(core,_ref){var data,visualizations,__LEGACY,visualizationDependencies;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_ref.data,visualizations=_ref.visualizations,__LEGACY=_ref.__LEGACY;_context.t0=_objectSpread;_context.t1={uiSettings:core.uiSettings};_context.next=5;return __LEGACY.setup();case 5:_context.t2=_context.sent;visualizationDependencies=(0,_context.t0)(_context.t1,_context.t2);data.expressions.registerFunction(_region_map_fn.createRegionMapFn);visualizations.types.VisTypesRegistryProvider.register(function(){return(0,_region_map_type.createRegionMapTypeDefinition)(visualizationDependencies)});case 9:case"end":return _context.stop()}}},_callee)}));function setup(_x,_x2){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){}}]);return RegionMapPlugin}();exports.RegionMapPlugin=RegionMapPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createRegionMapFn=void 0;var _i18n=__webpack_require__(2);var createRegionMapFn=function createRegionMapFn(){return{name:"regionmap",type:"render",context:{types:["kibana_datatable"]},help:_i18n.i18n.translate("regionMap.function.help",{defaultMessage:"Regionmap visualization"}),args:{visConfig:{types:["string","null"],default:'"{}"'}},fn:function fn(context,args){var visConfig=JSON.parse(args.visConfig);return{type:"render",as:"visualization",value:{visData:context,visType:"region_map",visConfig:visConfig,params:{listenOnChange:true}}}}}};exports.createRegionMapFn=createRegionMapFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createRegionMapTypeDefinition=createRegionMapTypeDefinition;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _schemas=__webpack_require__(33);var _truncated_colormaps=__webpack_require__(125);var _util=__webpack_require__(660);var _region_map_visualization=__webpack_require__(1473);var _update_status=__webpack_require__(83);var _region_map_options=__webpack_require__(1480);var _public=__webpack_require__(30);var _origin=__webpack_require__(87);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function createRegionMapTypeDefinition(dependencies){var uiSettings=dependencies.uiSettings,regionmapsConfig=dependencies.regionmapsConfig,serviceSettings=dependencies.serviceSettings;var visualization=(0,_region_map_visualization.createRegionMapVisualization)(dependencies);var vectorLayers=regionmapsConfig.layers.map(_util.mapToLayerWithId.bind(null,_origin.ORIGIN.KIBANA_YML));var selectedLayer=vectorLayers[0];var selectedJoinField=selectedLayer?selectedLayer.fields[0]:null;return _public.visFactory.createBaseVisualization({name:"region_map",title:_i18n.i18n.translate("regionMap.mapVis.regionMapTitle",{defaultMessage:"Region Map"}),description:_i18n.i18n.translate("regionMap.mapVis.regionMapDescription",{defaultMessage:"Show metrics on a thematic map. Use one of the provided base maps, or add your own. Darker colors represent higher values."}),icon:"visMapRegion",visConfig:{defaults:{legendPosition:"bottomright",addTooltip:true,colorSchema:"Yellow to Red",emsHotLink:"",selectedLayer:selectedLayer,selectedJoinField:selectedJoinField,isDisplayWarning:true,wms:uiSettings.get("visualization:tileMap:WMSdefaults"),mapZoom:2,mapCenter:[0,0],outlineWeight:1,showAllShapes:true}},requiresUpdateStatus:[_update_status.Status.AGGS,_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.DATA,_update_status.Status.UI_STATE],visualization:visualization,editorConfig:{optionsTemplate:function optionsTemplate(props){return _react.default.createElement(_region_map_options.RegionMapOptions,_extends({},props,{serviceSettings:serviceSettings,includeElasticMapsService:regionmapsConfig.includeElasticMapsService}))},collections:{colorSchemas:_truncated_colormaps.colorSchemas,vectorLayers:vectorLayers,tmsLayers:[]},schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("regionMap.mapVis.regionMapEditorConfig.schemas.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits","sum_bucket","min_bucket","max_bucket","avg_bucket"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("regionMap.mapVis.regionMapEditorConfig.schemas.segmentTitle",{defaultMessage:"Shape field"}),min:1,max:1,aggFilter:["terms"]}])}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createRegionMapVisualization=createRegionMapVisualization;var _i18n=__webpack_require__(2);var _choropleth_layer=_interopRequireDefault(__webpack_require__(1474));var _truncated_colormaps=__webpack_require__(125);var _utilities=__webpack_require__(41);var _notify=__webpack_require__(9);var _tooltip_formatter=__webpack_require__(1476);var _base_maps_visualization=__webpack_require__(662);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function createRegionMapVisualization(_ref){var serviceSettings=_ref.serviceSettings,$injector=_ref.$injector,uiSettings=_ref.uiSettings;var BaseMapsVisualization=new _base_maps_visualization.BaseMapsVisualizationProvider(serviceSettings);var tooltipFormatter=new _tooltip_formatter.TileMapTooltipFormatter($injector);return function(_BaseMapsVisualizatio){_inherits(RegionMapsVisualization,_BaseMapsVisualizatio);function RegionMapsVisualization(container,vis){var _this;_classCallCheck(this,RegionMapsVisualization);_this=_possibleConstructorReturn(this,_getPrototypeOf(RegionMapsVisualization).call(this,container,vis));_this._vis=_this.vis;_this._choroplethLayer=null;return _this}_createClass(RegionMapsVisualization,[{key:"render",value:function(){var _render=_asyncToGenerator(regeneratorRuntime.mark(function _callee(esResponse,visParams,status){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _get(_getPrototypeOf(RegionMapsVisualization.prototype),"render",this).call(this,esResponse,visParams,status);case 2:if(!this._choroplethLayer){_context.next=5;break}_context.next=5;return this._choroplethLayer.whenDataLoaded();case 5:case"end":return _context.stop()}}},_callee,this)}));function render(_x,_x2,_x3){return _render.apply(this,arguments)}return render}()},{key:"_updateData",value:function(){var _updateData2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(table){var termColumn,valueColumn,results,metricFieldFormatter;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this._chartData=table;termColumn=this._params.bucket?table.columns[this._params.bucket.accessor]:null;valueColumn=table.columns[this._params.metric.accessor];if(!this._hasColumns()||!table.rows.length){results=[]}else{results=table.rows.map(function(row){var term=row[termColumn.id];var value=row[valueColumn.id];return{term:term,value:value}})}if(!this._params.selectedJoinField&&this._params.selectedLayer){this._params.selectedJoinField=this._params.selectedLayer.fields[0]}if(this._params.selectedLayer){_context2.next=7;break}return _context2.abrupt("return");case 7:this._updateChoroplethLayerForNewMetrics(this._params.selectedLayer.name,this._params.selectedLayer.attribution,this._params.showAllShapes,results);metricFieldFormatter=(0,_utilities.getFormat)(this._params.metric.format);this._choroplethLayer.setMetrics(results,metricFieldFormatter,valueColumn.name);if(termColumn&&valueColumn){this._choroplethLayer.setTooltipFormatter(tooltipFormatter,metricFieldFormatter,termColumn.name,valueColumn.name)}this._kibanaMap.useUiStateFromVisualization(this._vis);case 12:case"end":return _context2.stop()}}},_callee2,this)}));function _updateData(_x4){return _updateData2.apply(this,arguments)}return _updateData}()},{key:"_updateParams",value:function(){var _updateParams2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var visParams,metricFieldFormatter;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _get(_getPrototypeOf(RegionMapsVisualization.prototype),"_updateParams",this).call(this);case 2:visParams=this._params;if(!visParams.selectedJoinField&&visParams.selectedLayer){visParams.selectedJoinField=visParams.selectedLayer.fields[0]}if(!(!visParams.selectedJoinField||!visParams.selectedLayer)){_context3.next=6;break}return _context3.abrupt("return");case 6:this._updateChoroplethLayerForNewProperties(visParams.selectedLayer.name,visParams.selectedLayer.attribution,this._params.showAllShapes);metricFieldFormatter=(0,_utilities.getFormat)(this._params.metric.format);this._choroplethLayer.setJoinField(visParams.selectedJoinField.name);this._choroplethLayer.setColorRamp(_truncated_colormaps.truncatedColorMaps[visParams.colorSchema].value);this._choroplethLayer.setLineWeight(visParams.outlineWeight);this._choroplethLayer.setTooltipFormatter(tooltipFormatter,metricFieldFormatter,this._metricLabel);case 12:case"end":return _context3.stop()}}},_callee3,this)}));function _updateParams(){return _updateParams2.apply(this,arguments)}return _updateParams}()},{key:"_updateChoroplethLayerForNewMetrics",value:function _updateChoroplethLayerForNewMetrics(name,attribution,showAllData,newMetrics){if(this._choroplethLayer&&this._choroplethLayer.canReuseInstanceForNewMetrics(name,showAllData,newMetrics)){return}return this._recreateChoroplethLayer(name,attribution,showAllData)}},{key:"_updateChoroplethLayerForNewProperties",value:function _updateChoroplethLayerForNewProperties(name,attribution,showAllData){if(this._choroplethLayer&&this._choroplethLayer.canReuseInstance(name,showAllData)){return}return this._recreateChoroplethLayer(name,attribution,showAllData)}},{key:"_recreateChoroplethLayer",value:function _recreateChoroplethLayer(name,attribution,showAllData){var _this2=this;this._kibanaMap.removeLayer(this._choroplethLayer);if(this._choroplethLayer){this._choroplethLayer=this._choroplethLayer.cloneChoroplethLayerForNewData(name,attribution,this._params.selectedLayer.format,showAllData,this._params.selectedLayer.meta,this._params.selectedLayer,serviceSettings)}else{this._choroplethLayer=new _choropleth_layer.default(name,attribution,this._params.selectedLayer.format,showAllData,this._params.selectedLayer.meta,this._params.selectedLayer,serviceSettings)}this._choroplethLayer.on("select",function(event){var rowIndex=_this2._chartData.rows.findIndex(function(row){return row[0]===event});_this2._vis.API.events.filter({table:_this2._chartData,column:0,row:rowIndex,value:event})});this._choroplethLayer.on("styleChanged",function(event){var shouldShowWarning=_this2._params.isDisplayWarning&&uiSettings.get("visualization:regionmap:showWarnings");if(event.mismatches.length>0&&shouldShowWarning){_notify.toastNotifications.addWarning({title:_i18n.i18n.translate("regionMap.visualization.unableToShowMismatchesWarningTitle",{defaultMessage:"Unable to show {mismatchesLength} {oneMismatch, plural, one {result} other {results}} on map",values:{mismatchesLength:event.mismatches.length,oneMismatch:event.mismatches.length>1?0:1}}),text:_i18n.i18n.translate("regionMap.visualization.unableToShowMismatchesWarningText",{defaultMessage:"Ensure that each of these term matches a shape on that shape's join field: {mismatches}",values:{mismatches:event.mismatches?event.mismatches.join(", "):""}})})}});this._kibanaMap.addLayer(this._choroplethLayer)}},{key:"_hasColumns",value:function _hasColumns(){return this._chartData&&this._chartData.columns.length===2}}]);return RegionMapsVisualization}(BaseMapsVisualization)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _jquery=_interopRequireDefault(__webpack_require__(12));var _leaflet=_interopRequireDefault(__webpack_require__(66));var _lodash=_interopRequireDefault(__webpack_require__(1));var _d=_interopRequireDefault(__webpack_require__(15));var _i18n=__webpack_require__(2);var _kibana_map_layer=__webpack_require__(436);var _truncated_colormaps=__webpack_require__(125);var topojson=_interopRequireWildcard(__webpack_require__(1559));var _notify=__webpack_require__(9);var colorUtil=_interopRequireWildcard(__webpack_require__(661));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var EMPTY_STYLE={weight:1,opacity:.6,color:"rgb(200,200,200)",fillOpacity:0};var ChoroplethLayer=function(_KibanaMapLayer){_inherits(ChoroplethLayer,_KibanaMapLayer);_createClass(ChoroplethLayer,null,[{key:"_doInnerJoin",value:function _doInnerJoin(sortedMetrics,sortedGeojsonFeatures,joinField){var j=0;for(var i=0;i<sortedGeojsonFeatures.length;i++){var property=sortedGeojsonFeatures[i].properties[joinField];sortedGeojsonFeatures[i].__kbnJoinedMetric=null;var position=sortedMetrics.length?compareLexicographically(property,sortedMetrics[j].term):-1;if(position===-1){}else if(position===0){sortedGeojsonFeatures[i].__kbnJoinedMetric=sortedMetrics[j]}else if(position===1){while(j<sortedMetrics.length){var newTerm=sortedMetrics[j].term;var newPosition=compareLexicographically(newTerm,property);if(newPosition===-1){}else if(newPosition===0){sortedGeojsonFeatures[i].__kbnJoinedMetric=sortedMetrics[j];break}else if(newPosition===1){break}if(j===sortedMetrics.length-1){break}else{j++}}}}}}]);function ChoroplethLayer(name,attribution,format,showAllShapes,meta,layerConfig,serviceSettings){var _this;_classCallCheck(this,ChoroplethLayer);_this=_possibleConstructorReturn(this,_getPrototypeOf(ChoroplethLayer).call(this));_this._serviceSettings=serviceSettings;_this._metrics=null;_this._joinField=null;_this._colorRamp=_truncated_colormaps.truncatedColorMaps[Object.keys(_truncated_colormaps.truncatedColorMaps)[0]].value;_this._lineWeight=1;_this._tooltipFormatter=function(){return""};_this._attribution=attribution;_this._boundsOfData=null;_this._showAllShapes=showAllShapes;_this._layerName=name;_this._layerConfig=layerConfig;_this._leafletLayer=_leaflet.default.geoJson(null,{onEachFeature:function onEachFeature(feature,layer){layer.on("click",function(){_this.emit("select",feature.properties[_this._joinField])});var location=null;layer.on({mouseover:function mouseover(){var tooltipContents=_this._tooltipFormatter(feature);if(!location){var leafletGeojson=_leaflet.default.geoJson(feature);location=leafletGeojson.getBounds().getCenter()}_this.emit("showTooltip",{content:tooltipContents,position:location})},mouseout:function mouseout(){_this.emit("hideTooltip")}})},style:_this._makeEmptyStyleFunction()});_this._loaded=false;_this._error=false;_this._isJoinValid=false;_this._whenDataLoaded=new Promise(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(resolve){var data,featureCollection,formatType,features,errorMessage;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _this._makeJsonAjaxCall();case 3:data=_context.sent;if(typeof format==="string"){formatType=format}else if(format&&format.type){formatType=format.type}else{formatType="geojson"}if(!(formatType==="geojson")){_context.next=9;break}featureCollection=data;_context.next=15;break;case 9:if(!(formatType==="topojson")){_context.next=14;break}features=_lodash.default.get(data,"objects."+meta.feature_collection_path);featureCollection=topojson.feature(data,features);_context.next=15;break;case 14:throw new Error(_i18n.i18n.translate("regionMap.choroplethLayer.unrecognizedFormatErrorMessage",{defaultMessage:"Unrecognized format {formatType}",values:{formatType:formatType}}));case 15:_this._sortedFeatures=featureCollection.features.slice();_this._sortFeatures();if(showAllShapes){_this._leafletLayer.addData(featureCollection)}else{}_this._loaded=true;_this._setStyle();resolve();_context.next=30;break;case 23:_context.prev=23;_context.t0=_context["catch"](0);_this._loaded=true;_this._error=true;if(_context.t0.status===404){errorMessage=_i18n.i18n.translate("regionMap.choroplethLayer.downloadingVectorData404ErrorMessage",{defaultMessage:"Server responding with '404' when attempting to fetch {name}. Make sure the file exists at that location.",values:{name:name}})}else{errorMessage=_i18n.i18n.translate("regionMap.choroplethLayer.downloadingVectorDataErrorMessage",{defaultMessage:"Cannot download {name} file. Please ensure the CORS configuration of the server permits requests from the Kibana application on this host.",values:{name:name}})}_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("regionMap.choroplethLayer.downloadingVectorDataErrorMessageTitle",{defaultMessage:"Error downloading vector data"}),text:errorMessage});resolve();case 30:case"end":return _context.stop()}}},_callee,null,[[0,23]])}));return function(_x){return _ref.apply(this,arguments)}}());return _this}_createClass(ChoroplethLayer,[{key:"_makeJsonAjaxCall",value:function(){var _makeJsonAjaxCall2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",this._serviceSettings.getJsonForRegionLayer(this._layerConfig));case 1:case"end":return _context2.stop()}}},_callee2,this)}));function _makeJsonAjaxCall(){return _makeJsonAjaxCall2.apply(this,arguments)}return _makeJsonAjaxCall}()},{key:"_invalidateJoin",value:function _invalidateJoin(){this._isJoinValid=false}},{key:"_doInnerJoin",value:function _doInnerJoin(){ChoroplethLayer._doInnerJoin(this._metrics,this._sortedFeatures,this._joinField);this._isJoinValid=true}},{key:"_setStyle",value:function _setStyle(){if(this._error||!this._loaded||!this._metrics||!this._joinField){return}if(!this._isJoinValid){this._doInnerJoin();if(!this._showAllShapes){var featureCollection={type:"FeatureCollection",features:this._sortedFeatures.filter(function(feature){return feature.__kbnJoinedMetric})};this._leafletLayer.addData(featureCollection)}}var styler=this._makeChoroplethStyler();this._leafletLayer.setStyle(styler.leafletStyleFunction);if(this._metrics&&this._metrics.length>0){var _getMinMax=getMinMax(this._metrics),min=_getMinMax.min,max=_getMinMax.max;this._legendColors=colorUtil.getLegendColors(this._colorRamp);var quantizeDomain=min!==max?[min,max]:_d.default.scale.quantize().domain();this._legendQuantizer=_d.default.scale.quantize().domain(quantizeDomain).range(this._legendColors)}this._boundsOfData=styler.getLeafletBounds();this.emit("styleChanged",{mismatches:styler.getMismatches()})}},{key:"getUrl",value:function getUrl(){return this._layerName}},{key:"setTooltipFormatter",value:function setTooltipFormatter(tooltipFormatter,fieldFormatter,fieldName,metricLabel){var _this2=this;this._tooltipFormatter=function(geojsonFeature){if(!_this2._metrics){return""}var match=_this2._metrics.find(function(bucket){return compareLexicographically(bucket.term,geojsonFeature.properties[_this2._joinField])===0});return tooltipFormatter(match,fieldFormatter,fieldName,metricLabel)}}},{key:"setJoinField",value:function setJoinField(joinfield){if(joinfield===this._joinField){return}this._joinField=joinfield;this._sortFeatures();this._setStyle()}},{key:"cloneChoroplethLayerForNewData",value:function cloneChoroplethLayerForNewData(name,attribution,format,showAllData,meta,layerConfig,serviceSettings){var clonedLayer=new ChoroplethLayer(name,attribution,format,showAllData,meta,layerConfig,serviceSettings);clonedLayer.setJoinField(this._joinField);clonedLayer.setColorRamp(this._colorRamp);clonedLayer.setLineWeight(this._lineWeight);clonedLayer.setTooltipFormatter(this._tooltipFormatter);if(this._metrics){clonedLayer.setMetrics(this._metrics,this._valueFormatter,this._metricTitle)}return clonedLayer}},{key:"_sortFeatures",value:function _sortFeatures(){var _this3=this;if(this._sortedFeatures&&this._joinField){this._sortedFeatures.sort(function(a,b){var termA=a.properties[_this3._joinField];var termB=b.properties[_this3._joinField];return compareLexicographically(termA,termB)});this._invalidateJoin()}}},{key:"whenDataLoaded",value:function whenDataLoaded(){return this._whenDataLoaded}},{key:"setMetrics",value:function setMetrics(metrics,fieldFormatter,metricTitle){this._metrics=metrics.slice();this._valueFormatter=fieldFormatter;this._metricTitle=metricTitle;this._metrics.sort(function(a,b){return compareLexicographically(a.term,b.term)});this._invalidateJoin();this._setStyle()}},{key:"setColorRamp",value:function setColorRamp(colorRamp){if(_lodash.default.isEqual(colorRamp,this._colorRamp)){return}this._colorRamp=colorRamp;this._setStyle()}},{key:"setLineWeight",value:function setLineWeight(lineWeight){if(this._lineWeight===lineWeight){return}this._lineWeight=lineWeight;this._setStyle()}},{key:"canReuseInstance",value:function canReuseInstance(name,showAllShapes){return this._layerName===name&&this._showAllShapes===showAllShapes}},{key:"canReuseInstanceForNewMetrics",value:function canReuseInstanceForNewMetrics(name,showAllShapes,newMetrics){if(this._layerName!==name){return false}if(showAllShapes){return this._showAllShapes===showAllShapes}if(!this._metrics){return}var currentKeys=Object.keys(this._metrics);var newKeys=Object.keys(newMetrics);return _lodash.default.isEqual(currentKeys,newKeys)}},{key:"getBounds",value:function getBounds(){var bounds=_get(_getPrototypeOf(ChoroplethLayer.prototype),"getBounds",this).call(this);return this._boundsOfData?this._boundsOfData:bounds}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){var _this4=this;if(!this._legendColors||!this._legendQuantizer){return}var titleText=this._metricTitle;var $title=(0,_jquery.default)("<div>").addClass("visMapLegend__title").text(titleText);jqueryDiv.append($title);this._legendColors.forEach(function(color){var labelText=_this4._legendQuantizer.invertExtent(color).map(function(val){return _this4._valueFormatter.convert(val)}).join(" – ");var label=(0,_jquery.default)("<div>");var icon=(0,_jquery.default)("<i>").css({background:color,"border-color":makeColorDarker(color)});var text=(0,_jquery.default)("<span>").text(labelText);label.append(icon);label.append(text);jqueryDiv.append(label)})}},{key:"_makeEmptyStyleFunction",value:function _makeEmptyStyleFunction(){var emptyStyle=_lodash.default.assign({},EMPTY_STYLE,{weight:this._lineWeight});return function(){return emptyStyle}}},{key:"_makeChoroplethStyler",value:function _makeChoroplethStyler(){var _this5=this;var emptyStyle=this._makeEmptyStyleFunction();if(this._metrics.length===0){return{leafletStyleFunction:function leafletStyleFunction(){return emptyStyle()},getMismatches:function getMismatches(){return[]},getLeafletBounds:function getLeafletBounds(){return null}}}var _getMinMax2=getMinMax(this._metrics),min=_getMinMax2.min,max=_getMinMax2.max;var boundsOfAllFeatures=new _leaflet.default.LatLngBounds;return{leafletStyleFunction:function leafletStyleFunction(geojsonFeature){var match=geojsonFeature.__kbnJoinedMetric;if(!match){return emptyStyle()}var boundsOfFeature=_leaflet.default.geoJson(geojsonFeature).getBounds();boundsOfAllFeatures.extend(boundsOfFeature);return{fillColor:getChoroplethColor(match.value,min,max,_this5._colorRamp),weight:_this5._lineWeight,opacity:1,color:"white",fillOpacity:.7}},getMismatches:function getMismatches(){var mismatches=_this5._metrics.slice();_this5._sortedFeatures.forEach(function(feature){var index=mismatches.indexOf(feature.__kbnJoinedMetric);if(index>=0){mismatches.splice(index,1)}});return mismatches.map(function(b){return b.term})},getLeafletBounds:function getLeafletBounds(){return boundsOfAllFeatures.isValid()?boundsOfAllFeatures:null}}}}]);return ChoroplethLayer}(_kibana_map_layer.KibanaMapLayer);exports.default=ChoroplethLayer;function compareLexicographically(termA,termB){termA=typeof termA==="string"?termA:termA.toString();termB=typeof termB==="string"?termB:termB.toString();return termA.localeCompare(termB)}function makeColorDarker(color){var amount=1.3;return _d.default.hcl(color).darker(amount).toString()}function getMinMax(data){var min=data[0].value;var max=data[0].value;for(var i=1;i<data.length;i+=1){min=Math.min(data[i].value,min);max=Math.max(data[i].value,max)}return{min:min,max:max}}function getChoroplethColor(value,min,max,colorRamp){if(min===max){return colorUtil.getColor(colorRamp,colorRamp.length-1)}var fraction=(value-min)/(max-min);var index=Math.round(colorRamp.length*fraction)-1;var i=Math.max(Math.min(colorRamp.length-1,index),0);return colorUtil.getColor(colorRamp,i)}module.exports=exports.default},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2119)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TileMapTooltipFormatter=void 0;var _jquery=_interopRequireDefault(__webpack_require__(12));var _tooltip=_interopRequireDefault(__webpack_require__(1477));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TileMapTooltipFormatter=function TileMapTooltipFormatter($injector){var $rootScope=$injector.get("$rootScope");var $compile=$injector.get("$compile");var $tooltipScope=$rootScope.$new();var $el=(0,_jquery.default)("<div>").html(_tooltip.default);$compile($el)($tooltipScope);return function tooltipFormatter(metric,fieldFormatter,fieldName,metricName){if(!metric){return""}$tooltipScope.details=[];if(fieldName&&metric){$tooltipScope.details.push({label:fieldName,value:metric.term})}if(metric){$tooltipScope.details.push({label:metricName,value:fieldFormatter?fieldFormatter.convert(metric.value,"text"):metric.value})}$tooltipScope.$apply();return $el.html()}};exports.TileMapTooltipFormatter=TileMapTooltipFormatter},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<table>\n  <tbody>\n    <tr ng-repeat="detail in details" >\n      <td class="visTooltip__label"><b>{{detail.label}}</b></td>\n      <td class="visTooltip__value">{{detail.value}}</td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createZoomWarningMsg=void 0;var _notify=__webpack_require__(9);var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var createZoomWarningMsg=function(){var disableZoomMsg=false;var setZoomMsg=function setZoomMsg(boolDisableMsg){return disableZoomMsg=boolDisableMsg};var ZoomWarning=function(_React$Component){_inherits(ZoomWarning,_React$Component);function ZoomWarning(props){var _this;_classCallCheck(this,ZoomWarning);_this=_possibleConstructorReturn(this,_getPrototypeOf(ZoomWarning).call(this,props));_this.state={disabled:false};return _this}_createClass(ZoomWarning,[{key:"render",value:function render(){var _this2=this;return _react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.vis.kibanaMap.zoomWarning",defaultMessage:"You've reached the maximum number of zoom levels. To zoom all the way in, upgrade to the {defaultDistribution} of Elasticsearch and Kibana. You'll get access to additional zoom levels for free through the {ems}. Or, you can configure your own map server. Please go to { wms } or { configSettings} for more information.",values:{defaultDistribution:_react.default.createElement("a",{target:"_blank",href:"https://www.elastic.co/downloads/kibana"},"default distribution "),ems:_react.default.createElement("a",{target:"_blank",href:"https://www.elastic.co/elastic-maps-service"},"Elastic Maps Service"),wms:_react.default.createElement("a",{target:"_blank",href:"https://www.elastic.co/guide/en/kibana/current/tilemap.html"},"Custom WMS Configuration"),configSettings:_react.default.createElement("a",{target:"_blank",href:"https://www.elastic.co/guide/en/kibana/current/settings.html"},"Custom TMS Using Config Settings")}})),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",flush:"left",isDisabled:this.state.disabled,onClick:function onClick(){_this2.setState({disabled:true},function(){return _this2.props.onChange(_this2.state.disabled)})},"data-test-subj":"suppressZoomWarnings"},"Don't show again"))}}]);return ZoomWarning}(_react.default.Component);var zoomToast={title:"No additional zoom levels",text:_react.default.createElement(ZoomWarning,{onChange:setZoomMsg}),"data-test-subj":"maxZoomWarning"};return function(getZoomLevel,getMaxZoomLevel){return function(){var zoomLevel=getZoomLevel();var maxMapZoom=getMaxZoomLevel();if(!disableZoomMsg&&zoomLevel===maxMapZoom){_notify.toastNotifications.addDanger(zoomToast)}}}}();exports.createZoomWarningMsg=createZoomWarningMsg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.zoomToPrecision=zoomToPrecision;var _decode_geo_hash=__webpack_require__(421);var maxPrecision=12;var zoomPrecisionMap={};var minGeohashPixels=16;function calculateZoomToPrecisionMap(maxZoom){for(var zoom=0;zoom<=maxZoom;zoom+=1){if(typeof zoomPrecisionMap[zoom]==="number"){continue}var worldPixels=256*Math.pow(2,zoom);zoomPrecisionMap[zoom]=1;for(var precision=2;precision<=maxPrecision;precision+=1){var columns=(0,_decode_geo_hash.geohashColumns)(precision);if(worldPixels/columns>=minGeohashPixels){zoomPrecisionMap[zoom]=precision}else{break}}}}function zoomToPrecision(mapZoom,maxPrecision,maxZoom){calculateZoomToPrecisionMap(typeof maxZoom==="number"?maxZoom:21);return Math.min(zoomPrecisionMap[mapZoom],maxPrecision)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RegionMapOptions=RegionMapOptions;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);var _notify=__webpack_require__(9);var _components=__webpack_require__(108);var _origin=__webpack_require__(87);var _wms_options=__webpack_require__(666);var _util=__webpack_require__(660);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var mapLayerForOption=function mapLayerForOption(_ref){var layerId=_ref.layerId,name=_ref.name;return{text:name,value:layerId}};var mapFieldForOption=function mapFieldForOption(_ref2){var description=_ref2.description,name=_ref2.name;return{text:description,value:name}};function RegionMapOptions(props){var includeElasticMapsService=props.includeElasticMapsService,serviceSettings=props.serviceSettings,stateParams=props.stateParams,vis=props.vis,setValue=props.setValue;var _useState=(0,_react.useState)(vis.type.editorConfig.collections.vectorLayers),_useState2=_slicedToArray(_useState,2),vectorLayers=_useState2[0],setVectorLayers=_useState2[1];var _useState3=(0,_react.useState)(vectorLayers.map(mapLayerForOption)),_useState4=_slicedToArray(_useState3,2),vectorLayerOptions=_useState4[0],setVectorLayerOptions=_useState4[1];var currentLayerId=stateParams.selectedLayer&&stateParams.selectedLayer.layerId;var fieldOptions=(0,_react.useMemo)(function(){return(stateParams.selectedLayer&&stateParams.selectedLayer.fields||[]).map(mapFieldForOption)},[currentLayerId]);var setEmsHotLink=(0,_react.useCallback)(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(layer){var emsHotLink;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return serviceSettings.getEMSHotLink(layer);case 2:emsHotLink=_context.sent;setValue("emsHotLink",emsHotLink);case 4:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref3.apply(this,arguments)}}(),[setValue]);var setLayer=(0,_react.useCallback)(function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(paramName,value){var newLayer;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newLayer=vectorLayers.find(function(_ref5){var layerId=_ref5.layerId;return layerId===value});if(newLayer){setValue(paramName,newLayer);setValue("selectedJoinField",newLayer.fields[0]);setEmsHotLink(newLayer)}case 2:case"end":return _context2.stop()}}},_callee2)}));return function(_x2,_x3){return _ref4.apply(this,arguments)}}(),[vectorLayers,setValue]);var setField=(0,_react.useCallback)(function(paramName,value){if(stateParams.selectedLayer){setValue(paramName,stateParams.selectedLayer.fields.find(function(f){return f.name===value}))}},[currentLayerId,setValue]);(0,_react.useEffect)(function(){function setDefaultValues(){return _setDefaultValues.apply(this,arguments)}function _setDefaultValues(){_setDefaultValues=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var layers,newLayers,newVectorLayers,_newVectorLayers,newLayer;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return serviceSettings.getFileLayers();case 3:layers=_context3.sent;newLayers=layers.map(_util.mapToLayerWithId.bind(null,_origin.ORIGIN.EMS)).filter(function(layer){return!vectorLayers.some(function(vectorLayer){return vectorLayer.layerId===layer.layerId})});newLayers.forEach(function(layer){if(layer.format==="geojson"){layer.format={type:"geojson"}}});newVectorLayers=[].concat(_toConsumableArray(vectorLayers),_toConsumableArray(newLayers));setVectorLayers(newVectorLayers);setVectorLayerOptions(newVectorLayers.map(mapLayerForOption));_newVectorLayers=_slicedToArray(newVectorLayers,1),newLayer=_newVectorLayers[0];if(newLayer&&!stateParams.selectedLayer){setValue("selectedLayer",newLayer);setValue("selectedJoinField",newLayer.fields[0]);if(newLayer.isEMS){setEmsHotLink(newLayer)}}_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3["catch"](0);_notify.toastNotifications.addWarning(_context3.t0.message);case 16:case"end":return _context3.stop()}}},_callee3,null,[[0,13]])}));return _setDefaultValues.apply(this,arguments)}if(includeElasticMapsService){setDefaultValues()}},[]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiPanel,{paddingSize:"s"},_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"regionMap.visParams.layerSettingsTitle",defaultMessage:"Layer settings"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_components.SelectOption,{id:"regionMapOptionsSelectLayer",label:_i18n.i18n.translate("regionMap.visParams.vectorMapLabel",{defaultMessage:"Vector map"}),labelAppend:stateParams.emsHotLink&&_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement(_eui.EuiLink,{href:stateParams.emsHotLink,target:"_blank",title:_i18n.i18n.translate("regionMap.visParams.previewOnEMSLinkTitle",{defaultMessage:"Preview {selectedLayerName} on the Elastic Maps Service",values:{selectedLayerName:stateParams.selectedLayer&&stateParams.selectedLayer.name}})},_react.default.createElement(_react2.FormattedMessage,{id:"regionMap.visParams.previewOnEMSLinkText",defaultMessage:"Preview on EMS"})," ",_react.default.createElement(_eui.EuiIcon,{type:"popout",size:"s"}))),options:vectorLayerOptions,paramName:"selectedLayer",value:stateParams.selectedLayer&&stateParams.selectedLayer.layerId,setValue:setLayer}),_react.default.createElement(_components.SelectOption,{id:"regionMapOptionsSelectJoinField",label:_i18n.i18n.translate("regionMap.visParams.joinFieldLabel",{defaultMessage:"Join field"}),options:fieldOptions,paramName:"selectedJoinField",value:stateParams.selectedJoinField&&stateParams.selectedJoinField.name,setValue:setField}),_react.default.createElement(_components.SwitchOption,{label:_i18n.i18n.translate("regionMap.visParams.displayWarningsLabel",{defaultMessage:"Display warnings"}),tooltip:_i18n.i18n.translate("regionMap.visParams.switchWarningsTipText",{defaultMessage:"Turns on/off warnings. When turned on, warning will be shown for each term that cannot be matched to a shape in the vector layer based on the join field. When turned off, these warnings will be turned off."}),paramName:"isDisplayWarning",value:stateParams.isDisplayWarning,setValue:setValue}),_react.default.createElement(_components.SwitchOption,{label:_i18n.i18n.translate("regionMap.visParams.showAllShapesLabel",{defaultMessage:"Show all shapes"}),tooltip:_i18n.i18n.translate("regionMap.visParams.turnOffShowingAllShapesTipText",{defaultMessage:"Turning this off only shows the shapes that were matched with a corresponding term."}),paramName:"showAllShapes",value:stateParams.showAllShapes,setValue:setValue})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiPanel,{paddingSize:"s"},_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"regionMap.visParams.styleSettingsLabel",defaultMessage:"Style settings"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_components.SelectOption,{label:_i18n.i18n.translate("regionMap.visParams.colorSchemaLabel",{defaultMessage:"Color schema"}),options:vis.type.editorConfig.collections.colorSchemas,paramName:"colorSchema",value:stateParams.colorSchema,setValue:setValue}),_react.default.createElement(_components.NumberInputOption,{label:_i18n.i18n.translate("regionMap.visParams.outlineWeightLabel",{defaultMessage:"Border thickness"}),paramName:"outlineWeight",value:stateParams.outlineWeight,setValue:setValue})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_wms_options.WmsOptions,props))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BasicOptions=BasicOptions;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _switch=__webpack_require__(664);var _select=__webpack_require__(665);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function BasicOptions(_ref){var stateParams=_ref.stateParams,setValue=_ref.setValue,vis=_ref.vis;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_select.SelectOption,{label:_i18n.i18n.translate("kbnVislibVisTypes.controls.vislibBasicOptions.legendPositionLabel",{defaultMessage:"Legend position"}),options:vis.type.editorConfig.collections.legendPositions,paramName:"legendPosition",value:stateParams.legendPosition,setValue:setValue}),_react.default.createElement(_switch.SwitchOption,{label:_i18n.i18n.translate("kbnVislibVisTypes.controls.vislibBasicOptions.showTooltipLabel",{defaultMessage:"Show tooltip"}),paramName:"addTooltip",value:stateParams.addTooltip,setValue:setValue}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NumberInputOption=NumberInputOption;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NumberInputOption(_ref){var label=_ref.label,max=_ref.max,min=_ref.min,paramName=_ref.paramName,step=_ref.step,_ref$value=_ref.value,value=_ref$value===void 0?"":_ref$value,setValue=_ref.setValue;return _react.default.createElement(_eui.EuiFormRow,{label:label,fullWidth:true,compressed:true},_react.default.createElement(_eui.EuiFieldNumber,{fullWidth:true,step:step,max:max,min:min,value:value,onChange:function onChange(ev){return setValue(paramName,isNaN(ev.target.valueAsNumber)?"":ev.target.valueAsNumber)}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeOption=RangeOption;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function RangeOption(_ref){var label=_ref.label,max=_ref.max,min=_ref.min,showInput=_ref.showInput,step=_ref.step,paramName=_ref.paramName,value=_ref.value,setValue=_ref.setValue;var _useState=(0,_react.useState)(value),_useState2=_slicedToArray(_useState,2),stateValue=_useState2[0],setStateValue=_useState2[1];var _useState3=(0,_react.useState)(true),_useState4=_slicedToArray(_useState3,2),isValidState=_useState4[0],setIsValidState=_useState4[1];var error=_i18n.i18n.translate("kbnVislibVisTypes.controls.rangeErrorMessage",{defaultMessage:"Values must be on or between {min} and {max}",values:{min:min,max:max}});var onChangeHandler=function onChangeHandler(_ref2,isValid){var valueAsNumber=_ref2.target.valueAsNumber;setStateValue(valueAsNumber);setIsValidState(isValid);if(isValid){setValue(paramName,valueAsNumber)}};return _react.default.createElement(_eui.EuiFormRow,{label:label,fullWidth:true,isInvalid:!isValidState,error:error,compressed:true},_react.default.createElement(_eui.EuiRange,{fullWidth:true,showValue:true,max:max,min:min,showInput:showInput,step:step,value:stateValue,onChange:onChangeHandler}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TextInputOption=TextInputOption;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TextInputOption(_ref){var disabled=_ref.disabled,helpText=_ref.helpText,label=_ref.label,paramName=_ref.paramName,_ref$value=_ref.value,value=_ref$value===void 0?"":_ref$value,setValue=_ref.setValue;return _react.default.createElement(_eui.EuiFormRow,{helpText:helpText,label:label,fullWidth:true,compressed:true},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,disabled:disabled,value:value,onChange:function onChange(ev){return setValue(paramName,ev.target.value)}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TruncateLabelsOption=TruncateLabelsOption;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TruncateLabelsOption(_ref){var value=_ref.value,setValue=_ref.setValue;var onChange=function onChange(ev){return setValue("truncate",ev.target.value===""?null:parseFloat(ev.target.value))};return _react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("kbnVislibVisTypes.controls.truncateLabel",{defaultMessage:"Truncate"}),fullWidth:true,compressed:true},_react.default.createElement(_eui.EuiFieldNumber,{value:value===null?"":value,onChange:onChange,fullWidth:true}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WmsInternalOptions=WmsInternalOptions;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _components=__webpack_require__(108);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function WmsInternalOptions(_ref){var wms=_ref.wms,setValue=_ref.setValue;var wmsLink=_react.default.createElement(_eui.EuiLink,{href:"http://www.opengeospatial.org/standards/wms",target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.wmsLinkText",defaultMessage:"OGC standard"}));var footnoteText=_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("span",{"aria-hidden":"true"},"*"),_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.mapLoadFailDescription",defaultMessage:"If this parameter is incorrect, maps will fail to load."}));var footnote=_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("p",null,footnoteText));var setOptions=function setOptions(paramName,value){return setValue("options",_objectSpread({},wms.options,_defineProperty({},paramName,value)))};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.wmsDescription",defaultMessage:"WMS is an {wmsLink} for map image services.",values:{wmsLink:wmsLink}})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_components.TextInputOption,{label:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.wmsUrlLabel",defaultMessage:"WMS url"}),_react.default.createElement("span",{"aria-hidden":"true"},"*")),helpText:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.urlOfWMSWebServiceTip",defaultMessage:"The URL of the WMS web service."}),footnote),paramName:"url",value:wms.url,setValue:setValue}),_react.default.createElement(_components.TextInputOption,{label:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.wmsLayersLabel",defaultMessage:"WMS layers"}),_react.default.createElement("span",{"aria-hidden":"true"},"*")),helpText:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.listOfLayersToUseTip",defaultMessage:"A comma separated list of layers to use."}),footnote),paramName:"layers",value:wms.options.layers,setValue:setOptions}),_react.default.createElement(_components.TextInputOption,{label:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.wmsVersionLabel",defaultMessage:"WMS version"}),_react.default.createElement("span",{"aria-hidden":"true"},"*")),helpText:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.versionOfWMSserverSupportsTip",defaultMessage:"The version of WMS the server supports."}),footnote),paramName:"version",value:wms.options.version,setValue:setOptions}),_react.default.createElement(_components.TextInputOption,{label:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.wmsFormatLabel",defaultMessage:"WMS format"}),_react.default.createElement("span",{"aria-hidden":"true"},"*")),helpText:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.imageFormatToUseTip",defaultMessage:"Usually image/png or image/jpeg. Use png if the server will return transparent layers."}),footnote),paramName:"format",value:wms.options.format,setValue:setOptions}),_react.default.createElement(_components.TextInputOption,{label:_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.wmsAttributionLabel",defaultMessage:"WMS attribution"}),helpText:_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.attributionStringTip",defaultMessage:"Attribution string for the lower right corner."}),paramName:"attribution",value:wms.options.attribution,setValue:setOptions}),_react.default.createElement(_components.TextInputOption,{label:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.wmsStylesLabel",defaultMessage:"WMS styles"}),_react.default.createElement("span",{"aria-hidden":"true"},"*")),helpText:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"tileMap.wmsOptions.wmsServerSupportedStylesListTip",defaultMessage:"A comma separated list of WMS server supported styles to use. Blank in most cases."}),footnote),paramName:"styles",value:wms.options.styles,setValue:setOptions}),_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("p",{"aria-hidden":"true"},footnoteText)))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(8);var _public=__webpack_require__(30);var _shim=__webpack_require__(1488);var _=__webpack_require__(1490);var plugins={visualizations:_public.visualizations,data:_new_platform.npSetup.plugins.data,__LEGACY:new _shim.LegacyDependenciesPlugin};var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core,plugins);exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core);exports.start=start},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _legacy_dependencies_plugin=__webpack_require__(1489);Object.keys(_legacy_dependencies_plugin).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _legacy_dependencies_plugin[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LegacyDependenciesPlugin=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));__webpack_require__(369);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var LegacyDependenciesPlugin=function(){function LegacyDependenciesPlugin(){_classCallCheck(this,LegacyDependenciesPlugin)}_createClass(LegacyDependenciesPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var $injector;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _chrome.default.dangerouslyGetActiveInjector();case 2:$injector=_context.sent;return _context.abrupt("return",{$injector:$injector,serviceSettings:$injector.get("serviceSettings")});case 4:case"end":return _context.stop()}}},_callee)}));function setup(){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){}}]);return LegacyDependenciesPlugin}();exports.LegacyDependenciesPlugin=LegacyDependenciesPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;var _plugin=__webpack_require__(1491);function plugin(initializerContext){return new _plugin.TileMapPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TileMapPlugin=void 0;var _tile_map_fn=__webpack_require__(1492);var _tile_map_type=__webpack_require__(1494);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TileMapPlugin=function(){function TileMapPlugin(initializerContext){_classCallCheck(this,TileMapPlugin);_defineProperty(this,"initializerContext",void 0);this.initializerContext=initializerContext}_createClass(TileMapPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(core,_ref){var data,visualizations,__LEGACY,visualizationDependencies;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_ref.data,visualizations=_ref.visualizations,__LEGACY=_ref.__LEGACY;_context.t0=_objectSpread;_context.t1={uiSettings:core.uiSettings};_context.next=5;return __LEGACY.setup();case 5:_context.t2=_context.sent;visualizationDependencies=(0,_context.t0)(_context.t1,_context.t2);data.expressions.registerFunction(function(){return(0,_tile_map_fn.createTileMapFn)(visualizationDependencies)});visualizations.types.VisTypesRegistryProvider.register(function(){return(0,_tile_map_type.createTileMapTypeDefinition)(visualizationDependencies)});case 9:case"end":return _context.stop()}}},_callee)}));function setup(_x,_x2){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){}}]);return TileMapPlugin}();exports.TileMapPlugin=TileMapPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTileMapFn=void 0;var _convert_to_geojson=__webpack_require__(667);var _i18n=__webpack_require__(2);var createTileMapFn=function createTileMapFn(){return{name:"tilemap",type:"render",context:{types:["kibana_datatable"]},help:_i18n.i18n.translate("tileMap.function.help",{defaultMessage:"Tilemap visualization"}),args:{visConfig:{types:["string","null"],default:'"{}"'}},fn:function fn(context,args){var visConfig=JSON.parse(args.visConfig);var _visConfig$dimensions=visConfig.dimensions,geohash=_visConfig$dimensions.geohash,metric=_visConfig$dimensions.metric,geocentroid=_visConfig$dimensions.geocentroid;var convertedData=(0,_convert_to_geojson.convertToGeoJson)(context,{geohash:geohash,metric:metric,geocentroid:geocentroid});return{type:"render",as:"visualization",value:{visData:convertedData,visType:"tile_map",visConfig:visConfig,params:{listenOnChange:true}}}}}};exports.createTileMapFn=createTileMapFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.gridDimensions=gridDimensions;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var gridAtEquator={1:[5009400,4992600],2:[1252300,624100],3:[156500,156e3],4:[39100,19500],5:[4900,4900],6:[1200,609.4],7:[152.9,152.4],8:[38.2,19],9:[4.8,4.8],10:[1.2,.595],11:[.149,.149],12:[.037,.019]};function gridDimensions(precision){return _lodash.default.get(gridAtEquator,precision)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTileMapTypeDefinition=createTileMapTypeDefinition;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _supports=__webpack_require__(1495);var _schemas=__webpack_require__(33);var _update_status=__webpack_require__(83);var _truncated_colormaps=__webpack_require__(125);var _convert_to_geojson=__webpack_require__(667);var _tile_map_visualization=__webpack_require__(1496);var _public=__webpack_require__(30);var _tile_map_options=__webpack_require__(1503);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function createTileMapTypeDefinition(dependencies){var CoordinateMapsVisualization=(0,_tile_map_visualization.createTileMapVisualization)(dependencies);var uiSettings=dependencies.uiSettings,serviceSettings=dependencies.serviceSettings;return _public.visFactory.createBaseVisualization({name:"tile_map",title:_i18n.i18n.translate("tileMap.vis.mapTitle",{defaultMessage:"Coordinate Map"}),icon:"visMapCoordinate",description:_i18n.i18n.translate("tileMap.vis.mapDescription",{defaultMessage:"Plot latitude and longitude coordinates on a map"}),visConfig:{canDesaturate:!!_supports.supports.cssFilters,defaults:{colorSchema:"Yellow to Red",mapType:"Scaled Circle Markers",isDesaturated:true,addTooltip:true,heatClusterSize:1.5,legendPosition:"bottomright",mapZoom:2,mapCenter:[0,0],wms:uiSettings.get("visualization:tileMap:WMSdefaults")}},requiresUpdateStatus:[_update_status.Status.AGGS,_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.UI_STATE],requiresPartialRows:true,visualization:CoordinateMapsVisualization,responseHandler:_convert_to_geojson.convertToGeoJson,editorConfig:{collections:{colorSchemas:_truncated_colormaps.colorSchemas,legendPositions:[{value:"bottomleft",text:_i18n.i18n.translate("tileMap.vis.editorConfig.legendPositions.bottomLeftText",{defaultMessage:"Bottom left"})},{value:"bottomright",text:_i18n.i18n.translate("tileMap.vis.editorConfig.legendPositions.bottomRightText",{defaultMessage:"Bottom right"})},{value:"topleft",text:_i18n.i18n.translate("tileMap.vis.editorConfig.legendPositions.topLeftText",{defaultMessage:"Top left"})},{value:"topright",text:_i18n.i18n.translate("tileMap.vis.editorConfig.legendPositions.topRightText",{defaultMessage:"Top right"})}],mapTypes:[{value:"Scaled Circle Markers",text:_i18n.i18n.translate("tileMap.vis.editorConfig.mapTypes.scaledCircleMarkersText",{defaultMessage:"Scaled circle markers"})},{value:"Shaded Circle Markers",text:_i18n.i18n.translate("tileMap.vis.editorConfig.mapTypes.shadedCircleMarkersText",{defaultMessage:"Shaded circle markers"})},{value:"Shaded Geohash Grid",text:_i18n.i18n.translate("tileMap.vis.editorConfig.mapTypes.shadedGeohashGridText",{defaultMessage:"Shaded geohash grid"})},{value:"Heatmap",text:_i18n.i18n.translate("tileMap.vis.editorConfig.mapTypes.heatmapText",{defaultMessage:"Heatmap"})}],tmsLayers:[]},optionsTemplate:function optionsTemplate(props){return _react.default.createElement(_tile_map_options.TileMapOptions,_extends({},props,{serviceSettings:serviceSettings}))},schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("tileMap.vis.map.editorConfig.schemas.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("tileMap.vis.map.editorConfig.schemas.geoCoordinatesTitle",{defaultMessage:"Geo coordinates"}),aggFilter:"geohash_grid",min:1,max:1}])}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.supports=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var supports={cssFilters:function(){var e=document.createElement("img");var rules=["webkitFilter","mozFilter","msFilter","filter"];var test="grayscale(1)";rules.forEach(function(rule){e.style[rule]=test});document.body.appendChild(e);var styles=window.getComputedStyle(e);var can=(0,_lodash.default)(styles).pick(rules).includes(test);document.body.removeChild(e);return can}()};exports.supports=supports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTileMapVisualization=void 0;var _lodash=__webpack_require__(1);var _geohash_layer=__webpack_require__(1497);var _base_maps_visualization=__webpack_require__(662);var _tooltip_formatter=__webpack_require__(1501);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var createTileMapVisualization=function createTileMapVisualization(_ref){var serviceSettings=_ref.serviceSettings,$injector=_ref.$injector;var BaseMapsVisualization=new _base_maps_visualization.BaseMapsVisualizationProvider(serviceSettings);var tooltipFormatter=new _tooltip_formatter.TileMapTooltipFormatterProvider($injector);return function(_BaseMapsVisualizatio){_inherits(CoordinateMapsVisualization,_BaseMapsVisualizatio);function CoordinateMapsVisualization(element,vis){var _this;_classCallCheck(this,CoordinateMapsVisualization);_this=_possibleConstructorReturn(this,_getPrototypeOf(CoordinateMapsVisualization).call(this,element,vis));_this._geohashLayer=null;return _this}_createClass(CoordinateMapsVisualization,[{key:"_makeKibanaMap",value:function(){var _makeKibanaMap2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var updateGeohashAgg,uiState,previousPrecision,precisionChange;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _get(_getPrototypeOf(CoordinateMapsVisualization.prototype),"_makeKibanaMap",this).call(this);case 2:updateGeohashAgg=function updateGeohashAgg(){var geohashAgg=_this2._getGeoHashAgg();if(!geohashAgg)return;geohashAgg.params.mapBounds=_this2._kibanaMap.getBounds();geohashAgg.params.mapZoom=_this2._kibanaMap.getZoomLevel();geohashAgg.params.mapCenter=_this2._kibanaMap.getCenter()};updateGeohashAgg();uiState=this.vis.getUiState();uiState.on("change",function(prop){if(prop==="mapZoom"||prop==="mapCenter"){updateGeohashAgg()}});previousPrecision=this._kibanaMap.getGeohashPrecision();precisionChange=false;this._kibanaMap.on("zoomchange",function(){var geohashAgg=_this2._getGeoHashAgg();precisionChange=previousPrecision!==_this2._kibanaMap.getGeohashPrecision();previousPrecision=_this2._kibanaMap.getGeohashPrecision();if(!geohashAgg){return}var isAutoPrecision=typeof geohashAgg.params.autoPrecision==="boolean"?geohashAgg.params.autoPrecision:true;if(isAutoPrecision){geohashAgg.params.precision=previousPrecision}});this._kibanaMap.on("zoomend",function(){var geohashAgg=_this2._getGeoHashAgg();if(!geohashAgg){return}var isAutoPrecision=typeof geohashAgg.params.autoPrecision==="boolean"?geohashAgg.params.autoPrecision:true;if(!isAutoPrecision){return}if(precisionChange){_this2.vis.updateState()}else{_this2._updateData(_this2._geoJsonFeatureCollectionAndMeta)}});this._kibanaMap.addDrawControl();this._kibanaMap.on("drawCreated:rectangle",function(event){var geohashAgg=_this2._getGeoHashAgg();_this2.addSpatialFilter(geohashAgg,"geo_bounding_box",event.bounds)});this._kibanaMap.on("drawCreated:polygon",function(event){var geohashAgg=_this2._getGeoHashAgg();_this2.addSpatialFilter(geohashAgg,"geo_polygon",{points:event.points})});case 13:case"end":return _context.stop()}}},_callee,this)}));function _makeKibanaMap(){return _makeKibanaMap2.apply(this,arguments)}return _makeKibanaMap}()},{key:"_updateData",value:function(){var _updateData2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(geojsonFeatureCollectionAndMeta){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this._getMapsParams().mapType!=="Heatmap"&&geojsonFeatureCollectionAndMeta===this._geoJsonFeatureCollectionAndMeta)){_context2.next=2;break}return _context2.abrupt("return");case 2:if(this._geohashLayer){this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null}if(geojsonFeatureCollectionAndMeta){_context2.next=8;break}this._geoJsonFeatureCollectionAndMeta=null;this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null;return _context2.abrupt("return");case 8:this._geoJsonFeatureCollectionAndMeta=geojsonFeatureCollectionAndMeta;this._recreateGeohashLayer();case 10:case"end":return _context2.stop()}}},_callee2,this)}));function _updateData(_x){return _updateData2.apply(this,arguments)}return _updateData}()},{key:"_recreateGeohashLayer",value:function _recreateGeohashLayer(){if(this._geohashLayer){this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null}var geohashOptions=this._getGeohashOptions();this._geohashLayer=new _geohash_layer.GeohashLayer(this._geoJsonFeatureCollectionAndMeta.featureCollection,this._geoJsonFeatureCollectionAndMeta.meta,geohashOptions,this._kibanaMap.getZoomLevel(),this._kibanaMap);this._kibanaMap.addLayer(this._geohashLayer)}},{key:"_updateParams",value:function(){var _updateParams2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var geohashOptions;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _get(_getPrototypeOf(CoordinateMapsVisualization.prototype),"_updateParams",this).call(this);case 2:this._kibanaMap.setDesaturateBaseLayer(this._params.isDesaturated);geohashOptions=this._getGeohashOptions();if(!this._geohashLayer||!this._geohashLayer.isReusable(geohashOptions)){if(this._geoJsonFeatureCollectionAndMeta){this._recreateGeohashLayer()}this._updateData(this._geoJsonFeatureCollectionAndMeta)}case 5:case"end":return _context3.stop()}}},_callee3,this)}));function _updateParams(){return _updateParams2.apply(this,arguments)}return _updateParams}()},{key:"_getGeohashOptions",value:function _getGeohashOptions(){var _this3=this;var newParams=this._getMapsParams();var metricAgg=this._getMetricAgg();var boundTooltipFormatter=tooltipFormatter.bind(null,this.vis.getAggConfig(),metricAgg);return{label:metricAgg?metricAgg.makeLabel():"",valueFormatter:this._geoJsonFeatureCollectionAndMeta?metricAgg&&metricAgg.fieldFormatter():null,tooltipFormatter:this._geoJsonFeatureCollectionAndMeta?boundTooltipFormatter:null,mapType:newParams.mapType,isFilteredByCollar:this._isFilteredByCollar(),fetchBounds:function fetchBounds(){return _this3.vis.API.getGeohashBounds()},colorRamp:newParams.colorSchema,heatmap:{heatClusterSize:newParams.heatClusterSize}}}},{key:"addSpatialFilter",value:function addSpatialFilter(agg,filterName,filterData){if(!agg){return}var indexPatternName=agg.getIndexPattern().id;var field=agg.fieldName();var filter={meta:{negate:false,index:indexPatternName}};filter[filterName]={ignore_unmapped:true};filter[filterName][field]=filterData;this.vis.API.queryFilter.addFilters([filter]);this.vis.updateState()}},{key:"_getGeoHashAgg",value:function _getGeoHashAgg(){return this.vis.getAggConfig().find(function(agg){return(0,_lodash.get)(agg,"type.dslName")==="geohash_grid"})}},{key:"_getMetricAgg",value:function _getMetricAgg(){return this.vis.getAggConfig().find(function(agg){return agg.type.type==="metrics"})}},{key:"_isFilteredByCollar",value:function _isFilteredByCollar(){var DEFAULT=false;var agg=this._getGeoHashAgg();if(agg){return(0,_lodash.get)(agg,"params.isFilteredByCollar",DEFAULT)}else{return DEFAULT}}}]);return CoordinateMapsVisualization}(BaseMapsVisualization)};exports.createTileMapVisualization=createTileMapVisualization},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GeohashLayer=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(66));var _lodash=__webpack_require__(1);var _i18n=__webpack_require__(2);var _kibana_map_layer=__webpack_require__(436);var _heatmap=__webpack_require__(1498);var _scaled_circles=__webpack_require__(437);var _shaded_circles=__webpack_require__(1499);var _geohash_grid=__webpack_require__(1500);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var GeohashLayer=function(_KibanaMapLayer){_inherits(GeohashLayer,_KibanaMapLayer);function GeohashLayer(featureCollection,featureCollectionMetaData,options,zoom,kibanaMap){var _this;_classCallCheck(this,GeohashLayer);_this=_possibleConstructorReturn(this,_getPrototypeOf(GeohashLayer).call(this));_this._featureCollection=featureCollection;_this._featureCollectionMetaData=featureCollectionMetaData;_this._geohashOptions=options;_this._zoom=zoom;_this._kibanaMap=kibanaMap;var geojson=_leaflet.default.geoJson(_this._featureCollection);_this._bounds=geojson.getBounds();_this._createGeohashMarkers();_this._lastBounds=null;return _this}_createClass(GeohashLayer,[{key:"_createGeohashMarkers",value:function _createGeohashMarkers(){var _this2=this;var markerOptions={isFilteredByCollar:this._geohashOptions.isFilteredByCollar,valueFormatter:this._geohashOptions.valueFormatter,tooltipFormatter:this._geohashOptions.tooltipFormatter,label:this._geohashOptions.label,colorRamp:this._geohashOptions.colorRamp};switch(this._geohashOptions.mapType){case"Scaled Circle Markers":this._geohashMarkers=new _scaled_circles.ScaledCirclesMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Shaded Circle Markers":this._geohashMarkers=new _shaded_circles.ShadedCirclesMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Shaded Geohash Grid":this._geohashMarkers=new _geohash_grid.GeohashGridMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Heatmap":var radius=15;if(this._featureCollectionMetaData.geohashGridDimensionsAtEquator){var minGridLength=(0,_lodash.min)(this._featureCollectionMetaData.geohashGridDimensionsAtEquator);var metersPerPixel=this._kibanaMap.getMetersPerPixel();radius=minGridLength/metersPerPixel/2}radius=radius*parseFloat(this._geohashOptions.heatmap.heatClusterSize);this._geohashMarkers=new _heatmap.HeatmapMarkers(this._featureCollection,{radius:radius,blur:radius,maxZoom:this._kibanaMap.getZoomLevel(),minOpacity:.1,tooltipFormatter:this._geohashOptions.tooltipFormatter},this._zoom,this._featureCollectionMetaData.max);break;default:throw new Error(_i18n.i18n.translate("tileMap.geohashLayer.mapTitle",{defaultMessage:"{mapType} mapType not recognized",values:{mapType:this._geohashOptions.mapType}}))}this._geohashMarkers.on("showTooltip",function(event){return _this2.emit("showTooltip",event)});this._geohashMarkers.on("hideTooltip",function(event){return _this2.emit("hideTooltip",event)});this._leafletLayer=this._geohashMarkers.getLeafletLayer()}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){return this._geohashMarkers.appendLegendContents(jqueryDiv)}},{key:"movePointer",value:function movePointer(){var _this$_geohashMarkers;(_this$_geohashMarkers=this._geohashMarkers).movePointer.apply(_this$_geohashMarkers,arguments)}},{key:"getBounds",value:function(){var _getBounds=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var geoHashBounds,northEast,southWest;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!this._geohashOptions.fetchBounds){_context.next=8;break}_context.next=3;return this._geohashOptions.fetchBounds();case 3:geoHashBounds=_context.sent;if(!geoHashBounds){_context.next=8;break}northEast=_leaflet.default.latLng(geoHashBounds.top_left.lat,geoHashBounds.bottom_right.lon);southWest=_leaflet.default.latLng(geoHashBounds.bottom_right.lat,geoHashBounds.top_left.lon);return _context.abrupt("return",_leaflet.default.latLngBounds(southWest,northEast));case 8:return _context.abrupt("return",this._bounds);case 9:case"end":return _context.stop()}}},_callee,this)}));function getBounds(){return _getBounds.apply(this,arguments)}return getBounds}()},{key:"updateExtent",value:function updateExtent(){if(!this._geohashOptions.isFilteredByCollar){var bounds=this._kibanaMap.getLeafletBounds();if(!this._lastBounds||!this._lastBounds.equals(bounds)){this._kibanaMap.removeLayer(this);this._createGeohashMarkers();this._kibanaMap.addLayer(this)}this._lastBounds=bounds}}},{key:"isReusable",value:function isReusable(options){if((0,_lodash.isEqual)(this._geohashOptions,options)){return true}if(this._geohashOptions.colorRamp!==options.colorRamp){return false}else if(this._geohashOptions.mapType!==options.mapType){return false}else if(this._geohashOptions.mapType==="Heatmap"&&!(0,_lodash.isEqual)(this._geohashOptions.heatmap,options)){return false}else{return true}}}]);return GeohashLayer}(_kibana_map_layer.KibanaMapLayer);exports.GeohashLayer=GeohashLayer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HeatmapMarkers=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(66));var _lodash=_interopRequireDefault(__webpack_require__(1));var _d=_interopRequireDefault(__webpack_require__(15));var _events=__webpack_require__(48);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var HeatmapMarkers=function(_EventEmitter){_inherits(HeatmapMarkers,_EventEmitter);function HeatmapMarkers(featureCollection,options,zoom,max){var _this;_classCallCheck(this,HeatmapMarkers);_this=_possibleConstructorReturn(this,_getPrototypeOf(HeatmapMarkers).call(this));_this._geojsonFeatureCollection=featureCollection;var points=dataToHeatArray(featureCollection,max);_this._leafletLayer=_leaflet.default.heatLayer(points,options);_this._tooltipFormatter=options.tooltipFormatter;_this._zoom=zoom;_this._disableTooltips=false;_this._getLatLng=_lodash.default.memoize(function(feature){return _leaflet.default.latLng(feature.geometry.coordinates[1],feature.geometry.coordinates[0])},function(feature){return[feature.geometry.coordinates[1],feature.geometry.coordinates[0]].join(",")});_this._addTooltips();return _this}_createClass(HeatmapMarkers,[{key:"getBounds",value:function getBounds(){return this._leafletLayer.getBounds()}},{key:"getLeafletLayer",value:function getLeafletLayer(){return this._leafletLayer}},{key:"appendLegendContents",value:function appendLegendContents(){}},{key:"movePointer",value:function movePointer(type,event){if(type==="mousemove"){this._debounceMoveMoveLocation(event)}else if(type==="mouseout"){this.emit("hideTooltip")}else if(type==="mousedown"){this._disableTooltips=true;this.emit("hideTooltip")}else if(type==="mouseup"){this._disableTooltips=false}}},{key:"_addTooltips",value:function _addTooltips(){var _this2=this;var mouseMoveLocation=function mouseMoveLocation(e){if(!_this2._geojsonFeatureCollection.features.length||_this2._disableTooltips){_this2.emit("hideTooltip");return}var feature=_this2._nearestFeature(e.latlng);if(_this2._tooltipProximity(e.latlng,feature)){var content=_this2._tooltipFormatter(feature);if(!content){return}_this2.emit("showTooltip",{content:content,position:e.latlng})}else{_this2.emit("hideTooltip")}};this._debounceMoveMoveLocation=_lodash.default.debounce(mouseMoveLocation.bind(this),15,{leading:true,trailing:false})}},{key:"_nearestFeature",value:function _nearestFeature(latLng){var self=this;var nearest;if(latLng.lng<-180||latLng.lng>180){return}_lodash.default.reduce(this._geojsonFeatureCollection.features,function(distance,feature){var featureLatLng=self._getLatLng(feature);var dist=latLng.distanceTo(featureLatLng);if(dist<distance){nearest=feature;return dist}return distance},Infinity);return nearest}},{key:"_tooltipProximity",value:function _tooltipProximity(latlng,feature){if(!feature)return;var showTip=false;var featureLatLng=this._getLatLng(feature);var zoomScale=_d.default.scale.linear().domain([1,4,7,10,13,16,18]).range([1e6,3e5,1e5,15e3,2e3,150,50]);var proximity=zoomScale(this._zoom);var distance=latlng.distanceTo(featureLatLng);var maxLngDif=40;var lngDif=Math.abs(latlng.lng-featureLatLng.lng);if(distance<proximity&&lngDif<maxLngDif){showTip=true}_d.default.scale.pow().exponent(.2).domain([1,18]).range([15e5,50]);return showTip}}]);return HeatmapMarkers}(_events.EventEmitter);exports.HeatmapMarkers=HeatmapMarkers;function dataToHeatArray(featureCollection,max){return featureCollection.features.map(function(feature){var lat=feature.geometry.coordinates[1];var lng=feature.geometry.coordinates[0];var heatIntensity=feature.properties.value/max;return[lat,lng,heatIntensity]})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShadedCirclesMarkers=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(66));var _lodash=_interopRequireDefault(__webpack_require__(1));var _scaled_circles=__webpack_require__(437);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ShadedCirclesMarkers=function(_ScaledCirclesMarkers){_inherits(ShadedCirclesMarkers,_ScaledCirclesMarkers);function ShadedCirclesMarkers(){_classCallCheck(this,ShadedCirclesMarkers);return _possibleConstructorReturn(this,_getPrototypeOf(ShadedCirclesMarkers).apply(this,arguments))}_createClass(ShadedCirclesMarkers,[{key:"getMarkerFunction",value:function getMarkerFunction(){var _this=this;var scaleFactor=.8;return function(feature,latlng){var radius=_this._geohashMinDistance(feature)*scaleFactor;return _leaflet.default.circle(latlng,radius)}}},{key:"_geohashMinDistance",value:function _geohashMinDistance(feature){var centerPoint=feature.properties.geohash_meta.center;var geohashRect=feature.properties.geohash_meta.rectangle;var east=_leaflet.default.latLng([centerPoint[0],geohashRect[2][1]]);var north=_leaflet.default.latLng([geohashRect[3][0],centerPoint[1]]);var center=_leaflet.default.latLng([centerPoint[0],centerPoint[1]]);var eastRadius=Math.floor(center.distanceTo(east));var northRadius=Math.floor(center.distanceTo(north));return _lodash.default.min([eastRadius,northRadius])}}]);return ShadedCirclesMarkers}(_scaled_circles.ScaledCirclesMarkers);exports.ShadedCirclesMarkers=ShadedCirclesMarkers},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GeohashGridMarkers=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(66));var _scaled_circles=__webpack_require__(437);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var GeohashGridMarkers=function(_ScaledCirclesMarkers){_inherits(GeohashGridMarkers,_ScaledCirclesMarkers);function GeohashGridMarkers(){_classCallCheck(this,GeohashGridMarkers);return _possibleConstructorReturn(this,_getPrototypeOf(GeohashGridMarkers).apply(this,arguments))}_createClass(GeohashGridMarkers,[{key:"getMarkerFunction",value:function getMarkerFunction(){return function(feature){var geohashRect=feature.properties.geohash_meta.rectangle;var corners=[[geohashRect[3][0],geohashRect[3][1]],[geohashRect[1][0],geohashRect[1][1]]];return _leaflet.default.rectangle(corners)}}}]);return GeohashGridMarkers}(_scaled_circles.ScaledCirclesMarkers);exports.GeohashGridMarkers=GeohashGridMarkers},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TileMapTooltipFormatterProvider=TileMapTooltipFormatterProvider;var _jquery=_interopRequireDefault(__webpack_require__(12));var _i18n=__webpack_require__(2);var _tooltip=_interopRequireDefault(__webpack_require__(1502));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TileMapTooltipFormatterProvider($injector){var $rootScope=$injector.get("$rootScope");var $compile=$injector.get("$compile");var $tooltipScope=$rootScope.$new();var $el=(0,_jquery.default)("<div>").html(_tooltip.default);$compile($el)($tooltipScope);return function tooltipFormatter(aggConfig,metricAgg,feature){if(!feature){return""}$tooltipScope.details=[{label:metricAgg.makeLabel(),value:metricAgg.fieldFormatter()(feature.properties.value)},{label:_i18n.i18n.translate("tileMap.tooltipFormatter.latitudeLabel",{defaultMessage:"Latitude"}),value:feature.geometry.coordinates[1]},{label:_i18n.i18n.translate("tileMap.tooltipFormatter.longitudeLabel",{defaultMessage:"Longitude"}),value:feature.geometry.coordinates[0]}];$tooltipScope.$apply();return $el.html()}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<table>\n  <tbody>\n    <tr ng-repeat="detail in details" >\n      <td class="visTooltip__label">{{detail.label}}</td>\n      <td class="visTooltip__value">{{detail.value}}</td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TileMapOptions=TileMapOptions;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _components=__webpack_require__(108);var _wms_options=__webpack_require__(666);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function TileMapOptions(props){var stateParams=props.stateParams,setValue=props.setValue,vis=props.vis;(0,_react.useEffect)(function(){if(!stateParams.mapType){setValue("mapType",vis.type.editorConfig.collections.mapTypes[0])}},[]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiPanel,{paddingSize:"s"},_react.default.createElement(_components.SelectOption,{label:_i18n.i18n.translate("tileMap.visParams.mapTypeLabel",{defaultMessage:"Map type"}),options:vis.type.editorConfig.collections.mapTypes,paramName:"mapType",value:stateParams.mapType,setValue:setValue}),_react.default.createElement(_components.SelectOption,{label:_i18n.i18n.translate("tileMap.visParams.colorSchemaLabel",{defaultMessage:"Color schema"}),options:vis.type.editorConfig.collections.colorSchemas,paramName:"colorSchema",value:stateParams.colorSchema,setValue:setValue}),stateParams.mapType==="Heatmap"&&_react.default.createElement(_components.RangeOption,{label:_i18n.i18n.translate("tileMap.visParams.clusterSizeLabel",{defaultMessage:"Cluster size"}),max:3,min:1,paramName:"heatClusterSize",step:.1,value:stateParams.heatClusterSize,setValue:setValue}),_react.default.createElement(_components.BasicOptions,props),_react.default.createElement(_components.SwitchOption,{disabled:!vis.type.visConfig.canDesaturate,label:_i18n.i18n.translate("tileMap.visParams.desaturateTilesLabel",{defaultMessage:"Desaturate tiles"}),tooltip:_i18n.i18n.translate("tileMap.visParams.reduceVibrancyOfTileColorsTip",{defaultMessage:"Reduce the vibrancy of tile colors. This does not work in any version of Internet Explorer."}),paramName:"isDesaturated",value:stateParams.isDesaturated,setValue:setValue})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_wms_options.WmsOptions,props))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(8);var _public=__webpack_require__(30);var _=__webpack_require__(1505);var plugins={visualizations:_public.visualizations,data:_new_platform.npSetup.plugins.data};var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core,plugins);exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core);exports.start=start},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;var _plugin=__webpack_require__(1506);function plugin(initializerContext){return new _plugin.MarkdownPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownPlugin=void 0;var _markdown_vis=__webpack_require__(1507);var _markdown_fn=__webpack_require__(1511);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MarkdownPlugin=function(){function MarkdownPlugin(initializerContext){_classCallCheck(this,MarkdownPlugin);_defineProperty(this,"initializerContext",void 0);this.initializerContext=initializerContext}_createClass(MarkdownPlugin,[{key:"setup",value:function setup(core,_ref){var data=_ref.data,visualizations=_ref.visualizations;visualizations.types.VisTypesRegistryProvider.register(function(){return _markdown_vis.markdownVis});data.expressions.registerFunction(_markdown_fn.createMarkdownVisFn)}},{key:"start",value:function start(core){}}]);return MarkdownPlugin}();exports.MarkdownPlugin=MarkdownPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.markdownVis=void 0;var _i18n=__webpack_require__(2);var _public=__webpack_require__(30);var _markdown_vis_controller=__webpack_require__(1508);var _markdown_options=__webpack_require__(1509);var _settings_options=__webpack_require__(1510);var markdownVis=_public.visFactory.createReactVisualization({name:"markdown",title:"Markdown",isAccessible:true,icon:"visText",description:_i18n.i18n.translate("visTypeMarkdown.markdownDescription",{defaultMessage:"Create a document using markdown syntax"}),visConfig:{component:_markdown_vis_controller.MarkdownVisWrapper,defaults:{fontSize:12,openLinksInNewTab:false,markdown:""}},editorConfig:{optionTabs:[{name:"advanced",title:_i18n.i18n.translate("visTypeMarkdown.tabs.dataText",{defaultMessage:"Data"}),editor:_markdown_options.MarkdownOptions},{name:"options",title:_i18n.i18n.translate("visTypeMarkdown.tabs.optionsText",{defaultMessage:"Options"}),editor:_settings_options.SettingsOptions}],enableAutoApply:true,defaultSize:_public.DefaultEditorSize.LARGE},options:{showTimePicker:false,showFilterBar:false},requestHandler:"none",responseHandler:"none"});exports.markdownVis=markdownVis},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownVisWrapper=MarkdownVisWrapper;var _react=_interopRequireDefault(__webpack_require__(0));var _public=__webpack_require__(104);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var MarkdownVisComponent=function(_React$Component){_inherits(MarkdownVisComponent,_React$Component);function MarkdownVisComponent(){_classCallCheck(this,MarkdownVisComponent);return _possibleConstructorReturn(this,_getPrototypeOf(MarkdownVisComponent).apply(this,arguments))}_createClass(MarkdownVisComponent,[{key:"componentDidMount",value:function componentDidMount(){this.props.renderComplete()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}},{key:"render",value:function render(){return _react.default.createElement("div",{className:"mkdVis",style:{fontSize:"".concat(this.props.fontSize,"pt")}},_react.default.createElement(_public.Markdown,{"data-test-subj":"markdownBody",markdown:this.props.markdown,openLinksInNewTab:this.props.openLinksInNewTab}))}}]);return MarkdownVisComponent}(_react.default.Component);function MarkdownVisWrapper(props){return _react.default.createElement(MarkdownVisComponent,{fontSize:props.visParams.fontSize,markdown:props.visParams.markdown,openLinksInNewTab:props.visParams.openLinksInNewTab,renderComplete:props.renderComplete})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownOptions=MarkdownOptions;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function MarkdownOptions(_ref){var stateParams=_ref.stateParams,setValue=_ref.setValue;var onMarkdownUpdate=(0,_react.useCallback)(function(value){return setValue("markdown",value)},[]);return _react.default.createElement(_eui.EuiPanel,{paddingSize:"s"},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"m",className:"mkdEditor"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none",justifyContent:"spaceBetween",alignItems:"baseline"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h2",null,"Markdown"))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement(_eui.EuiLink,{href:"https://help.github.com/articles/github-flavored-markdown/",target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"visTypeMarkdown.params.helpLinkLabel",defaultMessage:"Help"})," ",_react.default.createElement(_eui.EuiIcon,{type:"popout",size:"s"})))))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTextArea,{id:"markdownVisInput",className:"visEditor--markdown__textarea",value:stateParams.markdown,onChange:function onChange(_ref2){var value=_ref2.target.value;return onMarkdownUpdate(value)},fullWidth:true,"data-test-subj":"markdownTextarea",resize:"none"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SettingsOptions=SettingsOptions;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(5);var _components=__webpack_require__(108);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SettingsOptions(_ref){var stateParams=_ref.stateParams,setValue=_ref.setValue;return _react.default.createElement(_eui.EuiPanel,{paddingSize:"s"},_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"visTypeMarkdown.params.settingsTitle",defaultMessage:"Settings"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_components.RangeOption,{label:_i18n.i18n.translate("visTypeMarkdown.params.fontSizeLabel",{defaultMessage:"Base font size in points"}),max:36,min:8,paramName:"fontSize",showInput:true,value:stateParams.fontSize,setValue:setValue}),_react.default.createElement(_components.SwitchOption,{label:_i18n.i18n.translate("visTypeMarkdown.params.openLinksLabel",{defaultMessage:"Open links in new tab"}),paramName:"openLinksInNewTab",value:stateParams.openLinksInNewTab,setValue:setValue}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMarkdownVisFn=void 0;var _i18n=__webpack_require__(2);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var name="markdownVis";var createMarkdownVisFn=function createMarkdownVisFn(){return{name:name,type:"render",context:{types:[]},help:_i18n.i18n.translate("visTypeMarkdown.function.help",{defaultMessage:"Markdown visualization"}),args:{markdown:{types:["string"],aliases:["_"],required:true,help:_i18n.i18n.translate("visTypeMarkdown.function.markdown.help",{defaultMessage:"Markdown to render"})},font:{types:["style"],help:_i18n.i18n.translate("visTypeMarkdown.function.font.help",{defaultMessage:"Font settings."}),default:"{font size=12}"},openLinksInNewTab:{types:["boolean"],default:false,help:_i18n.i18n.translate("visTypeMarkdown.function.openLinksInNewTab.help",{defaultMessage:"Opens links in new tab"})}},fn:function(){var _fn=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context,args){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",{type:"render",as:"visualization",value:{visType:"markdown",visConfig:{markdown:args.markdown,openLinksInNewTab:args.openLinksInNewTab,fontSize:parseInt(args.font.spec.fontSize||"12",10)}}});case 1:case"end":return _context.stop()}}},_callee)}));function fn(_x,_x2){return _fn.apply(this,arguments)}return fn}()}};exports.createMarkdownVisFn=createMarkdownVisFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(8);var _public=__webpack_require__(30);var _shim=__webpack_require__(1513);var _=__webpack_require__(1520);var plugins={visualizations:_public.visualizations,data:_new_platform.npSetup.plugins.data,__LEGACY:new _shim.LegacyDependenciesPlugin};var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core,plugins);exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core);exports.start=start},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _legacy_dependencies_plugin=__webpack_require__(1514);Object.keys(_legacy_dependencies_plugin).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _legacy_dependencies_plugin[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LegacyDependenciesPlugin=void 0;var _metric_vis_legacy_module=__webpack_require__(1515);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var LegacyDependenciesPlugin=function(){function LegacyDependenciesPlugin(){_classCallCheck(this,LegacyDependenciesPlugin)}_createClass(LegacyDependenciesPlugin,[{key:"setup",value:function setup(){(0,_metric_vis_legacy_module.initMetricVisLegacyModule)()}},{key:"start",value:function start(core){}}]);return LegacyDependenciesPlugin}();exports.LegacyDependenciesPlugin=LegacyDependenciesPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initMetricVisLegacyModule=void 0;var _lodash=__webpack_require__(1);var _modules=__webpack_require__(6);__webpack_require__(1516);var _metric_vis_params=__webpack_require__(1517);var initMetricVisLegacyModule=(0,_lodash.once)(function(){_modules.uiModules.get("kibana/metric_vis",["kibana"]).directive("metricVisParams",_metric_vis_params.MetricVisParams)});exports.initMetricVisLegacyModule=initMetricVisLegacyModule},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);function makeDirectiveDef(id,compare){return function($parse){return{require:"ngModel",link:function link($scope,$el,$attr,ngModel){var getBound=function getBound(){return $parse($attr[id])($scope)};ngModel.$parsers.push(validate);ngModel.$formatters.push(validate);$scope.$watch(getBound,function(){validate(ngModel.$viewValue)});function validate(val){var bound=getBound();var left=parseFloat(val);var right=parseFloat(bound);var isValid=isEmpty(val)||isEmpty(bound)||compare(left,right);ngModel.$setValidity(id,isValid);return val}function isEmpty(val){return typeof val==="undefined"||val===null||val===""}}}}}_modules.uiModules.get("kibana").directive("greaterThan",makeDirectiveDef("greaterThan",function(a,b){return a>b})).directive("lessThan",makeDirectiveDef("lessThan",function(a,b){return a<b})).directive("greaterOrEqualThan",makeDirectiveDef("greaterOrEqualThan",function(a,b){return a>=b}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"MetricVisParams",{enumerable:true,get:function get(){return _metric_vis_params.MetricVisParams}});var _metric_vis_params=__webpack_require__(1518)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricVisParams=MetricVisParams;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(2);var _metric_vis_params=_interopRequireDefault(__webpack_require__(1519));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function MetricVisParams(){return{restrict:"E",template:_metric_vis_params.default,replace:true,link:function link($scope){$scope.collections=$scope.vis.type.editorConfig.collections;$scope.showColorRange=true;$scope.$watch("editorState.params.metric.metricColorMode",function(newValue){switch(newValue){case"Labels":$scope.editorState.params.metric.style.labelColor=true;$scope.editorState.params.metric.style.bgColor=false;break;case"Background":$scope.editorState.params.metric.style.labelColor=false;$scope.editorState.params.metric.style.bgColor=true;break;case"None":$scope.editorState.params.metric.style.labelColor=false;$scope.editorState.params.metric.style.bgColor=false;break}});$scope.resetColors=function(){$scope.uiState.set("vis.colors",null);$scope.customColors=false};$scope.getGreaterThan=function(index){if(index===0)return-Infinity;return $scope.editorState.params.metric.colorsRange[index-1].to};$scope.addRange=function(){var previousRange=_lodash.default.last($scope.editorState.params.metric.colorsRange);var from=previousRange?previousRange.to:0;var to=previousRange?from+(previousRange.to-previousRange.from):100;$scope.editorState.params.metric.colorsRange.push({from:from,to:to})};$scope.removeRange=function(index){$scope.editorState.params.metric.colorsRange.splice(index,1)};$scope.getColor=function(index){var defaultColors=this.uiState.get("vis.defaultColors");var overwriteColors=this.uiState.get("vis.colors");var colors=defaultColors?_lodash.default.defaults({},overwriteColors,defaultColors):overwriteColors;return colors?Object.values(colors)[index]:"transparent"};$scope.uiState.on("colorChanged",function(){$scope.customColors=true});$scope.editorState.requiredDescription=_i18n.i18n.translate("visTypeMetric.params.ranges.warning.requiredDescription",{defaultMessage:"Required:"})}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section">\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="percentageMode"\n      i18n-id="visTypeMetric.params.percentageModeLabel"\n      i18n-default-message="Percentage Mode"\n    >\n    </label>\n    <div class="visEditorSidebar__formControl">\n      <input class="kuiCheckBox" id="percentageMode" type="checkbox" ng-model="editorState.params.metric.percentageMode">\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="showLabels"\n      i18n-id="visTypeMetric.params.showLabelsLabel"\n      i18n-default-message="Show Labels"\n    >\n    </label>\n    <div class="visEditorSidebar__formControl">\n      <input class="kuiCheckBox" id="showLabels" type="checkbox" ng-model="editorState.params.metric.labels.show">\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__collapsible--margin">\n    <div class="visEditorSidebar__collapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showColorRange}}"\n        aria-controls="metricOptionsRanges"\n        aria-label="{{::\'visTypeMetric.params.ranges.toggleOptionsAriaLabel\' | i18n: { defaultMessage: \'Toggle range options\' } }}"\n        class="visEditorSidebar__collapsibleTitleLabel"\n        ng-click="showColorRange = !showColorRange"\n      >\n        <icon color="\'primary\'" aria-hidden="true" ng-if="showColorRange" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon color="\'primary\'" aria-hidden="true" ng-if="!showColorRange" type="\'arrowRight\'" size="\'s\'"></icon>\n\n        <span\n          class="visEditorSidebar__collapsibleTitleText"\n          i18n-id="visTypeMetric.params.rangesTitle"\n          i18n-default-message="Ranges"\n        >\n      </span>\n      </div>\n    </div>\n\n    <div id="metricOptionsRanges" ng-show="showColorRange">\n\n      <table class="visEditorAgg__rangesTable form-group" ng-show="editorState.params.metric.colorsRange.length">\n        <tr>\n          <th scope="col">\n            <label\n              id="metricOptionsCustomRangeFrom"\n              i18n-id="visTypeMetric.params.ranges.fromLabel"\n              i18n-default-message="From"\n            >\n            </label>\n          </th>\n          <th scope="col" colspan="2">\n            <label\n              id="metricOptionsCustomRangeTo"\n              i18n-id="visTypeMetric.params.ranges.toLabel"\n              i18n-default-message="To"\n            >\n            </label>\n          </th>\n        </tr>\n\n        <tr ng-repeat="range in editorState.params.metric.colorsRange track by $index">\n          <td>\n            <input\n              aria-labelledby="metricOptionsCustomRangeFrom"\n              ng-model="range.from"\n              type="number"\n              class="form-control"\n              name="range.from"\n              greater-or-equal-than="getGreaterThan($index)"\n              required\n              step="any" />\n          </td>\n          <td>\n            <input\n              aria-labelledby="metricOptionsCustomRangeTo"\n              ng-model="range.to"\n              type="number"\n              class="form-control"\n              name="range.to"\n              greater-or-equal-than="range.from"\n              required\n              step="any" />\n          </td>\n          <td>\n            <button\n              type="button"\n              ng-click="removeRange($index)"\n              ng-show="editorState.params.metric.colorsRange.length > 1"\n              class="kuiButton kuiButton--danger kuiButton--small">\n              <i class="fa fa-times"></i>\n            </button>\n          </td>\n        </tr>\n      </table>\n\n      <div class="hintbox" ng-show="!editorState.params.metric.colorsRange.length">\n        <p>\n          <i class="fa fa-danger text-danger"></i>\n          <span\n            i18n-id="visTypeMetric.params.ranges.warning.specifyRangeDescription"\n            i18n-default-message="{requiredDescription} You must specify at least one range."\n            i18n-values="{ html_requiredDescription: \'<strong>\' + editorState.requiredDescription + \'</strong>\' }"\n          >\n          </span>\n        </p>\n      </div>\n\n      <div\n        ng-click="addRange()"\n        class="kuiButton kuiButton--primary kuiButton--fullWidth"\n        i18n-id="visTypeMetric.params.ranges.addRangeButtonLabel"\n        i18n-default-message="Add Range"\n      >\n      </div>\n\n    </div>\n  </div>\n\n  <div ng-show="editorState.params.metric.colorsRange.length > 1" class="visEditorSidebar__collapsible--margin">\n    <div class="visEditorSidebar__collapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showColorOptions}}"\n        aria-controls="metricOptionsColors"\n        aria-label="{{::\'visTypeMetric.params.color.toggleOptionsAriaLabel\' | i18n: { defaultMessage: \'Toggle color options\' } }}"\n        class="visEditorSidebar__collapsibleTitleLabel"\n        ng-click="showColorOptions = !showColorOptions"\n      >\n        <icon color="\'primary\'" aria-hidden="true" ng-if="showColorOptions" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon color="\'primary\'" aria-hidden="true" ng-if="!showColorOptions" type="\'arrowRight\'" size="\'s\'"></icon>\n\n        <span\n          class="visEditorSidebar__collapsibleTitleText"\n          i18n-id="visTypeMetric.params.color.colorOptionsTitle"\n          i18n-default-message="Color Options"\n        >\n      </span>\n      </div>\n    </div>\n    <div id="metricOptionsColors" ng-if="showColorOptions">\n\n      <div class="visEditorSidebar__formRow" ng-show="editorState.params.metric.colorsRange.length > 1">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="metricColorMode"\n          i18n-id="visTypeMetric.params.color.useForLabel"\n          i18n-default-message="Use Color For"\n        >\n        </label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            id="metricColorMode"\n            class="kuiSelect visEditorSidebar__select"\n            ng-model="editorState.params.metric.metricColorMode"\n            ng-options="mode.id as mode.label for mode in collections.metricColorMode"\n          ></select>\n        </div>\n      </div>\n      <div class="visEditorSidebar__formRow" ng-show="editorState.params.metric.metricColorMode !== \'None\'">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="colorSchema"\n          i18n-id="visTypeMetric.params.color.schemaLabel"\n          i18n-default-message="Color Schema"\n        >\n        </label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            id="colorSchema"\n            class="kuiSelect visEditorSidebar__select"\n            ng-model="editorState.params.metric.colorSchema"\n            ng-options="mode.id as mode.label for mode in collections.colorSchemas"\n          ></select>\n        </div>\n        <div class="text-info text-center" ng-show="customColors" ng-click="resetColors()"\n          i18n-id="visTypeMetric.params.color.resetColorDescription"\n          i18n-default-message="reset colors"\n        >\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow"  ng-show="editorState.params.metric.metricColorMode !== \'None\'">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="invertColors"\n          i18n-id="visTypeMetric.params.color.reverseSchemaLabel"\n          i18n-default-message="Reverse Color Schema"\n        >\n        </label>\n        <div class="visEditorSidebar__formControl">\n          <input class="kuiCheckBox" id="invertColors" type="checkbox" ng-model="editorState.params.metric.invertColors">\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__collapsible--margin">\n    <div class="visEditorSidebar__collapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showStyle}}"\n        aria-controls="metricOptionsStyle"\n        aria-label="{{::\'visTypeMetric.params.style.toggleOptionsAriaLabel\' | i18n: { defaultMessage: \'Toggle style options\' } }}"\n        class="visEditorSidebar__collapsibleTitleLabel"\n        ng-click="showStyle = !showStyle"\n      >\n        <icon color="\'primary\'" aria-hidden="true" ng-if="showStyle" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon color="\'primary\'" aria-hidden="true" ng-if="!showStyle" type="\'arrowRight\'" size="\'s\'"></icon>\n        <span\n          class="visEditorSidebar__collapsibleTitleText"\n          i18n-id="visTypeMetric.params.style.styleTitle"\n          i18n-default-message="Style"\n        >\n        </span>\n      </div>\n    </div>\n\n    <div id="metricOptionsStyle" ng-if="showStyle">\n\n      <div class="visEditorSidebar__formRow">\n        <label class="visEditorSidebar__formLabel" for="metricFontSize">\n          <span\n            i18n-id="visTypeMetric.params.style.fontSizeLabel"\n            i18n-default-message="Font Size ({fontSize}pt)"\n            i18n-values="{ fontSize: editorState.params.metric.style.fontSize }"\n          >\n          </span>\n        </label>\n        <div class="visEditorSidebar__formControl">\n          <input id="metricFontSize" type="range" ng-model="editorState.params.metric.style.fontSize" class="form-control" min="12" max="120" />\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;var _plugin=__webpack_require__(1521);function plugin(initializerContext){return new _plugin.MetricVisPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricVisPlugin=void 0;var _metric_vis_fn=__webpack_require__(1522);var _metric_vis_type=__webpack_require__(1523);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MetricVisPlugin=function(){function MetricVisPlugin(initializerContext){_classCallCheck(this,MetricVisPlugin);_defineProperty(this,"initializerContext",void 0);this.initializerContext=initializerContext}_createClass(MetricVisPlugin,[{key:"setup",value:function setup(core,_ref){var data=_ref.data,visualizations=_ref.visualizations,__LEGACY=_ref.__LEGACY;__LEGACY.setup();data.expressions.registerFunction(_metric_vis_fn.createMetricVisFn);visualizations.types.VisTypesRegistryProvider.register(_metric_vis_type.createMetricVisTypeDefinition)}},{key:"start",value:function start(core){}}]);return MetricVisPlugin}();exports.MetricVisPlugin=MetricVisPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMetricVisFn=void 0;var _i18n=__webpack_require__(2);var _colormaps=__webpack_require__(84);var name="metricVis";var createMetricVisFn=function createMetricVisFn(){return{name:name,type:"render",context:{types:["kibana_datatable"]},help:_i18n.i18n.translate("visTypeMetric.function.help",{defaultMessage:"Metric visualization"}),args:{percentage:{types:["boolean"],default:false,help:_i18n.i18n.translate("visTypeMetric.function.percentage.help",{defaultMessage:"Shows metric in percentage mode. Requires colorRange to be set."})},colorScheme:{types:["string"],default:'"Green to Red"',options:Object.values(_colormaps.vislibColorMaps).map(function(value){return value.id}),help:_i18n.i18n.translate("visTypeMetric.function.colorScheme.help",{defaultMessage:"Color scheme to use"})},colorMode:{types:["string"],default:'"None"',options:["None","Label","Background"],help:_i18n.i18n.translate("visTypeMetric.function.colorMode.help",{defaultMessage:"Which part of metric to color"})},colorRange:{types:["range"],multi:true,help:_i18n.i18n.translate("visTypeMetric.function.colorRange.help",{defaultMessage:"A range object specifying groups of values to which different colors should be applied."})},useRanges:{types:["boolean"],default:false,help:_i18n.i18n.translate("visTypeMetric.function.useRanges.help",{defaultMessage:"Enabled color ranges."})},invertColors:{types:["boolean"],default:false,help:_i18n.i18n.translate("visTypeMetric.function.invertColors.help",{defaultMessage:"Inverts the color ranges"})},showLabels:{types:["boolean"],default:true,help:_i18n.i18n.translate("visTypeMetric.function.showLabels.help",{defaultMessage:"Shows labels under the metric values."})},bgFill:{types:["string"],default:'"#000"',aliases:["backgroundFill","bgColor","backgroundColor"],help:_i18n.i18n.translate("visTypeMetric.function.bgFill.help",{defaultMessage:"Color as html hex code (#123456), html color (red, blue) or rgba value (rgba(255,255,255,1))."})},font:{types:["style"],help:_i18n.i18n.translate("visTypeMetric.function.font.help",{defaultMessage:"Font settings."}),default:"{font size=60}"},subText:{types:["string"],aliases:["label","text","description"],default:'""',help:_i18n.i18n.translate("visTypeMetric.function.subText.help",{defaultMessage:"Custom text to show under the metric"})},metric:{types:["vis_dimension"],help:_i18n.i18n.translate("visTypeMetric.function.metric.help",{defaultMessage:"metric dimension configuration"}),required:true,multi:true},bucket:{types:["vis_dimension"],help:_i18n.i18n.translate("visTypeMetric.function.bucket.help",{defaultMessage:"bucket dimension configuration"})}},fn:function fn(context,args){var dimensions={metrics:args.metric};if(args.bucket){dimensions.bucket=args.bucket}if(args.percentage&&(!args.colorRange||args.colorRange.length===0)){throw new Error("colorRange must be provided when using percentage")}var fontSize=Number.parseInt(args.font.spec.fontSize,10);return{type:"render",as:"visualization",value:{visData:context,visType:"metric",visConfig:{metric:{percentageMode:args.percentage,useRanges:args.useRanges,colorSchema:args.colorScheme,metricColorMode:args.colorMode,colorsRange:args.colorRange,labels:{show:args.showLabels},invertColors:args.invertColors,style:{bgFill:args.bgFill,bgColor:args.colorMode==="Background",labelColor:args.colorMode==="Labels",subText:args.subText,fontSize:fontSize}},dimensions:dimensions},params:{listenOnChange:true}}}}}};exports.createMetricVisFn=createMetricVisFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMetricVisTypeDefinition=void 0;var _i18n=__webpack_require__(2);var _schemas=__webpack_require__(33);var _colormaps=__webpack_require__(84);var _metric_vis_controller=__webpack_require__(1524);var _public=__webpack_require__(30);var createMetricVisTypeDefinition=function createMetricVisTypeDefinition(){return _public.visFactory.createReactVisualization({name:"metric",title:_i18n.i18n.translate("visTypeMetric.metricTitle",{defaultMessage:"Metric"}),icon:"visMetric",description:_i18n.i18n.translate("visTypeMetric.metricDescription",{defaultMessage:"Display a calculation as a single number"}),visConfig:{component:_metric_vis_controller.MetricVisComponent,defaults:{addTooltip:true,addLegend:false,type:"metric",metric:{percentageMode:false,useRanges:false,colorSchema:"Green to Red",metricColorMode:"None",colorsRange:[{from:0,to:1e4}],labels:{show:true},invertColors:false,style:{bgFill:"#000",bgColor:false,labelColor:false,subText:"",fontSize:60}}}},editorConfig:{collections:{metricColorMode:[{id:"None",label:_i18n.i18n.translate("visTypeMetric.colorModes.noneOptionLabel",{defaultMessage:"None"})},{id:"Labels",label:_i18n.i18n.translate("visTypeMetric.colorModes.labelsOptionLabel",{defaultMessage:"Labels"})},{id:"Background",label:_i18n.i18n.translate("visTypeMetric.colorModes.backgroundOptionLabel",{defaultMessage:"Background"})}],colorSchemas:Object.values(_colormaps.vislibColorMaps).map(function(value){return{id:value.id,label:value.label}})},optionsTemplate:"<metric-vis-params></metric-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("visTypeMetric.schemas.metricTitle",{defaultMessage:"Metric"}),min:1,aggFilter:["!std_dev","!geo_centroid","!derivative","!serial_diff","!moving_avg","!cumulative_sum","!geo_bounds"],aggSettings:{top_hits:{allowStrings:true}},defaults:[{type:"count",schema:"metric"}]},{group:"buckets",name:"group",title:_i18n.i18n.translate("visTypeMetric.schemas.splitGroupTitle",{defaultMessage:"Split group"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]}])}})};exports.createMetricVisTypeDefinition=createMetricVisTypeDefinition},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricVisComponent=void 0;var _lodash=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _heatmap_color=__webpack_require__(427);var _utilities=__webpack_require__(41);var _metric_vis_value=__webpack_require__(1525);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MetricVisComponent=function(_Component){_inherits(MetricVisComponent,_Component);function MetricVisComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,MetricVisComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MetricVisComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"_getFormattedValue",function(fieldFormatter,value){var format=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"text";if((0,_lodash.isNaN)(value))return"-";return fieldFormatter.convert(value,format)});_defineProperty(_assertThisInitialized(_this),"_filterBucket",function(metric){var dimensions=_this.props.visParams.dimensions;if(!dimensions.bucket){return}var table=_this.props.visData;_this.props.vis.API.events.filter({table:table,column:dimensions.bucket.accessor,row:metric.rowIndex})});_defineProperty(_assertThisInitialized(_this),"_renderMetric",function(metric,index){return _react.default.createElement(_metric_vis_value.MetricVisValue,{key:index,metric:metric,fontSize:_this.props.visParams.metric.style.fontSize,onFilter:_this.props.visParams.dimensions.bucket?_this._filterBucket:null,showLabel:_this.props.visParams.metric.labels.show})});return _this}_createClass(MetricVisComponent,[{key:"_getLabels",value:function _getLabels(){var config=this.props.visParams.metric;var isPercentageMode=config.percentageMode;var colorsRange=config.colorsRange;var max=(0,_lodash.last)(colorsRange).to;var labels=[];colorsRange.forEach(function(range){var from=isPercentageMode?Math.round(100*range.from/max):range.from;var to=isPercentageMode?Math.round(100*range.to/max):range.to;labels.push("".concat(from," - ").concat(to))});return labels}},{key:"_getColors",value:function _getColors(){var config=this.props.visParams.metric;var invertColors=config.invertColors;var colorSchema=config.colorSchema;var colorsRange=config.colorsRange;var labels=this._getLabels();var colors={};for(var i=0;i<labels.length;i+=1){var divider=Math.max(colorsRange.length-1,1);var val=invertColors?1-i/divider:i/divider;colors[labels[i]]=(0,_heatmap_color.getHeatmapColors)(val,colorSchema)}return colors}},{key:"_getBucket",value:function _getBucket(val){var config=this.props.visParams.metric;var bucket=(0,_lodash.findIndex)(config.colorsRange,function(range){return range.from<=val&&range.to>val});if(bucket===-1){if(val<config.colorsRange[0].from)bucket=0;else bucket=config.colorsRange.length-1}return bucket}},{key:"_getColor",value:function _getColor(val,labels,colors){var bucket=this._getBucket(val);var label=labels[bucket];return colors[label]}},{key:"_needsLightText",value:function _needsLightText(bgColor){var color=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(bgColor);if(!color){return false}return(0,_eui.isColorDark)(parseInt(color[1]),parseInt(color[2]),parseInt(color[3]))}},{key:"_processTableGroups",value:function _processTableGroups(table){var _this2=this;var config=this.props.visParams.metric;var dimensions=this.props.visParams.dimensions;var isPercentageMode=config.percentageMode;var min=config.colorsRange[0].from;var max=(0,_lodash.last)(config.colorsRange).to;var colors=this._getColors();var labels=this._getLabels();var metrics=[];var bucketColumnId;var bucketFormatter;if(dimensions.bucket){bucketColumnId=table.columns[dimensions.bucket.accessor].id;bucketFormatter=(0,_utilities.getFormat)(dimensions.bucket.format)}dimensions.metrics.forEach(function(metric){var columnIndex=metric.accessor;var column=table.columns[columnIndex];var formatter=(0,_utilities.getFormat)(metric.format);table.rows.forEach(function(row,rowIndex){var title=column.name;var value=row[column.id];var color=_this2._getColor(value,labels,colors);if(isPercentageMode){value=(value-min)/(max-min)}value=_this2._getFormattedValue(formatter,value,"html");if(bucketColumnId){var bucketValue=_this2._getFormattedValue(bucketFormatter,row[bucketColumnId]);title="".concat(bucketValue," - ").concat(title)}var shouldColor=config.colorsRange.length>1;metrics.push({label:title,value:value,color:shouldColor&&config.style.labelColor?color:null,bgColor:shouldColor&&config.style.bgColor?color:null,lightText:shouldColor&&config.style.bgColor&&_this2._needsLightText(color),rowIndex:rowIndex})})});return metrics}},{key:"render",value:function render(){var metricsHtml;if(this.props.visData){var metrics=this._processTableGroups(this.props.visData);metricsHtml=metrics.map(this._renderMetric)}return _react.default.createElement("div",{className:"mtrVis"},metricsHtml)}},{key:"componentDidMount",value:function componentDidMount(){this.props.renderComplete()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}}]);return MetricVisComponent}(_react.Component);exports.MetricVisComponent=MetricVisComponent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricVisValue=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _classnames=_interopRequireDefault(__webpack_require__(26));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MetricVisValue=function(_Component){_inherits(MetricVisValue,_Component);function MetricVisValue(){var _getPrototypeOf2;var _this;_classCallCheck(this,MetricVisValue);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MetricVisValue)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onClick",function(){_this.props.onFilter(_this.props.metric)});return _this}_createClass(MetricVisValue,[{key:"render",value:function render(){var _this$props=this.props,fontSize=_this$props.fontSize,metric=_this$props.metric,onFilter=_this$props.onFilter,showLabel=_this$props.showLabel;var hasFilter=!!onFilter;var metricValueStyle={fontSize:"".concat(fontSize,"pt"),color:metric.color};var containerClassName=(0,_classnames.default)("mtrVis__container",{"mtrVis__container--light":metric.lightText,"mtrVis__container-isfilterable":hasFilter});var metricComponent=_react.default.createElement("div",{className:containerClassName,style:{backgroundColor:metric.bgColor},onClick:hasFilter?this.onClick:null,tabIndex:hasFilter?0:null,role:hasFilter?"button":null},_react.default.createElement("div",{className:"mtrVis__value",style:metricValueStyle,dangerouslySetInnerHTML:{__html:metric.value}}),showLabel&&_react.default.createElement("div",null,metric.label));if(hasFilter){return _react.default.createElement(_eui.EuiKeyboardAccessible,null,metricComponent)}return metricComponent}}]);return MetricVisValue}(_react.Component);exports.MetricVisValue=MetricVisValue;MetricVisValue.propTypes={fontSize:_propTypes.default.number.isRequired,metric:_propTypes.default.object.isRequired,onFilter:_propTypes.default.func,showLabel:_propTypes.default.bool}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(8);var _=__webpack_require__(1527);var _public=__webpack_require__(30);var _shim=__webpack_require__(1532);var plugins={visualizations:_public.visualizations,data:_new_platform.npSetup.plugins.data,__LEGACY:new _shim.LegacyDependenciesPlugin};var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core,plugins);exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core);exports.start=start},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;var _plugin=__webpack_require__(1528);function plugin(initializerContext){return new _plugin.TableVisPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TableVisPlugin=void 0;var _table_vis_fn=__webpack_require__(1529);var _table_vis_type=__webpack_require__(1530);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TableVisPlugin=function(){function TableVisPlugin(initializerContext){_classCallCheck(this,TableVisPlugin);_defineProperty(this,"initializerContext",void 0);this.initializerContext=initializerContext}_createClass(TableVisPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(core,_ref){var data,visualizations,__LEGACY,visualizationDependencies;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_ref.data,visualizations=_ref.visualizations,__LEGACY=_ref.__LEGACY;_context.t0=_objectSpread;_context.t1={uiSettings:core.uiSettings};_context.next=5;return __LEGACY.setup();case 5:_context.t2=_context.sent;visualizationDependencies=(0,_context.t0)(_context.t1,_context.t2);data.expressions.registerFunction(_table_vis_fn.createTableVisFn);visualizations.types.VisTypesRegistryProvider.register(function(){return(0,_table_vis_type.createTableVisTypeDefinition)(visualizationDependencies)});case 9:case"end":return _context.stop()}}},_callee)}));function setup(_x,_x2){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){}}]);return TableVisPlugin}();exports.TableVisPlugin=TableVisPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTableVisFn=void 0;var _i18n=__webpack_require__(2);var _table_vis_request_handler=__webpack_require__(668);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var name="kibana_table";var createTableVisFn=function createTableVisFn(){return{name:name,type:"render",context:{types:["kibana_datatable"]},help:_i18n.i18n.translate("visTypeTable.function.help",{defaultMessage:"Table visualization"}),args:{visConfig:{types:["string","null"],default:'"{}"',help:""}},fn:function(){var _fn=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context,args){var visConfig,responseHandler,convertedData;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:visConfig=args.visConfig&&JSON.parse(args.visConfig);responseHandler=(0,_table_vis_request_handler.createTableVisResponseHandler)();_context.next=4;return responseHandler(context,visConfig.dimensions);case 4:convertedData=_context.sent;return _context.abrupt("return",{type:"render",as:"visualization",value:{visData:convertedData,visType:"table",visConfig:visConfig,params:{listenOnChange:true}}});case 6:case"end":return _context.stop()}}},_callee)}));function fn(_x,_x2){return _fn.apply(this,arguments)}return fn}()}};exports.createTableVisFn=createTableVisFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTableVisTypeDefinition=void 0;var _i18n=__webpack_require__(2);var _schemas=__webpack_require__(33);var _table_vis_request_handler=__webpack_require__(668);var _table_vis=_interopRequireDefault(__webpack_require__(1531));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createTableVisTypeDefinition=function createTableVisTypeDefinition(dependencies){var responseHandler=(0,_table_vis_request_handler.createTableVisResponseHandler)();return dependencies.createAngularVisualization({type:"table",name:"table",title:_i18n.i18n.translate("visTypeTable.tableVisTitle",{defaultMessage:"Data Table"}),icon:"visTable",description:_i18n.i18n.translate("visTypeTable.tableVisDescription",{defaultMessage:"Display values in a table"}),visConfig:{defaults:{perPage:10,showPartialRows:false,showMetricsAtAllLevels:false,sort:{columnIndex:null,direction:null},showTotal:false,totalFunc:"sum",percentageCol:""},template:_table_vis.default},editorConfig:{optionsTemplate:"<table-vis-params></table-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("visTypeTable.tableVisEditorConfig.schemas.metricTitle",{defaultMessage:"Metric"}),aggFilter:["!geo_centroid","!geo_bounds"],aggSettings:{top_hits:{allowStrings:true}},min:1,defaults:[{type:"count",schema:"metric"}]},{group:"buckets",name:"bucket",title:_i18n.i18n.translate("visTypeTable.tableVisEditorConfig.schemas.bucketTitle",{defaultMessage:"Split rows"}),aggFilter:["!filter"]},{group:"buckets",name:"split",title:_i18n.i18n.translate("visTypeTable.tableVisEditorConfig.schemas.splitTitle",{defaultMessage:"Split table"}),min:0,max:1,aggFilter:["!filter"]}])},responseHandler:responseHandler,hierarchicalData:function hierarchicalData(vis){return Boolean(vis.params.showPartialRows||vis.params.showMetricsAtAllLevels)}})};exports.createTableVisTypeDefinition=createTableVisTypeDefinition},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div ng-controller="KbnTableVisController" class="table-vis">\n  <div ng-if="!hasSomeRows && hasSomeRows !== null" class="visError">\n    <div class="euiText euiText--extraSmall euiTextColor euiTextColor--subdued">\n      <icon type="\'visualizeApp\'" size="\'m\'" color="\'subdued\'"></icon>\n\n      <br>\n      <br>\n\n      <p\n        i18n-id="visTypeTable.vis.noResultsFoundTitle"\n        i18n-default-message="No results found">\n      </p>\n    </div>\n  </div>\n\n  <div ng-if="tableGroups" class="table-vis-container" data-test-subj="tableVis">\n    <kbn-agg-table-group\n      filter="vis.API.events.filter"\n      dimensions="dimensions"\n      group="tableGroups"\n      export-title="visState.title"\n      per-page="visState.params.perPage"\n      sort="sort"\n      percentage-col="visState.params.percentageCol"\n      show-total="visState.params.showTotal"\n      total-func="visState.params.totalFunc">\n    </kbn-agg-table-group>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _legacy_dependencies_plugin=__webpack_require__(1533);Object.keys(_legacy_dependencies_plugin).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _legacy_dependencies_plugin[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LegacyDependenciesPlugin=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _vis_factory=__webpack_require__(45);var _table_vis_legacy_module=__webpack_require__(1534);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var LegacyDependenciesPlugin=function(){function LegacyDependenciesPlugin(){_classCallCheck(this,LegacyDependenciesPlugin)}_createClass(LegacyDependenciesPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var $injector,Private;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:(0,_table_vis_legacy_module.initTableVisLegacyModule)();_context.next=3;return _chrome.default.dangerouslyGetActiveInjector();case 3:$injector=_context.sent;Private=$injector.get("Private");return _context.abrupt("return",{createAngularVisualization:(0,_vis_factory.VisFactoryProvider)(Private).createAngularVisualization});case 6:case"end":return _context.stop()}}},_callee)}));function setup(){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){}}]);return LegacyDependenciesPlugin}();exports.LegacyDependenciesPlugin=LegacyDependenciesPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initTableVisLegacyModule=void 0;var _lodash=__webpack_require__(1);var _modules=__webpack_require__(6);__webpack_require__(1564);__webpack_require__(669);var _table_vis_controller=__webpack_require__(1537);var _table_vis_params=__webpack_require__(1538);var _agg_table=__webpack_require__(1540);var _agg_table_group=__webpack_require__(1542);var _rows=__webpack_require__(1544);var _paginated_table=__webpack_require__(1546);var initTableVisLegacyModule=(0,_lodash.once)(function(){_modules.uiModules.get("kibana/table_vis",["kibana","RecursionHelper"]).controller("KbnTableVisController",_table_vis_controller.TableVisController).directive("tableVisParams",_table_vis_params.TableVisParams).directive("kbnAggTable",_agg_table.KbnAggTable).directive("kbnAggTableGroup",_agg_table_group.KbnAggTableGroup).directive("kbnRows",_rows.KbnRows).directive("paginatedTable",_paginated_table.PaginatedTable)});exports.initTableVisLegacyModule=initTableVisLegacyModule},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(800)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<button\n  class="kuiLink"\n  ng-if="linkToTop"\n  ng-click="paginate.goToTop()"\n  data-test-subj="paginateControlsLinkToTop"\n  i18n-id="common.ui.paginateControls.scrollTopButtonLabel"\n  i18n-default-message="Scroll to top"\n></button>\n\n<div\n  class="pagination-other-pages"\n  data-test-subj="paginationControls"\n>\n  <ul class="pagination-other-pages-list pagination-sm" ng-if="page.count > 1">\n    <li ng-style="{\'visibility\':\'hidden\'}" ng-if="page.first">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.prev)"\n      >\n        <span class="euiButtonEmpty__content">«</span>\n      </button>\n    </li>\n    <li ng-style="{\'visibility\':\'visible\'}" ng-if="!page.first">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.prev)"\n      >\n        <span class="euiButtonEmpty__content">«</span>\n      </button>\n    </li>\n\n    <li ng-if="!otherPages.containsFirst">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(1)"\n      >\n        <span class="euiButtonEmpty__content">1</span>\n      </button>\n      ...\n    </li>\n\n    <li\n      ng-repeat="other in otherPages"\n      ng-class="{ active: other.number === page.number }"\n    >\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-class="{ \'euiPaginationButton-isActive\': other.number === page.number }"\n        ng-click="paginate.goToPage(other)"\n      >\n        <span class="euiButtonEmpty__content">{{other.number}}</span>\n      </button>\n    </li>\n\n    <li ng-if="!otherPages.containsLast">\n      ...\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.count)"\n      >\n        <span class="euiButtonEmpty__content">{{page.count}}</span>\n      </button>\n    </li>\n\n    <li ng-style="{\'visibility\':\'hidden\'}" ng-if="page.last">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        data-test-subj="paginateNext"\n        ng-click="paginate.goToPage(page.next)"\n      >\n        <span class="euiButtonEmpty__content">»</span>\n      </button>\n    </li>\n    <li ng-style="{\'visibility\':\'visible\'}" ng-if="!page.last">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        data-test-subj="paginateNext"\n        ng-click="paginate.goToPage(page.next)"\n      >\n        <span class="euiButtonEmpty__content">»</span>\n      </button>\n    </li>\n  </ul>\n</div>\n\n<form class="form-inline pagination-size" ng-if="showSelector">\n  <div class="form-group">\n    <label\n      i18n-id="common.ui.paginateControls.pageSizeLabel"\n      i18n-default-message="Page Size"\n    ></label>\n    <select\n      ng-model="paginate.perPage"\n      ng-options="opt.value as opt.title for opt in paginate.sizeOptions"\n      data-test-subj="paginateControlsPageSizeSelect"\n    ></select>\n  </div>\n</form>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TableVisController=TableVisController;var _lodash=__webpack_require__(1);function TableVisController($scope){var uiStateSort=$scope.uiState?$scope.uiState.get("vis.params.sort"):{};(0,_lodash.assign)($scope.visParams.sort,uiStateSort);$scope.sort=$scope.visParams.sort;$scope.$watchCollection("sort",function(newSort){$scope.uiState.set("vis.params.sort",newSort)});$scope.$watch("renderComplete",function(){var tableGroups=$scope.tableGroups=null;var hasSomeRows=$scope.hasSomeRows=null;if($scope.esResponse){tableGroups=$scope.esResponse;hasSomeRows=tableGroups.tables.some(function haveRows(table){if(table.tables)return table.tables.some(haveRows);return table.rows.length>0})}$scope.hasSomeRows=hasSomeRows;if(hasSomeRows){$scope.dimensions=$scope.visParams.dimensions;$scope.tableGroups=tableGroups}$scope.renderComplete()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TableVisParams=TableVisParams;exports.isNumeric=isNumeric;var _lodash=_interopRequireDefault(__webpack_require__(1));var _get_columns=__webpack_require__(415);var _table_vis_params=_interopRequireDefault(__webpack_require__(1539));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function TableVisParams(){return{restrict:"E",template:_table_vis_params.default,link:function link($scope){var noCol={value:"",name:_i18n.i18n.translate("visTypeTable.params.defaultPercetangeCol",{defaultMessage:"Don’t show"})};$scope.totalAggregations=["sum","avg","min","max","count"];$scope.percentageColumns=[noCol];$scope.$watchMulti(["[]editorState.aggs","editorState.params.percentageCol","=editorState.params.dimensions.buckets","=editorState.params.dimensions.metrics","vis.dirty"],function(){var _$scope$editorState=$scope.editorState,aggs=_$scope$editorState.aggs,params=_$scope$editorState.params;$scope.percentageColumns=[noCol].concat(_toConsumableArray((0,_get_columns.tabifyGetColumns)(aggs.getResponseAggs(),true).filter(function(col){return isNumeric(_lodash.default.get(col,"aggConfig.type.name"),params.dimensions)}).map(function(col){return{value:col.name,name:col.name}})));if(!_lodash.default.find($scope.percentageColumns,{value:params.percentageCol})){params.percentageCol=$scope.percentageColumns[0].value}},true);$scope.$watchMulti(["editorState.params.showPartialRows","editorState.params.showMetricsAtAllLevels"],function(){if(!$scope.vis)return;var params=$scope.editorState.params;$scope.metricsAtAllLevels=params.showPartialRows||params.showMetricsAtAllLevels})}}}function isNumeric(type){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$buckets=_ref.buckets,buckets=_ref$buckets===void 0?[]:_ref$buckets,_ref$metrics=_ref.metrics,metrics=_ref$metrics===void 0?[]:_ref$metrics;var dimension=buckets.find(function(_ref2){var aggType=_ref2.aggType;return aggType===type})||metrics.find(function(_ref3){var aggType=_ref3.aggType;return aggType===type});var formatType=_lodash.default.get(dimension,"format.id")||_lodash.default.get(dimension,"format.params.id");return formatType==="number"}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section">\n  <div class="visEditorSidebar__sectionTitle">\n    <div\n      i18n-id="visTypeTable.params.showMetricsLabel.optionsTitle"\n      i18n-default-message="Options"\n    ></div>\n  </div>\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="datatableVisualizationPerPage"\n      i18n-id="visTypeTable.params.perPageLabel"\n      i18n-default-message="Per Page"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input\n        class="kuiInput visEditorSidebar__input"\n        id="datatableVisualizationPerPage"\n        type="number"\n        ng-model="editorState.params.perPage"\n      />\n    </div>\n  </div>\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="showMetricsAtAllLevelsCheckbox"\n      i18n-id="visTypeTable.params.showMetricsLabel"\n      i18n-default-message="Show metrics for every bucket/level"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input\n        class="kuiCheckBox"\n        id="showMetricsAtAllLevelsCheckbox"\n        type="checkbox"\n        ng-model="editorState.params.showMetricsAtAllLevels"\n        data-test-subj="showMetricsAtAllLevels"\n      />\n    </div>\n  </div>\n  <div class="visEditorSidebar__formRow">\n    <div class="visEditorSidebar__formLabel">\n      <label\n        for="showPartialRowsCheckbox"\n        i18n-id="visTypeTable.params.showPartialRowsLabel"\n        i18n-default-message="Show partial rows"\n      >\n      </label>\n      <icon-tip\n        content="::\'visTypeTable.params.showPartialRowsTip\' | i18n: {\n          defaultMessage: \'Show rows that have partial data. This will still calculate metrics for every bucket/level, even if they are not displayed.\'\n        }"\n      ></icon-tip>\n    </div>\n    <div class="visEditorSidebar__formControl">\n      <input\n        class="kuiCheckBox"\n        id="showPartialRowsCheckbox"\n        type="checkbox"\n        ng-model="editorState.params.showPartialRows"\n        data-test-subj="showPartialRows"\n      />\n    </div>\n  </div>\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="showTotalCheckbox"\n      i18n-id="visTypeTable.params.showTotalLabel"\n      i18n-default-message="Show total"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input\n        class="kuiCheckBox"\n        id="showTotalCheckbox"\n        type="checkbox"\n        ng-model="editorState.params.showTotal"\n      />\n    </div>\n  </div>\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="datatableVisualizationTotalFunction"\n      i18n-id="visTypeTable.params.totalFunctionLabel"\n      i18n-default-message="Total function"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <select\n        id="datatableVisualizationTotalFunction"\n        ng-disabled="!editorState.params.showTotal"\n        class="kuiSelect visEditorSidebar__select"\n        ng-model="editorState.params.totalFunc"\n        ng-options="x for x in totalAggregations"\n      ></select>\n    </div>\n  </div>\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="datatableVisualizationPercentageCol"\n      i18n-id="visTypeTable.params.PercentageColLabel"\n      i18n-default-message="Percentage column"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <select\n        id="datatableVisualizationPercentageCol"\n        data-test-subj="percentageCol"\n        class="kuiSelect visEditorSidebar__select"\n        ng-model="editorState.params.percentageCol"\n        ng-options="col.value as col.name for col in percentageColumns"\n      ></select>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KbnAggTable=KbnAggTable;var _lodash=_interopRequireDefault(__webpack_require__(1));var _agg_table=_interopRequireDefault(__webpack_require__(1541));var _utilities=__webpack_require__(41);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function KbnAggTable(config,RecursionHelper){return{restrict:"E",template:_agg_table.default,scope:{table:"=",dimensions:"=",perPage:"=?",sort:"=?",exportTitle:"=?",showTotal:"=",totalFunc:"=",percentageCol:"=",filter:"="},controllerAs:"aggTable",compile:function compile($el){return RecursionHelper.compile($el)},controller:function controller($scope){var self=this;self._saveAs=__webpack_require__(435).saveAs;self.csv={separator:config.get("csv:separator"),quoteValues:config.get("csv:quoteValues")};self.exportAsCsv=function(formatted){var csv=new Blob([self.toCsv(formatted)],{type:"text/plain;charset=utf-8"});self._saveAs(csv,self.csv.filename)};self.toCsv=function(formatted){var rows=$scope.table.rows;var columns=formatted?$scope.formattedColumns:$scope.table.columns;var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val){if(!formatted&&_lodash.default.isObject(val))val=val.valueOf();val=String(val);if(self.csv.quoteValues&&nonAlphaNumRE.test(val)){val='"'+val.replace(allDoubleQuoteRE,'""')+'"'}return val}var csvRows=rows.map(function(row){return Object.entries(row).map(function(_ref){var _ref2=_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];return escape(formatted?columns.find(function(c){return c.id===k}).formatter.convert(v):v)})});csvRows.unshift(columns.map(function(col){return escape(formatted?col.title:col.name)}));return csvRows.map(function(row){return row.join(self.csv.separator)+"\r\n"}).join("")};$scope.$watchMulti(["table","exportTitle","percentageCol","totalFunc","=scope.dimensions"],function(){var table=$scope.table,exportTitle=$scope.exportTitle,percentageCol=$scope.percentageCol;var showPercentage=percentageCol!=="";if(!table){$scope.rows=null;$scope.formattedColumns=null;return}self.csv.filename=(exportTitle||table.title||"table")+".csv";$scope.rows=table.rows;$scope.formattedColumns=[];if(typeof $scope.dimensions==="undefined")return;var _$scope$dimensions=$scope.dimensions,buckets=_$scope$dimensions.buckets,metrics=_$scope$dimensions.metrics;$scope.formattedColumns=table.columns.map(function(col,i){var isBucket=buckets.find(function(bucket){return bucket.accessor===i});var dimension=isBucket||metrics.find(function(metric){return metric.accessor===i});if(!dimension)return;var formatter=(0,_utilities.getFormat)(dimension.format);var formattedColumn={id:col.id,title:col.name,formatter:formatter,filterable:!!isBucket};var last=i===table.columns.length-1;if(last||!isBucket){formattedColumn.class="visualize-table-right"}var isDate=_lodash.default.get(dimension,"format.id")==="date"||_lodash.default.get(dimension,"format.params.id")==="date";var isNumeric=_lodash.default.get(dimension,"format.id")==="number"||_lodash.default.get(dimension,"format.params.id")==="number";var totalFunc=$scope.totalFunc;if(typeof totalFunc==="undefined"&&showPercentage){totalFunc="sum"}if(isNumeric||isDate||totalFunc==="count"){var sum=function sum(tableRows){return _lodash.default.reduce(tableRows,function(prev,curr){if(curr[col.id]===undefined)return prev;return prev+curr[col.id]},0)};formattedColumn.sumTotal=sum(table.rows);switch(totalFunc){case"sum":{if(!isDate){var total=formattedColumn.sumTotal;formattedColumn.formattedTotal=formatter.convert(total);formattedColumn.total=formattedColumn.sumTotal}break}case"avg":{if(!isDate){var _total=sum(table.rows)/table.rows.length;formattedColumn.formattedTotal=formatter.convert(_total);formattedColumn.total=_total}break}case"min":{var _total2=_lodash.default.chain(table.rows).map(col.id).min().value();formattedColumn.formattedTotal=formatter.convert(_total2);formattedColumn.total=_total2;break}case"max":{var _total3=_lodash.default.chain(table.rows).map(col.id).max().value();formattedColumn.formattedTotal=formatter.convert(_total3);formattedColumn.total=_total3;break}case"count":{var _total4=table.rows.length;formattedColumn.formattedTotal=_total4;formattedColumn.total=_total4;break}default:break}}return formattedColumn}).filter(function(column){return column});if(showPercentage){var insertAtIndex=_lodash.default.findIndex($scope.formattedColumns,{title:percentageCol});if(insertAtIndex<0)return;var _addPercentageCol=addPercentageCol($scope.formattedColumns,percentageCol,table.rows,insertAtIndex),cols=_addPercentageCol.cols,rows=_addPercentageCol.rows;$scope.rows=rows;$scope.formattedColumns=cols}})}}}function addPercentageCol(columns,title,rows,insertAtIndex){var _columns$insertAtInde=columns[insertAtIndex],id=_columns$insertAtInde.id,sumTotal=_columns$insertAtInde.sumTotal;var newId="".concat(id,"-percents");var formatter=(0,_utilities.getFormat)({id:"percent"});var i18nTitle=_i18n.i18n.translate("visTypeTable.params.percentageTableColumnName",{defaultMessage:"{title} percentages",values:{title:title}});var newCols=insert(columns,insertAtIndex,{title:i18nTitle,id:newId,formatter:formatter});var newRows=rows.map(function(row){return _objectSpread(_defineProperty({},newId,formatter.convert(row[id]/sumTotal/100)),row)});return{cols:newCols,rows:newRows}}function insert(arr,index){var newArray=_toConsumableArray(arr);for(var _len=arguments.length,items=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){items[_key-2]=arguments[_key]}newArray.splice.apply(newArray,[index+1,0].concat(items));return newArray}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<paginated-table\n  ng-if="rows.length"\n  table="table"\n  rows="rows"\n  columns="formattedColumns"\n  per-page="perPage"\n  sort="sort"\n  show-total="showTotal"\n  percentage-col="percentageCol"\n  filter="filter"\n  totalFunc="totalFunc">\n\n  <div class="kbnAggTable__controls">\n    <small\n      i18n-id="visTypeTable.aggTable.exportLabel"\n      i18n-default-message="Export:"\n    ></small>&nbsp;&nbsp;\n    <a class="small" ng-click="aggTable.exportAsCsv(false)">\n      <span\n        i18n-id="visTypeTable.aggTable.rawLabel"\n        i18n-default-message="Raw"\n       ></span>\n       <i aria-hidden="true" class="fa fa-download"></i>\n    </a>&nbsp;&nbsp;&nbsp;\n    <a class="small" ng-click="aggTable.exportAsCsv(true)">\n      <span\n        i18n-id="visTypeTable.aggTable.formattedLabel"\n        i18n-default-message="Formatted"\n       ></span>\n       <i aria-hidden="true" class="fa fa-download"></i>\n    </a>\n    <paginate-controls></paginate-controls>\n  </div>\n</paginated-table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KbnAggTableGroup=KbnAggTableGroup;var _agg_table_group=_interopRequireDefault(__webpack_require__(1543));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function KbnAggTableGroup(RecursionHelper){return{restrict:"E",template:_agg_table_group.default,scope:{group:"=",dimensions:"=",perPage:"=?",sort:"=?",exportTitle:"=?",showTotal:"=",totalFunc:"=",percentageCol:"=",filter:"="},compile:function compile($el){return RecursionHelper.compile($el,{post:function post($scope){$scope.$watch("group",function(group){$scope.rows=$scope.columns=false;if(!group||!group.tables.length)return;var childLayout=group.direction==="row"?"rows":"columns";$scope[childLayout]=group.tables})}})}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<table ng-if="rows" class="table kbnAggTable__group" ng-repeat="table in rows">\n  <thead>\n    <tr>\n      <th ng-if="table.tables" scope="col">\n        <span class="kbnAggTable__groupHeader">{{ table.title }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>\n        <kbn-agg-table-group\n          ng-if="table.tables"\n          group="table"\n          filter="filter"\n          dimensions="dimensions"\n          per-page="perPage"\n          sort="sort"\n          percentage-col="percentageCol"\n          show-total="showTotal"\n          total-func="totalFunc"></kbn-agg-table-group>\n        <kbn-agg-table\n          ng-if="table.rows"\n          filter="filter"\n          table="table"\n          dimensions="dimensions"\n          export-title="exportTitle"\n          per-page="perPage"\n          sort="sort"\n          percentage-col="percentageCol"\n          show-total="showTotal"\n          total-func="totalFunc">\n        </kbn-agg-table>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<table ng-if="columns" class="table kbnAggTable__group">\n  <thead>\n    <tr>\n      <th ng-repeat="table in columns" ng-if="table.tables" scope="col">\n        <span class="kbnAggTable__groupHeader">{{ table.title }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td ng-repeat="table in columns">\n        <kbn-agg-table-group\n          ng-if="table.tables"\n          filter="filter"\n          group="table"\n          dimensions="dimensions"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          percentage-col="percentageCol"\n          total-func="totalFunc"></kbn-agg-table-group>\n        <kbn-agg-table\n          ng-if="table.rows"\n          filter="filter"\n          table="table"\n          dimensions="dimensions"\n          export-title="exportTitle"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          percentage-col="percentageCol"\n          total-func="totalFunc">\n        </kbn-agg-table>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KbnRows=KbnRows;var _jquery=_interopRequireDefault(__webpack_require__(12));var _lodash=_interopRequireDefault(__webpack_require__(1));var _table_cell_filter=_interopRequireDefault(__webpack_require__(1545));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function KbnRows($compile){return{restrict:"A",link:function link($scope,$el,attr){function addCell($tr,contents,column,row){function createCell(){return(0,_jquery.default)(document.createElement("td"))}function createFilterableCell(value){var $template=(0,_jquery.default)(_table_cell_filter.default);$template.addClass("kbnTableCellFilter__hover");var scope=$scope.$new();scope.onFilterClick=function(event,negate){if((0,_jquery.default)(event.target).is("a")){return}$scope.filter({data:[{table:$scope.table,row:$scope.rows.findIndex(function(r){return r===row}),column:$scope.table.columns.findIndex(function(c){return c.id===column.id}),value:value}],negate:negate})};return $compile($template)(scope)}var $cell;var $cellContent;var contentsIsDefined=contents!==null&&contents!==undefined;if(column.filterable&&contentsIsDefined){$cell=createFilterableCell(contents);$cellContent=$cell.find("[data-cell-content]")}else{$cell=$cellContent=createCell()}contents=contentsIsDefined?column.formatter.convert(contents,"html"):"";if(_lodash.default.isObject(contents)){if(contents.attr){$cellContent.attr(contents.attr)}if(contents.class){$cellContent.addClass(contents.class)}if(contents.scope){$cellContent=$compile($cellContent.prepend(contents.markup))(contents.scope)}else{$cellContent.prepend(contents.markup)}if(contents.attr){$cellContent.attr(contents.attr)}}else{if(contents===""){$cellContent.prepend("&nbsp;")}else{$cellContent.prepend(contents)}}$tr.append($cell)}$scope.$watchMulti([attr.kbnRows,attr.kbnRowsMin],function(vals){var rows=vals[0];var min=vals[1];$el.empty();if(!Array.isArray(rows))rows=[];if(isFinite(min)&&rows.length<min){rows=_lodash.default.clone(rows);var emptyRow={};_lodash.default.times(min-rows.length,function(){rows.push(emptyRow)})}rows.forEach(function(row){var $tr=(0,_jquery.default)(document.createElement("tr")).appendTo($el);$scope.columns.forEach(function(column){var value=row[column.id];addCell($tr,value,column,row)})})})}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<td>\n  <div\n    data-cell-content\n    class="kbnTableCellFilter__hover"\n  >\n    <span class="kbnTableCellFilter">\n      <span\n        data-test-subj="filterForCellValue"\n        ng-click="onFilterClick($event, false)"\n        class="fa fa-search-plus"\n        tooltip="{{ ::\'visTypeTable.directives.tableCellFilter.filterForValueTooltip\' | i18n: {defaultMessage: \'Filter for value\'} }}"\n        tooltip-append-to-body="1"\n      ></span>\n\n      <span\n        ng-click="onFilterClick($event, true)"\n        class="fa fa-search-minus"\n        tooltip="{{ ::\'visTypeTable.directives.tableCellFilter.filterOutValueTooltip\' | i18n: {defaultMessage: \'Filter out value\'} }}"\n        tooltip-append-to-body="1"\n      ></span>\n    </span>\n  </div>\n</td>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PaginatedTable=PaginatedTable;var _lodash=_interopRequireDefault(__webpack_require__(1));var _paginated_table=_interopRequireDefault(__webpack_require__(1547));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PaginatedTable($filter){var orderBy=$filter("orderBy");return{restrict:"E",template:_paginated_table.default,transclude:true,scope:{table:"=",rows:"=",columns:"=",linkToTop:"=",perPage:"=?",showBlankRows:"=?",sortHandler:"=?",sort:"=?",showSelector:"=?",showTotal:"=",totalFunc:"=",filter:"=",percentageCol:"="},controllerAs:"paginatedTable",controller:function controller($scope){var self=this;self.sort={columnIndex:null,direction:null};self.sortColumn=function(colIndex){var sortDirection=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"asc";var col=$scope.columns[colIndex];if(!col)return;if(col.sortable===false)return;if(self.sort.columnIndex===colIndex){var directions={null:"asc",asc:"desc",desc:null};sortDirection=directions[self.sort.direction]}self.sort.columnIndex=colIndex;self.sort.direction=sortDirection;if($scope.sort){_lodash.default.assign($scope.sort,self.sort)}};self.rowsToShow=function(numRowsPerPage,actualNumRowsOnThisPage){if($scope.showBlankRows===false){return actualNumRowsOnThisPage}else{return numRowsPerPage}};function valueGetter(row){var col=$scope.columns[self.sort.columnIndex];var value=row[col.id];if(typeof value==="boolean")value=value?0:1;return value}if($scope.sort&&$scope.sort.columnIndex!==null){self.sortColumn($scope.sort.columnIndex,$scope.sort.direction)}function resortRows(){var newSort=$scope.sort;if(newSort&&!_lodash.default.isEqual(newSort,self.sort)){self.sortColumn(newSort.columnIndex,newSort.direction)}if(!$scope.rows||!$scope.columns){$scope.sortedRows=false;return}var sort=self.sort;if(sort.direction==null){$scope.sortedRows=$scope.rows.slice(0)}else{$scope.sortedRows=orderBy($scope.rows,valueGetter,sort.direction==="desc")}}$scope.$watchMulti(["rows","columns","[]sort","[]paginatedTable.sort"],resortRows)}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<paginate\n  ng-if="sortedRows.length"\n  list="sortedRows"\n  per-page-prop="perPage"\n  class="kbnAggTable">\n  <div class="kbnAggTable__paginated">\n    <table class="table table-condensed">\n      <thead data-test-subj="paginated-table-header">\n        <tr>\n          <th\n            scope="col"\n            ng-repeat="col in columns"\n            ng-click="paginatedTable.sortColumn($index)"\n            kbn-accessible-click\n            tabindex="0"\n            class="{{ col.class }}">\n            <span ng-bind="::col.title"></span>\n\n            <icon-tip\n              ng-if="col.info"\n              content="\'{{ col.info }}\'"\n            ></icon-tip>\n\n            <i\n              ng-if="col.sortable !== false"\n              class="fa"\n              ng-class="{\n                \'fa-sort-asc\': paginatedTable.sort.columnIndex === $index && paginatedTable.sort.direction === \'asc\',\n                \'fa-sort-desc\': paginatedTable.sort.columnIndex === $index && paginatedTable.sort.direction === \'desc\',\n                \'fa-sort\': paginatedTable.sort.columnIndex !== $index || paginatedTable.sort.direction === null\n              }">\n            </i>\n          </th>\n        </tr>\n      </thead>\n      <tbody\n        data-test-subj="paginated-table-body"\n        kbn-rows="page"\n        kbn-rows-min="paginatedTable.rowsToShow(perPage, page.length)"\n      >\n      </tbody>\n      <tfoot ng-if="showTotal">\n        <tr>\n          <th scope="col" ng-repeat="col in columns" class="numeric-value">\n            {{ col.formattedTotal }}\n          </th>\n        </tr>\n      </tfoot>\n    </table>\n  </div>\n\n  \x3c!-- auto-inserted by the paginate directive... --\x3e\n  \x3c!-- <paginate-controls></paginate-controls> --\x3e\n  <div class="pagination-container" ng-transclude></div>\n</paginate>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(8);var _public=__webpack_require__(30);var _=__webpack_require__(1549);var plugins={visualizations:_public.visualizations,data:_new_platform.npSetup.plugins.data};var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core,plugins);exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core);exports.start=start},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;var _plugin=__webpack_require__(1550);function plugin(initializerContext){return new _plugin.TagCloudPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TagCloudPlugin=void 0;var _tag_cloud_fn=__webpack_require__(1551);var _tag_cloud_type=__webpack_require__(1552);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TagCloudPlugin=function(){function TagCloudPlugin(initializerContext){_classCallCheck(this,TagCloudPlugin);_defineProperty(this,"initializerContext",void 0);this.initializerContext=initializerContext}_createClass(TagCloudPlugin,[{key:"setup",value:function setup(core,_ref){var data=_ref.data,visualizations=_ref.visualizations;data.expressions.registerFunction(_tag_cloud_fn.createTagCloudFn);visualizations.types.VisTypesRegistryProvider.register(_tag_cloud_type.createTagCloudTypeDefinition)}},{key:"start",value:function start(core){}}]);return TagCloudPlugin}();exports.TagCloudPlugin=TagCloudPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTagCloudFn=void 0;var _i18n=__webpack_require__(2);var name="tagcloud";var createTagCloudFn=function createTagCloudFn(){return{name:name,type:"render",context:{types:["kibana_datatable"]},help:_i18n.i18n.translate("visTypeTagCloud.function.help",{defaultMessage:"Tagcloud visualization"}),args:{scale:{types:["string"],default:"linear",options:["linear","log","square root"],help:_i18n.i18n.translate("visTypeTagCloud.function.scale.help",{defaultMessage:"Scale to determine font size of a word"})},orientation:{types:["string"],default:"single",options:["single","right angled","multiple"],help:_i18n.i18n.translate("visTypeTagCloud.function.orientation.help",{defaultMessage:"Orientation of words inside tagcloud"})},minFontSize:{types:["number"],default:18,help:""},maxFontSize:{types:["number"],default:72,help:""},showLabel:{types:["boolean"],default:true,help:""},metric:{types:["vis_dimension"],help:_i18n.i18n.translate("visTypeTagCloud.function.metric.help",{defaultMessage:"metric dimension configuration"}),required:true},bucket:{types:["vis_dimension"],help:_i18n.i18n.translate("visTypeTagCloud.function.bucket.help",{defaultMessage:"bucket dimension configuration"})}},fn:function fn(context,args){var visConfig={scale:args.scale,orientation:args.orientation,minFontSize:args.minFontSize,maxFontSize:args.maxFontSize,showLabel:args.showLabel,metric:args.metric};if(args.bucket!==undefined){visConfig.bucket=args.bucket}return{type:"render",as:"visualization",value:{visData:context,visType:name,visConfig:visConfig,params:{listenOnChange:true}}}}}};exports.createTagCloudFn=createTagCloudFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTagCloudTypeDefinition=void 0;var _i18n=__webpack_require__(2);var _update_status=__webpack_require__(83);var _schemas=__webpack_require__(33);var _tag_cloud_options=__webpack_require__(1553);var _public=__webpack_require__(30);var _tag_cloud_visualization=__webpack_require__(1556);var createTagCloudTypeDefinition=function createTagCloudTypeDefinition(){return _public.visFactory.createBaseVisualization({name:"tagcloud",title:_i18n.i18n.translate("visTypeTagCloud.vis.tagCloudTitle",{defaultMessage:"Tag Cloud"}),icon:"visTagCloud",description:_i18n.i18n.translate("visTypeTagCloud.vis.tagCloudDescription",{defaultMessage:"A group of words, sized according to their importance"}),visConfig:{defaults:{scale:"linear",orientation:"single",minFontSize:18,maxFontSize:72,showLabel:true}},requiresUpdateStatus:[_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.DATA],visualization:_tag_cloud_visualization.TagCloudVisualization,editorConfig:{collections:{scales:[{text:_i18n.i18n.translate("visTypeTagCloud.vis.editorConfig.scales.linearText",{defaultMessage:"Linear"}),value:"linear"},{text:_i18n.i18n.translate("visTypeTagCloud.vis.editorConfig.scales.logText",{defaultMessage:"Log"}),value:"log"},{text:_i18n.i18n.translate("visTypeTagCloud.vis.editorConfig.scales.squareRootText",{defaultMessage:"Square root"}),value:"square root"}],orientations:[{text:_i18n.i18n.translate("visTypeTagCloud.vis.editorConfig.orientations.singleText",{defaultMessage:"Single"}),value:"single"},{text:_i18n.i18n.translate("visTypeTagCloud.vis.editorConfig.orientations.rightAngledText",{defaultMessage:"Right angled"}),value:"right angled"},{text:_i18n.i18n.translate("visTypeTagCloud.vis.editorConfig.orientations.multipleText",{defaultMessage:"Multiple"}),value:"multiple"}]},optionsTemplate:_tag_cloud_options.TagCloudOptions,schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("visTypeTagCloud.vis.schemas.metricTitle",{defaultMessage:"Tag size"}),min:1,max:1,aggFilter:["!std_dev","!percentiles","!percentile_ranks","!derivative","!geo_bounds","!geo_centroid"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("visTypeTagCloud.vis.schemas.segmentTitle",{defaultMessage:"Tags"}),min:1,max:1,aggFilter:["terms","significant_terms"]}])},useCustomNoDataScreen:true})};exports.createTagCloudTypeDefinition=createTagCloudTypeDefinition},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TagCloudOptions=TagCloudOptions;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);var _validated_range=__webpack_require__(670);var _components=__webpack_require__(108);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function TagCloudOptions(_ref){var stateParams=_ref.stateParams,setValue=_ref.setValue,vis=_ref.vis;var handleFontSizeChange=function handleFontSizeChange(_ref2){var _ref3=_slicedToArray(_ref2,2),minFontSize=_ref3[0],maxFontSize=_ref3[1];setValue("minFontSize",Number(minFontSize));setValue("maxFontSize",Number(maxFontSize))};var fontSizeRangeLabel=_i18n.i18n.translate("visTypeTagCloud.visParams.fontSizeLabel",{defaultMessage:"Font size range in pixels"});return _react.default.createElement(_eui.EuiPanel,{paddingSize:"s"},_react.default.createElement(_components.SelectOption,{label:_i18n.i18n.translate("visTypeTagCloud.visParams.textScaleLabel",{defaultMessage:"Text scale"}),options:vis.type.editorConfig.collections.scales,paramName:"scale",value:stateParams.scale,setValue:setValue}),_react.default.createElement(_components.SelectOption,{label:_i18n.i18n.translate("visTypeTagCloud.visParams.orientationsLabel",{defaultMessage:"Orientations"}),options:vis.type.editorConfig.collections.orientations,paramName:"orientation",value:stateParams.orientation,setValue:setValue}),_react.default.createElement(_validated_range.ValidatedDualRange,{allowEmptyRange:false,"aria-label":fontSizeRangeLabel,compressed:true,fullWidth:true,label:fontSizeRangeLabel,max:100,min:1,value:[stateParams.minFontSize,stateParams.maxFontSize],onChange:handleFontSizeChange,showInput:true}),_react.default.createElement(_components.SwitchOption,{label:_i18n.i18n.translate("visTypeTagCloud.visParams.showLabelToggleLabel",{defaultMessage:"Show label"}),paramName:"showLabel",value:stateParams.showLabel,setValue:setValue}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ValidatedDualRange=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _is_range_valid=__webpack_require__(1555);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ValidatedDualRange=function(_Component){_inherits(ValidatedDualRange,_Component);function ValidatedDualRange(){var _getPrototypeOf2;var _this;_classCallCheck(this,ValidatedDualRange);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ValidatedDualRange)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{});_defineProperty(_assertThisInitialized(_this),"_onChange",function(value){var _isRangeValid=(0,_is_range_valid.isRangeValid)(value,_this.props.min,_this.props.max,_this.props.allowEmptyRange),isValid=_isRangeValid.isValid,errorMessage=_isRangeValid.errorMessage;_this.setState({value:value,isValid:isValid,errorMessage:errorMessage});if(isValid){_this.props.onChange(value)}});return _this}_createClass(ValidatedDualRange,[{key:"render",value:function render(){var _this$props=this.props,compressed=_this$props.compressed,fullWidth=_this$props.fullWidth,label=_this$props.label,value=_this$props.value,onChange=_this$props.onChange,allowEmptyRange=_this$props.allowEmptyRange,rest=_objectWithoutProperties(_this$props,["compressed","fullWidth","label","value","onChange","allowEmptyRange"]);return _react.default.createElement(_eui.EuiFormRow,{compressed:compressed,fullWidth:fullWidth,isInvalid:!this.state.isValid,error:this.state.errorMessage?[this.state.errorMessage]:[],label:label},_react.default.createElement(_eui.EuiDualRange,_extends({compressed:compressed,fullWidth:fullWidth,value:this.state.value,onChange:this._onChange},rest)))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.value!==prevState.prevValue){var _isRangeValid2=(0,_is_range_valid.isRangeValid)(nextProps.value,nextProps.min,nextProps.max,nextProps.allowEmptyRange),isValid=_isRangeValid2.isValid,errorMessage=_isRangeValid2.errorMessage;return{value:nextProps.value,prevValue:nextProps.value,isValid:isValid,errorMessage:errorMessage}}return null}}]);return ValidatedDualRange}(_react.Component);exports.ValidatedDualRange=ValidatedDualRange;ValidatedDualRange.propTypes={allowEmptyRange:_propTypes.default.bool,fullWidth:_propTypes.default.bool,compressed:_propTypes.default.bool,label:_propTypes.default.node};ValidatedDualRange.defaultProps={allowEmptyRange:true,fullWidth:false,compressed:false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isRangeValid=isRangeValid;var _i18n=__webpack_require__(2);var LOWER_VALUE_INDEX=0;var UPPER_VALUE_INDEX=1;function isRangeValid(value,min,max,allowEmptyRange){allowEmptyRange=typeof allowEmptyRange==="boolean"?allowEmptyRange:true;var lowerValue=isNaN(value[LOWER_VALUE_INDEX])?"":value[LOWER_VALUE_INDEX];var upperValue=isNaN(value[UPPER_VALUE_INDEX])?"":value[UPPER_VALUE_INDEX];var isLowerValueValid=lowerValue.toString()!=="";var isUpperValueValid=upperValue.toString()!=="";if(isLowerValueValid){lowerValue=parseFloat(lowerValue)}if(isUpperValueValid){upperValue=parseFloat(upperValue)}var isValid=true;var errorMessage="";var bothMustBeSetErrorMessage=_i18n.i18n.translate("common.ui.dualRangeControl.mustSetBothErrorMessage",{defaultMessage:"Both lower and upper values must be set"});if(!allowEmptyRange&&(!isLowerValueValid||!isUpperValueValid)){isValid=false;errorMessage=bothMustBeSetErrorMessage}else if(!isLowerValueValid&&isUpperValueValid||isLowerValueValid&&!isUpperValueValid){isValid=false;errorMessage=bothMustBeSetErrorMessage}else if(isLowerValueValid&&lowerValue<min||isUpperValueValid&&upperValue>max){isValid=false;errorMessage=_i18n.i18n.translate("common.ui.dualRangeControl.outsideOfRangeErrorMessage",{defaultMessage:"Values must be on or between {min} and {max}",values:{min:min,max:max}})}else if(isLowerValueValid&&isUpperValueValid&&upperValue<lowerValue){isValid=false;errorMessage=_i18n.i18n.translate("common.ui.dualRangeControl.upperValidErrorMessage",{defaultMessage:"Upper value must be greater or equal to lower value"})}return{isValid:isValid,errorMessage:errorMessage}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TagCloudVisualization=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var Rx=_interopRequireWildcard(__webpack_require__(16));var _operators=__webpack_require__(27);var _reactDom=__webpack_require__(13);var _utilities=__webpack_require__(41);var _i18n=__webpack_require__(11);var _label=__webpack_require__(1557);var _tag_cloud=__webpack_require__(1558);var _feedback_message=__webpack_require__(1560);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var MAX_TAG_COUNT=200;var TagCloudVisualization=function(){function TagCloudVisualization(node,vis){var _this=this;_classCallCheck(this,TagCloudVisualization);this._containerNode=node;var cloudRelativeContainer=document.createElement("div");cloudRelativeContainer.classList.add("tgcVis");cloudRelativeContainer.setAttribute("style","position: relative");var cloudContainer=document.createElement("div");cloudContainer.classList.add("tgcVis");cloudContainer.setAttribute("data-test-subj","tagCloudVisualization");this._containerNode.classList.add("visChart--vertical");cloudRelativeContainer.appendChild(cloudContainer);this._containerNode.appendChild(cloudRelativeContainer);this._vis=vis;this._truncated=false;this._tagCloud=new _tag_cloud.TagCloud(cloudContainer);this._tagCloud.on("select",function(event){if(!_this._visParams.bucket){return}_this._vis.API.events.filter({table:event.meta.data,column:0,row:event.meta.rowIndex})});this._renderComplete$=Rx.fromEvent(this._tagCloud,"renderComplete");this._feedbackNode=document.createElement("div");this._containerNode.appendChild(this._feedbackNode);this._feedbackMessage=_react.default.createRef();(0,_reactDom.render)(_react.default.createElement(_i18n.I18nContext,null,_react.default.createElement(_feedback_message.FeedbackMessage,{ref:this._feedbackMessage})),this._feedbackNode);this._labelNode=document.createElement("div");this._containerNode.appendChild(this._labelNode);this._label=_react.default.createRef();(0,_reactDom.render)(_react.default.createElement(_label.Label,{ref:this._label}),this._labelNode)}_createClass(TagCloudVisualization,[{key:"render",value:function(){var _render=_asyncToGenerator(regeneratorRuntime.mark(function _callee(data,visParams,status){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(status.resize||status.data||status.params){_context.next=2;break}return _context.abrupt("return");case 2:if(status.params||status.data){this._updateParams(visParams);this._updateData(data)}if(status.resize){this._resize()}_context.next=6;return this._renderComplete$.pipe((0,_operators.take)(1)).toPromise();case 6:if(!(data.columns.length!==2)){_context.next=9;break}this._feedbackMessage.current.setState({shouldShowTruncate:false,shouldShowIncomplete:false});return _context.abrupt("return");case 9:this._label.current.setState({label:"".concat(data.columns[0].name," - ").concat(data.columns[1].name),shouldShowLabel:visParams.showLabel});this._feedbackMessage.current.setState({shouldShowTruncate:this._truncated,shouldShowIncomplete:this._tagCloud.getStatus()===_tag_cloud.TagCloud.STATUS.INCOMPLETE});case 11:case"end":return _context.stop()}}},_callee,this)}));function render(_x,_x2,_x3){return _render.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){this._tagCloud.destroy();(0,_reactDom.unmountComponentAtNode)(this._feedbackNode);(0,_reactDom.unmountComponentAtNode)(this._labelNode)}},{key:"_updateData",value:function _updateData(data){if(!data||!data.rows.length){this._tagCloud.setData([]);return}var bucket=this._visParams.bucket;var metric=this._visParams.metric;var bucketFormatter=bucket?(0,_utilities.getFormat)(bucket.format):null;var tagColumn=bucket?data.columns[bucket.accessor].id:-1;var metricColumn=data.columns[metric.accessor].id;var tags=data.rows.map(function(row,rowIndex){var tag=row[tagColumn]===undefined?"all":row[tagColumn];var metric=row[metricColumn];return{displayText:bucketFormatter?bucketFormatter.convert(tag,"text"):tag,rawText:tag,value:metric,meta:{data:data,rowIndex:rowIndex}}});if(tags.length>MAX_TAG_COUNT){tags.length=MAX_TAG_COUNT;this._truncated=true}else{this._truncated=false}this._tagCloud.setData(tags)}},{key:"_updateParams",value:function _updateParams(visParams){this._visParams=visParams;this._tagCloud.setOptions(visParams)}},{key:"_resize",value:function _resize(){this._tagCloud.resize()}}]);return TagCloudVisualization}();exports.TagCloudVisualization=TagCloudVisualization},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Label=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Label=function(_Component){_inherits(Label,_Component);function Label(){var _this;_classCallCheck(this,Label);_this=_possibleConstructorReturn(this,_getPrototypeOf(Label).call(this));_this.state={label:"",shouldShowLabel:true};return _this}_createClass(Label,[{key:"render",value:function render(){return _react.default.createElement("div",{className:"tgcVisLabel",style:{display:this.state.shouldShowLabel?"block":"none"}},this.state.label)}}]);return Label}(_react.Component);exports.Label=Label},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TagCloud=void 0;var _d=_interopRequireDefault(__webpack_require__(15));var _d3Cloud=_interopRequireDefault(__webpack_require__(1566));var _seed_colors=__webpack_require__(622);var _events=__webpack_require__(48);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ORIENTATIONS={single:function single(){return 0},"right angled":function rightAngled(tag){return hashWithinRange(tag.text,2)*90},multiple:function multiple(tag){return hashWithinRange(tag.text,12)*15-90}};var D3_SCALING_FUNCTIONS={linear:function linear(){return _d.default.scale.linear()},log:function log(){return _d.default.scale.log()},"square root":function squareRoot(){return _d.default.scale.sqrt()}};var TagCloud=function(_EventEmitter){_inherits(TagCloud,_EventEmitter);function TagCloud(domNode){var _this;_classCallCheck(this,TagCloud);_this=_possibleConstructorReturn(this,_getPrototypeOf(TagCloud).call(this));_this._element=domNode;_this._d3SvgContainer=_d.default.select(_this._element).append("svg");_this._svgGroup=_this._d3SvgContainer.append("g");_this._size=[1,1];_this.resize();_this._fontFamily="Open Sans, sans-serif";_this._fontStyle="normal";_this._fontWeight="normal";_this._spiral="archimedean";_this._timeInterval=1e3;_this._padding=5;_this._orientation="single";_this._minFontSize=10;_this._maxFontSize=36;_this._textScale="linear";_this._optionsAsString=null;_this._words=null;_this._setTimeoutId=null;_this._pendingJob=null;_this._layoutIsUpdating=null;_this._allInViewBox=false;_this._DOMisUpdating=false;return _this}_createClass(TagCloud,[{key:"setOptions",value:function setOptions(options){if(JSON.stringify(options)===this._optionsAsString){return}this._optionsAsString=JSON.stringify(options);this._orientation=options.orientation;this._minFontSize=Math.min(options.minFontSize,options.maxFontSize);this._maxFontSize=Math.max(options.minFontSize,options.maxFontSize);this._textScale=options.scale;this._invalidate(false)}},{key:"resize",value:function resize(){var newWidth=this._element.offsetWidth;var newHeight=this._element.offsetHeight;if(newWidth===this._size[0]&&newHeight===this._size[1]){return}var wasInside=this._size[0]>=this._cloudWidth&&this._size[1]>=this._cloudHeight;var willBeInside=this._cloudWidth<=newWidth&&this._cloudHeight<=newHeight;this._size[0]=newWidth;this._size[1]=newHeight;if(wasInside&&willBeInside&&this._allInViewBox){this._invalidate(true)}else{this._invalidate(false)}}},{key:"setData",value:function setData(data){this._words=data;this._invalidate(false)}},{key:"destroy",value:function destroy(){clearTimeout(this._setTimeoutId);this._element.innerHTML=""}},{key:"getStatus",value:function getStatus(){return this._allInViewBox?TagCloud.STATUS.COMPLETE:TagCloud.STATUS.INCOMPLETE}},{key:"_updateContainerSize",value:function _updateContainerSize(){this._d3SvgContainer.attr("width",this._size[0]);this._d3SvgContainer.attr("height",this._size[1]);this._svgGroup.attr("width",this._size[0]);this._svgGroup.attr("height",this._size[1])}},{key:"_isJobRunning",value:function _isJobRunning(){return this._setTimeoutId||this._layoutIsUpdating||this._DOMisUpdating}},{key:"_processPendingJob",value:function(){var _processPendingJob2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var job,cloudBBox;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this._pendingJob){_context.next=2;break}return _context.abrupt("return");case 2:if(!this._isJobRunning()){_context.next=4;break}return _context.abrupt("return");case 4:this._completedJob=null;_context.next=7;return this._pickPendingJob();case 7:job=_context.sent;if(!job.words.length){_context.next=20;break}if(!job.refreshLayout){_context.next=12;break}_context.next=12;return this._updateLayout(job);case 12:_context.next=14;return this._updateDOM(job);case 14:cloudBBox=this._svgGroup[0][0].getBBox();this._cloudWidth=cloudBBox.width;this._cloudHeight=cloudBBox.height;this._allInViewBox=cloudBBox.x>=0&&cloudBBox.y>=0&&cloudBBox.x+cloudBBox.width<=this._element.offsetWidth&&cloudBBox.y+cloudBBox.height<=this._element.offsetHeight;_context.next=21;break;case 20:this._emptyDOM(job);case 21:if(this._pendingJob){this._processPendingJob()}else{this._completedJob=job;this.emit("renderComplete")}case 22:case"end":return _context.stop()}}},_callee,this)}));function _processPendingJob(){return _processPendingJob2.apply(this,arguments)}return _processPendingJob}()},{key:"_pickPendingJob",value:function(){var _pickPendingJob2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _this2=this;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return new Promise(function(resolve){_this2._setTimeoutId=setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var job;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:job=_this2._pendingJob;_this2._pendingJob=null;_this2._setTimeoutId=null;resolve(job);case 4:case"end":return _context2.stop()}}},_callee2)})),0)});case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}}},_callee3)}));function _pickPendingJob(){return _pickPendingJob2.apply(this,arguments)}return _pickPendingJob}()},{key:"_emptyDOM",value:function _emptyDOM(){this._svgGroup.selectAll("text").remove();this._cloudWidth=0;this._cloudHeight=0;this._allInViewBox=true;this._DOMisUpdating=false}},{key:"_updateDOM",value:function(){var _updateDOM2=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(job){var _this3=this;var canSkipDomUpdate,affineTransform,svgTextNodes,stage;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:canSkipDomUpdate=this._pendingJob||this._setTimeoutId;if(!canSkipDomUpdate){_context4.next=4;break}this._DOMisUpdating=false;return _context4.abrupt("return");case 4:this._DOMisUpdating=true;affineTransform=positionWord.bind(null,this._element.offsetWidth/2,this._element.offsetHeight/2);svgTextNodes=this._svgGroup.selectAll("text");stage=svgTextNodes.data(job.words,getText);_context4.next=10;return new Promise(function(resolve){var enterSelection=stage.enter();var enteringTags=enterSelection.append("text");enteringTags.style("font-size",getSizeInPixels);enteringTags.style("font-style",_this3._fontStyle);enteringTags.style("font-weight",function(){return _this3._fontWeight});enteringTags.style("font-family",function(){return _this3._fontFamily});enteringTags.style("fill",getFill);enteringTags.attr("text-anchor",function(){return"middle"});enteringTags.attr("transform",affineTransform);enteringTags.attr("data-test-subj",getDisplayText);enteringTags.text(getDisplayText);var self=_this3;enteringTags.on({click:function click(event){self.emit("select",event)},mouseover:function mouseover(){_d.default.select(this).style("cursor","pointer")},mouseout:function mouseout(){_d.default.select(this).style("cursor","default")}});var movingTags=stage.transition();movingTags.duration(600);movingTags.style("font-size",getSizeInPixels);movingTags.style("font-style",_this3._fontStyle);movingTags.style("font-weight",function(){return _this3._fontWeight});movingTags.style("font-family",function(){return _this3._fontFamily});movingTags.attr("transform",affineTransform);var exitingTags=stage.exit();var exitTransition=exitingTags.transition();exitTransition.duration(200);exitingTags.style("fill-opacity",1e-6);exitingTags.attr("font-size",1);exitingTags.remove();var exits=0;var moves=0;var resolveWhenDone=function resolveWhenDone(){if(exits===0&&moves===0){_this3._DOMisUpdating=false;resolve(true)}};exitTransition.each(function(){return exits++});exitTransition.each("end",function(){exits--;resolveWhenDone()});movingTags.each(function(){return moves++});movingTags.each("end",function(){moves--;resolveWhenDone()})});case 10:case"end":return _context4.stop()}}},_callee4,this)}));function _updateDOM(_x){return _updateDOM2.apply(this,arguments)}return _updateDOM}()},{key:"_makeTextSizeMapper",value:function _makeTextSizeMapper(){var mapSizeToFontSize=D3_SCALING_FUNCTIONS[this._textScale]();var range=this._words.length===1?[this._maxFontSize,this._maxFontSize]:[this._minFontSize,this._maxFontSize];mapSizeToFontSize.range(range);if(this._words){mapSizeToFontSize.domain(_d.default.extent(this._words,getValue))}return mapSizeToFontSize}},{key:"_makeNewJob",value:function _makeNewJob(){return{refreshLayout:true,size:this._size.slice(),words:this._words}}},{key:"_makeJobPreservingLayout",value:function _makeJobPreservingLayout(){return{refreshLayout:false,size:this._size.slice(),words:this._completedJob.words.map(function(tag){return{x:tag.x,y:tag.y,rotate:tag.rotate,size:tag.size,rawText:tag.rawText||tag.text,displayText:tag.displayText,meta:tag.meta}})}}},{key:"_invalidate",value:function _invalidate(keepLayout){if(!this._words){return}this._updateContainerSize();var canReuseLayout=keepLayout&&!this._isJobRunning()&&this._completedJob;this._pendingJob=canReuseLayout?this._makeJobPreservingLayout():this._makeNewJob();this._processPendingJob()}},{key:"_updateLayout",value:function(){var _updateLayout2=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(job){var _this4=this;var mapSizeToFontSize,tagCloudLayoutGenerator;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(job.size[0]<=0||job.size[1]<=0)){_context5.next=2;break}return _context5.abrupt("return");case 2:mapSizeToFontSize=this._makeTextSizeMapper();tagCloudLayoutGenerator=(0,_d3Cloud.default)();tagCloudLayoutGenerator.size(job.size);tagCloudLayoutGenerator.padding(this._padding);tagCloudLayoutGenerator.rotate(ORIENTATIONS[this._orientation]);tagCloudLayoutGenerator.font(this._fontFamily);tagCloudLayoutGenerator.fontStyle(this._fontStyle);tagCloudLayoutGenerator.fontWeight(this._fontWeight);tagCloudLayoutGenerator.fontSize(function(tag){return mapSizeToFontSize(tag.value)});tagCloudLayoutGenerator.random(seed);tagCloudLayoutGenerator.spiral(this._spiral);tagCloudLayoutGenerator.words(job.words);tagCloudLayoutGenerator.text(getDisplayText);tagCloudLayoutGenerator.timeInterval(this._timeInterval);this._layoutIsUpdating=true;_context5.next=19;return new Promise(function(resolve){tagCloudLayoutGenerator.on("end",function(){_this4._layoutIsUpdating=false;resolve(true)});tagCloudLayoutGenerator.start()});case 19:case"end":return _context5.stop()}}},_callee5,this)}));function _updateLayout(_x2){return _updateLayout2.apply(this,arguments)}return _updateLayout}()},{key:"getDebugInfo",value:function getDebugInfo(){var debug={};debug.positions=this._completedJob?this._completedJob.words.map(function(tag){return{displayText:tag.displayText,rawText:tag.rawText||tag.text,x:tag.x,y:tag.y,rotate:tag.rotate}}):[];debug.size={width:this._size[0],height:this._size[1]};return debug}}]);return TagCloud}(_events.EventEmitter);exports.TagCloud=TagCloud;TagCloud.STATUS={COMPLETE:0,INCOMPLETE:1};function seed(){return.5}function getText(word){return word.rawText}function getDisplayText(word){return word.displayText}function positionWord(xTranslate,yTranslate,word){if(isNaN(word.x)||isNaN(word.y)||isNaN(word.rotate)){return"translate(".concat(xTranslate*3,", ").concat(yTranslate*3,")rotate(0)")}return"translate(".concat(word.x+xTranslate,", ").concat(word.y+yTranslate,")rotate(").concat(word.rotate,")")}function getValue(tag){return tag.value}function getSizeInPixels(tag){return"".concat(tag.size,"px")}var colorScale=_d.default.scale.ordinal().range(_seed_colors.seedColors);function getFill(tag){return colorScale(tag.text)}function hashWithinRange(str,max){str=JSON.stringify(str);var hash=0;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=str[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var ch=_step.value;hash=(hash*31+ch.charCodeAt(0))%max}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return Math.abs(hash)%max}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2725)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeedbackMessage=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(5);var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var FeedbackMessage=function(_Component){_inherits(FeedbackMessage,_Component);function FeedbackMessage(){var _this;_classCallCheck(this,FeedbackMessage);_this=_possibleConstructorReturn(this,_getPrototypeOf(FeedbackMessage).call(this));_this.state={shouldShowTruncate:false,shouldShowIncomplete:false};return _this}_createClass(FeedbackMessage,[{key:"render",value:function render(){if(!this.state.shouldShowTruncate&&!this.state.shouldShowIncomplete){return""}return _react.default.createElement(_eui.EuiIconTip,{type:"alert",color:"warning",content:_react.default.createElement(_react.Fragment,null,this.state.shouldShowTruncate&&_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"visTypeTagCloud.feedbackMessage.truncatedTagsDescription",defaultMessage:"The number of tags has been truncated to avoid long draw times."})),this.state.shouldShowIncomplete&&_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"visTypeTagCloud.feedbackMessage.tooSmallContainerDescription",defaultMessage:"The container is too small to display the entire cloud. Tags might be cropped or omitted."})))})}}]);return FeedbackMessage}(_react.Component);exports.FeedbackMessage=FeedbackMessage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(8);var _public=__webpack_require__(30);var _shim=__webpack_require__(1562);var _=__webpack_require__(1570);var plugins={visualizations:_public.visualizations,data:_new_platform.npSetup.plugins.data,__LEGACY:new _shim.LegacyDependenciesPlugin};var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core,plugins);exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core);exports.start=start},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _legacy_dependencies_plugin=__webpack_require__(1563);Object.keys(_legacy_dependencies_plugin).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _legacy_dependencies_plugin[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LegacyDependenciesPlugin=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));__webpack_require__(438);var _vega_legacy_module=__webpack_require__(1565);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var LegacyDependenciesPlugin=function(){function LegacyDependenciesPlugin(){_classCallCheck(this,LegacyDependenciesPlugin)}_createClass(LegacyDependenciesPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var $injector;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:(0,_vega_legacy_module.initVegaLegacyModule)();_context.next=3;return _chrome.default.dangerouslyGetActiveInjector();case 3:$injector=_context.sent;return _context.abrupt("return",{es:$injector.get("es"),serviceSettings:$injector.get("serviceSettings")});case 5:case"end":return _context.stop()}}},_callee)}));function setup(){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){}}]);return LegacyDependenciesPlugin}();exports.LegacyDependenciesPlugin=LegacyDependenciesPlugin},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1861)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initVegaLegacyModule=void 0;__webpack_require__(81);__webpack_require__(1575);__webpack_require__(673);__webpack_require__(672);__webpack_require__(369);var _lodash=__webpack_require__(1);var _modules=__webpack_require__(6);var _i18n=__webpack_require__(11);var _vega_editor_controller=__webpack_require__(1567);var _vega_help_menu=__webpack_require__(1568);var _vega_action_menu=__webpack_require__(1569);var initVegaLegacyModule=(0,_lodash.once)(function(){_modules.uiModules.get("kibana/vega",["react"]).controller("VegaEditorController",_vega_editor_controller.VegaEditorController).directive("vegaActionsMenu",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_vega_action_menu.VegaActionsMenu))}).directive("vegaHelpMenu",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_vega_help_menu.VegaHelpMenu))})});exports.initVegaLegacyModule=initVegaLegacyModule},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2098)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaEditorController=void 0;var _jsonStringifyPrettyCompact=_interopRequireDefault(__webpack_require__(674));var _hjson=_interopRequireDefault(__webpack_require__(676));var _notify=__webpack_require__(9);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var VegaEditorController=function(){function VegaEditorController($scope){var _this=this;_classCallCheck(this,VegaEditorController);this.$scope=$scope;$scope.aceLoaded=function(editor){editor.$blockScrolling=Infinity;var session=editor.getSession();session.setTabSize(2);session.setUseSoftTabs(true);_this.aceEditor=editor};$scope.formatJson=function(event){_this._format(event,_jsonStringifyPrettyCompact.default,{maxLength:_this._getCodeWidth()})};$scope.formatHJson=function(event){_this._format(event,_hjson.default.stringify,{condense:_this._getCodeWidth(),bracesSameLine:true,keepWsc:true})}}_createClass(VegaEditorController,[{key:"_getCodeWidth",value:function _getCodeWidth(){return this.aceEditor.getSession().getWrapLimit()}},{key:"_format",value:function _format(event,stringify,opts){var _this2=this;event.preventDefault();var newSpec;try{var spec=_hjson.default.parse(this.aceEditor.getSession().doc.getValue(),{legacyRoot:false,keepWsc:true});newSpec=stringify(spec,opts)}catch(err){_notify.toastNotifications.addError(err,{title:_i18n.i18n.translate("visTypeVega.editor.formatError",{defaultMessage:"Error formatting spec"})});return}this.$scope.$$postDigest(function(){_this2.aceEditor.getSession().doc.setValue(newSpec)})}}]);return VegaEditorController}();exports.VegaEditorController=VegaEditorController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaHelpMenu=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VegaHelpMenu=function(_Component){_inherits(VegaHelpMenu,_Component);function VegaHelpMenu(props){var _this;_classCallCheck(this,VegaHelpMenu);_this=_possibleConstructorReturn(this,_getPrototypeOf(VegaHelpMenu).call(this,props));_defineProperty(_assertThisInitialized(_this),"onButtonClick",function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_this.state={isPopoverOpen:false};return _this}_createClass(VegaHelpMenu,[{key:"render",value:function render(){var _this2=this;var button=_react.default.createElement(_eui.EuiButtonIcon,{iconType:"questionInCircle",onClick:this.onButtonClick,"aria-label":_react.default.createElement(_react2.FormattedMessage,{id:"visTypeVega.editor.vegaHelpButtonAriaLabel",defaultMessage:"Vega help"})});var items=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"vegaHelp",target:"_blank",rel:"noopener noreferrer",href:"https://www.elastic.co/guide/en/kibana/master/vega-graph.html",onClick:function onClick(){_this2.closePopover()}},_react.default.createElement(_react2.FormattedMessage,{id:"visTypeVega.editor.vegaHelpLinkText",defaultMessage:"Kibana Vega Help"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"vegaLiteDocs",target:"_blank",rel:"noopener noreferrer",href:"https://vega.github.io/vega-lite/docs/",onClick:function onClick(){_this2.closePopover()}},_react.default.createElement(_react2.FormattedMessage,{id:"visTypeVega.editor.vegaLiteDocumentationLinkText",defaultMessage:"Vega-Lite Documentation"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"vegaDoc",target:"_blank",rel:"noopener noreferrer",href:"https://vega.github.io/vega/docs/",onClick:function onClick(){_this2.closePopover()}},_react.default.createElement(_react2.FormattedMessage,{id:"visTypeVega.editor.vegaDocumentationLinkText",defaultMessage:"Vega Documentation"}))];return _react.default.createElement(_eui.EuiPopover,{id:"helpMenu",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiContextMenuPanel,{items:items}))}}]);return VegaHelpMenu}(_react.Component);exports.VegaHelpMenu=VegaHelpMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaActionsMenu=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VegaActionsMenu=function(_Component){_inherits(VegaActionsMenu,_Component);function VegaActionsMenu(props){var _this;_classCallCheck(this,VegaActionsMenu);_this=_possibleConstructorReturn(this,_getPrototypeOf(VegaActionsMenu).call(this,props));_defineProperty(_assertThisInitialized(_this),"onButtonClick",function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_this.state={isPopoverOpen:false};return _this}_createClass(VegaActionsMenu,[{key:"render",value:function render(){var _this2=this;var button=_react.default.createElement(_eui.EuiButtonIcon,{iconType:"wrench",onClick:this.onButtonClick,"aria-label":_react.default.createElement(_react2.FormattedMessage,{id:"visTypeVega.editor.vegaEditorOptionsButtonAriaLabel",defaultMessage:"Vega editor options"})});var items=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"hjson",onClick:function onClick(event){_this2.closePopover();_this2.props.formatHJson(event)}},_react.default.createElement(_react2.FormattedMessage,{id:"visTypeVega.editor.reformatAsHJSONButtonLabel",defaultMessage:"Reformat as HJSON"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"json",onClick:function onClick(event){_this2.closePopover();_this2.props.formatJson(event)}},_react.default.createElement(_react2.FormattedMessage,{id:"visTypeVega.editor.reformatAsJSONButtonLabel",defaultMessage:"Reformat as JSON, delete comments"}))];return _react.default.createElement(_eui.EuiPopover,{id:"helpMenu",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiContextMenuPanel,{items:items}))}}]);return VegaActionsMenu}(_react.Component);exports.VegaActionsMenu=VegaActionsMenu;VegaActionsMenu.propTypes={formatHJson:_propTypes.default.func.isRequired,formatJson:_propTypes.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;var _plugin=__webpack_require__(1571);function plugin(initializerContext){return new _plugin.VegaPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaPlugin=void 0;var _vega_fn=__webpack_require__(1572);var _vega_type=__webpack_require__(1585);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VegaPlugin=function(){function VegaPlugin(initializerContext){_classCallCheck(this,VegaPlugin);_defineProperty(this,"initializerContext",void 0);this.initializerContext=initializerContext}_createClass(VegaPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark(function _callee(core,_ref){var data,visualizations,__LEGACY,visualizationDependencies;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_ref.data,visualizations=_ref.visualizations,__LEGACY=_ref.__LEGACY;_context.t0=_objectSpread;_context.t1={uiSettings:core.uiSettings};_context.next=5;return __LEGACY.setup();case 5:_context.t2=_context.sent;visualizationDependencies=(0,_context.t0)(_context.t1,_context.t2);data.expressions.registerFunction(function(){return(0,_vega_fn.createVegaFn)(visualizationDependencies)});visualizations.types.VisTypesRegistryProvider.register(function(){return(0,_vega_type.createVegaTypeDefinition)(visualizationDependencies)});case 9:case"end":return _context.stop()}}},_callee)}));function setup(_x,_x2){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){}}]);return VegaPlugin}();exports.VegaPlugin=VegaPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createVegaFn=void 0;var _lodash=__webpack_require__(1);var _i18n=__webpack_require__(2);var _vega_request_handler=__webpack_require__(675);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var name="vega";var createVegaFn=function createVegaFn(dependencies){return{name:name,type:"render",context:{types:["kibana_context","null"]},help:_i18n.i18n.translate("visTypeVega.function.help",{defaultMessage:"Vega visualization"}),args:{spec:{types:["string"],default:"",help:""}},fn:function(){var _fn=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context,args){var vegaRequestHandler,response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:vegaRequestHandler=(0,_vega_request_handler.createVegaRequestHandler)(dependencies);_context.next=3;return vegaRequestHandler({timeRange:(0,_lodash.get)(context,"timeRange"),query:(0,_lodash.get)(context,"query"),filters:(0,_lodash.get)(context,"filters"),visParams:{spec:args.spec}});case 3:response=_context.sent;return _context.abrupt("return",{type:"render",as:"visualization",value:{visData:response,visType:name,visConfig:{spec:args.spec}}});case 5:case"end":return _context.stop()}}},_callee)}));function fn(_x,_x2){return _fn.apply(this,arguments)}return fn}()}};exports.createVegaFn=createVegaFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaParser=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var vega=_interopRequireWildcard(__webpack_require__(397));var vegaLite=_interopRequireWildcard(__webpack_require__(697));var _vegaSchemaUrlParser=_interopRequireDefault(__webpack_require__(1580));var _compareVersions=_interopRequireDefault(__webpack_require__(1583));var _es_query_parser=__webpack_require__(1576);var _hjson=_interopRequireDefault(__webpack_require__(676));var _utils=__webpack_require__(678);var _ems_file_parser=__webpack_require__(1578);var _url_parser=__webpack_require__(1581);var _eui=__webpack_require__(3);var _i18n=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var defaultColor=_eui.VISUALIZATION_COLORS[0];var DEFAULT_SCHEMA="https://vega.github.io/schema/vega/v3.0.json";var locToDirMap={left:"row-reverse",right:"row",top:"column-reverse",bottom:"column"};var DEFAULT_PARSER="elasticsearch";var VegaParser=function(){function VegaParser(spec,searchCache,timeCache,filters,serviceSettings){_classCallCheck(this,VegaParser);this.spec=spec;this.hideWarnings=false;this.error=undefined;this.warnings=[];var onWarn=this._onWarning.bind(this);this._urlParsers={elasticsearch:new _es_query_parser.EsQueryParser(timeCache,searchCache,filters,onWarn),emsfile:new _ems_file_parser.EmsFileParser(serviceSettings),url:new _url_parser.UrlParser(onWarn)}}_createClass(VegaParser,[{key:"parseAsync",value:function(){var _parseAsync2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this._parseAsync();case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context["catch"](0);this.error=_utils.Utils.formatErrorToStr(_context.t0);case 8:return _context.abrupt("return",this);case 9:case"end":return _context.stop()}}},_callee,this,[[0,5]])}));function parseAsync(){return _parseAsync2.apply(this,arguments)}return parseAsync}()},{key:"_parseAsync",value:function(){var _parseAsync3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this.isVegaLite!==undefined)){_context2.next=2;break}throw new Error;case 2:if(typeof this.spec==="string"){this.spec=_hjson.default.parse(this.spec,{legacyRoot:false})}if(_lodash.default.isPlainObject(this.spec)){_context2.next=5;break}throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.invalidVegaSpecErrorMessage",{defaultMessage:"Invalid Vega specification"}));case 5:this.isVegaLite=this._parseSchema();this.useHover=!this.isVegaLite;this._config=this._parseConfig();this.hideWarnings=!!this._config.hideWarnings;this.useMap=this._config.type==="map";this.renderer=this._config.renderer==="svg"?"svg":"canvas";this.tooltips=this._parseTooltips();this._setDefaultColors();this._parseControlPlacement(this._config);if(this.useMap){this.mapConfig=this._parseMapConfig()}else if(this.spec.autosize===undefined){this.spec.autosize={type:"fit",contains:"padding"}}_context2.next=17;return this._resolveDataUrls();case 17:if(this.isVegaLite){this._compileVegaLite()}this._calcSizing();case 19:case"end":return _context2.stop()}}},_callee2,this)}));function _parseAsync(){return _parseAsync3.apply(this,arguments)}return _parseAsync}()},{key:"_compileVegaLite",value:function _compileVegaLite(){this.vlspec=this.spec;var logger=vega.logger(vega.Warn);logger.warn=this._onWarning.bind(this);this.spec=vegaLite.compile(this.vlspec,logger).spec;if(this.useMap){var hasConfig=_lodash.default.isPlainObject(this.vlspec.config);if(this.vlspec.config===undefined||hasConfig&&!this.vlspec.config.projection){if(!Array.isArray(this.spec.projections)||this.spec.projections.length!==1||this.spec.projections[0].name!=="projection"){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.VLCompilerShouldHaveGeneratedSingleProtectionObjectErrorMessage",{defaultMessage:"Internal error: Vega-Lite compiler should have generated a single projection object"}))}delete this.spec.projections}if(!this.vlspec.width)delete this.spec.width;if(!this.vlspec.height)delete this.spec.height;if(!this.vlspec.padding&&(this.vlspec.config===undefined||hasConfig&&!this.vlspec.config.padding)){delete this.spec.padding}if(!this.vlspec.autosize&&(this.vlspec.config===undefined||hasConfig&&!this.vlspec.config.autosize)){delete this.spec.autosize}}}},{key:"_calcSizing",value:function _calcSizing(){this.useResize=false;if(!this.useMap){var autosize=this.spec.autosize.type||this.spec.autosize;if(autosize==="fit"||autosize==="none"&&!this.spec.width&&!this.spec.height){this.useResize=true}}this.paddingWidth=0;this.paddingHeight=0;if(this.useResize&&this.spec.padding&&this.spec.autosize.contains!=="padding"){if(_typeof(this.spec.padding)==="object"){this.paddingWidth+=(+this.spec.padding.left||0)+(+this.spec.padding.right||0);this.paddingHeight+=(+this.spec.padding.top||0)+(+this.spec.padding.bottom||0)}else{this.paddingWidth+=2*(+this.spec.padding||0);this.paddingHeight+=2*(+this.spec.padding||0)}}if(this.useResize&&(this.spec.width||this.spec.height)){if(this.isVegaLite){delete this.spec.width;delete this.spec.height}else{this._onWarning(_i18n.i18n.translate("visTypeVega.vegaParser.widthAndHeightParamsAreIgnoredWithAutosizeFitWarningMessage",{defaultMessage:"The {widthParam} and {heightParam} params are ignored with {autosizeParam}",values:{autosizeParam:"autosize=fit",widthParam:'"width"',heightParam:'"height"'}}))}}}},{key:"_parseControlPlacement",value:function _parseControlPlacement(){this.containerDir=locToDirMap[this._config.controlsLocation];if(this.containerDir===undefined){if(this._config.controlsLocation===undefined){this.containerDir="column"}else{throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.unrecognizedControlsLocationValueErrorMessage",{defaultMessage:"Unrecognized {controlsLocationParam} value. Expecting one of [{locToDirMap}]",values:{locToDirMap:'"'.concat(locToDirMap.keys().join('", "'),'"'),controlsLocationParam:"controlsLocation"}}))}}var dir=this._config.controlsDirection;if(dir!==undefined&&dir!=="horizontal"&&dir!=="vertical"){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.unrecognizedDirValueErrorMessage",{defaultMessage:"Unrecognized {dirParam} value. Expecting one of [{expectedValues}]",values:{expectedValues:'"horizontal", "vertical"',dirParam:"dir"}}))}this.controlsDir=dir==="horizontal"?"row":"column"}},{key:"_parseConfig",value:function _parseConfig(){var result;if(this.spec._hostConfig!==undefined){result=this.spec._hostConfig;delete this.spec._hostConfig;if(!_lodash.default.isPlainObject(result)){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.hostConfigValueTypeErrorMessage",{defaultMessage:"If present, {configName} must be an object",values:{configName:'"_hostConfig"'}}))}this._onWarning(_i18n.i18n.translate("visTypeVega.vegaParser.hostConfigIsDeprecatedWarningMessage",{defaultMessage:"{deprecatedConfigName} has been deprecated. Use {newConfigName} instead.",values:{deprecatedConfigName:'"_hostConfig"',newConfigName:"config.kibana"}}))}if(_lodash.default.isPlainObject(this.spec.config)&&this.spec.config.kibana!==undefined){result=this.spec.config.kibana;delete this.spec.config.kibana;if(!_lodash.default.isPlainObject(result)){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.kibanaConfigValueTypeErrorMessage",{defaultMessage:"If present, {configName} must be an object",values:{configName:"config.kibana"}}))}}return result||{}}},{key:"_parseTooltips",value:function _parseTooltips(){if(this._config.tooltips===false){return false}var result=this._config.tooltips||{};if(result.position===undefined){result.position="top"}else if(["top","right","bottom","left"].indexOf(result.position)===-1){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.unexpectedValueForPositionConfigurationErrorMessage",{defaultMessage:"Unexpected value for the {configurationName} configuration",values:{configurationName:"result.position"}}))}if(result.padding===undefined){result.padding=16}else if(typeof result.padding!=="number"){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.paddingConfigValueTypeErrorMessage",{defaultMessage:"{configName} is expected to be a number",values:{configName:"config.kibana.result.padding"}}))}if(result.centerOnMark===undefined){result.centerOnMark=50}else if(typeof result.centerOnMark==="boolean"){result.centerOnMark=result.centerOnMark?Number.MAX_VALUE:-1}else if(typeof result.centerOnMark!=="number"){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.centerOnMarkConfigValueTypeErrorMessage",{defaultMessage:"{configName} is expected to be {trueValue}, {falseValue}, or a number",values:{configName:"config.kibana.result.centerOnMark",trueValue:"true",falseValue:"false"}}))}return result}},{key:"_parseMapConfig",value:function _parseMapConfig(){var _this=this;var res={delayRepaint:this._config.delayRepaint===undefined?true:this._config.delayRepaint};var validate=function validate(name,isZoom){var val=_this._config[name];if(val!==undefined){var parsed=parseFloat(val);if(Number.isFinite(parsed)&&(!isZoom||parsed>=0&&parsed<=30)){res[name]=parsed;return}_this._onWarning(_i18n.i18n.translate("visTypeVega.vegaParser.someKibanaConfigurationIsNoValidWarningMessage",{defaultMessage:"{configName} is not valid",values:{configName:"config.kibana.".concat(name)}}))}if(!isZoom)res[name]=0};validate("latitude",false);validate("longitude",false);validate("zoom",true);validate("minZoom",true);validate("maxZoom",true);res.mapStyle=this._config.mapStyle===undefined?"default":this._config.mapStyle;if(res.mapStyle!=="default"&&res.mapStyle!==false){this._onWarning(_i18n.i18n.translate("visTypeVega.vegaParser.mapStyleValueTypeWarningMessage",{defaultMessage:"{mapStyleConfigName} may either be {mapStyleConfigFirstAllowedValue} or {mapStyleConfigSecondAllowedValue}",values:{mapStyleConfigName:"config.kibana.mapStyle",mapStyleConfigFirstAllowedValue:"false",mapStyleConfigSecondAllowedValue:'"default"'}}));res.mapStyle="default"}this._parseBool("zoomControl",res,true);this._parseBool("scrollWheelZoom",res,false);var maxBounds=this._config.maxBounds;if(maxBounds!==undefined){if(!Array.isArray(maxBounds)||maxBounds.length!==4||!maxBounds.every(function(v){return typeof v==="number"&&Number.isFinite(v)})){this._onWarning(_i18n.i18n.translate("visTypeVega.vegaParser.maxBoundsValueTypeWarningMessage",{defaultMessage:"{maxBoundsConfigName} must be an array with four numbers",values:{maxBoundsConfigName:"config.kibana.maxBounds"}}))}else{res.maxBounds=maxBounds}}return res}},{key:"_parseBool",value:function _parseBool(paramName,dstObj,dflt){var val=this._config[paramName];if(val===undefined){dstObj[paramName]=dflt}else if(typeof val!=="boolean"){this._onWarning(_i18n.i18n.translate("visTypeVega.vegaParser.someKibanaParamValueTypeWarningMessage",{defaultMessage:"{configName} must be a boolean value",values:{configName:"config.kibana.".concat(paramName)}}));dstObj[paramName]=dflt}else{dstObj[paramName]=val}}},{key:"_parseSchema",value:function _parseSchema(){if(!this.spec.$schema){this._onWarning(_i18n.i18n.translate("visTypeVega.vegaParser.inputSpecDoesNotSpecifySchemaWarningMessage",{defaultMessage:"The input spec does not specify a {schemaParam}, defaulting to {defaultSchema}",values:{defaultSchema:'"'.concat(DEFAULT_SCHEMA,'"'),schemaParam:'"$schema"'}}));this.spec.$schema=DEFAULT_SCHEMA}var schema=(0,_vegaSchemaUrlParser.default)(this.spec.$schema);var isVegaLite=schema.library==="vega-lite";var libVersion=isVegaLite?vegaLite.version:vega.version;if((0,_compareVersions.default)(schema.version,libVersion)>0){this._onWarning(_i18n.i18n.translate("visTypeVega.vegaParser.notValidLibraryVersionForInputSpecWarningMessage",{defaultMessage:"The input spec uses {schemaLibrary} {schemaVersion}, but current version of {schemaLibrary} is {libraryVersion}.",values:{schemaLibrary:schema.library,schemaVersion:schema.version,libraryVersion:libVersion}}))}return isVegaLite}},{key:"_resolveDataUrls",value:function(){var _resolveDataUrls2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _this2=this;var pending,pendingParsers;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:pending={};this._findObjectDataUrls(this.spec,function(obj){var url=obj.url;delete obj.url;var type=url["%type%"];delete url["%type%"];if(type===undefined){type=DEFAULT_PARSER}var parser=_this2._urlParsers[type];if(parser===undefined){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.notSupportedUrlTypeErrorMessage",{defaultMessage:"{urlObject} is not supported",values:{urlObject:'url: {"%type%": "${type}"}'}}))}var pendingArr=pending[type];if(pendingArr===undefined){pending[type]=pendingArr=[]}pendingArr.push(parser.parseUrl(obj,url))});pendingParsers=Object.keys(pending);if(!(pendingParsers.length>0)){_context3.next=6;break}_context3.next=6;return Promise.all(pendingParsers.map(function(type){return _this2._urlParsers[type].populateData(pending[type])}));case 6:case"end":return _context3.stop()}}},_callee3,this)}));function _resolveDataUrls(){return _resolveDataUrls2.apply(this,arguments)}return _resolveDataUrls}()},{key:"_findObjectDataUrls",value:function _findObjectDataUrls(obj,onFind,key){if(Array.isArray(obj)){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=obj[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var elem=_step.value;this._findObjectDataUrls(elem,onFind,key)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}else if(_lodash.default.isPlainObject(obj)){if(key==="data"&&_lodash.default.isPlainObject(obj.url)){if(obj.values!==undefined||obj.source!==undefined){throw new Error(_i18n.i18n.translate("visTypeVega.vegaParser.dataExceedsSomeParamsUseTimesLimitErrorMessage",{defaultMessage:"Data must not have more than one of {urlParam}, {valuesParam}, and {sourceParam}",values:{urlParam:'"url"',valuesParam:'"values"',sourceParam:'"source"'}}))}onFind(obj)}else{for(var _i=0,_Object$keys=Object.keys(obj);_i<_Object$keys.length;_i++){var k=_Object$keys[_i];this._findObjectDataUrls(obj[k],onFind,k)}}}}},{key:"_setDefaultColors",value:function _setDefaultColors(){this._setDefaultValue({scheme:"elastic"},"config","range","category");if(this.isVegaLite){this._setDefaultValue(defaultColor,"config","mark","color")}else{if(!this.spec.config.mark||this.spec.config.mark.color===undefined&&this.spec.config.mark.fill===undefined){this._setDefaultValue(defaultColor,"config","arc","fill");this._setDefaultValue(defaultColor,"config","area","fill");this._setDefaultValue(defaultColor,"config","line","stroke");this._setDefaultValue(defaultColor,"config","path","stroke");this._setDefaultValue(defaultColor,"config","rect","fill");this._setDefaultValue(defaultColor,"config","rule","stroke");this._setDefaultValue(defaultColor,"config","shape","stroke");this._setDefaultValue(defaultColor,"config","symbol","fill");this._setDefaultValue(defaultColor,"config","trail","fill")}}}},{key:"_setDefaultValue",value:function _setDefaultValue(value){var _ref;var o=this.spec;for(var i=0;i<(arguments.length<=1?0:arguments.length-1)-1;i++){var field=i+1<1||arguments.length<=i+1?undefined:arguments[i+1];var subObj=o[field];if(subObj===undefined){o[field]={}}else if(!_lodash.default.isPlainObject(subObj)){return}o=o[field]}var lastField=(_ref=(arguments.length<=1?0:arguments.length-1)-1+1,_ref<1||arguments.length<=_ref?undefined:arguments[_ref]);if(o[lastField]===undefined){o[lastField]=value}}},{key:"_onWarning",value:function _onWarning(){if(!this.hideWarnings){this.warnings.push(_utils.Utils.formatWarningToStr.apply(_utils.Utils,arguments))}}}]);return VegaParser}();exports.VegaParser=VegaParser},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2743)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1869)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EsQueryParser=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(14));var _i18n=__webpack_require__(2);var _helpers=__webpack_require__(1577);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TIMEFILTER="%timefilter%";var AUTOINTERVAL="%autointerval%";var MUST_CLAUSE="%dashboard_context-must_clause%";var MUST_NOT_CLAUSE="%dashboard_context-must_not_clause%";var LEGACY_CONTEXT="%context_query%";var CONTEXT="%context%";var TIMEFIELD="%timefield%";var EsQueryParser=function(){function EsQueryParser(timeCache,searchCache,filters,onWarning){var _this=this;_classCallCheck(this,EsQueryParser);_defineProperty(this,"mapRequest",function(request){var esRequest=request.url;if(_this._esShardTimeout){var _esRequest$body=esRequest.body,body=_esRequest$body===void 0?{}:_esRequest$body,timeout=esRequest.timeout,rest=_objectWithoutProperties(esRequest,["body","timeout"]);body.timeout="".concat(_this._esShardTimeout,"ms");return _objectSpread({body:body},rest)}else{return esRequest}});this._timeCache=timeCache;this._searchCache=searchCache;this._filters=filters;this._onWarning=onWarning;this._esShardTimeout=(0,_helpers.getEsShardTimeout)()}_createClass(EsQueryParser,[{key:"parseUrl",value:function parseUrl(dataObject,url){var body=url.body;var context=url[CONTEXT];delete url[CONTEXT];var timefield=url[TIMEFIELD];delete url[TIMEFIELD];var usesContext=context!==undefined||timefield!==undefined;if(body===undefined){url.body=body={}}else if(!_lodash.default.isPlainObject(body)){throw new Error(_i18n.i18n.translate("visTypeVega.esQueryParser.urlBodyValueTypeErrorMessage",{defaultMessage:"{configName} must be an object",values:{configName:"url.body"}}))}var legacyContext=url[LEGACY_CONTEXT];delete url[LEGACY_CONTEXT];if(legacyContext!==undefined){if(body.query!==undefined){throw new Error(_i18n.i18n.translate("visTypeVega.esQueryParser.dataUrlMustNotHaveLegacyAndBodyQueryValuesAtTheSameTimeErrorMessage",{defaultMessage:"{dataUrlParam} must not have legacy {legacyContext} and {bodyQueryConfigName} values at the same time",values:{legacyContext:'"'.concat(LEGACY_CONTEXT,'"'),bodyQueryConfigName:'"body.query"',dataUrlParam:'"data.url"'}}))}else if(usesContext){throw new Error(_i18n.i18n.translate("visTypeVega.esQueryParser.dataUrlMustNotHaveLegacyContextTogetherWithContextOrTimefieldErrorMessage",{defaultMessage:"{dataUrlParam} must not have {legacyContext} together with {context} or {timefield}",values:{legacyContext:'"'.concat(LEGACY_CONTEXT,'"'),context:'"'.concat(CONTEXT,'"'),timefield:'"'.concat(TIMEFIELD,'"'),dataUrlParam:'"data.url"'}}))}else if(legacyContext!==true&&(typeof legacyContext!=="string"||legacyContext.length===0)){throw new Error(_i18n.i18n.translate("visTypeVega.esQueryParser.legacyContextCanBeTrueErrorMessage",{defaultMessage:"Legacy {legacyContext} can either be {trueValue} (ignores time range picker), or it can be the name of the time field, e.g. {timestampParam}",values:{legacyContext:'"'.concat(LEGACY_CONTEXT,'"'),trueValue:"true",timestampParam:'"@timestamp"'}}))}usesContext=true;context=true;var result='"url": {"'.concat(CONTEXT,'": true');if(typeof legacyContext==="string"){timefield=legacyContext;result+=', "'.concat(TIMEFIELD,'": ').concat(JSON.stringify(timefield))}result+="}";this._onWarning(_i18n.i18n.translate("visTypeVega.esQueryParser.legacyUrlShouldChangeToWarningMessage",{defaultMessage:"Legacy {urlParam}: {legacyUrl} should change to {result}",values:{legacyUrl:'"'.concat(LEGACY_CONTEXT,'": ').concat(JSON.stringify(legacyContext)),result:result,urlParam:'"url"'}}))}if(body.query!==undefined){if(usesContext){throw new Error(_i18n.i18n.translate("visTypeVega.esQueryParser.urlContextAndUrlTimefieldMustNotBeUsedErrorMessage",{defaultMessage:"{urlContext} and {timefield} must not be used when {queryParam} is set",values:{timefield:"url.".concat(TIMEFIELD),urlContext:"url.".concat(CONTEXT),queryParam:"url.body.query"}}))}this._injectContextVars(body.query,true)}else if(usesContext){if(timefield){body.query={range:_defineProperty({},timefield,this._createRangeFilter(_defineProperty({},TIMEFILTER,true)))}}if(context){var newQuery=_lodash.default.cloneDeep(this._filters);if(timefield){newQuery.bool.must.push(body.query)}body.query=newQuery}}this._injectContextVars(body.aggs,false);return{dataObject:dataObject,url:url}}},{key:"populateData",value:function(){var _populateData=_asyncToGenerator(regeneratorRuntime.mark(function _callee(requests){var esSearches,results,i;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:esSearches=requests.map(this.mapRequest);_context.next=3;return this._searchCache.search(esSearches);case 3:results=_context.sent;for(i=0;i<requests.length;i++){requests[i].dataObject.values=results[i]}case 5:case"end":return _context.stop()}}},_callee,this)}));function populateData(_x){return _populateData.apply(this,arguments)}return populateData}()},{key:"_injectContextVars",value:function _injectContextVars(obj,isQuery){if(obj&&_typeof(obj)==="object"){if(Array.isArray(obj)){for(var pos=0;pos<obj.length;){var item=obj[pos];if(isQuery&&(item===MUST_CLAUSE||item===MUST_NOT_CLAUSE)){var ctxTag=item===MUST_CLAUSE?"must":"must_not";var ctx=_lodash.default.cloneDeep(this._filters);if(ctx&&ctx.bool&&ctx.bool[ctxTag]){if(Array.isArray(ctx.bool[ctxTag])){obj.splice.apply(obj,[pos,1].concat(_toConsumableArray(ctx.bool[ctxTag])));pos+=ctx.bool[ctxTag].length}else{obj[pos++]=ctx.bool[ctxTag]}}else{obj.splice(pos,1)}}else{this._injectContextVars(item,isQuery);pos++}}}else{for(var _i=0,_Object$keys=Object.keys(obj);_i<_Object$keys.length;_i++){var prop=_Object$keys[_i];var subObj=obj[prop];if(!subObj||_typeof(obj)!=="object")continue;if(prop==="interval"&&subObj[AUTOINTERVAL]){var size=subObj[AUTOINTERVAL];if(size===true){size=50}else if(typeof size!=="number"){throw new Error(_i18n.i18n.translate("visTypeVega.esQueryParser.autointervalValueTypeErrorMessage",{defaultMessage:"{autointerval} must be either {trueValue} or a number",values:{autointerval:'"'.concat(AUTOINTERVAL,'"'),trueValue:"true"}}))}var bounds=this._timeCache.getTimeBounds();obj.interval=EsQueryParser._roundInterval((bounds.max-bounds.min)/size);continue}switch(subObj[TIMEFILTER]){case"min":case"max":obj[prop]=this._getTimeBound(subObj,subObj[TIMEFILTER]);continue;case true:this._createRangeFilter(subObj);continue;case undefined:this._injectContextVars(subObj,isQuery);continue;default:throw new Error(_i18n.i18n.translate("visTypeVega.esQueryParser.timefilterValueErrorMessage",{defaultMessage:"{timefilter} property must be set to {trueValue}, {minValue}, or {maxValue}",values:{timefilter:'"'.concat(TIMEFILTER,'"'),trueValue:"true",minValue:'"min"',maxValue:'"max"'}}))}}}}}},{key:"_createRangeFilter",value:function _createRangeFilter(obj){obj.gte=(0,_moment.default)(this._getTimeBound(obj,"min")).toISOString();obj.lte=(0,_moment.default)(this._getTimeBound(obj,"max")).toISOString();obj.format="strict_date_optional_time";delete obj[TIMEFILTER];delete obj.shift;delete obj.unit;return obj}},{key:"_getTimeBound",value:function _getTimeBound(opts,type){var bounds=this._timeCache.getTimeBounds();var result=bounds[type];if(opts.shift){var shift=opts.shift;if(typeof shift!=="number"){throw new Error(_i18n.i18n.translate("visTypeVega.esQueryParser.shiftMustValueTypeErrorMessage",{defaultMessage:"{shiftParam} must be a numeric value",values:{shiftParam:'"shift"'}}))}var multiplier;switch(opts.unit||"d"){case"w":case"week":multiplier=1e3*60*60*24*7;break;case"d":case"day":multiplier=1e3*60*60*24;break;case"h":case"hour":multiplier=1e3*60*60;break;case"m":case"minute":multiplier=1e3*60;break;case"s":case"second":multiplier=1e3;break;default:throw new Error(_i18n.i18n.translate("visTypeVega.esQueryParser.unknownUnitValueErrorMessage",{defaultMessage:"Unknown {unitParamName} value. Must be one of: [{unitParamValues}]",values:{unitParamName:'"unit"',unitParamValues:'"week", "day", "hour", "minute", "second"'}}))}result+=shift*multiplier}return result}}],[{key:"_roundInterval",value:function _roundInterval(interval){switch(true){case interval<=500:return"100ms";case interval<=5e3:return"1s";case interval<=7500:return"5s";case interval<=15e3:return"10s";case interval<=45e3:return"30s";case interval<=18e4:return"1m";case interval<=45e4:return"5m";case interval<=12e5:return"10m";case interval<=27e5:return"30m";case interval<=72e5:return"1h";case interval<=216e5:return"3h";case interval<=864e5:return"12h";case interval<=6048e5:return"24h";case interval<=18144e5:return"1w";case interval<36288e5:return"30d";default:return"1y"}}}]);return EsQueryParser}();exports.EsQueryParser=EsQueryParser},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _vega_config_provider=__webpack_require__(677);Object.keys(_vega_config_provider).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _vega_config_provider[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmsFileParser=void 0;var _i18n=__webpack_require__(2);var _vega_base_view=__webpack_require__(439);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var EmsFileParser=function(){function EmsFileParser(serviceSettings){_classCallCheck(this,EmsFileParser);this._serviceSettings=serviceSettings}_createClass(EmsFileParser,[{key:"parseUrl",value:function parseUrl(obj,url){if(typeof url.name!=="string"){throw new Error(_i18n.i18n.translate("visTypeVega.emsFileParser.missingNameOfFileErrorMessage",{defaultMessage:"{dataUrlParam} with {dataUrlParamValue} requires {nameParam} parameter (name of the file)",values:{dataUrlParam:'"data.url"',dataUrlParamValue:'{"%type%": "emsfile"}',nameParam:'"name"'}}))}if(!this._fileLayersP){this._fileLayersP=this._serviceSettings.getFileLayers()}return{obj:obj,name:url.name}}},{key:"populateData",value:function(){var _populateData=_asyncToGenerator(regeneratorRuntime.mark(function _callee(requests){var _this=this;var layers,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_loop,_iterator,_step;return regeneratorRuntime.wrap(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(requests.length===0)){_context2.next=2;break}return _context2.abrupt("return");case 2:_context2.next=4;return this._fileLayersP;case 4:layers=_context2.sent;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context2.prev=8;_loop=regeneratorRuntime.mark(function _loop(){var _step$value,obj,name,foundLayer,url;return regeneratorRuntime.wrap(function _loop$(_context){while(1){switch(_context.prev=_context.next){case 0:_step$value=_step.value,obj=_step$value.obj,name=_step$value.name;foundLayer=layers.find(function(v){return v.name===name});if(foundLayer){_context.next=4;break}throw new Error(_i18n.i18n.translate("visTypeVega.emsFileParser.emsFileNameDoesNotExistErrorMessage",{defaultMessage:"{emsfile} {emsfileName} does not exist",values:{emsfileName:JSON.stringify(name),emsfile:"emsfile"}}));case 4:_context.next=6;return _this._serviceSettings.getUrlForRegionLayer(foundLayer);case 6:url=_context.sent;obj.url=(0,_vega_base_view.bypassExternalUrlCheck)(url);case 8:case"end":return _context.stop()}}},_loop)});_iterator=requests[Symbol.iterator]();case 11:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context2.next=16;break}return _context2.delegateYield(_loop(),"t0",13);case 13:_iteratorNormalCompletion=true;_context2.next=11;break;case 16:_context2.next=22;break;case 18:_context2.prev=18;_context2.t1=_context2["catch"](8);_didIteratorError=true;_iteratorError=_context2.t1;case 22:_context2.prev=22;_context2.prev=23;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 25:_context2.prev=25;if(!_didIteratorError){_context2.next=28;break}throw _iteratorError;case 28:return _context2.finish(25);case 29:return _context2.finish(22);case 30:case"end":return _context2.stop()}}},_callee,this,[[8,18,22,30],[23,,25,29]])}));function populateData(_x){return _populateData.apply(this,arguments)}return populateData}()}]);return EmsFileParser}();exports.EmsFileParser=EmsFileParser},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TooltipHandler=void 0;var _eui=__webpack_require__(3);var _vegaTooltip=__webpack_require__(1591);var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var tooltipId="vega-kibana-tooltip";function createRect(left,top,width,height){return{left:left,top:top,width:width,height:height,x:left,y:top,right:left+width,bottom:top+height}}var TooltipHandler=function(){function TooltipHandler(container,view,opts){_classCallCheck(this,TooltipHandler);this.container=container;this.position=opts.position;this.padding=opts.padding;this.centerOnMark=opts.centerOnMark;view.tooltip(this.handler.bind(this))}_createClass(TooltipHandler,[{key:"handler",value:function handler(view,event,item,value){this.hideTooltip();if(value==null||value===""){return}var el=document.createElement("div");el.setAttribute("id",tooltipId);["vgaVis__tooltip","euiToolTipPopover","euiToolTip","euiToolTip--".concat(this.position)].forEach(function(className){el.classList.add(className)});el.innerHTML=(0,_vegaTooltip.formatValue)(value,_lodash.default.escape);document.body.appendChild(el);var anchorBounds;if(item.bounds.width()>this.centerOnMark||item.bounds.height()>this.centerOnMark){anchorBounds=createRect(event.pageX,event.pageY,0,0)}else{var containerBox=this.container.getBoundingClientRect();anchorBounds=createRect(containerBox.left+view._origin[0]+item.bounds.x1+window.pageXOffset,containerBox.top+view._origin[1]+item.bounds.y1+window.pageYOffset,item.bounds.width(),item.bounds.height())}var pos=(0,_eui.calculatePopoverPosition)(anchorBounds,el.getBoundingClientRect(),this.position,this.padding);el.setAttribute("style","top: ".concat(pos.top,"px; left: ").concat(pos.left,"px"))}},{key:"hideTooltip",value:function hideTooltip(){var el=document.getElementById(tooltipId);if(el)el.remove()}}]);return TooltipHandler}();exports.TooltipHandler=TooltipHandler},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2731)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlParser=void 0;var _jquery=_interopRequireDefault(__webpack_require__(12));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var UrlParser=function(){function UrlParser(onWarning){_classCallCheck(this,UrlParser);this._onWarning=onWarning}_createClass(UrlParser,[{key:"parseUrl",value:function parseUrl(obj,urlObj){var url=urlObj.url;if(!url){throw new Error(_i18n.i18n.translate("visTypeVega.urlParser.dataUrlRequiresUrlParameterInFormErrorMessage",{defaultMessage:'{dataUrlParam} requires a {urlParam} parameter in a form "{formLink}"',values:{dataUrlParam:'"data.url"',urlParam:'"url"',formLink:"https://example.org/path/subpath"}}))}var query=urlObj.query;if(!query){this._onWarning(_i18n.i18n.translate("visTypeVega.urlParser.urlShouldHaveQuerySubObjectWarningMessage",{defaultMessage:"Using a {urlObject} should have a {subObjectName} sub-object",values:{urlObject:'"url": {"%type%": "url", "url": ...}',subObjectName:'"query"'}}))}else{url+=(url.includes("?")?"&":"?")+_jquery.default.param(query)}obj.url=url}},{key:"populateData",value:function populateData(){}}]);return UrlParser}();exports.UrlParser=UrlParser},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchCache=void 0;var _lruCache=_interopRequireDefault(__webpack_require__(1600));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SearchCache=function(){function SearchCache(es,cacheOpts){_classCallCheck(this,SearchCache);this._es=es;this._cache=new _lruCache.default(cacheOpts)}_createClass(SearchCache,[{key:"search",value:function search(requests){var promises=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=requests[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var request=_step.value;var key=JSON.stringify(request);var pending=this._cache.get(key);if(pending===undefined){pending=this._es.search(request);this._cache.set(key,pending)}promises.push(pending)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return Promise.all(promises)}}]);return SearchCache}();exports.SearchCache=SearchCache},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1886)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeCache=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AlwaysCacheMaxAge=40;var TimeCache=function(){function TimeCache(timefilter,maxAge){_classCallCheck(this,TimeCache);this._timefilter=timefilter;this._maxAge=maxAge;this._cachedBounds=null;this._cacheTS=0}_createClass(TimeCache,[{key:"_now",value:function _now(){return Date.now()}},{key:"getTimeBounds",value:function getTimeBounds(){var ts=this._now();var bounds;if(this._cachedBounds){var diff=ts-this._cacheTS;if(diff<AlwaysCacheMaxAge){return this._cachedBounds}if(diff<this._maxAge){bounds=this._getBounds();if(Math.abs(bounds.min-this._cachedBounds.min)<this._maxAge&&Math.abs(bounds.max-this._cachedBounds.max)<this._maxAge){return this._cachedBounds}}}this._cacheTS=ts;this._cachedBounds=bounds||this._getBounds();return this._cachedBounds}},{key:"setTimeRange",value:function setTimeRange(timeRange){this._timeRange=timeRange}},{key:"_getBounds",value:function _getBounds(){var bounds=this._timefilter.calculateBounds(this._timeRange);return{min:bounds.min.valueOf(),max:bounds.max.valueOf()}}}]);return TimeCache}();exports.TimeCache=TimeCache},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createVegaTypeDefinition=void 0;var _i18n=__webpack_require__(2);var _update_status=__webpack_require__(83);var _editor_size=__webpack_require__(361);var _default_feedback_message=__webpack_require__(346);var _vega_editor_template=_interopRequireDefault(__webpack_require__(1586));var _public=__webpack_require__(30);var _vega_request_handler=__webpack_require__(675);var _vega_visualization=__webpack_require__(1587);var _defaultSpec=_interopRequireDefault(__webpack_require__(1592));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createVegaTypeDefinition=function createVegaTypeDefinition(dependencies){var requestHandler=(0,_vega_request_handler.createVegaRequestHandler)(dependencies);var visualization=(0,_vega_visualization.createVegaVisualization)(dependencies);return _public.visFactory.createBaseVisualization({name:"vega",title:"Vega",description:_i18n.i18n.translate("visTypeVega.type.vegaDescription",{defaultMessage:"Create custom visualizations using Vega and Vega-Lite",description:"Vega and Vega-Lite are product names and should not be translated"}),icon:"visVega",visConfig:{defaults:{spec:_defaultSpec.default}},editorConfig:{optionsTemplate:_vega_editor_template.default,enableAutoApply:true,defaultSize:_editor_size.DefaultEditorSize.MEDIUM},visualization:visualization,requestHandler:requestHandler,requiresUpdateStatus:[_update_status.Status.DATA,_update_status.Status.RESIZE],responseHandler:"none",options:{showIndexSelection:false,showQueryBar:true,showFilterBar:true},stage:"experimental",feedbackMessage:_default_feedback_message.defaultFeedbackMessage})};exports.createVegaTypeDefinition=createVegaTypeDefinition},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="vgaEditor" ng-controller="VegaEditorController">\n  <div\n    kbn-ui-ace-keyboard-mode\n    ui-ace="{\n      onLoad: aceLoaded,\n      useWrapMode: true,\n      advanced: {\n        highlightActiveLine: false\n      },\n      rendererOptions: {\n        showPrintMargin: false\n      },\n      mode: \'hjson\'\n    }"\n    id="vegaAceEditor"\n    ng-model="editorState.params.spec"\n    data-test-subj="vega-editor"\n    class="vgaEditor__aceEditor"\n  ></div>\n\n  <div class="vgaEditor__aceEditorActions">\n    <vega-help-menu></vega-help-menu>\n\n    <vega-actions-menu\n      format-h-json="formatHJson"\n      format-json="formatJson"\n    ></vega-actions-menu>\n  </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createVegaVisualization=void 0;var _chrome=_interopRequireDefault(__webpack_require__(7));var _i18n=__webpack_require__(2);var _notify=__webpack_require__(9);var _vega_view=__webpack_require__(1588);var _vega_map_view=__webpack_require__(1589);var _saved_objects=__webpack_require__(36);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var createVegaVisualization=function createVegaVisualization(_ref){var serviceSettings=_ref.serviceSettings;return function(){function VegaVisualization(el,vis){_classCallCheck(this,VegaVisualization);this.savedObjectsClient=_chrome.default.getSavedObjectsClient();this._el=el;this._vis=vis}_createClass(VegaVisualization,[{key:"findIndex",value:function(){var _findIndex=_asyncToGenerator(regeneratorRuntime.mark(function _callee(index){var idxObj;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!index){_context.next=8;break}_context.next=3;return(0,_saved_objects.findObjectByTitle)(this.savedObjectsClient,"index-pattern",index);case 3:idxObj=_context.sent;if(idxObj){_context.next=6;break}throw new Error(_i18n.i18n.translate("visTypeVega.visualization.indexNotFoundErrorMessage",{defaultMessage:"Index {index} not found",values:{index:'"'.concat(index,'"')}}));case 6:_context.next=13;break;case 8:_context.next=10;return this._vis.API.indexPatterns.getDefault();case 10:idxObj=_context.sent;if(idxObj){_context.next=13;break}throw new Error(_i18n.i18n.translate("visTypeVega.visualization.unableToFindDefaultIndexErrorMessage",{defaultMessage:"Unable to find default index"}));case 13:return _context.abrupt("return",idxObj.id);case 14:case"end":return _context.stop()}}},_callee,this)}));function findIndex(_x){return _findIndex.apply(this,arguments)}return findIndex}()},{key:"render",value:function(){var _render2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(visData,visParams,status){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!visData&&!this._vegaView)){_context2.next=3;break}_notify.toastNotifications.addWarning(_i18n.i18n.translate("visTypeVega.visualization.unableToRenderWithoutDataWarningMessage",{defaultMessage:"Unable to render without data"}));return _context2.abrupt("return");case 3:_context2.prev=3;_context2.next=6;return this._render(visData,status);case 6:_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](3);if(this._vegaView){this._vegaView.onError(_context2.t0)}else{_notify.toastNotifications.addError(_context2.t0,{title:_i18n.i18n.translate("visTypeVega.visualization.renderErrorTitle",{defaultMessage:"Vega error"})})}case 11:case"end":return _context2.stop()}}},_callee2,this,[[3,8]])}));function render(_x2,_x3,_x4){return _render2.apply(this,arguments)}return render}()},{key:"_render",value:function(){var _render3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(vegaParser,status){var vegaViewParams;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(vegaParser&&(status.data||!this._vegaView))){_context3.next=11;break}if(!this._vegaView){_context3.next=5;break}_context3.next=4;return this._vegaView.destroy();case 4:this._vegaView=null;case 5:vegaViewParams={parentEl:this._el,vegaParser:vegaParser,serviceSettings:serviceSettings,queryfilter:this._vis.API.queryFilter,timefilter:this._vis.API.timeFilter,findIndex:this.findIndex.bind(this)};if(vegaParser.useMap){this._vegaView=new _vega_map_view.VegaMapView(vegaViewParams)}else{this._vegaView=new _vega_view.VegaView(vegaViewParams)}_context3.next=9;return this._vegaView.init();case 9:_context3.next=14;break;case 11:if(!status.resize){_context3.next=14;break}_context3.next=14;return this._vegaView.resize();case 14:case"end":return _context3.stop()}}},_callee3,this)}));function _render(_x5,_x6){return _render3.apply(this,arguments)}return _render}()},{key:"destroy",value:function destroy(){return this._vegaView&&this._vegaView.destroy()}}]);return VegaVisualization}()};exports.createVegaVisualization=createVegaVisualization},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaView=void 0;var vega=_interopRequireWildcard(__webpack_require__(397));var _vega_base_view=__webpack_require__(439);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var VegaView=function(_VegaBaseView){_inherits(VegaView,_VegaBaseView);function VegaView(){_classCallCheck(this,VegaView);return _possibleConstructorReturn(this,_getPrototypeOf(VegaView).apply(this,arguments))}_createClass(VegaView,[{key:"_initViewCustomizations",value:function(){var _initViewCustomizations2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var view;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this._$container){_context.next=2;break}return _context.abrupt("return");case 2:view=new vega.View(vega.parse(this._parser.spec),this._vegaViewConfig);this.setDebugValues(view,this._parser.spec,this._parser.vlspec);view.warn=this.onWarn.bind(this);view.error=this.onError.bind(this);if(this._parser.useResize)this.updateVegaSize(view);view.initialize(this._$container.get(0),this._$controls.get(0));if(this._parser.useHover)view.hover();_context.next=11;return this.setView(view);case 11:case"end":return _context.stop()}}},_callee,this)}));function _initViewCustomizations(){return _initViewCustomizations2.apply(this,arguments)}return _initViewCustomizations}()}]);return VegaView}(_vega_base_view.VegaBaseView);exports.VegaView=VegaView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaMapView=void 0;var _kibana_map=__webpack_require__(663);var vega=_interopRequireWildcard(__webpack_require__(397));var _vega_base_view=__webpack_require__(439);var _vega_map_layer=__webpack_require__(1590);var _i18n=__webpack_require__(2);var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var VegaMapView=function(_VegaBaseView){_inherits(VegaMapView,_VegaBaseView);function VegaMapView(){_classCallCheck(this,VegaMapView);return _possibleConstructorReturn(this,_getPrototypeOf(VegaMapView).apply(this,arguments))}_createClass(VegaMapView,[{key:"_initViewCustomizations",value:function(){var _initViewCustomizations2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this=this;var mapConfig,baseMapOpts,limitMinZ,limitMaxZ,tmsServices,emsTileLayerId,mapStyle,isDarkMode,validate,minZoom,maxZoom,_ref,zoom,vegaMapLayer,vegaView;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mapConfig=this._parser.mapConfig;limitMinZ=0;limitMaxZ=25;if(!(mapConfig.mapStyle!==false)){_context.next=22;break}_context.next=6;return this._serviceSettings.getTMSServices();case 6:tmsServices=_context.sent;if(this._$container){_context.next=9;break}return _context.abrupt("return");case 9:emsTileLayerId=_chrome.default.getInjected("emsTileLayerId",true);mapStyle=mapConfig.mapStyle==="default"?emsTileLayerId.bright:mapConfig.mapStyle;isDarkMode=_chrome.default.getUiSettingsClient().get("theme:darkMode");baseMapOpts=tmsServices.find(function(s){return s.id===mapStyle});_context.t0=_objectSpread;_context.t1={};_context.t2=baseMapOpts;_context.t3={};_context.next=19;return this._serviceSettings.getAttributesForTMSLayer(baseMapOpts,true,isDarkMode);case 19:_context.t4=_context.sent;baseMapOpts=(0,_context.t0)(_context.t1,_context.t2,_context.t3,_context.t4);if(!baseMapOpts){this.onWarn(_i18n.i18n.translate("visTypeVega.mapView.mapStyleNotFoundWarningMessage",{defaultMessage:"{mapStyleParam} was not found",values:{mapStyleParam:'"mapStyle": '.concat(JSON.stringify(mapStyle))}}))}else{limitMinZ=baseMapOpts.minZoom;limitMaxZ=baseMapOpts.maxZoom}case 22:validate=function validate(name,value,dflt,min,max){if(value===undefined){value=dflt}else if(value<min){_this.onWarn(_i18n.i18n.translate("visTypeVega.mapView.resettingPropertyToMinValueWarningMessage",{defaultMessage:"Resetting {name} to {min}",values:{name:'"'.concat(name,'"'),min:min}}));value=min}else if(value>max){_this.onWarn(_i18n.i18n.translate("visTypeVega.mapView.resettingPropertyToMaxValueWarningMessage",{defaultMessage:"Resetting {name} to {max}",values:{name:'"'.concat(name,'"'),max:max}}));value=max}return value};minZoom=validate("minZoom",mapConfig.minZoom,limitMinZ,limitMinZ,limitMaxZ);maxZoom=validate("maxZoom",mapConfig.maxZoom,limitMaxZ,limitMinZ,limitMaxZ);if(minZoom>maxZoom){this.onWarn(_i18n.i18n.translate("visTypeVega.mapView.minZoomAndMaxZoomHaveBeenSwappedWarningMessage",{defaultMessage:"{minZoomPropertyName} and {maxZoomPropertyName} have been swapped",values:{minZoomPropertyName:'"minZoom"',maxZoomPropertyName:'"maxZoom"'}}));_ref=[maxZoom,minZoom];minZoom=_ref[0];maxZoom=_ref[1]}zoom=validate("zoom",mapConfig.zoom,2,minZoom,maxZoom);this._kibanaMap=new _kibana_map.KibanaMap(this._$container.get(0),{zoom:zoom,minZoom:minZoom,maxZoom:maxZoom,center:[mapConfig.latitude,mapConfig.longitude],zoomControl:mapConfig.zoomControl,scrollWheelZoom:mapConfig.scrollWheelZoom});if(baseMapOpts){this._kibanaMap.setBaseLayer({baseLayerType:"tms",options:baseMapOpts})}vegaMapLayer=new _vega_map_layer.VegaMapLayer(this._parser.spec,{vega:vega,bindingsContainer:this._$controls.get(0),delayRepaint:mapConfig.delayRepaint,viewConfig:this._vegaViewConfig,onWarning:this.onWarn.bind(this),onError:this.onError.bind(this)});this._kibanaMap.addLayer(vegaMapLayer);this._addDestroyHandler(function(){_this._kibanaMap.removeLayer(vegaMapLayer);if(baseMapOpts){_this._kibanaMap.setBaseLayer(null)}_this._kibanaMap.destroy()});vegaView=vegaMapLayer.getVegaView();this.setDebugValues(vegaView,this._parser.spec,this._parser.vlspec);_context.next=36;return this.setView(vegaView);case 36:case"end":return _context.stop()}}},_callee,this)}));function _initViewCustomizations(){return _initViewCustomizations2.apply(this,arguments)}return _initViewCustomizations}()}]);return VegaMapView}(_vega_base_view.VegaBaseView);exports.VegaMapView=VegaMapView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaMapLayer=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(66));__webpack_require__(1656);var _kibana_map_layer=__webpack_require__(436);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var VegaMapLayer=function(_KibanaMapLayer){_inherits(VegaMapLayer,_KibanaMapLayer);function VegaMapLayer(spec,options){var _this;_classCallCheck(this,VegaMapLayer);_this=_possibleConstructorReturn(this,_getPrototypeOf(VegaMapLayer).call(this));_this._attribution=options.attribution;delete options.attribution;_this._leafletLayer=_leaflet.default.vega(spec,options);return _this}_createClass(VegaMapLayer,[{key:"getVegaView",value:function getVegaView(){return this._leafletLayer._view}},{key:"getVegaSpec",value:function getVegaSpec(){return this._leafletLayer._spec}}]);return VegaMapLayer}(_kibana_map_layer.KibanaMapLayer);exports.VegaMapLayer=VegaMapLayer},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2732)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='{\n/*\n\nWelcome to Vega visualizations.  Here you can design your own dataviz from scratch using a declarative language called Vega, or its simpler form Vega-Lite.  In Vega, you have the full control of what data is loaded, even from multiple sources, how that data is transformed, and what visual elements are used to show it.  Use help icon to view Vega examples, tutorials, and other docs.  Use the wrench icon to reformat this text, or to remove comments.\n\nThis example graph shows the document count in all indexes in the current time range.  You might need to adjust the time filter in the upper right corner.\n*/\n\n  $schema: https://vega.github.io/schema/vega-lite/v2.json\n  title: Event counts from all indexes\n\n  // Define the data source\n  data: {\n    url: {\n/*\nAn object instead of a string for the "url" param is treated as an Elasticsearch query. Anything inside this object is not part of the Vega language, but only understood by Kibana and Elasticsearch server. This query counts the number of documents per time interval, assuming you have a @timestamp field in your data.\n\nKibana has a special handling for the fields surrounded by "%".  They are processed before the the query is sent to Elasticsearch. This way the query becomes context aware, and can use the time range and the dashboard filters.\n*/\n\n      // Apply dashboard context filters when set\n      %context%: true\n      // Filter the time picker (upper right corner) with this field\n      %timefield%: @timestamp\n\n/*\nSee .search() documentation for :  https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-search\n*/\n\n      // Which index to search\n      index: _all\n      // Aggregate data by the time field into time buckets, counting the number of documents in each bucket.\n      body: {\n        aggs: {\n          time_buckets: {\n            date_histogram: {\n              // Use date histogram aggregation on @timestamp field\n              field: @timestamp\n              // The interval value will depend on the daterange picker (true), or use an integer to set an approximate bucket count\n              interval: {%autointerval%: true}\n              // Make sure we get an entire range, even if it has no data\n              extended_bounds: {\n                // Use the current time range\'s start and end\n                min: {%timefilter%: "min"}\n                max: {%timefilter%: "max"}\n              }\n              // Use this for linear (e.g. line, area) graphs.  Without it, empty buckets will not show up\n              min_doc_count: 0\n            }\n          }\n        }\n        // Speed up the response by only including aggregation results\n        size: 0\n      }\n    }\n/*\nElasticsearch will return results in this format:\n\naggregations: {\n  time_buckets: {\n    buckets: [\n      {\n        key_as_string: 2015-11-30T22:00:00.000Z\n        key: 1448920800000\n        doc_count: 0\n      },\n      {\n        key_as_string: 2015-11-30T23:00:00.000Z\n        key: 1448924400000\n        doc_count: 0\n      }\n      ...\n    ]\n  }\n}\n\nFor our graph, we only need the list of bucket values.  Use the format.property to discard everything else.\n*/\n    format: {property: "aggregations.time_buckets.buckets"}\n  }\n\n  // "mark" is the graphics element used to show our data.  Other mark values are: area, bar, circle, line, point, rect, rule, square, text, and tick.  See https://vega.github.io/vega-lite/docs/mark.html\n  mark: line\n\n  // "encoding" tells the "mark" what data to use and in what way.  See https://vega.github.io/vega-lite/docs/encoding.html\n  encoding: {\n    x: {\n      // The "key" value is the timestamp in milliseconds.  Use it for X axis.\n      field: key\n      type: temporal\n      axis: {title: false} // Customize X axis format\n    }\n    y: {\n      // The "doc_count" is the count per bucket.  Use it for Y axis.\n      field: doc_count\n      type: quantitative\n      axis: {title: "Document count"}\n    }\n  }\n}\n'},function(module,exports,__webpack_require__){"use strict";var _dev_tools=__webpack_require__(371);var _i18n=__webpack_require__(2);_dev_tools.DevToolsRegistryProvider.register(function(){return{order:1,name:"console",display:_i18n.i18n.translate("console.consoleDisplayName",{defaultMessage:"Console"}),url:"#/dev_tools/console"}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1595)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(8);var _saved_object_finder=__webpack_require__(372);var _exit_full_screen=__webpack_require__(1596);var _=__webpack_require__(681);var _legacy=__webpack_require__(374);var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core,{embeddable:_legacy.setup});exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core,{embeddable:_legacy.start,inspector:_new_platform.npStart.plugins.inspector,__LEGACY:{SavedObjectFinder:_saved_object_finder.SavedObjectFinder,ExitFullScreenButton:_exit_full_screen.ExitFullScreenButton}});exports.start=start},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ExitFullScreenButton",{enumerable:true,get:function get(){return _exit_full_screen_button.ExitFullScreenButton}});var _exit_full_screen_button=__webpack_require__(1597)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ExitFullScreenButton=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _chrome=_interopRequireDefault(__webpack_require__(7));var _public=__webpack_require__(373);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ExitFullScreenButton=function(_PureComponent){_inherits(ExitFullScreenButton,_PureComponent);function ExitFullScreenButton(){_classCallCheck(this,ExitFullScreenButton);return _possibleConstructorReturn(this,_getPrototypeOf(ExitFullScreenButton).apply(this,arguments))}_createClass(ExitFullScreenButton,[{key:"componentWillMount",value:function componentWillMount(){_chrome.default.setVisible(false)}},{key:"componentWillUnmount",value:function componentWillUnmount(){_chrome.default.setVisible(true)}},{key:"render",value:function render(){return _react.default.createElement(_public.ExitFullScreenButton,{onExitFullScreenMode:this.props.onExitFullScreenMode})}}]);return ExitFullScreenButton}(_react.PureComponent);exports.ExitFullScreenButton=ExitFullScreenButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ExitFullScreenButton",{enumerable:true,get:function get(){return _exit_full_screen_button.ExitFullScreenButton}});var _exit_full_screen_button=__webpack_require__(1599)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ExitFullScreenButton=void 0;var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _components=__webpack_require__(1657);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ExitFullScreenButtonUi=function(_PureComponent){_inherits(ExitFullScreenButtonUi,_PureComponent);function ExitFullScreenButtonUi(){var _getPrototypeOf2;var _this;_classCallCheck(this,ExitFullScreenButtonUi);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ExitFullScreenButtonUi)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onKeyDown",function(e){if(e.keyCode===_eui.keyCodes.ESCAPE){_this.props.onExitFullScreenMode()}});return _this}_createClass(ExitFullScreenButtonUi,[{key:"componentWillMount",value:function componentWillMount(){document.addEventListener("keydown",this.onKeyDown,false)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown,false)}},{key:"render",value:function render(){return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("p",{"aria-live":"polite"},_i18n.i18n.translate("kibana-react.exitFullScreenButton.fullScreenModeDescription",{defaultMessage:"In full screen mode, press ESC to exit."}))),_react.default.createElement("div",{className:"dshExitFullScreenButton"},_react.default.createElement(_components.KuiButton,{type:"hollow","aria-label":_i18n.i18n.translate("kibana-react.exitFullScreenButton.exitFullScreenModeButtonAreaLabel",{defaultMessage:"Exit full screen mode"}),className:"dshExitFullScreenButton__mode",onClick:this.props.onExitFullScreenMode},_react.default.createElement("span",{className:"dshExitFullScreenButton__logo","data-test-subj":"exitFullScreenModeLogo"}),_react.default.createElement("span",{className:"dshExitFullScreenButton__text","data-test-subj":"exitFullScreenModeText"},_i18n.i18n.translate("kibana-react.exitFullScreenButton.exitFullScreenModeButtonLabel",{defaultMessage:"Exit full screen"}),_react.default.createElement("span",{className:"kuiIcon fa fa-angle-left"})))))}}]);return ExitFullScreenButtonUi}(_react.PureComponent);var ExitFullScreenButton=ExitFullScreenButtonUi;exports.ExitFullScreenButton=ExitFullScreenButton},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2178)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaContextProvider=exports.createKibanaReactContext=exports.UseKibana=exports.withKibana=exports.useKibana=exports.context=void 0;var React=_interopRequireWildcard(__webpack_require__(0));var _overlays=__webpack_require__(680);var _notifications=__webpack_require__(1604);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var useMemo=React.useMemo,useContext=React.useContext,createElement=React.createElement,createContext=React.createContext;var defaultContextValue={services:{},overlays:(0,_overlays.createReactOverlays)({}),notifications:(0,_notifications.createNotifications)({})};var context=createContext(defaultContextValue);exports.context=context;var useKibana=function useKibana(){return useContext(context)};exports.useKibana=useKibana;var withKibana=function withKibana(type){var enhancedType=function enhancedType(props){var kibana=useKibana();return React.createElement(type,_objectSpread({},props,{kibana:kibana}))};return enhancedType};exports.withKibana=withKibana;var UseKibana=function UseKibana(_ref){var children=_ref.children;return React.createElement(React.Fragment,null,children(useKibana()))};exports.UseKibana=UseKibana;var createKibanaReactContext=function createKibanaReactContext(services){var value={services:services,overlays:(0,_overlays.createReactOverlays)(services),notifications:(0,_notifications.createNotifications)(services)};var Provider=function Provider(_ref2){var _ref2$services=_ref2.services,newServices=_ref2$services===void 0?{}:_ref2$services,children=_ref2.children;var oldValue=useKibana();var _useMemo=useMemo(function(){return createKibanaReactContext(_objectSpread({},services,{},oldValue.services,{},newServices))},Object.keys(services)),newValue=_useMemo.value;return createElement(context.Provider,{value:newValue,children:children})};return{value:value,Provider:Provider,Consumer:context.Consumer}};exports.createKibanaReactContext=createKibanaReactContext;var _createKibanaReactCon=createKibanaReactContext({}),KibanaContextProvider=_createKibanaReactCon.Provider;exports.KibanaContextProvider=KibanaContextProvider},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createReactOverlays=void 0;var React=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var createReactOverlays=function createReactOverlays(services){var checkCoreService=function checkCoreService(){if(!services.overlays){throw new TypeError("Could not show overlay as overlays service is not available.")}};var openFlyout=function openFlyout(node,options){checkCoreService();return services.overlays.openFlyout(React.createElement(React.Fragment,null,node),options)};var openModal=function openModal(node,options){checkCoreService();return services.overlays.openModal(React.createElement(React.Fragment,null,node),options)};var overlays={openFlyout:openFlyout,openModal:openModal};return overlays};exports.createReactOverlays=createReactOverlays},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _types=__webpack_require__(1605);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})});var _create_notifications=__webpack_require__(1606);Object.keys(_create_notifications).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _create_notifications[key]}})})},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createNotifications=void 0;var React=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createNotifications=function createNotifications(services){var show=function show(_ref){var title=_ref.title,body=_ref.body,color=_ref.color,iconType=_ref.iconType,toastLifeTimeMs=_ref.toastLifeTimeMs,onClose=_ref.onClose;if(!services.notifications){throw new TypeError("Could not show notification as notifications service is not available.")}services.notifications.toasts.add({title:title,text:React.createElement(React.Fragment,null,body||null),color:color,iconType:iconType,toastLifeTimeMs:toastLifeTimeMs,onClose:onClose})};var success=function success(input){return show(_objectSpread({color:"success",iconType:"check"},input))};var warning=function warning(input){return show(_objectSpread({color:"warning",iconType:"help"},input))};var danger=function danger(input){return show(_objectSpread({color:"danger",iconType:"alert"},input))};var notifications={toasts:{show:show,success:success,warning:warning,danger:danger}};return notifications};exports.createNotifications=createNotifications},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CoreStart",{enumerable:true,get:function get(){return _public.CoreStart}});var _public=__webpack_require__(79)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _use_ui_setting=__webpack_require__(1609);Object.keys(_use_ui_setting).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _use_ui_setting[key]}})})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.useUiSetting$=exports.useUiSetting=void 0;var _react=__webpack_require__(0);var _context=__webpack_require__(679);var _use_observable=__webpack_require__(1610);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}var useUiSetting=function useUiSetting(key,defaultValue){var _useKibana=(0,_context.useKibana)(),services=_useKibana.services;if(_typeof(services.uiSettings)!=="object"){throw new TypeError("uiSettings service not available in kibana-react context.")}return services.uiSettings.get(key,defaultValue)};exports.useUiSetting=useUiSetting;var useUiSetting$=function useUiSetting$(key,defaultValue){var _useKibana2=(0,_context.useKibana)(),services=_useKibana2.services;if(_typeof(services.uiSettings)!=="object"){throw new TypeError("uiSettings service not available in kibana-react context.")}var observable$=(0,_react.useMemo)(function(){return services.uiSettings.get$(key,defaultValue)},[key,defaultValue]);var value=(0,_use_observable.useObservable)(observable$,services.uiSettings.get(key,defaultValue));var set=(0,_react.useCallback)(function(newValue){return services.uiSettings.set(key,newValue)},[key]);return[value,set]};exports.useUiSetting$=useUiSetting$},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useObservable=useObservable;var _react=__webpack_require__(0);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function useObservable(observable$,initialValue){var _useState=(0,_react.useState)(initialValue),_useState2=_slicedToArray(_useState,2),value=_useState2[0],update=_useState2[1];(0,_react.useLayoutEffect)(function(){var s=observable$.subscribe(update);return function(){return s.unsubscribe()}},[observable$]);return value}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardEmbeddableContainerPublicPlugin=void 0;var _embeddable_api=__webpack_require__(440);var _lib=__webpack_require__(691);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var DashboardEmbeddableContainerPublicPlugin=function(){function DashboardEmbeddableContainerPublicPlugin(initializerContext){_classCallCheck(this,DashboardEmbeddableContainerPublicPlugin)}_createClass(DashboardEmbeddableContainerPublicPlugin,[{key:"setup",value:function setup(core,_ref){var embeddable=_ref.embeddable;var expandPanelAction=new _lib.ExpandPanelAction;embeddable.registerAction(expandPanelAction);embeddable.attachAction(_embeddable_api.CONTEXT_MENU_TRIGGER,expandPanelAction.id)}},{key:"start",value:function start(core,plugins){var application=core.application,notifications=core.notifications,overlays=core.overlays;var embeddable=plugins.embeddable,inspector=plugins.inspector,__LEGACY=plugins.__LEGACY;var factory=new _lib.DashboardContainerFactory({application:application,notifications:notifications,overlays:overlays,embeddable:embeddable,inspector:inspector,SavedObjectFinder:__LEGACY.SavedObjectFinder,ExitFullScreenButton:__LEGACY.ExitFullScreenButton});embeddable.registerEmbeddableFactory(factory.type,factory)}},{key:"stop",value:function stop(){}}]);return DashboardEmbeddableContainerPublicPlugin}();exports.DashboardEmbeddableContainerPublicPlugin=DashboardEmbeddableContainerPublicPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddablePublicPlugin=void 0;var _api=__webpack_require__(1613);var _bootstrap=__webpack_require__(1646);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddablePublicPlugin=function(){function EmbeddablePublicPlugin(initializerContext){_classCallCheck(this,EmbeddablePublicPlugin);_defineProperty(this,"triggers",new Map);_defineProperty(this,"actions",new Map);_defineProperty(this,"embeddableFactories",new Map);_defineProperty(this,"api",void 0)}_createClass(EmbeddablePublicPlugin,[{key:"setup",value:function setup(core){var _createApi=(0,_api.createApi)({actions:this.actions,embeddableFactories:this.embeddableFactories,triggers:this.triggers});this.api=_createApi.api;(0,_bootstrap.bootstrap)(this.api);var _this$api=this.api,registerTrigger=_this$api.registerTrigger,registerAction=_this$api.registerAction,registerEmbeddableFactory=_this$api.registerEmbeddableFactory,attachAction=_this$api.attachAction;return{registerTrigger:registerTrigger,registerAction:registerAction,registerEmbeddableFactory:registerEmbeddableFactory,attachAction:attachAction}}},{key:"start",value:function start(core){return this.api}},{key:"stop",value:function stop(){}}]);return EmbeddablePublicPlugin}();exports.EmbeddablePublicPlugin=EmbeddablePublicPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={pureApi:true,createApi:true};exports.createApi=exports.pureApi=void 0;var _attach_action=__webpack_require__(1614);var _detach_action=__webpack_require__(1615);var _execute_trigger_actions=__webpack_require__(1616);var _get_embeddable_factories=__webpack_require__(1637);var _get_embeddable_factory=__webpack_require__(1638);var _get_trigger=__webpack_require__(1639);var _get_trigger_actions=__webpack_require__(1640);var _get_trigger_compatible_actions=__webpack_require__(1641);var _register_action=__webpack_require__(1642);var _register_embeddable_factory=__webpack_require__(1643);var _register_trigger=__webpack_require__(1644);var _types=__webpack_require__(1645);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})});function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var pureApi={attachAction:_attach_action.attachAction,detachAction:_detach_action.detachAction,executeTriggerActions:_execute_trigger_actions.executeTriggerActions,getEmbeddableFactories:_get_embeddable_factories.getEmbeddableFactories,getEmbeddableFactory:_get_embeddable_factory.getEmbeddableFactory,getTrigger:_get_trigger.getTrigger,getTriggerActions:_get_trigger_actions.getTriggerActions,getTriggerCompatibleActions:_get_trigger_compatible_actions.getTriggerCompatibleActions,registerAction:_register_action.registerAction,registerEmbeddableFactory:_register_embeddable_factory.registerEmbeddableFactory,registerTrigger:_register_trigger.registerTrigger};exports.pureApi=pureApi;var createApi=function createApi(deps){var partialApi={};var depsInternal=_objectSpread({},deps,{api:partialApi});for(var _i=0,_Object$entries=Object.entries(pureApi);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],fn=_Object$entries$_i[1];partialApi[key]=fn(depsInternal)}Object.freeze(partialApi);var api=partialApi;return{api:api,depsInternal:depsInternal}};exports.createApi=createApi},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.attachAction=void 0;var attachAction=function attachAction(_ref){var triggers=_ref.triggers;return function(triggerId,actionId){var trigger=triggers.get(triggerId);if(!trigger){throw new Error("No trigger [triggerId = ".concat(triggerId,"] exists, for attaching action [actionId = ").concat(actionId,"]."))}if(!trigger.actionIds.find(function(id){return id===actionId})){trigger.actionIds.push(actionId)}}};exports.attachAction=attachAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.detachAction=void 0;var detachAction=function detachAction(_ref){var triggers=_ref.triggers;return function(triggerId,actionId){var trigger=triggers.get(triggerId);if(!trigger){throw new Error("No trigger [triggerId = ".concat(triggerId,"] exists, for detaching action [actionId = ").concat(actionId,"]."))}trigger.actionIds=trigger.actionIds.filter(function(id){return id!==actionId})}};exports.detachAction=detachAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.executeTriggerActions=void 0;var _lib=__webpack_require__(441);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var executeSingleAction=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(action,actionContext){var href;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:href=action.getHref(actionContext);if(!href){_context.next=4;break}window.location.href=href;return _context.abrupt("return");case 4:_context.next=6;return action.execute(actionContext);case 6:case"end":return _context.stop()}}},_callee)}));return function executeSingleAction(_x,_x2){return _ref.apply(this,arguments)}}();var executeTriggerActions=function executeTriggerActions(_ref2){var api=_ref2.api;return function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(triggerId,actionContext){var actions,panel,session;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.getTriggerCompatibleActions(triggerId,actionContext);case 2:actions=_context2.sent;if(actions.length){_context2.next=5;break}throw new Error("No compatible actions found to execute for trigger [triggerId = ".concat(triggerId,"]."));case 5:if(!(actions.length===1)){_context2.next=9;break}_context2.next=8;return executeSingleAction(actions[0],actionContext);case 8:return _context2.abrupt("return");case 9:_context2.next=11;return(0,_lib.buildContextMenuForActions)({actions:actions,actionContext:actionContext,closeMenu:function closeMenu(){return session.close()}});case 11:panel=_context2.sent;session=(0,_lib.openContextMenu)([panel]);case 13:case"end":return _context2.stop()}}},_callee2)}));return function(_x3,_x4){return _ref3.apply(this,arguments)}}()};exports.executeTriggerActions=executeTriggerActions},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableFactory=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddableFactory=function(){function EmbeddableFactory(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},savedObjectMetaData=_ref.savedObjectMetaData;_classCallCheck(this,EmbeddableFactory);_defineProperty(this,"type",void 0);_defineProperty(this,"savedObjectMetaData",void 0);_defineProperty(this,"isContainerType",false);this.savedObjectMetaData=savedObjectMetaData}_createClass(EmbeddableFactory,[{key:"canCreateNew",value:function canCreateNew(){return true}},{key:"getDefaultInput",value:function getDefaultInput(partial){return{}}},{key:"getExplicitInput",value:function(){var _getExplicitInput=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",{});case 1:case"end":return _context.stop()}}},_callee)}));function getExplicitInput(){return _getExplicitInput.apply(this,arguments)}return getExplicitInput}()},{key:"createFromSavedObject",value:function createFromSavedObject(savedObjectId,input,parent){throw new Error("Creation from saved object not supported by type ".concat(this.type))}}]);return EmbeddableFactory}();exports.EmbeddableFactory=EmbeddableFactory},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.isErrorEmbeddable=isErrorEmbeddable;exports.ErrorEmbeddable=exports.ERROR_EMBEDDABLE_TYPE=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(13));var _embeddable=__webpack_require__(683);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ERROR_EMBEDDABLE_TYPE="error";exports.ERROR_EMBEDDABLE_TYPE=ERROR_EMBEDDABLE_TYPE;function isErrorEmbeddable(embeddable){return embeddable.error!==undefined}var ErrorEmbeddable=function(_Embeddable){_inherits(ErrorEmbeddable,_Embeddable);function ErrorEmbeddable(error,input,parent){var _this;_classCallCheck(this,ErrorEmbeddable);_this=_possibleConstructorReturn(this,_getPrototypeOf(ErrorEmbeddable).call(this,input,{},parent));_defineProperty(_assertThisInitialized(_this),"type",ERROR_EMBEDDABLE_TYPE);_defineProperty(_assertThisInitialized(_this),"error",void 0);_defineProperty(_assertThisInitialized(_this),"dom",void 0);_this.error=error;return _this}_createClass(ErrorEmbeddable,[{key:"reload",value:function reload(){}},{key:"render",value:function render(dom){var title=typeof this.error==="string"?this.error:this.error.message;this.dom=dom;_reactDom.default.render(_react.default.createElement("div",{className:"embPanel__error embPanel__content","data-test-subj":"embeddableStackError"},_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},_react.default.createElement(_eui.EuiIcon,{type:"alert",color:"danger"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),title)),dom)}},{key:"destroy",value:function destroy(){if(this.dom){_reactDom.default.unmountComponentAtNode(this.dom)}}}]);return ErrorEmbeddable}(_embeddable.Embeddable);exports.ErrorEmbeddable=ErrorEmbeddable},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ApplyFilterAction=exports.APPLY_FILTER_ACTION=void 0;var _i18n=__webpack_require__(2);var _action=__webpack_require__(442);var _errors=__webpack_require__(109);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var APPLY_FILTER_ACTION="APPLY_FILTER_ACTION";exports.APPLY_FILTER_ACTION=APPLY_FILTER_ACTION;var ApplyFilterAction=function(_Action){_inherits(ApplyFilterAction,_Action);function ApplyFilterAction(){var _this;_classCallCheck(this,ApplyFilterAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(ApplyFilterAction).call(this,APPLY_FILTER_ACTION));_defineProperty(_assertThisInitialized(_this),"type",APPLY_FILTER_ACTION);return _this}_createClass(ApplyFilterAction,[{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("embeddableApi.actions.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context){var root;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:root=context.embeddable.getRoot();return _context.abrupt("return",Boolean(root.getInput().filters!==undefined&&context.triggerContext&&context.triggerContext.filters!==undefined));case 2:case"end":return _context.stop()}}},_callee)}));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function execute(_ref){var embeddable=_ref.embeddable,triggerContext=_ref.triggerContext;if(!triggerContext){throw new Error("Applying a filter requires a filter as context")}var root=embeddable.getRoot();if(!this.isCompatible({triggerContext:triggerContext,embeddable:embeddable})){throw new _errors.IncompatibleActionError}root.updateInput({filters:triggerContext.filters})}}]);return ApplyFilterAction}(_action.Action);exports.ApplyFilterAction=ApplyFilterAction},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EditPanelAction=exports.EDIT_PANEL_ACTION_ID=void 0;var _i18n=__webpack_require__(2);var _action=__webpack_require__(442);var _types=__webpack_require__(89);var _errors=__webpack_require__(109);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EDIT_PANEL_ACTION_ID="editPanel";exports.EDIT_PANEL_ACTION_ID=EDIT_PANEL_ACTION_ID;var EditPanelAction=function(_Action){_inherits(EditPanelAction,_Action);function EditPanelAction(getEmbeddableFactory){var _this;_classCallCheck(this,EditPanelAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(EditPanelAction).call(this,EDIT_PANEL_ACTION_ID));_this.getEmbeddableFactory=getEmbeddableFactory;_defineProperty(_assertThisInitialized(_this),"type",EDIT_PANEL_ACTION_ID);_this.order=15;return _this}_createClass(EditPanelAction,[{key:"getDisplayName",value:function getDisplayName(_ref){var embeddable=_ref.embeddable;var factory=this.getEmbeddableFactory(embeddable.type);if(!factory){throw new _errors.EmbeddableFactoryNotFoundError(embeddable.type)}return _i18n.i18n.translate("embeddableApi.panel.editPanel.displayName",{defaultMessage:"Edit {value}",values:{value:factory.getDisplayName()}})}},{key:"getIconType",value:function getIconType(){return"pencil"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref2){var embeddable,canEditEmbeddable,inDashboardEditMode;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref2.embeddable;canEditEmbeddable=Boolean(embeddable&&embeddable.getOutput().editable&&embeddable.getOutput().editUrl);inDashboardEditMode=embeddable.getInput().viewMode===_types.ViewMode.EDIT;return _context.abrupt("return",Boolean(canEditEmbeddable&&inDashboardEditMode));case 4:case"end":return _context.stop()}}},_callee)}));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function execute(){return undefined}},{key:"getHref",value:function getHref(_ref3){var embeddable=_ref3.embeddable;var editUrl=embeddable?embeddable.getOutput().editUrl:undefined;return editUrl?editUrl:""}}]);return EditPanelAction}(_action.Action);exports.EditPanelAction=EditPanelAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={IContainer:true,PanelState:true,ContainerInput:true,ContainerOutput:true,Container:true};Object.defineProperty(exports,"IContainer",{enumerable:true,get:function get(){return _i_container.IContainer}});Object.defineProperty(exports,"PanelState",{enumerable:true,get:function get(){return _i_container.PanelState}});Object.defineProperty(exports,"ContainerInput",{enumerable:true,get:function get(){return _i_container.ContainerInput}});Object.defineProperty(exports,"ContainerOutput",{enumerable:true,get:function get(){return _i_container.ContainerOutput}});Object.defineProperty(exports,"Container",{enumerable:true,get:function get(){return _container.Container}});var _i_container=__webpack_require__(1623);var _container=__webpack_require__(1624);var _embeddable_child_panel=__webpack_require__(1625);Object.keys(_embeddable_child_panel).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddable_child_panel[key]}})})},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Container=void 0;var _uuid=_interopRequireDefault(__webpack_require__(31));var _rxjs=__webpack_require__(16);var _embeddables=__webpack_require__(682);var _errors=__webpack_require__(109);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getKeys=function getKeys(o){return Object.keys(o)};var Container=function(_Embeddable){_inherits(Container,_Embeddable);function Container(input,output,getFactory,parent){var _this;_classCallCheck(this,Container);_this=_possibleConstructorReturn(this,_getPrototypeOf(Container).call(this,input,output,parent));_this.getFactory=getFactory;_defineProperty(_assertThisInitialized(_this),"isContainer",true);_defineProperty(_assertThisInitialized(_this),"children",{});_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_this.subscription=_this.getInput$().subscribe(function(){return _this.maybeUpdateChildren()});return _this}_createClass(Container,[{key:"updateInputForChild",value:function updateInputForChild(id,changes){if(!this.input.panels[id]){throw new _errors.PanelNotFoundError}var panels={panels:_objectSpread({},this.input.panels,_defineProperty({},id,_objectSpread({},this.input.panels[id],{explicitInput:_objectSpread({},this.input.panels[id].explicitInput,{},changes)})))};this.updateInput(panels)}},{key:"reload",value:function reload(){Object.values(this.children).forEach(function(child){return child.reload()})}},{key:"addNewEmbeddable",value:function(){var _addNewEmbeddable=_asyncToGenerator(regeneratorRuntime.mark(function _callee(type,explicitInput){var factory,panelState;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:factory=this.getFactory(type);if(factory){_context.next=3;break}throw new _errors.EmbeddableFactoryNotFoundError(type);case 3:panelState=this.createNewPanelState(factory,explicitInput);return _context.abrupt("return",this.createAndSaveEmbeddable(type,panelState));case 5:case"end":return _context.stop()}}},_callee,this)}));function addNewEmbeddable(_x,_x2){return _addNewEmbeddable.apply(this,arguments)}return addNewEmbeddable}()},{key:"addSavedObjectEmbeddable",value:function(){var _addSavedObjectEmbeddable=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(type,savedObjectId){var factory,panelState;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:factory=this.getFactory(type);panelState=this.createNewPanelState(factory);panelState.savedObjectId=savedObjectId;return _context2.abrupt("return",this.createAndSaveEmbeddable(type,panelState));case 4:case"end":return _context2.stop()}}},_callee2,this)}));function addSavedObjectEmbeddable(_x3,_x4){return _addSavedObjectEmbeddable.apply(this,arguments)}return addSavedObjectEmbeddable}()},{key:"removeEmbeddable",value:function removeEmbeddable(embeddableId){var panels=_objectSpread({},this.input.panels);delete panels[embeddableId];this.updateInput({panels:panels})}},{key:"getChildIds",value:function getChildIds(){return Object.keys(this.children)}},{key:"getChild",value:function getChild(id){return this.children[id]}},{key:"getInputForChild",value:function getInputForChild(embeddableId){var containerInput=this.getInheritedInput(embeddableId);var panelState=this.getPanelState(embeddableId);var explicitInput=panelState.explicitInput;var explicitFiltered={};var keys=getKeys(panelState.explicitInput);keys.forEach(function(key){if(explicitInput[key]===undefined&&containerInput[key]!==undefined){return}explicitFiltered[key]=explicitInput[key]});return _objectSpread({},containerInput,{},explicitFiltered)}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Container.prototype),"destroy",this).call(this);Object.values(this.children).forEach(function(child){return child.destroy()});this.subscription.unsubscribe()}},{key:"untilEmbeddableLoaded",value:function(){var _untilEmbeddableLoaded=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(id){var _this2=this;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(this.input.panels[id]){_context3.next=2;break}throw new _errors.PanelNotFoundError;case 2:if(!this.output.embeddableLoaded[id]){_context3.next=4;break}return _context3.abrupt("return",this.children[id]);case 4:return _context3.abrupt("return",new Promise(function(resolve,reject){var subscription=(0,_rxjs.merge)(_this2.getOutput$(),_this2.getInput$()).subscribe(function(){if(_this2.output.embeddableLoaded[id]){subscription.unsubscribe();resolve(_this2.children[id])}if(_this2.input.panels[id]===undefined){subscription.unsubscribe();reject(new _errors.PanelNotFoundError)}})}));case 5:case"end":return _context3.stop()}}},_callee3,this)}));function untilEmbeddableLoaded(_x5){return _untilEmbeddableLoaded.apply(this,arguments)}return untilEmbeddableLoaded}()},{key:"createNewPanelState",value:function createNewPanelState(factory){var partial=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var embeddableId=partial.id||_uuid.default.v4();var explicitInput=this.createNewExplicitEmbeddableInput(embeddableId,factory,partial);return{type:factory.type,explicitInput:_objectSpread({id:embeddableId},explicitInput)}}},{key:"getPanelState",value:function getPanelState(embeddableId){if(this.input.panels[embeddableId]===undefined){throw new _errors.PanelNotFoundError}var panelState=this.input.panels[embeddableId];return panelState}},{key:"createAndSaveEmbeddable",value:function(){var _createAndSaveEmbeddable=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(type,panelState){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.updateInput({panels:_objectSpread({},this.input.panels,_defineProperty({},panelState.explicitInput.id,panelState))});_context4.next=3;return this.untilEmbeddableLoaded(panelState.explicitInput.id);case 3:return _context4.abrupt("return",_context4.sent);case 4:case"end":return _context4.stop()}}},_callee4,this)}));function createAndSaveEmbeddable(_x6,_x7){return _createAndSaveEmbeddable.apply(this,arguments)}return createAndSaveEmbeddable}()},{key:"createNewExplicitEmbeddableInput",value:function createNewExplicitEmbeddableInput(id,factory){var partial=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var inheritedInput=this.getInheritedInput(id);var defaults=factory.getDefaultInput(partial);var explicitInput=partial;getKeys(defaults).forEach(function(key){var inheritedValue=inheritedInput[key];if(inheritedValue===undefined&&explicitInput[key]===undefined){explicitInput[key]=defaults[key]}});return explicitInput}},{key:"onPanelRemoved",value:function onPanelRemoved(id){var embeddable=this.getChild(id);if(embeddable){embeddable.destroy();delete this.children[id]}this.updateOutput({embeddableLoaded:_objectSpread({},this.output.embeddableLoaded,_defineProperty({},id,undefined))})}},{key:"onPanelAdded",value:function(){var _onPanelAdded=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(panel){var embeddable,inputForChild,factory;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:this.updateOutput({embeddableLoaded:_objectSpread({},this.output.embeddableLoaded,_defineProperty({},panel.explicitInput.id,false))});inputForChild=this.getInputForChild(panel.explicitInput.id);_context5.prev=2;factory=this.getFactory(panel.type);if(factory){_context5.next=6;break}throw new _errors.EmbeddableFactoryNotFoundError(panel.type);case 6:if(!panel.savedObjectId){_context5.next=12;break}_context5.next=9;return factory.createFromSavedObject(panel.savedObjectId,inputForChild,this);case 9:_context5.t0=_context5.sent;_context5.next=15;break;case 12:_context5.next=14;return factory.create(inputForChild,this);case 14:_context5.t0=_context5.sent;case 15:embeddable=_context5.t0;_context5.next=21;break;case 18:_context5.prev=18;_context5.t1=_context5["catch"](2);embeddable=new _embeddables.ErrorEmbeddable(_context5.t1,{id:panel.explicitInput.id},this);case 21:if(!embeddable){_context5.next=30;break}if(this.input.panels[panel.explicitInput.id]){_context5.next=25;break}embeddable.destroy();return _context5.abrupt("return");case 25:if(embeddable.getOutput().savedObjectId){this.updateInput({panels:_objectSpread({},this.input.panels,_defineProperty({},panel.explicitInput.id,_objectSpread({},this.input.panels[panel.explicitInput.id],{},embeddable.getOutput().savedObjectId?{savedObjectId:embeddable.getOutput().savedObjectId}:undefined,{explicitInput:_objectSpread({},this.input.panels[panel.explicitInput.id].explicitInput)})))})}this.children[embeddable.id]=embeddable;this.updateOutput({embeddableLoaded:_objectSpread({},this.output.embeddableLoaded,_defineProperty({},panel.explicitInput.id,true))});_context5.next=31;break;case 30:if(embeddable===undefined){this.removeEmbeddable(panel.explicitInput.id)}case 31:return _context5.abrupt("return",embeddable);case 32:case"end":return _context5.stop()}}},_callee5,this,[[2,18]])}));function onPanelAdded(_x8){return _onPanelAdded.apply(this,arguments)}return onPanelAdded}()},{key:"maybeUpdateChildren",value:function maybeUpdateChildren(){var _this3=this;var allIds=Object.keys(_objectSpread({},this.input.panels,{},this.output.embeddableLoaded));allIds.forEach(function(id){if(_this3.input.panels[id]!==undefined&&_this3.output.embeddableLoaded[id]===undefined){_this3.onPanelAdded(_this3.input.panels[id])}else if(_this3.input.panels[id]===undefined&&_this3.output.embeddableLoaded[id]!==undefined){_this3.onPanelRemoved(id)}})}}]);return Container}(_embeddables.Embeddable);exports.Container=Container},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableChildPanel=void 0;var _classnames=_interopRequireDefault(__webpack_require__(26));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);var _panel=__webpack_require__(685);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddableChildPanelUi=function(_React$Component){_inherits(EmbeddableChildPanelUi,_React$Component);function EmbeddableChildPanelUi(props){var _this;_classCallCheck(this,EmbeddableChildPanelUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmbeddableChildPanelUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"mounted",void 0);_defineProperty(_assertThisInitialized(_this),"embeddable",void 0);_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_this.state={loading:true};_this.mounted=false;return _this}_createClass(EmbeddableChildPanelUi,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var container;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.mounted=true;container=this.props.container;_context.next=4;return container.untilEmbeddableLoaded(this.props.embeddableId);case 4:this.embeddable=_context.sent;if(this.mounted){this.setState({loading:false})}case 6:case"end":return _context.stop()}}},_callee,this)}));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"render",value:function render(){var classes=(0,_classnames.default)("embPanel embPanel__content",{"embPanel__content-isLoading":this.state.loading});return _react.default.createElement("div",{id:"embeddedPanel",className:classes},this.state.loading||!this.embeddable?_react.default.createElement(_eui.EuiLoadingChart,{size:"l",mono:true}):_react.default.createElement(_panel.EmbeddablePanel,{embeddable:this.embeddable,getActions:this.props.getActions,getEmbeddableFactory:this.props.getEmbeddableFactory,getAllEmbeddableFactories:this.props.getAllEmbeddableFactories,overlays:this.props.overlays,notifications:this.props.notifications,inspector:this.props.inspector,SavedObjectFinder:this.props.SavedObjectFinder}))}}]);return EmbeddableChildPanelUi}(_react.default.Component);var EmbeddableChildPanel=(0,_react2.injectI18n)(EmbeddableChildPanelUi);exports.EmbeddableChildPanel=EmbeddableChildPanel},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddablePanel=void 0;var _eui=__webpack_require__(3);var _classnames=_interopRequireDefault(__webpack_require__(26));var _react=_interopRequireDefault(__webpack_require__(0));var _context_menu_actions=__webpack_require__(686);var _triggers=__webpack_require__(684);var _types=__webpack_require__(89);var _panel_actions=__webpack_require__(687);var _add_panel_action=__webpack_require__(689);var _customize_panel_action=__webpack_require__(1632);var _panel_header=__webpack_require__(1633);var _inspect_panel_action=__webpack_require__(688);var _actions=__webpack_require__(110);var _customize_panel_modal=__webpack_require__(1635);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddablePanel=function(_React$Component){_inherits(EmbeddablePanel,_React$Component);function EmbeddablePanel(props){var _this;_classCallCheck(this,EmbeddablePanel);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmbeddablePanel).call(this,props));_defineProperty(_assertThisInitialized(_this),"embeddableRoot",void 0);_defineProperty(_assertThisInitialized(_this),"parentSubscription",void 0);_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"onFocus",function(focusedPanelIndex){_this.setState({focusedPanelIndex:focusedPanelIndex})});_defineProperty(_assertThisInitialized(_this),"onBlur",function(blurredPanelIndex){if(_this.state.focusedPanelIndex===blurredPanelIndex){_this.setState({focusedPanelIndex:undefined})}});_defineProperty(_assertThisInitialized(_this),"closeMyContextMenuPanel",function(){if(_this.mounted){_this.setState({closeContextMenu:true},function(){if(_this.mounted){_this.setState({closeContextMenu:false})}})}});_defineProperty(_assertThisInitialized(_this),"getActionContextMenuPanel",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var actions,createGetUserData,extraActions,sorted;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.props.getActions(_triggers.CONTEXT_MENU_TRIGGER,{embeddable:_this.props.embeddable});case 2:actions=_context2.sent;createGetUserData=function createGetUserData(overlays){return function(){var _getUserData=_asyncToGenerator(regeneratorRuntime.mark(function _callee(context){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise(function(resolve){var session=overlays.openModal(_react.default.createElement(_customize_panel_modal.CustomizePanelModal,{embeddable:context.embeddable,updateTitle:function updateTitle(title){session.close();resolve({title:title})}}),{"data-test-subj":"customizePanel"})}));case 1:case"end":return _context.stop()}}},_callee)}));function getUserData(_x){return _getUserData.apply(this,arguments)}return getUserData}()};extraActions=[new _customize_panel_action.CustomizePanelTitleAction(createGetUserData(_this.props.overlays)),new _add_panel_action.AddPanelAction(_this.props.getEmbeddableFactory,_this.props.getAllEmbeddableFactories,_this.props.overlays,_this.props.notifications,_this.props.SavedObjectFinder),new _inspect_panel_action.InspectPanelAction(_this.props.inspector),new _panel_actions.RemovePanelAction,new _actions.EditPanelAction(_this.props.getEmbeddableFactory)];sorted=actions.concat(extraActions).sort(function(a,b){return b.order-a.order});_context2.next=8;return(0,_context_menu_actions.buildContextMenuForActions)({actions:sorted,actionContext:{embeddable:_this.props.embeddable},closeMenu:_this.closeMyContextMenuPanel});case 8:return _context2.abrupt("return",_context2.sent);case 9:case"end":return _context2.stop()}}},_callee2)})));var embeddable=_this.props.embeddable;var viewMode=embeddable.getInput().viewMode?embeddable.getInput().viewMode:_types.ViewMode.EDIT;var hidePanelTitles=embeddable.parent?Boolean(embeddable.parent.getInput().hidePanelTitles):false;_this.state={panels:[],viewMode:viewMode,hidePanelTitles:hidePanelTitles,closeContextMenu:false,badges:[]};_this.embeddableRoot=_react.default.createRef();return _this}_createClass(EmbeddablePanel,[{key:"refreshBadges",value:function(){var _refreshBadges=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var badges;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.props.getActions(_triggers.PANEL_BADGE_TRIGGER,{embeddable:this.props.embeddable});case 2:badges=_context3.sent;if(this.mounted){this.setState({badges:badges})}case 4:case"end":return _context3.stop()}}},_callee3,this)}));function refreshBadges(){return _refreshBadges.apply(this,arguments)}return refreshBadges}()},{key:"componentWillMount",value:function componentWillMount(){var _this2=this;this.mounted=true;var embeddable=this.props.embeddable;var parent=embeddable.parent;this.subscription=embeddable.getInput$().subscribe(_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(_this2.mounted){_this2.setState({viewMode:embeddable.getInput().viewMode?embeddable.getInput().viewMode:_types.ViewMode.EDIT});_this2.refreshBadges()}case 1:case"end":return _context4.stop()}}},_callee4)})));if(parent){this.parentSubscription=parent.getInput$().subscribe(_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(_this2.mounted&&parent){_this2.setState({hidePanelTitles:Boolean(parent.getInput().hidePanelTitles)});_this2.refreshBadges()}case 1:case"end":return _context5.stop()}}},_callee5)})))}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}if(this.parentSubscription){this.parentSubscription.unsubscribe()}this.props.embeddable.destroy()}},{key:"render",value:function render(){var viewOnlyMode=this.state.viewMode===_types.ViewMode.VIEW;var classes=(0,_classnames.default)("embPanel",{"embPanel--editing":!viewOnlyMode});var title=this.props.embeddable.getTitle();return _react.default.createElement(_eui.EuiPanel,{className:classes,"data-test-subj":"embeddablePanel",paddingSize:"none"},_react.default.createElement(_panel_header.PanelHeader,{getActionContextMenuPanel:this.getActionContextMenuPanel,hidePanelTitles:this.state.hidePanelTitles,isViewMode:viewOnlyMode,closeContextMenu:this.state.closeContextMenu,title:title,badges:this.state.badges,embeddable:this.props.embeddable}),_react.default.createElement("div",{className:"embPanel__content",ref:this.embeddableRoot}))}},{key:"componentDidMount",value:function componentDidMount(){if(this.embeddableRoot.current){this.props.embeddable.render(this.embeddableRoot.current)}}}]);return EmbeddablePanel}(_react.default.Component);exports.EmbeddablePanel=EmbeddablePanel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildContextMenuForActions=buildContextMenuForActions;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function buildContextMenuForActions(_x){return _buildContextMenuForActions.apply(this,arguments)}function _buildContextMenuForActions(){_buildContextMenuForActions=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var actions,actionContext,closeMenu,menuItems;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:actions=_ref.actions,actionContext=_ref.actionContext,closeMenu=_ref.closeMenu;_context.next=3;return buildEuiContextMenuPanelItems({actions:actions,actionContext:actionContext,closeMenu:closeMenu});case 3:menuItems=_context.sent;return _context.abrupt("return",{id:"mainMenu",title:_i18n.i18n.translate("embeddableApi.actionPanel.title",{defaultMessage:"Options"}),items:menuItems});case 5:case"end":return _context.stop()}}},_callee)}));return _buildContextMenuForActions.apply(this,arguments)}function buildEuiContextMenuPanelItems(_x2){return _buildEuiContextMenuPanelItems.apply(this,arguments)}function _buildEuiContextMenuPanelItems(){_buildEuiContextMenuPanelItems=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref2){var actions,actionContext,closeMenu,items,promises;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:actions=_ref2.actions,actionContext=_ref2.actionContext,closeMenu=_ref2.closeMenu;items=[];promises=actions.map(function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(action){var isCompatible;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return action.isCompatible(actionContext);case 2:isCompatible=_context2.sent;if(isCompatible){_context2.next=5;break}return _context2.abrupt("return");case 5:items.push(convertPanelActionToContextMenuItem({action:action,actionContext:actionContext,closeMenu:closeMenu}));case 6:case"end":return _context2.stop()}}},_callee2)}));return function(_x3){return _ref4.apply(this,arguments)}}());_context3.next=5;return Promise.all(promises);case 5:return _context3.abrupt("return",items);case 6:case"end":return _context3.stop()}}},_callee3)}));return _buildEuiContextMenuPanelItems.apply(this,arguments)}function convertPanelActionToContextMenuItem(_ref3){var action=_ref3.action,actionContext=_ref3.actionContext,closeMenu=_ref3.closeMenu;var menuPanelItem={name:action.getDisplayName(actionContext),icon:action.getIconType(actionContext),panel:_lodash.default.get(action,"childContextMenuPanel.id"),"data-test-subj":"embeddablePanelAction-".concat(action.id)};menuPanelItem.onClick=function(){action.execute(actionContext);closeMenu()};if(action.getHref(actionContext)){menuPanelItem.href=action.getHref(actionContext)}return menuPanelItem}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.openContextMenu=openContextMenu;exports.ContextMenuSession=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _events=__webpack_require__(48);var _reactDom=_interopRequireDefault(__webpack_require__(13));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var activeSession=null;var CONTAINER_ID="contextMenu-container";var initialized=false;function getOrCreateContainerElement(){var container=document.getElementById(CONTAINER_ID);var y=getMouseY()+document.body.scrollTop;if(!container){container=document.createElement("div");container.style.left=getMouseX()+"px";container.style.top=y+"px";container.style.position="absolute";container.style.zIndex="999";container.id=CONTAINER_ID;document.body.appendChild(container)}else{container.style.left=getMouseX()+"px";container.style.top=y+"px"}return container}var x=0;var y=0;function initialize(){if(!initialized){document.addEventListener("mousemove",onMouseUpdate,false);document.addEventListener("mouseenter",onMouseUpdate,false);initialized=true}}function onMouseUpdate(e){x=e.pageX;y=e.pageY}function getMouseX(){return x}function getMouseY(){return y}initialize();var ContextMenuSession=function(_EventEmitter){_inherits(ContextMenuSession,_EventEmitter);function ContextMenuSession(){_classCallCheck(this,ContextMenuSession);return _possibleConstructorReturn(this,_getPrototypeOf(ContextMenuSession).apply(this,arguments))}_createClass(ContextMenuSession,[{key:"bindToAngularScope",value:function bindToAngularScope(scope){var _this=this;var removeWatch=scope.$on("$destroy",function(){return _this.close()});this.on("closed",function(){return removeWatch()})}},{key:"close",value:function close(){if(activeSession===this){var container=document.getElementById(CONTAINER_ID);if(container){_reactDom.default.unmountComponentAtNode(container);this.emit("closed")}}}}]);return ContextMenuSession}(_events.EventEmitter);exports.ContextMenuSession=ContextMenuSession;function openContextMenu(panels){var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(activeSession){activeSession.close()}var container=getOrCreateContainerElement();var session=activeSession=new ContextMenuSession;var onClose=function onClose(){if(props.onClose){props.onClose()}session.close()};_reactDom.default.render(_react.default.createElement(_eui.EuiPopover,{id:"dashboardPanelContextMenu",className:"embPanel__optionsMenuPopover",button:container,isOpen:true,closePopover:onClose,panelPaddingSize:"none",anchorPosition:"downRight",withTitle:true},_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:"mainMenu",panels:panels})),container);return session}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _add_panel_action=__webpack_require__(689);Object.keys(_add_panel_action).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _add_panel_action[key]}})});var _open_add_panel_flyout=__webpack_require__(690);Object.keys(_open_add_panel_flyout).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _open_add_panel_flyout[key]}})})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AddPanelFlyout=void 0;var _i18n=__webpack_require__(2);var _react=__webpack_require__(5);var _react2=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _errors=__webpack_require__(109);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AddPanelFlyout=function(_React$Component){_inherits(AddPanelFlyout,_React$Component);function AddPanelFlyout(props){var _this;_classCallCheck(this,AddPanelFlyout);_this=_possibleConstructorReturn(this,_getPrototypeOf(AddPanelFlyout).call(this,props));_defineProperty(_assertThisInitialized(_this),"lastToast",void 0);_defineProperty(_assertThisInitialized(_this),"showToast",function(name){if(_this.lastToast){_this.props.notifications.toasts.remove(_this.lastToast)}_this.lastToast=_this.props.notifications.toasts.addSuccess({title:_i18n.i18n.translate("embeddableApi.addPanel.savedObjectAddedToContainerSuccessMessageTitle",{defaultMessage:"{savedObjectName} was added",values:{savedObjectName:name}}),"data-test-subj":"addObjectToContainerSuccess"})});_defineProperty(_assertThisInitialized(_this),"createNewEmbeddable",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(type){var factory,explicitInput,embeddable;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.props.onClose();factory=_this.props.getFactory(type);if(factory){_context.next=4;break}throw new _errors.EmbeddableFactoryNotFoundError(type);case 4:_context.next=6;return factory.getExplicitInput();case 6:explicitInput=_context.sent;_context.next=9;return _this.props.container.addNewEmbeddable(type,explicitInput);case 9:embeddable=_context.sent;if(embeddable){_this.showToast(embeddable.getInput().title||"")}case 11:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"onAddPanel",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(id,type,name){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.props.container.addSavedObjectEmbeddable(type,id);_this.showToast(name);case 2:case"end":return _context2.stop()}}},_callee2)}));return function(_x2,_x3,_x4){return _ref2.apply(this,arguments)}}());return _this}_createClass(AddPanelFlyout,[{key:"getSelectCreateNewOptions",value:function getSelectCreateNewOptions(){var list=[{value:"createNew",inputDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react.FormattedMessage,{id:"embeddableApi.addPanel.createNewDefaultOption",defaultMessage:"Create new ..."}))}].concat(_toConsumableArray(_toConsumableArray(this.props.getAllFactories()).filter(function(factory){return factory.isEditable()&&!factory.isContainerType&&factory.canCreateNew()}).map(function(factory){return{inputDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react.FormattedMessage,{id:"embeddableApi.addPanel.createNew",defaultMessage:"Create new {factoryName}",values:{factoryName:factory.getDisplayName()}})),value:factory.type,"data-test-subj":"createNew-".concat(factory.type)}})));return list}},{key:"render",value:function render(){var _this2=this;var SavedObjectFinder=this.props.SavedObjectFinder;var savedObjectsFinder=_react2.default.createElement(SavedObjectFinder,{onChoose:this.onAddPanel,savedObjectMetaData:_toConsumableArray(this.props.getAllFactories()).filter(function(embeddableFactory){return Boolean(embeddableFactory.savedObjectMetaData)&&!embeddableFactory.isContainerType}).map(function(_ref3){var savedObjectMetaData=_ref3.savedObjectMetaData;return savedObjectMetaData}),showFilter:true,noItemsMessage:_i18n.i18n.translate("embeddableApi.addPanel.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."})});return _react2.default.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:this.props.onClose,"data-test-subj":"dashboardAddPanel"},_react2.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react2.default.createElement(_eui.EuiTitle,{size:"m"},_react2.default.createElement("h2",null,_react2.default.createElement(_react.FormattedMessage,{id:"embeddableApi.addPanel.Title",defaultMessage:"Add panels"})))),_react2.default.createElement(_eui.EuiFlyoutBody,null,savedObjectsFinder),_react2.default.createElement(_eui.EuiFlyoutFooter,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiSuperSelect,{"data-test-subj":"createNew",options:this.getSelectCreateNewOptions(),valueOfSelected:"createNew",onChange:function onChange(value){return _this2.createNewEmbeddable(value)}})))))}}]);return AddPanelFlyout}(_react2.default.Component);exports.AddPanelFlyout=AddPanelFlyout},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RemovePanelAction=exports.REMOVE_PANEL_ACTION=void 0;var _i18n=__webpack_require__(2);var _types=__webpack_require__(89);var _actions=__webpack_require__(110);var _errors=__webpack_require__(109);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REMOVE_PANEL_ACTION="deletePanel";exports.REMOVE_PANEL_ACTION=REMOVE_PANEL_ACTION;function hasExpandedPanelInput(container){return container.getInput().expandedPanelId!==undefined}var RemovePanelAction=function(_Action){_inherits(RemovePanelAction,_Action);function RemovePanelAction(){var _this;_classCallCheck(this,RemovePanelAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(RemovePanelAction).call(this,REMOVE_PANEL_ACTION));_defineProperty(_assertThisInitialized(_this),"type",REMOVE_PANEL_ACTION);_this.order=5;return _this}_createClass(RemovePanelAction,[{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("embeddableApi.panel.removePanel.displayName",{defaultMessage:"Delete from dashboard"})}},{key:"getIconType",value:function getIconType(){return"trash"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var embeddable,isPanelExpanded;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;isPanelExpanded=embeddable.parent&&hasExpandedPanelInput(embeddable.parent)&&embeddable.parent.getInput().expandedPanelId===embeddable.id;return _context.abrupt("return",Boolean(embeddable.parent&&embeddable.getInput().viewMode===_types.ViewMode.EDIT&&!isPanelExpanded));case 3:case"end":return _context.stop()}}},_callee)}));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function execute(_ref2){var embeddable=_ref2.embeddable;if(!embeddable.parent||!this.isCompatible({embeddable:embeddable})){throw new _errors.IncompatibleActionError}embeddable.parent.removeEmbeddable(embeddable.id)}}]);return RemovePanelAction}(_actions.Action);exports.RemovePanelAction=RemovePanelAction},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CustomizePanelTitleAction=void 0;var _i18n=__webpack_require__(2);var _actions=__webpack_require__(110);var _types=__webpack_require__(89);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CUSTOMIZE_PANEL_ACTION_ID="CUSTOMIZE_PANEL_ACTION_ID";var CustomizePanelTitleAction=function(_Action){_inherits(CustomizePanelTitleAction,_Action);function CustomizePanelTitleAction(getDataFromUser){var _this;_classCallCheck(this,CustomizePanelTitleAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(CustomizePanelTitleAction).call(this,CUSTOMIZE_PANEL_ACTION_ID));_this.getDataFromUser=getDataFromUser;_defineProperty(_assertThisInitialized(_this),"type",CUSTOMIZE_PANEL_ACTION_ID);_this.order=10;return _this}_createClass(CustomizePanelTitleAction,[{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("embeddableApi.customizePanel.action.displayName",{defaultMessage:"Customize panel"})}},{key:"getIconType",value:function getIconType(){return"pencil"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var embeddable;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;return _context.abrupt("return",embeddable.getInput().viewMode===_types.ViewMode.EDIT?true:false);case 2:case"end":return _context.stop()}}},_callee)}));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var embeddable,customTitle;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable;_context2.next=3;return this.getDataFromUser({embeddable:embeddable});case 3:customTitle=_context2.sent;embeddable.updateInput(customTitle);case 5:case"end":return _context2.stop()}}},_callee2,this)}));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return CustomizePanelTitleAction}(_actions.Action);exports.CustomizePanelTitleAction=CustomizePanelTitleAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelHeader=void 0;var _eui=__webpack_require__(3);var _react=__webpack_require__(5);var _classnames=_interopRequireDefault(__webpack_require__(26));var _react2=_interopRequireDefault(__webpack_require__(0));var _panel_options_menu=__webpack_require__(1634);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderBadges(badges,embeddable){return badges.map(function(badge){return _react2.default.createElement(_eui.EuiBadge,{key:badge.id,iconType:badge.getIconType({embeddable:embeddable}),onClick:function onClick(){return badge.execute({embeddable:embeddable})},onClickAriaLabel:badge.getDisplayName({embeddable:embeddable})},badge.getDisplayName({embeddable:embeddable}))})}function PanelHeaderUi(_ref){var title=_ref.title,isViewMode=_ref.isViewMode,hidePanelTitles=_ref.hidePanelTitles,getActionContextMenuPanel=_ref.getActionContextMenuPanel,intl=_ref.intl,closeContextMenu=_ref.closeContextMenu,badges=_ref.badges,embeddable=_ref.embeddable;var classes=(0,_classnames.default)("embPanel__header",{"embPanel__header--floater":!title||hidePanelTitles});var showTitle=!isViewMode||title&&!hidePanelTitles;var showPanelBar=badges.length>0||showTitle;if(!showPanelBar){return _react2.default.createElement("div",{className:classes},_react2.default.createElement(_panel_options_menu.PanelOptionsMenu,{getActionContextMenuPanel:getActionContextMenuPanel,isViewMode:isViewMode,closeContextMenu:closeContextMenu}))}return _react2.default.createElement("div",{className:classes,"data-test-subj":"embeddablePanelHeading-".concat((title||"").replace(/\s/g,""))},_react2.default.createElement("div",{"data-test-subj":"dashboardPanelTitle",className:"embPanel__title embPanel__dragger",title:title,"aria-label":intl.formatMessage({id:"embeddableApi.panel.dashboardPanelAriaLabel",defaultMessage:"Dashboard panel: {title}"},{title:title})},showTitle?"".concat(title," "):"",renderBadges(badges,embeddable)),_react2.default.createElement(_panel_options_menu.PanelOptionsMenu,{isViewMode:isViewMode,getActionContextMenuPanel:getActionContextMenuPanel,closeContextMenu:closeContextMenu}))}var PanelHeader=(0,_react.injectI18n)(PanelHeaderUi);exports.PanelHeader=PanelHeader},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenu=void 0;var _react=__webpack_require__(5);var _react2=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PanelOptionsMenuUi=function(_React$Component){_inherits(PanelOptionsMenuUi,_React$Component);_createClass(PanelOptionsMenuUi,null,[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,state){if(props.closeContextMenu){return _objectSpread({},state,{isPopoverOpen:false})}else{return state}}}]);function PanelOptionsMenuUi(props){var _this;_classCallCheck(this,PanelOptionsMenuUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(PanelOptionsMenuUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"closePopover",function(){if(_this.mounted){_this.setState({isPopoverOpen:false})}});_defineProperty(_assertThisInitialized(_this),"toggleContextMenu",function(){if(!_this.mounted)return;var after=function after(){if(!_this.state.isPopoverOpen)return;_this.setState({actionContextMenuPanel:undefined});_this.props.getActionContextMenuPanel().then(function(actionContextMenuPanel){if(!_this.mounted)return;_this.setState({actionContextMenuPanel:actionContextMenuPanel})}).catch(function(error){return console.error(error)})};_this.setState(function(_ref){var isPopoverOpen=_ref.isPopoverOpen;return{isPopoverOpen:!isPopoverOpen}},after)});_this.state={actionContextMenuPanel:undefined,isPopoverOpen:false};return _this}_createClass(PanelOptionsMenuUi,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var actionContextMenuPanel;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.mounted=true;this.setState({actionContextMenuPanel:undefined});_context.next=4;return this.props.getActionContextMenuPanel();case 4:actionContextMenuPanel=_context.sent;if(this.mounted){this.setState({actionContextMenuPanel:actionContextMenuPanel})}case 6:case"end":return _context.stop()}}},_callee,this)}));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false}},{key:"render",value:function render(){var _this$props=this.props,isViewMode=_this$props.isViewMode,intl=_this$props.intl;var button=_react2.default.createElement(_eui.EuiButtonIcon,{iconType:isViewMode?"boxesHorizontal":"gear",color:"text",className:"embPanel__optionsMenuButton","aria-label":intl.formatMessage({id:"embeddableApi.panel.optionsMenu.panelOptionsButtonAriaLabel",defaultMessage:"Panel options"}),"data-test-subj":"embeddablePanelToggleMenuIcon",onClick:this.toggleContextMenu});return _react2.default.createElement(_eui.EuiPopover,{id:"dashboardPanelContextMenu",className:"embPanel__optionsMenuPopover",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downRight","data-test-subj":this.state.isPopoverOpen?"embeddablePanelContextMenuOpen":"embeddablePanelContextMenuClosed",withTitle:true},_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:"mainMenu",panels:this.state.actionContextMenuPanel?[this.state.actionContextMenuPanel]:[]}))}}]);return PanelOptionsMenuUi}(_react2.default.Component);var PanelOptionsMenu=(0,_react.injectI18n)(PanelOptionsMenuUi);exports.PanelOptionsMenu=PanelOptionsMenu},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CustomizePanelModal=exports.CustomizePanelModalUi=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CustomizePanelModalUi=function(_Component){_inherits(CustomizePanelModalUi,_Component);function CustomizePanelModalUi(props){var _this;_classCallCheck(this,CustomizePanelModalUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(CustomizePanelModalUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"updateTitle",function(title){_this.setState({title:title===""?undefined:title})});_defineProperty(_assertThisInitialized(_this),"reset",function(){_this.setState({title:undefined})});_defineProperty(_assertThisInitialized(_this),"onHideTitleToggle",function(){_this.setState(function(prevState){return{hideTitle:!prevState.hideTitle}})});_defineProperty(_assertThisInitialized(_this),"save",function(){if(_this.state.hideTitle){_this.props.updateTitle("")}else{var _newTitle=_this.state.title===""?undefined:_this.state.title;_this.props.updateTitle(_newTitle)}});_this.state={hideTitle:props.embeddable.getOutput().title==="",title:props.embeddable.getInput().title};return _this}_createClass(CustomizePanelModalUi,[{key:"render",value:function render(){var _this2=this;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,{"data-test-subj":"customizePanelTitle"},"Customize panel")),_react.default.createElement(_eui.EuiModalBody,null," ",_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{checked:!this.state.hideTitle,"data-test-subj":"customizePanelHideTitle",id:"hideTitle",label:_react.default.createElement(_react2.FormattedMessage,{defaultMessage:"Show panel title",id:"embeddableApi.customizePanel.modal.showTitle"}),onChange:this.onHideTitleToggle})),_react.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"embeddableApi.customizePanel.modal.optionsMenuForm.panelTitleFormRowLabel",defaultMessage:"Panel title"})},_react.default.createElement(_eui.EuiFieldText,{id:"panelTitleInput","data-test-subj":"customEmbeddablePanelTitleInput",name:"min",type:"text",disabled:this.state.hideTitle,placeholder:this.props.embeddable.getOutput().defaultTitle,value:this.state.title||"",onChange:function onChange(e){return _this2.updateTitle(e.target.value)},"aria-label":this.props.intl.formatMessage({id:"embeddableApi.customizePanel.modal.optionsMenuForm.panelTitleInputAriaLabel",defaultMessage:"Enter a custom title for your panel"}),append:_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"resetCustomEmbeddablePanelTitle",onClick:this.reset,disabled:this.state.hideTitle},_react.default.createElement(_react2.FormattedMessage,{id:"embeddableApi.customizePanel.modal.optionsMenuForm.resetCustomDashboardButtonLabel",defaultMessage:"Reset"}))}))),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return _this2.props.updateTitle(_this2.props.embeddable.getOutput().title)}}," ",_react.default.createElement(_react2.FormattedMessage,{id:"embeddableApi.customizePanel.modal.cancel",defaultMessage:"Cancel"})),_react.default.createElement(_eui.EuiButton,{"data-test-subj":"saveNewTitleButton",onClick:this.save,fill:true},_react.default.createElement(_react2.FormattedMessage,{id:"embeddableApi.customizePanel.modal.saveButtonTitle",defaultMessage:"Save"}))))}}]);return CustomizePanelModalUi}(_react.Component);exports.CustomizePanelModalUi=CustomizePanelModalUi;var CustomizePanelModal=(0,_react2.injectI18n)(CustomizePanelModalUi);exports.CustomizePanelModal=CustomizePanelModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ADD_PANEL_ACTION_ID",{enumerable:true,get:function get(){return _panel_actions.ADD_PANEL_ACTION_ID}});Object.defineProperty(exports,"AddPanelAction",{enumerable:true,get:function get(){return _panel_actions.AddPanelAction}});Object.defineProperty(exports,"RemovePanelAction",{enumerable:true,get:function get(){return _panel_actions.RemovePanelAction}});Object.defineProperty(exports,"openAddPanelFlyout",{enumerable:true,get:function get(){return _panel_actions.openAddPanelFlyout}});var _panel_actions=__webpack_require__(687)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEmbeddableFactories=void 0;var getEmbeddableFactories=function getEmbeddableFactories(_ref){var embeddableFactories=_ref.embeddableFactories;return function(){return embeddableFactories.values()}};exports.getEmbeddableFactories=getEmbeddableFactories},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEmbeddableFactory=void 0;var getEmbeddableFactory=function getEmbeddableFactory(_ref){var embeddableFactories=_ref.embeddableFactories;return function(embeddableFactoryId){var factory=embeddableFactories.get(embeddableFactoryId);if(!factory){throw new Error("Embeddable factory [embeddableFactoryId = ".concat(embeddableFactoryId,"] does not exist."))}return factory}};exports.getEmbeddableFactory=getEmbeddableFactory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTrigger=void 0;var getTrigger=function getTrigger(_ref){var triggers=_ref.triggers;return function(id){var trigger=triggers.get(id);if(!trigger){throw new Error("Trigger [triggerId = ".concat(id,"] does not exist."))}return trigger}};exports.getTrigger=getTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTriggerActions=void 0;var getTriggerActions=function getTriggerActions(_ref){var api=_ref.api,actions=_ref.actions;return function(id){var trigger=api.getTrigger(id);return trigger.actionIds.map(function(actionId){return actions.get(actionId)}).filter(Boolean)}};exports.getTriggerActions=getTriggerActions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTriggerCompatibleActions=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var getTriggerCompatibleActions=function getTriggerCompatibleActions(_ref){var api=_ref.api;return function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(triggerId,context){var actions,isCompatibles;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:actions=api.getTriggerActions(triggerId);_context.next=3;return Promise.all(actions.map(function(action){return action.isCompatible(context)}));case 3:isCompatibles=_context.sent;return _context.abrupt("return",actions.reduce(function(acc,action,i){return isCompatibles[i]?[].concat(_toConsumableArray(acc),[action]):acc},[]));case 5:case"end":return _context.stop()}}},_callee)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()};exports.getTriggerCompatibleActions=getTriggerCompatibleActions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerAction=void 0;var registerAction=function registerAction(_ref){var actions=_ref.actions;return function(action){if(actions.has(action.id)){throw new Error("Action [action.id = ".concat(action.id,"] already registered in Embeddables API."))}actions.set(action.id,action)}};exports.registerAction=registerAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerEmbeddableFactory=void 0;var registerEmbeddableFactory=function registerEmbeddableFactory(_ref){var embeddableFactories=_ref.embeddableFactories;return function(embeddableFactoryId,factory){if(embeddableFactories.has(embeddableFactoryId)){throw new Error("Embeddable factory [embeddableFactoryId = ".concat(embeddableFactoryId,"] already registered in Embeddables API."))}embeddableFactories.set(embeddableFactoryId,factory)}};exports.registerEmbeddableFactory=registerEmbeddableFactory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerTrigger=void 0;var registerTrigger=function registerTrigger(_ref){var triggers=_ref.triggers;return function(trigger){if(triggers.has(trigger.id)){throw new Error("Trigger [trigger.id = ".concat(trigger.id,"] already registered in Embeddables API."))}triggers.set(trigger.id,trigger)}};exports.registerTrigger=registerTrigger},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bootstrap=void 0;var _lib=__webpack_require__(441);var bootstrap=function bootstrap(api){var triggerContext={id:_lib.CONTEXT_MENU_TRIGGER,title:"Context menu",description:"Triggered on top-right corner context-menu select.",actionIds:[]};var triggerFilter={id:_lib.APPLY_FILTER_TRIGGER,title:"Filter click",description:"Triggered when user applies filter to an embeddable.",actionIds:[]};var triggerBadge={id:_lib.PANEL_BADGE_TRIGGER,title:"Panel badges",description:"Actions appear in title bar when an embeddable loads in a panel",actionIds:[]};var actionApplyFilter=new _lib.ApplyFilterAction;api.registerTrigger(triggerContext);api.registerTrigger(triggerFilter);api.registerAction(actionApplyFilter);api.registerTrigger(triggerBadge);api.attachAction(triggerFilter.id,actionApplyFilter.id)};exports.bootstrap=bootstrap},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ExpandPanelAction",{enumerable:true,get:function get(){return _expand_panel_action.ExpandPanelAction}});Object.defineProperty(exports,"EXPAND_PANEL_ACTION",{enumerable:true,get:function get(){return _expand_panel_action.EXPAND_PANEL_ACTION}});var _expand_panel_action=__webpack_require__(1649)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandPanelAction=exports.EXPAND_PANEL_ACTION=void 0;var _i18n=__webpack_require__(2);var _public=__webpack_require__(40);var _embeddable=__webpack_require__(692);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EXPAND_PANEL_ACTION="togglePanel";exports.EXPAND_PANEL_ACTION=EXPAND_PANEL_ACTION;function isDashboard(embeddable){return embeddable.type===_embeddable.DASHBOARD_CONTAINER_TYPE}function isExpanded(embeddable){if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _public.IncompatibleActionError}return embeddable.id===embeddable.parent.getInput().expandedPanelId}var ExpandPanelAction=function(_Action){_inherits(ExpandPanelAction,_Action);function ExpandPanelAction(){var _this;_classCallCheck(this,ExpandPanelAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(ExpandPanelAction).call(this,EXPAND_PANEL_ACTION));_defineProperty(_assertThisInitialized(_this),"type",EXPAND_PANEL_ACTION);_this.order=7;return _this}_createClass(ExpandPanelAction,[{key:"getDisplayName",value:function getDisplayName(_ref){var embeddable=_ref.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _public.IncompatibleActionError}return isExpanded(embeddable)?_i18n.i18n.translate("dashboardEmbeddableContainer.actions.toggleExpandPanelMenuItem.expandedDisplayName",{defaultMessage:"Minimize"}):_i18n.i18n.translate("dashboardEmbeddableContainer.actions.toggleExpandPanelMenuItem.notExpandedDisplayName",{defaultMessage:"Full screen"})}},{key:"getIconType",value:function getIconType(_ref2){var embeddable=_ref2.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _public.IncompatibleActionError}return isExpanded(embeddable)?"expand":"expand"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref3){var embeddable;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref3.embeddable;return _context.abrupt("return",Boolean(embeddable.parent&&isDashboard(embeddable.parent)));case 2:case"end":return _context.stop()}}},_callee)}));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function execute(_ref4){var embeddable=_ref4.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _public.IncompatibleActionError}var newValue=isExpanded(embeddable)?undefined:embeddable.id;embeddable.parent.updateInput({expandedPanelId:newValue})}}]);return ExpandPanelAction}(_public.Action);exports.ExpandPanelAction=ExpandPanelAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createPanelState=createPanelState;var _dashboard_constants=__webpack_require__(443);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function findTopLeftMostOpenSpace(width,height,currentPanels){var maxY=-1;currentPanels.forEach(function(panel){maxY=Math.max(panel.gridData.y+panel.gridData.h,maxY)});if(maxY<0){return{x:0,y:0}}var grid=new Array(maxY);for(var y=0;y<maxY;y++){grid[y]=new Array(_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT).fill(0)}currentPanels.forEach(function(panel){for(var x=panel.gridData.x;x<panel.gridData.x+panel.gridData.w;x++){for(var _y=panel.gridData.y;_y<panel.gridData.y+panel.gridData.h;_y++){var row=grid[_y];if(row===undefined){throw new Error("Attempted to access a row that doesn't exist at ".concat(_y," for panel ").concat(JSON.stringify(panel)))}grid[_y][x]=1}}});for(var _y2=0;_y2<maxY;_y2++){for(var x=0;x<_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT;x++){if(grid[_y2][x]===1){continue}else{for(var h=_y2;h<Math.min(_y2+height,maxY);h++){for(var w=x;w<Math.min(x+width,_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT);w++){var spaceIsEmpty=grid[h][w]===0;var fitsPanelWidth=w===x+width-1;var fitsPanelHeight=h===Math.min(_y2+height-1,maxY-1);if(spaceIsEmpty&&fitsPanelWidth&&fitsPanelHeight){return{x:x,y:_y2}}else if(grid[h][w]===1){break}}}}}}return{x:0,y:maxY}}function createPanelState(panelState,currentPanels){var _findTopLeftMostOpenS=findTopLeftMostOpenSpace(_dashboard_constants.DEFAULT_PANEL_WIDTH,_dashboard_constants.DEFAULT_PANEL_HEIGHT,currentPanels),x=_findTopLeftMostOpenS.x,y=_findTopLeftMostOpenS.y;return _objectSpread({gridData:{w:_dashboard_constants.DEFAULT_PANEL_WIDTH,h:_dashboard_constants.DEFAULT_PANEL_HEIGHT,x:x,y:y,i:panelState.explicitInput.id}},panelState)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewport=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _grid=__webpack_require__(1652);var _public=__webpack_require__(373);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardViewport=function(_React$Component){_inherits(DashboardViewport,_React$Component);function DashboardViewport(props){var _this;_classCallCheck(this,DashboardViewport);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardViewport).call(this,props));_defineProperty(_assertThisInitialized(_this),"context",void 0);_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"onExitFullScreenMode",function(){_this.props.container.updateInput({isFullScreenMode:false})});var _this$props$container=_this.props.container.getInput(),isFullScreenMode=_this$props$container.isFullScreenMode,panels=_this$props$container.panels,useMargins=_this$props$container.useMargins,title=_this$props$container.title;_this.state={isFullScreenMode:isFullScreenMode,panels:panels,useMargins:useMargins,title:title};return _this}_createClass(DashboardViewport,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=true;this.subscription=this.props.container.getInput$().subscribe(function(){var _this2$props$containe=_this2.props.container.getInput(),isFullScreenMode=_this2$props$containe.isFullScreenMode,useMargins=_this2$props$containe.useMargins,title=_this2$props$containe.title,description=_this2$props$containe.description;if(_this2.mounted){_this2.setState({isFullScreenMode:isFullScreenMode,description:description,useMargins:useMargins,title:title})}})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"render",value:function render(){var container=this.props.container;return _react.default.createElement("div",{"data-shared-items-count":Object.values(this.state.panels).length,"data-shared-items-container":true,"data-title":this.state.title,"data-description":this.state.description,className:this.state.useMargins?"dshDashboardViewport-withMargins":"dshDashboardViewport"},this.state.isFullScreenMode&&_react.default.createElement(this.context.services.ExitFullScreenButton,{onExitFullScreenMode:this.onExitFullScreenMode}),_react.default.createElement(_grid.DashboardGrid,{container:container}))}}]);return DashboardViewport}(_react.default.Component);exports.DashboardViewport=DashboardViewport;_defineProperty(DashboardViewport,"contextType",_public.context)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DashboardGrid",{enumerable:true,get:function get(){return _dashboard_grid.DashboardGrid}});var _dashboard_grid=__webpack_require__(1653)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardGrid=void 0;__webpack_require__(1654);__webpack_require__(1655);var _react=__webpack_require__(5);var _classnames=_interopRequireDefault(__webpack_require__(26));var _lodash=_interopRequireDefault(__webpack_require__(1));var _react2=_interopRequireDefault(__webpack_require__(0));var _reactGridLayout=_interopRequireDefault(__webpack_require__(1671));var _reactSizeme=_interopRequireDefault(__webpack_require__(1672));var _embeddable_api=__webpack_require__(440);var _dashboard_constants=__webpack_require__(443);var _public=__webpack_require__(373);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectDestructuringEmpty(obj){if(obj==null)throw new TypeError("Cannot destructure undefined")}var lastValidGridSize=0;function ensureWindowScrollsToBottom(event){var WINDOW_BUFFER=10;if(event.clientY>window.innerHeight-WINDOW_BUFFER){window.scrollTo(0,event.pageY+WINDOW_BUFFER-window.innerHeight)}}function ResponsiveGrid(_ref){var size=_ref.size,isViewMode=_ref.isViewMode,layout=_ref.layout,onLayoutChange=_ref.onLayoutChange,children=_ref.children,maximizedPanelId=_ref.maximizedPanelId,useMargins=_ref.useMargins;lastValidGridSize=size.width>0?size.width:lastValidGridSize;var classes=(0,_classnames.default)({"dshLayout--viewing":isViewMode,"dshLayout--editing":!isViewMode,"dshLayout-isMaximizedPanel":maximizedPanelId!==undefined,"dshLayout-withoutMargins":!useMargins});var MARGINS=useMargins?8:0;return _react2.default.createElement(_reactGridLayout.default,{width:lastValidGridSize,className:classes,isDraggable:true,isResizable:true,useCSSTransforms:false,margin:[MARGINS,MARGINS],cols:_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT,rowHeight:_dashboard_constants.DASHBOARD_GRID_HEIGHT,draggableHandle:isViewMode?".doesnt-exist":".embPanel__dragger",layout:layout,onLayoutChange:onLayoutChange,onResize:function onResize(_ref2,_ref3,_ref4,_ref5,event){_objectDestructuringEmpty(_ref2);_objectDestructuringEmpty(_ref3);_objectDestructuringEmpty(_ref4);_objectDestructuringEmpty(_ref5);return ensureWindowScrollsToBottom(event)}},children)}var config={monitorWidth:true};var ResponsiveSizedGrid=(0,_reactSizeme.default)(config)(ResponsiveGrid);var DashboardGridUi=function(_React$Component){_inherits(DashboardGridUi,_React$Component);function DashboardGridUi(props){var _this;_classCallCheck(this,DashboardGridUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardGridUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"gridItems",{});_defineProperty(_assertThisInitialized(_this),"buildLayoutFromPanels",function(){return _lodash.default.map(_this.state.panels,function(panel){return panel.gridData})});_defineProperty(_assertThisInitialized(_this),"onLayoutChange",function(layout){var panels=_this.state.panels;var updatedPanels=layout.reduce(function(updatedPanelsAcc,panelLayout){updatedPanelsAcc[panelLayout.i]=_objectSpread({},panels[panelLayout.i],{gridData:_lodash.default.pick(panelLayout,["x","y","w","h","i"])});return updatedPanelsAcc},{});_this.onPanelsUpdated(updatedPanels)});_defineProperty(_assertThisInitialized(_this),"onPanelsUpdated",function(panels){_this.props.container.updateInput({panels:panels})});_defineProperty(_assertThisInitialized(_this),"onPanelFocused",function(focusedPanelIndex){_this.setState({focusedPanelIndex:focusedPanelIndex})});_defineProperty(_assertThisInitialized(_this),"onPanelBlurred",function(blurredPanelIndex){if(_this.state.focusedPanelIndex===blurredPanelIndex){_this.setState({focusedPanelIndex:undefined})}});_this.state={layout:[],isLayoutInvalid:false,focusedPanelIndex:undefined,panels:_this.props.container.getInput().panels,viewMode:_this.props.container.getInput().viewMode,useMargins:_this.props.container.getInput().useMargins,expandedPanelId:_this.props.container.getInput().expandedPanelId};return _this}_createClass(DashboardGridUi,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=true;var isLayoutInvalid=false;var layout;try{layout=this.buildLayoutFromPanels()}catch(error){console.error(error);isLayoutInvalid=true;this.props.kibana.notifications.toasts.danger({title:this.props.intl.formatMessage({id:"dashboardEmbeddableContainer.dashboardGrid.toast.unableToLoadDashboardDangerMessage",defaultMessage:"Unable to load dashboard."}),body:error.message,toastLifeTimeMs:5e3})}this.setState({layout:layout,isLayoutInvalid:isLayoutInvalid});this.subscription=this.props.container.getInput$().subscribe(function(input){if(_this2.mounted){_this2.setState({panels:input.panels,viewMode:input.viewMode,useMargins:input.useMargins,expandedPanelId:input.expandedPanelId})}})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"renderPanels",value:function renderPanels(){var _this3=this;var _this$state=this.state,focusedPanelIndex=_this$state.focusedPanelIndex,panels=_this$state.panels,expandedPanelId=_this$state.expandedPanelId;var panelsInOrder=Object.keys(panels).map(function(key){return panels[key]});panelsInOrder.sort(function(panelA,panelB){if(panelA.gridData.y===panelB.gridData.y){return panelA.gridData.x-panelB.gridData.x}else{return panelA.gridData.y-panelB.gridData.y}});return _lodash.default.map(panelsInOrder,function(panel){var expandPanel=expandedPanelId!==undefined&&expandedPanelId===panel.explicitInput.id;var hidePanel=expandedPanelId!==undefined&&expandedPanelId!==panel.explicitInput.id;var classes=(0,_classnames.default)({"dshDashboardGrid__item--expanded":expandPanel,"dshDashboardGrid__item--hidden":hidePanel});return _react2.default.createElement("div",{style:{zIndex:focusedPanelIndex===panel.explicitInput.id?2:"auto"},className:classes,key:panel.explicitInput.id,"data-test-subj":"dashboardPanel",ref:function ref(reactGridItem){_this3.gridItems[panel.explicitInput.id]=reactGridItem}},_react2.default.createElement(_embeddable_api.EmbeddableChildPanel,{embeddableId:panel.explicitInput.id,container:_this3.props.container,getActions:_this3.props.kibana.services.embeddable.getTriggerCompatibleActions,getEmbeddableFactory:_this3.props.kibana.services.embeddable.getEmbeddableFactory,getAllEmbeddableFactories:_this3.props.kibana.services.embeddable.getEmbeddableFactories,overlays:_this3.props.kibana.services.overlays,notifications:_this3.props.kibana.services.notifications,inspector:_this3.props.kibana.services.inspector,SavedObjectFinder:_this3.props.kibana.services.SavedObjectFinder}))})}},{key:"render",value:function render(){if(this.state.isLayoutInvalid){return null}var viewMode=this.state.viewMode;var isViewMode=viewMode===_embeddable_api.ViewMode.VIEW;return _react2.default.createElement(ResponsiveSizedGrid,{isViewMode:isViewMode,layout:this.buildLayoutFromPanels(),onLayoutChange:this.onLayoutChange,maximizedPanelId:this.state.expandedPanelId,useMargins:this.state.useMargins},this.renderPanels())}}]);return DashboardGridUi}(_react2.default.Component);var DashboardGrid=(0,_react.injectI18n)((0,_public.withKibana)(DashboardGridUi));exports.DashboardGrid=DashboardGrid},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2111)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1783)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hideEmptyDevTools=hideEmptyDevTools;var _modules=__webpack_require__(6);var _dev_tools=__webpack_require__(371);var _new_platform=__webpack_require__(8);function hideEmptyDevTools(Private){var hasTools=!!Private(_dev_tools.DevToolsRegistryProvider).length;if(!hasTools){_new_platform.npStart.core.chrome.navLinks.update("kibana:dev_tools",{hidden:true})}}_modules.uiModules.get("kibana").run(hideEmptyDevTools)},function(module,exports,__webpack_require__){"use strict";var _new_platform=__webpack_require__(8);var timelionUiEnabled=_new_platform.npStart.core.injectedMetadata.getInjectedVar("timelionUiEnabled");if(timelionUiEnabled===false){_new_platform.npStart.core.chrome.navLinks.update("timelion",{hidden:true})}},function(module,exports,__webpack_require__){"use strict";var _panel=_interopRequireDefault(__webpack_require__(1662));var _i18n=__webpack_require__(2);var _panel_registry=_interopRequireDefault(__webpack_require__(444));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_panel_registry.default.register(function timeChartProvider(Private){return new _panel.default("timechart",Private(__webpack_require__(1663))(),_i18n.i18n)})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=Panel;var _i18n=__webpack_require__(2);function Panel(name,config){this.name=name;this.help=config.help||"";this.render=config.render;if(!config.render){throw new Error(_i18n.i18n.translate("timelion.panels.noRenderFunctionErrorMessage",{defaultMessage:"Panel must have a rendering function"}))}}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=timechartFn;var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));var _momentTimezone=_interopRequireDefault(__webpack_require__(130));var _observe_resize=_interopRequireDefault(__webpack_require__(1664));var _lib=__webpack_require__(1665);var _timefilter=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(1668);var DEBOUNCE_DELAY=50;function timechartFn(Private,config,$rootScope,$compile){return function(){return{help:"Draw a timeseries chart",render:function render($scope,$elem){var template='<div class="chart-top-title"></div><div class="chart-canvas"></div>';var tickFormatters=__webpack_require__(1676)();var getxAxisFormatter=Private(__webpack_require__(1677));var generateTicks=Private(__webpack_require__(1678));_momentTimezone.default.tz.setDefault(config.get("dateFormat:tz"));var render=$scope.seriesList.render||{};$scope.chart=$scope.seriesList.list;$scope.interval=$scope.interval;$scope.search=$scope.search||_lodash.default.noop;var legendValueNumbers;var legendCaption;var debouncedSetLegendNumbers=_lodash.default.debounce(setLegendNumbers,DEBOUNCE_DELAY,{maxWait:DEBOUNCE_DELAY,leading:true,trailing:false});var emptyCaption="<br>";var defaultOptions={xaxis:{mode:"time",tickLength:5,timezone:"browser"},selection:{mode:"x",color:"#ccc"},crosshair:{mode:"x",color:"#C66",lineWidth:2},grid:{show:render.grid,borderWidth:0,borderColor:null,margin:10,hoverable:true,autoHighlight:false},legend:{backgroundColor:"rgb(255,255,255,0)",position:"nw",labelBoxBorderColor:"rgb(255,255,255,0)",labelFormatter:function labelFormatter(label,series){var wrapperSpan=document.createElement("span");var labelSpan=document.createElement("span");var numberSpan=document.createElement("span");wrapperSpan.setAttribute("class","ngLegendValue");wrapperSpan.setAttribute("kbn-accessible-click","");wrapperSpan.setAttribute("ng-click","toggleSeries(".concat(series._id,")"));wrapperSpan.setAttribute("ng-focus","focusSeries(".concat(series._id,")"));wrapperSpan.setAttribute("ng-mouseover","highlightSeries(".concat(series._id,")"));labelSpan.setAttribute("ng-non-bindable","");labelSpan.appendChild(document.createTextNode(label));numberSpan.setAttribute("class","ngLegendValueNumber");wrapperSpan.appendChild(labelSpan);wrapperSpan.appendChild(numberSpan);return wrapperSpan.outerHTML}},colors:["#01A4A4","#C66","#D0D102","#616161","#00A1CB","#32742C","#F18D05","#113F8C","#61AE24","#D70060"]};var originalColorMap=new Map;$scope.chart.forEach(function(series,seriesIndex){if(!series.color){var colorIndex=seriesIndex%defaultOptions.colors.length;series.color=defaultOptions.colors[colorIndex]}originalColorMap.set(series,series.color)});var highlightedSeries;var focusedSeries;function unhighlightSeries(){if(highlightedSeries===null){return}highlightedSeries=null;focusedSeries=null;$scope.chart.forEach(function(series){series.color=originalColorMap.get(series)});drawPlot($scope.chart)}$scope.highlightSeries=_lodash.default.debounce(function(id){if(highlightedSeries===id){return}highlightedSeries=id;$scope.chart.forEach(function(series,seriesIndex){if(seriesIndex!==id){series.color="rgba(128,128,128,0.1)"}else{series.color=originalColorMap.get(series)}});drawPlot($scope.chart)},DEBOUNCE_DELAY);$scope.focusSeries=function(id){focusedSeries=id;$scope.highlightSeries(id)};$scope.toggleSeries=function(id){var series=$scope.chart[id];series._hide=!series._hide;drawPlot($scope.chart)};var cancelResize=(0,_observe_resize.default)($elem,function(){drawPlot($scope.chart)});$scope.$on("$destroy",function(){cancelResize();$elem.off("plothover");$elem.off("plotselected");$elem.off("mouseleave")});$elem.on("plothover",function(event,pos,item){$rootScope.$broadcast("timelionPlotHover",event,pos,item)});$elem.on("plotselected",function(event,ranges){_timefilter.timefilter.setTime({from:(0,_momentTimezone.default)(ranges.xaxis.from),to:(0,_momentTimezone.default)(ranges.xaxis.to),mode:"absolute"})});$elem.on("mouseleave",function(){$rootScope.$broadcast("timelionPlotLeave")});$scope.$on("timelionPlotHover",function(angularEvent,flotEvent,pos){if(!$scope.plot)return;$scope.plot.setCrosshair(pos);debouncedSetLegendNumbers(pos)});$scope.$on("timelionPlotLeave",function(){if(!$scope.plot)return;$scope.plot.clearCrosshair();clearLegendNumbers()});function setLegendNumbers(pos){unhighlightSeries();var plot=$scope.plot;var axes=plot.getAxes();if(pos.x<axes.xaxis.min||pos.x>axes.xaxis.max){return}var i;var j;var dataset=plot.getData();if(legendCaption){legendCaption.text((0,_momentTimezone.default)(pos.x).format(_lodash.default.get(dataset,"[0]._global.legend.timeFormat",_lib.DEFAULT_TIME_FORMAT)))}for(i=0;i<dataset.length;++i){var series=dataset[i];var precision=_lodash.default.get(series,"_meta.precision",2);if(series._hide)continue;for(j=0;j<series.data.length;++j){if(series.data[j][0]>pos.x)break}var y=void 0;try{y=series.data[j][1]}catch(e){y=null}if(y!=null){var label=y.toFixed(precision);if(series.yaxis.tickFormatter){label=series.yaxis.tickFormatter(label,series.yaxis)}legendValueNumbers.eq(i).text("(".concat(label,")"))}else{legendValueNumbers.eq(i).empty()}}}function clearLegendNumbers(){if(legendCaption){legendCaption.html(emptyCaption)}_lodash.default.each(legendValueNumbers,function(num){(0,_jquery.default)(num).empty()})}var legendScope=$scope.$new();function drawPlot(plotConfig){if(!(0,_jquery.default)(".chart-canvas",$elem).length)$elem.html(template);var canvasElem=(0,_jquery.default)(".chart-canvas",$elem);if(canvasElem.height()===0||canvasElem.width()===0){return}var title=(0,_lodash.default)(plotConfig).map("_title").compact().last();(0,_jquery.default)(".chart-top-title",$elem).text(title==null?"":title);var options=_lodash.default.cloneDeep(defaultOptions);var time=_timefilter.timefilter.getBounds();var interval=(0,_lib.calculateInterval)(time.min.valueOf(),time.max.valueOf(),config.get("timelion:target_buckets")||200,$scope.interval,config.get("timelion:min_interval")||"1ms");var format=getxAxisFormatter(interval);options.xaxis.tickFormatter=function(val){return(0,_momentTimezone.default)(val).format(format)};var tickLetterWidth=7;var tickPadding=45;options.xaxis.ticks=Math.floor($elem.width()/(format.length*tickLetterWidth+tickPadding));var series=_lodash.default.map(plotConfig,function(series,index){series=_lodash.default.cloneDeep(_lodash.default.defaults(series,{shadowSize:0,lines:{lineWidth:3}}));series._id=index;if(series.color){var span=document.createElement("span");span.style.color=series.color;series.color=span.style.color}if(series._hide){series.data=[];series.stack=false;series.label="(hidden) "+series.label}if(series._global){_lodash.default.merge(options,series._global,function(objVal,srcVal){if(objVal==null)return srcVal;if(srcVal==null)return objVal})}return series});if(options.yaxes){options.yaxes.forEach(function(yaxis){if(yaxis&&yaxis.units){yaxis.tickFormatter=tickFormatters[yaxis.units.type];var byteModes=["bytes","bytes/s"];if(byteModes.includes(yaxis.units.type)){yaxis.tickGenerator=generateTicks}}})}$scope.plot=_jquery.default.plot(canvasElem,_lodash.default.compact(series),options);if($scope.plot){$scope.$emit("timelionChartRendered")}legendScope.$destroy();legendScope=$scope.$new();legendValueNumbers=canvasElem.find(".ngLegendValueNumber");_lodash.default.each(canvasElem.find(".ngLegendValue"),function(elem){$compile(elem)(legendScope)});if(_lodash.default.get($scope.plot.getData(),"[0]._global.legend.showTime",true)){legendCaption=(0,_jquery.default)('<caption class="timChart__legendCaption"></caption>');legendCaption.html(emptyCaption);canvasElem.find("div.legend table").append(legendCaption);if(focusedSeries||focusedSeries===0){var $legendLabels=canvasElem.find("div.legend table .legendLabel>span");$legendLabels.get(focusedSeries).focus()}}}$scope.$watch("chart",drawPlot)}}}}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_default;function _default($elem,fn,frequency){frequency=frequency||500;var currentHeight=$elem.height();var currentWidth=$elem.width();var timeout;function checkLoop(){timeout=setTimeout(function(){if(currentHeight!==$elem.height()||currentWidth!==$elem.width()){currentHeight=$elem.height();currentWidth=$elem.width();if(currentWidth>0&&currentWidth>0)fn()}checkLoop()},frequency)}checkLoop();return function(){clearTimeout(timeout)}}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"calculateInterval",{enumerable:true,get:function get(){return _calculate_interval.calculateInterval}});exports.DEFAULT_TIME_FORMAT=void 0;var _calculate_interval=__webpack_require__(1666);var DEFAULT_TIME_FORMAT="MMMM Do YYYY, HH:mm:ss.SSS";exports.DEFAULT_TIME_FORMAT=DEFAULT_TIME_FORMAT},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateInterval=calculateInterval;var _to_milliseconds=_interopRequireDefault(__webpack_require__(1667));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function roundInterval(interval){switch(true){case interval<=500:return"100ms";case interval<=5e3:return"1s";case interval<=7500:return"5s";case interval<=15e3:return"10s";case interval<=45e3:return"30s";case interval<=18e4:return"1m";case interval<=45e4:return"5m";case interval<=12e5:return"10m";case interval<=27e5:return"30m";case interval<=72e5:return"1h";case interval<=216e5:return"3h";case interval<=864e5:return"12h";case interval<=6048e5:return"24h";case interval<=18144e5:return"1w";case interval<36288e5:return"30d";default:return"1y"}}function calculateInterval(from,to,size,interval,min){if(interval!=="auto")return interval;var dateMathInterval=roundInterval((to-from)/size);if((0,_to_milliseconds.default)(dateMathInterval)<(0,_to_milliseconds.default)(min))return min;return dateMathInterval}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_default;var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var vals=_lodash.default.transform([["ms","milliseconds","millisecond"],["s","seconds","second","sec"],["m","minutes","minute","min"],["h","hours","hour"],["d","days","day"],["w","weeks","week"],["M","months","month"],["quarter"],["y","years","year"]],function(vals,units){var normal=_moment.default.normalizeUnits(units[0]);var val=_moment.default.duration(1,normal).asMilliseconds();[].concat(normal,units).forEach(function(unit){vals[unit]=val})},{});var parseRE=new RegExp("^(\\d+(?:\\.\\d*)?)?\\s*("+_lodash.default.keys(vals).join("|")+")$");function _default(expr){var match=expr.match(parseRE);if(match){if(match[2]==="M"&&match[1]!=="1"){throw new Error("Invalid interval. 1M is only valid monthly interval.")}return parseFloat(match[1]||1)*vals[match[2]]}}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1673);__webpack_require__(1674);__webpack_require__(1675);__webpack_require__(1721);__webpack_require__(1766);__webpack_require__(1767);__webpack_require__(1835)},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2463)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2583)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2736)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2740)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2739)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=tickFormatters;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function baseTickFormatter(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;var formatted=""+Math.round(value*factor)/factor;if(axis.tickDecimals!=null){var decimal=formatted.indexOf(".");var precision=decimal===-1?0:formatted.length-decimal-1;if(precision<axis.tickDecimals){return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}}return formatted}function unitFormatter(divisor,units){return function(val){var index=0;var isNegative=val<0;val=Math.abs(val);while(val>=divisor&&index<units.length){val/=divisor;index++}var value=Math.round(val*100)/100*(isNegative?-1:1);return"".concat(value).concat(units[index])}}function tickFormatters(){var formatters={bits:unitFormatter(1e3,["b","kb","mb","gb","tb","pb"]),"bits/s":unitFormatter(1e3,["b/s","kb/s","mb/s","gb/s","tb/s","pb/s"]),bytes:unitFormatter(1024,["B","KB","MB","GB","TB","PB"]),"bytes/s":unitFormatter(1024,["B/s","KB/s","MB/s","GB/s","TB/s","PB/s"]),currency:function currency(val,axis){return val.toLocaleString("en",{style:"currency",currency:axis.options.units.prefix||"USD"})},percent:function percent(val,axis){var precision=_lodash.default.get(axis,"tickDecimals",0)-_lodash.default.get(axis,"options.units.tickDecimalsShift",0);if(precision<0){precision=0}else if(precision>20){precision=20}return(val*100).toFixed(precision)+"%"},custom:function custom(val,axis){var formattedVal=baseTickFormatter(val,axis);var prefix=axis.options.units.prefix;var suffix=axis.options.units.suffix;return prefix+formattedVal+suffix}};return formatters}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=xaxisFormatterProvider;var _moment=_interopRequireDefault(__webpack_require__(14));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function xaxisFormatterProvider(config){function getFormat(esInterval){var parts=esInterval.match(/(\d+)(ms|s|m|h|d|w|M|y|)/);if(parts==null||parts[1]==null||parts[2]==null){throw new Error(_i18n.i18n.translate("timelion.panels.timechart.unknownIntervalErrorMessage",{defaultMessage:"Unknown interval"}))}var interval=_moment.default.duration(Number(parts[1]),parts[2]);var rules=config.get("dateFormat:scaled");for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval>=_moment.default.duration(rule[0])){return rule[1]}}return config.get("dateFormat")}return function(esInterval){return getFormat(esInterval)}}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=generateTicksProvider;function generateTicksProvider(){function floorInBase(n,base){return base*Math.floor(n/base)}function generateTicks(axis){var returnTicks=[];var tickSize=2;var delta=axis.delta;var steps=0;var tickVal;var tickCount=0;while(Math.abs(delta)>=1024){steps++;delta/=1024}while(tickSize<=1024){if(delta<=tickSize){break}tickSize*=2}axis.tickSize=tickSize*Math.pow(1024,steps);var tickMin=floorInBase(axis.min,axis.tickSize);do{tickVal=tickMin+tickCount++*axis.tickSize;returnTicks.push(tickVal)}while(tickVal<axis.max);return returnTicks}return function(axis){return generateTicks(axis)}}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);var _chrome=_interopRequireDefault(__webpack_require__(7));var _telemetry_analytics=__webpack_require__(696);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function telemetryInit($injector){var localStorage=$injector.get("localStorage");var debug=_chrome.default.getInjected("debugUiMetric");var $http=$injector.get("$http");var basePath=_chrome.default.getBasePath();var uiReporter=(0,_telemetry_analytics.createAnalyticsReporter)({localStorage:localStorage,$http:$http,basePath:basePath,debug:debug});(0,_telemetry_analytics.setTelemetryReporter)(uiReporter)}_modules.uiModules.get("kibana").run(telemetryInit)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RenderingService",{enumerable:true,get:function get(){return _rendering_service.RenderingService}});Object.defineProperty(exports,"RenderingStart",{enumerable:true,get:function get(){return _rendering_service.RenderingStart}});var _rendering_service=__webpack_require__(1681)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RenderingService=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(13));var _react2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var RenderingService=function(){function RenderingService(){_classCallCheck(this,RenderingService)}_createClass(RenderingService,[{key:"start",value:function start(_ref){var chrome=_ref.chrome,targetDomElement=_ref.targetDomElement;var chromeUi=chrome.getComponent();var legacyRef=_react.default.createRef();_reactDom.default.render(_react.default.createElement(_react2.I18nProvider,null,_react.default.createElement("div",{className:"content","data-test-subj":"kibanaChrome"},chromeUi,_react.default.createElement("div",{ref:legacyRef}))),targetDomElement);return{legacyTargetDomElement:legacyRef.current}}}]);return RenderingService}();exports.RenderingService=RenderingService},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(446);__webpack_require__(708);__webpack_require__(341);var _modules=__webpack_require__(6);_modules.uiModules.get("kibana/timelion_vis",["kibana"]).controller("TimelionVisController",function($scope){$scope.$on("timelionChartRendered",function(event){event.stopPropagation();$scope.renderComplete()})})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<input\n  input-focus\n  aria-label="{{ ::\'timelion.intervals.customIntervalAriaLabel\' | i18n: { defaultMessage: \'Custom interval\' } }}"\n  class="kuiTextInput timInterval__input"\n  ng-show="interval === \'other\'"\n  ng-class="{ \'timInterval__input--compact\': interval === \'other\' }"\n  ng-model="otherInterval"\n><select\n  id="timelionInterval"\n  aria-label="{{ ::\'timelion.intervals.selectIntervalAriaLabel\' | i18n: { defaultMessage: \'Select interval\' } }}"\n  class="form-control timInterval__presets"\n  ng-class="{ \'timInterval__presets--compact\': interval === \'other\'}"\n  ng-model="interval"\n>\n  <option\n    ng-repeat="intervalOption in intervalOptions"\n    aria-label="{{::intervalLabels[intervalOption]}}"\n    value="{{::intervalOption}}"\n  >\n      {{::intervalOption}}\n  </option>\n</select>\n'},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2735)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]="/*\n * Timelion syntax parser\n */\n\n{\n function ltoo (literal) {\n  return {type: 'literal', value: literal}\n }\n\n function simpleLocation (location) {\n  // Returns an object representing the position of the function within the expression,\n  // demarcated by the position of its first character and last character. We calculate these values\n  // using the offset because the expression could span multiple lines, and we don't want to deal\n  // with column and line values.\n  return {\n   min: location.start.offset,\n   max: location.end.offset\n  }\n }\n\n var currentFunction;\n var currentArgs = [];\n\n var functions = [];\n var args = [];\n var variables = {};\n\n}\n\nstart\n = space? tree:series {\n  return {\n    tree: tree.filter(function (o) {return o != null}),\n    functions: functions,\n    args: args,\n    variables: variables\n  }\n }\n\narg_list\n = first:argument rest:(space? ',' space? arg:argument {return arg})* space? ','? {\n  return [first].concat(rest);\n }\n\nargument\n = name:argument_name space? '=' space? value:arg_type {\n  var arg = {\n   type: 'namedArg',\n   name: name,\n   value: value,\n   location: simpleLocation(location()),\n   text: text()\n  };\n  currentArgs.push(arg);\n  return arg;\n }\n / space? '=' space? value:arg_type? {\n  var exception = {\n   type: 'incompleteArgument',\n   currentArgs: currentArgs,\n   currentFunction: currentFunction,\n   location: simpleLocation(location()),\n   text: text()\n  }\n  error(JSON.stringify(exception));\n }\n / name:argument_name space? '=' {\n  var exception = {\n   type: 'incompleteArgumentValue',\n   currentArgs: currentArgs,\n   currentFunction: currentFunction,\n   name: name,\n   location: simpleLocation(location()),\n   text: text()\n  }\n  error(JSON.stringify(exception));\n }\n / element:arg_type {return element}\n\narg_type\n = variable_get\n / series_type\n / literal:literal {\n  var result = ltoo(literal);\n  result.location = simpleLocation(location()),\n  result.text = text();\n  return result;\n }\n\nvariable_get\n = '$' name:argument_name {\n  if (variables[name]) {\n   return variables[name];\n  } else {\n   error('$' + name + ' is not defined')\n  }\n }\n\nvariable_set\n = '$' name:argument_name space? '=' space? value:arg_type {\n  variables[name] = value;\n }\n\nseries_type\n = variable_set\n / variable_get\n / group\n / chain\n / reference\n\nseries\n = first:series_type rest:(space? ',' space? series:series_type {return series})* ','? {\n  return [first].concat(rest)\n }\n\nfunction_name\n = first:[a-zA-Z]+ rest:[.a-zA-Z0-9_-]* {\n  currentFunction = first.join('') + rest.join('');\n  currentArgs = [];\n  return currentFunction;\n}\n\nargument_name\n = first:[a-zA-Z]+ rest:[.a-zA-Z0-9_-]* { return first.join('') + rest.join('') }\n\nfunction \"function\"\n = space? '.' name:function_name space? '(' space? arg_list:arg_list? space? ')' space? {\n  var result = {\n    type: 'function',\n    function: name,\n    arguments: arg_list || [],\n    location: simpleLocation(location()),\n    text: text()\n  }\n\n  result.arguments.forEach(function (arg) {\n   arg.function = name;\n   args.push(arg);\n  })\n\n  functions.push(result)\n  return result;\n }\n / '.' func:function_name? {\n  var exception = {\n   type: 'incompleteFunction',\n   function: func,\n   location: simpleLocation(location()),\n   text: text()\n  }\n  error(JSON.stringify(exception));\n }\n\nreference\n = '@' plot:integer ':' series:integer {\n  return {\n   type: 'reference',\n   plot: plot,\n   series: series\n  }\n }\n / '@' plot:integer {\n  return {\n   type: 'reference',\n   plot: plot\n  }\n }\n\n\nchain\n = func:function space? rest:function* {return {type: 'chain', chain: [func].concat(rest)}}\n\ngroup\n = '(' space? grouped:series space? ')' functions:function* {\n  var first = {\n    type: 'chainList',\n    list: grouped\n  }\n  first.label = text();\n\n  return {type: \"chain\", chain: [first].concat(functions)};\n }\n\n /* ----- Core types ----- */\n\nliteral \"literal\"\n  =  '\"' chars:dq_char* '\"' { return chars.join(''); } // double quoted string\n  / \"'\" chars:sq_char* \"'\" { return chars.join(''); } // single quoted string\n  / 'true'  { return true; } // unquoted literals from here down\n  / 'false' { return false; }\n  / 'null'  { return null; }\n  / string:[^()\"',=\\ \\t]+ { // this also matches numbers via Number()\n   var result = string.join('');\n   // Sort of hacky, but PEG doesn't have backtracking so\n   // a number rule is hard to read, and performs worse\n   if (isNaN(Number(result))) return result;\n   return Number(result)\n  }\n\nspace\n = [\\ \\t\\r\\n]+\n\ndq_char\n  = \"\\\\\" sequence:('\"' / \"\\\\\") { return sequence; }\n  / [^\"] // everything except \"\n\nsq_char\n  = \"\\\\\" sequence:(\"'\" / \"\\\\\") { return sequence; }\n  / [^'] // everything except '\n\ninteger\n = digits:[0-9]+ {return parseInt(digits.join(''))}\n"},function(module,exports,__webpack_require__){"use strict";var _timelion_expression_suggestions=_interopRequireDefault(__webpack_require__(1724));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=__webpack_require__(6).get("apps/timelion",[]);app.directive("timelionExpressionSuggestions",function(){return{restrict:"E",scope:{suggestions:"=",suggestionsType:"=",selectedIndex:"=",onClickSuggestion:"&",shouldPopover:"="},replace:true,template:_timelion_expression_suggestions.default,link:function link(scope){scope.onMouseDown=function(e){return e.preventDefault()}}}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div\n  id="timelionSuggestionList"\n  class="timSuggestions"\n  role="listbox"\n  ng-class="{ \'timSuggestions-isPopover\': shouldPopover === \'true\' }"\n  data-suggestions-list\n>\n  <div\n    class="timSuggestions__item"\n    id="timelionSuggestion{{$index}}"\n    role="option"\n    tabindex="0"\n    data-suggestion-list-item\n    ng-class="{active: $index === selectedIndex}"\n    ng-repeat="suggestion in suggestions track by suggestion.name"\n    ng-mousedown="onMouseDown($event)"\n    ng-click="onClickSuggestion({ suggestionIndex: $index })"\n    aria-label="{{suggestion.name}}"\n    aria-describedby="timelionSuggestionDescription{{$index}}"\n    data-test-subj="timelionSuggestionListItem"\n  >\n\n    <div ng-switch on="suggestionsType">\n\n      <div ng-switch-when="functions">\n        <h4>\n          <strong>.{{suggestion.name}}()</strong>\n          <small id="timelionSuggestionDescription{{$index}}">\n            <span\n              ng-if="suggestion.chainable"\n              i18n-id="timelion.expressionSuggestions.func.description.chainableText"\n              i18n-default-message="{help} (Chainable)"\n              i18n-values="{ help: suggestion.help }"\n            ></span>\n            <span\n              ng-if="!suggestion.chainable"\n              i18n-id="timelion.expressionSuggestions.func.description.dataSourceText"\n              i18n-default-message="{help} (Data Source)"\n              i18n-values="{ help: suggestion.help }"\n            ></span>\n          </small>\n        </h4>\n\n        <div ng-show="suggestion.args.length > (suggestion.chainable ? 1: 0)">\n          <div ng-show="suggestions.length > 1">\n            <strong\n              i18n-id="timelion.expressionSuggestions.arg.listTitle"\n              i18n-default-message="Arguments:"\n            ></strong>\n            <span ng-repeat="arg in suggestion.args" ng-hide="$index < 1 && suggestion.chainable">\n              <strong>{{arg.name}}</strong>=(<em>{{arg.types.join(\' | \')}}</em>)\n              <em ng-show="!$last">,</em>\n            </span>\n          </div>\n\n          <div class="timSuggestions__details" ng-show="suggestions.length === 1">\n            <table class="table table-striped table-condensed table-bordered">\n            <thead>\n              <th\n                scope="col"\n                i18n-id="timelion.expressionSuggestions.arg.nameTitle"\n                i18n-default-message="Argument Name"\n              ></th>\n              <th\n                scope="col"\n                i18n-id="timelion.expressionSuggestions.arg.typesTitle"\n                i18n-default-message="Accepted Types"\n              ></th>\n              <th\n                scope="col"\n                i18n-id="timelion.expressionSuggestions.arg.infoTitle"\n                i18n-default-message="Information"\n              ></th>\n            </thead>\n            <tr ng-repeat="arg in suggestion.args" ng-hide="$index < 1 && suggestion.chainable">\n              <td>{{arg.name}}</td>\n              <td><em>{{arg.types.join(\', \')}}</em></td>\n              <td>{{arg.help}}</td>\n            </tr>\n            </table>\n          </div>\n        </div>\n      </div>\n\n      <div ng-switch-when="arguments">\n        <h4>\n          <strong>{{suggestion.name}}=</strong>\n          <small id="timelionSuggestionDescription{{$index}}">\n            {{suggestion.help}}\n          </small>\n        </h4>\n        <div>\n          <strong>Accepts:</strong>\n          <em>{{suggestion.types.join(\', \')}}</em>\n        </div>\n      </div>\n\n      <div ng-switch-when="argument_value">\n        <h4>\n          <strong>{{suggestion.name}}</strong>\n          <small id="timelionSuggestionDescription{{$index}}">\n            {{suggestion.help}}\n          </small>\n        </h4>\n      </div>\n\n    </div>\n  </div>\n</div>\n'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div\n  class="timExpressionInput__container"\n  role="combobox"\n  aria-expanded="{{suggestions.isVisible}}"\n  aria-owns="timelionSuggestionList"\n  aria-haspopup="true"\n>\n  \x3c!-- The `role=textbox` is required by VoiceOver to properly detect the autocompletion.\n       For some reasons it doesn\'t work without it (even though the default role of\n       the element is textbox anyway). --\x3e\n  <textarea\n    data-expression-input\n    role="textbox"\n    rows="{{ rows }}"\n    class="timExpressionInput kuiTextArea fullWidth"\n    placeholder="{{ ::\'timelion.expressionInputPlaceholder\' | i18n: { defaultMessage: \'Try a query with {esQuery}\', values: { esQuery: \'.es(*)\' } } }}"\n    ng-model="sheet"\n    ng-focus="onFocusInput()"\n    ng-keydown="onKeyDownInput($event)"\n    ng-keyup="onKeyUpInput($event)"\n    ng-blur="onBlurInput()"\n    ng-mousedown="onMouseDownInput()"\n    ng-mouseup="onMouseUpInput()"\n    ng-click="onClickExpression()"\n    aria-label="{{ ::\'timelion.expressionInputAriaLabel\' | i18n: { defaultMessage: \'Timelion expression\' } }}"\n    aria-multiline="false"\n    aria-autocomplete="list"\n    aria-controls="timelionSuggestionList"\n    aria-activedescendant="{{ getActiveSuggestionId() }}"\n    data-test-subj="timelionExpressionTextArea"\n  ></textarea>\n\n  <timelion-expression-suggestions\n    ng-show="suggestions.isVisible"\n    suggestions="suggestions.list"\n    suggestions-type="suggestions.type"\n    selected-index="suggestions.index"\n    on-click-suggestion="onClickSuggestion(suggestionIndex)"\n    should-popover="shouldPopoverSuggestions"\n  ></timelion-expression-suggestions>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.suggest=suggest;exports.insertAtLocation=insertAtLocation;exports.Suggestions=exports.SUGGESTION_TYPE=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SUGGESTION_TYPE={ARGUMENTS:"arguments",ARGUMENT_VALUE:"argument_value",FUNCTIONS:"functions"};exports.SUGGESTION_TYPE=SUGGESTION_TYPE;var Suggestions=function(){function Suggestions(){_classCallCheck(this,Suggestions);this.reset()}_createClass(Suggestions,[{key:"reset",value:function reset(){this.index=-1;this.list=[];this.type=null;this.isVisible=false}},{key:"setList",value:function setList(list,type){this.list=list.sort(function(a,b){if(a.name<b.name){return-1}if(a.name>b.name){return 1}return 0});this.type=type;if(this.index>-1){this.index=Math.max(0,Math.min(this.index,this.list.length-1))}}},{key:"getCount",value:function getCount(){return this.list.length}},{key:"isEmpty",value:function isEmpty(){return this.list.length===0}},{key:"show",value:function show(){this.isVisible=true}},{key:"hide",value:function hide(){this.isVisible=false}},{key:"stepForward",value:function stepForward(){if(this.index>0){this.index-=1}}},{key:"stepBackward",value:function stepBackward(){if(this.index<this.list.length-1){this.index+=1}}}]);return Suggestions}();exports.Suggestions=Suggestions;function inLocation(cursorPosition,location){return cursorPosition>=location.min&&cursorPosition<=location.max}function getArgumentsHelp(functionHelp){var functionArgs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(!functionHelp){return[]}var argsHelp=functionHelp.chainable?functionHelp.args.slice(1):functionHelp.args.slice(0);var functionArgNames=functionArgs.map(function(arg){return arg.name});return argsHelp.filter(function(arg){return!functionArgNames.includes(arg.name)})}function extractSuggestionsFromParsedResult(_x,_x2,_x3,_x4){return _extractSuggestionsFromParsedResult.apply(this,arguments)}function _extractSuggestionsFromParsedResult(){_extractSuggestionsFromParsedResult=_asyncToGenerator(regeneratorRuntime.mark(function _callee(result,cursorPosition,functionList,argValueSuggestions){var activeFunc,functionHelp,openParen,activeArg,functionName,functionArgs,argName,partialInput,valueSuggestions,_functionHelp$args$fi,staticSuggestions,argsHelp,argumentSuggestions,location;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:activeFunc=result.functions.find(function(func){return cursorPosition>=func.location.min&&cursorPosition<func.location.max});if(activeFunc){_context.next=3;break}return _context.abrupt("return");case 3:functionHelp=functionList.find(function(func){return func.name===activeFunc.function});openParen=activeFunc.location.min+activeFunc.function.length+2;if(!(cursorPosition<openParen)){_context.next=7;break}return _context.abrupt("return",{list:[functionHelp],location:activeFunc.location,type:SUGGESTION_TYPE.FUNCTIONS});case 7:activeArg=activeFunc.arguments.find(function(argument){return inLocation(cursorPosition,argument.location)});if(!(activeArg&&activeArg.type==="namedArg"&&inLocation(cursorPosition,activeArg.value.location))){_context.next=20;break}functionName=activeFunc.function,functionArgs=activeFunc.arguments;argName=activeArg.name,partialInput=activeArg.value.text;if(!argValueSuggestions.hasDynamicSuggestionsForArgument(functionName,argName)){_context.next=17;break}_context.next=14;return argValueSuggestions.getDynamicSuggestionsForArgument(functionName,argName,functionArgs,partialInput);case 14:valueSuggestions=_context.sent;_context.next=19;break;case 17:_functionHelp$args$fi=functionHelp.args.find(function(arg){return arg.name===activeArg.name}),staticSuggestions=_functionHelp$args$fi.suggestions;valueSuggestions=argValueSuggestions.getStaticSuggestionsForInput(partialInput,staticSuggestions);case 19:return _context.abrupt("return",{list:valueSuggestions,location:activeArg.value.location,type:SUGGESTION_TYPE.ARGUMENT_VALUE});case 20:argsHelp=getArgumentsHelp(functionHelp,activeFunc.arguments);argumentSuggestions=argsHelp.filter(function(arg){if(_lodash.default.get(activeArg,"type")==="namedArg"){return _lodash.default.startsWith(arg.name,activeArg.name)}else if(activeArg){return _lodash.default.startsWith(arg.name,activeArg.text)}return true});location=activeArg?activeArg.location:{min:cursorPosition,max:cursorPosition};return _context.abrupt("return",{list:argumentSuggestions,location:location,type:SUGGESTION_TYPE.ARGUMENTS});case 24:case"end":return _context.stop()}}},_callee)}));return _extractSuggestionsFromParsedResult.apply(this,arguments)}function suggest(_x5,_x6,_x7,_x8,_x9){return _suggest.apply(this,arguments)}function _suggest(){_suggest=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(expression,functionList,Parser,cursorPosition,argValueSuggestions){var result,message,list,_message,functionName,functionArgs,functionHelp,_message2,argName,_functionName,_functionArgs,valueSuggestions,_functionHelp,argHelp;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Parser.parse(expression);case 3:result=_context2.sent;_context2.next=6;return extractSuggestionsFromParsedResult(result,cursorPosition,functionList,argValueSuggestions);case 6:return _context2.abrupt("return",_context2.sent);case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);_context2.prev=11;message=JSON.parse(_context2.t0.message);_context2.next=18;break;case 15:_context2.prev=15;_context2.t1=_context2["catch"](11);return _context2.abrupt("return");case 18:_context2.t2=message.type;_context2.next=_context2.t2==="incompleteFunction"?21:_context2.t2==="incompleteArgument"?23:_context2.t2==="incompleteArgumentValue"?26:37;break;case 21:if(message.function){list=functionList.filter(function(func){return _lodash.default.startsWith(func.name,message.function)})}else{list=functionList}return _context2.abrupt("return",{list:list,location:message.location,type:SUGGESTION_TYPE.FUNCTIONS});case 23:_message=message,functionName=_message.currentFunction,functionArgs=_message.currentArgs;functionHelp=functionList.find(function(func){return func.name===functionName});return _context2.abrupt("return",{list:getArgumentsHelp(functionHelp,functionArgs),location:message.location,type:SUGGESTION_TYPE.ARGUMENTS});case 26:_message2=message,argName=_message2.name,_functionName=_message2.currentFunction,_functionArgs=_message2.currentArgs;valueSuggestions=[];if(!argValueSuggestions.hasDynamicSuggestionsForArgument(_functionName,argName)){_context2.next=34;break}_context2.next=31;return argValueSuggestions.getDynamicSuggestionsForArgument(_functionName,argName,_functionArgs);case 31:valueSuggestions=_context2.sent;_context2.next=36;break;case 34:_functionHelp=functionList.find(function(func){return func.name===_functionName});if(_functionHelp){argHelp=_functionHelp.args.find(function(arg){return arg.name===argName});if(argHelp&&argHelp.suggestions){valueSuggestions=argHelp.suggestions}}case 36:return _context2.abrupt("return",{list:valueSuggestions,location:{min:cursorPosition,max:cursorPosition},type:SUGGESTION_TYPE.ARGUMENT_VALUE});case 37:case"end":return _context2.stop()}}},_callee2,null,[[0,9],[11,15]])}));return _suggest.apply(this,arguments)}function insertAtLocation(valueToInsert,destination,replacementRangeStart,replacementRangeEnd){var prefix=destination.slice(0,replacementRangeStart);var suffix=destination.slice(replacementRangeEnd,destination.length);var result="".concat(prefix).concat(valueToInsert).concat(suffix);return result}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgValueSuggestionsProvider=ArgValueSuggestionsProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _saved_objects=__webpack_require__(36);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function ArgValueSuggestionsProvider(Private,indexPatterns){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);function getIndexPattern(_x){return _getIndexPattern.apply(this,arguments)}function _getIndexPattern(){_getIndexPattern=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(functionArgs){var indexPatternArg,indexPatternTitle,resp,indexPatternSavedObject;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:indexPatternArg=functionArgs.find(function(argument){return argument.name==="index"});if(indexPatternArg){_context6.next=3;break}return _context6.abrupt("return");case 3:indexPatternTitle=_lodash.default.get(indexPatternArg,"value.text");_context6.next=6;return savedObjectsClient.find({type:"index-pattern",fields:["title"],search:'"'.concat(indexPatternTitle,'"'),search_fields:["title"],perPage:10});case 6:resp=_context6.sent;indexPatternSavedObject=resp.savedObjects.find(function(savedObject){return savedObject.attributes.title===indexPatternTitle});if(indexPatternSavedObject){_context6.next=10;break}return _context6.abrupt("return");case 10:_context6.next=12;return indexPatterns.get(indexPatternSavedObject.id);case 12:return _context6.abrupt("return",_context6.sent);case 13:case"end":return _context6.stop()}}},_callee6)}));return _getIndexPattern.apply(this,arguments)}function containsFieldName(partial,field){if(!partial){return true}return field.name.includes(partial)}var customHandlers={es:{index:function(){var _index=_asyncToGenerator(regeneratorRuntime.mark(function _callee(partial){var search,resp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:search=partial?"".concat(partial,"*"):"*";_context.next=3;return savedObjectsClient.find({type:"index-pattern",fields:["title","type"],search:"".concat(search),search_fields:["title"],perPage:25});case 3:resp=_context.sent;return _context.abrupt("return",resp.savedObjects.filter(function(savedObject){return!savedObject.get("type")}).map(function(savedObject){return{name:savedObject.attributes.title}}));case 5:case"end":return _context.stop()}}},_callee)}));function index(_x2){return _index.apply(this,arguments)}return index}(),metric:function(){var _metric=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(partial,functionArgs){var indexPattern,valueSplit;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!partial||!partial.includes(":"))){_context2.next=2;break}return _context2.abrupt("return",[{name:"avg:"},{name:"cardinality:"},{name:"count"},{name:"max:"},{name:"min:"},{name:"percentiles:"},{name:"sum:"}]);case 2:_context2.next=4;return getIndexPattern(functionArgs);case 4:indexPattern=_context2.sent;if(indexPattern){_context2.next=7;break}return _context2.abrupt("return",[]);case 7:valueSplit=partial.split(":");return _context2.abrupt("return",indexPattern.fields.filter(function(field){return field.aggregatable&&"number"===field.type&&containsFieldName(valueSplit[1],field)}).map(function(field){return{name:"".concat(valueSplit[0],":").concat(field.name),help:field.type}}));case 9:case"end":return _context2.stop()}}},_callee2)}));function metric(_x3,_x4){return _metric.apply(this,arguments)}return metric}(),split:function(){var _split=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(partial,functionArgs){var indexPattern;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getIndexPattern(functionArgs);case 2:indexPattern=_context3.sent;if(indexPattern){_context3.next=5;break}return _context3.abrupt("return",[]);case 5:return _context3.abrupt("return",indexPattern.fields.filter(function(field){return field.aggregatable&&["number","boolean","date","ip","string"].includes(field.type)&&containsFieldName(partial,field)}).map(function(field){return{name:field.name,help:field.type}}));case 6:case"end":return _context3.stop()}}},_callee3)}));function split(_x5,_x6){return _split.apply(this,arguments)}return split}(),timefield:function(){var _timefield=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(partial,functionArgs){var indexPattern;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getIndexPattern(functionArgs);case 2:indexPattern=_context4.sent;if(indexPattern){_context4.next=5;break}return _context4.abrupt("return",[]);case 5:return _context4.abrupt("return",indexPattern.fields.filter(function(field){return"date"===field.type&&containsFieldName(partial,field)}).map(function(field){return{name:field.name}}));case 6:case"end":return _context4.stop()}}},_callee4)}));function timefield(_x7,_x8){return _timefield.apply(this,arguments)}return timefield}()}};return{hasDynamicSuggestionsForArgument:function hasDynamicSuggestionsForArgument(functionName,argName){return customHandlers[functionName]&&customHandlers[functionName][argName]},getDynamicSuggestionsForArgument:function(){var _getDynamicSuggestionsForArgument=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(functionName,argName,functionArgs){var partialInput,_args5=arguments;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:partialInput=_args5.length>3&&_args5[3]!==undefined?_args5[3]:"";_context5.next=3;return customHandlers[functionName][argName](partialInput,functionArgs);case 3:return _context5.abrupt("return",_context5.sent);case 4:case"end":return _context5.stop()}}},_callee5)}));function getDynamicSuggestionsForArgument(_x9,_x10,_x11){return _getDynamicSuggestionsForArgument.apply(this,arguments)}return getDynamicSuggestionsForArgument}(),getStaticSuggestionsForInput:function getStaticSuggestionsForInput(){var partialInput=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var staticSuggestions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(partialInput){return staticSuggestions.filter(function(suggestion){return suggestion.name.includes(partialInput)})}return staticSuggestions}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div ng-controller="TimelionVisController" class="timVis">\n    <div chart="esResponse.sheet[0]" rerender-trigger="renderComplete" class="timChart" interval="visState.params.interval"></div>\n</div>\n'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section">\n  <div class="form-group">\n    <label\n      for="timelionInterval"\n      i18n-id="timelion.vis.intervalLabel"\n      i18n-default-message="Interval"\n    ></label>\n    <div class="form-group">\n      <timelion-interval model="editorState.params.interval"></timelion-interval>\n    </div>\n  </div>\n\n  <div class="form-group">\n    <div>\n      <label\n        i18n-id="timelion.vis.expressionLabel"\n        i18n-default-message="Timelion Expression"\n      ></label>\n    </div>\n\n    <timelion-expression-input\n      sheet="editorState.params.expression"\n      rows="9"\n    ></timelion-expression-input>\n  </div>\n\n</div>\n'},,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _saved_object_registry=__webpack_require__(69);__webpack_require__(717);_saved_object_registry.SavedObjectRegistryProvider.register(function(savedDashboards){return savedDashboards})},function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(17));var _i18n=__webpack_require__(2);var _modules=__webpack_require__(6);var _dashboard_constants=__webpack_require__(376);var _legacy_class=__webpack_require__(29);var _saved_object=__webpack_require__(377);var _saved_dashboard_references=__webpack_require__(1756);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("app/dashboard");_module.factory("SavedDashboard",function(Private){var SavedObject=Private(_saved_object.SavedObjectProvider);(0,_legacy_class.createLegacyClass)(SavedDashboard).inherits(SavedObject);function SavedDashboard(id){SavedDashboard.Super.call(this,{type:SavedDashboard.type,mapping:SavedDashboard.mapping,searchSource:SavedDashboard.searchsource,extractReferences:_saved_dashboard_references.extractReferences,injectReferences:_saved_dashboard_references.injectReferences,id:id,defaults:{title:_i18n.i18n.translate("kbn.dashboard.savedDashboard.newDashboardTitle",{defaultMessage:"New Dashboard"}),hits:0,description:"",panelsJSON:"[]",optionsJSON:_angular.default.toJson({useMargins:id?false:true,hidePanelTitles:false}),version:1,timeRestore:false,timeTo:undefined,timeFrom:undefined,refreshInterval:undefined},clearSavedIndexPattern:true});this.showInRecentlyAccessed=true}SavedDashboard.type="dashboard";SavedDashboard.mapping={title:"text",hits:"integer",description:"text",panelsJSON:"text",optionsJSON:"text",version:"integer",timeRestore:"boolean",timeTo:"keyword",timeFrom:"keyword",refreshInterval:{type:"object",properties:{display:{type:"keyword"},pause:{type:"boolean"},section:{type:"integer"},value:{type:"integer"}}}};SavedDashboard.fieldOrder=["title","description"];SavedDashboard.searchsource=true;SavedDashboard.prototype.getFullPath=function(){return"/app/kibana#".concat((0,_dashboard_constants.createDashboardEditUrl)(this.id))};SavedDashboard.prototype.getQuery=function(){return this.searchSource.getOwnField("query")||{query:"",language:"kuery"}};SavedDashboard.prototype.getFilters=function(){return this.searchSource.getOwnField("filter")||[]};return SavedDashboard})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractReferences=extractReferences;exports.injectReferences=injectReferences;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function extractReferences(_ref){var attributes=_ref.attributes,_ref$references=_ref.references,references=_ref$references===void 0?[]:_ref$references;var panelReferences=[];var panels=JSON.parse(attributes.panelsJSON);panels.forEach(function(panel,i){if(!panel.type){throw new Error('"type" attribute is missing from panel "'.concat(i,'"'))}if(!panel.id){return}panel.panelRefName="panel_".concat(i);panelReferences.push({name:"panel_".concat(i),type:panel.type,id:panel.id});delete panel.type;delete panel.id});return{references:[].concat(_toConsumableArray(references),panelReferences),attributes:_objectSpread({},attributes,{panelsJSON:JSON.stringify(panels)})}}function injectReferences(savedObject,references){if(typeof savedObject.panelsJSON!=="string"){return}var panels=JSON.parse(savedObject.panelsJSON);if(!Array.isArray(panels)){return}panels.forEach(function(panel){if(!panel.panelRefName){return}var reference=references.find(function(reference){return reference.name===panel.panelRefName});if(!reference){throw new Error('Could not find reference "'.concat(panel.panelRefName,'"'))}panel.id=reference.id;panel.type=reference.type;delete panel.panelRefName});savedObject.panelsJSON=JSON.stringify(panels)}},function(module,exports,__webpack_require__){"use strict";var _saved_object_registry=__webpack_require__(69);__webpack_require__(718);_saved_object_registry.SavedObjectRegistryProvider.register(function(savedSearches){return savedSearches})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(9);var _i18n=__webpack_require__(2);var _modules=__webpack_require__(6);var _legacy_class=__webpack_require__(29);var _saved_object=__webpack_require__(377);var _module=_modules.uiModules.get("discover/saved_searches",["kibana/courier"]);_module.factory("SavedSearch",function(Private){var SavedObject=Private(_saved_object.SavedObjectProvider);(0,_legacy_class.createLegacyClass)(SavedSearch).inherits(SavedObject);function SavedSearch(id){SavedObject.call(this,{type:SavedSearch.type,mapping:SavedSearch.mapping,searchSource:SavedSearch.searchSource,id:id,defaults:{title:_i18n.i18n.translate("kbn.discover.savedSearch.newSavedSearchTitle",{defaultMessage:"New Saved Search"}),description:"",columns:[],hits:0,sort:[],version:1}});this.showInRecentlyAccessed=true}SavedSearch.type="search";SavedSearch.mapping={title:"text",description:"text",hits:"integer",columns:"keyword",sort:"keyword",version:"integer"};SavedSearch.fieldOrder=["title","description"];SavedSearch.searchSource=true;SavedSearch.prototype.getFullPath=function(){return"/app/kibana#/discover/".concat(this.id)};return SavedSearch})},function(module,exports,__webpack_require__){"use strict";var _saved_object_registry=__webpack_require__(69);__webpack_require__(449);_saved_object_registry.SavedObjectRegistryProvider.register(function(savedVisualizations){return savedVisualizations})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateOldState=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function convertHeatmapLabelColor(visState){var hasOverwriteColorParam=_lodash.default.get(visState,"params.valueAxes[0].labels.overwriteColor")!==undefined;if(visState.type==="heatmap"&&visState.params&&!hasOverwriteColorParam){var showLabels=_lodash.default.get(visState,"params.valueAxes[0].labels.show",false);var color=_lodash.default.get(visState,"params.valueAxes[0].labels.color","#555");_lodash.default.set(visState,"params.valueAxes[0].labels.overwriteColor",showLabels&&color!=="#555")}}function convertTermAggregation(visState){if(visState.aggs){visState.aggs.forEach(function(agg){if(agg.type==="terms"&&agg.params&&agg.params.orderBy==="_term"){agg.params.orderBy="_key"}})}}function convertPropertyNames(visState){if(typeof _lodash.default.get(visState,"params.showMeticsAtAllLevels")==="boolean"){visState.params.showMetricsAtAllLevels=visState.params.showMeticsAtAllLevels;delete visState.params.showMeticsAtAllLevels}}var updateOldState=function updateOldState(visState){if(!visState)return visState;var newState=_lodash.default.cloneDeep(visState);convertTermAggregation(newState);convertPropertyNames(newState);if(visState.type==="gauge"&&visState.fontSize){delete newState.fontSize;_lodash.default.set(newState,"gauge.style.fontSize",visState.fontSize)}if(["gauge","metric"].includes(visState.type)&&_lodash.default.get(visState.params,"gauge.gaugeType",null)==="Metric"){newState.type="metric";newState.params.addLegend=false;newState.params.type="metric";newState.params.metric=newState.params.gauge;delete newState.params.gauge;delete newState.params.metric.gaugeType;delete newState.params.metric.gaugeStyle;delete newState.params.metric.backStyle;delete newState.params.metric.scale;delete newState.params.metric.type;delete newState.params.metric.orientation;delete newState.params.metric.verticalSplit;delete newState.params.metric.autoExtend;newState.params.metric.metricColorMode=newState.params.metric.gaugeColorMode;delete newState.params.metric.gaugeColorMode}else if(visState.type==="metric"&&_lodash.default.get(visState.params,"gauge.gaugeType","Metric")!=="Metric"){newState.type="gauge";newState.params.type="gauge"}convertHeatmapLabelColor(newState);return newState};exports.updateOldState=updateOldState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractReferences=extractReferences;exports.injectReferences=injectReferences;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function extractReferences(_ref){var attributes=_ref.attributes,_ref$references=_ref.references,references=_ref$references===void 0?[]:_ref$references;var updatedAttributes=_objectSpread({},attributes);var updatedReferences=_toConsumableArray(references);if(updatedAttributes.savedSearchId){updatedReferences.push({name:"search_0",type:"search",id:updatedAttributes.savedSearchId});delete updatedAttributes.savedSearchId;updatedAttributes.savedSearchRefName="search_0"}if(updatedAttributes.visState){var visState=JSON.parse(updatedAttributes.visState);var controls=visState.params&&visState.params.controls||[];controls.forEach(function(control,i){if(!control.indexPattern){return}control.indexPatternRefName="control_".concat(i,"_index_pattern");updatedReferences.push({name:control.indexPatternRefName,type:"index-pattern",id:control.indexPattern});delete control.indexPattern});updatedAttributes.visState=JSON.stringify(visState)}return{references:updatedReferences,attributes:updatedAttributes}}function injectReferences(savedObject,references){if(savedObject.savedSearchRefName){var savedSearchReference=references.find(function(reference){return reference.name===savedObject.savedSearchRefName});if(!savedSearchReference){throw new Error('Could not find saved search reference "'.concat(savedObject.savedSearchRefName,'"'))}savedObject.savedSearchId=savedSearchReference.id;delete savedObject.savedSearchRefName}if(savedObject.visState){var controls=savedObject.visState.params&&savedObject.visState.params.controls||[];controls.forEach(function(control){if(!control.indexPatternRefName){return}var reference=references.find(function(reference){return reference.name===control.indexPatternRefName});if(!reference){throw new Error('Could not find index pattern reference "'.concat(control.indexPatternRefName,'"'))}control.indexPattern=reference.id;delete control.indexPatternRefName})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findListItems=findListItems;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function findListItems(_x){return _findListItems.apply(this,arguments)}function _findListItems(){_findListItems=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var visTypes,search,size,savedObjectsClient,mapSavedObjectApiHits,extensions,extensionByType,searchOption,searchOptions,_ref2,total,savedObjects;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:visTypes=_ref.visTypes,search=_ref.search,size=_ref.size,savedObjectsClient=_ref.savedObjectsClient,mapSavedObjectApiHits=_ref.mapSavedObjectApiHits;extensions=_lodash.default.compact(visTypes.map(function(v){return v.appExtensions&&v.appExtensions.visualizations}));extensionByType=extensions.reduce(function(acc,m){return m.docTypes.reduce(function(_acc,type){acc[type]=m;return acc},acc)},{});searchOption=function searchOption(field){for(var _len=arguments.length,defaults=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){defaults[_key-1]=arguments[_key]}return(0,_lodash.default)(extensions).pluck(field).concat(defaults).compact().flatten().uniq().value()};searchOptions={type:searchOption("docTypes","visualization"),searchFields:searchOption("searchFields","title^3","description"),search:search?"".concat(search,"*"):undefined,perPage:size,page:1,defaultSearchOperator:"AND"};_context.next=7;return savedObjectsClient.find(searchOptions);case 7:_ref2=_context.sent;total=_ref2.total;savedObjects=_ref2.savedObjects;return _context.abrupt("return",{total:total,hits:savedObjects.map(function(savedObject){var config=extensionByType[savedObject.type];if(config){return config.toListItem(savedObject)}else{return mapSavedObjectApiHits(savedObject)}})});case 11:case"end":return _context.stop()}}},_callee)}));return _findListItems.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";var _field_formats=__webpack_require__(32);var _url=__webpack_require__(1764);var _bytes=__webpack_require__(1765);var _date=__webpack_require__(1768);var _date_nanos=__webpack_require__(1769);var _relative_date=__webpack_require__(1770);var _duration=__webpack_require__(1771);var _ip=__webpack_require__(1772);var _number=__webpack_require__(1773);var _percent=__webpack_require__(1774);var _string=__webpack_require__(1775);var _source=__webpack_require__(1776);var _color=__webpack_require__(1777);var _truncate=__webpack_require__(1778);var _boolean=__webpack_require__(1779);var _static_lookup=__webpack_require__(1780);_field_formats.fieldFormats.register(_url.createUrlFormat);_field_formats.fieldFormats.register(_bytes.createBytesFormat);_field_formats.fieldFormats.register(_date.createDateFormat);_field_formats.fieldFormats.register(_date_nanos.createDateNanosFormat);_field_formats.fieldFormats.register(_relative_date.createRelativeDateFormat);_field_formats.fieldFormats.register(_duration.createDurationFormat);_field_formats.fieldFormats.register(_ip.createIpFormat);_field_formats.fieldFormats.register(_number.createNumberFormat);_field_formats.fieldFormats.register(_percent.createPercentFormat);_field_formats.fieldFormats.register(_string.createStringFormat);_field_formats.fieldFormats.register(_source.createSourceFormat);_field_formats.fieldFormats.register(_color.createColorFormat);_field_formats.fieldFormats.register(_truncate.createTruncateFormat);_field_formats.fieldFormats.register(_boolean.createBoolFormat);_field_formats.fieldFormats.register(_static_lookup.createStaticLookupFormat)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createUrlFormat=createUrlFormat;var _lodash=_interopRequireDefault(__webpack_require__(1));var _highlight_html=__webpack_require__(402);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var templateMatchRE=/{{([\s\S]+?)}}/g;var whitelistUrlSchemes=["http://","https://"];var URL_TYPES=[{kind:"a",text:"Link"},{kind:"img",text:"Image"},{kind:"audio",text:"Audio"}];var DEFAULT_URL_TYPE="a";function createUrlFormat(FieldFormat){var UrlFormat=function(_FieldFormat){_inherits(UrlFormat,_FieldFormat);function UrlFormat(params){var _this;_classCallCheck(this,UrlFormat);_this=_possibleConstructorReturn(this,_getPrototypeOf(UrlFormat).call(this,params));_this._compileTemplate=_lodash.default.memoize(_this._compileTemplate);return _this}_createClass(UrlFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{type:DEFAULT_URL_TYPE,urlTemplate:null,labelTemplate:null}}},{key:"_formatLabel",value:function _formatLabel(value,url){var template=this.param("labelTemplate");if(url==null)url=this._formatUrl(value);if(!template)return url;return this._compileTemplate(template)({value:value,url:url})}},{key:"_formatUrl",value:function _formatUrl(value){var template=this.param("urlTemplate");if(!template)return value;return this._compileTemplate(template)({value:encodeURIComponent(value),rawValue:value})}},{key:"_compileTemplate",value:function _compileTemplate(template){var parts=template.split(templateMatchRE).map(function(part,i){return i%2?part.trim():part});return function(locals){var output="";var i=-1;while(++i<parts.length){if(i%2){if(locals.hasOwnProperty(parts[i])){var local=locals[parts[i]];output+=local==null?"":local}}else{output+=parts[i]}}return output}}}]);return UrlFormat}(FieldFormat);_defineProperty(UrlFormat,"id","url");_defineProperty(UrlFormat,"title","Url");_defineProperty(UrlFormat,"fieldType",["number","boolean","date","ip","string","murmur3","unknown","conflict"]);_defineProperty(UrlFormat,"urlTypes",URL_TYPES);UrlFormat.prototype._convert={text:function text(value){return this._formatLabel(value)},html:function html(rawValue,field,hit,parsedUrl){var url=_lodash.default.escape(this._formatUrl(rawValue));var label=_lodash.default.escape(this._formatLabel(rawValue,url));switch(this.param("type")){case"audio":return'<audio controls preload="none" src="'.concat(url,'">');case"img":var imageLabel=label===url?"A dynamically-specified image located at ".concat(url):label;return'<img src="'.concat(url,'" alt="').concat(imageLabel,'">');default:var inWhitelist=whitelistUrlSchemes.some(function(scheme){return url.indexOf(scheme)===0});if(!inWhitelist&&!parsedUrl){return url}var prefix="";if(!inWhitelist){if(url[0]==="#"){prefix="".concat(parsedUrl.origin).concat(parsedUrl.pathname)}else if(url.indexOf(parsedUrl.basePath||"/")===0){prefix="".concat(parsedUrl.origin)}else{var prefixEnd=url[0]==="/"?"":"/";prefix="".concat(parsedUrl.origin).concat(parsedUrl.basePath||"","/app").concat(prefixEnd)}}var linkLabel;if(hit&&hit.highlight&&hit.highlight[field.name]){linkLabel=(0,_highlight_html.getHighlightHtml)(label,hit.highlight[field.name])}else{linkLabel=label}var linkTarget=this.param("openLinkInCurrentTab")?"_self":"_blank";return'<a href="'.concat(prefix).concat(url,'" target="').concat(linkTarget,'" rel="noopener noreferrer">').concat(linkLabel,"</a>")}}};return UrlFormat}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createBytesFormat=createBytesFormat;var _numeral=__webpack_require__(451);function createBytesFormat(FieldFormat){return(0,_numeral.createNumeralFormat)(FieldFormat,{id:"bytes",title:"Bytes"})}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2737)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2738)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createDateFormat=createDateFormat;var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createDateFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(DateFormat,_FieldFormat);function DateFormat(params,getConfig){var _this;_classCallCheck(this,DateFormat);_this=_possibleConstructorReturn(this,_getPrototypeOf(DateFormat).call(this,params));_this.getConfig=getConfig;return _this}_createClass(DateFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{pattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}},{key:"_convert",value:function _convert(val){var pattern=this.param("pattern");var timezone=this.param("timezone");var timezoneChanged=this._timeZone!==timezone;var datePatternChanged=this._memoizedPattern!==pattern;if(timezoneChanged||datePatternChanged){this._timeZone=timezone;this._memoizedPattern=pattern;this._memoizedConverter=_lodash.default.memoize(function converter(val){if(val===null||val===undefined){return"-"}var date=(0,_moment.default)(val);if(date.isValid()){return date.format(pattern)}else{return val}})}return this._memoizedConverter(val)}}]);return DateFormat}(FieldFormat),_defineProperty(_class,"id","date"),_defineProperty(_class,"title","Date"),_defineProperty(_class,"fieldType","date"),_temp}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.analysePatternForFract=analysePatternForFract;exports.formatWithNanos=formatWithNanos;exports.createDateNanosFormat=createDateNanosFormat;var _moment=_interopRequireDefault(__webpack_require__(14));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function analysePatternForFract(pattern){var fracSecMatch=pattern.match("S+");var fracSecMatchStr=fracSecMatch?fracSecMatch[0]:"";return{length:fracSecMatchStr.length,patternNanos:fracSecMatchStr,pattern:pattern,patternEscaped:fracSecMatchStr?pattern.replace(fracSecMatch,"[".concat(fracSecMatch,"]")):""}}function formatWithNanos(dateMomentObj,valRaw,fracPatternObj){if(fracPatternObj.length<=3){return dateMomentObj.format(fracPatternObj.pattern)}else{var valFormatted=dateMomentObj.format(fracPatternObj.patternEscaped);var valNanos=valRaw.substr(20,valRaw.length-21).padEnd(9,"0").substr(0,fracPatternObj.patternNanos.length);return valFormatted.replace(fracPatternObj.patternNanos,valNanos)}}function createDateNanosFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(DateNanosFormat,_FieldFormat);function DateNanosFormat(params,getConfig){var _this;_classCallCheck(this,DateNanosFormat);_this=_possibleConstructorReturn(this,_getPrototypeOf(DateNanosFormat).call(this,params));_this.getConfig=getConfig;return _this}_createClass(DateNanosFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{pattern:this.getConfig("dateNanosFormat"),fallbackPattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}},{key:"_convert",value:function _convert(val){var pattern=this.param("pattern");var timezone=this.param("timezone");var fractPattern=analysePatternForFract(pattern);var fallbackPattern=this.param("patternFallback");var timezoneChanged=this._timeZone!==timezone;var datePatternChanged=this._memoizedPattern!==pattern;if(timezoneChanged||datePatternChanged){this._timeZone=timezone;this._memoizedPattern=pattern;this._memoizedConverter=_lodash.default.memoize(function converter(val){if(val===null||val===undefined){return"-"}var date=(0,_moment.default)(val);if(typeof val!=="string"&&date.isValid()){return date.format(fallbackPattern)}else if(date.isValid()){return formatWithNanos(date,val,fractPattern)}else{return val}})}return this._memoizedConverter(val)}}]);return DateNanosFormat}(FieldFormat),_defineProperty(_class,"id","date_nanos"),_defineProperty(_class,"title","Date Nanos"),_defineProperty(_class,"fieldType","date"),_temp}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createRelativeDateFormat=createRelativeDateFormat;var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createRelativeDateFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(RelativeDateFormat,_FieldFormat);function RelativeDateFormat(params){_classCallCheck(this,RelativeDateFormat);return _possibleConstructorReturn(this,_getPrototypeOf(RelativeDateFormat).call(this,params))}_createClass(RelativeDateFormat,[{key:"_convert",value:function _convert(val){if(val===null||val===undefined){return"-"}var date=(0,_moment.default)(val);if(date.isValid()){return date.fromNow()}else{return val}}}]);return RelativeDateFormat}(FieldFormat),_defineProperty(_class,"id","relative_date"),_defineProperty(_class,"title","Relative Date"),_defineProperty(_class,"fieldType","date"),_temp}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty2(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.createDurationFormat=createDurationFormat;var _moment=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ratioToSeconds={picoseconds:1e-12,nanoseconds:1e-9,microseconds:1e-6};var HUMAN_FRIENDLY="humanize";var DEFAULT_OUTPUT_PRECISION=2;var DEFAULT_INPUT_FORMAT={text:"Seconds",kind:"seconds"};var inputFormats=[{text:"Picoseconds",kind:"picoseconds"},{text:"Nanoseconds",kind:"nanoseconds"},{text:"Microseconds",kind:"microseconds"},{text:"Milliseconds",kind:"milliseconds"},_objectSpread({},DEFAULT_INPUT_FORMAT),{text:"Minutes",kind:"minutes"},{text:"Hours",kind:"hours"},{text:"Days",kind:"days"},{text:"Weeks",kind:"weeks"},{text:"Months",kind:"months"},{text:"Years",kind:"years"}];var DEFAULT_OUTPUT_FORMAT={text:"Human Readable",method:"humanize"};var outputFormats=[_objectSpread({},DEFAULT_OUTPUT_FORMAT),{text:"Milliseconds",method:"asMilliseconds"},{text:"Seconds",method:"asSeconds"},{text:"Minutes",method:"asMinutes"},{text:"Hours",method:"asHours"},{text:"Days",method:"asDays"},{text:"Weeks",method:"asWeeks"},{text:"Months",method:"asMonths"},{text:"Years",method:"asYears"}];function parseInputAsDuration(val,inputFormat){var ratio=ratioToSeconds[inputFormat]||1;var kind=inputFormat in ratioToSeconds?"seconds":inputFormat;return _moment.default.duration(val*ratio,kind)}function createDurationFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(DurationFormat,_FieldFormat);function DurationFormat(){_classCallCheck(this,DurationFormat);return _possibleConstructorReturn(this,_getPrototypeOf(DurationFormat).apply(this,arguments))}_createClass(DurationFormat,[{key:"isHuman",value:function isHuman(){return this.param("outputFormat")===HUMAN_FRIENDLY}},{key:"getParamDefaults",value:function getParamDefaults(){return{inputFormat:DEFAULT_INPUT_FORMAT.kind,outputFormat:DEFAULT_OUTPUT_FORMAT.method,outputPrecision:DEFAULT_OUTPUT_PRECISION}}},{key:"_convert",value:function _convert(val){var inputFormat=this.param("inputFormat");var outputFormat=this.param("outputFormat");var outputPrecision=this.param("outputPrecision");var human=this.isHuman();var prefix=val<0&&human?"minus ":"";var duration=parseInputAsDuration(val,inputFormat);var formatted=duration[outputFormat]();var precise=human?formatted:formatted.toFixed(outputPrecision);return prefix+precise}}]);return DurationFormat}(FieldFormat),_defineProperty(_class,"id","duration"),_defineProperty(_class,"title","Duration"),_defineProperty(_class,"fieldType","number"),_defineProperty(_class,"inputFormats",inputFormats),_defineProperty(_class,"outputFormats",outputFormats),_temp}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createIpFormat=createIpFormat;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createIpFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(IpFormat,_FieldFormat);function IpFormat(){_classCallCheck(this,IpFormat);return _possibleConstructorReturn(this,_getPrototypeOf(IpFormat).apply(this,arguments))}_createClass(IpFormat,[{key:"_convert",value:function _convert(val){if(val===undefined||val===null)return"-";if(!isFinite(val))return val;return[val>>>24,val>>>16&255,val>>>8&255,val&255].join(".")}}]);return IpFormat}(FieldFormat),_defineProperty(_class,"id","ip"),_defineProperty(_class,"title","IP Address"),_defineProperty(_class,"fieldType","ip"),_temp}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createNumberFormat=createNumberFormat;var _numeral=__webpack_require__(451);function createNumberFormat(FieldFormat){return(0,_numeral.createNumeralFormat)(FieldFormat,{id:"number",title:"Number"})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createPercentFormat=createPercentFormat;var _numeral=__webpack_require__(451);function createPercentFormat(FieldFormat){return(0,_numeral.createNumeralFormat)(FieldFormat,{id:"percent",title:"Percentage",getParamDefaults:function getParamDefaults(getConfig){return{pattern:getConfig("format:percent:defaultPattern"),fractional:true}},afterConvert:function afterConvert(val){return this.param("fractional")?val:val/100}})}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createStringFormat=createStringFormat;var _as_pretty_string=__webpack_require__(345);var _shorten_dotted_string=__webpack_require__(117);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TRANSFORM_OPTIONS=[{kind:false,text:"- None -"},{kind:"lower",text:"Lower Case"},{kind:"upper",text:"Upper Case"},{kind:"title",text:"Title Case"},{kind:"short",text:"Short Dots"},{kind:"base64",text:"Base64 Decode"}];var DEFAULT_TRANSFORM_OPTION=false;function createStringFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(StringFormat,_FieldFormat);function StringFormat(){_classCallCheck(this,StringFormat);return _possibleConstructorReturn(this,_getPrototypeOf(StringFormat).apply(this,arguments))}_createClass(StringFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{transform:DEFAULT_TRANSFORM_OPTION}}},{key:"_base64Decode",value:function _base64Decode(val){try{return Buffer.from(val,"base64").toString("utf8")}catch(e){return(0,_as_pretty_string.asPrettyString)(val)}}},{key:"_toTitleCase",value:function _toTitleCase(val){return val.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})}},{key:"_convert",value:function _convert(val){switch(this.param("transform")){case"lower":return String(val).toLowerCase();case"upper":return String(val).toUpperCase();case"title":return this._toTitleCase(val);case"short":return(0,_shorten_dotted_string.shortenDottedString)(val);case"base64":return this._base64Decode(val);default:return(0,_as_pretty_string.asPrettyString)(val)}}}]);return StringFormat}(FieldFormat),_defineProperty(_class,"id","string"),_defineProperty(_class,"title","String"),_defineProperty(_class,"fieldType",["number","boolean","date","ip","attachment","geo_point","geo_shape","string","murmur3","unknown","conflict"]),_defineProperty(_class,"transformOptions",TRANSFORM_OPTIONS),_temp}}).call(this,__webpack_require__(121).Buffer)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createSourceFormat=createSourceFormat;var _lodash=_interopRequireDefault(__webpack_require__(1));var _no_white_space=__webpack_require__(720);var _shorten_dotted_string=__webpack_require__(117);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var templateHtml="\n  <dl class=\"source truncate-by-height\">\n    <% defPairs.forEach(function (def) { %>\n      <dt><%- def[0] %>:</dt>\n      <dd><%= def[1] %></dd>\n      <%= ' ' %>\n    <% }); %>\n  </dl>";var template=_lodash.default.template((0,_no_white_space.noWhiteSpace)(templateHtml));function createSourceFormat(FieldFormat){var SourceFormat=function(_FieldFormat){_inherits(SourceFormat,_FieldFormat);function SourceFormat(params,getConfig){var _this;_classCallCheck(this,SourceFormat);_this=_possibleConstructorReturn(this,_getPrototypeOf(SourceFormat).call(this,params));_this.getConfig=getConfig;return _this}return SourceFormat}(FieldFormat);_defineProperty(SourceFormat,"id","_source");_defineProperty(SourceFormat,"title","_source");_defineProperty(SourceFormat,"fieldType","_source");SourceFormat.prototype._convert={text:function text(value){return JSON.stringify(value)},html:function sourceToHtml(source,field,hit){if(!field)return _lodash.default.escape(this.getConverterFor("text")(source));var highlights=hit&&hit.highlight||{};var formatted=field.indexPattern.formatHit(hit);var highlightPairs=[];var sourcePairs=[];var isShortDots=this.getConfig("shortDots:enable");_lodash.default.keys(formatted).forEach(function(key){var pairs=highlights[key]?highlightPairs:sourcePairs;var field=isShortDots?(0,_shorten_dotted_string.shortenDottedString)(key):key;var val=formatted[key];pairs.push([field,val])},[]);return template({defPairs:highlightPairs.concat(sourcePairs)})}};return SourceFormat}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createColorFormat=createColorFormat;var _lodash=_interopRequireDefault(__webpack_require__(1));var _as_pretty_string=__webpack_require__(345);var _color_default=__webpack_require__(721);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var convertTemplate=_lodash.default.template('<span style="<%- style %>"><%- val %></span>');function createColorFormat(FieldFormat){var ColorFormat=function(_FieldFormat){_inherits(ColorFormat,_FieldFormat);function ColorFormat(){_classCallCheck(this,ColorFormat);return _possibleConstructorReturn(this,_getPrototypeOf(ColorFormat).apply(this,arguments))}_createClass(ColorFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{fieldType:null,colors:[_lodash.default.cloneDeep(_color_default.DEFAULT_COLOR)]}}},{key:"findColorRuleForVal",value:function findColorRuleForVal(val){switch(this.param("fieldType")){case"string":return _lodash.default.findLast(this.param("colors"),function(colorParam){return new RegExp(colorParam.regex).test(val)});case"number":return _lodash.default.findLast(this.param("colors"),function(_ref){var range=_ref.range;if(!range)return;var _range$split=range.split(":"),_range$split2=_slicedToArray(_range$split,2),start=_range$split2[0],end=_range$split2[1];return val>=Number(start)&&val<=Number(end)});default:return null}}}]);return ColorFormat}(FieldFormat);_defineProperty(ColorFormat,"id","color");_defineProperty(ColorFormat,"title","Color");_defineProperty(ColorFormat,"fieldType",["number","string"]);ColorFormat.prototype._convert={html:function html(val){var color=this.findColorRuleForVal(val);if(!color)return _lodash.default.escape((0,_as_pretty_string.asPrettyString)(val));var style="";if(color.text)style+="color: ".concat(color.text,";");if(color.background)style+="background-color: ".concat(color.background,";");return convertTemplate({val:val,style:style})}};return ColorFormat}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createTruncateFormat=createTruncateFormat;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var omission="...";function createTruncateFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(TruncateFormat,_FieldFormat);function TruncateFormat(){_classCallCheck(this,TruncateFormat);return _possibleConstructorReturn(this,_getPrototypeOf(TruncateFormat).apply(this,arguments))}_createClass(TruncateFormat,[{key:"_convert",value:function _convert(val){var length=this.param("fieldLength");if(length>0){return _lodash.default.trunc(val,{length:length+omission.length,omission:omission})}return val}}]);return TruncateFormat}(FieldFormat),_defineProperty(_class,"id","truncate"),_defineProperty(_class,"title","Truncated String"),_defineProperty(_class,"fieldType",["string"]),_temp}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createBoolFormat=createBoolFormat;var _as_pretty_string=__webpack_require__(345);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createBoolFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(BoolFormat,_FieldFormat);function BoolFormat(){_classCallCheck(this,BoolFormat);return _possibleConstructorReturn(this,_getPrototypeOf(BoolFormat).apply(this,arguments))}_createClass(BoolFormat,[{key:"_convert",value:function _convert(value){if(typeof value==="string"){value=value.trim().toLowerCase()}switch(value){case false:case 0:case"false":case"no":return"false";case true:case 1:case"true":case"yes":return"true";default:return(0,_as_pretty_string.asPrettyString)(value)}}}]);return BoolFormat}(FieldFormat),_defineProperty(_class,"id","boolean"),_defineProperty(_class,"title","Boolean"),_defineProperty(_class,"fieldType",["boolean","number","string"]),_temp}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createStaticLookupFormat=createStaticLookupFormat;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function convertLookupEntriesToMap(lookupEntries){return lookupEntries.reduce(function(lookupMap,lookupEntry){lookupMap[lookupEntry.key]=lookupEntry.value;return lookupMap},{})}function createStaticLookupFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(StaticLookupFormat,_FieldFormat);function StaticLookupFormat(){_classCallCheck(this,StaticLookupFormat);return _possibleConstructorReturn(this,_getPrototypeOf(StaticLookupFormat).apply(this,arguments))}_createClass(StaticLookupFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{lookupEntries:[{}],unknownKeyValue:null}}},{key:"_convert",value:function _convert(val){var lookupEntries=this.param("lookupEntries");var unknownKeyValue=this.param("unknownKeyValue");var lookupMap=convertLookupEntriesToMap(lookupEntries);return lookupMap[val]||unknownKeyValue||val}}]);return StaticLookupFormat}(FieldFormat),_defineProperty(_class,"id","static_lookup"),_defineProperty(_class,"title","Static Lookup"),_defineProperty(_class,"fieldType",["string"]),_temp}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(1820)},function(module,exports,__webpack_require__){"use strict";var _chrome=_interopRequireDefault(__webpack_require__(7));var _disable_animations=_interopRequireDefault(__webpack_require__(1821));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var uiSettings=_chrome.default.getUiSettingsClient();var styleElement=document.createElement("style");styleElement.setAttribute("id","disableAnimationsCss");document.head.appendChild(styleElement);function updateStyleSheet(){styleElement.textContent=uiSettings.get("accessibility:disableAnimations")?_disable_animations.default:""}updateStyleSheet();uiSettings.getUpdate$().subscribe(function(_ref){var key=_ref.key;if(key==="accessibility:disableAnimations"){updateStyleSheet()}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]="*:not(.essentialAnimation),\n*:not(.essentialAnimation):before,\n*:not(.essentialAnimation):after {\n  /**\n   * set the animation/transition duration to 0s so that animation callbacks are\n   * still triggered, allowing components that require them to remain functional\n   */\n\n  -webkit-animation-duration: 0s !important;\n  animation-duration: 0s !important;\n\n  -webkit-transition-duration: 0s !important;\n  transition-duration: 0s !important;\n\n  -webkit-transition-delay: 0s !important;\n  transition-delay: 0s !important;\n}\n"},function(module,exports,__webpack_require__){var map={"./font_awesome.less":1823};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");e.code="MODULE_NOT_FOUND";throw e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)};webpackContext.resolve=webpackContextResolve;module.exports=webpackContext;webpackContext.id=1822},function(module,exports,__webpack_require__){},,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2734)},,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2290)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(1926)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1927);__webpack_require__(1929);__webpack_require__(1930)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2049);var _modules=__webpack_require__(6);_modules.uiModules.get("kibana",["ngAria"]).config(function($ariaProvider){$ariaProvider.config({bindKeydown:false,bindRoleForClick:false,tabindex:false})})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(514)},function(module,exports,__webpack_require__){"use strict";var _eui=__webpack_require__(3);var _modules=__webpack_require__(6);_modules.uiModules.get("kibana").directive("kbnAccessibleClick",function(){return{restrict:"A",controller:function controller($element){$element.on("keydown",function(e){if(e.keyCode===_eui.keyCodes.SPACE){e.preventDefault()}})},link:function link(scope,element,attrs){var elementType=element.prop("tagName");if(elementType==="BUTTON"){throw new Error("kbnAccessibleClick doesn't need to be used on a button.")}if(elementType==="A"&&attrs.href!==undefined){throw new Error("kbnAccessibleClick doesn't need to be used on a link if it has a href attribute.")}if(!attrs.ngClick){throw new Error("kbnAccessibleClick requires ng-click to be defined on its element.")}if(attrs.tabindex===undefined){element.attr("tabindex","0")}if(attrs.role===undefined){element.attr("role","button")}element.on("keyup",function(e){if(_eui.accessibleClickKeys[e.keyCode]){element.click()}})}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);_modules.uiModules.get("kibana").directive("scrolltoActivedescendant",function(){return{link:function link(scope,element,attrs){scope.$watch(function(){return attrs.ariaActivedescendant},function(val){if(val){var activeDescendant=element.find("#".concat(val));if(activeDescendant.length){activeDescendant[0].scrollIntoView()}}})}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(17);__webpack_require__(7);__webpack_require__(395);__webpack_require__(129);__webpack_require__(438);__webpack_require__(9);__webpack_require__(525);__webpack_require__(57);__webpack_require__(758);__webpack_require__(341);__webpack_require__(514);__webpack_require__(97);__webpack_require__(1939);__webpack_require__(98);__webpack_require__(527);__webpack_require__(528);__webpack_require__(11);__webpack_require__(2073);var _modules=__webpack_require__(6);_modules.uiModules.get("kibana",["ui.ace"])},function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _timefilter=__webpack_require__(22);__webpack_require__(438);__webpack_require__(461);var _modules=__webpack_require__(6);var _notify=__webpack_require__(9);__webpack_require__(57);var _search_request_queue=__webpack_require__(122);var _fetch=__webpack_require__(419);var _search_poll=__webpack_require__(1934);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}_modules.uiModules.get("kibana/courier").service("courier",function($rootScope,Private){var fetchSoon=Private(_fetch.FetchSoonProvider);var searchPoll=Private(_search_poll.SearchPollProvider);var Courier=function(){function Courier(){_classCallCheck(this,Courier);var updateRefreshInterval=function updateRefreshInterval(){var refreshIntervalMs=_lodash.default.get(_timefilter.timefilter.getRefreshInterval(),"value");var isRefreshPaused=_lodash.default.get(_timefilter.timefilter.getRefreshInterval(),"pause");searchPoll.setIntervalInMs(refreshIntervalMs);if(isRefreshPaused){searchPoll.pause()}else{searchPoll.resume()}};var refreshIntervalSubscription=_timefilter.timefilter.getRefreshIntervalUpdate$().subscribe(updateRefreshInterval);var closeOnFatal=_lodash.default.once(function(){searchPoll.pause();_search_request_queue.searchRequestQueue.abortAll();if(_search_request_queue.searchRequestQueue.getCount()){throw new Error("Aborting all pending requests failed.")}refreshIntervalSubscription.unsubscribe()});(0,_notify.addFatalErrorCallback)(closeOnFatal);updateRefreshInterval()}_createClass(Courier,[{key:"fetch",value:function fetch(){fetchSoon.fetchQueued().then(function(){searchPoll.resetTimer()})}}]);return Courier}();return new Courier})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);_modules.uiModules.get("kibana").run(function($rootScope){$rootScope.constructor.prototype.$listen=function(emitter,eventName,handler){emitter.on(eventName,handler);this.$on("$destroy",function(){emitter.off(eventName,handler)})}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchPollProvider",{enumerable:true,get:function get(){return _search_poll.SearchPollProvider}});var _search_poll=__webpack_require__(1935)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchPollProvider=SearchPollProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _notify=__webpack_require__(9);__webpack_require__(57);var _search_request_queue=__webpack_require__(122);var _fetch=__webpack_require__(419);var _timefilter=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function SearchPollProvider(Private,Promise){var fetchSoon=Private(_fetch.FetchSoonProvider);var SearchPoll=function SearchPoll(){var _this=this;_classCallCheck(this,SearchPoll);_defineProperty(this,"setIntervalInMs",function(intervalInMs){_this._intervalInMs=_lodash.default.parseInt(intervalInMs)});_defineProperty(this,"resume",function(){_this._isPolling=true;_this.resetTimer()});_defineProperty(this,"pause",function(){_this._isPolling=false;_this.clearTimer()});_defineProperty(this,"resetTimer",function(){_this.clearTimer();if(_this._isPolling){_this._timerId=setTimeout(_this._search,_this._intervalInMs)}});_defineProperty(this,"clearTimer",function(){if(_this._timerId){clearTimeout(_this._timerId);_this._timerId=null}});_defineProperty(this,"_search",function(){if(_this._searchPromise){_this._isIntervalFasterThanSearch=true;return}_this.resetTimer();_this._searchPromise=Promise.resolve().then(function(){_timefilter.timefilter.notifyShouldFetch();var requests=_search_request_queue.searchRequestQueue.getInactive();fetchSoon.fetchSearchRequests(requests);return Promise.all(requests.map(function(request){return request.getCompleteOrAbortedPromise()}))}).then(function(){_this._searchPromise=null;if(_this._isIntervalFasterThanSearch){_this._isIntervalFasterThanSearch=false;_this._search()}}).catch(function(err){(0,_notify.fatalError)(err)})});this._isPolling=false;this._intervalInMs=undefined;this._timerId=null;this._searchPromise=null;this._isIntervalFasterThanSearch=false};return new SearchPoll}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<confirm-modal\n  data-test-subj="confirmModal"\n  on-cancel="onCancel"\n  on-confirm="onConfirm"\n  confirm-button-text="confirmButtonText"\n  cancel-button-text="cancelButtonText"\n  children="message"\n  data-title="title"\n  default-focused-button="defaultFocusedButton"\n></confirm-modal>\n'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="euiOverlayMask" data-test-subj="modalOverlay"></div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(6);__webpack_require__(758);var _module=_modules.uiModules.get("kibana");_module.factory("confirmModalPromise",function(Promise,confirmModal){return function(message,customOptions){return new Promise(function(resolve,reject){var defaultOptions={onConfirm:resolve,onCancel:reject};var confirmOptions=Object.assign(defaultOptions,customOptions);confirmModal(message,confirmOptions)})}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1940)},function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(12));__webpack_require__(395);var _modules=__webpack_require__(6);var _style_compileCss=_interopRequireDefault(__webpack_require__(1941));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var $style=(0,_jquery.default)("<style>").appendTo("head").attr("id","style-compile");_modules.uiModules.get("kibana").run(function($rootScope,config){var truncateGradientHeight=15;var template=_lodash.default.template(_style_compileCss.default);var locals={};$rootScope.$watch(function(){return config.get("truncate:maxHeight")},function(maxHeight){if(maxHeight>0){locals.truncateMaxHeight=maxHeight+"px !important";locals.truncateGradientTop=maxHeight-truncateGradientHeight+"px"}else{locals.truncateMaxHeight="none";locals.truncateGradientTop="-"+truncateGradientHeight+"px"}$style.html(template(locals))})})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]=".truncate-by-height {\n  max-height: <%= truncateMaxHeight %>;\n  display: inline-block;\n}\n.truncate-by-height:before {\n  top: <%= truncateGradientTop %>;\n}\n"},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1696)},function(module,exports,__webpack_require__){"use strict";var _momentTimezone=_interopRequireDefault(__webpack_require__(130));var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function setDefaultTimezone(tz){_momentTimezone.default.tz.setDefault(tz)}function setStartDayOfWeek(day){var dow=_momentTimezone.default.weekdays().indexOf(day);_momentTimezone.default.updateLocale(_momentTimezone.default.locale(),{week:{dow:dow}})}var uiSettings=_chrome.default.getUiSettingsClient();setDefaultTimezone(uiSettings.get("dateFormat:tz"));setStartDayOfWeek(uiSettings.get("dateFormat:dow"));uiSettings.getUpdate$().subscribe(function(_ref){var key=_ref.key,newValue=_ref.newValue;if(key==="dateFormat:tz"){setDefaultTimezone(newValue)}else if(key==="dateFormat:dow"){setStartDayOfWeek(newValue)}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(81);var _i18n=__webpack_require__(11);var _modules=__webpack_require__(6);var _public=__webpack_require__(104);var _storage=__webpack_require__(97);var _chrome=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("kbnTopNav",function(){return{restrict:"E",template:"",compile:function compile(elem){var child=document.createElement("kbn-top-nav-helper");var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=elem[0].attributes[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var attr=_step.value;child.setAttribute(attr.name,attr.value)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}child.setAttribute("disabled-buttons","disabledButtons");var localStorage=new _storage.Storage(window.localStorage);child.setAttribute("store","store");child.setAttribute("ui-settings","uiSettings");child.setAttribute("saved-objects-client","savedObjectsClient");elem.append(child);var linkFn=function linkFn($scope,_,$attr){$scope.store=localStorage;$scope.uiSettings=_chrome.default.getUiSettingsClient();$scope.savedObjectsClient=_chrome.default.getSavedObjectsClient();$scope.$watch(function(){var config=$scope.$eval($attr.config)||[];return config.map(function(item){if(item.key&&!item.id){item.id=item.key}if(typeof item.disableButton==="function"){return item.disableButton()}return item.disableButton})},function(newVal){$scope.disabledButtons=newVal},true)};return linkFn}}});_module.directive("kbnTopNavHelper",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_public.TopNavMenu),[["name",{watchDepth:"reference"}],["config",{watchDepth:"value"}],["disabledButtons",{watchDepth:"reference"}],["query",{watchDepth:"reference"}],["savedQuery",{watchDepth:"reference"}],["store",{watchDepth:"reference"}],["uiSettings",{watchDepth:"reference"}],["savedObjectsClient",{watchDepth:"reference"}],["intl",{watchDepth:"reference"}],["store",{watchDepth:"reference"}],["onQuerySubmit",{watchDepth:"reference"}],["onFiltersUpdated",{watchDepth:"reference"}],["onRefreshChange",{watchDepth:"reference"}],["onClearSavedQuery",{watchDepth:"reference"}],["onSaved",{watchDepth:"reference"}],["onSavedQueryUpdated",{watchDepth:"reference"}],["indexPatterns",{watchDepth:"collection"}],["filters",{watchDepth:"collection"}],"showSearchBar","showFilterBar","showQueryBar","showQueryInput","showDatePicker","showSaveQuery","appName","screenTitle","dateRangeFrom","dateRangeTo","isRefreshPaused","refreshInterval","disableAutoFocus","showAutoRefreshOnly"])})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1858)},,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(696)}]]);