{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/flot-charts/jquery.flot.pie.js","dependencies":[{"path":"src/legacy/ui/public/flot-charts/jquery.flot.pie.js","mtime":1572296412748},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7CgovKiBGbG90IHBsdWdpbiBmb3IgcmVuZGVyaW5nIHBpZSBjaGFydHMuCgpDb3B5cmlnaHQgKGMpIDIwMDctMjAxNCBJT0xBIGFuZCBPbGUgTGF1cnNlbi4KTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgoKVGhlIHBsdWdpbiBhc3N1bWVzIHRoYXQgZWFjaCBzZXJpZXMgaGFzIGEgc2luZ2xlIGRhdGEgdmFsdWUsIGFuZCB0aGF0IGVhY2gKdmFsdWUgaXMgYSBwb3NpdGl2ZSBpbnRlZ2VyIG9yIHplcm8uICBOZWdhdGl2ZSBudW1iZXJzIGRvbid0IG1ha2Ugc2Vuc2UgZm9yIGEKcGllIGNoYXJ0LCBhbmQgaGF2ZSB1bnByZWRpY3RhYmxlIHJlc3VsdHMuICBUaGUgdmFsdWVzIGRvIE5PVCBuZWVkIHRvIGJlCnBhc3NlZCBpbiBhcyBwZXJjZW50YWdlczsgdGhlIHBsdWdpbiB3aWxsIGNhbGN1bGF0ZSB0aGUgdG90YWwgYW5kIHBlci1zbGljZQpwZXJjZW50YWdlcyBpbnRlcm5hbGx5LgoKKiBDcmVhdGVkIGJ5IEJyaWFuIE1lZGVuZG9ycAoKKiBVcGRhdGVkIHdpdGggY29udHJpYnV0aW9ucyBmcm9tIGJ0YnVybmV0dDMsIEFudGhvbnkgQXJhZ3VlcyBhbmQgWGF2aSBJdmFycwoKVGhlIHBsdWdpbiBzdXBwb3J0cyB0aGVzZSBvcHRpb25zOgoKCXNlcmllczogewoJCXBpZTogewoJCQlzaG93OiB0cnVlL2ZhbHNlCgkJCXJhZGl1czogMC0xIGZvciBwZXJjZW50YWdlIG9mIGZ1bGxzaXplLCBvciBhIHNwZWNpZmllZCBwaXhlbCBsZW5ndGgsIG9yICdhdXRvJwoJCQlpbm5lclJhZGl1czogMC0xIGZvciBwZXJjZW50YWdlIG9mIGZ1bGxzaXplIG9yIGEgc3BlY2lmaWVkIHBpeGVsIGxlbmd0aCwgZm9yIGNyZWF0aW5nIGEgZG9udXQgZWZmZWN0CgkJCXN0YXJ0QW5nbGU6IDAtMiBmYWN0b3Igb2YgUEkgdXNlZCBmb3Igc3RhcnRpbmcgYW5nbGUgKGluIHJhZGlhbnMpIGkuZSAzLzIgc3RhcnRzIGF0IHRoZSB0b3AsIDAgYW5kIDIgaGF2ZSB0aGUgc2FtZSByZXN1bHQKCQkJdGlsdDogMC0xIGZvciBwZXJjZW50YWdlIHRvIHRpbHQgdGhlIHBpZSwgd2hlcmUgMSBpcyBubyB0aWx0LCBhbmQgMCBpcyBjb21wbGV0ZWx5IGZsYXQgKG5vdGhpbmcgd2lsbCBzaG93KQoJCQlvZmZzZXQ6IHsKCQkJCXRvcDogaW50ZWdlciB2YWx1ZSB0byBtb3ZlIHRoZSBwaWUgdXAgb3IgZG93bgoJCQkJbGVmdDogaW50ZWdlciB2YWx1ZSB0byBtb3ZlIHRoZSBwaWUgbGVmdCBvciByaWdodCwgb3IgJ2F1dG8nCgkJCX0sCgkJCXN0cm9rZTogewoJCQkJY29sb3I6IGFueSBoZXhhZGVjaW1hbCBjb2xvciB2YWx1ZSAob3RoZXIgZm9ybWF0cyBtYXkgb3IgbWF5IG5vdCB3b3JrLCBzbyBiZXN0IHRvIHN0aWNrIHdpdGggc29tZXRoaW5nIGxpa2UgJyNGRkYnKQoJCQkJd2lkdGg6IGludGVnZXIgcGl4ZWwgd2lkdGggb2YgdGhlIHN0cm9rZQoJCQl9LAoJCQlsYWJlbDogewoJCQkJc2hvdzogdHJ1ZS9mYWxzZSwgb3IgJ2F1dG8nCgkJCQlmb3JtYXR0ZXI6ICBhIHVzZXItZGVmaW5lZCBmdW5jdGlvbiB0aGF0IG1vZGlmaWVzIHRoZSB0ZXh0L3N0eWxlIG9mIHRoZSBsYWJlbCB0ZXh0CgkJCQlyYWRpdXM6IDAtMSBmb3IgcGVyY2VudGFnZSBvZiBmdWxsc2l6ZSwgb3IgYSBzcGVjaWZpZWQgcGl4ZWwgbGVuZ3RoCgkJCQliYWNrZ3JvdW5kOiB7CgkJCQkJY29sb3I6IGFueSBoZXhhZGVjaW1hbCBjb2xvciB2YWx1ZSAob3RoZXIgZm9ybWF0cyBtYXkgb3IgbWF5IG5vdCB3b3JrLCBzbyBiZXN0IHRvIHN0aWNrIHdpdGggc29tZXRoaW5nIGxpa2UgJyMwMDAnKQoJCQkJCW9wYWNpdHk6IDAtMQoJCQkJfSwKCQkJCXRocmVzaG9sZDogMC0xIGZvciB0aGUgcGVyY2VudGFnZSB2YWx1ZSBhdCB3aGljaCB0byBoaWRlIGxhYmVscyAoaWYgdGhleSdyZSB0b28gc21hbGwpCgkJCX0sCgkJCWNvbWJpbmU6IHsKCQkJCXRocmVzaG9sZDogMC0xIGZvciB0aGUgcGVyY2VudGFnZSB2YWx1ZSBhdCB3aGljaCB0byBjb21iaW5lIHNsaWNlcyAoaWYgdGhleSdyZSB0b28gc21hbGwpCgkJCQljb2xvcjogYW55IGhleGFkZWNpbWFsIGNvbG9yIHZhbHVlIChvdGhlciBmb3JtYXRzIG1heSBvciBtYXkgbm90IHdvcmssIHNvIGJlc3QgdG8gc3RpY2sgd2l0aCBzb21ldGhpbmcgbGlrZSAnI0NDQycpLCBpZiBudWxsLCB0aGUgcGx1Z2luIHdpbGwgYXV0b21hdGljYWxseSB1c2UgdGhlIGNvbG9yIG9mIHRoZSBmaXJzdCBzbGljZSB0byBiZSBjb21iaW5lZAoJCQkJbGFiZWw6IGFueSB0ZXh0IHZhbHVlIG9mIHdoYXQgdGhlIGNvbWJpbmVkIHNsaWNlIHNob3VsZCBiZSBsYWJlbGVkCgkJCX0KCQkJaGlnaGxpZ2h0OiB7CgkJCQlvcGFjaXR5OiAwLTEKCQkJfQoJCX0KCX0KCk1vcmUgZGV0YWlsIGFuZCBzcGVjaWZpYyBleGFtcGxlcyBjYW4gYmUgZm91bmQgaW4gdGhlIGluY2x1ZGVkIEhUTUwgZmlsZS4KCiovCihmdW5jdGlvbiAoJCkgewogIC8vIE1heGltdW0gcmVkcmF3IGF0dGVtcHRzIHdoZW4gZml0dGluZyBsYWJlbHMgd2l0aGluIHRoZSBwbG90CiAgdmFyIFJFRFJBV19BVFRFTVBUUyA9IDEwOyAvLyBGYWN0b3IgYnkgd2hpY2ggdG8gc2hyaW5rIHRoZSBwaWUgd2hlbiBmaXR0aW5nIGxhYmVscyB3aXRoaW4gdGhlIHBsb3QKCiAgdmFyIFJFRFJBV19TSFJJTksgPSAwLjk1OwoKICBmdW5jdGlvbiBpbml0KHBsb3QpIHsKICAgIHZhciBjYW52YXMgPSBudWxsLAogICAgICAgIHRhcmdldCA9IG51bGwsCiAgICAgICAgb3B0aW9ucyA9IG51bGwsCiAgICAgICAgbWF4UmFkaXVzID0gbnVsbCwKICAgICAgICBjZW50ZXJMZWZ0ID0gbnVsbCwKICAgICAgICBjZW50ZXJUb3AgPSBudWxsLAogICAgICAgIHByb2Nlc3NlZCA9IGZhbHNlLAogICAgICAgIGN0eCA9IG51bGw7IC8vIGludGVyYWN0aXZlIHZhcmlhYmxlcwoKICAgIHZhciBoaWdobGlnaHRzID0gW107IC8vIGFkZCBob29rIHRvIGRldGVybWluZSBpZiBwaWUgcGx1Z2luIGluIGVuYWJsZWQsIGFuZCB0aGVuIHBlcmZvcm0gbmVjZXNzYXJ5IG9wZXJhdGlvbnMKCiAgICBwbG90Lmhvb2tzLnByb2Nlc3NPcHRpb25zLnB1c2goZnVuY3Rpb24gKHBsb3QsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMuc2VyaWVzLnBpZS5zaG93KSB7CiAgICAgICAgb3B0aW9ucy5ncmlkLnNob3cgPSBmYWxzZTsgLy8gc2V0IGxhYmVscy5zaG93CgogICAgICAgIGlmIChvcHRpb25zLnNlcmllcy5waWUubGFiZWwuc2hvdyA9PSAiYXV0byIpIHsKICAgICAgICAgIGlmIChvcHRpb25zLmxlZ2VuZC5zaG93KSB7CiAgICAgICAgICAgIG9wdGlvbnMuc2VyaWVzLnBpZS5sYWJlbC5zaG93ID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvcHRpb25zLnNlcmllcy5waWUubGFiZWwuc2hvdyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBzZXQgcmFkaXVzCgoKICAgICAgICBpZiAob3B0aW9ucy5zZXJpZXMucGllLnJhZGl1cyA9PSAiYXV0byIpIHsKICAgICAgICAgIGlmIChvcHRpb25zLnNlcmllcy5waWUubGFiZWwuc2hvdykgewogICAgICAgICAgICBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzID0gMyAvIDQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzID0gMTsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGVuc3VyZSBzYW5lIHRpbHQKCgogICAgICAgIGlmIChvcHRpb25zLnNlcmllcy5waWUudGlsdCA+IDEpIHsKICAgICAgICAgIG9wdGlvbnMuc2VyaWVzLnBpZS50aWx0ID0gMTsKICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuc2VyaWVzLnBpZS50aWx0IDwgMCkgewogICAgICAgICAgb3B0aW9ucy5zZXJpZXMucGllLnRpbHQgPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBwbG90Lmhvb2tzLmJpbmRFdmVudHMucHVzaChmdW5jdGlvbiAocGxvdCwgZXZlbnRIb2xkZXIpIHsKICAgICAgdmFyIG9wdGlvbnMgPSBwbG90LmdldE9wdGlvbnMoKTsKCiAgICAgIGlmIChvcHRpb25zLnNlcmllcy5waWUuc2hvdykgewogICAgICAgIGlmIChvcHRpb25zLmdyaWQuaG92ZXJhYmxlKSB7CiAgICAgICAgICBldmVudEhvbGRlci51bmJpbmQoIm1vdXNlbW92ZSIpLm1vdXNlbW92ZShvbk1vdXNlTW92ZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5ncmlkLmNsaWNrYWJsZSkgewogICAgICAgICAgZXZlbnRIb2xkZXIudW5iaW5kKCJjbGljayIpLmNsaWNrKG9uQ2xpY2spOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBwbG90Lmhvb2tzLnByb2Nlc3NEYXRhcG9pbnRzLnB1c2goZnVuY3Rpb24gKHBsb3QsIHNlcmllcywgZGF0YSwgZGF0YXBvaW50cykgewogICAgICB2YXIgb3B0aW9ucyA9IHBsb3QuZ2V0T3B0aW9ucygpOwoKICAgICAgaWYgKG9wdGlvbnMuc2VyaWVzLnBpZS5zaG93KSB7CiAgICAgICAgcHJvY2Vzc0RhdGFwb2ludHMocGxvdCwgc2VyaWVzLCBkYXRhLCBkYXRhcG9pbnRzKTsKICAgICAgfQogICAgfSk7CiAgICBwbG90Lmhvb2tzLmRyYXdPdmVybGF5LnB1c2goZnVuY3Rpb24gKHBsb3QsIG9jdHgpIHsKICAgICAgdmFyIG9wdGlvbnMgPSBwbG90LmdldE9wdGlvbnMoKTsKCiAgICAgIGlmIChvcHRpb25zLnNlcmllcy5waWUuc2hvdykgewogICAgICAgIGRyYXdPdmVybGF5KHBsb3QsIG9jdHgpOwogICAgICB9CiAgICB9KTsKICAgIHBsb3QuaG9va3MuZHJhdy5wdXNoKGZ1bmN0aW9uIChwbG90LCBuZXdDdHgpIHsKICAgICAgdmFyIG9wdGlvbnMgPSBwbG90LmdldE9wdGlvbnMoKTsKCiAgICAgIGlmIChvcHRpb25zLnNlcmllcy5waWUuc2hvdykgewogICAgICAgIGRyYXcocGxvdCwgbmV3Q3R4KTsKICAgICAgfQogICAgfSk7CgogICAgZnVuY3Rpb24gcHJvY2Vzc0RhdGFwb2ludHMocGxvdCwgc2VyaWVzLCBkYXRhcG9pbnRzKSB7CiAgICAgIGlmICghcHJvY2Vzc2VkKSB7CiAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTsKICAgICAgICBjYW52YXMgPSBwbG90LmdldENhbnZhcygpOwogICAgICAgIHRhcmdldCA9ICQoY2FudmFzKS5wYXJlbnQoKTsKICAgICAgICBvcHRpb25zID0gcGxvdC5nZXRPcHRpb25zKCk7CiAgICAgICAgcGxvdC5zZXREYXRhKGNvbWJpbmUocGxvdC5nZXREYXRhKCkpKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbWJpbmUoZGF0YSkgewogICAgICB2YXIgdG90YWwgPSAwLAogICAgICAgICAgY29tYmluZWQgPSAwLAogICAgICAgICAgbnVtQ29tYmluZWQgPSAwLAogICAgICAgICAgY29sb3IgPSBvcHRpb25zLnNlcmllcy5waWUuY29tYmluZS5jb2xvciwKICAgICAgICAgIG5ld2RhdGEgPSBbXTsgLy8gRml4IHVwIHRoZSByYXcgZGF0YSBmcm9tIEZsb3QsIGVuc3VyaW5nIHRoZSBkYXRhIGlzIG51bWVyaWMKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkgewogICAgICAgIHZhciB2YWx1ZSA9IGRhdGFbaV0uZGF0YTsgLy8gSWYgdGhlIGRhdGEgaXMgYW4gYXJyYXksIHdlJ2xsIGFzc3VtZSB0aGF0IGl0J3MgYSBzdGFuZGFyZAogICAgICAgIC8vIEZsb3QgeC15IHBhaXIsIGFuZCBhcmUgY29uY2VybmVkIG9ubHkgd2l0aCB0aGUgc2Vjb25kIHZhbHVlLgogICAgICAgIC8vIE5vdGUgaG93IHdlIHVzZSB0aGUgb3JpZ2luYWwgYXJyYXksIHJhdGhlciB0aGFuIGNyZWF0aW5nIGEKICAgICAgICAvLyBuZXcgb25lOyB0aGlzIGlzIG1vcmUgZWZmaWNpZW50IGFuZCBwcmVzZXJ2ZXMgYW55IGV4dHJhIGRhdGEKICAgICAgICAvLyB0aGF0IHRoZSB1c2VyIG1heSBoYXZlIHN0b3JlZCBpbiBoaWdoZXIgaW5kZXhlcy4KCiAgICAgICAgaWYgKCQuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09IDEpIHsKICAgICAgICAgIHZhbHVlID0gdmFsdWVbMF07CiAgICAgICAgfQoKICAgICAgICBpZiAoJC5pc0FycmF5KHZhbHVlKSkgewogICAgICAgICAgLy8gRXF1aXZhbGVudCB0byAkLmlzTnVtZXJpYygpIGJ1dCBjb21wYXRpYmxlIHdpdGggalF1ZXJ5IDwgMS43CiAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlRmxvYXQodmFsdWVbMV0pKSAmJiBpc0Zpbml0ZSh2YWx1ZVsxXSkpIHsKICAgICAgICAgICAgdmFsdWVbMV0gPSArdmFsdWVbMV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YWx1ZVsxXSA9IDA7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICghaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpICYmIGlzRmluaXRlKHZhbHVlKSkgewogICAgICAgICAgdmFsdWUgPSBbMSwgK3ZhbHVlXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFsdWUgPSBbMSwgMF07CiAgICAgICAgfQoKICAgICAgICBkYXRhW2ldLmRhdGEgPSBbdmFsdWVdOwogICAgICB9IC8vIFN1bSB1cCBhbGwgdGhlIHNsaWNlcywgc28gd2UgY2FuIGNhbGN1bGF0ZSBwZXJjZW50YWdlcyBmb3IgZWFjaAoKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkgewogICAgICAgIHRvdGFsICs9IGRhdGFbaV0uZGF0YVswXVsxXTsKICAgICAgfSAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIHNsaWNlcyB3aXRoIHBlcmNlbnRhZ2VzIGJlbG93IHRoZSBjb21iaW5lCiAgICAgIC8vIHRocmVzaG9sZDsgaWYgaXQgdHVybnMgb3V0IHRvIGJlIGp1c3Qgb25lLCB3ZSB3b24ndCBjb21iaW5lLgoKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkgewogICAgICAgIHZhciB2YWx1ZSA9IGRhdGFbaV0uZGF0YVswXVsxXTsKCiAgICAgICAgaWYgKHZhbHVlIC8gdG90YWwgPD0gb3B0aW9ucy5zZXJpZXMucGllLmNvbWJpbmUudGhyZXNob2xkKSB7CiAgICAgICAgICBjb21iaW5lZCArPSB2YWx1ZTsKICAgICAgICAgIG51bUNvbWJpbmVkKys7CgogICAgICAgICAgaWYgKCFjb2xvcikgewogICAgICAgICAgICBjb2xvciA9IGRhdGFbaV0uY29sb3I7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyArK2kpIHsKICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW2ldLmRhdGFbMF1bMV07CgogICAgICAgIGlmIChudW1Db21iaW5lZCA8IDIgfHwgdmFsdWUgLyB0b3RhbCA+IG9wdGlvbnMuc2VyaWVzLnBpZS5jb21iaW5lLnRocmVzaG9sZCkgewogICAgICAgICAgbmV3ZGF0YS5wdXNoKCQuZXh0ZW5kKGRhdGFbaV0sIHsKICAgICAgICAgICAgLyogZXh0ZW5kIHRvIGFsbG93IGtlZXBpbmcgYWxsIG90aGVyIG9yaWdpbmFsIGRhdGEgdmFsdWVzCiAgICAgICAgICAgICAgIGFuZCB1c2luZyB0aGVtIGUuZy4gaW4gbGFiZWxGb3JtYXR0ZXIuICovCiAgICAgICAgICAgIGRhdGE6IFtbMSwgdmFsdWVdXSwKICAgICAgICAgICAgY29sb3I6IGRhdGFbaV0uY29sb3IsCiAgICAgICAgICAgIGxhYmVsOiBkYXRhW2ldLmxhYmVsLAogICAgICAgICAgICBhbmdsZTogdmFsdWUgKiBNYXRoLlBJICogMiAvIHRvdGFsLAogICAgICAgICAgICBwZXJjZW50OiB2YWx1ZSAvICh0b3RhbCAvIDEwMCkKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChudW1Db21iaW5lZCA+IDEpIHsKICAgICAgICBuZXdkYXRhLnB1c2goewogICAgICAgICAgZGF0YTogW1sxLCBjb21iaW5lZF1dLAogICAgICAgICAgY29sb3I6IGNvbG9yLAogICAgICAgICAgbGFiZWw6IG9wdGlvbnMuc2VyaWVzLnBpZS5jb21iaW5lLmxhYmVsLAogICAgICAgICAgYW5nbGU6IGNvbWJpbmVkICogTWF0aC5QSSAqIDIgLyB0b3RhbCwKICAgICAgICAgIHBlcmNlbnQ6IGNvbWJpbmVkIC8gKHRvdGFsIC8gMTAwKQogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gbmV3ZGF0YTsKICAgIH0KCiAgICBmdW5jdGlvbiBkcmF3KHBsb3QsIG5ld0N0eCkgewogICAgICBpZiAoIXRhcmdldCkgewogICAgICAgIHJldHVybjsgLy8gaWYgbm8gc2VyaWVzIHdlcmUgcGFzc2VkCiAgICAgIH0KCiAgICAgIHZhciBjYW52YXNXaWR0aCA9IHBsb3QuZ2V0UGxhY2Vob2xkZXIoKS53aWR0aCgpLAogICAgICAgICAgY2FudmFzSGVpZ2h0ID0gcGxvdC5nZXRQbGFjZWhvbGRlcigpLmhlaWdodCgpLAogICAgICAgICAgbGVnZW5kV2lkdGggPSB0YXJnZXQuY2hpbGRyZW4oKS5maWx0ZXIoIi5sZWdlbmQiKS5jaGlsZHJlbigpLndpZHRoKCkgfHwgMDsKICAgICAgY3R4ID0gbmV3Q3R4OyAvLyBXQVJOSU5HOiBIQUNLISBSRVdSSVRFIFRISVMgQ09ERSBBUyBTT09OIEFTIFBPU1NJQkxFIQogICAgICAvLyBXaGVuIGNvbWJpbmluZyBzbWFsbGVyIHNsaWNlcyBpbnRvIGFuICdvdGhlcicgc2xpY2UsIHdlIG5lZWQgdG8KICAgICAgLy8gYWRkIGEgbmV3IHNlcmllcy4gIFNpbmNlIEZsb3QgZ2l2ZXMgcGx1Z2lucyBubyB3YXkgdG8gbW9kaWZ5IHRoZQogICAgICAvLyBsaXN0IG9mIHNlcmllcywgdGhlIHBpZSBwbHVnaW4gdXNlcyBhIGhhY2sgd2hlcmUgdGhlIGZpcnN0IGNhbGwKICAgICAgLy8gdG8gcHJvY2Vzc0RhdGFwb2ludHMgcmVzdWx0cyBpbiBhIGNhbGwgdG8gc2V0RGF0YSB3aXRoIHRoZSBuZXcKICAgICAgLy8gbGlzdCBvZiBzZXJpZXMsIHRoZW4gc3Vic2VxdWVudCBwcm9jZXNzRGF0YXBvaW50cyBkbyBub3RoaW5nLgogICAgICAvLyBUaGUgcGx1Z2luLWdsb2JhbCAncHJvY2Vzc2VkJyBmbGFnIGlzIHVzZWQgdG8gY29udHJvbCB0aGlzIGhhY2s7CiAgICAgIC8vIGl0IHN0YXJ0cyBvdXQgZmFsc2UsIGFuZCBpcyBzZXQgdG8gdHJ1ZSBhZnRlciB0aGUgZmlyc3QgY2FsbCB0bwogICAgICAvLyBwcm9jZXNzRGF0YXBvaW50cy4KICAgICAgLy8gVW5mb3J0dW5hdGVseSB0aGlzIHR1cm5zIGZ1dHVyZSBzZXREYXRhIGNhbGxzIGludG8gbm8tb3BzOyB0aGV5CiAgICAgIC8vIGNhbGwgcHJvY2Vzc0RhdGFwb2ludHMsIHRoZSBmbGFnIGlzIHRydWUsIGFuZCBub3RoaW5nIGhhcHBlbnMuCiAgICAgIC8vIFRvIGZpeCB0aGlzIHdlJ2xsIHNldCB0aGUgZmxhZyBiYWNrIHRvIGZhbHNlIGhlcmUgaW4gZHJhdywgd2hlbgogICAgICAvLyBhbGwgc2VyaWVzIGhhdmUgYmVlbiBwcm9jZXNzZWQsIHNvIHRoZSBuZXh0IHNlcXVlbmNlIG9mIGNhbGxzIHRvCiAgICAgIC8vIHByb2Nlc3NEYXRhcG9pbnRzIG9uY2UgYWdhaW4gc3RhcnRzIG91dCB3aXRoIGEgc2xpY2UtY29tYmluZS4KICAgICAgLy8gVGhpcyBpcyByZWFsbHkgYSBoYWNrOyBpbiAwLjkgd2UgbmVlZCB0byBnaXZlIHBsdWdpbnMgYSBwcm9wZXIKICAgICAgLy8gd2F5IHRvIG1vZGlmeSBzZXJpZXMgYmVmb3JlIGFueSBwcm9jZXNzaW5nIGJlZ2lucy4KCiAgICAgIHByb2Nlc3NlZCA9IGZhbHNlOyAvLyBjYWxjdWxhdGUgbWF4aW11bSByYWRpdXMgYW5kIGNlbnRlciBwb2ludAoKICAgICAgbWF4UmFkaXVzID0gTWF0aC5taW4oY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCAvIG9wdGlvbnMuc2VyaWVzLnBpZS50aWx0KSAvIDI7CiAgICAgIGNlbnRlclRvcCA9IGNhbnZhc0hlaWdodCAvIDIgKyBvcHRpb25zLnNlcmllcy5waWUub2Zmc2V0LnRvcDsKICAgICAgY2VudGVyTGVmdCA9IGNhbnZhc1dpZHRoIC8gMjsKCiAgICAgIGlmIChvcHRpb25zLnNlcmllcy5waWUub2Zmc2V0LmxlZnQgPT0gImF1dG8iKSB7CiAgICAgICAgaWYgKG9wdGlvbnMubGVnZW5kLnBvc2l0aW9uLm1hdGNoKCJ3IikpIHsKICAgICAgICAgIGNlbnRlckxlZnQgKz0gbGVnZW5kV2lkdGggLyAyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjZW50ZXJMZWZ0IC09IGxlZ2VuZFdpZHRoIC8gMjsKICAgICAgICB9CgogICAgICAgIGlmIChjZW50ZXJMZWZ0IDwgbWF4UmFkaXVzKSB7CiAgICAgICAgICBjZW50ZXJMZWZ0ID0gbWF4UmFkaXVzOwogICAgICAgIH0gZWxzZSBpZiAoY2VudGVyTGVmdCA+IGNhbnZhc1dpZHRoIC0gbWF4UmFkaXVzKSB7CiAgICAgICAgICBjZW50ZXJMZWZ0ID0gY2FudmFzV2lkdGggLSBtYXhSYWRpdXM7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNlbnRlckxlZnQgKz0gb3B0aW9ucy5zZXJpZXMucGllLm9mZnNldC5sZWZ0OwogICAgICB9CgogICAgICB2YXIgc2xpY2VzID0gcGxvdC5nZXREYXRhKCksCiAgICAgICAgICBhdHRlbXB0cyA9IDA7IC8vIEtlZXAgc2hyaW5raW5nIHRoZSBwaWUncyByYWRpdXMgdW50aWwgZHJhd1BpZSByZXR1cm5zIHRydWUsCiAgICAgIC8vIGluZGljYXRpbmcgdGhhdCBhbGwgdGhlIGxhYmVscyBmaXQsIG9yIHdlIHRyeSB0b28gbWFueSB0aW1lcy4KCiAgICAgIGRvIHsKICAgICAgICBpZiAoYXR0ZW1wdHMgPiAwKSB7CiAgICAgICAgICBtYXhSYWRpdXMgKj0gUkVEUkFXX1NIUklOSzsKICAgICAgICB9CgogICAgICAgIGF0dGVtcHRzICs9IDE7CiAgICAgICAgY2xlYXIoKTsKCiAgICAgICAgaWYgKG9wdGlvbnMuc2VyaWVzLnBpZS50aWx0IDw9IDAuOCkgewogICAgICAgICAgZHJhd1NoYWRvdygpOwogICAgICAgIH0KICAgICAgfSB3aGlsZSAoIWRyYXdQaWUoKSAmJiBhdHRlbXB0cyA8IFJFRFJBV19BVFRFTVBUUyk7CgogICAgICBpZiAoYXR0ZW1wdHMgPj0gUkVEUkFXX0FUVEVNUFRTKSB7CiAgICAgICAgY2xlYXIoKTsKCiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCdjb21tb24udWkuZmxvdENoYXJ0cy5waWUudW5hYmxlVG9EcmF3TGFiZWxzSW5zaWRlQ2FudmFzRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDb3VsZCBub3QgZHJhdyBwaWUgd2l0aCBsYWJlbHMgY29udGFpbmVkIGluc2lkZSBjYW52YXMnCiAgICAgICAgfSk7CgogICAgICAgIHRhcmdldC5wcmVwZW5kKCI8ZGl2IGNsYXNzPSdlcnJvcic+Ii5jb25jYXQoZXJyb3JNZXNzYWdlLCAiPC9kaXY+IikpOwogICAgICB9CgogICAgICBpZiAocGxvdC5zZXRTZXJpZXMgJiYgcGxvdC5pbnNlcnRMZWdlbmQpIHsKICAgICAgICBwbG90LnNldFNlcmllcyhzbGljZXMpOwogICAgICAgIHBsb3QuaW5zZXJ0TGVnZW5kKCk7CiAgICAgIH0gLy8gd2UncmUgYWN0dWFsbHkgZG9uZSBhdCB0aGlzIHBvaW50LCBqdXN0IGRlZmluaW5nIGludGVybmFsIGZ1bmN0aW9ucyBhdCB0aGlzIHBvaW50CgoKICAgICAgZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KTsKICAgICAgICB0YXJnZXQuY2hpbGRyZW4oKS5maWx0ZXIoIi5waWVMYWJlbCwgLnBpZUxhYmVsQmFja2dyb3VuZCIpLnJlbW92ZSgpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBkcmF3U2hhZG93KCkgewogICAgICAgIHZhciBzaGFkb3dMZWZ0ID0gb3B0aW9ucy5zZXJpZXMucGllLnNoYWRvdy5sZWZ0OwogICAgICAgIHZhciBzaGFkb3dUb3AgPSBvcHRpb25zLnNlcmllcy5waWUuc2hhZG93LnRvcDsKICAgICAgICB2YXIgZWRnZSA9IDEwOwogICAgICAgIHZhciBhbHBoYSA9IG9wdGlvbnMuc2VyaWVzLnBpZS5zaGFkb3cuYWxwaGE7CiAgICAgICAgdmFyIHJhZGl1cyA9IG9wdGlvbnMuc2VyaWVzLnBpZS5yYWRpdXMgPiAxID8gb3B0aW9ucy5zZXJpZXMucGllLnJhZGl1cyA6IG1heFJhZGl1cyAqIG9wdGlvbnMuc2VyaWVzLnBpZS5yYWRpdXM7CgogICAgICAgIGlmIChyYWRpdXMgPj0gY2FudmFzV2lkdGggLyAyIC0gc2hhZG93TGVmdCB8fCByYWRpdXMgKiBvcHRpb25zLnNlcmllcy5waWUudGlsdCA+PSBjYW52YXNIZWlnaHQgLyAyIC0gc2hhZG93VG9wIHx8IHJhZGl1cyA8PSBlZGdlKSB7CiAgICAgICAgICByZXR1cm47IC8vIHNoYWRvdyB3b3VsZCBiZSBvdXRzaWRlIGNhbnZhcywgc28gZG9uJ3QgZHJhdyBpdAogICAgICAgIH0KCiAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICBjdHgudHJhbnNsYXRlKHNoYWRvd0xlZnQsIHNoYWRvd1RvcCk7CiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gYWxwaGE7CiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjMDAwIjsgLy8gY2VudGVyIGFuZCByb3RhdGUgdG8gc3RhcnRpbmcgcG9zaXRpb24KCiAgICAgICAgY3R4LnRyYW5zbGF0ZShjZW50ZXJMZWZ0LCBjZW50ZXJUb3ApOwogICAgICAgIGN0eC5zY2FsZSgxLCBvcHRpb25zLnNlcmllcy5waWUudGlsdCk7IC8vcmFkaXVzIC09IGVkZ2U7CgogICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGVkZ2U7IGkrKykgewogICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgY3R4LmFyYygwLCAwLCByYWRpdXMsIDAsIE1hdGguUEkgKiAyLCBmYWxzZSk7CiAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgcmFkaXVzIC09IGk7CiAgICAgICAgfQoKICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBkcmF3UGllKCkgewogICAgICAgIHZhciBzdGFydEFuZ2xlID0gTWF0aC5QSSAqIG9wdGlvbnMuc2VyaWVzLnBpZS5zdGFydEFuZ2xlOwogICAgICAgIHZhciByYWRpdXMgPSBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzID4gMSA/IG9wdGlvbnMuc2VyaWVzLnBpZS5yYWRpdXMgOiBtYXhSYWRpdXMgKiBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzOyAvLyBjZW50ZXIgYW5kIHJvdGF0ZSB0byBzdGFydGluZyBwb3NpdGlvbgoKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIGN0eC50cmFuc2xhdGUoY2VudGVyTGVmdCwgY2VudGVyVG9wKTsKICAgICAgICBjdHguc2NhbGUoMSwgb3B0aW9ucy5zZXJpZXMucGllLnRpbHQpOyAvL2N0eC5yb3RhdGUoc3RhcnRBbmdsZSk7IC8vIHN0YXJ0IGF0IHRvcDsgLS0gVGhpcyBkb2Vzbid0IHdvcmsgcHJvcGVybHkgaW4gT3BlcmEKICAgICAgICAvLyBkcmF3IHNsaWNlcwoKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIHZhciBjdXJyZW50QW5nbGUgPSBzdGFydEFuZ2xlOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgc2xpY2VzW2ldLnN0YXJ0QW5nbGUgPSBjdXJyZW50QW5nbGU7CiAgICAgICAgICBkcmF3U2xpY2Uoc2xpY2VzW2ldLmFuZ2xlLCBzbGljZXNbaV0uY29sb3IsIHRydWUpOwogICAgICAgIH0KCiAgICAgICAgY3R4LnJlc3RvcmUoKTsgLy8gZHJhdyBzbGljZSBvdXRsaW5lcwoKICAgICAgICBpZiAob3B0aW9ucy5zZXJpZXMucGllLnN0cm9rZS53aWR0aCA+IDApIHsKICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICBjdHgubGluZVdpZHRoID0gb3B0aW9ucy5zZXJpZXMucGllLnN0cm9rZS53aWR0aDsKICAgICAgICAgIGN1cnJlbnRBbmdsZSA9IHN0YXJ0QW5nbGU7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgZHJhd1NsaWNlKHNsaWNlc1tpXS5hbmdsZSwgb3B0aW9ucy5zZXJpZXMucGllLnN0cm9rZS5jb2xvciwgZmFsc2UpOwogICAgICAgICAgfQoKICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgfSAvLyBkcmF3IGRvbnV0IGhvbGUKCgogICAgICAgIGRyYXdEb251dEhvbGUoY3R4KTsKICAgICAgICBjdHgucmVzdG9yZSgpOyAvLyBEcmF3IHRoZSBsYWJlbHMsIHJldHVybmluZyB0cnVlIGlmIHRoZXkgZml0IHdpdGhpbiB0aGUgcGxvdAoKICAgICAgICBpZiAob3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLnNob3cpIHsKICAgICAgICAgIHJldHVybiBkcmF3TGFiZWxzKCk7CiAgICAgICAgfSBlbHNlIHJldHVybiB0cnVlOwoKICAgICAgICBmdW5jdGlvbiBkcmF3U2xpY2UoYW5nbGUsIGNvbG9yLCBmaWxsKSB7CiAgICAgICAgICBpZiAoYW5nbGUgPD0gMCB8fCBpc05hTihhbmdsZSkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChmaWxsKSB7CiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yOwogICAgICAgICAgICBjdHgubGluZUpvaW4gPSAicm91bmQiOwogICAgICAgICAgfQoKICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKCiAgICAgICAgICBpZiAoTWF0aC5hYnMoYW5nbGUgLSBNYXRoLlBJICogMikgPiAwLjAwMDAwMDAwMSkgewogICAgICAgICAgICBjdHgubW92ZVRvKDAsIDApOyAvLyBDZW50ZXIgb2YgdGhlIHBpZQogICAgICAgICAgfSAvL2N0eC5hcmMoMCwgMCwgcmFkaXVzLCAwLCBhbmdsZSwgZmFsc2UpOyAvLyBUaGlzIGRvZXNuJ3Qgd29yayBwcm9wZXJseSBpbiBPcGVyYQoKCiAgICAgICAgICBjdHguYXJjKDAsIDAsIHJhZGl1cywgY3VycmVudEFuZ2xlLCBjdXJyZW50QW5nbGUgKyBhbmdsZSAvIDIsIGZhbHNlKTsKICAgICAgICAgIGN0eC5hcmMoMCwgMCwgcmFkaXVzLCBjdXJyZW50QW5nbGUgKyBhbmdsZSAvIDIsIGN1cnJlbnRBbmdsZSArIGFuZ2xlLCBmYWxzZSk7CiAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7IC8vY3R4LnJvdGF0ZShhbmdsZSk7IC8vIFRoaXMgZG9lc24ndCB3b3JrIHByb3Blcmx5IGluIE9wZXJhCgogICAgICAgICAgY3VycmVudEFuZ2xlICs9IGFuZ2xlOwoKICAgICAgICAgIGlmIChmaWxsKSB7CiAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkcmF3TGFiZWxzKCkgewogICAgICAgICAgdmFyIGN1cnJlbnRBbmdsZSA9IHN0YXJ0QW5nbGU7CiAgICAgICAgICB2YXIgcmFkaXVzID0gb3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLnJhZGl1cyA+IDEgPyBvcHRpb25zLnNlcmllcy5waWUubGFiZWwucmFkaXVzIDogbWF4UmFkaXVzICogb3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLnJhZGl1czsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAoc2xpY2VzW2ldLnBlcmNlbnQgPj0gb3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLnRocmVzaG9sZCAqIDEwMCkgewogICAgICAgICAgICAgIGlmICghZHJhd0xhYmVsKHNsaWNlc1tpXSwgY3VycmVudEFuZ2xlLCBpKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgY3VycmVudEFuZ2xlICs9IHNsaWNlc1tpXS5hbmdsZTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgICBmdW5jdGlvbiBkcmF3TGFiZWwoc2xpY2UsIHN0YXJ0QW5nbGUsIGluZGV4KSB7CiAgICAgICAgICAgIGlmIChzbGljZS5kYXRhWzBdWzFdID09IDApIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSAvLyBmb3JtYXQgbGFiZWwgdGV4dAoKCiAgICAgICAgICAgIHZhciBsZiA9IG9wdGlvbnMubGVnZW5kLmxhYmVsRm9ybWF0dGVyLAogICAgICAgICAgICAgICAgdGV4dCwKICAgICAgICAgICAgICAgIHBsZiA9IG9wdGlvbnMuc2VyaWVzLnBpZS5sYWJlbC5mb3JtYXR0ZXI7CgogICAgICAgICAgICBpZiAobGYpIHsKICAgICAgICAgICAgICB0ZXh0ID0gbGYoc2xpY2UubGFiZWwsIHNsaWNlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0ZXh0ID0gc2xpY2UubGFiZWw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChwbGYpIHsKICAgICAgICAgICAgICB0ZXh0ID0gcGxmKHRleHQsIHNsaWNlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGhhbGZBbmdsZSA9IChzdGFydEFuZ2xlICsgc2xpY2UuYW5nbGUgKyBzdGFydEFuZ2xlKSAvIDI7CiAgICAgICAgICAgIHZhciB4ID0gY2VudGVyTGVmdCArIE1hdGgucm91bmQoTWF0aC5jb3MoaGFsZkFuZ2xlKSAqIHJhZGl1cyk7CiAgICAgICAgICAgIHZhciB5ID0gY2VudGVyVG9wICsgTWF0aC5yb3VuZChNYXRoLnNpbihoYWxmQW5nbGUpICogcmFkaXVzKSAqIG9wdGlvbnMuc2VyaWVzLnBpZS50aWx0OwogICAgICAgICAgICB2YXIgaHRtbCA9ICI8c3BhbiBjbGFzcz0ncGllTGFiZWwnIGlkPSdwaWVMYWJlbCIgKyBpbmRleCArICInIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt0b3A6IiArIHkgKyAicHg7bGVmdDoiICsgeCArICJweDsnPiIgKyB0ZXh0ICsgIjwvc3Bhbj4iOwogICAgICAgICAgICB0YXJnZXQuYXBwZW5kKGh0bWwpOwogICAgICAgICAgICB2YXIgbGFiZWwgPSB0YXJnZXQuY2hpbGRyZW4oIiNwaWVMYWJlbCIgKyBpbmRleCk7CiAgICAgICAgICAgIHZhciBsYWJlbFRvcCA9IHkgLSBsYWJlbC5oZWlnaHQoKSAvIDI7CiAgICAgICAgICAgIHZhciBsYWJlbExlZnQgPSB4IC0gbGFiZWwud2lkdGgoKSAvIDI7CiAgICAgICAgICAgIGxhYmVsLmNzcygidG9wIiwgbGFiZWxUb3ApOwogICAgICAgICAgICBsYWJlbC5jc3MoImxlZnQiLCBsYWJlbExlZnQpOyAvLyBjaGVjayB0byBtYWtlIHN1cmUgdGhhdCB0aGUgbGFiZWwgaXMgbm90IG91dHNpZGUgdGhlIGNhbnZhcwoKICAgICAgICAgICAgaWYgKDAgLSBsYWJlbFRvcCA+IDAgfHwgMCAtIGxhYmVsTGVmdCA+IDAgfHwgY2FudmFzSGVpZ2h0IC0gKGxhYmVsVG9wICsgbGFiZWwuaGVpZ2h0KCkpIDwgMCB8fCBjYW52YXNXaWR0aCAtIChsYWJlbExlZnQgKyBsYWJlbC53aWR0aCgpKSA8IDApIHsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChvcHRpb25zLnNlcmllcy5waWUubGFiZWwuYmFja2dyb3VuZC5vcGFjaXR5ICE9IDApIHsKICAgICAgICAgICAgICAvLyBwdXQgaW4gdGhlIHRyYW5zcGFyZW50IGJhY2tncm91bmQgc2VwYXJhdGVseSB0byBhdm9pZCBibGVuZGVkIGxhYmVscyBhbmQgbGFiZWwgYm94ZXMKICAgICAgICAgICAgICB2YXIgYyA9IG9wdGlvbnMuc2VyaWVzLnBpZS5sYWJlbC5iYWNrZ3JvdW5kLmNvbG9yOwoKICAgICAgICAgICAgICBpZiAoYyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBjID0gc2xpY2UuY29sb3I7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2YXIgcG9zID0gInRvcDoiICsgbGFiZWxUb3AgKyAicHg7bGVmdDoiICsgbGFiZWxMZWZ0ICsgInB4OyI7CiAgICAgICAgICAgICAgJCgiPGRpdiBjbGFzcz0ncGllTGFiZWxCYWNrZ3JvdW5kJyBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7d2lkdGg6IiArIGxhYmVsLndpZHRoKCkgKyAicHg7aGVpZ2h0OiIgKyBsYWJlbC5oZWlnaHQoKSArICJweDsiICsgcG9zICsgImJhY2tncm91bmQtY29sb3I6IiArIGMgKyAiOyc+PC9kaXY+IikuY3NzKCJvcGFjaXR5Iiwgb3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLmJhY2tncm91bmQub3BhY2l0eSkuaW5zZXJ0QmVmb3JlKGxhYmVsKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9IC8vIGVuZCBpbmRpdmlkdWFsIGxhYmVsIGZ1bmN0aW9uCgogICAgICAgIH0gLy8gZW5kIGRyYXdMYWJlbHMgZnVuY3Rpb24KCiAgICAgIH0gLy8gZW5kIGRyYXdQaWUgZnVuY3Rpb24KCiAgICB9IC8vIGVuZCBkcmF3IGZ1bmN0aW9uCiAgICAvLyBQbGFjZWQgaGVyZSBiZWNhdXNlIGl0IG5lZWRzIHRvIGJlIGFjY2Vzc2VkIGZyb20gbXVsdGlwbGUgbG9jYXRpb25zCgoKICAgIGZ1bmN0aW9uIGRyYXdEb251dEhvbGUobGF5ZXIpIHsKICAgICAgaWYgKG9wdGlvbnMuc2VyaWVzLnBpZS5pbm5lclJhZGl1cyA+IDApIHsKICAgICAgICAvLyBzdWJ0cmFjdCB0aGUgY2VudGVyCiAgICAgICAgbGF5ZXIuc2F2ZSgpOwogICAgICAgIHZhciBpbm5lclJhZGl1cyA9IG9wdGlvbnMuc2VyaWVzLnBpZS5pbm5lclJhZGl1cyA+IDEgPyBvcHRpb25zLnNlcmllcy5waWUuaW5uZXJSYWRpdXMgOiBtYXhSYWRpdXMgKiBvcHRpb25zLnNlcmllcy5waWUuaW5uZXJSYWRpdXM7CiAgICAgICAgbGF5ZXIuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gImRlc3RpbmF0aW9uLW91dCI7IC8vIHRoaXMgZG9lcyBub3Qgd29yayB3aXRoIGV4Y2FudmFzLCBidXQgaXQgd2lsbCBmYWxsIGJhY2sgdG8gdXNpbmcgdGhlIHN0cm9rZSBjb2xvcgoKICAgICAgICBsYXllci5iZWdpblBhdGgoKTsKICAgICAgICBsYXllci5maWxsU3R5bGUgPSBvcHRpb25zLnNlcmllcy5waWUuc3Ryb2tlLmNvbG9yOwogICAgICAgIGxheWVyLmFyYygwLCAwLCBpbm5lclJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIGZhbHNlKTsKICAgICAgICBsYXllci5maWxsKCk7CiAgICAgICAgbGF5ZXIuY2xvc2VQYXRoKCk7CiAgICAgICAgbGF5ZXIucmVzdG9yZSgpOyAvLyBhZGQgaW5uZXIgc3Ryb2tlCgogICAgICAgIGxheWVyLnNhdmUoKTsKICAgICAgICBsYXllci5iZWdpblBhdGgoKTsKICAgICAgICBsYXllci5zdHJva2VTdHlsZSA9IG9wdGlvbnMuc2VyaWVzLnBpZS5zdHJva2UuY29sb3I7CiAgICAgICAgbGF5ZXIuYXJjKDAsIDAsIGlubmVyUmFkaXVzLCAwLCBNYXRoLlBJICogMiwgZmFsc2UpOwogICAgICAgIGxheWVyLnN0cm9rZSgpOwogICAgICAgIGxheWVyLmNsb3NlUGF0aCgpOwogICAgICAgIGxheWVyLnJlc3RvcmUoKTsgLy8gVE9ETzogYWRkIGV4dHJhIHNoYWRvdyBpbnNpZGUgaG9sZSAod2l0aCBhIG1hc2spIGlmIHRoZSBwaWUgaXMgdGlsdGVkLgogICAgICB9CiAgICB9IC8vLS0gQWRkaXRpb25hbCBJbnRlcmFjdGl2ZSByZWxhdGVkIGZ1bmN0aW9ucyAtLQoKCiAgICBmdW5jdGlvbiBpc1BvaW50SW5Qb2x5KHBvbHksIHB0KSB7CiAgICAgIGZvciAodmFyIGMgPSBmYWxzZSwgaSA9IC0xLCBsID0gcG9seS5sZW5ndGgsIGogPSBsIC0gMTsgKytpIDwgbDsgaiA9IGkpIHsKICAgICAgICAocG9seVtpXVsxXSA8PSBwdFsxXSAmJiBwdFsxXSA8IHBvbHlbal1bMV0gfHwgcG9seVtqXVsxXSA8PSBwdFsxXSAmJiBwdFsxXSA8IHBvbHlbaV1bMV0pICYmIHB0WzBdIDwgKHBvbHlbal1bMF0gLSBwb2x5W2ldWzBdKSAqIChwdFsxXSAtIHBvbHlbaV1bMV0pIC8gKHBvbHlbal1bMV0gLSBwb2x5W2ldWzFdKSArIHBvbHlbaV1bMF0gJiYgKGMgPSAhYyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmROZWFyYnlTbGljZShtb3VzZVgsIG1vdXNlWSkgewogICAgICB2YXIgc2xpY2VzID0gcGxvdC5nZXREYXRhKCksCiAgICAgICAgICBvcHRpb25zID0gcGxvdC5nZXRPcHRpb25zKCksCiAgICAgICAgICByYWRpdXMgPSBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzID4gMSA/IG9wdGlvbnMuc2VyaWVzLnBpZS5yYWRpdXMgOiBtYXhSYWRpdXMgKiBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzLAogICAgICAgICAgeCwKICAgICAgICAgIHk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlcy5sZW5ndGg7ICsraSkgewogICAgICAgIHZhciBzID0gc2xpY2VzW2ldOwoKICAgICAgICBpZiAocy5waWUuc2hvdykgewogICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgIGN0eC5tb3ZlVG8oMCwgMCk7IC8vIENlbnRlciBvZiB0aGUgcGllCiAgICAgICAgICAvL2N0eC5zY2FsZSgxLCBvcHRpb25zLnNlcmllcy5waWUudGlsdCk7CS8vIHRoaXMgYWN0dWFsbHkgc2VlbXMgdG8gYnJlYWsgZXZlcnl0aGluZyB3aGVuIGhlcmUuCgogICAgICAgICAgY3R4LmFyYygwLCAwLCByYWRpdXMsIHMuc3RhcnRBbmdsZSwgcy5zdGFydEFuZ2xlICsgcy5hbmdsZSAvIDIsIGZhbHNlKTsKICAgICAgICAgIGN0eC5hcmMoMCwgMCwgcmFkaXVzLCBzLnN0YXJ0QW5nbGUgKyBzLmFuZ2xlIC8gMiwgcy5zdGFydEFuZ2xlICsgcy5hbmdsZSwgZmFsc2UpOwogICAgICAgICAgY3R4LmNsb3NlUGF0aCgpOwogICAgICAgICAgeCA9IG1vdXNlWCAtIGNlbnRlckxlZnQ7CiAgICAgICAgICB5ID0gbW91c2VZIC0gY2VudGVyVG9wOwoKICAgICAgICAgIGlmIChjdHguaXNQb2ludEluUGF0aCkgewogICAgICAgICAgICBpZiAoY3R4LmlzUG9pbnRJblBhdGgobW91c2VYIC0gY2VudGVyTGVmdCwgbW91c2VZIC0gY2VudGVyVG9wKSkgewogICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGRhdGFwb2ludDogW3MucGVyY2VudCwgcy5kYXRhXSwKICAgICAgICAgICAgICAgIGRhdGFJbmRleDogMCwKICAgICAgICAgICAgICAgIHNlcmllczogcywKICAgICAgICAgICAgICAgIHNlcmllc0luZGV4OiBpCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gZXhjYW52YXMgZm9yIElFIGRvZXNuO3Qgc3VwcG9ydCBpc1BvaW50SW5QYXRoLCB0aGlzIGlzIGEgd29ya2Fyb3VuZC4KICAgICAgICAgICAgdmFyIHAxWCA9IHJhZGl1cyAqIE1hdGguY29zKHMuc3RhcnRBbmdsZSksCiAgICAgICAgICAgICAgICBwMVkgPSByYWRpdXMgKiBNYXRoLnNpbihzLnN0YXJ0QW5nbGUpLAogICAgICAgICAgICAgICAgcDJYID0gcmFkaXVzICogTWF0aC5jb3Mocy5zdGFydEFuZ2xlICsgcy5hbmdsZSAvIDQpLAogICAgICAgICAgICAgICAgcDJZID0gcmFkaXVzICogTWF0aC5zaW4ocy5zdGFydEFuZ2xlICsgcy5hbmdsZSAvIDQpLAogICAgICAgICAgICAgICAgcDNYID0gcmFkaXVzICogTWF0aC5jb3Mocy5zdGFydEFuZ2xlICsgcy5hbmdsZSAvIDIpLAogICAgICAgICAgICAgICAgcDNZID0gcmFkaXVzICogTWF0aC5zaW4ocy5zdGFydEFuZ2xlICsgcy5hbmdsZSAvIDIpLAogICAgICAgICAgICAgICAgcDRYID0gcmFkaXVzICogTWF0aC5jb3Mocy5zdGFydEFuZ2xlICsgcy5hbmdsZSAvIDEuNSksCiAgICAgICAgICAgICAgICBwNFkgPSByYWRpdXMgKiBNYXRoLnNpbihzLnN0YXJ0QW5nbGUgKyBzLmFuZ2xlIC8gMS41KSwKICAgICAgICAgICAgICAgIHA1WCA9IHJhZGl1cyAqIE1hdGguY29zKHMuc3RhcnRBbmdsZSArIHMuYW5nbGUpLAogICAgICAgICAgICAgICAgcDVZID0gcmFkaXVzICogTWF0aC5zaW4ocy5zdGFydEFuZ2xlICsgcy5hbmdsZSksCiAgICAgICAgICAgICAgICBhcnJQb2x5ID0gW1swLCAwXSwgW3AxWCwgcDFZXSwgW3AyWCwgcDJZXSwgW3AzWCwgcDNZXSwgW3A0WCwgcDRZXSwgW3A1WCwgcDVZXV0sCiAgICAgICAgICAgICAgICBhcnJQb2ludCA9IFt4LCB5XTsgLy8gVE9ETzogcGVyaGFwcyBkbyBzb21lIG1hdGhlbWF0aWNhbCB0cmlja2VyeSBoZXJlIHdpdGggdGhlIFktY29vcmRpbmF0ZSB0byBjb21wZW5zYXRlIGZvciBwaWUgdGlsdD8KCiAgICAgICAgICAgIGlmIChpc1BvaW50SW5Qb2x5KGFyclBvbHksIGFyclBvaW50KSkgewogICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGRhdGFwb2ludDogW3MucGVyY2VudCwgcy5kYXRhXSwKICAgICAgICAgICAgICAgIGRhdGFJbmRleDogMCwKICAgICAgICAgICAgICAgIHNlcmllczogcywKICAgICAgICAgICAgICAgIHNlcmllc0luZGV4OiBpCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBmdW5jdGlvbiBvbk1vdXNlTW92ZShlKSB7CiAgICAgIHRyaWdnZXJDbGlja0hvdmVyRXZlbnQoInBsb3Rob3ZlciIsIGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uQ2xpY2soZSkgewogICAgICB0cmlnZ2VyQ2xpY2tIb3ZlckV2ZW50KCJwbG90Y2xpY2siLCBlKTsKICAgIH0gLy8gdHJpZ2dlciBjbGljayBvciBob3ZlciBldmVudCAodGhleSBzZW5kIHRoZSBzYW1lIHBhcmFtZXRlcnMgc28gd2Ugc2hhcmUgdGhlaXIgY29kZSkKCgogICAgZnVuY3Rpb24gdHJpZ2dlckNsaWNrSG92ZXJFdmVudChldmVudG5hbWUsIGUpIHsKICAgICAgdmFyIG9mZnNldCA9IHBsb3Qub2Zmc2V0KCk7CiAgICAgIHZhciBjYW52YXNYID0gcGFyc2VJbnQoZS5wYWdlWCAtIG9mZnNldC5sZWZ0KTsKICAgICAgdmFyIGNhbnZhc1kgPSBwYXJzZUludChlLnBhZ2VZIC0gb2Zmc2V0LnRvcCk7CiAgICAgIHZhciBpdGVtID0gZmluZE5lYXJieVNsaWNlKGNhbnZhc1gsIGNhbnZhc1kpOwoKICAgICAgaWYgKG9wdGlvbnMuZ3JpZC5hdXRvSGlnaGxpZ2h0KSB7CiAgICAgICAgLy8gY2xlYXIgYXV0by1oaWdobGlnaHRzCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoaWdobGlnaHRzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICB2YXIgaCA9IGhpZ2hsaWdodHNbaV07CgogICAgICAgICAgaWYgKGguYXV0byA9PSBldmVudG5hbWUgJiYgIShpdGVtICYmIGguc2VyaWVzID09IGl0ZW0uc2VyaWVzKSkgewogICAgICAgICAgICB1bmhpZ2hsaWdodChoLnNlcmllcyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIGhpZ2hsaWdodCB0aGUgc2xpY2UKCgogICAgICBpZiAoaXRlbSkgewogICAgICAgIGhpZ2hsaWdodChpdGVtLnNlcmllcywgZXZlbnRuYW1lKTsKICAgICAgfSAvLyB0cmlnZ2VyIGFueSBob3ZlciBiaW5kIGV2ZW50cwoKCiAgICAgIHZhciBwb3MgPSB7CiAgICAgICAgcGFnZVg6IGUucGFnZVgsCiAgICAgICAgcGFnZVk6IGUucGFnZVkKICAgICAgfTsKICAgICAgdGFyZ2V0LnRyaWdnZXIoZXZlbnRuYW1lLCBbcG9zLCBpdGVtXSk7CiAgICB9CgogICAgZnVuY3Rpb24gaGlnaGxpZ2h0KHMsIGF1dG8pIHsKICAgICAgLy9pZiAodHlwZW9mIHMgPT0gIm51bWJlciIpIHsKICAgICAgLy8JcyA9IHNlcmllc1tzXTsKICAgICAgLy99CiAgICAgIHZhciBpID0gaW5kZXhPZkhpZ2hsaWdodChzKTsKCiAgICAgIGlmIChpID09IC0xKSB7CiAgICAgICAgaGlnaGxpZ2h0cy5wdXNoKHsKICAgICAgICAgIHNlcmllczogcywKICAgICAgICAgIGF1dG86IGF1dG8KICAgICAgICB9KTsKICAgICAgICBwbG90LnRyaWdnZXJSZWRyYXdPdmVybGF5KCk7CiAgICAgIH0gZWxzZSBpZiAoIWF1dG8pIHsKICAgICAgICBoaWdobGlnaHRzW2ldLmF1dG8gPSBmYWxzZTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHVuaGlnaGxpZ2h0KHMpIHsKICAgICAgaWYgKHMgPT0gbnVsbCkgewogICAgICAgIGhpZ2hsaWdodHMgPSBbXTsKICAgICAgICBwbG90LnRyaWdnZXJSZWRyYXdPdmVybGF5KCk7CiAgICAgIH0gLy9pZiAodHlwZW9mIHMgPT0gIm51bWJlciIpIHsKICAgICAgLy8JcyA9IHNlcmllc1tzXTsKICAgICAgLy99CgoKICAgICAgdmFyIGkgPSBpbmRleE9mSGlnaGxpZ2h0KHMpOwoKICAgICAgaWYgKGkgIT0gLTEpIHsKICAgICAgICBoaWdobGlnaHRzLnNwbGljZShpLCAxKTsKICAgICAgICBwbG90LnRyaWdnZXJSZWRyYXdPdmVybGF5KCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpbmRleE9mSGlnaGxpZ2h0KHMpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoaWdobGlnaHRzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgdmFyIGggPSBoaWdobGlnaHRzW2ldOwogICAgICAgIGlmIChoLnNlcmllcyA9PSBzKSByZXR1cm4gaTsKICAgICAgfQoKICAgICAgcmV0dXJuIC0xOwogICAgfQoKICAgIGZ1bmN0aW9uIGRyYXdPdmVybGF5KHBsb3QsIG9jdHgpIHsKICAgICAgdmFyIG9wdGlvbnMgPSBwbG90LmdldE9wdGlvbnMoKTsKICAgICAgdmFyIHJhZGl1cyA9IG9wdGlvbnMuc2VyaWVzLnBpZS5yYWRpdXMgPiAxID8gb3B0aW9ucy5zZXJpZXMucGllLnJhZGl1cyA6IG1heFJhZGl1cyAqIG9wdGlvbnMuc2VyaWVzLnBpZS5yYWRpdXM7CiAgICAgIG9jdHguc2F2ZSgpOwogICAgICBvY3R4LnRyYW5zbGF0ZShjZW50ZXJMZWZ0LCBjZW50ZXJUb3ApOwogICAgICBvY3R4LnNjYWxlKDEsIG9wdGlvbnMuc2VyaWVzLnBpZS50aWx0KTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGlnaGxpZ2h0cy5sZW5ndGg7ICsraSkgewogICAgICAgIGRyYXdIaWdobGlnaHQoaGlnaGxpZ2h0c1tpXS5zZXJpZXMpOwogICAgICB9CgogICAgICBkcmF3RG9udXRIb2xlKG9jdHgpOwogICAgICBvY3R4LnJlc3RvcmUoKTsKCiAgICAgIGZ1bmN0aW9uIGRyYXdIaWdobGlnaHQoc2VyaWVzKSB7CiAgICAgICAgaWYgKHNlcmllcy5hbmdsZSA8PSAwIHx8IGlzTmFOKHNlcmllcy5hbmdsZSkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IC8vb2N0eC5maWxsU3R5bGUgPSBwYXJzZUNvbG9yKG9wdGlvbnMuc2VyaWVzLnBpZS5oaWdobGlnaHQuY29sb3IpLnNjYWxlKG51bGwsIG51bGwsIG51bGwsIG9wdGlvbnMuc2VyaWVzLnBpZS5oaWdobGlnaHQub3BhY2l0eSkudG9TdHJpbmcoKTsKCgogICAgICAgIG9jdHguZmlsbFN0eWxlID0gInJnYmEoMjU1LCAyNTUsIDI1NSwgIiArIG9wdGlvbnMuc2VyaWVzLnBpZS5oaWdobGlnaHQub3BhY2l0eSArICIpIjsgLy8gdGhpcyBpcyB0ZW1wb3JhcnkgdW50aWwgd2UgaGF2ZSBhY2Nlc3MgdG8gcGFyc2VDb2xvcgoKICAgICAgICBvY3R4LmJlZ2luUGF0aCgpOwoKICAgICAgICBpZiAoTWF0aC5hYnMoc2VyaWVzLmFuZ2xlIC0gTWF0aC5QSSAqIDIpID4gMC4wMDAwMDAwMDEpIHsKICAgICAgICAgIG9jdHgubW92ZVRvKDAsIDApOyAvLyBDZW50ZXIgb2YgdGhlIHBpZQogICAgICAgIH0KCiAgICAgICAgb2N0eC5hcmMoMCwgMCwgcmFkaXVzLCBzZXJpZXMuc3RhcnRBbmdsZSwgc2VyaWVzLnN0YXJ0QW5nbGUgKyBzZXJpZXMuYW5nbGUgLyAyLCBmYWxzZSk7CiAgICAgICAgb2N0eC5hcmMoMCwgMCwgcmFkaXVzLCBzZXJpZXMuc3RhcnRBbmdsZSArIHNlcmllcy5hbmdsZSAvIDIsIHNlcmllcy5zdGFydEFuZ2xlICsgc2VyaWVzLmFuZ2xlLCBmYWxzZSk7CiAgICAgICAgb2N0eC5jbG9zZVBhdGgoKTsKICAgICAgICBvY3R4LmZpbGwoKTsKICAgICAgfQogICAgfQogIH0gLy8gZW5kIGluaXQgKHBsdWdpbiBib2R5KQogIC8vIGRlZmluZSBwaWUgc3BlY2lmaWMgb3B0aW9ucyBhbmQgdGhlaXIgZGVmYXVsdCB2YWx1ZXMKCgogIHZhciBvcHRpb25zID0gewogICAgc2VyaWVzOiB7CiAgICAgIHBpZTogewogICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIHJhZGl1czogImF1dG8iLAogICAgICAgIC8vIGFjdHVhbCByYWRpdXMgb2YgdGhlIHZpc2libGUgcGllIChiYXNlZCBvbiBmdWxsIGNhbGN1bGF0ZWQgcmFkaXVzIGlmIDw9MSwgb3IgaGFyZCBwaXhlbCB2YWx1ZSkKICAgICAgICBpbm5lclJhZGl1czogMCwKCiAgICAgICAgLyogZm9yIGRvbnV0ICovCiAgICAgICAgc3RhcnRBbmdsZTogMyAvIDIsCiAgICAgICAgdGlsdDogMSwKICAgICAgICBzaGFkb3c6IHsKICAgICAgICAgIGxlZnQ6IDUsCiAgICAgICAgICAvLyBzaGFkb3cgbGVmdCBvZmZzZXQKICAgICAgICAgIHRvcDogMTUsCiAgICAgICAgICAvLyBzaGFkb3cgdG9wIG9mZnNldAogICAgICAgICAgYWxwaGE6IDAuMDIgLy8gc2hhZG93IGFscGhhCgogICAgICAgIH0sCiAgICAgICAgb2Zmc2V0OiB7CiAgICAgICAgICB0b3A6IDAsCiAgICAgICAgICBsZWZ0OiAiYXV0byIKICAgICAgICB9LAogICAgICAgIHN0cm9rZTogewogICAgICAgICAgY29sb3I6ICIjZmZmIiwKICAgICAgICAgIHdpZHRoOiAxCiAgICAgICAgfSwKICAgICAgICBsYWJlbDogewogICAgICAgICAgc2hvdzogImF1dG8iLAogICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiBmb3JtYXR0ZXIobGFiZWwsIHNsaWNlKSB7CiAgICAgICAgICAgIHJldHVybiAiPGRpdiBzdHlsZT0nZm9udC1zaXplOngtc21hbGw7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzoycHg7Y29sb3I6IiArIHNsaWNlLmNvbG9yICsgIjsnPiIgKyBsYWJlbCArICI8YnIvPiIgKyBNYXRoLnJvdW5kKHNsaWNlLnBlcmNlbnQpICsgIiU8L2Rpdj4iOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIGZvcm1hdHRlciBmdW5jdGlvbgogICAgICAgICAgcmFkaXVzOiAxLAogICAgICAgICAgLy8gcmFkaXVzIGF0IHdoaWNoIHRvIHBsYWNlIHRoZSBsYWJlbHMgKGJhc2VkIG9uIGZ1bGwgY2FsY3VsYXRlZCByYWRpdXMgaWYgPD0xLCBvciBoYXJkIHBpeGVsIHZhbHVlKQogICAgICAgICAgYmFja2dyb3VuZDogewogICAgICAgICAgICBjb2xvcjogbnVsbCwKICAgICAgICAgICAgb3BhY2l0eTogMAogICAgICAgICAgfSwKICAgICAgICAgIHRocmVzaG9sZDogMCAvLyBwZXJjZW50YWdlIGF0IHdoaWNoIHRvIGhpZGUgdGhlIGxhYmVsIChpLmUuIHRoZSBzbGljZSBpcyB0b28gbmFycm93KQoKICAgICAgICB9LAogICAgICAgIGNvbWJpbmU6IHsKICAgICAgICAgIHRocmVzaG9sZDogLTEsCiAgICAgICAgICAvLyBwZXJjZW50YWdlIGF0IHdoaWNoIHRvIGNvbWJpbmUgbGl0dGxlIHNsaWNlcyBpbnRvIG9uZSBsYXJnZXIgc2xpY2UKICAgICAgICAgIGNvbG9yOiBudWxsLAogICAgICAgICAgLy8gY29sb3IgdG8gZ2l2ZSB0aGUgbmV3IHNsaWNlIChhdXRvLWdlbmVyYXRlZCBpZiBudWxsKQogICAgICAgICAgbGFiZWw6ICJPdGhlciIgLy8gbGFiZWwgdG8gZ2l2ZSB0aGUgbmV3IHNsaWNlCgogICAgICAgIH0sCiAgICAgICAgaGlnaGxpZ2h0OiB7CiAgICAgICAgICAvL2NvbG9yOiAiI2ZmZiIsCQkvLyB3aWxsIGFkZCB0aGlzIGZ1bmN0aW9uYWxpdHkgb25jZSBwYXJzZUNvbG9yIGlzIGF2YWlsYWJsZQogICAgICAgICAgb3BhY2l0eTogMC41CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICAkLnBsb3QucGx1Z2lucy5wdXNoKHsKICAgIGluaXQ6IGluaXQsCiAgICBvcHRpb25zOiBvcHRpb25zLAogICAgbmFtZTogInBpZSIsCiAgICB2ZXJzaW9uOiAiMS4xIgogIH0pOwp9KShqUXVlcnkpOw=="},null]}