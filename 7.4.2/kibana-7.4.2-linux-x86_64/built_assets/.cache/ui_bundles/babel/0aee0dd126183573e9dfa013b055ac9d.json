{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/state_management/state.js","dependencies":[{"path":"src/legacy/ui/public/state_management/state.js","mtime":1572296412940},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlN0YXRlUHJvdmlkZXIgPSBTdGF0ZVByb3ZpZGVyOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9hbmd1bGFyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJhbmd1bGFyIikpOwoKdmFyIF9yaXNvbk5vZGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJpc29uLW5vZGUiKSk7Cgp2YXIgX2RpZmZfb2JqZWN0ID0gcmVxdWlyZSgiLi4vdXRpbHMvZGlmZl9vYmplY3QiKTsKCnZhciBfZXZlbnRzID0gcmVxdWlyZSgiLi4vZXZlbnRzIik7Cgp2YXIgX25vdGlmeSA9IHJlcXVpcmUoIi4uL25vdGlmeSIpOwoKcmVxdWlyZSgiLi9jb25maWdfcHJvdmlkZXIiKTsKCnZhciBfbGVnYWN5X2NsYXNzID0gcmVxdWlyZSgiLi4vdXRpbHMvbGVnYWN5X2NsYXNzIik7Cgp2YXIgX2Z1bmN0aW9uID0gcmVxdWlyZSgiLi4vdXRpbHMvZnVuY3Rpb24iKTsKCnZhciBfc3RhdGVfc3RvcmFnZSA9IHJlcXVpcmUoIi4vc3RhdGVfc3RvcmFnZSIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qCiAqIExpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvcgogKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodAogKiBvd25lcnNoaXAuIEVsYXN0aWNzZWFyY2ggQi5WLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyCiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5CiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKLyoqCiAqIEBuYW1lIFN0YXRlCiAqCiAqIEBleHRlbmRzIEV2ZW50cwogKgogKiBAZGVzY3JpcHRpb24gUGVyc2lzdHMgZ2VuZXJpYyAic3RhdGUiIHRvIGFuZCByZWFkcyBpdCBmcm9tIHRoZSBVUkwuCiAqLwpmdW5jdGlvbiBTdGF0ZVByb3ZpZGVyKFByaXZhdGUsICRyb290U2NvcGUsICRsb2NhdGlvbiwgc3RhdGVNYW5hZ2VtZW50Q29uZmlnLCBjb25maWcsIGtiblVybCkgewogIHZhciBFdmVudHMgPSBQcml2YXRlKF9ldmVudHMuRXZlbnRzUHJvdmlkZXIpOwogICgwLCBfbGVnYWN5X2NsYXNzLmNyZWF0ZUxlZ2FjeUNsYXNzKShTdGF0ZSkuaW5oZXJpdHMoRXZlbnRzKTsKCiAgZnVuY3Rpb24gU3RhdGUodXJsUGFyYW0sIGRlZmF1bHRzKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBoYXNoZWRJdGVtU3RvcmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IF9zdGF0ZV9zdG9yYWdlLkhhc2hlZEl0ZW1TdG9yZVNpbmdsZXRvbjsKICAgIFN0YXRlLlN1cGVyLmNhbGwodGhpcyk7CiAgICB0aGlzLnNldERlZmF1bHRzKGRlZmF1bHRzKTsKICAgIHRoaXMuX3VybFBhcmFtID0gdXJsUGFyYW0gfHwgJ19zJzsKICAgIHRoaXMuX2hhc2hlZEl0ZW1TdG9yZSA9IGhhc2hlZEl0ZW1TdG9yZTsgLy8gV2hlbiB0aGUgVVJMIHVwZGF0ZXMgd2UgbmVlZCB0byBmZXRjaCB0aGUgdmFsdWVzIGZyb20gdGhlIFVSTAoKICAgIHRoaXMuX2NsZWFuVXBMaXN0ZW5lcnMgPSBfbG9kYXNoLmRlZmF1bHQucGFydGlhbChfZnVuY3Rpb24uY2FsbEVhY2gsIFsvLyBwYXJ0aWFsIHJvdXRlIHVwZGF0ZSwgbm8gYXBwIHJlbG9hZAogICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZVVwZGF0ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuZmV0Y2goKTsKICAgIH0pLCAvLyBiZWdpbm5pbmcgb2YgZnVsbCByb3V0ZSB1cGRhdGUsIG5ldyBhcHAgd2lsbCBiZSBpbml0aWFsaXplZCBiZWZvcmUKICAgIC8vICRyb3V0ZUNoYW5nZVN1Y2Nlc3Mgb3IgJHJvdXRlQ2hhbmdlRXJyb3IKICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFfdGhpcy5fcGVyc2lzdEFjcm9zc0FwcHMpIHsKICAgICAgICBfdGhpcy5kZXN0cm95KCk7CiAgICAgIH0KICAgIH0pLCAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLl9wZXJzaXN0QWNyb3NzQXBwcykgewogICAgICAgIF90aGlzLmZldGNoKCk7CiAgICAgIH0KICAgIH0pXSk7IC8vIEluaXRpYWxpemUgdGhlIFN0YXRlIHdpdGggZmV0Y2gKCiAgICB0aGlzLmZldGNoKCk7CiAgfQoKICBTdGF0ZS5wcm90b3R5cGUuX3JlYWRGcm9tVVJMID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHNlYXJjaCA9ICRsb2NhdGlvbi5zZWFyY2goKTsKICAgIHZhciB1cmxWYWwgPSBzZWFyY2hbdGhpcy5fdXJsUGFyYW1dOwoKICAgIGlmICghdXJsVmFsKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGlmICgoMCwgX3N0YXRlX3N0b3JhZ2UuaXNTdGF0ZUhhc2gpKHVybFZhbCkpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlU3RhdGVIYXNoKHVybFZhbCk7CiAgICB9CgogICAgdmFyIHJpc29uRW5jb2RlZDsKICAgIHZhciB1bmFibGVUb1BhcnNlOwoKICAgIHRyeSB7CiAgICAgIHJpc29uRW5jb2RlZCA9IF9yaXNvbk5vZGUuZGVmYXVsdC5kZWNvZGUodXJsVmFsKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdW5hYmxlVG9QYXJzZSA9IHRydWU7CiAgICB9CgogICAgaWYgKHVuYWJsZVRvUGFyc2UpIHsKICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKF9pMThuLmkxOG4udHJhbnNsYXRlKCdjb21tb24udWkuc3RhdGVNYW5hZ2VtZW50LnVuYWJsZVRvUGFyc2VVcmxFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmFibGUgdG8gcGFyc2UgVVJMJwogICAgICB9KSk7CgogICAgICBzZWFyY2hbdGhpcy5fdXJsUGFyYW1dID0gdGhpcy50b1F1ZXJ5UGFyYW0odGhpcy5fZGVmYXVsdHMpOwogICAgICAkbG9jYXRpb24uc2VhcmNoKHNlYXJjaCkucmVwbGFjZSgpOwogICAgfQoKICAgIGlmICghcmlzb25FbmNvZGVkKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGlmICh0aGlzLmlzSGFzaGluZ0VuYWJsZWQoKSkgewogICAgICAvLyBSSVNPTiBjYW4gZmluZCBpdHMgd2F5IGludG8gdGhlIFVSTCBhbnkgbnVtYmVyIG9mIHdheXMsIGluY2x1ZGluZyB0aGUgbmF2YmFyIGxpbmtzIG9yCiAgICAgIC8vIHNoYXJlZCB1cmxzIHdpdGggdGhlIGVudGlyZSBzdGF0ZSBlbWJlZGRlZC4gVGhlc2UgdmFsdWVzIG5lZWQgdG8gYmUgdHJhbnNsYXRlZCBpbnRvCiAgICAgIC8vIGhhc2hlcyBhbmQgcmVwbGFjZWQgaW4gdGhlIGJyb3dzZXIgaGlzdG9yeSB3aGVuIHN0YXRlLWhhc2hpbmcgaXMgZW5hYmxlZAogICAgICBzZWFyY2hbdGhpcy5fdXJsUGFyYW1dID0gdGhpcy50b1F1ZXJ5UGFyYW0ocmlzb25FbmNvZGVkKTsKICAgICAgJGxvY2F0aW9uLnNlYXJjaChzZWFyY2gpLnJlcGxhY2UoKTsKICAgIH0KCiAgICByZXR1cm4gcmlzb25FbmNvZGVkOwogIH07CiAgLyoqCiAgICogRmV0Y2hlcyB0aGUgc3RhdGUgZnJvbSB0aGUgdXJsCiAgICogQHJldHVybnMge3ZvaWR9CiAgICovCgoKICBTdGF0ZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXN0YXRlTWFuYWdlbWVudENvbmZpZy5lbmFibGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgc3Rhc2ggPSB0aGlzLl9yZWFkRnJvbVVSTCgpOyAvLyBub3RoaW5nIHRvIHJlYWQgZnJvbSB0aGUgdXJsPyBzYXZlIGlmIG9yZGVyZWQgdG8gcGVyc2lzdAoKCiAgICBpZiAoc3Rhc2ggPT09IG51bGwpIHsKICAgICAgaWYgKHRoaXMuX3BlcnNpc3RBY3Jvc3NBcHBzKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXNoID0ge307CiAgICAgIH0KICAgIH0KCiAgICBfbG9kYXNoLmRlZmF1bHQuZGVmYXVsdHMoc3Rhc2gsIHRoaXMuX2RlZmF1bHRzKTsgLy8gYXBwbHkgZGlmZiB0byBzdGF0ZSBmcm9tIHN0YXNoLCB3aWxsIGNoYW5nZSBzdGF0ZSBpbiBwbGFjZSB2aWEgc2lkZSBlZmZlY3QKCgogICAgdmFyIGRpZmZSZXN1bHRzID0gKDAsIF9kaWZmX29iamVjdC5hcHBseURpZmYpKHRoaXMsIHN0YXNoKTsKCiAgICBpZiAoZGlmZlJlc3VsdHMua2V5cy5sZW5ndGgpIHsKICAgICAgdGhpcy5lbWl0KCdmZXRjaF93aXRoX2NoYW5nZXMnLCBkaWZmUmVzdWx0cy5rZXlzKTsKICAgIH0KICB9OwogIC8qKgogICAqIFNhdmVzIHRoZSBzdGF0ZSB0byB0aGUgdXJsCiAgICogQHJldHVybnMge3ZvaWR9CiAgICovCgoKICBTdGF0ZS5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIChyZXBsYWNlKSB7CiAgICBpZiAoIXN0YXRlTWFuYWdlbWVudENvbmZpZy5lbmFibGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgc3Rhc2ggPSB0aGlzLl9yZWFkRnJvbVVSTCgpOwoKICAgIHZhciBzdGF0ZSA9IHRoaXMudG9PYmplY3QoKTsKICAgIHJlcGxhY2UgPSByZXBsYWNlIHx8IGZhbHNlOwoKICAgIGlmICghc3Rhc2gpIHsKICAgICAgcmVwbGFjZSA9IHRydWU7CiAgICAgIHN0YXNoID0ge307CiAgICB9IC8vIGFwcGx5IGRpZmYgdG8gc3RhdGUgZnJvbSBzdGFzaCwgd2lsbCBjaGFuZ2Ugc3RhdGUgaW4gcGxhY2UgdmlhIHNpZGUgZWZmZWN0CgoKICAgIHZhciBkaWZmUmVzdWx0cyA9ICgwLCBfZGlmZl9vYmplY3QuYXBwbHlEaWZmKShzdGFzaCwgX2xvZGFzaC5kZWZhdWx0LmRlZmF1bHRzKHt9LCBzdGF0ZSwgdGhpcy5fZGVmYXVsdHMpKTsKCiAgICBpZiAoZGlmZlJlc3VsdHMua2V5cy5sZW5ndGgpIHsKICAgICAgdGhpcy5lbWl0KCdzYXZlX3dpdGhfY2hhbmdlcycsIGRpZmZSZXN1bHRzLmtleXMpOwogICAgfSAvLyBwZXJzaXN0IHRoZSBzdGF0ZSBpbiB0aGUgVVJMCgoKICAgIHZhciBzZWFyY2ggPSAkbG9jYXRpb24uc2VhcmNoKCk7CiAgICBzZWFyY2hbdGhpcy5fdXJsUGFyYW1dID0gdGhpcy50b1F1ZXJ5UGFyYW0oc3RhdGUpOwoKICAgIGlmIChyZXBsYWNlKSB7CiAgICAgICRsb2NhdGlvbi5zZWFyY2goc2VhcmNoKS5yZXBsYWNlKCk7CiAgICB9IGVsc2UgewogICAgICAkbG9jYXRpb24uc2VhcmNoKHNlYXJjaCk7CiAgICB9CiAgfTsKICAvKioKICAgKiBDYWxscyBzYXZlIHdpdGggYSBmb3JjZWQgcmVwbGFjZQogICAqIEByZXR1cm5zIHt2b2lkfQogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXN0YXRlTWFuYWdlbWVudENvbmZpZy5lbmFibGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLnNhdmUodHJ1ZSk7CiAgfTsKICAvKioKICAgKiBSZXNldHMgdGhlIHN0YXRlIHRvIHRoZSBkZWZhdWx0cwogICAqCiAgICogQHJldHVybnMge3ZvaWR9CiAgICovCgoKICBTdGF0ZS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXN0YXRlTWFuYWdlbWVudENvbmZpZy5lbmFibGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBrYm5VcmwucmVtb3ZlUGFyYW0odGhpcy5nZXRRdWVyeVBhcmFtTmFtZSgpKTsgLy8gYXBwbHkgZGlmZiB0byBhdHRyaWJ1dGVzIGZyb20gZGVmYXVsdHMsIHRoaXMgaXMgc2lkZSBlZmZlY3Rpbmcgc28KICAgIC8vIGl0IHdpbGwgY2hhbmdlIHRoZSBzdGF0ZSBpbiBwbGFjZS4KCiAgICB2YXIgZGlmZlJlc3VsdHMgPSAoMCwgX2RpZmZfb2JqZWN0LmFwcGx5RGlmZikodGhpcywgdGhpcy5fZGVmYXVsdHMpOwoKICAgIGlmIChkaWZmUmVzdWx0cy5rZXlzLmxlbmd0aCkgewogICAgICB0aGlzLmVtaXQoJ3Jlc2V0X3dpdGhfY2hhbmdlcycsIGRpZmZSZXN1bHRzLmtleXMpOwogICAgfQoKICAgIHRoaXMuc2F2ZSgpOwogIH07CiAgLyoqCiAgICogQ2xlYW5zIHVwIHRoZSBzdGF0ZSBvYmplY3QKICAgKiBAcmV0dXJucyB7dm9pZH0KICAgKi8KCgogIFN0YXRlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5vZmYoKTsgLy8gcmVtb3ZlcyBhbGwgbGlzdGVuZXJzCgogICAgdGhpcy5fY2xlYW5VcExpc3RlbmVycygpOyAvLyBSZW1vdmVzIHRoZSAkcm91dGVVcGRhdGUgbGlzdGVuZXIKCiAgfTsKCiAgU3RhdGUucHJvdG90eXBlLnNldERlZmF1bHRzID0gZnVuY3Rpb24gKGRlZmF1bHRzKSB7CiAgICB0aGlzLl9kZWZhdWx0cyA9IGRlZmF1bHRzIHx8IHt9OwogIH07CiAgLyoqCiAgICogIFBhcnNlIHRoZSBzdGF0ZSBoYXNoIHRvIGl0J3MgdW5zZXJpYWxpemVkIHZhbHVlLiBIYXNoZXMgYXJlIHJlc3RvcmVkCiAgICogIHRvIHRoZWlyIHByZS1oYXNoZWQgc3RhdGUuCiAgICoKICAgKiAgQHBhcmFtICB7c3RyaW5nfSBzdGF0ZUhhc2ggLSBzdGF0ZSBoYXNoIHZhbHVlIGZyb20gdGhlIHF1ZXJ5IHN0cmluZy4KICAgKiAgQHJldHVybiB7YW55fSAtIHRoZSBzdG9yZWQgdmFsdWUsIG9yIG51bGwgaWYgaGFzaCBkb2VzIG5vdCByZXNvbHZlLgogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLl9wYXJzZVN0YXRlSGFzaCA9IGZ1bmN0aW9uIChzdGF0ZUhhc2gpIHsKICAgIHZhciBqc29uID0gdGhpcy5faGFzaGVkSXRlbVN0b3JlLmdldEl0ZW0oc3RhdGVIYXNoKTsKCiAgICBpZiAoanNvbiA9PT0gbnVsbCkgewogICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2NvbW1vbi51aS5zdGF0ZU1hbmFnZW1lbnQudW5hYmxlVG9SZXN0b3JlVXJsRXJyb3JNZXNzYWdlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVW5hYmxlIHRvIGNvbXBsZXRlbHkgcmVzdG9yZSB0aGUgVVJMLCBiZSBzdXJlIHRvIHVzZSB0aGUgc2hhcmUgZnVuY3Rpb25hbGl0eS4nCiAgICAgIH0pKTsKICAgIH0KCiAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTsKICB9OwogIC8qKgogICAqICBMb29rdXAgdGhlIHZhbHVlIGZvciBhIGhhc2ggYW5kIHJldHVybiBpdCdzIHZhbHVlIGluIHJpc29uIGZvcm1hdCBvciBqdXN0CiAgICogIHJldHVybiBwYXNzZWQgYXJndW1lbnQgaWYgaXQncyBub3QgcmVjb2duaXplZCBhcyBzdGF0ZSBoYXNoLgogICAqCiAgICogIEBwYXJhbSAge3N0cmluZ30gc3RhdGVIYXNoT3JSaXNvbiAtIGVpdGhlciBzdGF0ZSBoYXNoIHZhbHVlIG9yIHJpc29uIHN0cmluZy4KICAgKiAgQHJldHVybiB7c3RyaW5nfSByaXNvbgogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLnRyYW5zbGF0ZUhhc2hUb1Jpc29uID0gZnVuY3Rpb24gKHN0YXRlSGFzaE9yUmlzb24pIHsKICAgIGlmICgoMCwgX3N0YXRlX3N0b3JhZ2UuaXNTdGF0ZUhhc2gpKHN0YXRlSGFzaE9yUmlzb24pKSB7CiAgICAgIHJldHVybiBfcmlzb25Ob2RlLmRlZmF1bHQuZW5jb2RlKHRoaXMuX3BhcnNlU3RhdGVIYXNoKHN0YXRlSGFzaE9yUmlzb24pKTsKICAgIH0KCiAgICByZXR1cm4gc3RhdGVIYXNoT3JSaXNvbjsKICB9OwoKICBTdGF0ZS5wcm90b3R5cGUuaXNIYXNoaW5nRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiAhIWNvbmZpZy5nZXQoJ3N0YXRlOnN0b3JlSW5TZXNzaW9uU3RvcmFnZScpOwogIH07CiAgLyoqCiAgICogIFByb2R1Y2UgdGhlIGhhc2ggdmVyc2lvbiBvZiB0aGUgc3RhdGUgaW4gaXQncyBjdXJyZW50IHBvc2l0aW9uCiAgICoKICAgKiAgQHJldHVybiB7c3RyaW5nfQogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLnRvUXVlcnlQYXJhbSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpcy50b09iamVjdCgpOwoKICAgIGlmICghdGhpcy5pc0hhc2hpbmdFbmFibGVkKCkpIHsKICAgICAgcmV0dXJuIF9yaXNvbk5vZGUuZGVmYXVsdC5lbmNvZGUoc3RhdGUpOwogICAgfSAvLyBXZSBuZWVkIHRvIHN0cmlwIG91dCBBbmd1bGFyLXNwZWNpZmljIHByb3BlcnRpZXMuCgoKICAgIHZhciBqc29uID0gX2FuZ3VsYXIuZGVmYXVsdC50b0pzb24oc3RhdGUpOwoKICAgIHZhciBoYXNoID0gKDAsIF9zdGF0ZV9zdG9yYWdlLmNyZWF0ZVN0YXRlSGFzaCkoanNvbiwgZnVuY3Rpb24gKGhhc2gpIHsKICAgICAgcmV0dXJuIF90aGlzMi5faGFzaGVkSXRlbVN0b3JlLmdldEl0ZW0oaGFzaCk7CiAgICB9KTsKCiAgICB2YXIgaXNJdGVtU2V0ID0gdGhpcy5faGFzaGVkSXRlbVN0b3JlLnNldEl0ZW0oaGFzaCwganNvbik7CgogICAgaWYgKGlzSXRlbVNldCkgewogICAgICByZXR1cm4gaGFzaDsKICAgIH0gLy8gSWYgd2UgcmFuIG91dCBvZiBzcGFjZSB0cnlpbmcgdG8gcGVyc2lzdCB0aGUgc3RhdGUsIG5vdGlmeSB0aGUgdXNlci4KCgogICAgdmFyIG1lc3NhZ2UgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgnY29tbW9uLnVpLnN0YXRlTWFuYWdlbWVudC51bmFibGVUb1N0b3JlSGlzdG9yeUluU2Vzc2lvbkVycm9yTWVzc2FnZScsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdLaWJhbmEgaXMgdW5hYmxlIHRvIHN0b3JlIGhpc3RvcnkgaXRlbXMgaW4geW91ciBzZXNzaW9uICcgKyAiYmVjYXVzZSBpdCBpcyBmdWxsIGFuZCB0aGVyZSBkb24ndCBzZWVtIHRvIGJlIGl0ZW1zIGFueSBpdGVtcyBzYWZlICIgKyAndG8gZGVsZXRlLlxuXG4nICsgJ1RoaXMgY2FuIHVzdWFsbHkgYmUgZml4ZWQgYnkgbW92aW5nIHRvIGEgZnJlc2ggdGFiLCBidXQgY291bGQgJyArICdiZSBjYXVzZWQgYnkgYSBsYXJnZXIgaXNzdWUuIElmIHlvdSBhcmUgc2VlaW5nIHRoaXMgbWVzc2FnZSByZWd1bGFybHksICcgKyAncGxlYXNlIGZpbGUgYW4gaXNzdWUgYXQge2dpdEh1Yklzc3Vlc1VybH0uJywKICAgICAgdmFsdWVzOiB7CiAgICAgICAgZ2l0SHViSXNzdWVzVXJsOiAnaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMva2liYW5hL2lzc3VlcycKICAgICAgfQogICAgfSk7CgogICAgKDAsIF9ub3RpZnkuZmF0YWxFcnJvcikobmV3IEVycm9yKG1lc3NhZ2UpKTsKICB9OwogIC8qKgogICAqICBHZXQgdGhlIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXIgbmFtZSB3aGVyZSB0aGlzIHN0YXRlIHdyaXRlcyBhbmQgcmVhZHMKICAgKiAgQHJldHVybiB7c3RyaW5nfQogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLmdldFF1ZXJ5UGFyYW1OYW1lID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuX3VybFBhcmFtOwogIH07CgogIHJldHVybiBTdGF0ZTsKfQ=="},null]}