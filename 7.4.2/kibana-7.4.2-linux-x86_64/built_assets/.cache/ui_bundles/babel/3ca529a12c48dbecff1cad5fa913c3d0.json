{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/public/ui_settings/ui_settings_client.js","dependencies":[{"path":"src/core/public/ui_settings/ui_settings_client.js","mtime":1572296408496},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlVpU2V0dGluZ3NDbGllbnQgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIFJ4ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicnhqcyIpKTsKCnZhciBfb3BlcmF0b3JzID0gcmVxdWlyZSgicnhqcy9vcGVyYXRvcnMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KLyoqIEBwdWJsaWMgKi8KCgp2YXIgVWlTZXR0aW5nc0NsaWVudCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFVpU2V0dGluZ3NDbGllbnQocGFyYW1zKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVWlTZXR0aW5nc0NsaWVudCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ1cGRhdGUkIiwgbmV3IFJ4LlN1YmplY3QoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzYXZlZCQiLCBuZXcgUnguU3ViamVjdCgpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInVwZGF0ZUVycm9ycyQiLCBuZXcgUnguU3ViamVjdCgpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImFwaSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZWZhdWx0cyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjYWNoZSIsIHZvaWQgMCk7CgogICAgdGhpcy5hcGkgPSBwYXJhbXMuYXBpOwogICAgdGhpcy5kZWZhdWx0cyA9ICgwLCBfbG9kYXNoLmNsb25lRGVlcCkocGFyYW1zLmRlZmF1bHRzKTsKICAgIHRoaXMuY2FjaGUgPSAoMCwgX2xvZGFzaC5kZWZhdWx0c0RlZXApKHt9LCB0aGlzLmRlZmF1bHRzLCAoMCwgX2xvZGFzaC5jbG9uZURlZXApKHBhcmFtcy5pbml0aWFsU2V0dGluZ3MpKTsKICB9CiAgLyoqCiAgICogR2V0cyB0aGUgbWV0YWRhdGEgYWJvdXQgYWxsIHVpU2V0dGluZ3MsIGluY2x1ZGluZyB0aGUgdHlwZSwgZGVmYXVsdCB2YWx1ZSwgYW5kIHVzZXIgdmFsdWUKICAgKiBmb3IgZWFjaCBrZXkuCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoVWlTZXR0aW5nc0NsaWVudCwgW3sKICAgIGtleTogImdldEFsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWxsKCkgewogICAgICByZXR1cm4gKDAsIF9sb2Rhc2guY2xvbmVEZWVwKSh0aGlzLmNhY2hlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0cyB0aGUgdmFsdWUgZm9yIGEgc3BlY2lmaWMgdWlTZXR0aW5nLiBJZiB0aGlzIHNldHRpbmcgaGFzIG5vIHVzZXItZGVmaW5lZCB2YWx1ZQogICAgICogdGhlbiB0aGUgYGRlZmF1bHRPdmVycmlkZWAgcGFyYW1ldGVyIGlzIHJldHVybmVkIChhbmQgcGFyc2VkIGlmIHNldHRpbmcgaXMgb2YgdHlwZQogICAgICogImpzb24iIG9yICJudW1iZXIpLiBJZiB0aGUgcGFyYW1ldGVyIGlzIG5vdCBkZWZpbmVkIGFuZCB0aGUga2V5IGlzIG5vdCBkZWZpbmVkIGJ5IGEKICAgICAqIHVpU2V0dGluZ0RlZmF1bHRzIHRoZW4gYW4gZXJyb3IgaXMgdGhyb3duLCBvdGhlcndpc2UgdGhlIGRlZmF1bHQgaXMgcmVhZAogICAgICogZnJvbSB0aGUgdWlTZXR0aW5nRGVmYXVsdHMuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoa2V5LCBkZWZhdWx0T3ZlcnJpZGUpIHsKICAgICAgdmFyIGRlY2xhcmVkID0gdGhpcy5pc0RlY2xhcmVkKGtleSk7CgogICAgICBpZiAoIWRlY2xhcmVkICYmIGRlZmF1bHRPdmVycmlkZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIGRlZmF1bHRPdmVycmlkZTsKICAgICAgfQoKICAgICAgaWYgKCFkZWNsYXJlZCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5leHBlY3RlZCBgY29uZmlnLmdldChcIiIuY29uY2F0KGtleSwgIlwiKWAgY2FsbCBvbiB1bnJlY29nbml6ZWQgY29uZmlndXJhdGlvbiBzZXR0aW5nIFwiIikuY29uY2F0KGtleSwgIlwiLlxuU2V0dGluZyBhbiBpbml0aWFsIHZhbHVlIHZpYSBgY29uZmlnLnNldChcIiIpLmNvbmNhdChrZXksICJcIiwgdmFsdWUpYCBiZWZvcmUgYXR0ZW1wdGluZyB0byByZXRyaWV2ZVxuYW55IGN1c3RvbSBzZXR0aW5nIHZhbHVlIGZvciBcIiIpLmNvbmNhdChrZXksICJcIiBtYXkgZml4IHRoaXMgaXNzdWUuXG5Zb3UgY2FuIHVzZSBgY29uZmlnLmdldChcIiIpLmNvbmNhdChrZXksICJcIiwgZGVmYXVsdFZhbHVlKWAsIHdoaWNoIHdpbGwganVzdCByZXR1cm5cbmBkZWZhdWx0VmFsdWVgIHdoZW4gdGhlIGtleSBpcyB1bnJlY29nbml6ZWQuIikpOwogICAgICB9CgogICAgICB2YXIgdHlwZSA9IHRoaXMuY2FjaGVba2V5XS50eXBlOwogICAgICB2YXIgdXNlclZhbHVlID0gdGhpcy5jYWNoZVtrZXldLnVzZXJWYWx1ZTsKICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRPdmVycmlkZSAhPT0gdW5kZWZpbmVkID8gZGVmYXVsdE92ZXJyaWRlIDogdGhpcy5jYWNoZVtrZXldLnZhbHVlOwogICAgICB2YXIgdmFsdWUgPSB1c2VyVmFsdWUgPT0gbnVsbCA/IGRlZmF1bHRWYWx1ZSA6IHVzZXJWYWx1ZTsKCiAgICAgIGlmICh0eXBlID09PSAnanNvbicpIHsKICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGlmICh0eXBlID09PSAnbnVtYmVyJykgewogICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBHZXRzIGFuIG9ic2VydmFibGUgb2YgdGhlIGN1cnJlbnQgdmFsdWUgZm9yIGEgY29uZmlnIGtleSwgYW5kIGFsbCB1cGRhdGVzIHRvIHRoYXQgY29uZmlnCiAgICAgKiBrZXkgaW4gdGhlIGZ1dHVyZS4gUHJvdmlkaW5nIGEgYGRlZmF1bHRPdmVycmlkZWAgYXJndW1lbnQgYmVoYXZlcyB0aGUgc2FtZSBhcyBpdCBkb2VzIGluICNnZXQoKQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldCQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldCQoa2V5LCBkZWZhdWx0T3ZlcnJpZGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBSeC5jb25jYXQoUnguZGVmZXIoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBSeC5vZihfdGhpcy5nZXQoa2V5LCBkZWZhdWx0T3ZlcnJpZGUpKTsKICAgICAgfSksIHRoaXMudXBkYXRlJC5waXBlKCgwLCBfb3BlcmF0b3JzLmZpbHRlcikoZnVuY3Rpb24gKHVwZGF0ZSkgewogICAgICAgIHJldHVybiB1cGRhdGUua2V5ID09PSBrZXk7CiAgICAgIH0pLCAoMCwgX29wZXJhdG9ycy5tYXApKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuZ2V0KGtleSwgZGVmYXVsdE92ZXJyaWRlKTsKICAgICAgfSkpKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgdmFsdWUgZm9yIGEgdWlTZXR0aW5nLiBJZiB0aGUgc2V0dGluZyBpcyBub3QgZGVmaW5lZCBpbiB0aGUgdWlTZXR0aW5nRGVmYXVsdHMKICAgICAqIGl0IHdpbGwgYmUgc3RvcmVkIGFzIGEgY3VzdG9tIHNldHRpbmcuIFRoZSBuZXcgdmFsdWUgd2lsbCBiZSBzeW5jaHJvbm91c2x5IGF2YWlsYWJsZSB2aWEKICAgICAqIHRoZSBgZ2V0KClgIG1ldGhvZCBhbmQgc2VudCB0byB0aGUgc2VydmVyIGluIHRoZSBiYWNrZ3JvdW5kLiBJZiB0aGUgcmVxdWVzdCB0byB0aGUKICAgICAqIHNlcnZlciBmYWlscyB0aGVuIGEgdG9hc3Qgbm90aWZpY2F0aW9uIHdpbGwgYmUgZGlzcGxheWVkIGFuZCB0aGUgc2V0dGluZyB3aWxsIGJlCiAgICAgKiByZXZlcnRlZCBpdCBpdHMgdmFsdWUgYmVmb3JlIGBzZXQoKWAgd2FzIGNhbGxlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zZXQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGtleSwgdmFsKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUoa2V5LCB2YWwpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNldChfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9zZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNldDsKICAgIH0oKQogICAgLyoqCiAgICAgKiBSZW1vdmVzIHRoZSB1c2VyLWRlZmluZWQgdmFsdWUgZm9yIGEgc2V0dGluZywgY2F1c2luZyBpdCB0byByZXZlcnQgdG8gdGhlIGRlZmF1bHQuIFRoaXMKICAgICAqIG1ldGhvZCBiZWhhdmVzIHRoZSBzYW1lIGFzIGNhbGxpbmcgYHNldChrZXksIG51bGwpYCwgaW5jbHVkaW5nIHRoZSBzeW5jaHJvbml6YXRpb24sIGN1c3RvbQogICAgICogc2V0dGluZywgYW5kIGVycm9yIGJlaGF2aW9yIG9mIHRoYXQgbWV0aG9kLgogICAgICovCgogIH0sIHsKICAgIGtleTogInJlbW92ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlbW92ZSA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGtleSkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUoa2V5LCBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mi5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcmVtb3ZlKF94MykgewogICAgICAgIHJldHVybiBfcmVtb3ZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZW1vdmU7CiAgICB9KCkKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBrZXkgaXMgYSAia25vd24iIHVpU2V0dGluZywgbWVhbmluZyBpdCBpcyBlaXRoZXIgZGVmaW5lZCBpbiB0aGUKICAgICAqIHVpU2V0dGluZ0RlZmF1bHRzIG9yIHdhcyBwcmV2aW91c2x5IGFkZGVkIGFzIGEgY3VzdG9tIHNldHRpbmcgdmlhIHRoZSBgc2V0KClgIG1ldGhvZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJpc0RlY2xhcmVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0RlY2xhcmVkKGtleSkgewogICAgICByZXR1cm4ga2V5IGluIHRoaXMuY2FjaGU7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc2V0dGluZyBoYXMgbm8gdXNlci1kZWZpbmVkIHZhbHVlIG9yIGlzIHVua25vd24KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJpc0RlZmF1bHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzRGVmYXVsdChrZXkpIHsKICAgICAgcmV0dXJuICF0aGlzLmlzRGVjbGFyZWQoa2V5KSB8fCB0aGlzLmNhY2hlW2tleV0udXNlclZhbHVlID09IG51bGw7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc2V0dGluZyBpcyBub3QgYSBwYXJ0IG9mIHRoZSB1aVNldHRpbmdEZWZhdWx0cywgYnV0IHdhcyBlaXRoZXIKICAgICAqIGFkZGVkIGRpcmVjdGx5IHZpYSBgc2V0KClgLCBvciBpcyBhbiB1bmtub3duIHNldHRpbmcgZm91bmQgaW4gdGhlIHVpU2V0dGluZ3Mgc2F2ZWQKICAgICAqIG9iamVjdAogICAgICovCgogIH0sIHsKICAgIGtleTogImlzQ3VzdG9tIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0N1c3RvbShrZXkpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNEZWNsYXJlZChrZXkpICYmICEoJ3ZhbHVlJyBpbiB0aGlzLmNhY2hlW2tleV0pOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYSBzZXR0aW5ncyB2YWx1ZSBpcyBvdmVycmlkZGVuIGJ5IHRoZSBzZXJ2ZXIuIFdoZW4gYSBzZXR0aW5nIGlzIG92ZXJyaWRkZW4KICAgICAqIGl0cyB2YWx1ZSBjYW4gbm90IGJlIGNoYW5nZWQgdmlhIGBzZXQoKWAgb3IgYHJlbW92ZSgpYC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJpc092ZXJyaWRkZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzT3ZlcnJpZGRlbihrZXkpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNEZWNsYXJlZChrZXkpICYmIEJvb2xlYW4odGhpcy5jYWNoZVtrZXldLmlzT3ZlcnJpZGRlbik7CiAgICB9CiAgICAvKioKICAgICAqIE92ZXJyaWRlcyB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgYSBzZXR0aW5nIGluIHRoaXMgc3BlY2lmaWMgYnJvd3NlciB0YWIuIElmIHRoZSBwYWdlCiAgICAgKiBpcyByZWxvYWRlZCB0aGUgZGVmYXVsdCBvdmVycmlkZSBpcyBsb3N0LgogICAgICovCgogIH0sIHsKICAgIGtleTogIm92ZXJyaWRlTG9jYWxEZWZhdWx0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvdmVycmlkZUxvY2FsRGVmYXVsdChrZXksIG5ld0RlZmF1bHQpIHsKICAgICAgLy8gY2FwdHVyZSB0aGUgcHJldmlvdXMgdmFsdWUKICAgICAgdmFyIHByZXZEZWZhdWx0ID0gdGhpcy5kZWZhdWx0c1trZXldID8gdGhpcy5kZWZhdWx0c1trZXldLnZhbHVlIDogdW5kZWZpbmVkOyAvLyB1cGRhdGUgZGVmYXVsdHMgbWFwCgogICAgICB0aGlzLmRlZmF1bHRzW2tleV0gPSBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmRlZmF1bHRzW2tleV0gfHwge30sIHsKICAgICAgICB2YWx1ZTogbmV3RGVmYXVsdAogICAgICB9KTsgLy8gdXBkYXRlIGNhY2hlZCBkZWZhdWx0IHZhbHVlCgogICAgICB0aGlzLmNhY2hlW2tleV0gPSBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmNhY2hlW2tleV0gfHwge30sIHsKICAgICAgICB2YWx1ZTogbmV3RGVmYXVsdAogICAgICB9KTsgLy8gZG9uJ3QgYnJvYWRjYXN0IGNoYW5nZSBpZiB1c2VyVmFsdWUgd2FzIGFscmVhZHkgb3ZlcnJpZGluZyB0aGUgZGVmYXVsdAoKICAgICAgaWYgKHRoaXMuY2FjaGVba2V5XS51c2VyVmFsdWUgPT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlJC5uZXh0KHsKICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgbmV3VmFsdWU6IG5ld0RlZmF1bHQsCiAgICAgICAgICBvbGRWYWx1ZTogcHJldkRlZmF1bHQKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNhdmVkJC5uZXh0KHsKICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgbmV3VmFsdWU6IG5ld0RlZmF1bHQsCiAgICAgICAgICBvbGRWYWx1ZTogcHJldkRlZmF1bHQKICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBub3RpZmllcyBzdWJzY3JpYmVycyBvZiBlYWNoIHVwZGF0ZSB0byB0aGUgdWlTZXR0aW5ncywKICAgICAqIGluY2x1ZGluZyB0aGUga2V5LCBuZXdWYWx1ZSwgYW5kIG9sZFZhbHVlIG9mIHRoZSBzZXR0aW5nIHRoYXQgY2hhbmdlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRVcGRhdGUkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVcGRhdGUkKCkgewogICAgICByZXR1cm4gdGhpcy51cGRhdGUkLmFzT2JzZXJ2YWJsZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBub3RpZmllcyBzdWJzY3JpYmVycyBvZiBlYWNoIHVwZGF0ZSB0byB0aGUgdWlTZXR0aW5ncywKICAgICAqIGluY2x1ZGluZyB0aGUga2V5LCBuZXdWYWx1ZSwgYW5kIG9sZFZhbHVlIG9mIHRoZSBzZXR0aW5nIHRoYXQgY2hhbmdlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRTYXZlZCQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNhdmVkJCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2F2ZWQkLmFzT2JzZXJ2YWJsZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBub3RpZmllcyBzdWJzY3JpYmVycyBvZiBlYWNoIGVycm9yIHdoaWxlIHRyeWluZyB0byB1cGRhdGUKICAgICAqIHRoZSBzZXR0aW5ncywgY29udGFpbmluZyB0aGUgYWN0dWFsIEVycm9yIGNsYXNzLgogICAgICovCgogIH0sIHsKICAgIGtleTogImdldFVwZGF0ZUVycm9ycyQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVwZGF0ZUVycm9ycyQoKSB7CiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUVycm9ycyQuYXNPYnNlcnZhYmxlKCk7CiAgICB9CiAgICAvKioKICAgICAqIFByZXBhcmVzIHRoZSB1aVNldHRpbmdzQ2xpZW50IHRvIGJlIGRpc2NhcmRlZCwgY29tcGxldGluZyBhbnkgdXBkYXRlJCBvYnNlcnZhYmxlcwogICAgICogdGhhdCBoYXZlIGJlZW4gY3JlYXRlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzdG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICB0aGlzLnVwZGF0ZSQuY29tcGxldGUoKTsKICAgICAgdGhpcy5zYXZlZCQuY29tcGxldGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhc3NlcnRVcGRhdGVBbGxvd2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhc3NlcnRVcGRhdGVBbGxvd2VkKGtleSkgewogICAgICBpZiAodGhpcy5pc092ZXJyaWRkZW4oa2V5KSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIHVwZGF0ZSBcIiIuY29uY2F0KGtleSwgIlwiIGJlY2F1c2UgaXRzIHZhbHVlIGlzIG92ZXJyaWRkZW4gYnkgdGhlIEtpYmFuYSBzZXJ2ZXIiKSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF91cGRhdGUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhrZXksIG5ld1ZhbCkgewogICAgICAgIHZhciBkZWNsYXJlZCwgZGVmYXVsdHMsIG9sZFZhbCwgdW5jaGFuZ2VkLCBpbml0aWFsVmFsLCBfcmVmLCBzZXR0aW5nczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0VXBkYXRlQWxsb3dlZChrZXkpOwogICAgICAgICAgICAgICAgZGVjbGFyZWQgPSB0aGlzLmlzRGVjbGFyZWQoa2V5KTsKICAgICAgICAgICAgICAgIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0czsKICAgICAgICAgICAgICAgIG9sZFZhbCA9IGRlY2xhcmVkID8gdGhpcy5jYWNoZVtrZXldLnVzZXJWYWx1ZSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHVuY2hhbmdlZCA9IG9sZFZhbCA9PT0gbmV3VmFsOwoKICAgICAgICAgICAgICAgIGlmICghdW5jaGFuZ2VkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBpbml0aWFsVmFsID0gZGVjbGFyZWQgPyB0aGlzLmdldChrZXkpIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgdGhpcy5zZXRMb2NhbGx5KGtleSwgbmV3VmFsKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcGkuYmF0Y2hTZXQoa2V5LCBuZXdWYWwpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX3JlZiA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgc2V0dGluZ3MgPSBfcmVmLnNldHRpbmdzOwogICAgICAgICAgICAgICAgdGhpcy5jYWNoZSA9ICgwLCBfbG9kYXNoLmRlZmF1bHRzRGVlcCkoe30sIGRlZmF1bHRzLCBzZXR0aW5ncyk7CiAgICAgICAgICAgICAgICB0aGlzLnNhdmVkJC5uZXh0KHsKICAgICAgICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBuZXdWYWwsCiAgICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBpbml0aWFsVmFsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oOSk7CiAgICAgICAgICAgICAgICB0aGlzLnNldExvY2FsbHkoa2V5LCBpbml0aWFsVmFsKTsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRXJyb3JzJC5uZXh0KF9jb250ZXh0My50MCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzLCBbWzksIDE5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGRhdGUoX3g0LCBfeDUpIHsKICAgICAgICByZXR1cm4gX3VwZGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBkYXRlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2V0TG9jYWxseSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TG9jYWxseShrZXksIG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMuYXNzZXJ0VXBkYXRlQWxsb3dlZChrZXkpOwoKICAgICAgaWYgKCF0aGlzLmlzRGVjbGFyZWQoa2V5KSkgewogICAgICAgIHRoaXMuY2FjaGVba2V5XSA9IHt9OwogICAgICB9CgogICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLmdldChrZXkpOwoKICAgICAgaWYgKG5ld1ZhbHVlID09PSBudWxsKSB7CiAgICAgICAgZGVsZXRlIHRoaXMuY2FjaGVba2V5XS51c2VyVmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLmNhY2hlW2tleV0udHlwZTsKCiAgICAgICAgaWYgKHR5cGUgPT09ICdqc29uJyAmJiB0eXBlb2YgbmV3VmFsdWUgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICB0aGlzLmNhY2hlW2tleV0udXNlclZhbHVlID0gSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNhY2hlW2tleV0udXNlclZhbHVlID0gbmV3VmFsdWU7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZSQubmV4dCh7CiAgICAgICAga2V5OiBrZXksCiAgICAgICAgbmV3VmFsdWU6IG5ld1ZhbHVlLAogICAgICAgIG9sZFZhbHVlOiBvbGRWYWx1ZQogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBVaVNldHRpbmdzQ2xpZW50Owp9KCk7CgpleHBvcnRzLlVpU2V0dGluZ3NDbGllbnQgPSBVaVNldHRpbmdzQ2xpZW50Ow=="},null]}