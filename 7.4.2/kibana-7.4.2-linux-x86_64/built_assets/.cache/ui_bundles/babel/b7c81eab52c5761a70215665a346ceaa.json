{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/dashboard/dashboard_state_manager.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/dashboard/dashboard_state_manager.js","mtime":1572296410060},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkRhc2hib2FyZFN0YXRlTWFuYWdlciA9IHZvaWQgMDsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfc3RhdGVfbW9uaXRvcl9mYWN0b3J5ID0gcmVxdWlyZSgidWkvc3RhdGVfbWFuYWdlbWVudC9zdGF0ZV9tb25pdG9yX2ZhY3RvcnkiKTsKCnZhciBfbWlncmF0ZV9sZWdhY3lfcXVlcnkgPSByZXF1aXJlKCJ1aS91dGlscy9taWdyYXRlX2xlZ2FjeV9xdWVyeSIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi9lbWJlZGRhYmxlX2FwaS9wdWJsaWMvbnBfcmVhZHkvcHVibGljIik7Cgp2YXIgX2xpYiA9IHJlcXVpcmUoIi4vbGliIik7Cgp2YXIgX2VtYmVkZGFibGVfc2F2ZWRfb2JqZWN0X2NvbnZlcnRlcnMgPSByZXF1aXJlKCIuL2xpYi9lbWJlZGRhYmxlX3NhdmVkX29iamVjdF9jb252ZXJ0ZXJzIik7Cgp2YXIgX2ZpbHRlcl91dGlscyA9IHJlcXVpcmUoIi4vbGliL2ZpbHRlcl91dGlscyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQovKioKICogRGFzaGJvYXJkIHN0YXRlIG1hbmFnZXIgaGFuZGxlcyBjb25uZWN0aW5nIGFuZ3VsYXIgYW5kIHJlZHV4IHN0YXRlIGJldHdlZW4gdGhlIGFuZ3VsYXIgYW5kIHJlYWN0IHBvcnRpb25zIG9mIHRoZQogKiBhcHAuIFRoZXJlIGFyZSB0d28gInNvdXJjZXMgb2YgdHJ1dGgiIHRoYXQgbmVlZCB0byBzdGF5IGluIHN5bmMgLSBBcHBTdGF0ZSAoYWthIHRoZSBgX2FgIHBvcnRpb24gb2YgdGhlIHVybCkgYW5kCiAqIHRoZSBTdG9yZS4gVGhleSBhcmVuJ3QgY29tcGxldGUgZHVwbGljYXRlcyBvZiBlYWNoIG90aGVyIGFzIEFwcFN0YXRlIGhhcyBzdGF0ZSB0aGF0IHRoZSBTdG9yZSBkb2Vzbid0LCBhbmQgdmljZQogKiB2ZXJzYS4gVGhleSBzaG91bGQgYmUgYXMgZGVjb3VwbGVkIGFzIHBvc3NpYmxlIHNvIHVwZGF0aW5nIHRoZSBzdG9yZSB3b24ndCBhZmZlY3QgYndjIG9mIHVybHMuCiAqLwoKCnZhciBEYXNoYm9hcmRTdGF0ZU1hbmFnZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICAvKioKICAgKgogICAqIEBwYXJhbSBzYXZlZERhc2hib2FyZAogICAqIEBwYXJhbSBBcHBTdGF0ZSBUaGUgQXBwU3RhdGUgY2xhc3MgdG8gdXNlIHdoZW4gaW5zdGFudGlhdGluZyBhIG5ldyBBcHBTdGF0ZSBpbnN0YW5jZS4KICAgKiBAcGFyYW0gaGlkZVdyaXRlQ29udHJvbHMgdHJ1ZSBpZiB3cml0ZSBjb250cm9scyBzaG91bGQgYmUgaGlkZGVuLgogICAqLwogIGZ1bmN0aW9uIERhc2hib2FyZFN0YXRlTWFuYWdlcihfcmVmKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBzYXZlZERhc2hib2FyZCA9IF9yZWYuc2F2ZWREYXNoYm9hcmQsCiAgICAgICAgQXBwU3RhdGVDbGFzcyA9IF9yZWYuQXBwU3RhdGVDbGFzcywKICAgICAgICBoaWRlV3JpdGVDb250cm9scyA9IF9yZWYuaGlkZVdyaXRlQ29udHJvbHM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhc2hib2FyZFN0YXRlTWFuYWdlcik7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzYXZlZERhc2hib2FyZCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhcHBTdGF0ZSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJsYXN0U2F2ZWREYXNoYm9hcmRGaWx0ZXJzIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInN0YXRlRGVmYXVsdHMiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaGlkZVdyaXRlQ29udHJvbHMiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaXNEaXJ0eSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjaGFuZ2VMaXN0ZW5lcnMiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic3RhdGVNb25pdG9yIiwgdm9pZCAwKTsKCiAgICB0aGlzLnNhdmVkRGFzaGJvYXJkID0gc2F2ZWREYXNoYm9hcmQ7CiAgICB0aGlzLmhpZGVXcml0ZUNvbnRyb2xzID0gaGlkZVdyaXRlQ29udHJvbHM7CiAgICB0aGlzLnN0YXRlRGVmYXVsdHMgPSAoMCwgX2xpYi5nZXRBcHBTdGF0ZURlZmF1bHRzKSh0aGlzLnNhdmVkRGFzaGJvYXJkLCB0aGlzLmhpZGVXcml0ZUNvbnRyb2xzKTsKICAgIHRoaXMuYXBwU3RhdGUgPSBuZXcgQXBwU3RhdGVDbGFzcyh0aGlzLnN0YXRlRGVmYXVsdHMpOyAvLyBJbml0aWFsaXppbmcgYXBwU3RhdGUgZG9lcyB0d28gdGhpbmdzIC0gZmlyc3QgaXQgdHJhbnNsYXRlcyB0aGUgZGVmYXVsdHMgaW50byBBcHBTdGF0ZSwgc2Vjb25kIGl0IHVwZGF0ZXMKICAgIC8vIGFwcFN0YXRlIGJhc2VkIG9uIHRoZSBVUkwgKHRoZSB1cmwgdHJ1bXBzIHRoZSBkZWZhdWx0cykuIFRoaXMgbWVhbnMgaWYgd2UgdXBkYXRlIHRoZSBzdGF0ZSBmb3JtYXQgYXQgYWxsIGFuZAogICAgLy8gd2FudCB0byBoYW5kbGUgQldDLCB3ZSBtdXN0IG5vdCBvbmx5IG1pZ3JhdGUgdGhlIGRhdGEgc3RvcmVkIHdpdGggc2F2ZWQgRGFzaGJvYXJkLCBidXQgYWxzbyBhbnkgb2xkIHN0YXRlIGluIHRoZQogICAgLy8gdXJsLgoKICAgICgwLCBfbGliLm1pZ3JhdGVBcHBTdGF0ZSkodGhpcy5hcHBTdGF0ZSk7CiAgICB0aGlzLmlzRGlydHkgPSBmYWxzZTsgLy8gV2UgY2FuJ3QgY29tcGFyZSB0aGUgZmlsdGVycyBzdG9yZWQgb24gdGhpcy5hcHBTdGF0ZSB0byB0aGlzLnNhdmVkRGFzaGJvYXJkIGJlY2F1c2UgaW4gb3JkZXIgdG8gYXBwbHkKICAgIC8vIHRoZSBmaWx0ZXJzIHRvIHRoZSB2aXN1YWxpemF0aW9ucywgd2UgbmVlZCB0byBzYXZlIGl0IG9uIHRoZSBkYXNoYm9hcmQuIFdlIGtlZXAgdHJhY2sgb2YgdGhlIG9yaWdpbmFsCiAgICAvLyBmaWx0ZXIgc3RhdGUgaW4gb3JkZXIgdG8gbGV0IHRoZSB1c2VyIGtub3cgaWYgdGhlaXIgZmlsdGVycyBjaGFuZ2VkIGFuZCBwcm92aWRlIHRoaXMgc3BlY2lmaWMgaW5mb3JtYXRpb24KICAgIC8vIGluIHRoZSAnbG9zZSBjaGFuZ2VzJyB3YXJuaW5nIG1lc3NhZ2UuCgogICAgdGhpcy5sYXN0U2F2ZWREYXNoYm9hcmRGaWx0ZXJzID0gdGhpcy5nZXRGaWx0ZXJTdGF0ZSgpOwogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgc3RhdGUgbW9uaXRvciBhbmQgc2F2ZXMgaXQgdG8gdGhpcy5zdGF0ZU1vbml0b3IuIFVzZWQgdG8gdHJhY2sgdW5zYXZlZCBjaGFuZ2VzIG1hZGUgdG8gYXBwU3RhdGUuCiAgICAgKi8KCiAgICB0aGlzLnN0YXRlTW9uaXRvciA9IF9zdGF0ZV9tb25pdG9yX2ZhY3Rvcnkuc3RhdGVNb25pdG9yRmFjdG9yeS5jcmVhdGUodGhpcy5hcHBTdGF0ZSwgdGhpcy5zdGF0ZURlZmF1bHRzKTsKICAgIHRoaXMuc3RhdGVNb25pdG9yLmlnbm9yZVByb3BzKCd2aWV3TW9kZScpOyAvLyBGaWx0ZXJzIG5lZWQgdG8gYmUgY29tcGFyZWQgbWFudWFsbHkgYmVjYXVzZSB0aGV5IHNvbWV0aW1lcyBoYXZlIGEgJCRoYXNoa2V5IHN0b3JlZCBvbiB0aGUgb2JqZWN0LgoKICAgIHRoaXMuc3RhdGVNb25pdG9yLmlnbm9yZVByb3BzKCdmaWx0ZXJzJyk7IC8vIFF1ZXJ5IG5lZWRzIHRvIGJlIGNvbXBhcmVkIG1hbnVhbGx5IGJlY2F1c2Ugc2F2ZWQgbGVnYWN5IHF1ZXJpZXMgZ2V0IG1pZ3JhdGVkIGluIGFwcCBzdGF0ZSBhdXRvbWF0aWNhbGx5CgogICAgdGhpcy5zdGF0ZU1vbml0b3IuaWdub3JlUHJvcHMoJ3F1ZXJ5Jyk7CiAgICB0aGlzLnN0YXRlTW9uaXRvci5vbkNoYW5nZShmdW5jdGlvbiAoc3RhdHVzKSB7CiAgICAgIF90aGlzLmlzRGlydHkgPSBzdGF0dXMuZGlydHk7CiAgICB9KTsKICAgIHRoaXMuY2hhbmdlTGlzdGVuZXJzID0gW107CiAgICB0aGlzLnN0YXRlTW9uaXRvci5vbkNoYW5nZShmdW5jdGlvbiAoc3RhdHVzKSB7CiAgICAgIF90aGlzLmNoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgewogICAgICAgIHJldHVybiBsaXN0ZW5lcihzdGF0dXMpOwogICAgICB9KTsKICAgIH0pOwogIH0KCiAgX2NyZWF0ZUNsYXNzKERhc2hib2FyZFN0YXRlTWFuYWdlciwgW3sKICAgIGtleTogInJlZ2lzdGVyQ2hhbmdlTGlzdGVuZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyQ2hhbmdlTGlzdGVuZXIoY2FsbGJhY2spIHsKICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlRGFzaGJvYXJkQ29udGFpbmVyQ2hhbmdlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRGFzaGJvYXJkQ29udGFpbmVyQ2hhbmdlcyhkYXNoYm9hcmRDb250YWluZXIpIHsKICAgICAgdmFyIGRpcnR5ID0gZmFsc2U7CiAgICAgIHZhciBzYXZlZERhc2hib2FyZFBhbmVsTWFwID0ge307CiAgICAgIHZhciBpbnB1dCA9IGRhc2hib2FyZENvbnRhaW5lci5nZXRJbnB1dCgpOwogICAgICB0aGlzLmdldFBhbmVscygpLmZvckVhY2goZnVuY3Rpb24gKHNhdmVkRGFzaGJvYXJkUGFuZWwpIHsKICAgICAgICBpZiAoaW5wdXQucGFuZWxzW3NhdmVkRGFzaGJvYXJkUGFuZWwucGFuZWxJbmRleF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgc2F2ZWREYXNoYm9hcmRQYW5lbE1hcFtzYXZlZERhc2hib2FyZFBhbmVsLnBhbmVsSW5kZXhdID0gc2F2ZWREYXNoYm9hcmRQYW5lbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gQSBwYW5lbCB3YXMgZGVsZXRlZC4KICAgICAgICAgIGRpcnR5ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB2YXIgY29udmVydGVkUGFuZWxTdGF0ZU1hcCA9IHt9OwogICAgICBPYmplY3QudmFsdWVzKGlucHV0LnBhbmVscykuZm9yRWFjaChmdW5jdGlvbiAocGFuZWxTdGF0ZSkgewogICAgICAgIGlmIChzYXZlZERhc2hib2FyZFBhbmVsTWFwW3BhbmVsU3RhdGUuZXhwbGljaXRJbnB1dC5pZF0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgZGlydHkgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29udmVydGVkUGFuZWxTdGF0ZU1hcFtwYW5lbFN0YXRlLmV4cGxpY2l0SW5wdXQuaWRdID0gKDAsIF9lbWJlZGRhYmxlX3NhdmVkX29iamVjdF9jb252ZXJ0ZXJzLmNvbnZlcnRQYW5lbFN0YXRlVG9TYXZlZERhc2hib2FyZFBhbmVsKShwYW5lbFN0YXRlKTsKCiAgICAgICAgaWYgKCFfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChjb252ZXJ0ZWRQYW5lbFN0YXRlTWFwW3BhbmVsU3RhdGUuZXhwbGljaXRJbnB1dC5pZF0sIHNhdmVkRGFzaGJvYXJkUGFuZWxNYXBbcGFuZWxTdGF0ZS5leHBsaWNpdElucHV0LmlkXSkpIHsKICAgICAgICAgIC8vIEEgcGFuZWwgd2FzIGNoYW5nZWQKICAgICAgICAgIGRpcnR5ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKGRpcnR5KSB7CiAgICAgICAgdGhpcy5hcHBTdGF0ZS5wYW5lbHMgPSBPYmplY3QudmFsdWVzKGNvbnZlcnRlZFBhbmVsU3RhdGVNYXApOwogICAgICB9CgogICAgICBpZiAoaW5wdXQuaXNGdWxsU2NyZWVuTW9kZSAhPT0gdGhpcy5nZXRGdWxsU2NyZWVuTW9kZSgpKSB7CiAgICAgICAgdGhpcy5zZXRGdWxsU2NyZWVuTW9kZShpbnB1dC5pc0Z1bGxTY3JlZW5Nb2RlKTsKICAgICAgfQoKICAgICAgaWYgKCFfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChpbnB1dC5xdWVyeSwgdGhpcy5nZXRRdWVyeSgpKSkgewogICAgICAgIHRoaXMuc2V0UXVlcnkoaW5wdXQucXVlcnkpOwogICAgICB9CgogICAgICB0aGlzLmNoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgewogICAgICAgIHJldHVybiBsaXN0ZW5lcih7CiAgICAgICAgICBkaXJ0eTogZGlydHkKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0RnVsbFNjcmVlbk1vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZ1bGxTY3JlZW5Nb2RlKCkgewogICAgICByZXR1cm4gdGhpcy5hcHBTdGF0ZS5mdWxsU2NyZWVuTW9kZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRGdWxsU2NyZWVuTW9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RnVsbFNjcmVlbk1vZGUoZnVsbFNjcmVlbk1vZGUpIHsKICAgICAgdGhpcy5hcHBTdGF0ZS5mdWxsU2NyZWVuTW9kZSA9IGZ1bGxTY3JlZW5Nb2RlOwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXNldHMgdGhlIHN0YXRlIGJhY2sgdG8gdGhlIGxhc3Qgc2F2ZWQgdmVyc2lvbiBvZiB0aGUgZGFzaGJvYXJkLgogICAgICovCgogIH0sIHsKICAgIGtleTogInJlc2V0U3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0U3RhdGUoKSB7CiAgICAgIC8vIEluIG9yZGVyIHRvIHNob3cgdGhlIGNvcnJlY3Qgd2FybmluZywgd2UgaGF2ZSB0byBzdG9yZSB0aGUgdW5zYXZlZAogICAgICAvLyB0aXRsZSBvbiB0aGUgZGFzaGJvYXJkIG9iamVjdC4gV2Ugc2hvdWxkIGZpeCB0aGlzIGF0IHNvbWUgcG9pbnQsIGJ1dCB0aGlzIGlzIGhvdyBhbGwgdGhlIG90aGVyIG9iamVjdAogICAgICAvLyBzYXZlIHBhbmVscyB3b3JrIGF0IHRoZSBtb21lbnQuCiAgICAgIHRoaXMuc2F2ZWREYXNoYm9hcmQudGl0bGUgPSB0aGlzLnNhdmVkRGFzaGJvYXJkLmxhc3RTYXZlZFRpdGxlOyAvLyBhcHBTdGF0ZS5yZXNldCB1c2VzIHRoZSBpbnRlcm5hbCBkZWZhdWx0cyB0byByZXNldCB0aGUgc3RhdGUsIGJ1dCBzb21lIG9mIHRoZSBkZWZhdWx0IHNldHRpbmdzIChlLmcuIHRoZSBwYW5lbHMKICAgICAgLy8gYXJyYXkpIHBvaW50IHRvIHRoZSBzYW1lIG9iamVjdCB0aGF0IGlzIHN0b3JlZCBvbiBhcHBTdGF0ZSBhbmQgaXMgZ2V0dGluZyBtb2RpZmllZC4KICAgICAgLy8gVGhlIHJpZ2h0IHdheSB0byBmaXggdGhpcyBtaWdodCBiZSB0byBlbnN1cmUgdGhlIGRlZmF1bHRzIG9iamVjdCBzdG9yZWQgb24gc3RhdGUgaXMgYSBkZWVwCiAgICAgIC8vIGNsb25lLCBidXQgZ2l2ZW4gaG93IG11Y2ggY29kZSB1c2VzIHRoZSBzdGF0ZSBvYmplY3QsIEkgZGV0ZXJtaW5lZCB0aGF0IHRvIGJlIHRvbyByaXNreSBvZiBhIGNoYW5nZSBmb3IKICAgICAgLy8gbm93LiAgVE9ETzogcmV2aXNpdCB0aGlzIQoKICAgICAgdGhpcy5zdGF0ZURlZmF1bHRzID0gKDAsIF9saWIuZ2V0QXBwU3RhdGVEZWZhdWx0cykodGhpcy5zYXZlZERhc2hib2FyZCwgdGhpcy5oaWRlV3JpdGVDb250cm9scyk7IC8vIFRoZSBvcmlnaW5hbCBxdWVyeSB3b24ndCBiZSByZXN0b3JlZCBieSB0aGUgYWJvdmUgYmVjYXVzZSB0aGUgcXVlcnkgb24gdGhpcy5zYXZlZERhc2hib2FyZCBpcyBhcHBsaWVkCiAgICAgIC8vIGluIHBsYWNlIGluIG9yZGVyIGZvciBpdCB0byBhZmZlY3QgdGhlIHZpc3VhbGl6YXRpb25zLgoKICAgICAgdGhpcy5zdGF0ZURlZmF1bHRzLnF1ZXJ5ID0gdGhpcy5sYXN0U2F2ZWREYXNoYm9hcmRGaWx0ZXJzLnF1ZXJ5OyAvLyBOZWVkIHRvIG1ha2UgYSBjb3B5IHRvIGVuc3VyZSB0aGV5IGFyZSBub3Qgb3ZlcndyaXR0ZW4uCgogICAgICB0aGlzLnN0YXRlRGVmYXVsdHMuZmlsdGVycyA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmdldExhc3RTYXZlZEZpbHRlckJhcnMoKSk7CiAgICAgIHRoaXMuaXNEaXJ0eSA9IGZhbHNlOwogICAgICB0aGlzLmFwcFN0YXRlLnNldERlZmF1bHRzKHRoaXMuc3RhdGVEZWZhdWx0cyk7CiAgICAgIHRoaXMuYXBwU3RhdGUucmVzZXQoKTsKICAgICAgdGhpcy5zdGF0ZU1vbml0b3Iuc2V0SW5pdGlhbFN0YXRlKHRoaXMuYXBwU3RhdGUudG9KU09OKCkpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCB3aGljaCBjb250YWlucyB0aGUgY3VycmVudCBmaWx0ZXIgc3RhdGUgb2YgdGhpcy5zYXZlZERhc2hib2FyZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRGaWx0ZXJTdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmlsdGVyU3RhdGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGltZVRvOiB0aGlzLnNhdmVkRGFzaGJvYXJkLnRpbWVUbywKICAgICAgICB0aW1lRnJvbTogdGhpcy5zYXZlZERhc2hib2FyZC50aW1lRnJvbSwKICAgICAgICBmaWx0ZXJCYXJzOiB0aGlzLnNhdmVkRGFzaGJvYXJkLmdldEZpbHRlcnMoKSwKICAgICAgICBxdWVyeTogdGhpcy5zYXZlZERhc2hib2FyZC5nZXRRdWVyeSgpCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VGl0bGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpdGxlKCkgewogICAgICByZXR1cm4gdGhpcy5hcHBTdGF0ZS50aXRsZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXREZXNjcmlwdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmFwcFN0YXRlLmRlc2NyaXB0aW9uOwogICAgfQogIH0sIHsKICAgIGtleTogInNldERlc2NyaXB0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREZXNjcmlwdGlvbihkZXNjcmlwdGlvbikgewogICAgICB0aGlzLmFwcFN0YXRlLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247CiAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0VGl0bGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRpdGxlKHRpdGxlKSB7CiAgICAgIHRoaXMuYXBwU3RhdGUudGl0bGUgPSB0aXRsZTsKICAgICAgdGhpcy5zYXZlZERhc2hib2FyZC50aXRsZSA9IHRpdGxlOwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEFwcFN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBcHBTdGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwU3RhdGU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UXVlcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFF1ZXJ5KCkgewogICAgICByZXR1cm4gKDAsIF9taWdyYXRlX2xlZ2FjeV9xdWVyeS5taWdyYXRlTGVnYWN5UXVlcnkpKHRoaXMuYXBwU3RhdGUucXVlcnkpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFNhdmVkUXVlcnlJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2F2ZWRRdWVyeUlkKCkgewogICAgICByZXR1cm4gdGhpcy5hcHBTdGF0ZS5zYXZlZFF1ZXJ5OwogICAgfQogIH0sIHsKICAgIGtleTogInNldFNhdmVkUXVlcnlJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U2F2ZWRRdWVyeUlkKGlkKSB7CiAgICAgIHRoaXMuYXBwU3RhdGUuc2F2ZWRRdWVyeSA9IGlkOwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFVzZU1hcmdpbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVzZU1hcmdpbnMoKSB7CiAgICAgIC8vIEV4aXN0aW5nIGRhc2hib2FyZHMgdGhhdCBkb24ndCBkZWZpbmUgdGhpcyBzaG91bGQgZGVmYXVsdCB0byBmYWxzZS4KICAgICAgcmV0dXJuIHRoaXMuYXBwU3RhdGUub3B0aW9ucy51c2VNYXJnaW5zID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IHRoaXMuYXBwU3RhdGUub3B0aW9ucy51c2VNYXJnaW5zOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFVzZU1hcmdpbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFVzZU1hcmdpbnModXNlTWFyZ2lucykgewogICAgICB0aGlzLmFwcFN0YXRlLm9wdGlvbnMudXNlTWFyZ2lucyA9IHVzZU1hcmdpbnM7CiAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SGlkZVBhbmVsVGl0bGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRIaWRlUGFuZWxUaXRsZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLmFwcFN0YXRlLm9wdGlvbnMuaGlkZVBhbmVsVGl0bGVzOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEhpZGVQYW5lbFRpdGxlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SGlkZVBhbmVsVGl0bGVzKGhpZGVQYW5lbFRpdGxlcykgewogICAgICB0aGlzLmFwcFN0YXRlLm9wdGlvbnMuaGlkZVBhbmVsVGl0bGVzID0gaGlkZVBhbmVsVGl0bGVzOwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFRpbWVSZXN0b3JlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaW1lUmVzdG9yZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwU3RhdGUudGltZVJlc3RvcmU7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0VGltZVJlc3RvcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRpbWVSZXN0b3JlKHRpbWVSZXN0b3JlKSB7CiAgICAgIHRoaXMuYXBwU3RhdGUudGltZVJlc3RvcmUgPSB0aW1lUmVzdG9yZTsKICAgICAgdGhpcy5zYXZlU3RhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJc1RpbWVTYXZlZFdpdGhEYXNoYm9hcmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldElzVGltZVNhdmVkV2l0aERhc2hib2FyZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2F2ZWREYXNoYm9hcmQudGltZVJlc3RvcmU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0TGFzdFNhdmVkRmlsdGVyQmFycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TGFzdFNhdmVkRmlsdGVyQmFycygpIHsKICAgICAgcmV0dXJuIHRoaXMubGFzdFNhdmVkRGFzaGJvYXJkRmlsdGVycy5maWx0ZXJCYXJzOwogICAgfQogIH0sIHsKICAgIGtleTogImdldExhc3RTYXZlZFF1ZXJ5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMYXN0U2F2ZWRRdWVyeSgpIHsKICAgICAgcmV0dXJuIHRoaXMubGFzdFNhdmVkRGFzaGJvYXJkRmlsdGVycy5xdWVyeTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgcXVlcnkgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkYXNoYm9hcmQgd2FzIHNhdmVkLCBvciBpZiBpdCdzIGEKICAgICAqIG5ldyBkYXNoYm9hcmQsIGlmIHRoZSBxdWVyeSBkaWZmZXJzIGZyb20gdGhlIGRlZmF1bHQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0UXVlcnlDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRRdWVyeUNoYW5nZWQoKSB7CiAgICAgIHZhciBjdXJyZW50UXVlcnkgPSB0aGlzLmFwcFN0YXRlLnF1ZXJ5OwogICAgICB2YXIgbGFzdFNhdmVkUXVlcnkgPSB0aGlzLmdldExhc3RTYXZlZFF1ZXJ5KCk7CiAgICAgIHZhciBxdWVyeSA9ICgwLCBfbWlncmF0ZV9sZWdhY3lfcXVlcnkubWlncmF0ZUxlZ2FjeVF1ZXJ5KShjdXJyZW50UXVlcnkpOwoKICAgICAgdmFyIGlzTGVnYWN5U3RyaW5nUXVlcnkgPSBfbG9kYXNoLmRlZmF1bHQuaXNTdHJpbmcobGFzdFNhdmVkUXVlcnkpICYmIF9sb2Rhc2guZGVmYXVsdC5pc1BsYWluT2JqZWN0KGN1cnJlbnRRdWVyeSkgJiYgX2xvZGFzaC5kZWZhdWx0LmhhcyhjdXJyZW50UXVlcnksICdxdWVyeScpOwoKICAgICAgaWYgKGlzTGVnYWN5U3RyaW5nUXVlcnkpIHsKICAgICAgICByZXR1cm4gbGFzdFNhdmVkUXVlcnkgIT09IHF1ZXJ5LnF1ZXJ5OwogICAgICB9CgogICAgICByZXR1cm4gIV9sb2Rhc2guZGVmYXVsdC5pc0VxdWFsKGN1cnJlbnRRdWVyeSwgbGFzdFNhdmVkUXVlcnkpOwogICAgfQogICAgLyoqCiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBmaWx0ZXIgYmFyIHN0YXRlIGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRhc2hib2FyZCB3YXMgc2F2ZWQsCiAgICAgKiBvciBpZiBpdCdzIGEgbmV3IGRhc2hib2FyZCwgaWYgdGhlIHF1ZXJ5IGRpZmZlcnMgZnJvbSB0aGUgZGVmYXVsdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRGaWx0ZXJCYXJDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJCYXJDaGFuZ2VkKCkgewogICAgICByZXR1cm4gIV9sb2Rhc2guZGVmYXVsdC5pc0VxdWFsKF9maWx0ZXJfdXRpbHMuRmlsdGVyVXRpbHMuY2xlYW5GaWx0ZXJzRm9yQ29tcGFyaXNvbih0aGlzLmFwcFN0YXRlLmZpbHRlcnMpLCBfZmlsdGVyX3V0aWxzLkZpbHRlclV0aWxzLmNsZWFuRmlsdGVyc0ZvckNvbXBhcmlzb24odGhpcy5nZXRMYXN0U2F2ZWRGaWx0ZXJCYXJzKCkpKTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIHRpbWVGaWx0ZXIKICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHRpbWUgc3RhdGUgaGFzIGNoYW5nZWQgc2luY2UgdGhlIHRpbWUgc2F2ZWQgd2l0aCB0aGUgZGFzaGJvYXJkLgogICAgICovCgogIH0sIHsKICAgIGtleTogImdldFRpbWVDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaW1lQ2hhbmdlZCh0aW1lRmlsdGVyKSB7CiAgICAgIHJldHVybiAhX2ZpbHRlcl91dGlscy5GaWx0ZXJVdGlscy5hcmVUaW1lc0VxdWFsKHRoaXMubGFzdFNhdmVkRGFzaGJvYXJkRmlsdGVycy50aW1lRnJvbSwgdGltZUZpbHRlci5nZXRUaW1lKCkuZnJvbSkgfHwgIV9maWx0ZXJfdXRpbHMuRmlsdGVyVXRpbHMuYXJlVGltZXNFcXVhbCh0aGlzLmxhc3RTYXZlZERhc2hib2FyZEZpbHRlcnMudGltZVRvLCB0aW1lRmlsdGVyLmdldFRpbWUoKS50byk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Vmlld01vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZpZXdNb2RlKCkgewogICAgICByZXR1cm4gdGhpcy5oaWRlV3JpdGVDb250cm9scyA/IF9wdWJsaWMuVmlld01vZGUuVklFVyA6IHRoaXMuYXBwU3RhdGUudmlld01vZGU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SXNWaWV3TW9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXNWaWV3TW9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0Vmlld01vZGUoKSA9PT0gX3B1YmxpYy5WaWV3TW9kZS5WSUVXOwogICAgfQogIH0sIHsKICAgIGtleTogImdldElzRWRpdE1vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldElzRWRpdE1vZGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldFZpZXdNb2RlKCkgPT09IF9wdWJsaWMuVmlld01vZGUuRURJVDsKICAgIH0KICAgIC8qKgogICAgICoKICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGRhc2hib2FyZCBoYXMgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdCBzYXZlIChvciwgaXMgbmV3KS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRJc0RpcnR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJc0RpcnR5KHRpbWVGaWx0ZXIpIHsKICAgICAgLy8gRmlsdGVyIGJhciBjb21wYXJpc29uIGlzIGRvbmUgbWFudWFsbHkgKHNlZSBjbGVhbkZpbHRlcnNGb3JDb21wYXJpc29uIGZvciB0aGUgcmVhc29uKSBhbmQgdGltZSBwaWNrZXIKICAgICAgLy8gY2hhbmdlcyBhcmUgbm90IHRyYWNrZWQgYnkgdGhlIHN0YXRlIG1vbml0b3IuCiAgICAgIHZhciBoYXNUaW1lRmlsdGVyQ2hhbmdlZCA9IHRpbWVGaWx0ZXIgPyB0aGlzLmdldEZpbHRlcnNDaGFuZ2VkKHRpbWVGaWx0ZXIpIDogZmFsc2U7CiAgICAgIHJldHVybiB0aGlzLmdldElzRWRpdE1vZGUoKSAmJiAodGhpcy5pc0RpcnR5IHx8IGhhc1RpbWVGaWx0ZXJDaGFuZ2VkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRQYW5lbHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhbmVscygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwU3RhdGUucGFuZWxzOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVBhbmVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVQYW5lbChwYW5lbEluZGV4LCBwYW5lbEF0dHJpYnV0ZXMpIHsKICAgICAgdmFyIGZvdW5kUGFuZWwgPSB0aGlzLmdldFBhbmVscygpLmZpbmQoZnVuY3Rpb24gKHBhbmVsKSB7CiAgICAgICAgcmV0dXJuIHBhbmVsLnBhbmVsSW5kZXggPT09IHBhbmVsSW5kZXg7CiAgICAgIH0pOwogICAgICBPYmplY3QuYXNzaWduKGZvdW5kUGFuZWwsIHBhbmVsQXR0cmlidXRlcyk7CiAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7CiAgICAgIHJldHVybiBmb3VuZFBhbmVsOwogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gdGltZUZpbHRlcgogICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgdXNlciBmcmllbmRseSBzdHJpbmdzIGluZGljYXRpbmcgdGhlIGZpbHRlciB0eXBlcyB0aGF0IGhhdmUgY2hhbmdlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRDaGFuZ2VkRmlsdGVyVHlwZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENoYW5nZWRGaWx0ZXJUeXBlcyh0aW1lRmlsdGVyKSB7CiAgICAgIHZhciBjaGFuZ2VkRmlsdGVycyA9IFtdOwoKICAgICAgaWYgKHRoaXMuZ2V0RmlsdGVyQmFyQ2hhbmdlZCgpKSB7CiAgICAgICAgY2hhbmdlZEZpbHRlcnMucHVzaCgnZmlsdGVyJyk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmdldFF1ZXJ5Q2hhbmdlZCgpKSB7CiAgICAgICAgY2hhbmdlZEZpbHRlcnMucHVzaCgncXVlcnknKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2F2ZWREYXNoYm9hcmQudGltZVJlc3RvcmUgJiYgdGhpcy5nZXRUaW1lQ2hhbmdlZCh0aW1lRmlsdGVyKSkgewogICAgICAgIGNoYW5nZWRGaWx0ZXJzLnB1c2goJ3RpbWUgcmFuZ2UnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNoYW5nZWRGaWx0ZXJzOwogICAgfQogICAgLyoqCiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIGZpbHRlcnMgKHF1ZXJ5LCBmaWx0ZXIgYmFyIGZpbHRlcnMsIGFuZCB0aW1lIHBpY2tlciBpZiB0aW1lIGlzIHN0b3JlZAogICAgICogd2l0aCB0aGUgZGFzaGJvYXJkKSBoYXZlIGNoYW5nZWQgc2luY2UgdGhlIGxhc3Qgc2F2ZWQgc3RhdGUgKG9yIGlmIHRoZSBkYXNoYm9hcmQgaGFzbid0IGJlZW4gc2F2ZWQsCiAgICAgKiB0aGUgZGVmYXVsdCBzdGF0ZSkuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0RmlsdGVyc0NoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZpbHRlcnNDaGFuZ2VkKHRpbWVGaWx0ZXIpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2hhbmdlZEZpbHRlclR5cGVzKHRpbWVGaWx0ZXIpLmxlbmd0aCA+IDA7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgdGltZUZpbHRlciB0byBtYXRjaCB0aGUgdGltZSBzYXZlZCB3aXRoIHRoZSBkYXNoYm9hcmQuCiAgICAgKiBAcGFyYW0gdGltZUZpbHRlcgogICAgICogQHBhcmFtIHRpbWVGaWx0ZXIuc2V0VGltZQogICAgICogQHBhcmFtIHRpbWVGaWx0ZXIuc2V0UmVmcmVzaEludGVydmFsCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic3luY1RpbWVmaWx0ZXJXaXRoRGFzaGJvYXJkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzeW5jVGltZWZpbHRlcldpdGhEYXNoYm9hcmQodGltZUZpbHRlcikgewogICAgICBpZiAoIXRoaXMuZ2V0SXNUaW1lU2F2ZWRXaXRoRGFzaGJvYXJkKCkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5kYXNoYm9hcmQuc3RhdGVNYW5hZ2VyLnRpbWVOb3RTYXZlZFdpdGhEYXNoYm9hcmRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoZSB0aW1lIGlzIG5vdCBzYXZlZCB3aXRoIHRoaXMgZGFzaGJvYXJkIHNvIHNob3VsZCBub3QgYmUgc3luY2VkLicKICAgICAgICB9KSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNhdmVkRGFzaGJvYXJkLnRpbWVGcm9tICYmIHRoaXMuc2F2ZWREYXNoYm9hcmQudGltZVRvKSB7CiAgICAgICAgdGltZUZpbHRlci5zZXRUaW1lKHsKICAgICAgICAgIGZyb206IHRoaXMuc2F2ZWREYXNoYm9hcmQudGltZUZyb20sCiAgICAgICAgICB0bzogdGhpcy5zYXZlZERhc2hib2FyZC50aW1lVG8KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2F2ZWREYXNoYm9hcmQucmVmcmVzaEludGVydmFsKSB7CiAgICAgICAgdGltZUZpbHRlci5zZXRSZWZyZXNoSW50ZXJ2YWwodGhpcy5zYXZlZERhc2hib2FyZC5yZWZyZXNoSW50ZXJ2YWwpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNhdmVzIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uIHN0YXRlIHRvIHRoZSBVUkwuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2F2ZVN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlU3RhdGUoKSB7CiAgICAgIHRoaXMuYXBwU3RhdGUuc2F2ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFF1ZXJ5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRRdWVyeShxdWVyeSkgewogICAgICB0aGlzLmFwcFN0YXRlLnF1ZXJ5ID0gcXVlcnk7CiAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGxpZXMgdGhlIGN1cnJlbnQgZmlsdGVyIHN0YXRlIHRvIHRoZSBkYXNoYm9hcmQuCiAgICAgKiBAcGFyYW0gZmlsdGVyIEFuIGFycmF5IG9mIGZpbHRlciBiYXIgZmlsdGVycy4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJhcHBseUZpbHRlcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5RmlsdGVycyhxdWVyeSwgZmlsdGVycykgewogICAgICB0aGlzLmFwcFN0YXRlLnF1ZXJ5ID0gcXVlcnk7CiAgICAgIHRoaXMuc2F2ZWREYXNoYm9hcmQuc2VhcmNoU291cmNlLnNldEZpZWxkKCdxdWVyeScsIHF1ZXJ5KTsKICAgICAgdGhpcy5zYXZlZERhc2hib2FyZC5zZWFyY2hTb3VyY2Uuc2V0RmllbGQoJ2ZpbHRlcicsIGZpbHRlcnMpOwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInN3aXRjaFZpZXdNb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzd2l0Y2hWaWV3TW9kZShuZXdNb2RlKSB7CiAgICAgIHRoaXMuYXBwU3RhdGUudmlld01vZGUgPSBuZXdNb2RlOwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBEZXN0cm95cyBhbmQgY2xlYW5zIHVwIHRoaXMgb2JqZWN0IHdoZW4gaXQncyBubyBsb25nZXIgdXNlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkZXN0cm95IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkgewogICAgICBpZiAodGhpcy5zdGF0ZU1vbml0b3IpIHsKICAgICAgICB0aGlzLnN0YXRlTW9uaXRvci5kZXN0cm95KCk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2F2ZWREYXNoYm9hcmQuZGVzdHJveSgpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIERhc2hib2FyZFN0YXRlTWFuYWdlcjsKfSgpOwoKZXhwb3J0cy5EYXNoYm9hcmRTdGF0ZU1hbmFnZXIgPSBEYXNoYm9hcmRTdGF0ZU1hbmFnZXI7"},null]}