{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/agg_types/buckets/_terms_other_bucket_helper.js","dependencies":[{"path":"src/legacy/ui/public/agg_types/buckets/_terms_other_bucket_helper.js","mtime":1572296412176},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnVwZGF0ZU1pc3NpbmdCdWNrZXQgPSBleHBvcnRzLm1lcmdlT3RoZXJCdWNrZXRBZ2dSZXNwb25zZSA9IGV4cG9ydHMuYnVpbGRPdGhlckJ1Y2tldEFnZyA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX2VzUXVlcnkgPSByZXF1aXJlKCJAa2JuL2VzLXF1ZXJ5Iik7Cgp2YXIgX2FnZ19ncm91cHMgPSByZXF1aXJlKCIuLi8uLi92aXMvZWRpdG9ycy9kZWZhdWx0L2FnZ19ncm91cHMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSB9CgovKioKICogd2Fsa3MgdGhlIGFnZ3JlZ2F0aW9uIERTTCBhbmQgcmV0dXJucyBEU0wgc3RhcnRpbmcgYXQgYWdncmVnYXRpb24gd2l0aCBpZCBvZiBzdGFydEZyb21BZ2dJZAogKiBAcGFyYW0gYWdnTmVzdGVkRHNsOiBhZ2dyZWdhdGlvbiBjb25maWcgRFNMICh0b3AgbGV2ZWwpCiAqIEBwYXJhbSBzdGFydEZyb21JZDogaWQgb2YgYW4gYWdncmVnYXRpb24gZnJvbSB3aGVyZSB3ZSB3YW50IHRvIGdldCB0aGUgbmVzdGVkIERTTAogKi8KdmFyIGdldE5lc3RlZEFnZ0RTTCA9IGZ1bmN0aW9uIGdldE5lc3RlZEFnZ0RTTChhZ2dOZXN0ZWREc2wsIHN0YXJ0RnJvbUFnZ0lkKSB7CiAgaWYgKGFnZ05lc3RlZERzbFtzdGFydEZyb21BZ2dJZF0pIHsKICAgIHJldHVybiBhZ2dOZXN0ZWREc2xbc3RhcnRGcm9tQWdnSWRdOwogIH0KCiAgdmFyIG5lc3RlZEFnZ3MgPSBfbG9kYXNoLmRlZmF1bHQudmFsdWVzKGFnZ05lc3RlZERzbCk7CgogIHZhciBhZ2dzOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IG5lc3RlZEFnZ3MubGVuZ3RoOyBpKyspIHsKICAgIGlmIChuZXN0ZWRBZ2dzW2ldLmFnZ3MgJiYgKGFnZ3MgPSBnZXROZXN0ZWRBZ2dEU0wobmVzdGVkQWdnc1tpXS5hZ2dzLCBzdGFydEZyb21BZ2dJZCkpKSB7CiAgICAgIHJldHVybiBhZ2dzOwogICAgfQogIH0KfTsKLyoqCiAqIHJldHVybnMgYnVja2V0cyBmcm9tIHJlc3BvbnNlIGZvciBhIHNwZWNpZmljIG90aGVyIGJ1Y2tldAogKiBAcGFyYW0gYWdnQ29uZmlnczogY29uZmlndXJhdGlvbiBmb3IgdGhlIGFnZ3JlZ2F0aW9ucwogKiBAcGFyYW0gcmVzcG9uc2U6IHJlc3BvbnNlIGZyb20gZWxhc3RpY3NlYXJjaAogKiBAcGFyYW0gYWdnV2l0aE90aGVyQnVja2V0OiBBZ2dDb25maWcgb2YgdGhlIGFnZ3JlZ2F0aW9uIHdpdGggb3RoZXIgYnVja2V0IGVuYWJsZWQKICogQHBhcmFtIGtleToga2V5IGZyb20gdGhlIG90aGVyIGJ1Y2tldCByZXF1ZXN0IGZvciBhIHNwZWNpZmljIG90aGVyIGJ1Y2tldAogKi8KCgp2YXIgZ2V0QWdnUmVzdWx0QnVja2V0cyA9IGZ1bmN0aW9uIGdldEFnZ1Jlc3VsdEJ1Y2tldHMoYWdnQ29uZmlncywgcmVzcG9uc2UsIGFnZ1dpdGhPdGhlckJ1Y2tldCwga2V5KSB7CiAgdmFyIGtleVBhcnRzID0ga2V5LnNwbGl0KCctJyk7CiAgdmFyIHJlc3BvbnNlQWdnID0gcmVzcG9uc2U7CgogIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHsKICAgIGlmIChrZXlQYXJ0c1tpXSkgewogICAgICB2YXIgcmVzcG9uc2VBZ2dzID0gX2xvZGFzaC5kZWZhdWx0LnZhbHVlcyhyZXNwb25zZUFnZyk7IC8vIElmIHlvdSBoYXZlIG11bHRpIGFnZ3MsIHdlIGNhbm5vdCBqdXN0IGFzc3VtZSB0aGUgZmlyc3Qgb25lIGlzIHRoZSBgb3RoZXJgIGJ1Y2tldCwKICAgICAgLy8gc28gd2UgbmVlZCB0byBsb29wIG92ZXIgZWFjaCBhZ2cgdW50aWwgd2UgZmluZCBpdC4KCgogICAgICB2YXIgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKGFnZ0lkKSB7CiAgICAgICAgdmFyIGFnZyA9IHJlc3BvbnNlQWdnc1thZ2dJZF07CgogICAgICAgIHZhciBhZ2dLZXkgPSBfbG9kYXNoLmRlZmF1bHQua2V5cyhyZXNwb25zZUFnZylbYWdnSWRdOwoKICAgICAgICB2YXIgYWdnQ29uZmlnID0gX2xvZGFzaC5kZWZhdWx0LmZpbmQoYWdnQ29uZmlncywgZnVuY3Rpb24gKGFnZykgewogICAgICAgICAgcmV0dXJuIGFnZy5pZCA9PT0gYWdnS2V5OwogICAgICAgIH0pOwoKICAgICAgICB2YXIgYnVja2V0ID0gX2xvZGFzaC5kZWZhdWx0LmZpbmQoYWdnLmJ1Y2tldHMsIGZ1bmN0aW9uIChidWNrZXQsIGJ1Y2tldE9iaktleSkgewogICAgICAgICAgdmFyIGJ1Y2tldEtleSA9IGFnZ0NvbmZpZy5nZXRLZXkoYnVja2V0LCBOdW1iZXIuaXNJbnRlZ2VyKGJ1Y2tldE9iaktleSkgPyBudWxsIDogYnVja2V0T2JqS2V5KS50b1N0cmluZygpOwogICAgICAgICAgcmV0dXJuIGJ1Y2tldEtleSA9PT0ga2V5UGFydHNbaV07CiAgICAgICAgfSk7CgogICAgICAgIGlmIChidWNrZXQpIHsKICAgICAgICAgIHJlc3BvbnNlQWdnID0gYnVja2V0OwogICAgICAgICAgcmV0dXJuICJicmVhayI7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgZm9yICh2YXIgYWdnSWQgPSAwOyBhZ2dJZCA8IHJlc3BvbnNlQWdncy5sZW5ndGg7IGFnZ0lkKyspIHsKICAgICAgICB2YXIgX3JldCA9IF9sb29wMihhZ2dJZCk7CgogICAgICAgIGlmIChfcmV0ID09PSAiYnJlYWsiKSBicmVhazsKICAgICAgfQogICAgfQogIH07CgogIGZvciAodmFyIGkgaW4ga2V5UGFydHMpIHsKICAgIF9sb29wKGkpOwogIH0KCiAgaWYgKHJlc3BvbnNlQWdnW2FnZ1dpdGhPdGhlckJ1Y2tldC5pZF0pIHsKICAgIHJldHVybiByZXNwb25zZUFnZ1thZ2dXaXRoT3RoZXJCdWNrZXQuaWRdLmJ1Y2tldHM7CiAgfQoKICByZXR1cm4gW107Cn07Ci8qKgogKiBnZXRzIGFsbCB0aGUgbWlzc2luZyBidWNrZXRzIGluIG91ciByZXNwb25zZSBmb3IgYSBzcGVjaWZpYyBhZ2dyZWdhdGlvbiBpZAogKiBAcGFyYW0gcmVzcG9uc2VBZ2dzOiBhcnJheSBvZiBhZ2dyZWdhdGlvbnMgZnJvbSByZXNwb25zZQogKiBAcGFyYW0gYWdnSWQ6IGlkIG9mIHRoZSBhZ2dyZWdhdGlvbiB3aXRoIG1pc3NpbmcgYnVja2V0CiAqLwoKCnZhciBnZXRBZ2dDb25maWdSZXN1bHRNaXNzaW5nQnVja2V0cyA9IGZ1bmN0aW9uIGdldEFnZ0NvbmZpZ1Jlc3VsdE1pc3NpbmdCdWNrZXRzKHJlc3BvbnNlQWdncywgYWdnSWQpIHsKICB2YXIgbWlzc2luZ0tleSA9ICdfX21pc3NpbmdfXyc7CiAgdmFyIHJlc3VsdEJ1Y2tldHMgPSBbXTsKCiAgaWYgKHJlc3BvbnNlQWdnc1thZ2dJZF0pIHsKICAgIHZhciBtYXRjaGluZ0J1Y2tldCA9IHJlc3BvbnNlQWdnc1thZ2dJZF0uYnVja2V0cy5maW5kKGZ1bmN0aW9uIChidWNrZXQpIHsKICAgICAgcmV0dXJuIGJ1Y2tldC5rZXkgPT09IG1pc3NpbmdLZXk7CiAgICB9KTsKICAgIGlmIChtYXRjaGluZ0J1Y2tldCkgcmVzdWx0QnVja2V0cy5wdXNoKG1hdGNoaW5nQnVja2V0KTsKICAgIHJldHVybiByZXN1bHRCdWNrZXRzOwogIH0KCiAgX2xvZGFzaC5kZWZhdWx0LmVhY2gocmVzcG9uc2VBZ2dzLCBmdW5jdGlvbiAoYWdnKSB7CiAgICBpZiAoYWdnLmJ1Y2tldHMpIHsKICAgICAgX2xvZGFzaC5kZWZhdWx0LmVhY2goYWdnLmJ1Y2tldHMsIGZ1bmN0aW9uIChidWNrZXQpIHsKICAgICAgICByZXN1bHRCdWNrZXRzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXN1bHRCdWNrZXRzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGdldEFnZ0NvbmZpZ1Jlc3VsdE1pc3NpbmdCdWNrZXRzKGJ1Y2tldCwgYWdnSWQsIG1pc3NpbmdLZXkpKSk7CiAgICAgIH0pOwogICAgfQogIH0pOwoKICByZXR1cm4gcmVzdWx0QnVja2V0czsKfTsKLyoqCiAqIGdldHMgYWxsIHRoZSB0ZXJtcyB0aGF0IGFyZSBOT1QgaW4gdGhlIG90aGVyIGJ1Y2tldAogKiBAcGFyYW0gcmVxdWVzdEFnZzogYW4gYWdncmVnYXRpb24gd2UgYXJlIGxvb2tpbmcgYXQKICogQHBhcmFtIGtleTogdGhlIGtleSBmb3IgdGhpcyBzcGVjaWZpYyBvdGhlciBidWNrZXQKICogQHBhcmFtIG90aGVyQWdnOiBBZ2dDb25maWcgb2YgdGhlIGFnZ3JlZ2F0aW9uIHdpdGggb3RoZXIgYnVja2V0CiAqLwoKCnZhciBnZXRPdGhlckFnZ1Rlcm1zID0gZnVuY3Rpb24gZ2V0T3RoZXJBZ2dUZXJtcyhyZXF1ZXN0QWdnLCBrZXksIG90aGVyQWdnKSB7CiAgcmV0dXJuIHJlcXVlc3RBZ2dbJ290aGVyLWZpbHRlciddLmZpbHRlcnMuZmlsdGVyc1trZXldLmJvb2wubXVzdF9ub3QuZmlsdGVyKGZ1bmN0aW9uIChmaWx0ZXIpIHsKICAgIHJldHVybiBmaWx0ZXIubWF0Y2hfcGhyYXNlICYmIGZpbHRlci5tYXRjaF9waHJhc2Vbb3RoZXJBZ2cucGFyYW1zLmZpZWxkLm5hbWVdOwogIH0pLm1hcChmdW5jdGlvbiAoZmlsdGVyKSB7CiAgICByZXR1cm4gZmlsdGVyLm1hdGNoX3BocmFzZVtvdGhlckFnZy5wYXJhbXMuZmllbGQubmFtZV0ucXVlcnk7CiAgfSk7Cn07Cgp2YXIgYnVpbGRPdGhlckJ1Y2tldEFnZyA9IGZ1bmN0aW9uIGJ1aWxkT3RoZXJCdWNrZXRBZ2coYWdnQ29uZmlncywgYWdnV2l0aE90aGVyQnVja2V0LCByZXNwb25zZSkgewogIHZhciBidWNrZXRBZ2dzID0gYWdnQ29uZmlncy5maWx0ZXIoZnVuY3Rpb24gKGFnZykgewogICAgcmV0dXJuIGFnZy50eXBlLnR5cGUgPT09IF9hZ2dfZ3JvdXBzLkFnZ0dyb3VwTmFtZXMuQnVja2V0czsKICB9KTsKICB2YXIgaW5kZXggPSBidWNrZXRBZ2dzLmZpbmRJbmRleChmdW5jdGlvbiAoYWdnKSB7CiAgICByZXR1cm4gYWdnLmlkID09PSBhZ2dXaXRoT3RoZXJCdWNrZXQuaWQ7CiAgfSk7CiAgdmFyIGFnZ3MgPSBhZ2dDb25maWdzLnRvRHNsKCk7CiAgdmFyIGluZGV4UGF0dGVybiA9IGFnZ1dpdGhPdGhlckJ1Y2tldC5wYXJhbXMuZmllbGQuaW5kZXhQYXR0ZXJuOyAvLyBjcmVhdGUgZmlsdGVycyBhZ2dyZWdhdGlvbgoKICB2YXIgZmlsdGVyQWdnID0gYWdnQ29uZmlncy5jcmVhdGVBZ2dDb25maWcoewogICAgdHlwZTogJ2ZpbHRlcnMnLAogICAgaWQ6ICdvdGhlcicsCiAgICBwYXJhbXM6IHsKICAgICAgZmlsdGVyczogW10KICAgIH0KICB9LCB7CiAgICBhZGRUb0FnZ0NvbmZpZ3M6IGZhbHNlCiAgfSk7IC8vIG5lc3QgYWxsIHRoZSBjaGlsZCBhZ2dyZWdhdGlvbnMgb2YgYWdnV2l0aE90aGVyQnVja2V0CgogIHZhciByZXN1bHRBZ2cgPSB7CiAgICBhZ2dzOiBnZXROZXN0ZWRBZ2dEU0woYWdncywgYWdnV2l0aE90aGVyQnVja2V0LmlkKS5hZ2dzLAogICAgZmlsdGVyczogZmlsdGVyQWdnLnRvRHNsKCkKICB9OwogIHZhciBub0FnZ0J1Y2tldFJlc3VsdHMgPSBmYWxzZTsgLy8gcmVjdXJzaXZlbHkgY3JlYXRlIGZpbHRlcnMgZm9yIGFsbCBwYXJlbnQgYWdncmVnYXRpb24gYnVja2V0cwoKICB2YXIgd2Fsa0J1Y2tldFRyZWUgPSBmdW5jdGlvbiB3YWxrQnVja2V0VHJlZShhZ2dJbmRleCwgYWdncywgYWdnSWQsIGZpbHRlcnMsIGtleSkgewogICAgLy8gbWFrZSBzdXJlIHRoZXJlIGFyZSBhY3R1YWxseSByZXN1bHRzIGZvciB0aGUgYnVja2V0cwogICAgaWYgKGFnZ3NbYWdnSWRdLmJ1Y2tldHMubGVuZ3RoIDwgMSkgewogICAgICBub0FnZ0J1Y2tldFJlc3VsdHMgPSB0cnVlOwogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGFnZyA9IGFnZ3NbYWdnSWRdOwogICAgdmFyIG5ld0FnZ0luZGV4ID0gYWdnSW5kZXggKyAxOwogICAgdmFyIG5ld0FnZyA9IGJ1Y2tldEFnZ3NbbmV3QWdnSW5kZXhdOwogICAgdmFyIGN1cnJlbnRBZ2cgPSBidWNrZXRBZ2dzW2FnZ0luZGV4XTsKCiAgICBpZiAoYWdnSW5kZXggPCBpbmRleCkgewogICAgICBfbG9kYXNoLmRlZmF1bHQuZWFjaChhZ2cuYnVja2V0cywgZnVuY3Rpb24gKGJ1Y2tldCwgYnVja2V0T2JqS2V5KSB7CiAgICAgICAgdmFyIGJ1Y2tldEtleSA9IGN1cnJlbnRBZ2cuZ2V0S2V5KGJ1Y2tldCwgTnVtYmVyLmlzSW50ZWdlcihidWNrZXRPYmpLZXkpID8gbnVsbCA6IGJ1Y2tldE9iaktleSk7CiAgICAgICAgdmFyIGZpbHRlciA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAoYnVja2V0LmZpbHRlcnMpIHx8IGN1cnJlbnRBZ2cuY3JlYXRlRmlsdGVyKGJ1Y2tldEtleSk7CgogICAgICAgIHZhciBuZXdGaWx0ZXJzID0gX2xvZGFzaC5kZWZhdWx0LmZsYXR0ZW4oW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShmaWx0ZXJzKSwgW2ZpbHRlcl0pKTsKCiAgICAgICAgd2Fsa0J1Y2tldFRyZWUobmV3QWdnSW5kZXgsIGJ1Y2tldCwgbmV3QWdnLmlkLCBuZXdGaWx0ZXJzLCAiIi5jb25jYXQoa2V5LCAiLSIpLmNvbmNhdChidWNrZXRLZXkudG9TdHJpbmcoKSkpOwogICAgICB9KTsKCiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoIWFnZ1dpdGhPdGhlckJ1Y2tldC5wYXJhbXMubWlzc2luZ0J1Y2tldCB8fCBhZ2cuYnVja2V0cy5zb21lKGZ1bmN0aW9uIChidWNrZXQpIHsKICAgICAgcmV0dXJuIGJ1Y2tldC5rZXkgPT09ICdfX21pc3NpbmdfXyc7CiAgICB9KSkgewogICAgICBmaWx0ZXJzLnB1c2goKDAsIF9lc1F1ZXJ5LmJ1aWxkRXhpc3RzRmlsdGVyKShhZ2dXaXRoT3RoZXJCdWNrZXQucGFyYW1zLmZpZWxkLCBhZ2dXaXRoT3RoZXJCdWNrZXQucGFyYW1zLmZpZWxkLmluZGV4UGF0dGVybikpOwogICAgfSAvLyBjcmVhdGUgbm90IGZpbHRlcnMgZm9yIGFsbCB0aGUgYnVja2V0cwoKCiAgICBfbG9kYXNoLmRlZmF1bHQuZWFjaChhZ2cuYnVja2V0cywgZnVuY3Rpb24gKGJ1Y2tldCkgewogICAgICBpZiAoYnVja2V0LmtleSA9PT0gJ19fbWlzc2luZ19fJykgcmV0dXJuOwogICAgICB2YXIgZmlsdGVyID0gY3VycmVudEFnZy5jcmVhdGVGaWx0ZXIoYnVja2V0LmtleSk7CiAgICAgIGZpbHRlci5tZXRhLm5lZ2F0ZSA9IHRydWU7CiAgICAgIGZpbHRlcnMucHVzaChmaWx0ZXIpOwogICAgfSk7CgogICAgcmVzdWx0QWdnLmZpbHRlcnMuZmlsdGVyc1trZXldID0gewogICAgICBib29sOiAoMCwgX2VzUXVlcnkuYnVpbGRRdWVyeUZyb21GaWx0ZXJzKShmaWx0ZXJzLCBpbmRleFBhdHRlcm4pCiAgICB9OwogIH07CgogIHdhbGtCdWNrZXRUcmVlKDAsIHJlc3BvbnNlLmFnZ3JlZ2F0aW9ucywgYnVja2V0QWdnc1swXS5pZCwgW10sICcnKTsgLy8gYmFpbCBpZiB0aGVyZSB3ZXJlIG5vIGJ1Y2tldCByZXN1bHRzCgogIGlmIChub0FnZ0J1Y2tldFJlc3VsdHMpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICAnb3RoZXItZmlsdGVyJzogcmVzdWx0QWdnCiAgICB9OwogIH07Cn07CgpleHBvcnRzLmJ1aWxkT3RoZXJCdWNrZXRBZ2cgPSBidWlsZE90aGVyQnVja2V0QWdnOwoKdmFyIG1lcmdlT3RoZXJCdWNrZXRBZ2dSZXNwb25zZSA9IGZ1bmN0aW9uIG1lcmdlT3RoZXJCdWNrZXRBZ2dSZXNwb25zZShhZ2dzQ29uZmlnLCByZXNwb25zZSwgb3RoZXJSZXNwb25zZSwgb3RoZXJBZ2csIHJlcXVlc3RBZ2cpIHsKICB2YXIgdXBkYXRlZFJlc3BvbnNlID0gX2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcChyZXNwb25zZSk7CgogIF9sb2Rhc2guZGVmYXVsdC5lYWNoKG90aGVyUmVzcG9uc2UuYWdncmVnYXRpb25zWydvdGhlci1maWx0ZXInXS5idWNrZXRzLCBmdW5jdGlvbiAoYnVja2V0LCBrZXkpIHsKICAgIGlmICghYnVja2V0LmRvY19jb3VudCkgcmV0dXJuOwogICAgdmFyIGJ1Y2tldEtleSA9IGtleS5yZXBsYWNlKC9eLS8sICcnKTsKICAgIHZhciBhZ2dSZXN1bHRCdWNrZXRzID0gZ2V0QWdnUmVzdWx0QnVja2V0cyhhZ2dzQ29uZmlnLCB1cGRhdGVkUmVzcG9uc2UuYWdncmVnYXRpb25zLCBvdGhlckFnZywgYnVja2V0S2V5KTsKICAgIHZhciByZXF1ZXN0RmlsdGVyVGVybXMgPSBnZXRPdGhlckFnZ1Rlcm1zKHJlcXVlc3RBZ2csIGtleSwgb3RoZXJBZ2cpOwogICAgdmFyIHBocmFzZUZpbHRlciA9ICgwLCBfZXNRdWVyeS5idWlsZFBocmFzZXNGaWx0ZXIpKG90aGVyQWdnLnBhcmFtcy5maWVsZCwgcmVxdWVzdEZpbHRlclRlcm1zLCBvdGhlckFnZy5wYXJhbXMuZmllbGQuaW5kZXhQYXR0ZXJuKTsKICAgIHBocmFzZUZpbHRlci5tZXRhLm5lZ2F0ZSA9IHRydWU7CiAgICBidWNrZXQuZmlsdGVycyA9IFtwaHJhc2VGaWx0ZXJdOwogICAgYnVja2V0LmtleSA9ICdfX290aGVyX18nOwoKICAgIGlmIChhZ2dSZXN1bHRCdWNrZXRzLnNvbWUoZnVuY3Rpb24gKGJ1Y2tldCkgewogICAgICByZXR1cm4gYnVja2V0LmtleSA9PT0gJ19fbWlzc2luZ19fJzsKICAgIH0pKSB7CiAgICAgIGJ1Y2tldC5maWx0ZXJzLnB1c2goKDAsIF9lc1F1ZXJ5LmJ1aWxkRXhpc3RzRmlsdGVyKShvdGhlckFnZy5wYXJhbXMuZmllbGQsIG90aGVyQWdnLnBhcmFtcy5maWVsZC5pbmRleFBhdHRlcm4pKTsKICAgIH0KCiAgICBhZ2dSZXN1bHRCdWNrZXRzLnB1c2goYnVja2V0KTsKICB9KTsKCiAgcmV0dXJuIHVwZGF0ZWRSZXNwb25zZTsKfTsKCmV4cG9ydHMubWVyZ2VPdGhlckJ1Y2tldEFnZ1Jlc3BvbnNlID0gbWVyZ2VPdGhlckJ1Y2tldEFnZ1Jlc3BvbnNlOwoKdmFyIHVwZGF0ZU1pc3NpbmdCdWNrZXQgPSBmdW5jdGlvbiB1cGRhdGVNaXNzaW5nQnVja2V0KHJlc3BvbnNlLCBhZ2dDb25maWdzLCBhZ2cpIHsKICB2YXIgdXBkYXRlZFJlc3BvbnNlID0gX2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcChyZXNwb25zZSk7CgogIHZhciBhZ2dSZXN1bHRCdWNrZXRzID0gZ2V0QWdnQ29uZmlnUmVzdWx0TWlzc2luZ0J1Y2tldHModXBkYXRlZFJlc3BvbnNlLmFnZ3JlZ2F0aW9ucywgYWdnLmlkKTsKICBhZ2dSZXN1bHRCdWNrZXRzLmZvckVhY2goZnVuY3Rpb24gKGJ1Y2tldCkgewogICAgYnVja2V0LmtleSA9ICdfX21pc3NpbmdfXyc7CiAgfSk7CiAgcmV0dXJuIHVwZGF0ZWRSZXNwb25zZTsKfTsKCmV4cG9ydHMudXBkYXRlTWlzc2luZ0J1Y2tldCA9IHVwZGF0ZU1pc3NpbmdCdWNrZXQ7"},null]}