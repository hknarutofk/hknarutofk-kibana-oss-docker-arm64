{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_vega/public/vega_view/vega_map_view.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_vega/public/vega_view/vega_map_view.js","mtime":1572296411708},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlZlZ2FNYXBWaWV3ID0gdm9pZCAwOwoKdmFyIF9raWJhbmFfbWFwID0gcmVxdWlyZSgidWkvdmlzL21hcC9raWJhbmFfbWFwIik7Cgp2YXIgdmVnYSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInZlZ2EtbGliIikpOwoKdmFyIF92ZWdhX2Jhc2VfdmlldyA9IHJlcXVpcmUoIi4vdmVnYV9iYXNlX3ZpZXciKTsKCnZhciBfdmVnYV9tYXBfbGF5ZXIgPSByZXF1aXJlKCIuL3ZlZ2FfbWFwX2xheWVyIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfY2hyb21lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ1aS9jaHJvbWUiKSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCnZhciBWZWdhTWFwVmlldyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9WZWdhQmFzZVZpZXcpIHsKICBfaW5oZXJpdHMoVmVnYU1hcFZpZXcsIF9WZWdhQmFzZVZpZXcpOwoKICBmdW5jdGlvbiBWZWdhTWFwVmlldygpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWZWdhTWFwVmlldyk7CgogICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihWZWdhTWFwVmlldykuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVmVnYU1hcFZpZXcsIFt7CiAgICBrZXk6ICJfaW5pdFZpZXdDdXN0b21pemF0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luaXRWaWV3Q3VzdG9taXphdGlvbnMyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB2YXIgbWFwQ29uZmlnLCBiYXNlTWFwT3B0cywgbGltaXRNaW5aLCBsaW1pdE1heFosIHRtc1NlcnZpY2VzLCBlbXNUaWxlTGF5ZXJJZCwgbWFwU3R5bGUsIGlzRGFya01vZGUsIHZhbGlkYXRlLCBtaW5ab29tLCBtYXhab29tLCBfcmVmLCB6b29tLCB2ZWdhTWFwTGF5ZXIsIHZlZ2FWaWV3OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBtYXBDb25maWcgPSB0aGlzLl9wYXJzZXIubWFwQ29uZmlnOwogICAgICAgICAgICAgICAgbGltaXRNaW5aID0gMDsKICAgICAgICAgICAgICAgIGxpbWl0TWF4WiA9IDI1OwoKICAgICAgICAgICAgICAgIGlmICghKG1hcENvbmZpZy5tYXBTdHlsZSAhPT0gZmFsc2UpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VydmljZVNldHRpbmdzLmdldFRNU1NlcnZpY2VzKCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHRtc1NlcnZpY2VzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGNvbnRhaW5lcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGVtc1RpbGVMYXllcklkID0gX2Nocm9tZS5kZWZhdWx0LmdldEluamVjdGVkKCdlbXNUaWxlTGF5ZXJJZCcsIHRydWUpOwogICAgICAgICAgICAgICAgbWFwU3R5bGUgPSBtYXBDb25maWcubWFwU3R5bGUgPT09ICdkZWZhdWx0JyA/IGVtc1RpbGVMYXllcklkLmJyaWdodCA6IG1hcENvbmZpZy5tYXBTdHlsZTsKICAgICAgICAgICAgICAgIGlzRGFya01vZGUgPSBfY2hyb21lLmRlZmF1bHQuZ2V0VWlTZXR0aW5nc0NsaWVudCgpLmdldCgndGhlbWU6ZGFya01vZGUnKTsKICAgICAgICAgICAgICAgIGJhc2VNYXBPcHRzID0gdG1zU2VydmljZXMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgICAgICAgICAgICByZXR1cm4gcy5pZCA9PT0gbWFwU3R5bGU7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX29iamVjdFNwcmVhZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQxID0ge307CiAgICAgICAgICAgICAgICBfY29udGV4dC50MiA9IGJhc2VNYXBPcHRzOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDMgPSB7fTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXJ2aWNlU2V0dGluZ3MuZ2V0QXR0cmlidXRlc0ZvclRNU0xheWVyKGJhc2VNYXBPcHRzLCB0cnVlLCBpc0RhcmtNb2RlKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQ0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGJhc2VNYXBPcHRzID0gKDAsIF9jb250ZXh0LnQwKShfY29udGV4dC50MSwgX2NvbnRleHQudDIsIF9jb250ZXh0LnQzLCBfY29udGV4dC50NCk7CgogICAgICAgICAgICAgICAgaWYgKCFiYXNlTWFwT3B0cykgewogICAgICAgICAgICAgICAgICB0aGlzLm9uV2FybihfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzVHlwZVZlZ2EubWFwVmlldy5tYXBTdHlsZU5vdEZvdW5kV2FybmluZ01lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICd7bWFwU3R5bGVQYXJhbX0gd2FzIG5vdCBmb3VuZCcsCiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgICBtYXBTdHlsZVBhcmFtOiAiXCJtYXBTdHlsZVwiOiAiLmNvbmNhdChKU09OLnN0cmluZ2lmeShtYXBTdHlsZSkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBsaW1pdE1pblogPSBiYXNlTWFwT3B0cy5taW5ab29tOwogICAgICAgICAgICAgICAgICBsaW1pdE1heFogPSBiYXNlTWFwT3B0cy5tYXhab29tOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgdmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZShuYW1lLCB2YWx1ZSwgZGZsdCwgbWluLCBtYXgpIHsKICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGRmbHQ7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPCBtaW4pIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbldhcm4oX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3Zpc1R5cGVWZWdhLm1hcFZpZXcucmVzZXR0aW5nUHJvcGVydHlUb01pblZhbHVlV2FybmluZ01lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Jlc2V0dGluZyB7bmFtZX0gdG8ge21pbn0nLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJcIiIuY29uY2F0KG5hbWUsICJcIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBtaW46IG1pbgogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBtaW47CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPiBtYXgpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbldhcm4oX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3Zpc1R5cGVWZWdhLm1hcFZpZXcucmVzZXR0aW5nUHJvcGVydHlUb01heFZhbHVlV2FybmluZ01lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Jlc2V0dGluZyB7bmFtZX0gdG8ge21heH0nLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJcIiIuY29uY2F0KG5hbWUsICJcIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBtYXg6IG1heAogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBtYXg7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgbWluWm9vbSA9IHZhbGlkYXRlKCdtaW5ab29tJywgbWFwQ29uZmlnLm1pblpvb20sIGxpbWl0TWluWiwgbGltaXRNaW5aLCBsaW1pdE1heFopOwogICAgICAgICAgICAgICAgbWF4Wm9vbSA9IHZhbGlkYXRlKCdtYXhab29tJywgbWFwQ29uZmlnLm1heFpvb20sIGxpbWl0TWF4WiwgbGltaXRNaW5aLCBsaW1pdE1heFopOwoKICAgICAgICAgICAgICAgIGlmIChtaW5ab29tID4gbWF4Wm9vbSkgewogICAgICAgICAgICAgICAgICB0aGlzLm9uV2FybihfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzVHlwZVZlZ2EubWFwVmlldy5taW5ab29tQW5kTWF4Wm9vbUhhdmVCZWVuU3dhcHBlZFdhcm5pbmdNZXNzYWdlJywgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAne21pblpvb21Qcm9wZXJ0eU5hbWV9IGFuZCB7bWF4Wm9vbVByb3BlcnR5TmFtZX0gaGF2ZSBiZWVuIHN3YXBwZWQnLAogICAgICAgICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgICAgICAgbWluWm9vbVByb3BlcnR5TmFtZTogJyJtaW5ab29tIicsCiAgICAgICAgICAgICAgICAgICAgICBtYXhab29tUHJvcGVydHlOYW1lOiAnIm1heFpvb20iJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICBfcmVmID0gW21heFpvb20sIG1pblpvb21dOwogICAgICAgICAgICAgICAgICBtaW5ab29tID0gX3JlZlswXTsKICAgICAgICAgICAgICAgICAgbWF4Wm9vbSA9IF9yZWZbMV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgem9vbSA9IHZhbGlkYXRlKCd6b29tJywgbWFwQ29uZmlnLnpvb20sIDIsIG1pblpvb20sIG1heFpvb20pOyAvLyBsZXQgbWF4Qm91bmRzID0gbnVsbDsKICAgICAgICAgICAgICAgIC8vIGlmIChtYXBDb25maWcubWF4Qm91bmRzKSB7CiAgICAgICAgICAgICAgICAvLyAgIGNvbnN0IGIgPSBtYXBDb25maWcubWF4Qm91bmRzOwogICAgICAgICAgICAgICAgLy8gICBtYXhCb3VuZHMgPSBMLmxhdExuZ0JvdW5kcyhMLmxhdExuZyhiWzFdLCBiWzBdKSwgTC5sYXRMbmcoYlszXSwgYlsyXSkpOwogICAgICAgICAgICAgICAgLy8gfQoKICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcCA9IG5ldyBfa2liYW5hX21hcC5LaWJhbmFNYXAodGhpcy5fJGNvbnRhaW5lci5nZXQoMCksIHsKICAgICAgICAgICAgICAgICAgem9vbTogem9vbSwKICAgICAgICAgICAgICAgICAgbWluWm9vbTogbWluWm9vbSwKICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogbWF4Wm9vbSwKICAgICAgICAgICAgICAgICAgY2VudGVyOiBbbWFwQ29uZmlnLmxhdGl0dWRlLCBtYXBDb25maWcubG9uZ2l0dWRlXSwKICAgICAgICAgICAgICAgICAgem9vbUNvbnRyb2w6IG1hcENvbmZpZy56b29tQ29udHJvbCwKICAgICAgICAgICAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBtYXBDb25maWcuc2Nyb2xsV2hlZWxab29tCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoYmFzZU1hcE9wdHMpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnNldEJhc2VMYXllcih7CiAgICAgICAgICAgICAgICAgICAgYmFzZUxheWVyVHlwZTogJ3RtcycsCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogYmFzZU1hcE9wdHMKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmVnYU1hcExheWVyID0gbmV3IF92ZWdhX21hcF9sYXllci5WZWdhTWFwTGF5ZXIodGhpcy5fcGFyc2VyLnNwZWMsIHsKICAgICAgICAgICAgICAgICAgdmVnYTogdmVnYSwKICAgICAgICAgICAgICAgICAgYmluZGluZ3NDb250YWluZXI6IHRoaXMuXyRjb250cm9scy5nZXQoMCksCiAgICAgICAgICAgICAgICAgIGRlbGF5UmVwYWludDogbWFwQ29uZmlnLmRlbGF5UmVwYWludCwKICAgICAgICAgICAgICAgICAgdmlld0NvbmZpZzogdGhpcy5fdmVnYVZpZXdDb25maWcsCiAgICAgICAgICAgICAgICAgIG9uV2FybmluZzogdGhpcy5vbldhcm4uYmluZCh0aGlzKSwKICAgICAgICAgICAgICAgICAgb25FcnJvcjogdGhpcy5vbkVycm9yLmJpbmQodGhpcykKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5hZGRMYXllcih2ZWdhTWFwTGF5ZXIpOwoKICAgICAgICAgICAgICAgIHRoaXMuX2FkZERlc3Ryb3lIYW5kbGVyKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuX2tpYmFuYU1hcC5yZW1vdmVMYXllcih2ZWdhTWFwTGF5ZXIpOwoKICAgICAgICAgICAgICAgICAgaWYgKGJhc2VNYXBPcHRzKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2tpYmFuYU1hcC5zZXRCYXNlTGF5ZXIobnVsbCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzLl9raWJhbmFNYXAuZGVzdHJveSgpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdmVnYVZpZXcgPSB2ZWdhTWFwTGF5ZXIuZ2V0VmVnYVZpZXcoKTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0RGVidWdWYWx1ZXModmVnYVZpZXcsIHRoaXMuX3BhcnNlci5zcGVjLCB0aGlzLl9wYXJzZXIudmxzcGVjKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFZpZXcodmVnYVZpZXcpOwoKICAgICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIF9pbml0Vmlld0N1c3RvbWl6YXRpb25zKCkgewogICAgICAgIHJldHVybiBfaW5pdFZpZXdDdXN0b21pemF0aW9uczIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9pbml0Vmlld0N1c3RvbWl6YXRpb25zOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gVmVnYU1hcFZpZXc7Cn0oX3ZlZ2FfYmFzZV92aWV3LlZlZ2FCYXNlVmlldyk7CgpleHBvcnRzLlZlZ2FNYXBWaWV3ID0gVmVnYU1hcFZpZXc7"},null]}