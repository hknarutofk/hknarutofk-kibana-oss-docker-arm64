{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/vis/agg_config.js","dependencies":[{"path":"src/legacy/ui/public/vis/agg_config.js","mtime":1572296413132},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkFnZ0NvbmZpZyA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX2ZpZWxkX2Zvcm1hdHMgPSByZXF1aXJlKCIuLi9yZWdpc3RyeS9maWVsZF9mb3JtYXRzIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKdmFyIEFnZ0NvbmZpZyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIF9jcmVhdGVDbGFzcyhBZ2dDb25maWcsIG51bGwsIFt7CiAgICBrZXk6ICJlbnN1cmVJZHMiLAoKICAgIC8qKgogICAgICogRW5zdXJlIHRoYXQgYWxsIG9mIHRoZSBvYmplY3RzIGluIHRoZSBsaXN0IGhhdmUgaWRzLCB0aGUgb2JqZWN0cwogICAgICogYW5kIGxpc3QgYXJlIG1vZGlmaWVkIGJ5IHJlZmVyZW5jZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIHthcnJheVtvYmplY3RdfSBsaXN0IC0gYSBsaXN0IG9mIG9iamVjdHMsIG9iamVjdHMgY2FuIGJlIGFueXRoaW5nIHJlYWxseQogICAgICogQHJldHVybiB7YXJyYXl9IC0gdGhlIGxpc3QgdGhhdCB3YXMgcGFzc2VkIGluCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBlbnN1cmVJZHMobGlzdCkgewogICAgICB2YXIgaGF2ZSA9IFtdOwogICAgICB2YXIgaGF2ZU5vdCA9IFtdOwogICAgICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKG9iaikgewogICAgICAgIChvYmouaWQgPyBoYXZlIDogaGF2ZU5vdCkucHVzaChvYmopOwogICAgICB9KTsKICAgICAgdmFyIG5leHRJZCA9IEFnZ0NvbmZpZy5uZXh0SWQoaGF2ZSk7CiAgICAgIGhhdmVOb3QuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgb2JqLmlkID0gU3RyaW5nKG5leHRJZCsrKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBsaXN0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgdGhlIG5leHQgaWQgYmFzZWQgb24gdGhlIGlkcyBpbiB0aGlzIGxpc3QKICAgICAqCiAgICAgKiBAcmV0dXJuIHthcnJheX0gbGlzdCAtIGEgbGlzdCBvZiBvYmplY3RzIHdpdGggaWQgcHJvcGVydGllcwogICAgICovCgogIH0sIHsKICAgIGtleTogIm5leHRJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dElkKGxpc3QpIHsKICAgICAgcmV0dXJuIDEgKyBsaXN0LnJlZHVjZShmdW5jdGlvbiAobWF4LCBvYmopIHsKICAgICAgICByZXR1cm4gTWF0aC5tYXgobWF4LCArb2JqLmlkIHx8IDApOwogICAgICB9LCAwKTsKICAgIH0KICB9XSk7CgogIGZ1bmN0aW9uIEFnZ0NvbmZpZyhhZ2dDb25maWdzKSB7CiAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFnZ0NvbmZpZyk7CgogICAgdGhpcy5hZ2dDb25maWdzID0gYWdnQ29uZmlnczsKICAgIHRoaXMuaWQgPSBTdHJpbmcob3B0cy5pZCB8fCBBZ2dDb25maWcubmV4dElkKGFnZ0NvbmZpZ3MpKTsKICAgIHRoaXMuX29wdHMgPSBvcHRzOwogICAgdGhpcy5lbmFibGVkID0gdHlwZW9mIG9wdHMuZW5hYmxlZCA9PT0gJ2Jvb2xlYW4nID8gb3B0cy5lbmFibGVkIDogdHJ1ZTsgLy8gc3RhcnQgd2l0aCBlbXB0eSBwYXJhbXMgc28gdGhhdCBjaGVja3MgaW4gdHlwZS9zY2hlbWEgc2V0dGVycyBkb24ndCBmcmVhawogICAgLy8gYmVjYXVzZSB0aGlzLnBhcmFtcyBpcyB1bmRlZmluZWQKCiAgICB0aGlzLnBhcmFtcyA9IHt9OyAvLyBzZXR0ZXJzCgogICAgdGhpcy50eXBlID0gb3B0cy50eXBlOwogICAgdGhpcy5zY2hlbWEgPSBvcHRzLnNjaGVtYTsgLy8gc2V0IHRoZSBwYXJhbXMgdG8gdGhlIHZhbHVlcyBmcm9tIG9wdHMsIG9yIGp1c3QgdG8gdGhlIGRlZmF1bHRzCgogICAgdGhpcy5zZXRQYXJhbXMob3B0cy5wYXJhbXMgfHwge30pOwogIH0KICAvKioKICAgKiBXcml0ZSB0aGUgY3VycmVudCB2YWx1ZXMgdG8gdGhpcy5wYXJhbXMsIGZpbGxpbmcgaW4gdGhlIGRlZmF1bHRzIGFzIHdlIGdvCiAgICoKICAgKiBAcGFyYW0gIHtvYmplY3R9IFtmcm9tXSAtIG9wdGlvbmFsIG9iamVjdCB0byByZWFkIHZhbHVlcyBmcm9tLAogICAqICAgICAgICAgICAgICAgICAgICAgICAgIHVzZWQgd2hlbiBpbml0aWFsaXppbmcKICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9CiAgICovCgoKICBfY3JlYXRlQ2xhc3MoQWdnQ29uZmlnLCBbewogICAga2V5OiAic2V0UGFyYW1zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQYXJhbXMoZnJvbSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZnJvbSA9IGZyb20gfHwgdGhpcy5wYXJhbXMgfHwge307CiAgICAgIHZhciB0byA9IHRoaXMucGFyYW1zID0ge307CiAgICAgIHRoaXMuZ2V0QWdnUGFyYW1zKCkuZm9yRWFjaChmdW5jdGlvbiAoYWdnUGFyYW0pIHsKICAgICAgICB2YXIgdmFsID0gZnJvbVthZ2dQYXJhbS5uYW1lXTsKCiAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7CiAgICAgICAgICBpZiAoYWdnUGFyYW0uZGVmYXVsdCA9PSBudWxsKSByZXR1cm47CgogICAgICAgICAgaWYgKCFfbG9kYXNoLmRlZmF1bHQuaXNGdW5jdGlvbihhZ2dQYXJhbS5kZWZhdWx0KSkgewogICAgICAgICAgICB2YWwgPSBhZ2dQYXJhbS5kZWZhdWx0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFsID0gYWdnUGFyYW0uZGVmYXVsdChfdGhpcyk7CiAgICAgICAgICAgIGlmICh2YWwgPT0gbnVsbCkgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGFnZ1BhcmFtLmRlc2VyaWFsaXplKSB7CiAgICAgICAgICB2YXIgaXNUeXBlZCA9IF9sb2Rhc2guZGVmYXVsdC5pc0Z1bmN0aW9uKGFnZ1BhcmFtLnR5cGUpOwoKICAgICAgICAgIHZhciBpc1R5cGUgPSBpc1R5cGVkICYmIHZhbCBpbnN0YW5jZW9mIGFnZ1BhcmFtLnR5cGU7CgogICAgICAgICAgdmFyIGlzT2JqZWN0ID0gIWlzVHlwZWQgJiYgX2xvZGFzaC5kZWZhdWx0LmlzT2JqZWN0KHZhbCk7CgogICAgICAgICAgdmFyIGlzRGVzZXJpYWxpemVkID0gaXNUeXBlIHx8IGlzT2JqZWN0OwoKICAgICAgICAgIGlmICghaXNEZXNlcmlhbGl6ZWQpIHsKICAgICAgICAgICAgdmFsID0gYWdnUGFyYW0uZGVzZXJpYWxpemUodmFsLCBfdGhpcyk7CiAgICAgICAgICB9CgogICAgICAgICAgdG9bYWdnUGFyYW0ubmFtZV0gPSB2YWw7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0b1thZ2dQYXJhbS5uYW1lXSA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAodmFsKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAid3JpdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHdyaXRlKGFnZ3MpIHsKICAgICAgcmV0dXJuIHRoaXMudHlwZS5wYXJhbXMud3JpdGUodGhpcywgYWdncyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNGaWx0ZXJhYmxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbHRlcmFibGUoKSB7CiAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQuaXNGdW5jdGlvbih0aGlzLnR5cGUuY3JlYXRlRmlsdGVyKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVGaWx0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUZpbHRlcihrZXkpIHsKICAgICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CgogICAgICBpZiAoIXRoaXMuaXNGaWx0ZXJhYmxlKCkpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgXCIiLmNvbmNhdCh0aGlzLnR5cGUudGl0bGUsICJcIiBhZ2dyZWdhdGlvbiBkb2VzIG5vdCBzdXBwb3J0IGZpbHRlcmluZy4iKSk7CiAgICAgIH0KCiAgICAgIHZhciBmaWVsZCA9IHRoaXMuZ2V0RmllbGQoKTsKICAgICAgdmFyIGxhYmVsID0gdGhpcy5nZXRGaWVsZERpc3BsYXlOYW1lKCk7CgogICAgICBpZiAoZmllbGQgJiYgIWZpZWxkLmZpbHRlcmFibGUpIHsKICAgICAgICB2YXIgbWVzc2FnZSA9ICJUaGUgXCIiLmNvbmNhdChsYWJlbCwgIlwiIGZpZWxkIGNhbiBub3QgYmUgdXNlZCBmb3IgZmlsdGVyaW5nLiIpOwoKICAgICAgICBpZiAoZmllbGQuc2NyaXB0ZWQpIHsKICAgICAgICAgIG1lc3NhZ2UgPSAiVGhlIFwiIi5jb25jYXQobGFiZWwsICJcIiBmaWVsZCBpcyBzY3JpcHRlZCBhbmQgY2FuIG5vdCBiZSB1c2VkIGZvciBmaWx0ZXJpbmcuIik7CiAgICAgICAgfQoKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKG1lc3NhZ2UpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy50eXBlLmNyZWF0ZUZpbHRlcih0aGlzLCBrZXksIHBhcmFtcyk7CiAgICB9CiAgICAvKioKICAgICAqICBIb29rIGZvciBwcmUtZmxpZ2h0IGxvZ2ljLCBzZWUgQWdnVHlwZSNvblNlYXJjaFJlcXVlc3RTdGFydAogICAgICogIEBwYXJhbSB7Q291cmllci5TZWFyY2hTb3VyY2V9IHNlYXJjaFNvdXJjZQogICAgICogIEBwYXJhbSB7Q291cmllci5TZWFyY2hSZXF1ZXN0fSBzZWFyY2hSZXF1ZXN0CiAgICAgKiAgQHJldHVybiB7UHJvbWlzZTx1bmRlZmluZWQ+fQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uU2VhcmNoUmVxdWVzdFN0YXJ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNlYXJjaFJlcXVlc3RTdGFydChzZWFyY2hTb3VyY2UsIHNlYXJjaFJlcXVlc3QpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMudHlwZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHRoaXMudHlwZS5wYXJhbXMubWFwKGZ1bmN0aW9uIChwYXJhbSkgewogICAgICAgIHJldHVybiBwYXJhbS5tb2RpZnlBZ2dDb25maWdPblNlYXJjaFJlcXVlc3RTdGFydChfdGhpczIsIHNlYXJjaFNvdXJjZSwgc2VhcmNoUmVxdWVzdCk7CiAgICAgIH0pKTsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0aGlzIGFnZ0NvbmZpZyB0byBpdHMgZHNsIHN5bnRheC4KICAgICAqCiAgICAgKiBBZGRzIHBhcmFtcyBhbmQgYWRob2Mgc3ViYWdncyB0byBhIHBvam8sIHRoZW4gcmV0dXJucyBpdAogICAgICoKICAgICAqIEBwYXJhbSAge0FnZ0NvbmZpZ3N9IGFnZ0NvbmZpZ3MgLSB0aGUgY29uZmlnIG9iamVjdCB0byBjb252ZXJ0CiAgICAgKiBAcmV0dXJuIHt2b2lkfE9iamVjdH0gLSBpZiB0aGUgY29uZmlnIGhhcyBhIGRzbCByZXByZXNlbnRhdGlvbiwgaXQgaXMKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVkLCBlbHNlIHVuZGVmaW5lZCBpcyByZXR1cm5lZAogICAgICovCgogIH0sIHsKICAgIGtleTogInRvRHNsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b0RzbChhZ2dDb25maWdzKSB7CiAgICAgIGlmICh0aGlzLnR5cGUuaGFzTm9Ec2wpIHJldHVybjsKICAgICAgdmFyIG91dHB1dCA9IHRoaXMud3JpdGUoYWdnQ29uZmlncyk7CiAgICAgIHZhciBjb25maWdEc2wgPSB7fTsKICAgICAgY29uZmlnRHNsW3RoaXMudHlwZS5kc2xOYW1lIHx8IHRoaXMudHlwZS5uYW1lXSA9IG91dHB1dC5wYXJhbXM7IC8vIGlmIHRoZSBjb25maWcgcmVxdWlyZXMgc3ViQWdncywgd3JpdGUgdGhlbSB0byB0aGUgZHNsIGFzIHdlbGwKCiAgICAgIGlmICh0aGlzLnN1YkFnZ3MgJiYgIW91dHB1dC5zdWJBZ2dzKSBvdXRwdXQuc3ViQWdncyA9IHRoaXMuc3ViQWdnczsKCiAgICAgIGlmIChvdXRwdXQuc3ViQWdncykgewogICAgICAgIHZhciBzdWJEc2xMdmwgPSBjb25maWdEc2wuYWdncyB8fCAoY29uZmlnRHNsLmFnZ3MgPSB7fSk7CiAgICAgICAgb3V0cHV0LnN1YkFnZ3MuZm9yRWFjaChmdW5jdGlvbiBuZXN0QWRob2NTdWJBZ2dzKHN1YkFnZ0NvbmZpZykgewogICAgICAgICAgc3ViRHNsTHZsW3N1YkFnZ0NvbmZpZy5pZF0gPSBzdWJBZ2dDb25maWcudG9Ec2woYWdnQ29uZmlncyk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChvdXRwdXQucGFyZW50QWdncykgewogICAgICAgIHZhciBfc3ViRHNsTHZsID0gY29uZmlnRHNsLnBhcmVudEFnZ3MgfHwgKGNvbmZpZ0RzbC5wYXJlbnRBZ2dzID0ge30pOwoKICAgICAgICBvdXRwdXQucGFyZW50QWdncy5mb3JFYWNoKGZ1bmN0aW9uIG5lc3RBZGhvY1N1YkFnZ3Moc3ViQWdnQ29uZmlnKSB7CiAgICAgICAgICBfc3ViRHNsTHZsW3N1YkFnZ0NvbmZpZy5pZF0gPSBzdWJBZ2dDb25maWcudG9Ec2woYWdnQ29uZmlncyk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb25maWdEc2w7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9KU09OIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b0pTT04oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zOwoKICAgICAgdmFyIG91dFBhcmFtcyA9IF9sb2Rhc2guZGVmYXVsdC50cmFuc2Zvcm0odGhpcy5nZXRBZ2dQYXJhbXMoKSwgZnVuY3Rpb24gKG91dCwgYWdnUGFyYW0pIHsKICAgICAgICB2YXIgdmFsID0gcGFyYW1zW2FnZ1BhcmFtLm5hbWVdOyAvLyBkb24ndCBzZXJpYWxpemUgdW5kZWZpbmVkL251bGwgdmFsdWVzCgogICAgICAgIGlmICh2YWwgPT0gbnVsbCkgcmV0dXJuOwogICAgICAgIGlmIChhZ2dQYXJhbS5zZXJpYWxpemUpIHZhbCA9IGFnZ1BhcmFtLnNlcmlhbGl6ZSh2YWwsIF90aGlzMyk7CiAgICAgICAgaWYgKHZhbCA9PSBudWxsKSByZXR1cm47IC8vIHRvIHByZXZlbnQgYWNjaWRlbnRhbCBsZWFraW5nLCB3ZSB3aWxsIGNsb25lIGFsbCBjb21wbGV4IHZhbHVlcwoKICAgICAgICBvdXRbYWdnUGFyYW0ubmFtZV0gPSBfbG9kYXNoLmRlZmF1bHQuY2xvbmVEZWVwKHZhbCk7CiAgICAgIH0sIHt9KTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IHRoaXMuaWQsCiAgICAgICAgZW5hYmxlZDogdGhpcy5lbmFibGVkLAogICAgICAgIHR5cGU6IHRoaXMudHlwZSAmJiB0aGlzLnR5cGUubmFtZSwKICAgICAgICBzY2hlbWE6IHRoaXMuc2NoZW1hICYmIHRoaXMuc2NoZW1hLm5hbWUsCiAgICAgICAgcGFyYW1zOiBvdXRQYXJhbXMKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRBZ2dQYXJhbXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFnZ1BhcmFtcygpIHsKICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy50eXBlID8gdGhpcy50eXBlLnBhcmFtcy5yYXcgOiBbXSksIF90b0NvbnN1bWFibGVBcnJheShfbG9kYXNoLmRlZmF1bHQuaGFzKHRoaXMsICdzY2hlbWEucGFyYW1zJykgPyB0aGlzLnNjaGVtYS5wYXJhbXMucmF3IDogW10pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRSZXF1ZXN0QWdncyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVxdWVzdEFnZ3MoKSB7CiAgICAgIGlmICghdGhpcy50eXBlKSByZXR1cm47CiAgICAgIHJldHVybiB0aGlzLnR5cGUuZ2V0UmVxdWVzdEFnZ3ModGhpcykgfHwgW3RoaXNdOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFJlc3BvbnNlQWdncyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVzcG9uc2VBZ2dzKCkgewogICAgICBpZiAoIXRoaXMudHlwZSkgcmV0dXJuOwogICAgICByZXR1cm4gdGhpcy50eXBlLmdldFJlc3BvbnNlQWdncyh0aGlzKSB8fCBbdGhpc107CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VmFsdWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKGJ1Y2tldCkgewogICAgICByZXR1cm4gdGhpcy50eXBlLmdldFZhbHVlKHRoaXMsIGJ1Y2tldCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0S2V5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRLZXkoYnVja2V0LCBrZXkpIHsKICAgICAgcmV0dXJuIHRoaXMudHlwZS5nZXRLZXkoYnVja2V0LCBrZXksIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEZpZWxkRGlzcGxheU5hbWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZpZWxkRGlzcGxheU5hbWUoKSB7CiAgICAgIHZhciBmaWVsZCA9IHRoaXMuZ2V0RmllbGQoKTsKICAgICAgcmV0dXJuIGZpZWxkID8gZmllbGQuZGlzcGxheU5hbWUgfHwgdGhpcy5maWVsZE5hbWUoKSA6ICcnOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEZpZWxkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWVsZCgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLmZpZWxkOwogICAgfQogIH0sIHsKICAgIGtleTogIm1ha2VMYWJlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWFrZUxhYmVsKCkgewogICAgICB2YXIgcGVyY2VudGFnZU1vZGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlOwoKICAgICAgaWYgKHRoaXMucGFyYW1zLmN1c3RvbUxhYmVsKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLmN1c3RvbUxhYmVsOwogICAgICB9CgogICAgICBpZiAoIXRoaXMudHlwZSkgcmV0dXJuICcnOwogICAgICByZXR1cm4gcGVyY2VudGFnZU1vZGUgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgnY29tbW9uLnVpLnZpcy5hZ2dDb25maWcucGVyY2VudGFnZU9mTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQZXJjZW50YWdlIG9mIHtsYWJlbH0nLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgbGFiZWw6IHRoaXMudHlwZS5tYWtlTGFiZWwodGhpcykKICAgICAgICB9CiAgICAgIH0pIDogIiIuY29uY2F0KHRoaXMudHlwZS5tYWtlTGFiZWwodGhpcykpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEluZGV4UGF0dGVybiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5kZXhQYXR0ZXJuKCkgewogICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmdldCh0aGlzLmFnZ0NvbmZpZ3MsICdpbmRleFBhdHRlcm4nLCBudWxsKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRUaW1lUmFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpbWVSYW5nZSgpIHsKICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5nZXQodGhpcy5hZ2dDb25maWdzLCAndGltZVJhbmdlJywgbnVsbCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmllbGRGb3JtYXR0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpZWxkRm9ybWF0dGVyKGNvbnRlbnRUeXBlLCBkZWZhdWx0Rm9ybWF0KSB7CiAgICAgIHZhciBmb3JtYXQgPSB0aGlzLnR5cGUgJiYgdGhpcy50eXBlLmdldEZvcm1hdCh0aGlzKTsKICAgICAgaWYgKGZvcm1hdCkgcmV0dXJuIGZvcm1hdC5nZXRDb252ZXJ0ZXJGb3IoY29udGVudFR5cGUpOwogICAgICByZXR1cm4gdGhpcy5maWVsZE93bkZvcm1hdHRlcihjb250ZW50VHlwZSwgZGVmYXVsdEZvcm1hdCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmllbGRPd25Gb3JtYXR0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpZWxkT3duRm9ybWF0dGVyKGNvbnRlbnRUeXBlLCBkZWZhdWx0Rm9ybWF0KSB7CiAgICAgIHZhciBmaWVsZCA9IHRoaXMuZ2V0RmllbGQoKTsKICAgICAgdmFyIGZvcm1hdCA9IGZpZWxkICYmIGZpZWxkLmZvcm1hdDsKICAgICAgaWYgKCFmb3JtYXQpIGZvcm1hdCA9IGRlZmF1bHRGb3JtYXQ7CiAgICAgIGlmICghZm9ybWF0KSBmb3JtYXQgPSBfZmllbGRfZm9ybWF0cy5maWVsZEZvcm1hdHMuZ2V0RGVmYXVsdEluc3RhbmNlKCdzdHJpbmcnKTsKICAgICAgcmV0dXJuIGZvcm1hdC5nZXRDb252ZXJ0ZXJGb3IoY29udGVudFR5cGUpOwogICAgfQogIH0sIHsKICAgIGtleTogImZpZWxkTmFtZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmllbGROYW1lKCkgewogICAgICB2YXIgZmllbGQgPSB0aGlzLmdldEZpZWxkKCk7CiAgICAgIHJldHVybiBmaWVsZCA/IGZpZWxkLm5hbWUgOiAnJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWVsZElzVGltZUZpZWxkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaWVsZElzVGltZUZpZWxkKCkgewogICAgICB2YXIgdGltZUZpZWxkTmFtZSA9IHRoaXMuZ2V0SW5kZXhQYXR0ZXJuKCkudGltZUZpZWxkTmFtZTsKICAgICAgcmV0dXJuIHRpbWVGaWVsZE5hbWUgJiYgdGhpcy5maWVsZE5hbWUoKSA9PT0gdGltZUZpZWxkTmFtZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0eXBlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fX3R5cGU7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodHlwZSkgewogICAgICBpZiAodGhpcy5fX3R5cGVEZWNvcmF0aW9ucykgewogICAgICAgIF9sb2Rhc2guZGVmYXVsdC5mb3JPd24odGhpcy5fX3R5cGVEZWNvcmF0aW9ucywgZnVuY3Rpb24gKHByb3AsIG5hbWUpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzW25hbWVdOwogICAgICAgIH0sIHRoaXMpOwogICAgICB9CgogICAgICBpZiAoX2xvZGFzaC5kZWZhdWx0LmlzU3RyaW5nKHR5cGUpKSB7CiAgICAgICAgLy8gV2UgbmVlZCB0byBpbmxpbmUgcmVxdWlyZSBoZXJlLCBzaW5jZSB3ZSdyZSBoYXZpbmcgYSBjeWNsaWMgZGVwZW5kZW5jeQogICAgICAgIC8vIGZyb20gc29tZXdoZXJlIGluc2lkZSBhZ2dfdHlwZXMgYmFjayB0byBBZ2dDb25maWcuCiAgICAgICAgdHlwZSA9IHJlcXVpcmUoJy4uL2FnZ190eXBlcycpLmFnZ1R5cGVzLmJ5TmFtZVt0eXBlXTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgJiYgX2xvZGFzaC5kZWZhdWx0LmlzRnVuY3Rpb24odHlwZS5kZWNvcmF0ZUFnZ0NvbmZpZykpIHsKICAgICAgICB0aGlzLl9fdHlwZURlY29yYXRpb25zID0gdHlwZS5kZWNvcmF0ZUFnZ0NvbmZpZygpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHRoaXMuX190eXBlRGVjb3JhdGlvbnMpOwogICAgICB9CgogICAgICB0aGlzLl9fdHlwZSA9IHR5cGU7CgogICAgICB2YXIgZmllbGRQYXJhbSA9IF9sb2Rhc2guZGVmYXVsdC5nZXQodGhpcywgJ3R5cGUucGFyYW1zLmJ5TmFtZS5maWVsZCcpOwoKICAgICAgdmFyIGF2YWlsYWJsZUZpZWxkcyA9IGZpZWxkUGFyYW0gPyBmaWVsZFBhcmFtLmdldEF2YWlsYWJsZUZpZWxkcyh0aGlzLmdldEluZGV4UGF0dGVybigpLmZpZWxkcykgOiBbXTsgLy8gY2xlYXIgb3V0IHRoZSBwcmV2aW91cyBwYXJhbXMgZXhjZXB0IGZvciBhIGZldyBzcGVjaWFsIG9uZXMKCiAgICAgIHRoaXMuc2V0UGFyYW1zKHsKICAgICAgICAvLyBzcGxpdCByb3cvY29sdW1ucyBpcyAib3V0c2lkZSIgb2YgdGhlIGFnZywgc28gZG9uJ3QgcmVzZXQgaXQKICAgICAgICByb3c6IHRoaXMucGFyYW1zLnJvdywKICAgICAgICAvLyBhbG1vc3QgZXZlcnkgYWdnIGhhcyBmaWVsZHMsIHNvIHdlIHRyeSB0byBwZXJzaXN0IHRoYXQgd2hlbiB0eXBlIGNoYW5nZXMKICAgICAgICBmaWVsZDogX2xvZGFzaC5kZWZhdWx0LmdldChhdmFpbGFibGVGaWVsZHMsIFsnYnlOYW1lJywgdGhpcy5nZXRGaWVsZCgpXSkKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2NoZW1hIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fX3NjaGVtYTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChzY2hlbWEpIHsKICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5pc1N0cmluZyhzY2hlbWEpICYmIHRoaXMuYWdnQ29uZmlncy5zY2hlbWFzKSB7CiAgICAgICAgc2NoZW1hID0gdGhpcy5hZ2dDb25maWdzLnNjaGVtYXMuYnlOYW1lW3NjaGVtYV07CiAgICAgIH0KCiAgICAgIHRoaXMuX19zY2hlbWEgPSBzY2hlbWE7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQWdnQ29uZmlnOwp9KCk7CgpleHBvcnRzLkFnZ0NvbmZpZyA9IEFnZ0NvbmZpZzs="},null]}