{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/management/sections/objects/lib/resolve_saved_objects.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/management/sections/objects/lib/resolve_saved_objects.js","mtime":1572296410720},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnJlc29sdmVJbmRleFBhdHRlcm5Db25mbGljdHMgPSByZXNvbHZlSW5kZXhQYXR0ZXJuQ29uZmxpY3RzOwpleHBvcnRzLnNhdmVPYmplY3RzID0gc2F2ZU9iamVjdHM7CmV4cG9ydHMuc2F2ZU9iamVjdCA9IHNhdmVPYmplY3Q7CmV4cG9ydHMucmVzb2x2ZVNhdmVkU2VhcmNoZXMgPSByZXNvbHZlU2F2ZWRTZWFyY2hlczsKZXhwb3J0cy5yZXNvbHZlU2F2ZWRPYmplY3RzID0gcmVzb2x2ZVNhdmVkT2JqZWN0czsKCnZhciBfZXJyb3JzID0gcmVxdWlyZSgidWkvZXJyb3JzIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBnZXRTYXZlZE9iamVjdChfeCwgX3gyKSB7CiAgcmV0dXJuIF9nZXRTYXZlZE9iamVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0U2F2ZWRPYmplY3QoKSB7CiAgX2dldFNhdmVkT2JqZWN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZG9jLCBzZXJ2aWNlcykgewogICAgdmFyIHNlcnZpY2UsIG9iajsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgc2VydmljZSA9IHNlcnZpY2VzLmZpbmQoZnVuY3Rpb24gKHNlcnZpY2UpIHsKICAgICAgICAgICAgICByZXR1cm4gc2VydmljZS50eXBlID09PSBkb2MuX3R5cGU7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKHNlcnZpY2UpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0KCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBvYmogPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBvYmouaWQgPSBkb2MuX2lkOwogICAgICAgICAgICBvYmoubWlncmF0aW9uVmVyc2lvbiA9IGRvYy5fbWlncmF0aW9uVmVyc2lvbjsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgb2JqKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfZ2V0U2F2ZWRPYmplY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gYWRkSnNvbkZpZWxkVG9JbmRleFBhdHRlcm4odGFyZ2V0LCBzb3VyY2VTdHJpbmcsIGZpZWxkTmFtZSwgaW5kZXhOYW1lKSB7CiAgaWYgKHNvdXJjZVN0cmluZykgewogICAgdHJ5IHsKICAgICAgdGFyZ2V0W2ZpZWxkTmFtZV0gPSBKU09OLnBhcnNlKHNvdXJjZVN0cmluZyk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50Lm9iamVjdHMucGFyc2luZ0ZpZWxkRXJyb3JNZXNzYWdlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRXJyb3IgZW5jb3VudGVyZWQgcGFyc2luZyB7ZmllbGROYW1lfSBmb3IgaW5kZXggcGF0dGVybiB7aW5kZXhOYW1lfToge2Vycm9yTWVzc2FnZX0nLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgZmllbGROYW1lOiBmaWVsZE5hbWUsCiAgICAgICAgICBpbmRleE5hbWU6IGluZGV4TmFtZSwKICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IubWVzc2FnZQogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogIH0KfQoKZnVuY3Rpb24gaW1wb3J0SW5kZXhQYXR0ZXJuKF94MywgX3g0LCBfeDUsIF94NikgewogIHJldHVybiBfaW1wb3J0SW5kZXhQYXR0ZXJuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9pbXBvcnRJbmRleFBhdHRlcm4oKSB7CiAgX2ltcG9ydEluZGV4UGF0dGVybiA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihkb2MsIGluZGV4UGF0dGVybnMsIG92ZXJ3cml0ZUFsbCwgY29uZmlybU1vZGFsUHJvbWlzZSkgewogICAgdmFyIGVtcHR5UGF0dGVybiwgX2RvYyRfc291cmNlLCB0aXRsZSwgdGltZUZpZWxkTmFtZSwgZmllbGRzLCBmaWVsZEZvcm1hdE1hcCwgc291cmNlRmlsdGVycywgdHlwZSwgdHlwZU1ldGEsIGltcG9ydGVkSW5kZXhQYXR0ZXJuLCBuZXdJZDsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBpbmRleFBhdHRlcm5zLmdldCgpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgZW1wdHlQYXR0ZXJuID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIF9kb2MkX3NvdXJjZSA9IGRvYy5fc291cmNlLCB0aXRsZSA9IF9kb2MkX3NvdXJjZS50aXRsZSwgdGltZUZpZWxkTmFtZSA9IF9kb2MkX3NvdXJjZS50aW1lRmllbGROYW1lLCBmaWVsZHMgPSBfZG9jJF9zb3VyY2UuZmllbGRzLCBmaWVsZEZvcm1hdE1hcCA9IF9kb2MkX3NvdXJjZS5maWVsZEZvcm1hdE1hcCwgc291cmNlRmlsdGVycyA9IF9kb2MkX3NvdXJjZS5zb3VyY2VGaWx0ZXJzLCB0eXBlID0gX2RvYyRfc291cmNlLnR5cGUsIHR5cGVNZXRhID0gX2RvYyRfc291cmNlLnR5cGVNZXRhOwogICAgICAgICAgICBpbXBvcnRlZEluZGV4UGF0dGVybiA9IHsKICAgICAgICAgICAgICBpZDogZG9jLl9pZCwKICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgdGltZUZpZWxkTmFtZTogdGltZUZpZWxkTmFtZQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaWYgKHR5cGUpIHsKICAgICAgICAgICAgICBpbXBvcnRlZEluZGV4UGF0dGVybi50eXBlID0gdHlwZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYWRkSnNvbkZpZWxkVG9JbmRleFBhdHRlcm4oaW1wb3J0ZWRJbmRleFBhdHRlcm4sIGZpZWxkcywgJ2ZpZWxkcycsIHRpdGxlKTsKICAgICAgICAgICAgYWRkSnNvbkZpZWxkVG9JbmRleFBhdHRlcm4oaW1wb3J0ZWRJbmRleFBhdHRlcm4sIGZpZWxkRm9ybWF0TWFwLCAnZmllbGRGb3JtYXRNYXAnLCB0aXRsZSk7CiAgICAgICAgICAgIGFkZEpzb25GaWVsZFRvSW5kZXhQYXR0ZXJuKGltcG9ydGVkSW5kZXhQYXR0ZXJuLCBzb3VyY2VGaWx0ZXJzLCAnc291cmNlRmlsdGVycycsIHRpdGxlKTsKICAgICAgICAgICAgYWRkSnNvbkZpZWxkVG9JbmRleFBhdHRlcm4oaW1wb3J0ZWRJbmRleFBhdHRlcm4sIHR5cGVNZXRhLCAndHlwZU1ldGEnLCB0aXRsZSk7CiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZW1wdHlQYXR0ZXJuLCBpbXBvcnRlZEluZGV4UGF0dGVybik7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgIHJldHVybiBlbXB0eVBhdHRlcm4uY3JlYXRlKG92ZXJ3cml0ZUFsbCk7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgbmV3SWQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgIGlmIChuZXdJZCkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTU7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTg7CiAgICAgICAgICAgIHJldHVybiBjb25maXJtTW9kYWxQcm9taXNlKF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4ubWFuYWdlbWVudC5pbmRleFBhdHRlcm4uY29uZmlybU92ZXJ3cml0ZUxhYmVsJywgewogICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIG92ZXJ3cml0ZSBcJ3t0aXRsZX1cJz8nCiAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4ubWFuYWdlbWVudC5pbmRleFBhdHRlcm4uY29uZmlybU92ZXJ3cml0ZVRpdGxlJywgewogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdPdmVyd3JpdGUge3R5cGV9PycsCiAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQuaW5kZXhQYXR0ZXJuLmNvbmZpcm1PdmVyd3JpdGVCdXR0b24nLCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ092ZXJ3cml0ZScKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIwOwogICAgICAgICAgICByZXR1cm4gZW1wdHlQYXR0ZXJuLmNyZWF0ZSh0cnVlKTsKCiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBuZXdJZCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI2OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDIzOwogICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMTUpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgaW5kZXhQYXR0ZXJucy5jbGVhckNhY2hlKG5ld0lkKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIG5ld0lkKTsKCiAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMiwgdGhpcywgW1sxNSwgMjNdXSk7CiAgfSkpOwogIHJldHVybiBfaW1wb3J0SW5kZXhQYXR0ZXJuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGltcG9ydERvY3VtZW50KF94NywgX3g4LCBfeDkpIHsKICByZXR1cm4gX2ltcG9ydERvY3VtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9pbXBvcnREb2N1bWVudCgpIHsKICBfaW1wb3J0RG9jdW1lbnQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMob2JqLCBkb2MsIG92ZXJ3cml0ZUFsbCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gb2JqLmFwcGx5RVNSZXNwKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgIHJlZmVyZW5jZXM6IGRvYy5fcmVmZXJlbmNlcyB8fCBbXQogICAgICAgICAgICB9LCBkb2MpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIG9iai5zYXZlKHsKICAgICAgICAgICAgICBjb25maXJtT3ZlcndyaXRlOiAhb3ZlcndyaXRlQWxsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0My5zZW50KTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CiAgcmV0dXJuIF9pbXBvcnREb2N1bWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBncm91cEJ5VHlwZShkb2NzKSB7CiAgdmFyIGRlZmF1bHREb2NUeXBlcyA9IHsKICAgIHNlYXJjaGVzOiBbXSwKICAgIGluZGV4UGF0dGVybnM6IFtdLAogICAgb3RoZXI6IFtdCiAgfTsKICByZXR1cm4gZG9jcy5yZWR1Y2UoZnVuY3Rpb24gKHR5cGVzLCBkb2MpIHsKICAgIHN3aXRjaCAoZG9jLl90eXBlKSB7CiAgICAgIGNhc2UgJ3NlYXJjaCc6CiAgICAgICAgdHlwZXMuc2VhcmNoZXMucHVzaChkb2MpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnaW5kZXgtcGF0dGVybic6CiAgICAgICAgdHlwZXMuaW5kZXhQYXR0ZXJucy5wdXNoKGRvYyk7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIHR5cGVzLm90aGVyLnB1c2goZG9jKTsKICAgIH0KCiAgICByZXR1cm4gdHlwZXM7CiAgfSwgZGVmYXVsdERvY1R5cGVzKTsKfQoKZnVuY3Rpb24gYXdhaXRFYWNoSXRlbUluUGFyYWxsZWwoX3gxMCwgX3gxMSkgewogIHJldHVybiBfYXdhaXRFYWNoSXRlbUluUGFyYWxsZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2F3YWl0RWFjaEl0ZW1JblBhcmFsbGVsKCkgewogIF9hd2FpdEVhY2hJdGVtSW5QYXJhbGxlbCA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChsaXN0LCBvcCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICByZXR1cm4gb3AoaXRlbSk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDQuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNCk7CiAgfSkpOwogIHJldHVybiBfYXdhaXRFYWNoSXRlbUluUGFyYWxsZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gcmVzb2x2ZUluZGV4UGF0dGVybkNvbmZsaWN0cyhfeDEyLCBfeDEzLCBfeDE0KSB7CiAgcmV0dXJuIF9yZXNvbHZlSW5kZXhQYXR0ZXJuQ29uZmxpY3RzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9yZXNvbHZlSW5kZXhQYXR0ZXJuQ29uZmxpY3RzKCkgewogIF9yZXNvbHZlSW5kZXhQYXR0ZXJuQ29uZmxpY3RzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHJlc29sdXRpb25zLCBjb25mbGljdGVkSW5kZXhQYXR0ZXJucywgb3ZlcndyaXRlQWxsKSB7CiAgICB2YXIgaW1wb3J0Q291bnQ7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpbXBvcnRDb3VudCA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0RWFjaEl0ZW1JblBhcmFsbGVsKGNvbmZsaWN0ZWRJbmRleFBhdHRlcm5zLAogICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoX3JlZikgewogICAgICAgICAgICAgICAgdmFyIG9iaiwgb2xkSW5kZXhJZCwgcmVzb2x1dGlvbiwgbmV3SW5kZXhJZCwgZmlsdGVyOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gX3JlZi5vYmo7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc29sdmUgc2VhcmNoIGluZGV4IHJlZmVyZW5jZToKICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXhJZCA9IG9iai5zZWFyY2hTb3VyY2UuZ2V0T3duRmllbGQoJ2luZGV4Jyk7IC8vIERlcGVuZGluZyBvbiB0aGUgb2JqZWN0LCB0aGlzIGNhbiBlaXRoZXIgYmUgdGhlIHJhdyBpZCBvciB0aGUgYWN0dWFsIGluZGV4IHBhdHRlcm4gb2JqZWN0CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9sZEluZGV4SWQgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXhJZCA9IG9sZEluZGV4SWQuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb24gPSByZXNvbHV0aW9ucy5maW5kKGZ1bmN0aW9uIChfcmVmMykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRJZCA9IF9yZWYzLm9sZElkOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbGRJZCA9PT0gb2xkSW5kZXhJZDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc29sdXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4SWQgPSByZXNvbHV0aW9uLm5ld0lkOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmouaHlkcmF0ZUluZGV4UGF0dGVybihuZXdJbmRleElkKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc29sdmUgZmlsdGVyIGluZGV4IHJlZmVyZW5jZToKICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyID0gKG9iai5zZWFyY2hTb3VyY2UuZ2V0T3duRmllbGQoJ2ZpbHRlcicpIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGZpbHRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGZpbHRlci5tZXRhICYmIGZpbHRlci5tZXRhLmluZGV4KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb24gPSByZXNvbHV0aW9ucy5maW5kKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZElkID0gX3JlZjQub2xkSWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkSWQgPT09IGZpbHRlci5tZXRhLmluZGV4OwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uID8gX29iamVjdFNwcmVhZCh7fSwgZmlsdGVyLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YTogX29iamVjdFNwcmVhZCh7fSwgZmlsdGVyLm1ldGEsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHJlc29sdXRpb24ubmV3SWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBmaWx0ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNlYXJjaFNvdXJjZS5zZXRGaWVsZCgnZmlsdGVyJywgZmlsdGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc29sdXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNhdmVPYmplY3Qob2JqLCBvdmVyd3JpdGVBbGwpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2NvbnRleHQ1LnNlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRDb3VudCsrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyOCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBpbXBvcnRDb3VudCk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNik7CiAgfSkpOwogIHJldHVybiBfcmVzb2x2ZUluZGV4UGF0dGVybkNvbmZsaWN0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBzYXZlT2JqZWN0cyhfeDE1LCBfeDE2KSB7CiAgcmV0dXJuIF9zYXZlT2JqZWN0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfc2F2ZU9iamVjdHMoKSB7CiAgX3NhdmVPYmplY3RzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KG9ianMsIG92ZXJ3cml0ZUFsbCkgewogICAgdmFyIGltcG9ydENvdW50OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaW1wb3J0Q291bnQgPSAwOwogICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBhd2FpdEVhY2hJdGVtSW5QYXJhbGxlbChvYmpzLAogICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3JlZjUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcob2JqKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzYXZlT2JqZWN0KG9iaiwgb3ZlcndyaXRlQWxsKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2NvbnRleHQ3LnNlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydENvdW50Kys7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MjkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgaW1wb3J0Q291bnQpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTgpOwogIH0pKTsKICByZXR1cm4gX3NhdmVPYmplY3RzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHNhdmVPYmplY3QoX3gxNywgX3gxOCkgewogIHJldHVybiBfc2F2ZU9iamVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfc2F2ZU9iamVjdCgpIHsKICBfc2F2ZU9iamVjdCA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOShvYmosIG92ZXJ3cml0ZUFsbCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gb2JqLnNhdmUoewogICAgICAgICAgICAgIGNvbmZpcm1PdmVyd3JpdGU6ICFvdmVyd3JpdGVBbGwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ5LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTkpOwogIH0pKTsKICByZXR1cm4gX3NhdmVPYmplY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gcmVzb2x2ZVNhdmVkU2VhcmNoZXMoX3gxOSwgX3gyMCwgX3gyMSwgX3gyMikgewogIHJldHVybiBfcmVzb2x2ZVNhdmVkU2VhcmNoZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3Jlc29sdmVTYXZlZFNlYXJjaGVzKCkgewogIF9yZXNvbHZlU2F2ZWRTZWFyY2hlcyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoc2F2ZWRTZWFyY2hlcywgc2VydmljZXMsIGluZGV4UGF0dGVybnMsIG92ZXJ3cml0ZUFsbCkgewogICAgdmFyIGltcG9ydENvdW50OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGltcG9ydENvdW50ID0gMDsKICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0RWFjaEl0ZW1JblBhcmFsbGVsKHNhdmVkU2VhcmNoZXMsCiAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoc2VhcmNoRG9jKSB7CiAgICAgICAgICAgICAgICB2YXIgb2JqOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRTYXZlZE9iamVjdChzZWFyY2hEb2MsIHNlcnZpY2VzKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IF9jb250ZXh0MTAuc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmopIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGltcG9ydERvY3VtZW50KG9iaiwgc2VhcmNoRG9jLCBvdmVyd3JpdGVBbGwpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfY29udGV4dDEwLnNlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRDb3VudCsrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MzApIHsKICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIGltcG9ydENvdW50KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTEpOwogIH0pKTsKICByZXR1cm4gX3Jlc29sdmVTYXZlZFNlYXJjaGVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHJlc29sdmVTYXZlZE9iamVjdHMoX3gyMywgX3gyNCwgX3gyNSwgX3gyNiwgX3gyNykgewogIHJldHVybiBfcmVzb2x2ZVNhdmVkT2JqZWN0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfcmVzb2x2ZVNhdmVkT2JqZWN0cygpIHsKICBfcmVzb2x2ZVNhdmVkT2JqZWN0cyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTUoc2F2ZWRPYmplY3RzLCBvdmVyd3JpdGVBbGwsIHNlcnZpY2VzLCBpbmRleFBhdHRlcm5zLCBjb25maXJtTW9kYWxQcm9taXNlKSB7CiAgICB2YXIgZG9jVHlwZXMsIGltcG9ydGVkT2JqZWN0Q291bnQsIGZhaWxlZEltcG9ydHMsIGNvbmZsaWN0ZWRTZWFyY2hEb2NzLCBjb25mbGljdGVkSW5kZXhQYXR0ZXJucywgY29uZmxpY3RlZFNhdmVkT2JqZWN0c0xpbmtlZFRvU2F2ZWRTZWFyY2hlczsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTUkKF9jb250ZXh0MTUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBkb2NUeXBlcyA9IGdyb3VwQnlUeXBlKHNhdmVkT2JqZWN0cyk7IC8vIEtlZXAgdHJhY2sgb2YgaG93IG1hbnkgd2UgYWN0dWFsbHkgaW1wb3J0IGJlY2F1c2UgdGhlIHVzZXIKICAgICAgICAgICAgLy8gY2FuIGNhbmNlbCBhbiBvdmVycmlkZQoKICAgICAgICAgICAgaW1wb3J0ZWRPYmplY3RDb3VudCA9IDA7CiAgICAgICAgICAgIGZhaWxlZEltcG9ydHMgPSBbXTsgLy8gU3RhcnQgd2l0aCB0aGUgaW5kZXggcGF0dGVybnMgc2luY2UgZXZlcnl0aGluZyBpcyBkZXBlbmRlbnQgb24gdGhlbQoKICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0RWFjaEl0ZW1JblBhcmFsbGVsKGRvY1R5cGVzLmluZGV4UGF0dGVybnMsCiAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBfcmVmNyA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoaW5kZXhQYXR0ZXJuRG9jKSB7CiAgICAgICAgICAgICAgICB2YXIgaW1wb3J0ZWRJbmRleFBhdHRlcm5JZDsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW1wb3J0SW5kZXhQYXR0ZXJuKGluZGV4UGF0dGVybkRvYywgaW5kZXhQYXR0ZXJucywgb3ZlcndyaXRlQWxsLCBjb25maXJtTW9kYWxQcm9taXNlKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGVkSW5kZXhQYXR0ZXJuSWQgPSBfY29udGV4dDEyLnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1wb3J0ZWRJbmRleFBhdHRlcm5JZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGVkT2JqZWN0Q291bnQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gNzsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi50MCA9IF9jb250ZXh0MTJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZEltcG9ydHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuRG9jOiBpbmRleFBhdHRlcm5Eb2MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0MTIudDAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMiwgbnVsbCwgW1swLCA3XV0pOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMxKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KCkpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgLy8gV2Ugd2FudCB0byBkbyB0aGUgc2FtZSBmb3Igc2F2ZWQgc2VhcmNoZXMsIGJ1dCB3ZSB3YW50IHRvIGtlZXAgdGhlbSBzZXBhcmF0ZSBiZWNhdXNlIHRoZXkgbmVlZAogICAgICAgICAgICAvLyB0byBiZSBhcHBsaWVkIF9maXJzdF8gYmVjYXVzZSBvdGhlciBzYXZlZCBvYmplY3RzIGNhbiBiZSBkZXBlbmRlbnQgb24gdGhvc2Ugc2F2ZWQgc2VhcmNoZXMgZXhpc3RpbmcKICAgICAgICAgICAgY29uZmxpY3RlZFNlYXJjaERvY3MgPSBbXTsgLy8gS2VlcCBhIHJlY29yZCBvZiB0aGUgaW5kZXggcGF0dGVybnMgYXNzaWduZWQgdG8gb3VyIGltcG9ydGVkIHNhdmVkIG9iamVjdHMgdGhhdCBkbyBub3QKICAgICAgICAgICAgLy8gZXhpc3QuIFdlIHdpbGwgcHJvdmlkZSBhIHdheSBmb3IgdGhlIHVzZXIgdG8gbWFudWFsbHkgc2VsZWN0IGEgbmV3IGluZGV4IHBhdHRlcm4gZm9yIHRob3NlCiAgICAgICAgICAgIC8vIHNhdmVkIG9iamVjdHMuCgogICAgICAgICAgICBjb25mbGljdGVkSW5kZXhQYXR0ZXJucyA9IFtdOyAvLyBLZWVwIGEgcmVjb3JkIG9mIGFueSBvYmplY3RzIHdoaWNoIGZhaWwgdG8gaW1wb3J0IGZvciB1bmtub3duIHJlYXNvbnMuCiAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdG8gaGF2ZSBzYXZlZCBvYmplY3RzIHRoYXQgbGluayB0byBzYXZlZCBzZWFyY2hlcyB3aGljaCB0aGVuIGxpbmsgdG8gaW5kZXggcGF0dGVybnMKICAgICAgICAgICAgLy8gYW5kIHRob3NlIGNvdWxkIGVycm9yIG91dCwgYnV0IHRoZSBlcnJvciBjb21lcyBhcyBhbiBpbmRleCBwYXR0ZXJuIG5vdCBmb3VuZCBlcnJvci4gV2UgY2FuJ3QgcmVzb2x2ZQogICAgICAgICAgICAvLyB0aG9zZSB0aGUgc2FtZSBhcyB3YXkgYXMgbm9ybWFsIGluZGV4IHBhdHRlcm4gbm90IGZvdW5kIGVycm9ycywgYnV0IHdoZW4gdGhvc2UgYXJlIGZpeGVkLCBpdCdzIHZlcnkKICAgICAgICAgICAgLy8gbGlrZWx5IHRoYXQgdGhlc2Ugc2F2ZWQgb2JqZWN0cyB3aWxsIHdvcmsgb25jZSByZXNhdmVkIHNvIGtlZXAgdGhlbSBhcm91bmQgdG8gcmVzYXZlIHRoZW0uCgogICAgICAgICAgICBjb25mbGljdGVkU2F2ZWRPYmplY3RzTGlua2VkVG9TYXZlZFNlYXJjaGVzID0gW107CiAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDEwOwogICAgICAgICAgICByZXR1cm4gYXdhaXRFYWNoSXRlbUluUGFyYWxsZWwoZG9jVHlwZXMuc2VhcmNoZXMsCiAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBfcmVmOCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMoc2VhcmNoRG9jKSB7CiAgICAgICAgICAgICAgICB2YXIgb2JqOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRTYXZlZE9iamVjdChzZWFyY2hEb2MsIHNlcnZpY2VzKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IF9jb250ZXh0MTMuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGltcG9ydERvY3VtZW50KG9iaiwgc2VhcmNoRG9jLCBvdmVyd3JpdGVBbGwpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfY29udGV4dDEzLnNlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRlZE9iamVjdENvdW50Kys7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTMudDAgPSBfY29udGV4dDEzWyJjYXRjaCJdKDMpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9jb250ZXh0MTMudDAgaW5zdGFuY2VvZiBfZXJyb3JzLlNhdmVkT2JqZWN0Tm90Rm91bmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2NvbnRleHQxMy50MC5zYXZlZE9iamVjdFR5cGUgPT09ICdpbmRleC1wYXR0ZXJuJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RlZEluZGV4UGF0dGVybnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iajogb2JqLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHNlYXJjaERvYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0ZWRTZWFyY2hEb2NzLnB1c2goc2VhcmNoRG9jKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkSW1wb3J0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iajogb2JqLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0MTMudDAKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTMsIG51bGwsIFtbMywgMTBdXSk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MzIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfcmVmOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMTI7CiAgICAgICAgICAgIHJldHVybiBhd2FpdEVhY2hJdGVtSW5QYXJhbGxlbChkb2NUeXBlcy5vdGhlciwKICAgICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIF9yZWY5ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNChvdGhlckRvYykgewogICAgICAgICAgICAgICAgdmFyIG9iaiwgaXNJbmRleFBhdHRlcm5Ob3RGb3VuZDsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U2F2ZWRPYmplY3Qob3RoZXJEb2MsIHNlcnZpY2VzKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IF9jb250ZXh0MTQuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGltcG9ydERvY3VtZW50KG9iaiwgb3RoZXJEb2MsIG92ZXJ3cml0ZUFsbCk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9jb250ZXh0MTQuc2VudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGVkT2JqZWN0Q291bnQrKzsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0LnByZXYgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC50MCA9IF9jb250ZXh0MTRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5kZXhQYXR0ZXJuTm90Rm91bmQgPSBfY29udGV4dDE0LnQwIGluc3RhbmNlb2YgX2Vycm9ycy5TYXZlZE9iamVjdE5vdEZvdW5kICYmIF9jb250ZXh0MTQudDAuc2F2ZWRPYmplY3RUeXBlID09PSAnaW5kZXgtcGF0dGVybic7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNJbmRleFBhdHRlcm5Ob3RGb3VuZCAmJiBvYmouc2F2ZWRTZWFyY2hJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0ZWRTYXZlZE9iamVjdHNMaW5rZWRUb1NhdmVkU2VhcmNoZXMucHVzaChvYmopOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzSW5kZXhQYXR0ZXJuTm90Rm91bmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb25mbGljdGVkSW5kZXhQYXR0ZXJucy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iajogb2JqLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiBvdGhlckRvYwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZEltcG9ydHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmo6IG9iaiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDE0LnQwCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE0LCBudWxsLCBbWzMsIDEwXV0pOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KCkpOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIGNvbmZsaWN0ZWRJbmRleFBhdHRlcm5zOiBjb25mbGljdGVkSW5kZXhQYXR0ZXJucywKICAgICAgICAgICAgICBjb25mbGljdGVkU2F2ZWRPYmplY3RzTGlua2VkVG9TYXZlZFNlYXJjaGVzOiBjb25mbGljdGVkU2F2ZWRPYmplY3RzTGlua2VkVG9TYXZlZFNlYXJjaGVzLAogICAgICAgICAgICAgIGNvbmZsaWN0ZWRTZWFyY2hEb2NzOiBjb25mbGljdGVkU2VhcmNoRG9jcywKICAgICAgICAgICAgICBpbXBvcnRlZE9iamVjdENvdW50OiBpbXBvcnRlZE9iamVjdENvdW50LAogICAgICAgICAgICAgIGZhaWxlZEltcG9ydHM6IGZhaWxlZEltcG9ydHMKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUxNSk7CiAgfSkpOwogIHJldHVybiBfcmVzb2x2ZVNhdmVkT2JqZWN0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9"},null]}