{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/courier/fetch/call_client.js","dependencies":[{"path":"src/legacy/ui/public/courier/fetch/call_client.js","mtime":1572296412496},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkNhbGxDbGllbnRQcm92aWRlciA9IENhbGxDbGllbnRQcm92aWRlcjsKCnZhciBfZXJyb3JfYWxsb3dfZXhwbGljaXRfaW5kZXggPSByZXF1aXJlKCIuLi8uLi9lcnJvcl9hbGxvd19leHBsaWNpdF9pbmRleCIpOwoKdmFyIF9zZWFyY2hfc3RyYXRlZ3kgPSByZXF1aXJlKCIuLi9zZWFyY2hfc3RyYXRlZ3kiKTsKCnZhciBfaXNfcmVxdWVzdCA9IHJlcXVpcmUoIi4vaXNfcmVxdWVzdCIpOwoKdmFyIF9yZXFfc3RhdHVzID0gcmVxdWlyZSgiLi9yZXFfc3RhdHVzIik7Cgp2YXIgX3NlcmlhbGl6ZV9mZXRjaF9wYXJhbXMgPSByZXF1aXJlKCIuL3JlcXVlc3Qvc2VyaWFsaXplX2ZldGNoX3BhcmFtcyIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3Byb21pc2VzID0gcmVxdWlyZSgidWkvcHJvbWlzZXMiKTsKCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBDYWxsQ2xpZW50UHJvdmlkZXIoUHJpdmF0ZSwgUHJvbWlzZSwgZXMsIGNvbmZpZywgc2Vzc2lvbklkLCBlc1NoYXJkVGltZW91dCkgewogIHZhciBlcnJvckFsbG93RXhwbGljaXRJbmRleCA9IFByaXZhdGUoX2Vycm9yX2FsbG93X2V4cGxpY2l0X2luZGV4LkVycm9yQWxsb3dFeHBsaWNpdEluZGV4UHJvdmlkZXIpOwogIHZhciBpc1JlcXVlc3QgPSBQcml2YXRlKF9pc19yZXF1ZXN0LklzUmVxdWVzdFByb3ZpZGVyKTsKICB2YXIgc2VyaWFsaXplRmV0Y2hQYXJhbXMgPSBQcml2YXRlKF9zZXJpYWxpemVfZmV0Y2hfcGFyYW1zLlNlcmlhbGl6ZUZldGNoUGFyYW1zUHJvdmlkZXIpOwogIHZhciBBQk9SVEVEID0gX3JlcV9zdGF0dXMuUmVxdWVzdFN0YXR1cy5BQk9SVEVEOwoKICBmdW5jdGlvbiBjYWxsQ2xpZW50KHNlYXJjaFJlcXVlc3RzKSB7CiAgICAvLyBnZXQgdGhlIGFjdHVhbCBsaXN0IG9mIHJlcXVlc3RzIHRoYXQgd2Ugd2lsbCBiZSBmZXRjaGluZwogICAgdmFyIHJlcXVlc3RzVG9GZXRjaCA9IHNlYXJjaFJlcXVlc3RzLmZpbHRlcihpc1JlcXVlc3QpOwogICAgdmFyIHJlcXVlc3RzVG9GZXRjaENvdW50ID0gcmVxdWVzdHNUb0ZldGNoLmxlbmd0aDsKCiAgICBpZiAocmVxdWVzdHNUb0ZldGNoQ291bnQgPT09IDApIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7CiAgICB9IC8vIFRoaXMgaXMgaG93IHdlJ2xsIHByb3ZpZGUgdGhlIGNvbnN1bWVyIHdpdGggc2VhcmNoIHJlc3BvbnNlcy4gUmVzb2x2ZWQgYnkKICAgIC8vIHJlc3BvbmRUb1NlYXJjaFJlcXVlc3RzLgoKCiAgICB2YXIgZGVmZXIgPSAoMCwgX3Byb21pc2VzLmNyZWF0ZURlZmVyKShQcm9taXNlKTsKICAgIHZhciBhYm9ydGFibGVTZWFyY2hlcyA9IFtdOwogICAgdmFyIGFyZUFsbFNlYXJjaFJlcXVlc3RzQWJvcnRlZCA9IGZhbHNlOyAvLyBXaGVuIHdlIHRyYXZlcnNlIG91ciBzZWFyY2ggcmVxdWVzdHMgYW5kIHNlbmQgb3V0IHNlYXJjaGVzLCBzb21lIG9mIHRoZW0gbWF5IGZhaWwuIFdlJ2xsCiAgICAvLyBzdG9yZSB0aG9zZSB0aGF0IGRvbid0IGZhaWwgaGVyZS4KCiAgICB2YXIgYWN0aXZlU2VhcmNoUmVxdWVzdHMgPSBbXTsgLy8gUmVzcG9uZCB0byBlYWNoIHNlYXJjaFJlcXVlc3Qgd2l0aCB0aGUgcmVzcG9uc2Ugb3IgQUJPUlRFRC4KCiAgICB2YXIgcmVzcG9uZFRvU2VhcmNoUmVxdWVzdHMgPSBmdW5jdGlvbiByZXNwb25kVG9TZWFyY2hSZXF1ZXN0cygpIHsKICAgICAgdmFyIHJlc3BvbnNlc0luT3JpZ2luYWxSZXF1ZXN0T3JkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICAvLyBXZSBtYXAgb3ZlciBzZWFyY2hSZXF1ZXN0cyBiZWNhdXNlIGlmIHdlIHdlcmUgb3JpZ2luYWxseSBwcm92aWRlZCBhbiBBQk9SVEVECiAgICAgIC8vIHJlcXVlc3QgdGhlbiB3ZSdsbCByZXR1cm4gdGhhdCB2YWx1ZS4KICAgICAgcmV0dXJuIFByb21pc2UubWFwKHNlYXJjaFJlcXVlc3RzLCBmdW5jdGlvbiAoc2VhcmNoUmVxdWVzdCwgc2VhcmNoUmVxdWVzdEluZGV4KSB7CiAgICAgICAgaWYgKHNlYXJjaFJlcXVlc3QuYWJvcnRlZCkgewogICAgICAgICAgcmV0dXJuIEFCT1JURUQ7CiAgICAgICAgfQoKICAgICAgICB2YXIgc3RhdHVzID0gc2VhcmNoUmVxdWVzdHNbc2VhcmNoUmVxdWVzdEluZGV4XTsKCiAgICAgICAgaWYgKHN0YXR1cyA9PT0gQUJPUlRFRCkgewogICAgICAgICAgcmV0dXJuIEFCT1JURUQ7CiAgICAgICAgfQoKICAgICAgICB2YXIgYWN0aXZlU2VhcmNoUmVxdWVzdEluZGV4ID0gYWN0aXZlU2VhcmNoUmVxdWVzdHMuaW5kZXhPZihzZWFyY2hSZXF1ZXN0KTsKICAgICAgICB2YXIgaXNGYWlsZWRTZWFyY2hSZXF1ZXN0ID0gYWN0aXZlU2VhcmNoUmVxdWVzdEluZGV4ID09PSAtMTsKCiAgICAgICAgaWYgKGlzRmFpbGVkU2VhcmNoUmVxdWVzdCkgewogICAgICAgICAgcmV0dXJuIEFCT1JURUQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzcG9uc2VzSW5PcmlnaW5hbFJlcXVlc3RPcmRlcltzZWFyY2hSZXF1ZXN0SW5kZXhdOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXR1cm4gZGVmZXIucmVzb2x2ZShyZXMpOwogICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcmV0dXJuIGRlZmVyLnJlamVjdChlcnIpOwogICAgICB9KTsKICAgIH07IC8vIGhhbmRsZSBhIHJlcXVlc3QgYmVpbmcgYWJvcnRlZCB3aGlsZSBiZWluZyBmZXRjaGVkCgoKICAgIHZhciByZXF1ZXN0V2FzQWJvcnRlZCA9IFByb21pc2UubWV0aG9kKGZ1bmN0aW9uIChzZWFyY2hSZXF1ZXN0LCBpbmRleCkgewogICAgICBpZiAoc2VhcmNoUmVxdWVzdHNbaW5kZXhdID09PSBBQk9SVEVEKSB7CiAgICAgICAgZGVmZXIucmVqZWN0KG5ldyBFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgnY29tbW9uLnVpLmNvdXJpZXIuZmV0Y2gucmVxdWVzdFdhc0Fib3J0ZWRUd2ljZUVycm9yTWVzc2FnZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVxdWVzdCB3YXMgYWJvcnRlZCB0d2ljZT8nCiAgICAgICAgfSkpKTsKICAgICAgfQoKICAgICAgcmVxdWVzdHNUb0ZldGNoQ291bnQtLTsKCiAgICAgIGlmIChyZXF1ZXN0c1RvRmV0Y2hDb3VudCAhPT0gMCkgewogICAgICAgIC8vIFdlIGNhbid0IHJlc29sdmUgZWFybHkgdW5sZXNzIGFsbCBzZWFyY2hSZXF1ZXN0cyBoYXZlIGJlZW4gYWJvcnRlZC4KICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGFib3J0YWJsZVNlYXJjaGVzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgYWJvcnQgPSBfcmVmLmFib3J0OwogICAgICAgIGFib3J0KCk7CiAgICAgIH0pOwogICAgICBhcmVBbGxTZWFyY2hSZXF1ZXN0c0Fib3J0ZWQgPSB0cnVlOwogICAgICByZXR1cm4gcmVzcG9uZFRvU2VhcmNoUmVxdWVzdHMoKTsKICAgIH0pOyAvLyBhdHRhY2ggYWJvcnQgaGFuZGxlcnMsIGNsb3NlIG92ZXIgcmVxdWVzdCBpbmRleAoKICAgIHNlYXJjaFJlcXVlc3RzLmZvckVhY2goZnVuY3Rpb24gKHNlYXJjaFJlcXVlc3QsIGluZGV4KSB7CiAgICAgIGlmICghaXNSZXF1ZXN0KHNlYXJjaFJlcXVlc3QpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzZWFyY2hSZXF1ZXN0LndoZW5BYm9ydGVkKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXF1ZXN0V2FzQWJvcnRlZChzZWFyY2hSZXF1ZXN0LCBpbmRleCkuY2F0Y2goZGVmZXIucmVqZWN0KTsKICAgICAgfSk7CiAgICB9KTsKICAgIHZhciBzZWFyY2hTdHJhdGVnaWVzV2l0aFJlcXVlc3RzID0gKDAsIF9zZWFyY2hfc3RyYXRlZ3kuYXNzaWduU2VhcmNoUmVxdWVzdHNUb1NlYXJjaFN0cmF0ZWdpZXMpKHJlcXVlc3RzVG9GZXRjaCk7IC8vIFdlJ3JlIGdvaW5nIHRvIGNyZWF0ZSBhIG5ldyBhc3luYyBjb250ZXh0IGhlcmUsIHNvIHRoYXQgdGhlIGxvZ2ljIHdpdGhpbiBpdCBjYW4gZXhlY3V0ZQogICAgLy8gYXN5bmNocm9ub3VzbHkgYWZ0ZXIgd2UndmUgcmV0dXJuZWQgYSByZWZlcmVuY2UgdG8gZGVmZXIucHJvbWlzZS4KCiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKAogICAgLyojX19QVVJFX18qLwogICAgX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIF9sb29wLCBpLCBzZWdyZWdhdGVkUmVzcG9uc2VzLCByZXNwb25zZXNJbk9yaWdpbmFsUmVxdWVzdE9yZGVyOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfbG9vcCA9CiAgICAgICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9sb29wKGkpIHsKICAgICAgICAgICAgICAgIHZhciBzZWFyY2hTdHJhdGVneVdpdGhTZWFyY2hSZXF1ZXN0cywgc2VhcmNoU3RyYXRlZ3ksIHNlYXJjaFJlcXVlc3RzLCBfcmVmNSwgc2VhcmNoaW5nLCBhYm9ydCwgZmFpbGVkU2VhcmNoUmVxdWVzdHM7CgogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9sb29wJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoU3RyYXRlZ3lXaXRoU2VhcmNoUmVxdWVzdHMgPSBzZWFyY2hTdHJhdGVnaWVzV2l0aFJlcXVlc3RzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hTdHJhdGVneSA9IHNlYXJjaFN0cmF0ZWd5V2l0aFNlYXJjaFJlcXVlc3RzLnNlYXJjaFN0cmF0ZWd5LCBzZWFyY2hSZXF1ZXN0cyA9IHNlYXJjaFN0cmF0ZWd5V2l0aFNlYXJjaFJlcXVlc3RzLnNlYXJjaFJlcXVlc3RzOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWFyY2hTdHJhdGVneS5zZWFyY2goewogICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFJlcXVlc3RzOiBzZWFyY2hSZXF1ZXN0cywKICAgICAgICAgICAgICAgICAgICAgICAgICBlczogZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZTogUHJvbWlzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemVGZXRjaFBhcmFtczogc2VyaWFsaXplRmV0Y2hQYXJhbXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBjb25maWcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZXNTaGFyZFRpbWVvdXQ6IGVzU2hhcmRUaW1lb3V0CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgX3JlZjUgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoaW5nID0gX3JlZjUuc2VhcmNoaW5nOwogICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCA9IF9yZWY1LmFib3J0OwogICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRTZWFyY2hSZXF1ZXN0cyA9IF9yZWY1LmZhaWxlZFNlYXJjaFJlcXVlc3RzOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb2xsZWN0IHNlYXJjaFJlcXVlc3RzIHdoaWNoIGhhdmUgc3VjY2Vzc2Z1bGx5IGJlZW4gc2VudC4KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoUmVxdWVzdHMuZm9yRWFjaChmdW5jdGlvbiAoc2VhcmNoUmVxdWVzdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWlsZWRTZWFyY2hSZXF1ZXN0cy5pbmNsdWRlcyhzZWFyY2hSZXF1ZXN0KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlU2VhcmNoUmVxdWVzdHMucHVzaChzZWFyY2hSZXF1ZXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0YWJsZVNlYXJjaGVzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaGluZzogc2VhcmNoaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0OiBhYm9ydCwKICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0c0NvdW50OiBzZWFyY2hSZXF1ZXN0cy5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2xvb3ApOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGkgPSAwOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGlmICghKGkgPCBzZWFyY2hTdHJhdGVnaWVzV2l0aFJlcXVlc3RzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5kZWxlZ2F0ZVlpZWxkKF9sb29wKGkpLCAidDAiLCA0KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNzsKCiAgICAgICAgICAgICAgaWYgKCFhcmVBbGxTZWFyY2hSZXF1ZXN0c0Fib3J0ZWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYWJvcnRhYmxlU2VhcmNoZXMubWFwKAogICAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZjMpIHsKICAgICAgICAgICAgICAgICAgdmFyIHNlYXJjaGluZywgcmVxdWVzdHNDb3VudDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaGluZyA9IF9yZWYzLnNlYXJjaGluZywgcmVxdWVzdHNDb3VudCA9IF9yZWYzLnJlcXVlc3RzQ291bnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgc2VhcmNoaW5nLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEdXBsaWNhdGUgZXJyb3JzIHNvIHRoYXQgdGhleSBjb3JyZXNwb25kIHRvIHRoZSBvcmlnaW5hbCByZXF1ZXN0cy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXkocmVxdWVzdHNDb3VudCkuZmlsbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSkpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBzZWdyZWdhdGVkUmVzcG9uc2VzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgLy8gQXNzaWduaW5nIHNlYXJjaFJlcXVlc3RzIHRvIHN0cmF0ZWdpZXMgbWVhbnMgdGhhdCB0aGUgcmVzcG9uc2VzIGNvbWUgYmFjayBpbiBhIGRpZmZlcmVudAogICAgICAgICAgICAgIC8vIG9yZGVyIHRoYW4gdGhlIG9yaWdpbmFsIHNlYXJjaFJlcXVlc3RzLiBTbyB3ZSdsbCBwdXQgdGhlbSBiYWNrIGluIG9yZGVyIHNvIHRoYXQgd2UgY2FuCiAgICAgICAgICAgICAgLy8gdXNlIHRoZSBvcmRlciB0byBhc3NvY2lhdGUgZWFjaCByZXNwb25zZSB3aXRoIHRoZSBvcmlnaW5hbCByZXF1ZXN0LgogICAgICAgICAgICAgIHJlc3BvbnNlc0luT3JpZ2luYWxSZXF1ZXN0T3JkZXIgPSBuZXcgQXJyYXkoc2VhcmNoUmVxdWVzdHMubGVuZ3RoKTsKICAgICAgICAgICAgICBzZWdyZWdhdGVkUmVzcG9uc2VzLmZvckVhY2goZnVuY3Rpb24gKHJlc3BvbnNlcywgc3RyYXRlZ3lJbmRleCkgewogICAgICAgICAgICAgICAgcmVzcG9uc2VzLmZvckVhY2goZnVuY3Rpb24gKHJlc3BvbnNlLCByZXNwb25zZUluZGV4KSB7CiAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2hSZXF1ZXN0ID0gc2VhcmNoU3RyYXRlZ2llc1dpdGhSZXF1ZXN0c1tzdHJhdGVneUluZGV4XS5zZWFyY2hSZXF1ZXN0c1tyZXNwb25zZUluZGV4XTsKICAgICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RJbmRleCA9IHNlYXJjaFJlcXVlc3RzLmluZGV4T2Yoc2VhcmNoUmVxdWVzdCk7CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlc0luT3JpZ2luYWxSZXF1ZXN0T3JkZXJbcmVxdWVzdEluZGV4XSA9IHJlc3BvbnNlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNzsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uZFRvU2VhcmNoUmVxdWVzdHMocmVzcG9uc2VzSW5PcmlnaW5hbFJlcXVlc3RPcmRlcik7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnQxID0gX2NvbnRleHQzWyJjYXRjaCJdKDcpOwoKICAgICAgICAgICAgICBpZiAoIWVycm9yQWxsb3dFeHBsaWNpdEluZGV4LnRlc3QoX2NvbnRleHQzLnQxKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGVycm9yQWxsb3dFeHBsaWNpdEluZGV4LnRha2VvdmVyKCkpOwoKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICBkZWZlci5yZWplY3QoX2NvbnRleHQzLnQxKTsKCiAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1s3LCAxOV1dKTsKICAgIH0pKSk7IC8vIFJldHVybiB0aGUgcHJvbWlzZSB3aGljaCBhY3RzIGFzIG91ciB2ZWhpY2xlIGZvciBwcm92aWRpbmcgc2VhcmNoIHJlc3BvbnNlcyB0byB0aGUgY29uc3VtZXIuCiAgICAvLyBIb3dldmVyLCBpZiB0aGVyZSBhcmUgYW55IGVycm9ycywgbm90aWZ5IHRoZSBzZWFyY2hSZXF1ZXN0cyBvZiB0aGVtICppbnN0ZWFkKiBvZiBidWJibGluZwogICAgLy8gdGhlbSB1cCB0byB0aGUgY29uc3VtZXIuCgogICAgcmV0dXJuIGRlZmVyLnByb21pc2UuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAvLyBCeSByZXR1cm5pbmcgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGlzIGNhdGNoKCkgd2l0aG91dCByZXRocm93aW5nIHRoZSBlcnJvciwgd2UgZGVsZWdhdGUKICAgICAgLy8gZXJyb3ItaGFuZGxpbmcgdG8gdGhlIHNlYXJjaFJlcXVlc3QgaW5zdGVhZCBvZiB0aGUgY29uc3VtZXIuCiAgICAgIHNlYXJjaFJlcXVlc3RzLmZvckVhY2goZnVuY3Rpb24gKHNlYXJjaFJlcXVlc3QsIGluZGV4KSB7CiAgICAgICAgaWYgKHNlYXJjaFJlcXVlc3RzW2luZGV4XSAhPT0gQUJPUlRFRCkgewogICAgICAgICAgc2VhcmNoUmVxdWVzdC5oYW5kbGVGYWlsdXJlKGVycik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIGNhbGxDbGllbnQ7Cn0="},null]}