{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/region_map/public/region_map_visualization.js","dependencies":[{"path":"src/legacy/core_plugins/region_map/public/region_map_visualization.js","mtime":1572296411268},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmNyZWF0ZVJlZ2lvbk1hcFZpc3VhbGl6YXRpb24gPSBjcmVhdGVSZWdpb25NYXBWaXN1YWxpemF0aW9uOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2Nob3JvcGxldGhfbGF5ZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vY2hvcm9wbGV0aF9sYXllciIpKTsKCnZhciBfdHJ1bmNhdGVkX2NvbG9ybWFwcyA9IHJlcXVpcmUoInVpL3Zpc2xpYi9jb21wb25lbnRzL2NvbG9yL3RydW5jYXRlZF9jb2xvcm1hcHMiKTsKCnZhciBfdXRpbGl0aWVzID0gcmVxdWlyZSgidWkvdmlzdWFsaXplL2xvYWRlci9waXBlbGluZV9oZWxwZXJzL3V0aWxpdGllcyIpOwoKdmFyIF9ub3RpZnkgPSByZXF1aXJlKCJ1aS9ub3RpZnkiKTsKCnZhciBfdG9vbHRpcF9mb3JtYXR0ZXIgPSByZXF1aXJlKCIuL3Rvb2x0aXBfZm9ybWF0dGVyIik7Cgp2YXIgX2Jhc2VfbWFwc192aXN1YWxpemF0aW9uID0gcmVxdWlyZSgiLi4vLi4vdGlsZV9tYXAvcHVibGljL2Jhc2VfbWFwc192aXN1YWxpemF0aW9uIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQoKZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikgeyBpZiAodHlwZW9mIFJlZmxlY3QgIT09ICJ1bmRlZmluZWQiICYmIFJlZmxlY3QuZ2V0KSB7IF9nZXQgPSBSZWZsZWN0LmdldDsgfSBlbHNlIHsgX2dldCA9IGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGJhc2UgPSBfc3VwZXJQcm9wQmFzZSh0YXJnZXQsIHByb3BlcnR5KTsgaWYgKCFiYXNlKSByZXR1cm47IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBwcm9wZXJ0eSk7IGlmIChkZXNjLmdldCkgeyByZXR1cm4gZGVzYy5nZXQuY2FsbChyZWNlaXZlcik7IH0gcmV0dXJuIGRlc2MudmFsdWU7IH07IH0gcmV0dXJuIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIgfHwgdGFyZ2V0KTsgfQoKZnVuY3Rpb24gX3N1cGVyUHJvcEJhc2Uob2JqZWN0LCBwcm9wZXJ0eSkgeyB3aGlsZSAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkgeyBvYmplY3QgPSBfZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgYnJlYWs7IH0gcmV0dXJuIG9iamVjdDsgfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIGNyZWF0ZVJlZ2lvbk1hcFZpc3VhbGl6YXRpb24oX3JlZikgewogIHZhciBzZXJ2aWNlU2V0dGluZ3MgPSBfcmVmLnNlcnZpY2VTZXR0aW5ncywKICAgICAgJGluamVjdG9yID0gX3JlZi4kaW5qZWN0b3IsCiAgICAgIHVpU2V0dGluZ3MgPSBfcmVmLnVpU2V0dGluZ3M7CiAgdmFyIEJhc2VNYXBzVmlzdWFsaXphdGlvbiA9IG5ldyBfYmFzZV9tYXBzX3Zpc3VhbGl6YXRpb24uQmFzZU1hcHNWaXN1YWxpemF0aW9uUHJvdmlkZXIoc2VydmljZVNldHRpbmdzKTsKICB2YXIgdG9vbHRpcEZvcm1hdHRlciA9IG5ldyBfdG9vbHRpcF9mb3JtYXR0ZXIuVGlsZU1hcFRvb2x0aXBGb3JtYXR0ZXIoJGluamVjdG9yKTsKICByZXR1cm4gKAogICAgLyojX19QVVJFX18qLwogICAgZnVuY3Rpb24gKF9CYXNlTWFwc1Zpc3VhbGl6YXRpbykgewogICAgICBfaW5oZXJpdHMoUmVnaW9uTWFwc1Zpc3VhbGl6YXRpb24sIF9CYXNlTWFwc1Zpc3VhbGl6YXRpbyk7CgogICAgICBmdW5jdGlvbiBSZWdpb25NYXBzVmlzdWFsaXphdGlvbihjb250YWluZXIsIHZpcykgewogICAgICAgIHZhciBfdGhpczsKCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlZ2lvbk1hcHNWaXN1YWxpemF0aW9uKTsKCiAgICAgICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoUmVnaW9uTWFwc1Zpc3VhbGl6YXRpb24pLmNhbGwodGhpcywgY29udGFpbmVyLCB2aXMpKTsKICAgICAgICBfdGhpcy5fdmlzID0gX3RoaXMudmlzOwogICAgICAgIF90aGlzLl9jaG9yb3BsZXRoTGF5ZXIgPSBudWxsOwogICAgICAgIHJldHVybiBfdGhpczsKICAgICAgfQoKICAgICAgX2NyZWF0ZUNsYXNzKFJlZ2lvbk1hcHNWaXN1YWxpemF0aW9uLCBbewogICAgICAgIGtleTogInJlbmRlciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfcmVuZGVyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGVzUmVzcG9uc2UsIHZpc1BhcmFtcywgc3RhdHVzKSB7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2dldChfZ2V0UHJvdG90eXBlT2YoUmVnaW9uTWFwc1Zpc3VhbGl6YXRpb24ucHJvdG90eXBlKSwgInJlbmRlciIsIHRoaXMpLmNhbGwodGhpcywgZXNSZXNwb25zZSwgdmlzUGFyYW1zLCBzdGF0dXMpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2hvcm9wbGV0aExheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Nob3JvcGxldGhMYXllci53aGVuRGF0YUxvYWRlZCgpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICBmdW5jdGlvbiByZW5kZXIoX3gsIF94MiwgX3gzKSB7CiAgICAgICAgICAgIHJldHVybiBfcmVuZGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJlbmRlcjsKICAgICAgICB9KCkKICAgICAgfSwgewogICAgICAgIGtleTogIl91cGRhdGVEYXRhIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIF91cGRhdGVEYXRhMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodGFibGUpIHsKICAgICAgICAgICAgdmFyIHRlcm1Db2x1bW4sIHZhbHVlQ29sdW1uLCByZXN1bHRzLCBtZXRyaWNGaWVsZEZvcm1hdHRlcjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICB0aGlzLl9jaGFydERhdGEgPSB0YWJsZTsKICAgICAgICAgICAgICAgICAgICB0ZXJtQ29sdW1uID0gdGhpcy5fcGFyYW1zLmJ1Y2tldCA/IHRhYmxlLmNvbHVtbnNbdGhpcy5fcGFyYW1zLmJ1Y2tldC5hY2Nlc3Nvcl0gOiBudWxsOwogICAgICAgICAgICAgICAgICAgIHZhbHVlQ29sdW1uID0gdGFibGUuY29sdW1uc1t0aGlzLl9wYXJhbXMubWV0cmljLmFjY2Vzc29yXTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9oYXNDb2x1bW5zKCkgfHwgIXRhYmxlLnJvd3MubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gW107CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSB0YWJsZS5yb3dzLm1hcChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXJtID0gcm93W3Rlcm1Db2x1bW4uaWRdOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByb3dbdmFsdWVDb2x1bW4uaWRdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgIHRlcm06IHRlcm0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fcGFyYW1zLnNlbGVjdGVkSm9pbkZpZWxkICYmIHRoaXMuX3BhcmFtcy5zZWxlY3RlZExheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJhbXMuc2VsZWN0ZWRKb2luRmllbGQgPSB0aGlzLl9wYXJhbXMuc2VsZWN0ZWRMYXllci5maWVsZHNbMF07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNob3JvcGxldGhMYXllckZvck5ld01ldHJpY3ModGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIubmFtZSwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIuYXR0cmlidXRpb24sIHRoaXMuX3BhcmFtcy5zaG93QWxsU2hhcGVzLCByZXN1bHRzKTsKCiAgICAgICAgICAgICAgICAgICAgbWV0cmljRmllbGRGb3JtYXR0ZXIgPSAoMCwgX3V0aWxpdGllcy5nZXRGb3JtYXQpKHRoaXMuX3BhcmFtcy5tZXRyaWMuZm9ybWF0KTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyLnNldE1ldHJpY3MocmVzdWx0cywgbWV0cmljRmllbGRGb3JtYXR0ZXIsIHZhbHVlQ29sdW1uLm5hbWUpOwoKICAgICAgICAgICAgICAgICAgICBpZiAodGVybUNvbHVtbiAmJiB2YWx1ZUNvbHVtbikgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyLnNldFRvb2x0aXBGb3JtYXR0ZXIodG9vbHRpcEZvcm1hdHRlciwgbWV0cmljRmllbGRGb3JtYXR0ZXIsIHRlcm1Db2x1bW4ubmFtZSwgdmFsdWVDb2x1bW4ubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAudXNlVWlTdGF0ZUZyb21WaXN1YWxpemF0aW9uKHRoaXMuX3Zpcyk7CgogICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICAgICAgfSkpOwoKICAgICAgICAgIGZ1bmN0aW9uIF91cGRhdGVEYXRhKF94NCkgewogICAgICAgICAgICByZXR1cm4gX3VwZGF0ZURhdGEyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF91cGRhdGVEYXRhOwogICAgICAgIH0oKQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3VwZGF0ZVBhcmFtcyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfdXBkYXRlUGFyYW1zMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgIHZhciB2aXNQYXJhbXMsIG1ldHJpY0ZpZWxkRm9ybWF0dGVyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2dldChfZ2V0UHJvdG90eXBlT2YoUmVnaW9uTWFwc1Zpc3VhbGl6YXRpb24ucHJvdG90eXBlKSwgIl91cGRhdGVQYXJhbXMiLCB0aGlzKS5jYWxsKHRoaXMpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIHZpc1BhcmFtcyA9IHRoaXMuX3BhcmFtczsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCF2aXNQYXJhbXMuc2VsZWN0ZWRKb2luRmllbGQgJiYgdmlzUGFyYW1zLnNlbGVjdGVkTGF5ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgIHZpc1BhcmFtcy5zZWxlY3RlZEpvaW5GaWVsZCA9IHZpc1BhcmFtcy5zZWxlY3RlZExheWVyLmZpZWxkc1swXTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghKCF2aXNQYXJhbXMuc2VsZWN0ZWRKb2luRmllbGQgfHwgIXZpc1BhcmFtcy5zZWxlY3RlZExheWVyKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ2hvcm9wbGV0aExheWVyRm9yTmV3UHJvcGVydGllcyh2aXNQYXJhbXMuc2VsZWN0ZWRMYXllci5uYW1lLCB2aXNQYXJhbXMuc2VsZWN0ZWRMYXllci5hdHRyaWJ1dGlvbiwgdGhpcy5fcGFyYW1zLnNob3dBbGxTaGFwZXMpOwoKICAgICAgICAgICAgICAgICAgICBtZXRyaWNGaWVsZEZvcm1hdHRlciA9ICgwLCBfdXRpbGl0aWVzLmdldEZvcm1hdCkodGhpcy5fcGFyYW1zLm1ldHJpYy5mb3JtYXQpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLl9jaG9yb3BsZXRoTGF5ZXIuc2V0Sm9pbkZpZWxkKHZpc1BhcmFtcy5zZWxlY3RlZEpvaW5GaWVsZC5uYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyLnNldENvbG9yUmFtcChfdHJ1bmNhdGVkX2NvbG9ybWFwcy50cnVuY2F0ZWRDb2xvck1hcHNbdmlzUGFyYW1zLmNvbG9yU2NoZW1hXS52YWx1ZSk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nob3JvcGxldGhMYXllci5zZXRMaW5lV2VpZ2h0KHZpc1BhcmFtcy5vdXRsaW5lV2VpZ2h0KTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyLnNldFRvb2x0aXBGb3JtYXR0ZXIodG9vbHRpcEZvcm1hdHRlciwgbWV0cmljRmllbGRGb3JtYXR0ZXIsIHRoaXMuX21ldHJpY0xhYmVsKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgZnVuY3Rpb24gX3VwZGF0ZVBhcmFtcygpIHsKICAgICAgICAgICAgcmV0dXJuIF91cGRhdGVQYXJhbXMyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF91cGRhdGVQYXJhbXM7CiAgICAgICAgfSgpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfdXBkYXRlQ2hvcm9wbGV0aExheWVyRm9yTmV3TWV0cmljcyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVDaG9yb3BsZXRoTGF5ZXJGb3JOZXdNZXRyaWNzKG5hbWUsIGF0dHJpYnV0aW9uLCBzaG93QWxsRGF0YSwgbmV3TWV0cmljcykgewogICAgICAgICAgaWYgKHRoaXMuX2Nob3JvcGxldGhMYXllciAmJiB0aGlzLl9jaG9yb3BsZXRoTGF5ZXIuY2FuUmV1c2VJbnN0YW5jZUZvck5ld01ldHJpY3MobmFtZSwgc2hvd0FsbERhdGEsIG5ld01ldHJpY3MpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjcmVhdGVDaG9yb3BsZXRoTGF5ZXIobmFtZSwgYXR0cmlidXRpb24sIHNob3dBbGxEYXRhKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfdXBkYXRlQ2hvcm9wbGV0aExheWVyRm9yTmV3UHJvcGVydGllcyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVDaG9yb3BsZXRoTGF5ZXJGb3JOZXdQcm9wZXJ0aWVzKG5hbWUsIGF0dHJpYnV0aW9uLCBzaG93QWxsRGF0YSkgewogICAgICAgICAgaWYgKHRoaXMuX2Nob3JvcGxldGhMYXllciAmJiB0aGlzLl9jaG9yb3BsZXRoTGF5ZXIuY2FuUmV1c2VJbnN0YW5jZShuYW1lLCBzaG93QWxsRGF0YSkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0aGlzLl9yZWNyZWF0ZUNob3JvcGxldGhMYXllcihuYW1lLCBhdHRyaWJ1dGlvbiwgc2hvd0FsbERhdGEpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl9yZWNyZWF0ZUNob3JvcGxldGhMYXllciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWNyZWF0ZUNob3JvcGxldGhMYXllcihuYW1lLCBhdHRyaWJ1dGlvbiwgc2hvd0FsbERhdGEpIHsKICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5yZW1vdmVMYXllcih0aGlzLl9jaG9yb3BsZXRoTGF5ZXIpOwoKICAgICAgICAgIGlmICh0aGlzLl9jaG9yb3BsZXRoTGF5ZXIpIHsKICAgICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyID0gdGhpcy5fY2hvcm9wbGV0aExheWVyLmNsb25lQ2hvcm9wbGV0aExheWVyRm9yTmV3RGF0YShuYW1lLCBhdHRyaWJ1dGlvbiwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIuZm9ybWF0LCBzaG93QWxsRGF0YSwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIubWV0YSwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIsIHNlcnZpY2VTZXR0aW5ncyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLl9jaG9yb3BsZXRoTGF5ZXIgPSBuZXcgX2Nob3JvcGxldGhfbGF5ZXIuZGVmYXVsdChuYW1lLCBhdHRyaWJ1dGlvbiwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIuZm9ybWF0LCBzaG93QWxsRGF0YSwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIubWV0YSwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIsIHNlcnZpY2VTZXR0aW5ncyk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gX3RoaXMyLl9jaGFydERhdGEucm93cy5maW5kSW5kZXgoZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgICAgIHJldHVybiByb3dbMF0gPT09IGV2ZW50OwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzMi5fdmlzLkFQSS5ldmVudHMuZmlsdGVyKHsKICAgICAgICAgICAgICB0YWJsZTogX3RoaXMyLl9jaGFydERhdGEsCiAgICAgICAgICAgICAgY29sdW1uOiAwLAogICAgICAgICAgICAgIHJvdzogcm93SW5kZXgsCiAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CgogICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyLm9uKCdzdHlsZUNoYW5nZWQnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgdmFyIHNob3VsZFNob3dXYXJuaW5nID0gX3RoaXMyLl9wYXJhbXMuaXNEaXNwbGF5V2FybmluZyAmJiB1aVNldHRpbmdzLmdldCgndmlzdWFsaXphdGlvbjpyZWdpb25tYXA6c2hvd1dhcm5pbmdzJyk7CgogICAgICAgICAgICBpZiAoZXZlbnQubWlzbWF0Y2hlcy5sZW5ndGggPiAwICYmIHNob3VsZFNob3dXYXJuaW5nKSB7CiAgICAgICAgICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkV2FybmluZyh7CiAgICAgICAgICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3JlZ2lvbk1hcC52aXN1YWxpemF0aW9uLnVuYWJsZVRvU2hvd01pc21hdGNoZXNXYXJuaW5nVGl0bGUnLCB7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVW5hYmxlIHRvIHNob3cge21pc21hdGNoZXNMZW5ndGh9IHtvbmVNaXNtYXRjaCwgcGx1cmFsLCBvbmUge3Jlc3VsdH0gb3RoZXIge3Jlc3VsdHN9fSBvbiBtYXAnLAogICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICBtaXNtYXRjaGVzTGVuZ3RoOiBldmVudC5taXNtYXRjaGVzLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICBvbmVNaXNtYXRjaDogZXZlbnQubWlzbWF0Y2hlcy5sZW5ndGggPiAxID8gMCA6IDEKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0ZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgncmVnaW9uTWFwLnZpc3VhbGl6YXRpb24udW5hYmxlVG9TaG93TWlzbWF0Y2hlc1dhcm5pbmdUZXh0JywgewogICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0Vuc3VyZSB0aGF0IGVhY2ggb2YgdGhlc2UgdGVybSBtYXRjaGVzIGEgc2hhcGUgb24gdGhhdCBzaGFwZVwncyBqb2luIGZpZWxkOiB7bWlzbWF0Y2hlc30nLAogICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICBtaXNtYXRjaGVzOiBldmVudC5taXNtYXRjaGVzID8gZXZlbnQubWlzbWF0Y2hlcy5qb2luKCcsICcpIDogJycKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgdGhpcy5fa2liYW5hTWFwLmFkZExheWVyKHRoaXMuX2Nob3JvcGxldGhMYXllcik7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX2hhc0NvbHVtbnMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFzQ29sdW1ucygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9jaGFydERhdGEgJiYgdGhpcy5fY2hhcnREYXRhLmNvbHVtbnMubGVuZ3RoID09PSAyOwogICAgICAgIH0KICAgICAgfV0pOwoKICAgICAgcmV0dXJuIFJlZ2lvbk1hcHNWaXN1YWxpemF0aW9uOwogICAgfShCYXNlTWFwc1Zpc3VhbGl6YXRpb24pCiAgKTsKfQ=="},null]}