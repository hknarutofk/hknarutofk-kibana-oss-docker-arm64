{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/metrics/public/components/vis_types/table/vis.js","dependencies":[{"path":"src/legacy/core_plugins/metrics/public/components/vis_types/table/vis.js","mtime":1572296411100},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRhYmxlVmlzID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicHJvcC10eXBlcyIpKTsKCnZhciBfZmllbGRfZm9ybWF0cyA9IHJlcXVpcmUoInVpL3JlZ2lzdHJ5L2ZpZWxkX2Zvcm1hdHMiKTsKCnZhciBfdGlja19mb3JtYXR0ZXIgPSByZXF1aXJlKCIuLi8uLi9saWIvdGlja19mb3JtYXR0ZXIiKTsKCnZhciBfY2FsY3VsYXRlX2xhYmVsID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tbW9uL2NhbGN1bGF0ZV9sYWJlbCIpOwoKdmFyIF9pc19zb3J0YWJsZSA9IHJlcXVpcmUoIi4vaXNfc29ydGFibGUiKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3JlcGxhY2VfdmFycyA9IHJlcXVpcmUoIi4uLy4uL2xpYi9yZXBsYWNlX3ZhcnMiKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX21ldHJpY190eXBlcyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi9tZXRyaWNfdHlwZXMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIERhdGVGb3JtYXQgPSBfZmllbGRfZm9ybWF0cy5maWVsZEZvcm1hdHMuZ2V0VHlwZSgnZGF0ZScpOwoKZnVuY3Rpb24gZ2V0Q29sb3IocnVsZXMsIGNvbG9yS2V5LCB2YWx1ZSkgewogIHZhciBjb2xvcjsKCiAgaWYgKHJ1bGVzKSB7CiAgICBydWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgIGlmIChydWxlLm9wZXJhdG9yICYmIHJ1bGUudmFsdWUgIT0gbnVsbCkgewogICAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHRbcnVsZS5vcGVyYXRvcl0odmFsdWUsIHJ1bGUudmFsdWUpKSB7CiAgICAgICAgICBjb2xvciA9IHJ1bGVbY29sb3JLZXldOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICByZXR1cm4gY29sb3I7Cn0KCnZhciBUYWJsZVZpcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoVGFibGVWaXMsIF9Db21wb25lbnQpOwoKICBmdW5jdGlvbiBUYWJsZVZpcyhwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYWJsZVZpcyk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVGFibGVWaXMpLmNhbGwodGhpcywgcHJvcHMpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJSb3ciLCBmdW5jdGlvbiAocm93KSB7CiAgICAgIHZhciBtb2RlbCA9IF90aGlzLnByb3BzLm1vZGVsOwogICAgICB2YXIgcm93RGlzcGxheSA9IG1vZGVsLnBpdm90X3R5cGUgPT09ICdkYXRlJyA/IF90aGlzLmRhdGVGb3JtYXR0ZXIuY29udmVydChyb3cua2V5KSA6IHJvdy5rZXk7CgogICAgICBpZiAobW9kZWwuZHJpbGxkb3duX3VybCkgewogICAgICAgIHZhciB1cmwgPSAoMCwgX3JlcGxhY2VfdmFycy5yZXBsYWNlVmFycykobW9kZWwuZHJpbGxkb3duX3VybCwge30sIHsKICAgICAgICAgIGtleTogcm93LmtleQogICAgICAgIH0pOwogICAgICAgIHJvd0Rpc3BsYXkgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgICAgaHJlZjogdXJsCiAgICAgICAgfSwgcm93RGlzcGxheSk7CiAgICAgIH0KCiAgICAgIHZhciBjb2x1bW5zID0gcm93LnNlcmllcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIGNvbHVtbiA9IF90aGlzLnZpc2libGVTZXJpZXMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgICAgcmV0dXJuIGMuaWQgPT09IGl0ZW0uaWQ7CiAgICAgICAgfSk7CgogICAgICAgIGlmICghY29sdW1uKSByZXR1cm4gbnVsbDsKICAgICAgICB2YXIgZm9ybWF0dGVyID0gKDAsIF90aWNrX2Zvcm1hdHRlci50aWNrRm9ybWF0dGVyKShjb2x1bW4uZm9ybWF0dGVyLCBjb2x1bW4udmFsdWVfdGVtcGxhdGUsIF90aGlzLnByb3BzLmdldENvbmZpZyk7CiAgICAgICAgdmFyIHZhbHVlID0gZm9ybWF0dGVyKGl0ZW0ubGFzdCk7CiAgICAgICAgdmFyIHRyZW5kOwoKICAgICAgICBpZiAoY29sdW1uLnRyZW5kX2Fycm93cykgewogICAgICAgICAgdmFyIHRyZW5kSWNvbiA9IGl0ZW0uc2xvcGUgPiAwID8gJ3NvcnRVcCcgOiAnc29ydERvd24nOwogICAgICAgICAgdHJlbmQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgIlx4QTAgIiwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUljb24sIHsKICAgICAgICAgICAgdHlwZTogdHJlbmRJY29uLAogICAgICAgICAgICBjb2xvcjogInN1YmR1ZWQiCiAgICAgICAgICB9KSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgc3R5bGUgPSB7CiAgICAgICAgICBjb2xvcjogZ2V0Q29sb3IoY29sdW1uLmNvbG9yX3J1bGVzLCAndGV4dCcsIGl0ZW0ubGFzdCkKICAgICAgICB9OwogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGtleTogIiIuY29uY2F0KHJvdy5rZXksICItIikuY29uY2F0KGl0ZW0uaWQpLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInR2YlRhYmxlVmlzX192YWx1ZSIsCiAgICAgICAgICBjbGFzc05hbWU6ICJldWktdGV4dFJpZ2h0IiwKICAgICAgICAgIHN0eWxlOiBzdHlsZQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCB2YWx1ZSksIHRyZW5kKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0ciIsIHsKICAgICAgICBrZXk6IHJvdy5rZXkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCByb3dEaXNwbGF5KSwgY29sdW1ucyk7CiAgICB9KTsKCiAgICBfdGhpcy5kYXRlRm9ybWF0dGVyID0gbmV3IERhdGVGb3JtYXQoe30sIF90aGlzLnByb3BzLmdldENvbmZpZyk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVGFibGVWaXMsIFt7CiAgICBrZXk6ICJyZW5kZXJIZWFkZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckhlYWRlcigpIHsKICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywKICAgICAgICAgIG1vZGVsID0gX3RoaXMkcHJvcHMubW9kZWwsCiAgICAgICAgICB1aVN0YXRlID0gX3RoaXMkcHJvcHMudWlTdGF0ZSwKICAgICAgICAgIG9uVWlTdGF0ZSA9IF90aGlzJHByb3BzLm9uVWlTdGF0ZTsKICAgICAgdmFyIHN0YXRlS2V5ID0gIiIuY29uY2F0KG1vZGVsLnR5cGUsICIuc29ydCIpOwogICAgICB2YXIgc29ydCA9IHVpU3RhdGUuZ2V0KHN0YXRlS2V5LCB7CiAgICAgICAgY29sdW1uOiAnX2RlZmF1bHRfJywKICAgICAgICBvcmRlcjogJ2FzYycKICAgICAgfSk7CgogICAgICB2YXIgY2FsY3VsYXRlSGVhZGVyTGFiZWwgPSBmdW5jdGlvbiBjYWxjdWxhdGVIZWFkZXJMYWJlbChtZXRyaWMsIGl0ZW0pIHsKICAgICAgICB2YXIgZGVmYXVsdExhYmVsID0gaXRlbS5sYWJlbCB8fCAoMCwgX2NhbGN1bGF0ZV9sYWJlbC5jYWxjdWxhdGVMYWJlbCkobWV0cmljLCBpdGVtLm1ldHJpY3MpOwoKICAgICAgICBzd2l0Y2ggKG1ldHJpYy50eXBlKSB7CiAgICAgICAgICBjYXNlIF9tZXRyaWNfdHlwZXMuTUVUUklDX1RZUEVTLlBFUkNFTlRJTEU6CiAgICAgICAgICAgIHJldHVybiAiIi5jb25jYXQoZGVmYXVsdExhYmVsLCAiICgiKS5jb25jYXQoKDAsIF9sb2Rhc2gubGFzdCkobWV0cmljLnBlcmNlbnRpbGVzKS52YWx1ZSB8fCAwLCAiKSIpOwoKICAgICAgICAgIGNhc2UgX21ldHJpY190eXBlcy5NRVRSSUNfVFlQRVMuUEVSQ0VOVElMRV9SQU5LOgogICAgICAgICAgICByZXR1cm4gIiIuY29uY2F0KGRlZmF1bHRMYWJlbCwgIiAoIikuY29uY2F0KCgwLCBfbG9kYXNoLmxhc3QpKG1ldHJpYy52YWx1ZXMpIHx8IDAsICIpIik7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRMYWJlbDsKICAgICAgICB9CiAgICAgIH07CgogICAgICB2YXIgY29sdW1ucyA9IHRoaXMudmlzaWJsZVNlcmllcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgbWV0cmljID0gKDAsIF9sb2Rhc2gubGFzdCkoaXRlbS5tZXRyaWNzKTsKICAgICAgICB2YXIgbGFiZWwgPSBjYWxjdWxhdGVIZWFkZXJMYWJlbChtZXRyaWMsIGl0ZW0pOwoKICAgICAgICB2YXIgaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljaygpIHsKICAgICAgICAgIGlmICghKDAsIF9pc19zb3J0YWJsZS5pc1NvcnRhYmxlKShtZXRyaWMpKSByZXR1cm47CiAgICAgICAgICB2YXIgb3JkZXI7CgogICAgICAgICAgaWYgKHNvcnQuY29sdW1uID09PSBpdGVtLmlkKSB7CiAgICAgICAgICAgIG9yZGVyID0gc29ydC5vcmRlciA9PT0gJ2FzYycgPyAnZGVzYycgOiAnYXNjJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9yZGVyID0gJ2FzYyc7CiAgICAgICAgICB9CgogICAgICAgICAgb25VaVN0YXRlKHN0YXRlS2V5LCB7CiAgICAgICAgICAgIGNvbHVtbjogaXRlbS5pZCwKICAgICAgICAgICAgb3JkZXI6IG9yZGVyCiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICB2YXIgc29ydENvbXBvbmVudDsKCiAgICAgICAgaWYgKCgwLCBfaXNfc29ydGFibGUuaXNTb3J0YWJsZSkobWV0cmljKSkgewogICAgICAgICAgdmFyIF9zb3J0SWNvbjsKCiAgICAgICAgICBpZiAoc29ydC5jb2x1bW4gPT09IGl0ZW0uaWQpIHsKICAgICAgICAgICAgX3NvcnRJY29uID0gc29ydC5vcmRlciA9PT0gJ2FzYycgPyAnc29ydFVwJyA6ICdzb3J0RG93bic7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfc29ydEljb24gPSAnZW1wdHknOwogICAgICAgICAgfQoKICAgICAgICAgIHNvcnRDb21wb25lbnQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSWNvbiwgewogICAgICAgICAgICB0eXBlOiBfc29ydEljb24KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIGhlYWRlckNvbnRlbnQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgbGFiZWwsICIgIiwgc29ydENvbXBvbmVudCk7CgogICAgICAgIGlmICghKDAsIF9pc19zb3J0YWJsZS5pc1NvcnRhYmxlKShtZXRyaWMpKSB7CiAgICAgICAgICBoZWFkZXJDb250ZW50ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRvb2xUaXAsIHsKICAgICAgICAgICAgY29udGVudDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICBpZDogInRzdmIudGFibGUuY29sdW1uTm90U29ydGFibGVUb29sdGlwIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRoaXMgY29sdW1uIGlzIG5vdCBzb3J0YWJsZSIKICAgICAgICAgICAgfSkKICAgICAgICAgIH0sIGhlYWRlckNvbnRlbnQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgICAgb25DbGljazogaGFuZGxlQ2xpY2ssCiAgICAgICAgICBrZXk6IGl0ZW0uaWQsCiAgICAgICAgICBzY29wZTogImNvbCIKICAgICAgICB9LCBoZWFkZXJDb250ZW50KTsKICAgICAgfSk7CiAgICAgIHZhciBsYWJlbCA9IG1vZGVsLnBpdm90X2xhYmVsIHx8IG1vZGVsLnBpdm90X2ZpZWxkIHx8IG1vZGVsLnBpdm90X2lkOwogICAgICB2YXIgc29ydEljb247CgogICAgICBpZiAoc29ydC5jb2x1bW4gPT09ICdfZGVmYXVsdF8nKSB7CiAgICAgICAgc29ydEljb24gPSBzb3J0Lm9yZGVyID09PSAnYXNjJyA/ICdzb3J0VXAnIDogJ3NvcnREb3duJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBzb3J0SWNvbiA9ICdlbXB0eSc7CiAgICAgIH0KCiAgICAgIHZhciBzb3J0Q29tcG9uZW50ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUljb24sIHsKICAgICAgICB0eXBlOiBzb3J0SWNvbgogICAgICB9KTsKCiAgICAgIHZhciBoYW5kbGVTb3J0Q2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVTb3J0Q2xpY2soKSB7CiAgICAgICAgdmFyIG9yZGVyOwoKICAgICAgICBpZiAoc29ydC5jb2x1bW4gPT09ICdfZGVmYXVsdF8nKSB7CiAgICAgICAgICBvcmRlciA9IHNvcnQub3JkZXIgPT09ICdhc2MnID8gJ2Rlc2MnIDogJ2FzYyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9yZGVyID0gJ2FzYyc7CiAgICAgICAgfQoKICAgICAgICBvblVpU3RhdGUoc3RhdGVLZXksIHsKICAgICAgICAgIGNvbHVtbjogJ19kZWZhdWx0XycsCiAgICAgICAgICBvcmRlcjogb3JkZXIKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgIGNsYXNzTmFtZTogImV1aS10ZXh0TGVmdCIsCiAgICAgICAgc2NvcGU6ICJjb2wiLAogICAgICAgIG9uQ2xpY2s6IGhhbmRsZVNvcnRDbGljawogICAgICB9LCBsYWJlbCwgIiAiLCBzb3J0Q29tcG9uZW50KSwgY29sdW1ucyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgICAgdmlzRGF0YSA9IF90aGlzJHByb3BzMi52aXNEYXRhLAogICAgICAgICAgbW9kZWwgPSBfdGhpcyRwcm9wczIubW9kZWw7CiAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnJlbmRlckhlYWRlcigpOwogICAgICB2YXIgcm93czsKCiAgICAgIGlmICgoMCwgX2xvZGFzaC5pc0FycmF5KSh2aXNEYXRhLnNlcmllcykgJiYgdmlzRGF0YS5zZXJpZXMubGVuZ3RoKSB7CiAgICAgICAgcm93cyA9IHZpc0RhdGEuc2VyaWVzLm1hcCh0aGlzLnJlbmRlclJvdyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG1lc3NhZ2UgPSBtb2RlbC5waXZvdF9pZCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInRzdmIudGFibGUubm9SZXN1bHRzQXZhaWxhYmxlTWVzc2FnZSIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk5vIHJlc3VsdHMgYXZhaWxhYmxlLiIKICAgICAgICB9KSA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInRzdmIudGFibGUubm9SZXN1bHRzQXZhaWxhYmxlV2l0aERlc2NyaXB0aW9uTWVzc2FnZSIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk5vIHJlc3VsdHMgYXZhaWxhYmxlLiBZb3UgbXVzdCBjaG9vc2UgYSBncm91cCBieSBmaWVsZCBmb3IgdGhpcyB2aXN1YWxpemF0aW9uLiIKICAgICAgICB9KTsKICAgICAgICByb3dzID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNvbFNwYW46IHRoaXMudmlzaWJsZVNlcmllcy5sZW5ndGggKyAxCiAgICAgICAgfSwgbWVzc2FnZSkpOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogInR2YlZpcyIsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInRhYmxlVmlldyIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidGFibGUiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAidGFibGUiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInRoZWFkIiwgbnVsbCwgaGVhZGVyKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidGJvZHkiLCBudWxsLCByb3dzKSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInZpc2libGVTZXJpZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiAoMCwgX2xvZGFzaC5nZXQpKHRoaXMucHJvcHMsICdtb2RlbC5zZXJpZXMnLCBbXSkuZmlsdGVyKGZ1bmN0aW9uIChzZXJpZXMpIHsKICAgICAgICByZXR1cm4gIXNlcmllcy5oaWRkZW47CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRhYmxlVmlzOwp9KF9yZWFjdC5Db21wb25lbnQpOwoKZXhwb3J0cy5UYWJsZVZpcyA9IFRhYmxlVmlzOwpUYWJsZVZpcy5kZWZhdWx0UHJvcHMgPSB7CiAgc29ydDoge30KfTsKVGFibGVWaXMucHJvcFR5cGVzID0gewogIHZpc0RhdGE6IF9wcm9wVHlwZXMuZGVmYXVsdC5vYmplY3QsCiAgbW9kZWw6IF9wcm9wVHlwZXMuZGVmYXVsdC5vYmplY3QsCiAgYmFja2dyb3VuZENvbG9yOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLAogIG9uUGFnaW5hdGU6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLAogIG9uVWlTdGF0ZTogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMsCiAgdWlTdGF0ZTogX3Byb3BUeXBlcy5kZWZhdWx0Lm9iamVjdCwKICBwYWdlTnVtYmVyOiBfcHJvcFR5cGVzLmRlZmF1bHQubnVtYmVyLAogIGdldENvbmZpZzogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMKfTs="},null]}