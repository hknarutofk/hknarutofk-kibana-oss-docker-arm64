{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/dashboard_embeddable_container/public/np_ready/public/lib/embeddable/grid/dashboard_grid.js","dependencies":[{"path":"src/legacy/core_plugins/dashboard_embeddable_container/public/np_ready/public/lib/embeddable/grid/dashboard_grid.js","mtime":1572296409356},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuRGFzaGJvYXJkR3JpZCA9IHZvaWQgMDsKCnJlcXVpcmUoInJlYWN0LWdyaWQtbGF5b3V0L2Nzcy9zdHlsZXMuY3NzIik7CgpyZXF1aXJlKCJyZWFjdC1yZXNpemFibGUvY3NzL3N0eWxlcy5jc3MiKTsKCnZhciBfcmVhY3QgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfY2xhc3NuYW1lcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiY2xhc3NuYW1lcyIpKTsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0R3JpZExheW91dCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QtZ3JpZC1sYXlvdXQiKSk7Cgp2YXIgX3JlYWN0U2l6ZW1lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdC1zaXplbWUiKSk7Cgp2YXIgX2VtYmVkZGFibGVfYXBpID0gcmVxdWlyZSgiLi4vLi4vZW1iZWRkYWJsZV9hcGkiKTsKCnZhciBfZGFzaGJvYXJkX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uL2Rhc2hib2FyZF9jb25zdGFudHMiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9raWJhbmFfcmVhY3QvcHVibGljIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogIGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiKSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfQoKICByZXR1cm4gX3R5cGVvZihvYmopOwp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgewogICAgcmV0dXJuIGNhbGw7CiAgfQoKICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsKfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsKICB9OwogIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7Cn0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgewogIGlmIChzZWxmID09PSB2b2lkIDApIHsKICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgfQoKICByZXR1cm4gc2VsZjsKfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7CiAgfQoKICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfQogIH0pOwogIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOwp9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogICAgby5fX3Byb3RvX18gPSBwOwogICAgcmV0dXJuIG87CiAgfTsKCiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9vYmplY3REZXN0cnVjdHVyaW5nRW1wdHkob2JqKSB7CiAgaWYgKG9iaiA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgZGVzdHJ1Y3R1cmUgdW5kZWZpbmVkIik7Cn0KCnZhciBsYXN0VmFsaWRHcmlkU2l6ZSA9IDA7Ci8qKgogKiBUaGlzIGlzIGEgZml4IGZvciBhIGJ1ZyB0aGF0IHN0b3BwZWQgdGhlIGJyb3dzZXIgd2luZG93IGZyb20gYXV0b21hdGljYWxseSBzY3JvbGxpbmcgZG93biB3aGVuIHBhbmVscyB3ZXJlIG1hZGUKICogdGFsbGVyIHRoYW4gdGhlIGN1cnJlbnQgZ3JpZC4KICogc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGFzdGljL2tpYmFuYS9pc3N1ZXMvMTQ3MTAuCiAqLwoKZnVuY3Rpb24gZW5zdXJlV2luZG93U2Nyb2xsc1RvQm90dG9tKGV2ZW50KSB7CiAgLy8gVGhlIGJ1ZmZlciBpcyB0byBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIGJyb3dzZXIgaXMgbWF4aW1pemVkIGFuZCBpdCdzIGltcG9zc2libGUgZm9yIHRoZSBtb3VzZSB0byBtb3ZlIGJlbG93CiAgLy8gdGhlIHNjcmVlbiwgb3V0IG9mIHRoZSB3aW5kb3cuICBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMva2liYW5hL2lzc3Vlcy8xNDczNwogIHZhciBXSU5ET1dfQlVGRkVSID0gMTA7CgogIGlmIChldmVudC5jbGllbnRZID4gd2luZG93LmlubmVySGVpZ2h0IC0gV0lORE9XX0JVRkZFUikgewogICAgd2luZG93LnNjcm9sbFRvKDAsIGV2ZW50LnBhZ2VZICsgV0lORE9XX0JVRkZFUiAtIHdpbmRvdy5pbm5lckhlaWdodCk7CiAgfQp9CgpmdW5jdGlvbiBSZXNwb25zaXZlR3JpZChfcmVmKSB7CiAgdmFyIHNpemUgPSBfcmVmLnNpemUsCiAgICAgIGlzVmlld01vZGUgPSBfcmVmLmlzVmlld01vZGUsCiAgICAgIGxheW91dCA9IF9yZWYubGF5b3V0LAogICAgICBvbkxheW91dENoYW5nZSA9IF9yZWYub25MYXlvdXRDaGFuZ2UsCiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbiwKICAgICAgbWF4aW1pemVkUGFuZWxJZCA9IF9yZWYubWF4aW1pemVkUGFuZWxJZCwKICAgICAgdXNlTWFyZ2lucyA9IF9yZWYudXNlTWFyZ2luczsgLy8gVGhpcyBpcyB0byBwcmV2ZW50IGEgYnVnIHdoZXJlIHZpZXcgbW9kZSBjaGFuZ2VzIHdoZW4gdGhlIHBhbmVsIGlzIGV4cGFuZGVkLiAgVmlldyBtb2RlIGNoYW5nZXMgd2lsbCB0cmlnZ2VyCiAgLy8gdGhlIGdyaWQgdG8gcmUtcmVuZGVyLCBidXQgd2hlbiBhIHBhbmVsIGlzIGV4cGFuZGVkLCB0aGUgc2l6ZSB3aWxsIGJlIDAuIE1pbmltaXppbmcgdGhlIHBhbmVsIHdvbid0IGNhdXNlIHRoZQogIC8vIGdyaWQgdG8gcmUtcmVuZGVyIHNvIGl0J2xsIHNob3cgYSBncmlkIHdpdGggYSB3aWR0aCBvZiAwLgoKICBsYXN0VmFsaWRHcmlkU2l6ZSA9IHNpemUud2lkdGggPiAwID8gc2l6ZS53aWR0aCA6IGxhc3RWYWxpZEdyaWRTaXplOwogIHZhciBjbGFzc2VzID0gKDAsIF9jbGFzc25hbWVzLmRlZmF1bHQpKHsKICAgICdkc2hMYXlvdXQtLXZpZXdpbmcnOiBpc1ZpZXdNb2RlLAogICAgJ2RzaExheW91dC0tZWRpdGluZyc6ICFpc1ZpZXdNb2RlLAogICAgJ2RzaExheW91dC1pc01heGltaXplZFBhbmVsJzogbWF4aW1pemVkUGFuZWxJZCAhPT0gdW5kZWZpbmVkLAogICAgJ2RzaExheW91dC13aXRob3V0TWFyZ2lucyc6ICF1c2VNYXJnaW5zCiAgfSk7CiAgdmFyIE1BUkdJTlMgPSB1c2VNYXJnaW5zID8gOCA6IDA7IC8vIFdlIGNhbid0IHRha2UgYWR2YW50YWdlIG9mIGlzRHJhZ2dhYmxlIG9yIGlzUmVzaXphYmxlIGR1ZSB0byBwZXJmb3JtYW5jZSBjb25jZXJuczoKICAvLyBodHRwczovL2dpdGh1Yi5jb20vU1RSTUwvcmVhY3QtZ3JpZC1sYXlvdXQvaXNzdWVzLzI0MAoKICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0R3JpZExheW91dC5kZWZhdWx0LCB7CiAgICB3aWR0aDogbGFzdFZhbGlkR3JpZFNpemUsCiAgICBjbGFzc05hbWU6IGNsYXNzZXMsCiAgICBpc0RyYWdnYWJsZTogdHJ1ZSwKICAgIGlzUmVzaXphYmxlOiB0cnVlIC8vIFRoZXJlIGlzIGEgYnVnIHdpdGggZDMgKyBmaXJlZm94ICsgZWxlbWVudHMgdXNpbmcgdHJhbnNmb3Jtcy4KICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZWxhc3RpYy9raWJhbmEvaXNzdWVzLzE2ODcwIGZvciBtb3JlIGNvbnRleHQuCiAgICAsCiAgICB1c2VDU1NUcmFuc2Zvcm1zOiBmYWxzZSwKICAgIG1hcmdpbjogW01BUkdJTlMsIE1BUkdJTlNdLAogICAgY29sczogX2Rhc2hib2FyZF9jb25zdGFudHMuREFTSEJPQVJEX0dSSURfQ09MVU1OX0NPVU5ULAogICAgcm93SGVpZ2h0OiBfZGFzaGJvYXJkX2NvbnN0YW50cy5EQVNIQk9BUkRfR1JJRF9IRUlHSFQgLy8gUGFzcyB0aGUgbmFtZWQgY2xhc3NlcyBvZiB3aGF0IHNob3VsZCBnZXQgdGhlIGRyYWdnaW5nIGhhbmRsZQogICAgLy8gKC5kb2VzbnQtZXhpc3QgbGl0ZXJhbGx5IGRvZXNudCBleGlzdCkKICAgICwKICAgIGRyYWdnYWJsZUhhbmRsZTogaXNWaWV3TW9kZSA/ICcuZG9lc250LWV4aXN0JyA6ICcuZW1iUGFuZWxfX2RyYWdnZXInLAogICAgbGF5b3V0OiBsYXlvdXQsCiAgICBvbkxheW91dENoYW5nZTogb25MYXlvdXRDaGFuZ2UsCiAgICBvblJlc2l6ZTogZnVuY3Rpb24gb25SZXNpemUoX3JlZjIsIF9yZWYzLCBfcmVmNCwgX3JlZjUsIGV2ZW50KSB7CiAgICAgIF9vYmplY3REZXN0cnVjdHVyaW5nRW1wdHkoX3JlZjIpOwoKICAgICAgX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShfcmVmMyk7CgogICAgICBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5KF9yZWY0KTsKCiAgICAgIF9vYmplY3REZXN0cnVjdHVyaW5nRW1wdHkoX3JlZjUpOwoKICAgICAgcmV0dXJuIGVuc3VyZVdpbmRvd1Njcm9sbHNUb0JvdHRvbShldmVudCk7CiAgICB9CiAgfSwgY2hpbGRyZW4pOwp9IC8vIFVzaW5nIHNpemVNZSBzZXRzIHVwIHRoZSBncmlkIHRvIGJlIHJlLXJlbmRlcmVkIGF1dG9tYXRpY2FsbHkgbm90IG9ubHkgd2hlbiB0aGUgd2luZG93IHNpemUgY2hhbmdlcywgYnV0IGFsc28KLy8gd2hlbiB0aGUgY29udGFpbmVyIHNpemUgY2hhbmdlcywgc28gaXQgd29ya3MgZm9yIEZ1bGwgU2NyZWVuIG1vZGUgc3dpdGNoZXMuCgoKdmFyIGNvbmZpZyA9IHsKICBtb25pdG9yV2lkdGg6IHRydWUKfTsKdmFyIFJlc3BvbnNpdmVTaXplZEdyaWQgPSAoMCwgX3JlYWN0U2l6ZW1lLmRlZmF1bHQpKGNvbmZpZykoUmVzcG9uc2l2ZUdyaWQpOwoKdmFyIERhc2hib2FyZEdyaWRVaSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoRGFzaGJvYXJkR3JpZFVpLCBfUmVhY3QkQ29tcG9uZW50KTsgLy8gQSBtYXBwaW5nIG9mIHBhbmVsSW5kZXhlcyB0byBncmlkIGl0ZW1zIHNvIHdlIGNhbiBzZXQgdGhlIHpJbmRleCBhcHByb3ByaWF0ZWx5IG9uIHRoZSBsYXN0IGZvY3VzZWQKICAvLyBpdGVtLgoKCiAgZnVuY3Rpb24gRGFzaGJvYXJkR3JpZFVpKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhc2hib2FyZEdyaWRVaSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoRGFzaGJvYXJkR3JpZFVpKS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3Vic2NyaXB0aW9uIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJtb3VudGVkIiwgZmFsc2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdyaWRJdGVtcyIsIHt9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJidWlsZExheW91dEZyb21QYW5lbHMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQubWFwKF90aGlzLnN0YXRlLnBhbmVscywgZnVuY3Rpb24gKHBhbmVsKSB7CiAgICAgICAgcmV0dXJuIHBhbmVsLmdyaWREYXRhOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uTGF5b3V0Q2hhbmdlIiwgZnVuY3Rpb24gKGxheW91dCkgewogICAgICB2YXIgcGFuZWxzID0gX3RoaXMuc3RhdGUucGFuZWxzOwogICAgICB2YXIgdXBkYXRlZFBhbmVscyA9IGxheW91dC5yZWR1Y2UoZnVuY3Rpb24gKHVwZGF0ZWRQYW5lbHNBY2MsIHBhbmVsTGF5b3V0KSB7CiAgICAgICAgdXBkYXRlZFBhbmVsc0FjY1twYW5lbExheW91dC5pXSA9IF9vYmplY3RTcHJlYWQoe30sIHBhbmVsc1twYW5lbExheW91dC5pXSwgewogICAgICAgICAgZ3JpZERhdGE6IF9sb2Rhc2guZGVmYXVsdC5waWNrKHBhbmVsTGF5b3V0LCBbJ3gnLCAneScsICd3JywgJ2gnLCAnaSddKQogICAgICAgIH0pOwogICAgICAgIHJldHVybiB1cGRhdGVkUGFuZWxzQWNjOwogICAgICB9LCB7fSk7CgogICAgICBfdGhpcy5vblBhbmVsc1VwZGF0ZWQodXBkYXRlZFBhbmVscyk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvblBhbmVsc1VwZGF0ZWQiLCBmdW5jdGlvbiAocGFuZWxzKSB7CiAgICAgIF90aGlzLnByb3BzLmNvbnRhaW5lci51cGRhdGVJbnB1dCh7CiAgICAgICAgcGFuZWxzOiBwYW5lbHMKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvblBhbmVsRm9jdXNlZCIsIGZ1bmN0aW9uIChmb2N1c2VkUGFuZWxJbmRleCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZm9jdXNlZFBhbmVsSW5kZXg6IGZvY3VzZWRQYW5lbEluZGV4CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25QYW5lbEJsdXJyZWQiLCBmdW5jdGlvbiAoYmx1cnJlZFBhbmVsSW5kZXgpIHsKICAgICAgaWYgKF90aGlzLnN0YXRlLmZvY3VzZWRQYW5lbEluZGV4ID09PSBibHVycmVkUGFuZWxJbmRleCkgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGZvY3VzZWRQYW5lbEluZGV4OiB1bmRlZmluZWQKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGxheW91dDogW10sCiAgICAgIGlzTGF5b3V0SW52YWxpZDogZmFsc2UsCiAgICAgIGZvY3VzZWRQYW5lbEluZGV4OiB1bmRlZmluZWQsCiAgICAgIHBhbmVsczogX3RoaXMucHJvcHMuY29udGFpbmVyLmdldElucHV0KCkucGFuZWxzLAogICAgICB2aWV3TW9kZTogX3RoaXMucHJvcHMuY29udGFpbmVyLmdldElucHV0KCkudmlld01vZGUsCiAgICAgIHVzZU1hcmdpbnM6IF90aGlzLnByb3BzLmNvbnRhaW5lci5nZXRJbnB1dCgpLnVzZU1hcmdpbnMsCiAgICAgIGV4cGFuZGVkUGFuZWxJZDogX3RoaXMucHJvcHMuY29udGFpbmVyLmdldElucHV0KCkuZXhwYW5kZWRQYW5lbElkCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKERhc2hib2FyZEdyaWRVaSwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlOwogICAgICB2YXIgaXNMYXlvdXRJbnZhbGlkID0gZmFsc2U7CiAgICAgIHZhciBsYXlvdXQ7CgogICAgICB0cnkgewogICAgICAgIGxheW91dCA9IHRoaXMuYnVpbGRMYXlvdXRGcm9tUGFuZWxzKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQoKICAgICAgICBpc0xheW91dEludmFsaWQgPSB0cnVlOwogICAgICAgIHRoaXMucHJvcHMua2liYW5hLm5vdGlmaWNhdGlvbnMudG9hc3RzLmRhbmdlcih7CiAgICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogJ2Rhc2hib2FyZEVtYmVkZGFibGVDb250YWluZXIuZGFzaGJvYXJkR3JpZC50b2FzdC51bmFibGVUb0xvYWREYXNoYm9hcmREYW5nZXJNZXNzYWdlJywKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmFibGUgdG8gbG9hZCBkYXNoYm9hcmQuJwogICAgICAgICAgfSksCiAgICAgICAgICBib2R5OiBlcnJvci5tZXNzYWdlLAogICAgICAgICAgdG9hc3RMaWZlVGltZU1zOiA1MDAwCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIGxheW91dDogbGF5b3V0LAogICAgICAgIGlzTGF5b3V0SW52YWxpZDogaXNMYXlvdXRJbnZhbGlkCiAgICAgIH0pOwogICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IHRoaXMucHJvcHMuY29udGFpbmVyLmdldElucHV0JCgpLnN1YnNjcmliZShmdW5jdGlvbiAoaW5wdXQpIHsKICAgICAgICBpZiAoX3RoaXMyLm1vdW50ZWQpIHsKICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgIHBhbmVsczogaW5wdXQucGFuZWxzLAogICAgICAgICAgICB2aWV3TW9kZTogaW5wdXQudmlld01vZGUsCiAgICAgICAgICAgIHVzZU1hcmdpbnM6IGlucHV0LnVzZU1hcmdpbnMsCiAgICAgICAgICAgIGV4cGFuZGVkUGFuZWxJZDogaW5wdXQuZXhwYW5kZWRQYW5lbElkCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7CgogICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24pIHsKICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyUGFuZWxzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQYW5lbHMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIGZvY3VzZWRQYW5lbEluZGV4ID0gX3RoaXMkc3RhdGUuZm9jdXNlZFBhbmVsSW5kZXgsCiAgICAgICAgICBwYW5lbHMgPSBfdGhpcyRzdGF0ZS5wYW5lbHMsCiAgICAgICAgICBleHBhbmRlZFBhbmVsSWQgPSBfdGhpcyRzdGF0ZS5leHBhbmRlZFBhbmVsSWQ7IC8vIFBhcnQgb2Ygb3VyIHVub2ZmaWNpYWwgQVBJIC0gbmVlZCB0byByZW5kZXIgaW4gYSBjb25zaXN0ZW50IG9yZGVyIGZvciBwbHVnaW5zLgoKICAgICAgdmFyIHBhbmVsc0luT3JkZXIgPSBPYmplY3Qua2V5cyhwYW5lbHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcmV0dXJuIHBhbmVsc1trZXldOwogICAgICB9KTsKICAgICAgcGFuZWxzSW5PcmRlci5zb3J0KGZ1bmN0aW9uIChwYW5lbEEsIHBhbmVsQikgewogICAgICAgIGlmIChwYW5lbEEuZ3JpZERhdGEueSA9PT0gcGFuZWxCLmdyaWREYXRhLnkpIHsKICAgICAgICAgIHJldHVybiBwYW5lbEEuZ3JpZERhdGEueCAtIHBhbmVsQi5ncmlkRGF0YS54OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gcGFuZWxBLmdyaWREYXRhLnkgLSBwYW5lbEIuZ3JpZERhdGEueTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0Lm1hcChwYW5lbHNJbk9yZGVyLCBmdW5jdGlvbiAocGFuZWwpIHsKICAgICAgICB2YXIgZXhwYW5kUGFuZWwgPSBleHBhbmRlZFBhbmVsSWQgIT09IHVuZGVmaW5lZCAmJiBleHBhbmRlZFBhbmVsSWQgPT09IHBhbmVsLmV4cGxpY2l0SW5wdXQuaWQ7CiAgICAgICAgdmFyIGhpZGVQYW5lbCA9IGV4cGFuZGVkUGFuZWxJZCAhPT0gdW5kZWZpbmVkICYmIGV4cGFuZGVkUGFuZWxJZCAhPT0gcGFuZWwuZXhwbGljaXRJbnB1dC5pZDsKICAgICAgICB2YXIgY2xhc3NlcyA9ICgwLCBfY2xhc3NuYW1lcy5kZWZhdWx0KSh7CiAgICAgICAgICAnZHNoRGFzaGJvYXJkR3JpZF9faXRlbS0tZXhwYW5kZWQnOiBleHBhbmRQYW5lbCwKICAgICAgICAgICdkc2hEYXNoYm9hcmRHcmlkX19pdGVtLS1oaWRkZW4nOiBoaWRlUGFuZWwKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgIHpJbmRleDogZm9jdXNlZFBhbmVsSW5kZXggPT09IHBhbmVsLmV4cGxpY2l0SW5wdXQuaWQgPyAyIDogJ2F1dG8nCiAgICAgICAgICB9LAogICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc2VzLAogICAgICAgICAga2V5OiBwYW5lbC5leHBsaWNpdElucHV0LmlkLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImRhc2hib2FyZFBhbmVsIiwKICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKHJlYWN0R3JpZEl0ZW0pIHsKICAgICAgICAgICAgX3RoaXMzLmdyaWRJdGVtc1twYW5lbC5leHBsaWNpdElucHV0LmlkXSA9IHJlYWN0R3JpZEl0ZW07CiAgICAgICAgICB9CiAgICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2VtYmVkZGFibGVfYXBpLkVtYmVkZGFibGVDaGlsZFBhbmVsLCB7CiAgICAgICAgICBlbWJlZGRhYmxlSWQ6IHBhbmVsLmV4cGxpY2l0SW5wdXQuaWQsCiAgICAgICAgICBjb250YWluZXI6IF90aGlzMy5wcm9wcy5jb250YWluZXIsCiAgICAgICAgICBnZXRBY3Rpb25zOiBfdGhpczMucHJvcHMua2liYW5hLnNlcnZpY2VzLmVtYmVkZGFibGUuZ2V0VHJpZ2dlckNvbXBhdGlibGVBY3Rpb25zLAogICAgICAgICAgZ2V0RW1iZWRkYWJsZUZhY3Rvcnk6IF90aGlzMy5wcm9wcy5raWJhbmEuc2VydmljZXMuZW1iZWRkYWJsZS5nZXRFbWJlZGRhYmxlRmFjdG9yeSwKICAgICAgICAgIGdldEFsbEVtYmVkZGFibGVGYWN0b3JpZXM6IF90aGlzMy5wcm9wcy5raWJhbmEuc2VydmljZXMuZW1iZWRkYWJsZS5nZXRFbWJlZGRhYmxlRmFjdG9yaWVzLAogICAgICAgICAgb3ZlcmxheXM6IF90aGlzMy5wcm9wcy5raWJhbmEuc2VydmljZXMub3ZlcmxheXMsCiAgICAgICAgICBub3RpZmljYXRpb25zOiBfdGhpczMucHJvcHMua2liYW5hLnNlcnZpY2VzLm5vdGlmaWNhdGlvbnMsCiAgICAgICAgICBpbnNwZWN0b3I6IF90aGlzMy5wcm9wcy5raWJhbmEuc2VydmljZXMuaW5zcGVjdG9yLAogICAgICAgICAgU2F2ZWRPYmplY3RGaW5kZXI6IF90aGlzMy5wcm9wcy5raWJhbmEuc2VydmljZXMuU2F2ZWRPYmplY3RGaW5kZXIKICAgICAgICB9KSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICBpZiAodGhpcy5zdGF0ZS5pc0xheW91dEludmFsaWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgdmFyIHZpZXdNb2RlID0gdGhpcy5zdGF0ZS52aWV3TW9kZTsKICAgICAgdmFyIGlzVmlld01vZGUgPSB2aWV3TW9kZSA9PT0gX2VtYmVkZGFibGVfYXBpLlZpZXdNb2RlLlZJRVc7CiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChSZXNwb25zaXZlU2l6ZWRHcmlkLCB7CiAgICAgICAgaXNWaWV3TW9kZTogaXNWaWV3TW9kZSwKICAgICAgICBsYXlvdXQ6IHRoaXMuYnVpbGRMYXlvdXRGcm9tUGFuZWxzKCksCiAgICAgICAgb25MYXlvdXRDaGFuZ2U6IHRoaXMub25MYXlvdXRDaGFuZ2UsCiAgICAgICAgbWF4aW1pemVkUGFuZWxJZDogdGhpcy5zdGF0ZS5leHBhbmRlZFBhbmVsSWQsCiAgICAgICAgdXNlTWFyZ2luczogdGhpcy5zdGF0ZS51c2VNYXJnaW5zCiAgICAgIH0sIHRoaXMucmVuZGVyUGFuZWxzKCkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIERhc2hib2FyZEdyaWRVaTsKfShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTsKCnZhciBEYXNoYm9hcmRHcmlkID0gKDAsIF9yZWFjdC5pbmplY3RJMThuKSgoMCwgX3B1YmxpYy53aXRoS2liYW5hKShEYXNoYm9hcmRHcmlkVWkpKTsKZXhwb3J0cy5EYXNoYm9hcmRHcmlkID0gRGFzaGJvYXJkR3JpZDs="},null]}