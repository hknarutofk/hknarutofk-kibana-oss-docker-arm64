{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/public/chrome/ui/header/header.js","dependencies":[{"path":"src/core/public/chrome/ui/header/header.js","mtime":1572296408408},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuSGVhZGVyID0gdm9pZCAwOwoKdmFyIF91cmwgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInVybCIpKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBSeCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJ4anMiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9oZWFkZXJfYmFkZ2UgPSByZXF1aXJlKCIuL2hlYWRlcl9iYWRnZSIpOwoKdmFyIF9oZWFkZXJfYnJlYWRjcnVtYnMgPSByZXF1aXJlKCIuL2hlYWRlcl9icmVhZGNydW1icyIpOwoKdmFyIF9oZWFkZXJfaGVscF9tZW51ID0gcmVxdWlyZSgiLi9oZWFkZXJfaGVscF9tZW51Iik7Cgp2YXIgX2hlYWRlcl9uYXZfY29udHJvbHMgPSByZXF1aXJlKCIuL2hlYWRlcl9uYXZfY29udHJvbHMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9IC8vIFByb3ZpZGluZyBhIGJ1ZmZlciBiZXR3ZWVuIHRoZSBsaW1pdCBhbmQgdGhlIGN1dCBvZmYgaW5kZXgKLy8gcHJvdGVjdHMgZnJvbSB0cnVuY2F0aW5nIGp1c3QgdGhlIGxhc3QgY291cGxlICg2KSBjaGFyYWN0ZXJzCgoKdmFyIFRSVU5DQVRFX0xJTUlUID0gNjQ7CnZhciBUUlVOQ0FURV9BVCA9IDU4OwovKioKICoKICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIGEgcmVsYXRpdmUgb3Igcm9vdCByZWxhdGl2ZSB1cmwuICBJZiBhIHJlbGF0aXZlIHBhdGggaXMgZ2l2ZW4gdGhlbiB0aGUKICogYWJzb2x1dGUgdXJsIHJldHVybmVkIHdpbGwgZGVwZW5kIG9uIHRoZSBjdXJyZW50IHBhZ2Ugd2hlcmUgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZnJvbS4gRm9yIGV4YW1wbGUKICogaWYgeW91IGFyZSBvbiBwYWdlICJodHRwOi8vd3d3Lm15c2l0ZS5jb20vc2hvcHBpbmcva2lkcyIgYW5kIHlvdSBwYXNzIHRoaXMgZnVuY3Rpb24gImFkdWx0cyIsIHlvdSB3b3VsZCBnZXQKICogYmFjayAiaHR0cDovL3d3dy5teXNpdGUuY29tL3Nob3BwaW5nL2FkdWx0cyIuICBJZiB5b3UgcGFzc2VkIHRoaXMgZnVuY3Rpb24gYSByb290IHJlbGF0aXZlIHBhdGgsIG9yIG9uZSB0aGF0CiAqIHN0YXJ0cyB3aXRoIGEgIi8iLCBmb3IgZXhhbXBsZSAiL2FjY291bnQvY2FydCIsIHlvdSB3b3VsZCBnZXQgYmFjayAiaHR0cDovL3d3dy5teXNpdGUuY29tL2FjY291bnQvY2FydCIuCiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIHJlbGF0aXZlIHVybCB0cmFuc2Zvcm1lZCBpbnRvIGFuIGFic29sdXRlIHVybAogKi8KCmZ1bmN0aW9uIHJlbGF0aXZlVG9BYnNvbHV0ZSh1cmwpIHsKICAvLyBjb252ZXJ0IGFsbCBsaW5rIHVybHMgdG8gYWJzb2x1dGUgdXJscwogIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogIGEuc2V0QXR0cmlidXRlKCdocmVmJywgdXJsKTsKICByZXR1cm4gYS5ocmVmOwp9CgpmdW5jdGlvbiBleHRlbmRSZWNlbnRseUFjY2Vzc2VkSGlzdG9yeUl0ZW0obmF2TGlua3MsIHJlY2VudGx5QWNjZXNzZWQsIGJhc2VQYXRoKSB7CiAgdmFyIGhyZWYgPSByZWxhdGl2ZVRvQWJzb2x1dGUoYmFzZVBhdGgucHJlcGVuZChyZWNlbnRseUFjY2Vzc2VkLmxpbmspKTsKICB2YXIgbmF2TGluayA9IG5hdkxpbmtzLmZpbmQoZnVuY3Rpb24gKG5sKSB7CiAgICByZXR1cm4gaHJlZi5zdGFydHNXaXRoKG5sLnN1YlVybEJhc2UgfHwgbmwuYmFzZVVybCk7CiAgfSk7CiAgdmFyIHRpdGxlQW5kQXJpYUxhYmVsID0gcmVjZW50bHlBY2Nlc3NlZC5sYWJlbDsKCiAgaWYgKG5hdkxpbmspIHsKICAgIHZhciBvYmplY3RUeXBlRm9yQXJpYUFwcGVuZGl4ID0gbmF2TGluay50aXRsZTsKICAgIHRpdGxlQW5kQXJpYUxhYmVsID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2NvcmUudWkucmVjZW50TGlua3MubGlua0l0ZW0uc2NyZWVuUmVhZGVyTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAne3JlY2VudGx5QWNjZXNzZWRJdGVtTGlua2xhYmVsfSwgdHlwZToge3BhZ2VUeXBlfScsCiAgICAgIHZhbHVlczogewogICAgICAgIHJlY2VudGx5QWNjZXNzZWRJdGVtTGlua2xhYmVsOiByZWNlbnRseUFjY2Vzc2VkLmxhYmVsLAogICAgICAgIHBhZ2VUeXBlOiBvYmplY3RUeXBlRm9yQXJpYUFwcGVuZGl4CiAgICAgIH0KICAgIH0pOwogIH0KCiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHJlY2VudGx5QWNjZXNzZWQsIHsKICAgIGhyZWY6IGhyZWYsCiAgICBldWlJY29uVHlwZTogbmF2TGluayA/IG5hdkxpbmsuZXVpSWNvblR5cGUgOiB1bmRlZmluZWQsCiAgICB0aXRsZTogdGl0bGVBbmRBcmlhTGFiZWwKICB9KTsKfQoKZnVuY3Rpb24gZXh0ZW5kTmF2TGluayhuYXZMaW5rKSB7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIG5hdkxpbmssIHsKICAgIGhyZWY6IG5hdkxpbmsudXJsICYmICFuYXZMaW5rLmFjdGl2ZSA/IG5hdkxpbmsudXJsIDogbmF2TGluay5iYXNlVXJsCiAgfSk7Cn0KCmZ1bmN0aW9uIGZpbmRDbG9zZXN0QW5jaG9yKGVsZW1lbnQpIHsKICB2YXIgY3VycmVudCA9IGVsZW1lbnQ7CgogIHdoaWxlIChjdXJyZW50KSB7CiAgICBpZiAoY3VycmVudC50YWdOYW1lID09PSAnQScpIHsKICAgICAgcmV0dXJuIGN1cnJlbnQ7CiAgICB9CgogICAgaWYgKCFjdXJyZW50LnBhcmVudEVsZW1lbnQgfHwgY3VycmVudC5wYXJlbnRFbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDsKICB9Cn0KCmZ1bmN0aW9uIHRydW5jYXRlUmVjZW50SXRlbUxhYmVsKGxhYmVsKSB7CiAgaWYgKGxhYmVsLmxlbmd0aCA+IFRSVU5DQVRFX0xJTUlUKSB7CiAgICBsYWJlbCA9ICIiLmNvbmNhdChsYWJlbC5zdWJzdHJpbmcoMCwgVFJVTkNBVEVfQVQpLCAiXHUyMDI2Iik7CiAgfQoKICByZXR1cm4gbGFiZWw7Cn0KCnZhciBIZWFkZXJVSSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoSGVhZGVyVUksIF9Db21wb25lbnQpOwoKICBmdW5jdGlvbiBIZWFkZXJVSShwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIZWFkZXJVSSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoSGVhZGVyVUkpLmNhbGwodGhpcywgcHJvcHMpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzdWJzY3JpcHRpb24iLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm5hdkRyYXdlclJlZiIsICgwLCBfcmVhY3QuY3JlYXRlUmVmKSgpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbk5hdkNsaWNrIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBhbmNob3IgPSBmaW5kQ2xvc2VzdEFuY2hvcihldmVudC5uYXRpdmVFdmVudC50YXJnZXQpOwoKICAgICAgaWYgKCFhbmNob3IpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBuYXZMaW5rID0gX3RoaXMuc3RhdGUubmF2TGlua3MuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmhyZWYgPT09IGFuY2hvci5ocmVmOwogICAgICB9KTsKCiAgICAgIGlmIChuYXZMaW5rICYmIG5hdkxpbmsuZGlzYWJsZWQpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFfdGhpcy5zdGF0ZS5mb3JjZU5hdmlnYXRpb24gfHwgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHRvUGFyc2VkID0gX3VybC5kZWZhdWx0LnBhcnNlKGFuY2hvci5ocmVmKTsKCiAgICAgIHZhciBmcm9tUGFyc2VkID0gX3VybC5kZWZhdWx0LnBhcnNlKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpOwoKICAgICAgdmFyIHNhbWVQcm90byA9IHRvUGFyc2VkLnByb3RvY29sID09PSBmcm9tUGFyc2VkLnByb3RvY29sOwogICAgICB2YXIgc2FtZUhvc3QgPSB0b1BhcnNlZC5ob3N0ID09PSBmcm9tUGFyc2VkLmhvc3Q7CiAgICAgIHZhciBzYW1lUGF0aCA9IHRvUGFyc2VkLnBhdGggPT09IGZyb21QYXJzZWQucGF0aDsKCiAgICAgIGlmIChzYW1lUHJvdG8gJiYgc2FtZUhvc3QgJiYgc2FtZVBhdGgpIHsKICAgICAgICBpZiAodG9QYXJzZWQuaGFzaCkgewogICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfSAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpIGtlZXBzIHRoZSBicm93c2VyIGZyb20gc2VlaW5nIHRoZSBuZXcgdXJsIGFzIGFuIHVwZGF0ZQogICAgICAgIC8vIGFuZCBldmVuIHNldHRpbmcgd2luZG93LmxvY2F0aW9uIGRvZXMgbm90IG1pbWljIHRoYXQgYmVoYXZpb3IsIHNvIGluc3RlYWQKICAgICAgICAvLyB3ZSB1c2Ugc3RvcFByb3BhZ2F0aW9uKCkgdG8gcHJldmVudCBhbmd1bGFyIGZyb20gc2VlaW5nIHRoZSBjbGljayBhbmQKICAgICAgICAvLyBzdGFydGluZyBhIGRpZ2VzdCBjeWNsZS9hdHRlbXB0aW5nIHRvIGhhbmRsZSBpdCBpbiB0aGUgcm91dGVyLgoKCiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBhcHBUaXRsZTogJ0tpYmFuYScsCiAgICAgIGlzVmlzaWJsZTogdHJ1ZSwKICAgICAgbmF2TGlua3M6IFtdLAogICAgICByZWNlbnRseUFjY2Vzc2VkOiBbXSwKICAgICAgZm9yY2VOYXZpZ2F0aW9uOiBmYWxzZSwKICAgICAgbmF2Q29udHJvbHNMZWZ0OiBbXSwKICAgICAgbmF2Q29udHJvbHNSaWdodDogW10KICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoSGVhZGVyVUksIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSBSeC5jb21iaW5lTGF0ZXN0KHRoaXMucHJvcHMuYXBwVGl0bGUkLCB0aGlzLnByb3BzLmlzVmlzaWJsZSQsIHRoaXMucHJvcHMuZm9yY2VBcHBTd2l0Y2hlck5hdmlnYXRpb24kLCB0aGlzLnByb3BzLm5hdkxpbmtzJCwgdGhpcy5wcm9wcy5yZWNlbnRseUFjY2Vzc2VkJCwgLy8gVHlwZXMgZm9yIGNvbWJpbmVMYXRlc3Qgb25seSBoYW5kbGUgdXAgdG8gNiBpbmZlcnJlZCB0eXBlcyBzbyB3ZSBjb21iaW5lIHRoZXNlIHR3byBzZXBhcmF0ZWx5LgogICAgICBSeC5jb21iaW5lTGF0ZXN0KHRoaXMucHJvcHMubmF2Q29udHJvbHNMZWZ0JCwgdGhpcy5wcm9wcy5uYXZDb250cm9sc1JpZ2h0JCkpLnN1YnNjcmliZSh7CiAgICAgICAgbmV4dDogZnVuY3Rpb24gbmV4dChfcmVmKSB7CiAgICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCA2KSwKICAgICAgICAgICAgICBhcHBUaXRsZSA9IF9yZWYyWzBdLAogICAgICAgICAgICAgIGlzVmlzaWJsZSA9IF9yZWYyWzFdLAogICAgICAgICAgICAgIGZvcmNlTmF2aWdhdGlvbiA9IF9yZWYyWzJdLAogICAgICAgICAgICAgIG5hdkxpbmtzID0gX3JlZjJbM10sCiAgICAgICAgICAgICAgcmVjZW50bHlBY2Nlc3NlZCA9IF9yZWYyWzRdLAogICAgICAgICAgICAgIF9yZWYyJCA9IF9zbGljZWRUb0FycmF5KF9yZWYyWzVdLCAyKSwKICAgICAgICAgICAgICBuYXZDb250cm9sc0xlZnQgPSBfcmVmMiRbMF0sCiAgICAgICAgICAgICAgbmF2Q29udHJvbHNSaWdodCA9IF9yZWYyJFsxXTsKCiAgICAgICAgICBfdGhpczIuc2V0U3RhdGUoewogICAgICAgICAgICBhcHBUaXRsZTogYXBwVGl0bGUsCiAgICAgICAgICAgIGlzVmlzaWJsZTogaXNWaXNpYmxlLAogICAgICAgICAgICBmb3JjZU5hdmlnYXRpb246IGZvcmNlTmF2aWdhdGlvbiwKICAgICAgICAgICAgbmF2TGlua3M6IG5hdkxpbmtzLm1hcChmdW5jdGlvbiAobmF2TGluaykgewogICAgICAgICAgICAgIHJldHVybiBleHRlbmROYXZMaW5rKG5hdkxpbmspOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgcmVjZW50bHlBY2Nlc3NlZDogcmVjZW50bHlBY2Nlc3NlZC5tYXAoZnVuY3Rpb24gKHJhKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGV4dGVuZFJlY2VudGx5QWNjZXNzZWRIaXN0b3J5SXRlbShuYXZMaW5rcywgcmEsIF90aGlzMi5wcm9wcy5iYXNlUGF0aCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBuYXZDb250cm9sc0xlZnQ6IG5hdkNvbnRyb2xzTGVmdCwKICAgICAgICAgICAgbmF2Q29udHJvbHNSaWdodDogbmF2Q29udHJvbHNSaWdodAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnRXaWxsVW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbikgewogICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJMb2dvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJMb2dvKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLAogICAgICAgICAgaG9tZUhyZWYgPSBfdGhpcyRwcm9wcy5ob21lSHJlZiwKICAgICAgICAgIGludGwgPSBfdGhpcyRwcm9wcy5pbnRsOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUhlYWRlckxvZ28sIHsKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAibG9nbyIsCiAgICAgICAgaWNvblR5cGU6ICJsb2dvS2liYW5hIiwKICAgICAgICBvbkNsaWNrOiB0aGlzLm9uTmF2Q2xpY2ssCiAgICAgICAgaHJlZjogaG9tZUhyZWYsCiAgICAgICAgImFyaWEtbGFiZWwiOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICdjb3JlLnVpLmNocm9tZS5oZWFkZXJHbG9iYWxOYXYuZ29Ib21lUGFnZUljb25BcmlhTGFiZWwnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdHbyB0byBob21lIHBhZ2UnCiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyTWVudVRyaWdnZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlck1lbnVUcmlnZ2VyKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSGVhZGVyU2VjdGlvbkl0ZW1CdXR0b24sIHsKICAgICAgICAiYXJpYS1sYWJlbCI6ICJUb2dnbGUgc2lkZSBuYXZpZ2F0aW9uIiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5uYXZEcmF3ZXJSZWYuY3VycmVudC50b2dnbGVPcGVuKCk7CiAgICAgICAgfQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSWNvbiwgewogICAgICAgIHR5cGU6ICJhcHBzIiwKICAgICAgICBzaXplOiAibSIKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICAgIGJhZGdlJCA9IF90aGlzJHByb3BzMi5iYWRnZSQsCiAgICAgICAgICBiYXNlUGF0aCA9IF90aGlzJHByb3BzMi5iYXNlUGF0aCwKICAgICAgICAgIGJyZWFkY3J1bWJzJCA9IF90aGlzJHByb3BzMi5icmVhZGNydW1icyQsCiAgICAgICAgICBoZWxwRXh0ZW5zaW9uJCA9IF90aGlzJHByb3BzMi5oZWxwRXh0ZW5zaW9uJCwKICAgICAgICAgIGludGwgPSBfdGhpcyRwcm9wczIuaW50bCwKICAgICAgICAgIGlzTG9ja2VkID0gX3RoaXMkcHJvcHMyLmlzTG9ja2VkLAogICAgICAgICAga2liYW5hRG9jTGluayA9IF90aGlzJHByb3BzMi5raWJhbmFEb2NMaW5rLAogICAgICAgICAga2liYW5hVmVyc2lvbiA9IF90aGlzJHByb3BzMi5raWJhbmFWZXJzaW9uLAogICAgICAgICAgb25Jc0xvY2tlZFVwZGF0ZSA9IF90aGlzJHByb3BzMi5vbklzTG9ja2VkVXBkYXRlOwogICAgICB2YXIgX3RoaXMkc3RhdGUgPSB0aGlzLnN0YXRlLAogICAgICAgICAgYXBwVGl0bGUgPSBfdGhpcyRzdGF0ZS5hcHBUaXRsZSwKICAgICAgICAgIGlzVmlzaWJsZSA9IF90aGlzJHN0YXRlLmlzVmlzaWJsZSwKICAgICAgICAgIG5hdkNvbnRyb2xzTGVmdCA9IF90aGlzJHN0YXRlLm5hdkNvbnRyb2xzTGVmdCwKICAgICAgICAgIG5hdkNvbnRyb2xzUmlnaHQgPSBfdGhpcyRzdGF0ZS5uYXZDb250cm9sc1JpZ2h0LAogICAgICAgICAgbmF2TGlua3MgPSBfdGhpcyRzdGF0ZS5uYXZMaW5rcywKICAgICAgICAgIHJlY2VudGx5QWNjZXNzZWQgPSBfdGhpcyRzdGF0ZS5yZWNlbnRseUFjY2Vzc2VkOwoKICAgICAgaWYgKCFpc1Zpc2libGUpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgdmFyIG5hdkxpbmtzQXJyYXkgPSBuYXZMaW5rcy5maWx0ZXIoZnVuY3Rpb24gKG5hdkxpbmspIHsKICAgICAgICByZXR1cm4gIW5hdkxpbmsuaGlkZGVuOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKG5hdkxpbmspIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAga2V5OiBuYXZMaW5rLmlkLAogICAgICAgICAgbGFiZWw6IG5hdkxpbmsudGl0bGUsCiAgICAgICAgICBocmVmOiBuYXZMaW5rLmhyZWYsCiAgICAgICAgICBpc0Rpc2FibGVkOiBuYXZMaW5rLmRpc2FibGVkLAogICAgICAgICAgaXNBY3RpdmU6IG5hdkxpbmsuYWN0aXZlLAogICAgICAgICAgaWNvblR5cGU6IG5hdkxpbmsuZXVpSWNvblR5cGUsCiAgICAgICAgICBpY29uOiAhbmF2TGluay5ldWlJY29uVHlwZSAmJiBuYXZMaW5rLmljb24gPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSW1hZ2UsIHsKICAgICAgICAgICAgc2l6ZTogInMiLAogICAgICAgICAgICBhbHQ6ICIiLAogICAgICAgICAgICAiYXJpYS1oaWRkZW4iOiB0cnVlLAogICAgICAgICAgICB1cmw6IGJhc2VQYXRoLnByZXBlbmQoIi8iLmNvbmNhdChuYXZMaW5rLmljb24pKQogICAgICAgICAgfSkgOiB1bmRlZmluZWQsCiAgICAgICAgICAnZGF0YS10ZXN0LXN1YmonOiAnbmF2RHJhd2VyQXBwc01lbnVMaW5rJwogICAgICAgIH07CiAgICAgIH0pOwogICAgICB2YXIgcmVjZW50TGlua3NBcnJheSA9IFt7CiAgICAgICAgbGFiZWw6IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICBpZDogJ2NvcmUudWkuY2hyb21lLnNpZGVHbG9iYWxOYXYudmlld1JlY2VudEl0ZW1zTGFiZWwnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZWNlbnRseSB2aWV3ZWQnCiAgICAgICAgfSksCiAgICAgICAgaWNvblR5cGU6ICdjbG9jaycsCiAgICAgICAgaXNEaXNhYmxlZDogcmVjZW50bHlBY2Nlc3NlZC5sZW5ndGggPiAwID8gZmFsc2UgOiB0cnVlLAogICAgICAgIGZseW91dE1lbnU6IHsKICAgICAgICAgIHRpdGxlOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogJ2NvcmUudWkuY2hyb21lLnNpZGVHbG9iYWxOYXYudmlld1JlY2VudEl0ZW1zRmx5b3V0VGl0bGUnLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1JlY2VudCBpdGVtcycKICAgICAgICAgIH0pLAogICAgICAgICAgbGlzdEl0ZW1zOiByZWNlbnRseUFjY2Vzc2VkLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIGxhYmVsOiB0cnVuY2F0ZVJlY2VudEl0ZW1MYWJlbChpdGVtLmxhYmVsKSwKICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSwKICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IGl0ZW0udGl0bGUsCiAgICAgICAgICAgICAgaHJlZjogaXRlbS5ocmVmLAogICAgICAgICAgICAgIGljb25UeXBlOiBpdGVtLmV1aUljb25UeXBlCiAgICAgICAgICAgIH07CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfV07CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUhlYWRlciwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUhlYWRlclNlY3Rpb24sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU2hvd0ZvciwgewogICAgICAgIHNpemVzOiBbJ3hzJywgJ3MnXQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSGVhZGVyU2VjdGlvbkl0ZW0sIHsKICAgICAgICBib3JkZXI6ICJyaWdodCIKICAgICAgfSwgdGhpcy5yZW5kZXJNZW51VHJpZ2dlcigpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlIZWFkZXJTZWN0aW9uSXRlbSwgewogICAgICAgIGJvcmRlcjogInJpZ2h0IgogICAgICB9LCB0aGlzLnJlbmRlckxvZ28oKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2hlYWRlcl9uYXZfY29udHJvbHMuSGVhZGVyTmF2Q29udHJvbHMsIHsKICAgICAgICBzaWRlOiAibGVmdCIsCiAgICAgICAgbmF2Q29udHJvbHM6IG5hdkNvbnRyb2xzTGVmdAogICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2hlYWRlcl9icmVhZGNydW1icy5IZWFkZXJCcmVhZGNydW1icywgewogICAgICAgIGFwcFRpdGxlOiBhcHBUaXRsZSwKICAgICAgICBicmVhZGNydW1icyQ6IGJyZWFkY3J1bWJzJAogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaGVhZGVyX2JhZGdlLkhlYWRlckJhZGdlLCB7CiAgICAgICAgYmFkZ2UkOiBiYWRnZSQKICAgICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlIZWFkZXJTZWN0aW9uLCB7CiAgICAgICAgc2lkZTogInJpZ2h0IgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSGVhZGVyU2VjdGlvbkl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2hlYWRlcl9oZWxwX21lbnUuSGVhZGVySGVscE1lbnUsIHsKICAgICAgICBoZWxwRXh0ZW5zaW9uJDogaGVscEV4dGVuc2lvbiQsCiAgICAgICAga2liYW5hRG9jTGluazoga2liYW5hRG9jTGluaywKICAgICAgICBraWJhbmFWZXJzaW9uOiBraWJhbmFWZXJzaW9uCiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaGVhZGVyX25hdl9jb250cm9scy5IZWFkZXJOYXZDb250cm9scywgewogICAgICAgIHNpZGU6ICJyaWdodCIsCiAgICAgICAgbmF2Q29udHJvbHM6IG5hdkNvbnRyb2xzUmlnaHQKICAgICAgfSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU5hdkRyYXdlciwgewogICAgICAgIHJlZjogdGhpcy5uYXZEcmF3ZXJSZWYsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogIm5hdkRyYXdlciIsCiAgICAgICAgaXNMb2NrZWQ6IGlzTG9ja2VkLAogICAgICAgIG9uSXNMb2NrZWRVcGRhdGU6IG9uSXNMb2NrZWRVcGRhdGUKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU5hdkRyYXdlckdyb3VwLCB7CiAgICAgICAgbGlzdEl0ZW1zOiByZWNlbnRMaW5rc0FycmF5CiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSG9yaXpvbnRhbFJ1bGUsIHsKICAgICAgICBtYXJnaW46ICJub25lIgogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU5hdkRyYXdlckdyb3VwLCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogIm5hdkRyYXdlckFwcHNNZW51IiwKICAgICAgICBsaXN0SXRlbXM6IG5hdkxpbmtzQXJyYXkKICAgICAgfSkpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBIZWFkZXJVSTsKfShfcmVhY3QuQ29tcG9uZW50KTsKCnZhciBIZWFkZXIgPSAoMCwgX3JlYWN0Mi5pbmplY3RJMThuKShIZWFkZXJVSSk7CmV4cG9ydHMuSGVhZGVyID0gSGVhZGVyOw=="},null]}