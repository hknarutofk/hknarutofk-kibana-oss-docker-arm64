{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/time_buckets/time_buckets.js","dependencies":[{"path":"src/legacy/ui/public/time_buckets/time_buckets.js","mtime":1572296413048},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRpbWVCdWNrZXRzID0gVGltZUJ1Y2tldHM7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9tb21lbnQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm1vbWVudCIpKTsKCnZhciBfY2hyb21lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi9jaHJvbWUiKSk7Cgp2YXIgX3BhcnNlX2ludGVydmFsID0gcmVxdWlyZSgiLi4vdXRpbHMvcGFyc2VfaW50ZXJ2YWwiKTsKCnZhciBfY2FsY19hdXRvX2ludGVydmFsID0gcmVxdWlyZSgiLi9jYWxjX2F1dG9faW50ZXJ2YWwiKTsKCnZhciBfY2FsY19lc19pbnRlcnZhbCA9IHJlcXVpcmUoIi4vY2FsY19lc19pbnRlcnZhbCIpOwoKdmFyIF9maWVsZF9mb3JtYXRzID0gcmVxdWlyZSgiLi4vcmVnaXN0cnkvZmllbGRfZm9ybWF0cyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qCiAqIExpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvcgogKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodAogKiBvd25lcnNoaXAuIEVsYXN0aWNzZWFyY2ggQi5WLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyCiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5CiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwp2YXIgY29uZmlnID0gX2Nocm9tZS5kZWZhdWx0LmdldFVpU2V0dGluZ3NDbGllbnQoKTsKCnZhciBnZXRDb25maWcgPSBmdW5jdGlvbiBnZXRDb25maWcoKSB7CiAgcmV0dXJuIGNvbmZpZy5nZXQuYXBwbHkoY29uZmlnLCBhcmd1bWVudHMpOwp9OwoKZnVuY3Rpb24gaXNWYWxpZE1vbWVudChtKSB7CiAgcmV0dXJuIG0gJiYgJ2lzVmFsaWQnIGluIG0gJiYgbS5pc1ZhbGlkKCk7Cn0KLyoqCiAqIEhlbHBlciBjbGFzcyBmb3Igd3JhcHBpbmcgdGhlIGNvbmNlcHQgb2YgYW4gIkludGVydmFsIiwKICogd2hpY2ggZGVzY3JpYmVzIGEgdGltZXNwYW4gdGhhdCB3aWxsIHNlcGFyYXRlIG1vbWVudHMuCiAqCiAqIEBwYXJhbSB7c3RhdGV9IG9iamVjdCAtIG9uZSBvZiAiIgogKiBAcGFyYW0ge1t0eXBlXX0gZGlzcGxheSBbZGVzY3JpcHRpb25dCiAqLwoKCmZ1bmN0aW9uIFRpbWVCdWNrZXRzKCkgewogIHJldHVybiBUaW1lQnVja2V0cy5fX2NhY2hlZF9fKHRoaXMpOwp9Ci8qKioqCiAqICBQVUJMSUMgQVBJCiAqKioqLwoKLyoqCiAqIFNldCB0aGUgYm91bmRzIHRoYXQgdGhlc2UgYnVja2V0cyBhcmUgZXhwZWN0ZWQgdG8gY292ZXIuCiAqIFRoaXMgaXMgcmVxdWlyZWQgdG8gc3VwcG9ydCBpbnRlcnZhbCAiYXV0byIgYXMgd2VsbAogKiBhcyBpbnRlcnZhbCBzY2FsaW5nLgogKgogKiBAcGFyYW0ge29iamVjdH0gaW5wdXQgLSBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIG1pbiBhbmQgbWF4LAogKiAgICAgICAgICAgICAgICAgICAgICAgcmVwcmVzZW50aW5nIHRoZSBlZGdlcyBmb3IgdGhlIHRpbWUgc3BhbgogKiAgICAgICAgICAgICAgICAgICAgICAgd2Ugc2hvdWxkIGNvdmVyCiAqCiAqIEByZXR1cm5zIHt1bmRlZmluZWR9CiAqLwoKClRpbWVCdWNrZXRzLnByb3RvdHlwZS5zZXRCb3VuZHMgPSBmdW5jdGlvbiAoaW5wdXQpIHsKICBpZiAoIWlucHV0KSByZXR1cm4gdGhpcy5jbGVhckJvdW5kcygpOwogIHZhciBib3VuZHM7CgogIGlmIChfbG9kYXNoLmRlZmF1bHQuaXNQbGFpbk9iamVjdChpbnB1dCkpIHsKICAgIC8vIGFjY2VwdCB0aGUgcmVzcG9uc2UgZnJvbSB0aW1lZmlsdGVyLmdldEFjdGl2ZUJvdW5kcygpCiAgICBib3VuZHMgPSBbaW5wdXQubWluLCBpbnB1dC5tYXhdOwogIH0gZWxzZSB7CiAgICBib3VuZHMgPSBBcnJheS5pc0FycmF5KGlucHV0KSA/IGlucHV0IDogW107CiAgfQoKICB2YXIgbW9tZW50cyA9ICgwLCBfbG9kYXNoLmRlZmF1bHQpKGJvdW5kcykubWFwKF9sb2Rhc2guZGVmYXVsdC5hcnkoX21vbWVudC5kZWZhdWx0LCAxKSkuc29ydEJ5KE51bWJlcik7CiAgdmFyIHZhbGlkID0gbW9tZW50cy5zaXplKCkgPT09IDIgJiYgbW9tZW50cy5ldmVyeShpc1ZhbGlkTW9tZW50KTsKCiAgaWYgKCF2YWxpZCkgewogICAgdGhpcy5jbGVhckJvdW5kcygpOwogICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGJvdW5kcyBzZXQ6ICcgKyBpbnB1dCk7CiAgfQoKICB0aGlzLl9sYiA9IG1vbWVudHMuc2hpZnQoKTsKICB0aGlzLl91YiA9IG1vbWVudHMucG9wKCk7CgogIGlmICh0aGlzLmdldER1cmF0aW9uKCkuYXNTZWNvbmRzKCkgPCAwKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnRlcnZhbHMgbXVzdCBiZSBwb3NpdGl2ZScpOwogIH0KfTsKLyoqCiAqIENsZWFyIHRoZSBzdG9yZWQgYm91bmRzCiAqCiAqIEByZXR1cm4ge3VuZGVmaW5lZH0KICovCgoKVGltZUJ1Y2tldHMucHJvdG90eXBlLmNsZWFyQm91bmRzID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2xiID0gdGhpcy5fdWIgPSBudWxsOwp9OwovKioKICogQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgcmVjZWl2ZWQgYm91bmRzIHlldAogKgogKiBAcmV0dXJuIHtCb29sZWFufQogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuaGFzQm91bmRzID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBpc1ZhbGlkTW9tZW50KHRoaXMuX3ViKSAmJiBpc1ZhbGlkTW9tZW50KHRoaXMuX2xiKTsKfTsKLyoqCiAqIFJldHVybiB0aGUgY3VycmVudCBib3VuZHMsIGlmIHdlIGhhdmUgYW55LgogKgogKiBUSElTIERPRVMgTk9UIENMT05FIFRIRSBCT1VORFMsIHNvIGVkaXRpbmcgdGhlbQogKiBtYXkgaGF2ZSB1bmV4cGVjdGVkIHNpZGUtZWZmZWN0cy4gQWx3YXlzCiAqIGNhbGwgYm91bmRzLm1pbi5jbG9uZSgpIGJlZm9yZSBlZGl0aW5nCiAqCiAqIEByZXR1cm4ge29iamVjdHx1bmRlZmluZWR9IC0gSWYgYm91bmRzIGFyZSBub3QgZGVmaW5lZCwgdGhpcwogKiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5zIHVuZGVmaW5lZCwgZWxzZSBpdCByZXR1cm5zIHRoZSBib3VuZHMKICogICAgICAgICAgICAgICAgICAgICAgZm9yIHRoZXNlIGJ1Y2tldHMuIFRoaXMgb2JqZWN0IGhhcyB0d28gcHJvcHMsCiAqICAgICAgICAgICAgICAgICAgICAgIG1pbiBhbmQgbWF4LiBFYWNoIHByb3BlcnR5IHdpbGwgYmUgYSBtb21lbnQoKQogKiAgICAgICAgICAgICAgICAgICAgICBvYmplY3QKICoKICovCgoKVGltZUJ1Y2tldHMucHJvdG90eXBlLmdldEJvdW5kcyA9IGZ1bmN0aW9uICgpIHsKICBpZiAoIXRoaXMuaGFzQm91bmRzKCkpIHJldHVybjsKICByZXR1cm4gewogICAgbWluOiB0aGlzLl9sYiwKICAgIG1heDogdGhpcy5fdWIKICB9Owp9OwovKioKICogR2V0IGEgbW9tZW50IGR1cmF0aW9uIG9iamVjdCByZXByZXNlbnRpbmcKICogdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIGJvdW5kcywgaWYgdGhlIGJvdW5kcwogKiBhcmUgc2V0LgogKgogKiBAcmV0dXJuIHttb21lbnQuZHVyYXRpb258dW5kZWZpbmVkfQogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuZ2V0RHVyYXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgaWYgKCF0aGlzLmhhc0JvdW5kcygpKSByZXR1cm47CiAgcmV0dXJuIF9tb21lbnQuZGVmYXVsdC5kdXJhdGlvbih0aGlzLl91YiAtIHRoaXMuX2xiLCAnbXMnKTsKfTsKLyoqCiAqIFVwZGF0ZSB0aGUgaW50ZXJ2YWwgYXQgd2hpY2ggYnVja2V0cyBzaG91bGQgYmUKICogZ2VuZXJhdGVkLgogKgogKiBJbnB1dCBjYW4gYmUgb25lIG9mIHRoZSBmb2xsb3dpbmc6CiAqICAtIEFueSBvYmplY3QgZnJvbSBzcmMvbGVnYWN5L3VpL2FnZ190eXBlcy9idWNrZXRzL19pbnRlcnZhbF9vcHRpb25zLmpzCiAqICAtICJhdXRvIgogKiAgLSBQYXNzIGEgdmFsaWQgbW9tZW50IHVuaXQKICogIC0gYSBtb21lbnQuZHVyYXRpb24gb2JqZWN0LgogKgogKiBAcGFyYW0ge29iamVjdHxzdHJpbmd8bW9tZW50LmR1cmF0aW9ufSBpbnB1dCAtIHNlZSBkZXNjCiAqLwoKClRpbWVCdWNrZXRzLnByb3RvdHlwZS5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uIChpbnB1dCkgewogIC8vIFByZXNlcnZlIHRoZSBvcmlnaW5hbCB1bml0cyBiZWNhdXNlIHRoZXkncmUgbG9zdCB3aGVuIHRoZSBpbnRlcnZhbCBpcyBjb252ZXJ0ZWQgdG8gYQogIC8vIG1vbWVudCBkdXJhdGlvbiBvYmplY3QuCiAgdGhpcy5vcmlnaW5hbEludGVydmFsID0gaW5wdXQ7CiAgdmFyIGludGVydmFsID0gaW5wdXQ7IC8vIHNlbGVjdGlvbiBvYmplY3QgLT4gdmFsCgogIGlmIChfbG9kYXNoLmRlZmF1bHQuaXNPYmplY3QoaW5wdXQpKSB7CiAgICBpbnRlcnZhbCA9IGlucHV0LnZhbDsKICB9CgogIGlmICghaW50ZXJ2YWwgfHwgaW50ZXJ2YWwgPT09ICdhdXRvJykgewogICAgdGhpcy5faSA9ICdhdXRvJzsKICAgIHJldHVybjsKICB9CgogIGlmIChfbG9kYXNoLmRlZmF1bHQuaXNTdHJpbmcoaW50ZXJ2YWwpKSB7CiAgICBpbnB1dCA9IGludGVydmFsOwogICAgaW50ZXJ2YWwgPSAoMCwgX3BhcnNlX2ludGVydmFsLnBhcnNlSW50ZXJ2YWwpKGludGVydmFsKTsKCiAgICBpZiAoK2ludGVydmFsID09PSAwKSB7CiAgICAgIGludGVydmFsID0gbnVsbDsKICAgIH0KICB9IC8vIGlmIHRoZSB2YWx1ZSB3YXNuJ3QgY29udmVydGVkIHRvIGEgZHVyYXRpb24sIGFuZCBpc24ndAogIC8vIGFscmVhZHkgYSBkdXJhdGlvbiwgd2UgaGF2ZSBhIHByb2JsZW0KCgogIGlmICghX21vbWVudC5kZWZhdWx0LmlzRHVyYXRpb24oaW50ZXJ2YWwpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCciJyArIGlucHV0ICsgJyIgaXMgbm90IGEgdmFsaWQgaW50ZXJ2YWwuJyk7CiAgfQoKICB0aGlzLl9pID0gaW50ZXJ2YWw7Cn07Ci8qKgogKiBHZXQgdGhlIGludGVydmFsIGZvciB0aGUgYnVja2V0cy4gSWYgdGhlCiAqIG51bWJlciBvZiBidWNrZXRzIGNyZWF0ZWQgYnkgdGhlIGludGVydmFsIHNldAogKiBpcyBsYXJnZXIgdGhhbiBjb25maWc6aGlzdG9ncmFtOm1heEJhcnMgdGhlbiB0aGUKICogaW50ZXJ2YWwgd2lsbCBiZSBzY2FsZWQgdXAuIElmIHRoZSBudW1iZXIgb2YgYnVja2V0cwogKiBjcmVhdGVkIGlzIGxlc3MgdGhhbiBvbmUsIHRoZSBpbnRlcnZhbCBpcyBzY2FsZWQgYmFjay4KICoKICogVGhlIGludGVydmFsIG9iamVjdCByZXR1cm5lZCBpcyBhIG1vbWVudC5kdXJhdGlvbgogKiBvYmplY3QgdGhhdCBoYXMgYmVlbiBkZWNvcmF0ZWQgd2l0aCB0aGUgZm9sbG93aW5nCiAqIHByb3BlcnRpZXMuCiAqCiAqIGludGVydmFsLmRlc2NyaXB0aW9uOiBhIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGludGVydmFsLgogKiAgIGRlc2lnbmVkIHRvIGJlIHVzZWQgbGlzdCAiZmllbGQgcGVyIHt7IGRlc2MgfX0iLgogKiAgICAgLSAibWludXRlIgogKiAgICAgLSAiMTAgZGF5cyIKICogICAgIC0gIjMgeWVhcnMiCiAqCiAqIGludGVydmFsLmV4cHI6IHRoZSBlbGFzdGljc2VhcmNoIGV4cHJlc3Npb24gdGhhdCBjcmVhdGVzIHRoaXMKICogICBpbnRlcnZhbC4gSWYgdGhlIGludGVydmFsIGRvZXMgbm90IHByb3Blcmx5IGZvcm0gYW4gZWxhc3RpY3NlYXJjaAogKiAgIGV4cHJlc3Npb24gaXQgd2lsbCBiZSBmb3JjZWQgaW50byBvbmUuCiAqCiAqIGludGVydmFsLnNjYWxlZDogdGhlIGludGVydmFsIHdhcyBhZGp1c3RlZCB0bwogKiAgIGFjY29tbW9kYXRlIHRoZSBtYXhCYXJzIHNldHRpbmcuCiAqCiAqIGludGVydmFsLnNjYWxlOiB0aGUgbnVtYmVyIHRoYXQgeS12YWx1ZXMgc2hvdWxkIGJlCiAqICAgbXVsdGlwbGllZCBieQogKgogKiBpbnRlcnZhbC5zY2FsZURlc2NyaXB0aW9uOiBhIGRlc2NyaXB0aW9uIHRoYXQgcmVmbGVjdHMKICogICB0aGUgdmFsdWVzIHdoaWNoIHdpbGwgYmUgcHJvZHVjZWQgYnkgdXNpbmcgdGhlCiAqICAgaW50ZXJ2YWwuc2NhbGUuCiAqCiAqCiAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXQogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuZ2V0SW50ZXJ2YWwgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHVzZU5vcm1hbGl6ZWRFc0ludGVydmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0cnVlOwogIHZhciBzZWxmID0gdGhpczsKICB2YXIgZHVyYXRpb24gPSBzZWxmLmdldER1cmF0aW9uKCk7CiAgdmFyIHBhcnNlZEludGVydmFsID0gcmVhZEludGVydmFsKCk7CgogIGlmICh1c2VOb3JtYWxpemVkRXNJbnRlcnZhbCkgewogICAgcmV0dXJuIGRlY29yYXRlSW50ZXJ2YWwobWF5YmVTY2FsZUludGVydmFsKHBhcnNlZEludGVydmFsKSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBkZWNvcmF0ZUludGVydmFsKHBhcnNlZEludGVydmFsKTsKICB9IC8vIGVpdGhlciBwdWxsIHRoZSBpbnRlcnZhbCBmcm9tIHN0YXRlIG9yIGNhbGN1bGF0ZSB0aGUgYXV0by1pbnRlcnZhbAoKCiAgZnVuY3Rpb24gcmVhZEludGVydmFsKCkgewogICAgdmFyIGludGVydmFsID0gc2VsZi5faTsKICAgIGlmIChfbW9tZW50LmRlZmF1bHQuaXNEdXJhdGlvbihpbnRlcnZhbCkpIHJldHVybiBpbnRlcnZhbDsKICAgIHJldHVybiAoMCwgX2NhbGNfYXV0b19pbnRlcnZhbC5jYWxjQXV0b0ludGVydmFsTmVhcikoY29uZmlnLmdldCgnaGlzdG9ncmFtOmJhclRhcmdldCcpLCBOdW1iZXIoZHVyYXRpb24pKTsKICB9IC8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgaW50ZXJ2YWwgc2hvdWxkIGJlIHNjYWxlZCwgYW5kIHNjYWxlIGl0IGlmIHNvCgoKICBmdW5jdGlvbiBtYXliZVNjYWxlSW50ZXJ2YWwoaW50ZXJ2YWwpIHsKICAgIGlmICghc2VsZi5oYXNCb3VuZHMoKSkgcmV0dXJuIGludGVydmFsOwogICAgdmFyIG1heExlbmd0aCA9IGNvbmZpZy5nZXQoJ2hpc3RvZ3JhbTptYXhCYXJzJyk7CiAgICB2YXIgYXBwcm94TGVuID0gZHVyYXRpb24gLyBpbnRlcnZhbDsKICAgIHZhciBzY2FsZWQ7CgogICAgaWYgKGFwcHJveExlbiA+IG1heExlbmd0aCkgewogICAgICBzY2FsZWQgPSAoMCwgX2NhbGNfYXV0b19pbnRlcnZhbC5jYWxjQXV0b0ludGVydmFsTGVzc1RoYW4pKG1heExlbmd0aCwgTnVtYmVyKGR1cmF0aW9uKSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gaW50ZXJ2YWw7CiAgICB9CgogICAgaWYgKCtzY2FsZWQgPT09ICtpbnRlcnZhbCkgcmV0dXJuIGludGVydmFsOwogICAgZGVjb3JhdGVJbnRlcnZhbChpbnRlcnZhbCk7CiAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmFzc2lnbihzY2FsZWQsIHsKICAgICAgcHJlU2NhbGVkOiBpbnRlcnZhbCwKICAgICAgc2NhbGU6IGludGVydmFsIC8gc2NhbGVkLAogICAgICBzY2FsZWQ6IHRydWUKICAgIH0pOwogIH0gLy8gYXBwZW5kIHNvbWUgVGltZUJ1Y2tldHMgc3BlY2lmaWMgcHJvcHMgdG8gdGhlIGludGVydmFsCgoKICBmdW5jdGlvbiBkZWNvcmF0ZUludGVydmFsKGludGVydmFsKSB7CiAgICB2YXIgZXNJbnRlcnZhbCA9IHVzZU5vcm1hbGl6ZWRFc0ludGVydmFsID8gKDAsIF9jYWxjX2VzX2ludGVydmFsLmNvbnZlcnREdXJhdGlvblRvTm9ybWFsaXplZEVzSW50ZXJ2YWwpKGludGVydmFsKSA6ICgwLCBfY2FsY19lc19pbnRlcnZhbC5jb252ZXJ0SW50ZXJ2YWxUb0VzSW50ZXJ2YWwpKHNlbGYub3JpZ2luYWxJbnRlcnZhbCk7CiAgICBpbnRlcnZhbC5lc1ZhbHVlID0gZXNJbnRlcnZhbC52YWx1ZTsKICAgIGludGVydmFsLmVzVW5pdCA9IGVzSW50ZXJ2YWwudW5pdDsKICAgIGludGVydmFsLmV4cHJlc3Npb24gPSBlc0ludGVydmFsLmV4cHJlc3Npb247CiAgICBpbnRlcnZhbC5vdmVyZmxvdyA9IGR1cmF0aW9uID4gaW50ZXJ2YWwgPyBfbW9tZW50LmRlZmF1bHQuZHVyYXRpb24oaW50ZXJ2YWwgLSBkdXJhdGlvbikgOiBmYWxzZTsKCiAgICB2YXIgcHJldHR5VW5pdHMgPSBfbW9tZW50LmRlZmF1bHQubm9ybWFsaXplVW5pdHMoZXNJbnRlcnZhbC51bml0KTsKCiAgICBpZiAoZXNJbnRlcnZhbC52YWx1ZSA9PT0gMSkgewogICAgICBpbnRlcnZhbC5kZXNjcmlwdGlvbiA9IHByZXR0eVVuaXRzOwogICAgfSBlbHNlIHsKICAgICAgaW50ZXJ2YWwuZGVzY3JpcHRpb24gPSBlc0ludGVydmFsLnZhbHVlICsgJyAnICsgcHJldHR5VW5pdHMgKyAncyc7CiAgICB9CgogICAgcmV0dXJuIGludGVydmFsOwogIH0KfTsKLyoqCiAqIEdldCBhIGRhdGUgZm9ybWF0IHN0cmluZyB0aGF0IHdpbGwgcmVwcmVzZW50IGRhdGVzIHRoYXQKICogcHJvZ3Jlc3MgYXQgb3VyIGludGVydmFsLgogKgogKiBTaW5jZSBvdXIgaW50ZXJ2YWwgY2FuIGJlIGFzIHNtYWxsIGFzIDFtcywgdGhlIGRlZmF1bHQKICogZGF0ZSBmb3JtYXQgaXMgdXN1YWxseSB3YXkgdG9vIG11Y2guIHdpdGggYGRhdGVGb3JtYXQ6c2NhbGVkYAogKiB1c2VycyBjYW4gbW9kaWZ5IGhvdyBkYXRlcyBhcmUgZm9ybWF0dGVkIHdpdGhpbiBzZXJpZXMKICogcHJvZHVjZWQgYnkgVGltZUJ1Y2tldHMKICoKICogQHJldHVybiB7c3RyaW5nfQogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuZ2V0U2NhbGVkRGF0ZUZvcm1hdCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgaW50ZXJ2YWwgPSB0aGlzLmdldEludGVydmFsKCk7CiAgdmFyIHJ1bGVzID0gY29uZmlnLmdldCgnZGF0ZUZvcm1hdDpzY2FsZWQnKTsKCiAgZm9yICh2YXIgaSA9IHJ1bGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICB2YXIgcnVsZSA9IHJ1bGVzW2ldOwoKICAgIGlmICghcnVsZVswXSB8fCBpbnRlcnZhbCA+PSBfbW9tZW50LmRlZmF1bHQuZHVyYXRpb24ocnVsZVswXSkpIHsKICAgICAgcmV0dXJuIHJ1bGVbMV07CiAgICB9CiAgfQoKICByZXR1cm4gY29uZmlnLmdldCgnZGF0ZUZvcm1hdCcpOwp9OwoKVGltZUJ1Y2tldHMucHJvdG90eXBlLmdldFNjYWxlZERhdGVGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIERhdGVGaWVsZEZvcm1hdCA9IF9maWVsZF9mb3JtYXRzLmZpZWxkRm9ybWF0cy5nZXRUeXBlKCdkYXRlJyk7CgogIHJldHVybiBuZXcgRGF0ZUZpZWxkRm9ybWF0KHsKICAgIHBhdHRlcm46IHRoaXMuZ2V0U2NhbGVkRGF0ZUZvcm1hdCgpCiAgfSwgZ2V0Q29uZmlnKTsKfTsKClRpbWVCdWNrZXRzLl9fY2FjaGVkX18gPSBmdW5jdGlvbiAoc2VsZikgewogIHZhciBjYWNoZSA9IHt9OwogIHZhciBzYW1lTW9tZW50ID0gc2FtZShfbW9tZW50LmRlZmF1bHQuaXNNb21lbnQpOwogIHZhciBzYW1lRHVyYXRpb24gPSBzYW1lKF9tb21lbnQuZGVmYXVsdC5pc0R1cmF0aW9uKTsKICB2YXIgZGVzYyA9IHsKICAgIF9fY2FjaGVkX186IHsKICAgICAgdmFsdWU6IHNlbGYKICAgIH0KICB9OwogIHZhciBicmVha2VycyA9IHsKICAgIHNldEJvdW5kczogJ2JvdW5kcycsCiAgICBjbGVhckJvdW5kczogJ2JvdW5kcycsCiAgICBzZXRJbnRlcnZhbDogJ2ludGVydmFsJwogIH07CiAgdmFyIHJlc291cmNlcyA9IHsKICAgIGJvdW5kczogewogICAgICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICAgICAgcmV0dXJuIFtzZWxmLl9sYiwgc2VsZi5fdWJdOwogICAgICB9LAogICAgICBjaGFuZ2VzOiBmdW5jdGlvbiBjaGFuZ2VzKHByZXYpIHsKICAgICAgICByZXR1cm4gIXNhbWVNb21lbnQocHJldlswXSwgc2VsZi5fbGIpIHx8ICFzYW1lTW9tZW50KHByZXZbMV0sIHNlbGYuX3ViKTsKICAgICAgfQogICAgfSwKICAgIGludGVydmFsOiB7CiAgICAgIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgICAgICByZXR1cm4gc2VsZi5faTsKICAgICAgfSwKICAgICAgY2hhbmdlczogZnVuY3Rpb24gY2hhbmdlcyhwcmV2KSB7CiAgICAgICAgcmV0dXJuICFzYW1lRHVyYXRpb24ocHJldiwgdGhpcy5faSk7CiAgICAgIH0KICAgIH0KICB9OwoKICBmdW5jdGlvbiBjYWNoZWRHZXR0ZXIocHJvcCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhY2hlZEdldHRlcigpIHsKICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkocHJvcCkpIHsKICAgICAgICAgIHJldHVybiBjYWNoZVtwcm9wXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBjYWNoZVtwcm9wXSA9IHNlbGZbcHJvcF0uYXBwbHkoc2VsZiwgYXJndW1lbnRzKTsKICAgICAgfQogICAgfTsKICB9CgogIGZ1bmN0aW9uIGNhY2hlQnJlYWtlcihwcm9wKSB7CiAgICB2YXIgcmVzb3VyY2UgPSByZXNvdXJjZXNbYnJlYWtlcnNbcHJvcF1dOwogICAgdmFyIHNldHVwID0gcmVzb3VyY2Uuc2V0dXA7CiAgICB2YXIgY2hhbmdlcyA9IHJlc291cmNlLmNoYW5nZXM7CiAgICB2YXIgZm4gPSBzZWxmW3Byb3BdOwogICAgcmV0dXJuIHsKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhY2hlQnJlYWtlcigpIHsKICAgICAgICB2YXIgcHJldiA9IHNldHVwLmNhbGwoc2VsZik7CiAgICAgICAgdmFyIHJldCA9IGZuLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7CgogICAgICAgIGlmIChjaGFuZ2VzLmNhbGwoc2VsZiwgcHJldikpIHsKICAgICAgICAgIGNhY2hlID0ge307CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmV0OwogICAgICB9CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gc2FtZShjaGVja1R5cGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgewogICAgICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7CiAgICAgIGlmIChjaGVja1R5cGUoYSkgPT09IGNoZWNrVHlwZShiKSkgcmV0dXJuICthID09PSArYjsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICB9CgogIF9sb2Rhc2guZGVmYXVsdC5mb3JPd24oVGltZUJ1Y2tldHMucHJvdG90eXBlLCBmdW5jdGlvbiAoZm4sIHByb3ApIHsKICAgIGlmIChwcm9wWzBdID09PSAnXycpIHJldHVybjsKCiAgICBpZiAoYnJlYWtlcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHsKICAgICAgZGVzY1twcm9wXSA9IGNhY2hlQnJlYWtlcihwcm9wKTsKICAgIH0gZWxzZSB7CiAgICAgIGRlc2NbcHJvcF0gPSBjYWNoZWRHZXR0ZXIocHJvcCk7CiAgICB9CiAgfSk7CgogIHJldHVybiBPYmplY3QuY3JlYXRlKHNlbGYsIGRlc2MpOwp9Ow=="},null]}