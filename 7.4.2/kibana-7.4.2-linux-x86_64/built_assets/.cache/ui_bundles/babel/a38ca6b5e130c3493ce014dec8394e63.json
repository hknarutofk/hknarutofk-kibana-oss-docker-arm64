{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/public/saved_objects/saved_objects_client.js","dependencies":[{"path":"src/core/public/saved_objects/saved_objects_client.js","mtime":1572296408496},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNhdmVkT2JqZWN0c0NsaWVudCA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX3VybCA9IHJlcXVpcmUoInVybCIpOwoKdmFyIF9lcnJvcl9hdXRvX2NyZWF0ZV9pbmRleCA9IHJlcXVpcmUoIi4uLy4uLy4uL2xlZ2FjeS91aS9wdWJsaWMvZXJyb3JfYXV0b19jcmVhdGVfaW5kZXgvZXJyb3JfYXV0b19jcmVhdGVfaW5kZXgiKTsKCnZhciBfc2ltcGxlX3NhdmVkX29iamVjdCA9IHJlcXVpcmUoIi4vc2ltcGxlX3NhdmVkX29iamVjdCIpOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIGpvaW4gPSBmdW5jdGlvbiBqb2luKCkgewogIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCB1cmlDb21wb25lbnRzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgdXJpQ29tcG9uZW50c1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICB9CgogIHJldHVybiB1cmlDb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoY29tcCkgewogICAgcmV0dXJuIEJvb2xlYW4oY29tcCk7CiAgfSkubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignLycpOwp9OwovKioKICogSW50ZXJ2YWwgdGhhdCByZXF1ZXN0cyBhcmUgYmF0Y2hlZCBmb3IKICogQHR5cGUge2ludGVnZXJ9CiAqLwoKCnZhciBCQVRDSF9JTlRFUlZBTCA9IDEwMDsKdmFyIEFQSV9CQVNFX1VSTCA9ICcvYXBpL3NhdmVkX29iamVjdHMvJzsKLyoqCiAqIFNhdmVkT2JqZWN0c0NsaWVudENvbnRyYWN0IGFzIGltcGxlbWVudGVkIGJ5IHRoZSB7QGxpbmsgU2F2ZWRPYmplY3RzQ2xpZW50fQogKgogKiBAcHVibGljCiAqLwoKLyoqCiAqIFNhdmVkIE9iamVjdHMgaXMgS2liYW5hJ3MgZGF0YSBwZXJzaXNlbnRlbmNlIG1lY2hhbmlzbSBhbGxvd2luZyBwbHVnaW5zIHRvCiAqIHVzZSBFbGFzdGljc2VhcmNoIGZvciBzdG9yaW5nIHBsdWdpbiBzdGF0ZS4gVGhlIGNsaWVudC1zaWRlCiAqIFNhdmVkT2JqZWN0c0NsaWVudCBpcyBhIHRoaW4gY29udmVuaWVuY2UgbGlicmFyeSBhcm91bmQgdGhlIFNhdmVkT2JqZWN0cwogKiBIVFRQIEFQSSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBTYXZlZCBPYmplY3RzLgogKgogKiBAcHVibGljCiAqLwoKdmFyIFNhdmVkT2JqZWN0c0NsaWVudCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIC8qKgogICAqIFRocm90dGxlZCBwcm9jZXNzaW5nIG9mIGdldCByZXF1ZXN0cyBpbnRvIGJ1bGsgcmVxdWVzdHMgYXQgMTAwbXMgaW50ZXJ2YWwKICAgKi8KCiAgLyoqIEBpbnRlcm5hbCAqLwogIGZ1bmN0aW9uIFNhdmVkT2JqZWN0c0NsaWVudChodHRwKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTYXZlZE9iamVjdHNDbGllbnQpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaHR0cCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJiYXRjaFF1ZXVlIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInByb2Nlc3NCYXRjaFF1ZXVlIiwgKDAsIF9sb2Rhc2gudGhyb3R0bGUpKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHF1ZXVlID0gKDAsIF9sb2Rhc2guY2xvbmVEZWVwKShfdGhpcy5iYXRjaFF1ZXVlKTsKICAgICAgX3RoaXMuYmF0Y2hRdWV1ZSA9IFtdOwoKICAgICAgX3RoaXMuYnVsa0dldChxdWV1ZSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBzYXZlZE9iamVjdHMgPSBfcmVmLnNhdmVkT2JqZWN0czsKICAgICAgICBxdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChxdWV1ZUl0ZW0pIHsKICAgICAgICAgIHZhciBmb3VuZE9iamVjdCA9IHNhdmVkT2JqZWN0cy5maW5kKGZ1bmN0aW9uIChzYXZlZE9iamVjdCkgewogICAgICAgICAgICByZXR1cm4gc2F2ZWRPYmplY3QuaWQgPT09IHF1ZXVlSXRlbS5pZCAmJiBzYXZlZE9iamVjdC50eXBlID09PSBxdWV1ZUl0ZW0udHlwZTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmICghZm91bmRPYmplY3QpIHsKICAgICAgICAgICAgcmV0dXJuIHF1ZXVlSXRlbS5yZXNvbHZlKF90aGlzLmNyZWF0ZVNhdmVkT2JqZWN0KCgwLCBfbG9kYXNoLnBpY2spKHF1ZXVlSXRlbSwgWydpZCcsICd0eXBlJ10pKSk7CiAgICAgICAgICB9CgogICAgICAgICAgcXVldWVJdGVtLnJlc29sdmUoZm91bmRPYmplY3QpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcXVldWUuZm9yRWFjaChmdW5jdGlvbiAocXVldWVJdGVtKSB7CiAgICAgICAgICBxdWV1ZUl0ZW0ucmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwgQkFUQ0hfSU5URVJWQUwsIHsKICAgICAgbGVhZGluZzogZmFsc2UKICAgIH0pKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNyZWF0ZSIsIGZ1bmN0aW9uICh0eXBlLCBhdHRyaWJ1dGVzKSB7CiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKCiAgICAgIGlmICghdHlwZSB8fCAhYXR0cmlidXRlcykgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ3JlcXVpcmVzIHR5cGUgYW5kIGF0dHJpYnV0ZXMnKSk7CiAgICAgIH0KCiAgICAgIHZhciBwYXRoID0gX3RoaXMuZ2V0UGF0aChbdHlwZSwgb3B0aW9ucy5pZF0pOwoKICAgICAgdmFyIHF1ZXJ5ID0gewogICAgICAgIG92ZXJ3cml0ZTogb3B0aW9ucy5vdmVyd3JpdGUKICAgICAgfTsKCiAgICAgIHZhciBjcmVhdGVSZXF1ZXN0ID0gX3RoaXMuc2F2ZWRPYmplY3RzRmV0Y2gocGF0aCwgewogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIHF1ZXJ5OiBxdWVyeSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgICAgbWlncmF0aW9uVmVyc2lvbjogb3B0aW9ucy5taWdyYXRpb25WZXJzaW9uLAogICAgICAgICAgcmVmZXJlbmNlczogb3B0aW9ucy5yZWZlcmVuY2VzCiAgICAgICAgfSkKICAgICAgfSk7CgogICAgICByZXR1cm4gY3JlYXRlUmVxdWVzdC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmNyZWF0ZVNhdmVkT2JqZWN0KHJlc3ApOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBpZiAoKDAsIF9lcnJvcl9hdXRvX2NyZWF0ZV9pbmRleC5pc0F1dG9DcmVhdGVJbmRleEVycm9yKShlcnJvcikpIHsKICAgICAgICAgICgwLCBfZXJyb3JfYXV0b19jcmVhdGVfaW5kZXguc2hvd0F1dG9DcmVhdGVJbmRleEVycm9yUGFnZSkoKTsKICAgICAgICB9CgogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYnVsa0NyZWF0ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9iamVjdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogewogICAgICAgIG92ZXJ3cml0ZTogZmFsc2UKICAgICAgfTsKCiAgICAgIHZhciBwYXRoID0gX3RoaXMuZ2V0UGF0aChbJ19idWxrX2NyZWF0ZSddKTsKCiAgICAgIHZhciBxdWVyeSA9IHsKICAgICAgICBvdmVyd3JpdGU6IG9wdGlvbnMub3ZlcndyaXRlCiAgICAgIH07CgogICAgICB2YXIgcmVxdWVzdCA9IF90aGlzLnNhdmVkT2JqZWN0c0ZldGNoKHBhdGgsIHsKICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICBxdWVyeTogcXVlcnksCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob2JqZWN0cykKICAgICAgfSk7CgogICAgICByZXR1cm4gcmVxdWVzdC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgcmVzcC5zYXZlZF9vYmplY3RzID0gcmVzcC5zYXZlZF9vYmplY3RzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIF90aGlzLmNyZWF0ZVNhdmVkT2JqZWN0KGQpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiByZW5hbWVLZXlzKHsKICAgICAgICAgIHNhdmVkX29iamVjdHM6ICdzYXZlZE9iamVjdHMnCiAgICAgICAgfSwgcmVzcCk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZWxldGUiLCBmdW5jdGlvbiAodHlwZSwgaWQpIHsKICAgICAgaWYgKCF0eXBlIHx8ICFpZCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ3JlcXVpcmVzIHR5cGUgYW5kIGlkJykpOwogICAgICB9CgogICAgICByZXR1cm4gX3RoaXMuc2F2ZWRPYmplY3RzRmV0Y2goX3RoaXMuZ2V0UGF0aChbdHlwZSwgaWRdKSwgewogICAgICAgIG1ldGhvZDogJ0RFTEVURScKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImZpbmQiLCBmdW5jdGlvbiAob3B0aW9ucykgewogICAgICB2YXIgcGF0aCA9IF90aGlzLmdldFBhdGgoWydfZmluZCddKTsKCiAgICAgIHZhciByZW5hbWVNYXAgPSB7CiAgICAgICAgZGVmYXVsdFNlYXJjaE9wZXJhdG9yOiAnZGVmYXVsdF9zZWFyY2hfb3BlcmF0b3InLAogICAgICAgIGZpZWxkczogJ2ZpZWxkcycsCiAgICAgICAgaGFzUmVmZXJlbmNlOiAnaGFzX3JlZmVyZW5jZScsCiAgICAgICAgcGFnZTogJ3BhZ2UnLAogICAgICAgIHBlclBhZ2U6ICdwZXJfcGFnZScsCiAgICAgICAgc2VhcmNoOiAnc2VhcmNoJywKICAgICAgICBzZWFyY2hGaWVsZHM6ICdzZWFyY2hfZmllbGRzJywKICAgICAgICBzb3J0RmllbGQ6ICdzb3J0X2ZpZWxkJywKICAgICAgICB0eXBlOiAndHlwZScKICAgICAgfTsKICAgICAgdmFyIHJlbmFtZWRRdWVyeSA9IHJlbmFtZUtleXMocmVuYW1lTWFwLCBvcHRpb25zKTsKCiAgICAgIHZhciBxdWVyeSA9IF9sb2Rhc2gucGljay5hcHBseShudWxsLCBbcmVuYW1lZFF1ZXJ5XS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KE9iamVjdC52YWx1ZXMocmVuYW1lTWFwKSkpKTsKCiAgICAgIHZhciByZXF1ZXN0ID0gX3RoaXMuc2F2ZWRPYmplY3RzRmV0Y2gocGF0aCwgewogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgcXVlcnk6IHF1ZXJ5CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIHJlcXVlc3QudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIHJlc3Auc2F2ZWRfb2JqZWN0cyA9IHJlc3Auc2F2ZWRfb2JqZWN0cy5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5jcmVhdGVTYXZlZE9iamVjdChkKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVuYW1lS2V5cyh7CiAgICAgICAgICBzYXZlZF9vYmplY3RzOiAnc2F2ZWRPYmplY3RzJywKICAgICAgICAgIHRvdGFsOiAndG90YWwnLAogICAgICAgICAgcGVyX3BhZ2U6ICdwZXJQYWdlJywKICAgICAgICAgIHBhZ2U6ICdwYWdlJwogICAgICAgIH0sIHJlc3ApOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0IiwgZnVuY3Rpb24gKHR5cGUsIGlkKSB7CiAgICAgIGlmICghdHlwZSB8fCAhaWQpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdyZXF1aXJlcyB0eXBlIGFuZCBpZCcpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBfdGhpcy5iYXRjaFF1ZXVlLnB1c2goewogICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIHJlc29sdmU6IHJlc29sdmUsCiAgICAgICAgICByZWplY3Q6IHJlamVjdAogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy5wcm9jZXNzQmF0Y2hRdWV1ZSgpOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYnVsa0dldCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9iamVjdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwoKICAgICAgdmFyIHBhdGggPSBfdGhpcy5nZXRQYXRoKFsnX2J1bGtfZ2V0J10pOwoKICAgICAgdmFyIGZpbHRlcmVkT2JqZWN0cyA9IG9iamVjdHMubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gKDAsIF9sb2Rhc2gucGljaykob2JqLCBbJ2lkJywgJ3R5cGUnXSk7CiAgICAgIH0pOwoKICAgICAgdmFyIHJlcXVlc3QgPSBfdGhpcy5zYXZlZE9iamVjdHNGZXRjaChwYXRoLCB7CiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZmlsdGVyZWRPYmplY3RzKQogICAgICB9KTsKCiAgICAgIHJldHVybiByZXF1ZXN0LnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICByZXNwLnNhdmVkX29iamVjdHMgPSByZXNwLnNhdmVkX29iamVjdHMubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuY3JlYXRlU2F2ZWRPYmplY3QoZCk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlbmFtZUtleXMoewogICAgICAgICAgc2F2ZWRfb2JqZWN0czogJ3NhdmVkT2JqZWN0cycKICAgICAgICB9LCByZXNwKTsKICAgICAgfSk7CiAgICB9KTsKCiAgICB0aGlzLmh0dHAgPSBodHRwOwogICAgdGhpcy5iYXRjaFF1ZXVlID0gW107CiAgfQogIC8qKgogICAqIFBlcnNpc3RzIGFuIG9iamVjdAogICAqCiAgICogQHBhcmFtIHR5cGUKICAgKiBAcGFyYW0gYXR0cmlidXRlcwogICAqIEBwYXJhbSBvcHRpb25zCiAgICogQHJldHVybnMKICAgKi8KCgogIF9jcmVhdGVDbGFzcyhTYXZlZE9iamVjdHNDbGllbnQsIFt7CiAgICBrZXk6ICJ1cGRhdGUiLAoKICAgIC8qKgogICAgICogVXBkYXRlcyBhbiBvYmplY3QKICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZQogICAgICogQHBhcmFtIHtzdHJpbmd9IGlkCiAgICAgKiBAcGFyYW0ge29iamVjdH0gYXR0cmlidXRlcwogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMKICAgICAqIEBwcm9wIHtpbnRlZ2VyfSBvcHRpb25zLnZlcnNpb24gLSBlbnN1cmVzIHZlcnNpb24gbWF0Y2hlcyB0aGF0IG9mIHBlcnNpc3RlZCBvYmplY3QKICAgICAqIEBwcm9wIHtvYmplY3R9IG9wdGlvbnMubWlncmF0aW9uVmVyc2lvbiAtIFRoZSBvcHRpb25hbCBtaWdyYXRpb25WZXJzaW9uIG9mIHRoaXMgZG9jdW1lbnQKICAgICAqIEByZXR1cm5zCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUodHlwZSwgaWQsIGF0dHJpYnV0ZXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgX3JlZjIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9LAogICAgICAgICAgdmVyc2lvbiA9IF9yZWYyLnZlcnNpb24sCiAgICAgICAgICBtaWdyYXRpb25WZXJzaW9uID0gX3JlZjIubWlncmF0aW9uVmVyc2lvbiwKICAgICAgICAgIHJlZmVyZW5jZXMgPSBfcmVmMi5yZWZlcmVuY2VzOwoKICAgICAgaWYgKCF0eXBlIHx8ICFpZCB8fCAhYXR0cmlidXRlcykgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ3JlcXVpcmVzIHR5cGUsIGlkIGFuZCBhdHRyaWJ1dGVzJykpOwogICAgICB9CgogICAgICB2YXIgcGF0aCA9IHRoaXMuZ2V0UGF0aChbdHlwZSwgaWRdKTsKICAgICAgdmFyIGJvZHkgPSB7CiAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcywKICAgICAgICBtaWdyYXRpb25WZXJzaW9uOiBtaWdyYXRpb25WZXJzaW9uLAogICAgICAgIHJlZmVyZW5jZXM6IHJlZmVyZW5jZXMsCiAgICAgICAgdmVyc2lvbjogdmVyc2lvbgogICAgICB9OwogICAgICByZXR1cm4gdGhpcy5zYXZlZE9iamVjdHNGZXRjaChwYXRoLCB7CiAgICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5jcmVhdGVTYXZlZE9iamVjdChyZXNwKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlU2F2ZWRPYmplY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVNhdmVkT2JqZWN0KG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIG5ldyBfc2ltcGxlX3NhdmVkX29iamVjdC5TaW1wbGVTYXZlZE9iamVjdCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRQYXRoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXRoKHBhdGgpIHsKICAgICAgcmV0dXJuICgwLCBfdXJsLnJlc29sdmUpKEFQSV9CQVNFX1VSTCwgam9pbi5hcHBseSh2b2lkIDAsIF90b0NvbnN1bWFibGVBcnJheShwYXRoKSkpOwogICAgfQogICAgLyoqCiAgICAgKiBUbyBlbnN1cmUgd2UgZG9uJ3QgYnJlYWsgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIHNhdmVkT2JqZWN0c0ZldGNoIGtlZXBzCiAgICAgKiB0aGUgb2xkIGtmZXRjaCBlcnJvciBmb3JtYXQgb2YgYHtyZXM6IHtzdGF0dXM6IG51bWJlcn19YCB3aGVyZWFzIGBodHRwLmZldGNoYAogICAgICogdXNlcyBge3Jlc3BvbnNlOiB7c3RhdHVzOiBudW1iZXJ9fWAuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2F2ZWRPYmplY3RzRmV0Y2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVkT2JqZWN0c0ZldGNoKHBhdGgsIF9yZWYzKSB7CiAgICAgIHZhciBtZXRob2QgPSBfcmVmMy5tZXRob2QsCiAgICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5LAogICAgICAgICAgYm9keSA9IF9yZWYzLmJvZHk7CiAgICAgIHJldHVybiB0aGlzLmh0dHAuZmV0Y2gocGF0aCwgewogICAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICAgIHF1ZXJ5OiBxdWVyeSwKICAgICAgICBib2R5OiBib2R5CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICB2YXIga2ZldGNoRXJyb3IgPSBPYmplY3QuYXNzaWduKGVyciwgewogICAgICAgICAgcmVzOiBlcnIucmVzcG9uc2UKICAgICAgICB9KTsKICAgICAgICBkZWxldGUga2ZldGNoRXJyb3IucmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGtmZXRjaEVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gU2F2ZWRPYmplY3RzQ2xpZW50Owp9KCk7Ci8qKgogKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHRoZSBvd24gcHJvcGVydGllcyBvZiBgb2JqYCwgYnV0IHRoZQogKiBrZXlzIHJlbmFtZWQgYWNjb3JkaW5nIHRvIHRoZSBga2V5c01hcGAuCiAqCiAqIEBwYXJhbSBrZXlzTWFwIC0gYSBtYXAgb2YgdGhlIGZvcm0gYHtvbGRLZXk6IG5ld0tleX1gCiAqIEBwYXJhbSBvYmogLSB0aGUgb2JqZWN0IHdob3NlIG93biBwcm9wZXJ0aWVzIHdpbGwgYmUgcmVuYW1lZAogKi8KCgpleHBvcnRzLlNhdmVkT2JqZWN0c0NsaWVudCA9IFNhdmVkT2JqZWN0c0NsaWVudDsKCnZhciByZW5hbWVLZXlzID0gZnVuY3Rpb24gcmVuYW1lS2V5cyhrZXlzTWFwLCBvYmopIHsKICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgYWNjLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBrZXlzTWFwW2tleV0gfHwga2V5LCBvYmpba2V5XSkpOwogIH0sIHt9KTsKfTs="},null]}