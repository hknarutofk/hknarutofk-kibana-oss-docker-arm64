{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/public/chrome/chrome_service.js","dependencies":[{"path":"src/core/public/chrome/chrome_service.js","mtime":1572296408388},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIkNocm9tZVJlY2VudGx5QWNjZXNzZWQiLCB7CiAgZW51bWVyYWJsZTogdHJ1ZSwKICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgIHJldHVybiBfcmVjZW50bHlfYWNjZXNzZWQuQ2hyb21lUmVjZW50bHlBY2Nlc3NlZDsKICB9Cn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIkNocm9tZU5hdkNvbnRyb2xzIiwgewogIGVudW1lcmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICByZXR1cm4gX25hdl9jb250cm9scy5DaHJvbWVOYXZDb250cm9sczsKICB9Cn0pOwpleHBvcnRzLkNocm9tZVNlcnZpY2UgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcnhqcyA9IHJlcXVpcmUoInJ4anMiKTsKCnZhciBfb3BlcmF0b3JzID0gcmVxdWlyZSgicnhqcy9vcGVyYXRvcnMiKTsKCnZhciBVcmwgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJ1cmwiKSk7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfbmF2X2xpbmtzID0gcmVxdWlyZSgiLi9uYXZfbGlua3MiKTsKCnZhciBfcmVjZW50bHlfYWNjZXNzZWQgPSByZXF1aXJlKCIuL3JlY2VudGx5X2FjY2Vzc2VkIik7Cgp2YXIgX25hdl9jb250cm9scyA9IHJlcXVpcmUoIi4vbmF2X2NvbnRyb2xzIik7Cgp2YXIgX3VpID0gcmVxdWlyZSgiLi91aSIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsKICB0cnkgewogICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOwogICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsKICB9IGNhdGNoIChlcnJvcikgewogICAgcmVqZWN0KGVycm9yKTsKICAgIHJldHVybjsKICB9CgogIGlmIChpbmZvLmRvbmUpIHsKICAgIHJlc29sdmUodmFsdWUpOwogIH0gZWxzZSB7CiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7CiAgfQp9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsKCiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsKICAgICAgfQoKICAgICAgX25leHQodW5kZWZpbmVkKTsKICAgIH0pOwogIH07Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgSVNfQ09MTEFQU0VEX0tFWSA9ICdjb3JlLmNocm9tZS5pc0NvbGxhcHNlZCc7CgpmdW5jdGlvbiBpc0VtYmVkUGFyYW1Jbkhhc2goKSB7CiAgdmFyIF9VcmwkcGFyc2UgPSBVcmwucGFyc2UoU3RyaW5nKHdpbmRvdy5sb2NhdGlvbi5oYXNoKS5zbGljZSgxKSwgdHJ1ZSksCiAgICAgIHF1ZXJ5ID0gX1VybCRwYXJzZS5xdWVyeTsKCiAgcmV0dXJuIEJvb2xlYW4ocXVlcnkuZW1iZWQpOwp9Ci8qKiBAcHVibGljICovCgovKiogQGludGVybmFsICovCgoKdmFyIENocm9tZVNlcnZpY2UgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBDaHJvbWVTZXJ2aWNlKF9yZWYpIHsKICAgIHZhciBicm93c2VyU3VwcG9ydHNDc3AgPSBfcmVmLmJyb3dzZXJTdXBwb3J0c0NzcDsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2hyb21lU2VydmljZSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzdG9wJCIsIG5ldyBfcnhqcy5SZXBsYXlTdWJqZWN0KDEpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJyb3dzZXJTdXBwb3J0c0NzcCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuYXZDb250cm9scyIsIG5ldyBfbmF2X2NvbnRyb2xzLk5hdkNvbnRyb2xzU2VydmljZSgpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm5hdkxpbmtzIiwgbmV3IF9uYXZfbGlua3MuTmF2TGlua3NTZXJ2aWNlKCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmVjZW50bHlBY2Nlc3NlZCIsIG5ldyBfcmVjZW50bHlfYWNjZXNzZWQuUmVjZW50bHlBY2Nlc3NlZFNlcnZpY2UoKSk7CgogICAgdGhpcy5icm93c2VyU3VwcG9ydHNDc3AgPSBicm93c2VyU3VwcG9ydHNDc3A7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQ2hyb21lU2VydmljZSwgW3sKICAgIGtleTogInN0YXJ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc3RhcnQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKF9yZWYyKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgdmFyIGFwcGxpY2F0aW9uLCBkb2NMaW5rcywgaHR0cCwgaW5qZWN0ZWRNZXRhZGF0YSwgbm90aWZpY2F0aW9ucywgRk9SQ0VfSElEREVOLCBhcHBUaXRsZSQsIGJyYW5kJCwgaXNWaXNpYmxlJCwgaXNDb2xsYXBzZWQkLCBhcHBsaWNhdGlvbkNsYXNzZXMkLCBoZWxwRXh0ZW5zaW9uJCwgYnJlYWRjcnVtYnMkLCBiYWRnZSQsIG5hdkNvbnRyb2xzLCBuYXZMaW5rcywgcmVjZW50bHlBY2Nlc3NlZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbiA9IF9yZWYyLmFwcGxpY2F0aW9uLCBkb2NMaW5rcyA9IF9yZWYyLmRvY0xpbmtzLCBodHRwID0gX3JlZjIuaHR0cCwgaW5qZWN0ZWRNZXRhZGF0YSA9IF9yZWYyLmluamVjdGVkTWV0YWRhdGEsIG5vdGlmaWNhdGlvbnMgPSBfcmVmMi5ub3RpZmljYXRpb25zOwogICAgICAgICAgICAgICAgRk9SQ0VfSElEREVOID0gaXNFbWJlZFBhcmFtSW5IYXNoKCk7CiAgICAgICAgICAgICAgICBhcHBUaXRsZSQgPSBuZXcgX3J4anMuQmVoYXZpb3JTdWJqZWN0KCdLaWJhbmEnKTsKICAgICAgICAgICAgICAgIGJyYW5kJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3Qoe30pOwogICAgICAgICAgICAgICAgaXNWaXNpYmxlJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QodHJ1ZSk7CiAgICAgICAgICAgICAgICBpc0NvbGxhcHNlZCQgPSBuZXcgX3J4anMuQmVoYXZpb3JTdWJqZWN0KCEhbG9jYWxTdG9yYWdlLmdldEl0ZW0oSVNfQ09MTEFQU0VEX0tFWSkpOwogICAgICAgICAgICAgICAgYXBwbGljYXRpb25DbGFzc2VzJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QobmV3IFNldCgpKTsKICAgICAgICAgICAgICAgIGhlbHBFeHRlbnNpb24kID0gbmV3IF9yeGpzLkJlaGF2aW9yU3ViamVjdCh1bmRlZmluZWQpOwogICAgICAgICAgICAgICAgYnJlYWRjcnVtYnMkID0gbmV3IF9yeGpzLkJlaGF2aW9yU3ViamVjdChbXSk7CiAgICAgICAgICAgICAgICBiYWRnZSQgPSBuZXcgX3J4anMuQmVoYXZpb3JTdWJqZWN0KHVuZGVmaW5lZCk7CiAgICAgICAgICAgICAgICBuYXZDb250cm9scyA9IHRoaXMubmF2Q29udHJvbHMuc3RhcnQoKTsKICAgICAgICAgICAgICAgIG5hdkxpbmtzID0gdGhpcy5uYXZMaW5rcy5zdGFydCh7CiAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uOiBhcHBsaWNhdGlvbiwKICAgICAgICAgICAgICAgICAgaHR0cDogaHR0cAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWNlbnRseUFjY2Vzc2VkLnN0YXJ0KHsKICAgICAgICAgICAgICAgICAgaHR0cDogaHR0cAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICByZWNlbnRseUFjY2Vzc2VkID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYnJvd3NlclN1cHBvcnRzQ3NwICYmIGluamVjdGVkTWV0YWRhdGEuZ2V0Q3NwQ29uZmlnKCkud2FybkxlZ2FjeUJyb3dzZXJzKSB7CiAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMudG9hc3RzLmFkZFdhcm5pbmcoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2NvcmUuY2hyb21lLmxlZ2FjeUJyb3dzZXJXYXJuaW5nJywgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnWW91ciBicm93c2VyIGRvZXMgbm90IG1lZXQgdGhlIHNlY3VyaXR5IHJlcXVpcmVtZW50cyBmb3IgS2liYW5hLicKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgbmF2Q29udHJvbHM6IG5hdkNvbnRyb2xzLAogICAgICAgICAgICAgICAgICBuYXZMaW5rczogbmF2TGlua3MsCiAgICAgICAgICAgICAgICAgIHJlY2VudGx5QWNjZXNzZWQ6IHJlY2VudGx5QWNjZXNzZWQsCiAgICAgICAgICAgICAgICAgIGdldENvbXBvbmVudDogZnVuY3Rpb24gZ2V0Q29tcG9uZW50KCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF91aS5Mb2FkaW5nSW5kaWNhdG9yLCB7CiAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nQ291bnQkOiBodHRwLmdldExvYWRpbmdDb3VudCQoKQogICAgICAgICAgICAgICAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF91aS5IZWFkZXJXcmFwcGVyLCB7CiAgICAgICAgICAgICAgICAgICAgICBhcHBUaXRsZSQ6IGFwcFRpdGxlJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKSwKICAgICAgICAgICAgICAgICAgICAgIGJhZGdlJDogYmFkZ2UkLnBpcGUoKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpLAogICAgICAgICAgICAgICAgICAgICAgYmFzZVBhdGg6IGh0dHAuYmFzZVBhdGgsCiAgICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1icyQ6IGJyZWFkY3J1bWJzJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKSwKICAgICAgICAgICAgICAgICAgICAgIGtpYmFuYURvY0xpbms6IGRvY0xpbmtzLmxpbmtzLmtpYmFuYSwKICAgICAgICAgICAgICAgICAgICAgIGZvcmNlQXBwU3dpdGNoZXJOYXZpZ2F0aW9uJDogbmF2TGlua3MuZ2V0Rm9yY2VBcHBTd2l0Y2hlck5hdmlnYXRpb24kKCksCiAgICAgICAgICAgICAgICAgICAgICBoZWxwRXh0ZW5zaW9uJDogaGVscEV4dGVuc2lvbiQucGlwZSgoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKF90aGlzLnN0b3AkKSksCiAgICAgICAgICAgICAgICAgICAgICBob21lSHJlZjogaHR0cC5iYXNlUGF0aC5wcmVwZW5kKCcvYXBwL2tpYmFuYSMvaG9tZScpLAogICAgICAgICAgICAgICAgICAgICAgaXNWaXNpYmxlJDogaXNWaXNpYmxlJC5waXBlKCgwLCBfb3BlcmF0b3JzLm1hcCkoZnVuY3Rpb24gKHZpc2liaWxpdHkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZPUkNFX0hJRERFTiA/IGZhbHNlIDogdmlzaWJpbGl0eTsKICAgICAgICAgICAgICAgICAgICAgIH0pLCAoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKF90aGlzLnN0b3AkKSksCiAgICAgICAgICAgICAgICAgICAgICBraWJhbmFWZXJzaW9uOiBpbmplY3RlZE1ldGFkYXRhLmdldEtpYmFuYVZlcnNpb24oKSwKICAgICAgICAgICAgICAgICAgICAgIG5hdkxpbmtzJDogbmF2TGlua3MuZ2V0TmF2TGlua3MkKCksCiAgICAgICAgICAgICAgICAgICAgICByZWNlbnRseUFjY2Vzc2VkJDogcmVjZW50bHlBY2Nlc3NlZC5nZXQkKCksCiAgICAgICAgICAgICAgICAgICAgICBuYXZDb250cm9sc0xlZnQkOiBuYXZDb250cm9scy5nZXRMZWZ0JCgpLAogICAgICAgICAgICAgICAgICAgICAgbmF2Q29udHJvbHNSaWdodCQ6IG5hdkNvbnRyb2xzLmdldFJpZ2h0JCgpCiAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBzZXRBcHBUaXRsZTogZnVuY3Rpb24gc2V0QXBwVGl0bGUoYXBwVGl0bGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBwVGl0bGUkLm5leHQoYXBwVGl0bGUpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBnZXRCcmFuZCQ6IGZ1bmN0aW9uIGdldEJyYW5kJCgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYnJhbmQkLnBpcGUoKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBzZXRCcmFuZDogZnVuY3Rpb24gc2V0QnJhbmQoYnJhbmQpIHsKICAgICAgICAgICAgICAgICAgICBicmFuZCQubmV4dChPYmplY3QuZnJlZXplKHsKICAgICAgICAgICAgICAgICAgICAgIGxvZ286IGJyYW5kLmxvZ28sCiAgICAgICAgICAgICAgICAgICAgICBzbWFsbExvZ286IGJyYW5kLnNtYWxsTG9nbwogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZ2V0SXNWaXNpYmxlJDogZnVuY3Rpb24gZ2V0SXNWaXNpYmxlJCgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNWaXNpYmxlJC5waXBlKCgwLCBfb3BlcmF0b3JzLm1hcCkoZnVuY3Rpb24gKHZpc2liaWxpdHkpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGT1JDRV9ISURERU4gPyBmYWxzZSA6IHZpc2liaWxpdHk7CiAgICAgICAgICAgICAgICAgICAgfSksICgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgc2V0SXNWaXNpYmxlOiBmdW5jdGlvbiBzZXRJc1Zpc2libGUodmlzaWJpbGl0eSkgewogICAgICAgICAgICAgICAgICAgIGlzVmlzaWJsZSQubmV4dCh2aXNpYmlsaXR5KTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZ2V0SXNDb2xsYXBzZWQkOiBmdW5jdGlvbiBnZXRJc0NvbGxhcHNlZCQoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzQ29sbGFwc2VkJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgc2V0SXNDb2xsYXBzZWQ6IGZ1bmN0aW9uIHNldElzQ29sbGFwc2VkKGlzQ29sbGFwc2VkKSB7CiAgICAgICAgICAgICAgICAgICAgaXNDb2xsYXBzZWQkLm5leHQoaXNDb2xsYXBzZWQpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKElTX0NPTExBUFNFRF9LRVksICd0cnVlJyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKElTX0NPTExBUFNFRF9LRVkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZ2V0QXBwbGljYXRpb25DbGFzc2VzJDogZnVuY3Rpb24gZ2V0QXBwbGljYXRpb25DbGFzc2VzJCgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBwbGljYXRpb25DbGFzc2VzJC5waXBlKCgwLCBfb3BlcmF0b3JzLm1hcCkoZnVuY3Rpb24gKHNldCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90b0NvbnN1bWFibGVBcnJheShzZXQpOwogICAgICAgICAgICAgICAgICAgIH0pLCAoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKF90aGlzLnN0b3AkKSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGFkZEFwcGxpY2F0aW9uQ2xhc3M6IGZ1bmN0aW9uIGFkZEFwcGxpY2F0aW9uQ2xhc3MoY2xhc3NOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZSA9IG5ldyBTZXQoX3RvQ29uc3VtYWJsZUFycmF5KGFwcGxpY2F0aW9uQ2xhc3NlcyQuZ2V0VmFsdWUoKSkpOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5hZGQoY2xhc3NOYW1lKTsKICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkNsYXNzZXMkLm5leHQodXBkYXRlKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgcmVtb3ZlQXBwbGljYXRpb25DbGFzczogZnVuY3Rpb24gcmVtb3ZlQXBwbGljYXRpb25DbGFzcyhjbGFzc05hbWUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlID0gbmV3IFNldChfdG9Db25zdW1hYmxlQXJyYXkoYXBwbGljYXRpb25DbGFzc2VzJC5nZXRWYWx1ZSgpKSk7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlLmRlbGV0ZShjbGFzc05hbWUpOwogICAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uQ2xhc3NlcyQubmV4dCh1cGRhdGUpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBnZXRCYWRnZSQ6IGZ1bmN0aW9uIGdldEJhZGdlJCgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFkZ2UkLnBpcGUoKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBzZXRCYWRnZTogZnVuY3Rpb24gc2V0QmFkZ2UoYmFkZ2UpIHsKICAgICAgICAgICAgICAgICAgICBiYWRnZSQubmV4dChiYWRnZSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGdldEJyZWFkY3J1bWJzJDogZnVuY3Rpb24gZ2V0QnJlYWRjcnVtYnMkKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBicmVhZGNydW1icyQucGlwZSgoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKF90aGlzLnN0b3AkKSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHNldEJyZWFkY3J1bWJzOiBmdW5jdGlvbiBzZXRCcmVhZGNydW1icyhuZXdCcmVhZGNydW1icykgewogICAgICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzJC5uZXh0KG5ld0JyZWFkY3J1bWJzKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZ2V0SGVscEV4dGVuc2lvbiQ6IGZ1bmN0aW9uIGdldEhlbHBFeHRlbnNpb24kKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBoZWxwRXh0ZW5zaW9uJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgc2V0SGVscEV4dGVuc2lvbjogZnVuY3Rpb24gc2V0SGVscEV4dGVuc2lvbihoZWxwRXh0ZW5zaW9uKSB7CiAgICAgICAgICAgICAgICAgICAgaGVscEV4dGVuc2lvbiQubmV4dChoZWxwRXh0ZW5zaW9uKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc3RhcnQoX3gpIHsKICAgICAgICByZXR1cm4gX3N0YXJ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzdGFydDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInN0b3AiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7CiAgICAgIHRoaXMubmF2TGlua3Muc3RvcCgpOwogICAgICB0aGlzLnN0b3AkLm5leHQoKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBDaHJvbWVTZXJ2aWNlOwp9KCk7Ci8qKgogKiBDaHJvbWVTdGFydCBhbGxvd3MgcGx1Z2lucyB0byBjdXN0b21pemUgdGhlIGdsb2JhbCBjaHJvbWUgaGVhZGVyIFVJIGFuZAogKiBlbnJpY2ggdGhlIFVYIHdpdGggYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudCBsb2NhdGlvbiBvZiB0aGUKICogYnJvd3Nlci4KICoKICogQHJlbWFya3MKICogV2hpbGUgQ2hyb21lU3RhcnQgZXhwb3NlcyBtYW55IEFQSXMsIHRoZXkgc2hvdWxkIGJlIHVzZWQgc3BhcmluZ2x5IGFuZCB0aGUKICogZGV2ZWxvcGVyIHNob3VsZCB1bmRlcnN0YW5kIGhvdyB0aGV5IGFmZmVjdCBvdGhlciBwbHVnaW5zIGFuZCBhcHBsaWNhdGlvbnMuCiAqCiAqIEBleGFtcGxlCiAqIEhvdyB0byBhZGQgYSByZWNlbnRseSBhY2Nlc3NlZCBpdGVtIHRvIHRoZSBzaWRlYmFyOgogKiBgYGB0cwogKiBjb3JlLmNocm9tZS5yZWNlbnRseUFjY2Vzc2VkLmFkZCgnL2FwcC9tYXAvMTIzNCcsICdNYXAgMTIzNCcsICcxMjM0Jyk7CiAqIGBgYAogKgogKiBAZXhhbXBsZQogKiBIb3cgdG8gc2V0IHRoZSBoZWxwIGRyb3Bkb3duIGV4dGVuc2lvbjoKICogYGBgdHN4CiAqIGNvcmUuY2hyb21lLnNldEhlbHBFeHRlbnNpb24oZWxlbSA9PiB7CiAqICAgUmVhY3RET00ucmVuZGVyKDxNeUhlbHBDb21wb25lbnQgLz4sIGVsZW0pOwogKiAgIHJldHVybiAoKSA9PiBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKGVsZW0pOwogKiB9KTsKICogYGBgCiAqCiAqIEBwdWJsaWMKICovCgoKZXhwb3J0cy5DaHJvbWVTZXJ2aWNlID0gQ2hyb21lU2VydmljZTs="},null]}