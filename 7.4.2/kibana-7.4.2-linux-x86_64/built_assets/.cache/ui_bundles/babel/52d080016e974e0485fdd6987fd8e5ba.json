{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/timelion/public/panels/timechart/schema.js","dependencies":[{"path":"src/legacy/core_plugins/timelion/public/panels/timechart/schema.js","mtime":1572296411416},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB0aW1lY2hhcnRGbjsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX2pxdWVyeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgianF1ZXJ5IikpOwoKdmFyIF9tb21lbnRUaW1lem9uZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibW9tZW50LXRpbWV6b25lIikpOwoKdmFyIF9vYnNlcnZlX3Jlc2l6ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vLi4vbGliL29ic2VydmVfcmVzaXplIikpOwoKdmFyIF9saWIgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21tb24vbGliIik7Cgp2YXIgX3RpbWVmaWx0ZXIgPSByZXF1aXJlKCJ1aS90aW1lZmlsdGVyIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCnJlcXVpcmUoJy4vZmxvdCcpOwoKdmFyIERFQk9VTkNFX0RFTEFZID0gNTA7CgpmdW5jdGlvbiB0aW1lY2hhcnRGbihQcml2YXRlLCBjb25maWcsICRyb290U2NvcGUsICRjb21waWxlKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGhlbHA6ICdEcmF3IGEgdGltZXNlcmllcyBjaGFydCcsCiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCRzY29wZSwgJGVsZW0pIHsKICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz0iY2hhcnQtdG9wLXRpdGxlIj48L2Rpdj48ZGl2IGNsYXNzPSJjaGFydC1jYW52YXMiPjwvZGl2Pic7CgogICAgICAgIHZhciB0aWNrRm9ybWF0dGVycyA9IHJlcXVpcmUoJ3BsdWdpbnMvdGltZWxpb24vc2VydmljZXMvdGlja19mb3JtYXR0ZXJzJykoKTsKCiAgICAgICAgdmFyIGdldHhBeGlzRm9ybWF0dGVyID0gUHJpdmF0ZShyZXF1aXJlKCdwbHVnaW5zL3RpbWVsaW9uL3BhbmVscy90aW1lY2hhcnQveGF4aXNfZm9ybWF0dGVyJykpOwogICAgICAgIHZhciBnZW5lcmF0ZVRpY2tzID0gUHJpdmF0ZShyZXF1aXJlKCdwbHVnaW5zL3RpbWVsaW9uL3BhbmVscy90aW1lY2hhcnQvdGlja19nZW5lcmF0b3InKSk7IC8vIFRPRE86IEkgd29uZGVyIGlmIHdlIHNob3VsZCBzdXBwbHkgb3VyIG93biBtb21lbnQgdGhhdCBzZXRzIHRoaXMgZXZlcnkgdGltZT8KICAgICAgICAvLyBjb3VsZCBqdXN0IHVzZSBhbmd1bGFyJ3MgaW5qZWN0aW9uIHRvIHByb3ZpZGUgYSBtb21lbnQgc2VydmljZT8KCiAgICAgICAgX21vbWVudFRpbWV6b25lLmRlZmF1bHQudHouc2V0RGVmYXVsdChjb25maWcuZ2V0KCdkYXRlRm9ybWF0OnR6JykpOwoKICAgICAgICB2YXIgcmVuZGVyID0gJHNjb3BlLnNlcmllc0xpc3QucmVuZGVyIHx8IHt9OwogICAgICAgICRzY29wZS5jaGFydCA9ICRzY29wZS5zZXJpZXNMaXN0Lmxpc3Q7CiAgICAgICAgJHNjb3BlLmludGVydmFsID0gJHNjb3BlLmludGVydmFsOwogICAgICAgICRzY29wZS5zZWFyY2ggPSAkc2NvcGUuc2VhcmNoIHx8IF9sb2Rhc2guZGVmYXVsdC5ub29wOwogICAgICAgIHZhciBsZWdlbmRWYWx1ZU51bWJlcnM7CiAgICAgICAgdmFyIGxlZ2VuZENhcHRpb247CgogICAgICAgIHZhciBkZWJvdW5jZWRTZXRMZWdlbmROdW1iZXJzID0gX2xvZGFzaC5kZWZhdWx0LmRlYm91bmNlKHNldExlZ2VuZE51bWJlcnMsIERFQk9VTkNFX0RFTEFZLCB7CiAgICAgICAgICBtYXhXYWl0OiBERUJPVU5DRV9ERUxBWSwKICAgICAgICAgIGxlYWRpbmc6IHRydWUsCiAgICAgICAgICB0cmFpbGluZzogZmFsc2UKICAgICAgICB9KTsgLy8gZW5zdXJlIGxlZ2VuZCBpcyB0aGUgc2FtZSBoZWlnaHQgd2l0aCBvciB3aXRob3V0IGEgY2FwdGlvbiBzbyBsZWdlbmQgaXRlbXMgZG8gbm90IG1vdmUgYXJvdW5kCgoKICAgICAgICB2YXIgZW1wdHlDYXB0aW9uID0gJzxicj4nOwogICAgICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHsKICAgICAgICAgIHhheGlzOiB7CiAgICAgICAgICAgIG1vZGU6ICd0aW1lJywKICAgICAgICAgICAgdGlja0xlbmd0aDogNSwKICAgICAgICAgICAgdGltZXpvbmU6ICdicm93c2VyJwogICAgICAgICAgfSwKICAgICAgICAgIHNlbGVjdGlvbjogewogICAgICAgICAgICBtb2RlOiAneCcsCiAgICAgICAgICAgIGNvbG9yOiAnI2NjYycKICAgICAgICAgIH0sCiAgICAgICAgICBjcm9zc2hhaXI6IHsKICAgICAgICAgICAgbW9kZTogJ3gnLAogICAgICAgICAgICBjb2xvcjogJyNDNjYnLAogICAgICAgICAgICBsaW5lV2lkdGg6IDIKICAgICAgICAgIH0sCiAgICAgICAgICBncmlkOiB7CiAgICAgICAgICAgIHNob3c6IHJlbmRlci5ncmlkLAogICAgICAgICAgICBib3JkZXJXaWR0aDogMCwKICAgICAgICAgICAgYm9yZGVyQ29sb3I6IG51bGwsCiAgICAgICAgICAgIG1hcmdpbjogMTAsCiAgICAgICAgICAgIGhvdmVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgYXV0b0hpZ2hsaWdodDogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiKDI1NSwyNTUsMjU1LDApJywKICAgICAgICAgICAgcG9zaXRpb246ICdudycsCiAgICAgICAgICAgIGxhYmVsQm94Qm9yZGVyQ29sb3I6ICdyZ2IoMjU1LDI1NSwyNTUsMCknLAogICAgICAgICAgICBsYWJlbEZvcm1hdHRlcjogZnVuY3Rpb24gbGFiZWxGb3JtYXR0ZXIobGFiZWwsIHNlcmllcykgewogICAgICAgICAgICAgIHZhciB3cmFwcGVyU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICB2YXIgbGFiZWxTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICAgIHZhciBudW1iZXJTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICAgIHdyYXBwZXJTcGFuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbmdMZWdlbmRWYWx1ZScpOwogICAgICAgICAgICAgIHdyYXBwZXJTcGFuLnNldEF0dHJpYnV0ZSgna2JuLWFjY2Vzc2libGUtY2xpY2snLCAnJyk7CiAgICAgICAgICAgICAgd3JhcHBlclNwYW4uc2V0QXR0cmlidXRlKCduZy1jbGljaycsICJ0b2dnbGVTZXJpZXMoIi5jb25jYXQoc2VyaWVzLl9pZCwgIikiKSk7CiAgICAgICAgICAgICAgd3JhcHBlclNwYW4uc2V0QXR0cmlidXRlKCduZy1mb2N1cycsICJmb2N1c1NlcmllcygiLmNvbmNhdChzZXJpZXMuX2lkLCAiKSIpKTsKICAgICAgICAgICAgICB3cmFwcGVyU3Bhbi5zZXRBdHRyaWJ1dGUoJ25nLW1vdXNlb3ZlcicsICJoaWdobGlnaHRTZXJpZXMoIi5jb25jYXQoc2VyaWVzLl9pZCwgIikiKSk7CiAgICAgICAgICAgICAgbGFiZWxTcGFuLnNldEF0dHJpYnV0ZSgnbmctbm9uLWJpbmRhYmxlJywgJycpOwogICAgICAgICAgICAgIGxhYmVsU3Bhbi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsYWJlbCkpOwogICAgICAgICAgICAgIG51bWJlclNwYW4uc2V0QXR0cmlidXRlKCdjbGFzcycsICduZ0xlZ2VuZFZhbHVlTnVtYmVyJyk7CiAgICAgICAgICAgICAgd3JhcHBlclNwYW4uYXBwZW5kQ2hpbGQobGFiZWxTcGFuKTsKICAgICAgICAgICAgICB3cmFwcGVyU3Bhbi5hcHBlbmRDaGlsZChudW1iZXJTcGFuKTsKICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlclNwYW4ub3V0ZXJIVE1MOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgY29sb3JzOiBbJyMwMUE0QTQnLCAnI0M2NicsICcjRDBEMTAyJywgJyM2MTYxNjEnLCAnIzAwQTFDQicsICcjMzI3NDJDJywgJyNGMThEMDUnLCAnIzExM0Y4QycsICcjNjFBRTI0JywgJyNENzAwNjAnXQogICAgICAgIH07CiAgICAgICAgdmFyIG9yaWdpbmFsQ29sb3JNYXAgPSBuZXcgTWFwKCk7CiAgICAgICAgJHNjb3BlLmNoYXJ0LmZvckVhY2goZnVuY3Rpb24gKHNlcmllcywgc2VyaWVzSW5kZXgpIHsKICAgICAgICAgIGlmICghc2VyaWVzLmNvbG9yKSB7CiAgICAgICAgICAgIHZhciBjb2xvckluZGV4ID0gc2VyaWVzSW5kZXggJSBkZWZhdWx0T3B0aW9ucy5jb2xvcnMubGVuZ3RoOwogICAgICAgICAgICBzZXJpZXMuY29sb3IgPSBkZWZhdWx0T3B0aW9ucy5jb2xvcnNbY29sb3JJbmRleF07CiAgICAgICAgICB9CgogICAgICAgICAgb3JpZ2luYWxDb2xvck1hcC5zZXQoc2VyaWVzLCBzZXJpZXMuY29sb3IpOwogICAgICAgIH0pOwogICAgICAgIHZhciBoaWdobGlnaHRlZFNlcmllczsKICAgICAgICB2YXIgZm9jdXNlZFNlcmllczsKCiAgICAgICAgZnVuY3Rpb24gdW5oaWdobGlnaHRTZXJpZXMoKSB7CiAgICAgICAgICBpZiAoaGlnaGxpZ2h0ZWRTZXJpZXMgPT09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGhpZ2hsaWdodGVkU2VyaWVzID0gbnVsbDsKICAgICAgICAgIGZvY3VzZWRTZXJpZXMgPSBudWxsOwogICAgICAgICAgJHNjb3BlLmNoYXJ0LmZvckVhY2goZnVuY3Rpb24gKHNlcmllcykgewogICAgICAgICAgICBzZXJpZXMuY29sb3IgPSBvcmlnaW5hbENvbG9yTWFwLmdldChzZXJpZXMpOyAvLyByZXNldCB0aGUgY29sb3JzCiAgICAgICAgICB9KTsKICAgICAgICAgIGRyYXdQbG90KCRzY29wZS5jaGFydCk7CiAgICAgICAgfQoKICAgICAgICAkc2NvcGUuaGlnaGxpZ2h0U2VyaWVzID0gX2xvZGFzaC5kZWZhdWx0LmRlYm91bmNlKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgaWYgKGhpZ2hsaWdodGVkU2VyaWVzID09PSBpZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaGlnaGxpZ2h0ZWRTZXJpZXMgPSBpZDsKICAgICAgICAgICRzY29wZS5jaGFydC5mb3JFYWNoKGZ1bmN0aW9uIChzZXJpZXMsIHNlcmllc0luZGV4KSB7CiAgICAgICAgICAgIGlmIChzZXJpZXNJbmRleCAhPT0gaWQpIHsKICAgICAgICAgICAgICBzZXJpZXMuY29sb3IgPSAncmdiYSgxMjgsMTI4LDEyOCwwLjEpJzsgLy8gbWFyayBhcyBncmV5CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc2VyaWVzLmNvbG9yID0gb3JpZ2luYWxDb2xvck1hcC5nZXQoc2VyaWVzKTsgLy8gY29sb3IgaXQgbGlrZSBpdCB3YXMKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBkcmF3UGxvdCgkc2NvcGUuY2hhcnQpOwogICAgICAgIH0sIERFQk9VTkNFX0RFTEFZKTsKCiAgICAgICAgJHNjb3BlLmZvY3VzU2VyaWVzID0gZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICBmb2N1c2VkU2VyaWVzID0gaWQ7CiAgICAgICAgICAkc2NvcGUuaGlnaGxpZ2h0U2VyaWVzKGlkKTsKICAgICAgICB9OwoKICAgICAgICAkc2NvcGUudG9nZ2xlU2VyaWVzID0gZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICB2YXIgc2VyaWVzID0gJHNjb3BlLmNoYXJ0W2lkXTsKICAgICAgICAgIHNlcmllcy5faGlkZSA9ICFzZXJpZXMuX2hpZGU7CiAgICAgICAgICBkcmF3UGxvdCgkc2NvcGUuY2hhcnQpOwogICAgICAgIH07CgogICAgICAgIHZhciBjYW5jZWxSZXNpemUgPSAoMCwgX29ic2VydmVfcmVzaXplLmRlZmF1bHQpKCRlbGVtLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkcmF3UGxvdCgkc2NvcGUuY2hhcnQpOwogICAgICAgIH0pOwogICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgY2FuY2VsUmVzaXplKCk7CiAgICAgICAgICAkZWxlbS5vZmYoJ3Bsb3Rob3ZlcicpOwogICAgICAgICAgJGVsZW0ub2ZmKCdwbG90c2VsZWN0ZWQnKTsKICAgICAgICAgICRlbGVtLm9mZignbW91c2VsZWF2ZScpOwogICAgICAgIH0pOwogICAgICAgICRlbGVtLm9uKCdwbG90aG92ZXInLCBmdW5jdGlvbiAoZXZlbnQsIHBvcywgaXRlbSkgewogICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0aW1lbGlvblBsb3RIb3ZlcicsIGV2ZW50LCBwb3MsIGl0ZW0pOwogICAgICAgIH0pOwogICAgICAgICRlbGVtLm9uKCdwbG90c2VsZWN0ZWQnLCBmdW5jdGlvbiAoZXZlbnQsIHJhbmdlcykgewogICAgICAgICAgX3RpbWVmaWx0ZXIudGltZWZpbHRlci5zZXRUaW1lKHsKICAgICAgICAgICAgZnJvbTogKDAsIF9tb21lbnRUaW1lem9uZS5kZWZhdWx0KShyYW5nZXMueGF4aXMuZnJvbSksCiAgICAgICAgICAgIHRvOiAoMCwgX21vbWVudFRpbWV6b25lLmRlZmF1bHQpKHJhbmdlcy54YXhpcy50byksCiAgICAgICAgICAgIG1vZGU6ICdhYnNvbHV0ZScKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgICRlbGVtLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0aW1lbGlvblBsb3RMZWF2ZScpOwogICAgICAgIH0pOwogICAgICAgICRzY29wZS4kb24oJ3RpbWVsaW9uUGxvdEhvdmVyJywgZnVuY3Rpb24gKGFuZ3VsYXJFdmVudCwgZmxvdEV2ZW50LCBwb3MpIHsKICAgICAgICAgIGlmICghJHNjb3BlLnBsb3QpIHJldHVybjsKICAgICAgICAgICRzY29wZS5wbG90LnNldENyb3NzaGFpcihwb3MpOwogICAgICAgICAgZGVib3VuY2VkU2V0TGVnZW5kTnVtYmVycyhwb3MpOwogICAgICAgIH0pOwogICAgICAgICRzY29wZS4kb24oJ3RpbWVsaW9uUGxvdExlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCEkc2NvcGUucGxvdCkgcmV0dXJuOwogICAgICAgICAgJHNjb3BlLnBsb3QuY2xlYXJDcm9zc2hhaXIoKTsKICAgICAgICAgIGNsZWFyTGVnZW5kTnVtYmVycygpOwogICAgICAgIH0pOyAvLyBTaGFtZWxlc3NseSBib3Jyb3dlZCBmcm9tIHRoZSBmbG90Q3Jvc3NoYWlycyBleGFtcGxlCgogICAgICAgIGZ1bmN0aW9uIHNldExlZ2VuZE51bWJlcnMocG9zKSB7CiAgICAgICAgICB1bmhpZ2hsaWdodFNlcmllcygpOwogICAgICAgICAgdmFyIHBsb3QgPSAkc2NvcGUucGxvdDsKICAgICAgICAgIHZhciBheGVzID0gcGxvdC5nZXRBeGVzKCk7CgogICAgICAgICAgaWYgKHBvcy54IDwgYXhlcy54YXhpcy5taW4gfHwgcG9zLnggPiBheGVzLnhheGlzLm1heCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGk7CiAgICAgICAgICB2YXIgajsKICAgICAgICAgIHZhciBkYXRhc2V0ID0gcGxvdC5nZXREYXRhKCk7CgogICAgICAgICAgaWYgKGxlZ2VuZENhcHRpb24pIHsKICAgICAgICAgICAgbGVnZW5kQ2FwdGlvbi50ZXh0KCgwLCBfbW9tZW50VGltZXpvbmUuZGVmYXVsdCkocG9zLngpLmZvcm1hdChfbG9kYXNoLmRlZmF1bHQuZ2V0KGRhdGFzZXQsICdbMF0uX2dsb2JhbC5sZWdlbmQudGltZUZvcm1hdCcsIF9saWIuREVGQVVMVF9USU1FX0ZPUk1BVCkpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YXNldC5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB2YXIgc2VyaWVzID0gZGF0YXNldFtpXTsKCiAgICAgICAgICAgIHZhciBwcmVjaXNpb24gPSBfbG9kYXNoLmRlZmF1bHQuZ2V0KHNlcmllcywgJ19tZXRhLnByZWNpc2lvbicsIDIpOwoKICAgICAgICAgICAgaWYgKHNlcmllcy5faGlkZSkgY29udGludWU7IC8vIE5lYXJlc3QgcG9pbnQKCiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBzZXJpZXMuZGF0YS5sZW5ndGg7ICsraikgewogICAgICAgICAgICAgIGlmIChzZXJpZXMuZGF0YVtqXVswXSA+IHBvcy54KSBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHkgPSB2b2lkIDA7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHkgPSBzZXJpZXMuZGF0YVtqXVsxXTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHkgPSBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoeSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgdmFyIGxhYmVsID0geS50b0ZpeGVkKHByZWNpc2lvbik7CgogICAgICAgICAgICAgIGlmIChzZXJpZXMueWF4aXMudGlja0Zvcm1hdHRlcikgewogICAgICAgICAgICAgICAgbGFiZWwgPSBzZXJpZXMueWF4aXMudGlja0Zvcm1hdHRlcihsYWJlbCwgc2VyaWVzLnlheGlzKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGxlZ2VuZFZhbHVlTnVtYmVycy5lcShpKS50ZXh0KCIoIi5jb25jYXQobGFiZWwsICIpIikpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGxlZ2VuZFZhbHVlTnVtYmVycy5lcShpKS5lbXB0eSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbGVhckxlZ2VuZE51bWJlcnMoKSB7CiAgICAgICAgICBpZiAobGVnZW5kQ2FwdGlvbikgewogICAgICAgICAgICBsZWdlbmRDYXB0aW9uLmh0bWwoZW1wdHlDYXB0aW9uKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfbG9kYXNoLmRlZmF1bHQuZWFjaChsZWdlbmRWYWx1ZU51bWJlcnMsIGZ1bmN0aW9uIChudW0pIHsKICAgICAgICAgICAgKDAsIF9qcXVlcnkuZGVmYXVsdCkobnVtKS5lbXB0eSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgbGVnZW5kU2NvcGUgPSAkc2NvcGUuJG5ldygpOwoKICAgICAgICBmdW5jdGlvbiBkcmF3UGxvdChwbG90Q29uZmlnKSB7CiAgICAgICAgICBpZiAoISgwLCBfanF1ZXJ5LmRlZmF1bHQpKCcuY2hhcnQtY2FudmFzJywgJGVsZW0pLmxlbmd0aCkgJGVsZW0uaHRtbCh0ZW1wbGF0ZSk7CiAgICAgICAgICB2YXIgY2FudmFzRWxlbSA9ICgwLCBfanF1ZXJ5LmRlZmF1bHQpKCcuY2hhcnQtY2FudmFzJywgJGVsZW0pOyAvLyB3ZSBjYW4ndCB1c2UgYCQucGxvdGAgdG8gZHJhdyB0aGUgY2hhcnQgd2hlbiB0aGUgaGVpZ2h0IG9yIHdpZHRoIGlzIDAKICAgICAgICAgIC8vIHNvLCB3ZSdsbCBuZWVkIGFub3RoZXIgZXZlbnQgdG8gdHJpZ2dlciBkcmF3UGxvdCB0byBhY3R1YWxseSBkcmF3IGl0CgogICAgICAgICAgaWYgKGNhbnZhc0VsZW0uaGVpZ2h0KCkgPT09IDAgfHwgY2FudmFzRWxlbS53aWR0aCgpID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgdGl0bGUgPSAoMCwgX2xvZGFzaC5kZWZhdWx0KShwbG90Q29uZmlnKS5tYXAoJ190aXRsZScpLmNvbXBhY3QoKS5sYXN0KCk7CiAgICAgICAgICAoMCwgX2pxdWVyeS5kZWZhdWx0KSgnLmNoYXJ0LXRvcC10aXRsZScsICRlbGVtKS50ZXh0KHRpdGxlID09IG51bGwgPyAnJyA6IHRpdGxlKTsKCiAgICAgICAgICB2YXIgb3B0aW9ucyA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAoZGVmYXVsdE9wdGlvbnMpOyAvLyBHZXQgdGhlIFgtYXhpcyB0aWNrIGZvcm1hdAoKCiAgICAgICAgICB2YXIgdGltZSA9IF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuZ2V0Qm91bmRzKCk7CgogICAgICAgICAgdmFyIGludGVydmFsID0gKDAsIF9saWIuY2FsY3VsYXRlSW50ZXJ2YWwpKHRpbWUubWluLnZhbHVlT2YoKSwgdGltZS5tYXgudmFsdWVPZigpLCBjb25maWcuZ2V0KCd0aW1lbGlvbjp0YXJnZXRfYnVja2V0cycpIHx8IDIwMCwgJHNjb3BlLmludGVydmFsLCBjb25maWcuZ2V0KCd0aW1lbGlvbjptaW5faW50ZXJ2YWwnKSB8fCAnMW1zJyk7CiAgICAgICAgICB2YXIgZm9ybWF0ID0gZ2V0eEF4aXNGb3JtYXR0ZXIoaW50ZXJ2YWwpOyAvLyBVc2UgbW9tZW50IHRvIGZvcm1hdCB0aWNrcyBzbyB3ZSBnZXQgdGltZXpvbmUgY29ycmVjdGlvbgoKICAgICAgICAgIG9wdGlvbnMueGF4aXMudGlja0Zvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBfbW9tZW50VGltZXpvbmUuZGVmYXVsdCkodmFsKS5mb3JtYXQoZm9ybWF0KTsKICAgICAgICAgIH07IC8vIENhbGN1bGF0ZSBob3cgbWFueSB0aWNrcyBjYW4gZml0IG9uIHRoZSBheGlzCgoKICAgICAgICAgIHZhciB0aWNrTGV0dGVyV2lkdGggPSA3OwogICAgICAgICAgdmFyIHRpY2tQYWRkaW5nID0gNDU7CiAgICAgICAgICBvcHRpb25zLnhheGlzLnRpY2tzID0gTWF0aC5mbG9vcigkZWxlbS53aWR0aCgpIC8gKGZvcm1hdC5sZW5ndGggKiB0aWNrTGV0dGVyV2lkdGggKyB0aWNrUGFkZGluZykpOwoKICAgICAgICAgIHZhciBzZXJpZXMgPSBfbG9kYXNoLmRlZmF1bHQubWFwKHBsb3RDb25maWcsIGZ1bmN0aW9uIChzZXJpZXMsIGluZGV4KSB7CiAgICAgICAgICAgIHNlcmllcyA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAoX2xvZGFzaC5kZWZhdWx0LmRlZmF1bHRzKHNlcmllcywgewogICAgICAgICAgICAgIHNoYWRvd1NpemU6IDAsCiAgICAgICAgICAgICAgbGluZXM6IHsKICAgICAgICAgICAgICAgIGxpbmVXaWR0aDogMwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBzZXJpZXMuX2lkID0gaW5kZXg7CgogICAgICAgICAgICBpZiAoc2VyaWVzLmNvbG9yKSB7CiAgICAgICAgICAgICAgdmFyIHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgc3Bhbi5zdHlsZS5jb2xvciA9IHNlcmllcy5jb2xvcjsKICAgICAgICAgICAgICBzZXJpZXMuY29sb3IgPSBzcGFuLnN0eWxlLmNvbG9yOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2VyaWVzLl9oaWRlKSB7CiAgICAgICAgICAgICAgc2VyaWVzLmRhdGEgPSBbXTsKICAgICAgICAgICAgICBzZXJpZXMuc3RhY2sgPSBmYWxzZTsgLy9zZXJpZXMuY29sb3IgPSAiI2RkZCI7CgogICAgICAgICAgICAgIHNlcmllcy5sYWJlbCA9ICcoaGlkZGVuKSAnICsgc2VyaWVzLmxhYmVsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2VyaWVzLl9nbG9iYWwpIHsKICAgICAgICAgICAgICBfbG9kYXNoLmRlZmF1bHQubWVyZ2Uob3B0aW9ucywgc2VyaWVzLl9nbG9iYWwsIGZ1bmN0aW9uIChvYmpWYWwsIHNyY1ZhbCkgewogICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBraW5kIG9mIGdyb3NzLCBpdCBtZWFucyB0aGF0IHlvdSBjYW4ndCByZXBsYWNlIGEgZ2xvYmFsIHZhbHVlIHdpdGggYSBudWxsCiAgICAgICAgICAgICAgICAvLyBiZXN0IHlvdSBjYW4gZG8gaXMgYW4gZW1wdHkgc3RyaW5nLiBEZWFsIHdpdGggaXQuCiAgICAgICAgICAgICAgICBpZiAob2JqVmFsID09IG51bGwpIHJldHVybiBzcmNWYWw7CiAgICAgICAgICAgICAgICBpZiAoc3JjVmFsID09IG51bGwpIHJldHVybiBvYmpWYWw7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBzZXJpZXM7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAob3B0aW9ucy55YXhlcykgewogICAgICAgICAgICBvcHRpb25zLnlheGVzLmZvckVhY2goZnVuY3Rpb24gKHlheGlzKSB7CiAgICAgICAgICAgICAgaWYgKHlheGlzICYmIHlheGlzLnVuaXRzKSB7CiAgICAgICAgICAgICAgICB5YXhpcy50aWNrRm9ybWF0dGVyID0gdGlja0Zvcm1hdHRlcnNbeWF4aXMudW5pdHMudHlwZV07CiAgICAgICAgICAgICAgICB2YXIgYnl0ZU1vZGVzID0gWydieXRlcycsICdieXRlcy9zJ107CgogICAgICAgICAgICAgICAgaWYgKGJ5dGVNb2Rlcy5pbmNsdWRlcyh5YXhpcy51bml0cy50eXBlKSkgewogICAgICAgICAgICAgICAgICB5YXhpcy50aWNrR2VuZXJhdG9yID0gZ2VuZXJhdGVUaWNrczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgICRzY29wZS5wbG90ID0gX2pxdWVyeS5kZWZhdWx0LnBsb3QoY2FudmFzRWxlbSwgX2xvZGFzaC5kZWZhdWx0LmNvbXBhY3Qoc2VyaWVzKSwgb3B0aW9ucyk7CgogICAgICAgICAgaWYgKCRzY29wZS5wbG90KSB7CiAgICAgICAgICAgICRzY29wZS4kZW1pdCgndGltZWxpb25DaGFydFJlbmRlcmVkJyk7CiAgICAgICAgICB9CgogICAgICAgICAgbGVnZW5kU2NvcGUuJGRlc3Ryb3koKTsKICAgICAgICAgIGxlZ2VuZFNjb3BlID0gJHNjb3BlLiRuZXcoKTsgLy8gVXNlZCB0byB0b2dnbGUgdGhlIHNlcmllcywgYW5kIGZvciBkaXNwbGF5aW5nIHZhbHVlcyBvbiBob3ZlcgoKICAgICAgICAgIGxlZ2VuZFZhbHVlTnVtYmVycyA9IGNhbnZhc0VsZW0uZmluZCgnLm5nTGVnZW5kVmFsdWVOdW1iZXInKTsKCiAgICAgICAgICBfbG9kYXNoLmRlZmF1bHQuZWFjaChjYW52YXNFbGVtLmZpbmQoJy5uZ0xlZ2VuZFZhbHVlJyksIGZ1bmN0aW9uIChlbGVtKSB7CiAgICAgICAgICAgICRjb21waWxlKGVsZW0pKGxlZ2VuZFNjb3BlKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuZ2V0KCRzY29wZS5wbG90LmdldERhdGEoKSwgJ1swXS5fZ2xvYmFsLmxlZ2VuZC5zaG93VGltZScsIHRydWUpKSB7CiAgICAgICAgICAgIGxlZ2VuZENhcHRpb24gPSAoMCwgX2pxdWVyeS5kZWZhdWx0KSgnPGNhcHRpb24gY2xhc3M9InRpbUNoYXJ0X19sZWdlbmRDYXB0aW9uIj48L2NhcHRpb24+Jyk7CiAgICAgICAgICAgIGxlZ2VuZENhcHRpb24uaHRtbChlbXB0eUNhcHRpb24pOwogICAgICAgICAgICBjYW52YXNFbGVtLmZpbmQoJ2Rpdi5sZWdlbmQgdGFibGUnKS5hcHBlbmQobGVnZW5kQ2FwdGlvbik7IC8vIGxlZ2VuZCBoYXMgYmVlbiByZS1jcmVhdGVkLiBBcHBseSBmb2N1cyBvbiBsZWdlbmQgZWxlbWVudCB3aGVuIHByZXZpb3VzbHkgc2V0CgogICAgICAgICAgICBpZiAoZm9jdXNlZFNlcmllcyB8fCBmb2N1c2VkU2VyaWVzID09PSAwKSB7CiAgICAgICAgICAgICAgdmFyICRsZWdlbmRMYWJlbHMgPSBjYW52YXNFbGVtLmZpbmQoJ2Rpdi5sZWdlbmQgdGFibGUgLmxlZ2VuZExhYmVsPnNwYW4nKTsKICAgICAgICAgICAgICAkbGVnZW5kTGFiZWxzLmdldChmb2N1c2VkU2VyaWVzKS5mb2N1cygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkc2NvcGUuJHdhdGNoKCdjaGFydCcsIGRyYXdQbG90KTsKICAgICAgfQogICAgfTsKICB9Owp9Cgptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDs="},null]}