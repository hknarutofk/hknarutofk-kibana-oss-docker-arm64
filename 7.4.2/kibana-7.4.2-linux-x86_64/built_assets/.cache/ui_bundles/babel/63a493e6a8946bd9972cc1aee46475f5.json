{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/persisted_state/persisted_state.js","dependencies":[{"path":"src/legacy/ui/public/persisted_state/persisted_state.js","mtime":1572296412852},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlBlcnNpc3RlZFN0YXRlID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfdG9QYXRoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2gvaW50ZXJuYWwvdG9QYXRoIikpOwoKdmFyIF9lcnJvcnMgPSByZXF1aXJlKCIuLi9lcnJvcnMiKTsKCnZhciBfc2ltcGxlX2VtaXR0ZXIgPSByZXF1aXJlKCIuLi91dGlscy9zaW1wbGVfZW1pdHRlciIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBwcmVwU2V0UGFyYW1zKGtleSwgdmFsdWUsIHBhdGgpIHsKICAvLyBrZXkgbXVzdCBiZSB0aGUgdmFsdWUsIHNldCB0aGUgZW50aXJlIHN0YXRlIHVzaW5nIGl0CiAgaWYgKF9sb2Rhc2guZGVmYXVsdC5pc1VuZGVmaW5lZCh2YWx1ZSkgJiYgKF9sb2Rhc2guZGVmYXVsdC5pc1BsYWluT2JqZWN0KGtleSkgfHwgcGF0aC5sZW5ndGggPiAwKSkgewogICAgLy8gc2V0dGluZyBlbnRpcmUgdHJlZSwgc3dhcCB0aGUga2V5IGFuZCB2YWx1ZSB0byB3cml0ZSB0byB0aGUgc3RhdGUKICAgIHZhbHVlID0ga2V5OwogICAga2V5ID0gdW5kZWZpbmVkOwogIH0gLy8gZW5zdXJlIHRoZSB2YWx1ZSBiZWluZyBwYXNzZWQgaW4gaXMgbmV2ZXIgbXV0YXRlZAoKCiAgcmV0dXJuIHsKICAgIHZhbHVlOiBfbG9kYXNoLmRlZmF1bHQuY2xvbmVEZWVwKHZhbHVlKSwKICAgIGtleToga2V5CiAgfTsKfQoKdmFyIFBlcnNpc3RlZFN0YXRlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgLyoqCiAgICoKICAgKiBAcGFyYW0gdmFsdWUKICAgKiBAcGFyYW0gcGF0aAogICAqIEBwYXJhbSBFbWl0dGVyQ2xhc3Mge1NpbXBsZUVtaXR0ZXJ9IC0gYSBTaW1wbGVFbWl0dGVyIGNsYXNzIHRoYXQgdGhpcyBjbGFzcyB3aWxsIGV4dGVuZC4gQ2FuIGJlIHVzZWQgdG8KICAgKiBpbmhlcml0IGEgY3VzdG9tIGV2ZW50IGVtaXR0ZXIuIEZvciBleGFtcGxlLCB0aGUgRXZlbnRFbWl0dGVyIGlzIGFuICJhbmd1bGFyLWl6ZWQiIHZlcnNpb24KICAgKiBmb3IgYW5ndWxhciBjb21wb25lbnRzIHdoaWNoIGF1dG9tYXRpY2FsbHkgdHJpZ2dlcnMgYSBkaWdlc3QgbG9vcCBmb3IgZXZlcnkgcmVnaXN0ZXJlZAogICAqIGhhbmRsZXIuIFRPRE86IHJlcGxhY2UgYW5ndWxhcml6ZWQgU2ltcGxlRW1pdHRlciBhbmQgZm9yY2UgYW5ndWxhciBjYWxsZXJzIHRvIGhhbmRsZSBkaWdlc3QgbG9vcHMgbWFudWFsbHkgYWxhCiAgICogaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMva2liYW5hL2lzc3Vlcy8xMzg1NQogICAqLwogIGZ1bmN0aW9uIFBlcnNpc3RlZFN0YXRlKHZhbHVlLCBwYXRoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBFbWl0dGVyQ2xhc3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IF9zaW1wbGVfZW1pdHRlci5TaW1wbGVFbWl0dGVyOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQZXJzaXN0ZWRTdGF0ZSk7CgogICAgRW1pdHRlckNsYXNzLmNhbGwodGhpcyk7CiAgICB0aGlzLl9wYXRoID0gdGhpcy5fc2V0UGF0aChwYXRoKTsKCiAgICBfbG9kYXNoLmRlZmF1bHQuZm9yT3duKEVtaXR0ZXJDbGFzcy5wcm90b3R5cGUsIGZ1bmN0aW9uIChtZXRob2QsIG1ldGhvZE5hbWUpIHsKICAgICAgX3RoaXNbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIEVtaXR0ZXJDbGFzcy5wcm90b3R5cGVbbWV0aG9kTmFtZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0pOyAvLyBTb21lIHZhbGlkYXRpb25zCgoKICAgIGlmICghdGhpcy5fcGF0aC5sZW5ndGggJiYgdmFsdWUgJiYgIV9sb2Rhc2guZGVmYXVsdC5pc1BsYWluT2JqZWN0KHZhbHVlKSkgewogICAgICB0aHJvdyBuZXcgX2Vycm9ycy5QZXJzaXN0ZWRTdGF0ZUVycm9yKCdTdGF0ZSB2YWx1ZSBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0Jyk7CiAgICB9CgogICAgdmFsdWUgPSB2YWx1ZSB8fCB0aGlzLl9nZXREZWZhdWx0KCk7IC8vIGNvcHkgcGFzc2VkIHN0YXRlIHZhbHVlcyBhbmQgY3JlYXRlIGludGVybmFsIHRyYWNrZXJzCgogICAgdGhpcy5zZXQodmFsdWUpOwogICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlOyAvLyB1c2VkIHRvIHRyYWNrIHN0YXRlIGNoYW5nZXMKICB9CgogIF9jcmVhdGVDbGFzcyhQZXJzaXN0ZWRTdGF0ZSwgW3sKICAgIGtleTogImdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KGtleSwgZGVmKSB7CiAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQuY2xvbmVEZWVwKHRoaXMuX2dldChrZXksIGRlZikpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHsKICAgICAgdmFyIHBhcmFtcyA9IHByZXBTZXRQYXJhbXMoa2V5LCB2YWx1ZSwgdGhpcy5fcGF0aCk7CgogICAgICB2YXIgdmFsID0gdGhpcy5fc2V0KHBhcmFtcy5rZXksIHBhcmFtcy52YWx1ZSk7CgogICAgICB0aGlzLmVtaXQoJ3NldCcpOwogICAgICByZXR1cm4gdmFsOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFNpbGVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U2lsZW50KGtleSwgdmFsdWUpIHsKICAgICAgdmFyIHBhcmFtcyA9IHByZXBTZXRQYXJhbXMoa2V5LCB2YWx1ZSwgdGhpcy5fcGF0aCk7CiAgICAgIHJldHVybiB0aGlzLl9zZXQocGFyYW1zLmtleSwgcGFyYW1zLnZhbHVlLCB0cnVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbGVhckFsbEtleXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyQWxsS2V5cygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLl9jaGFuZ2VkU3RhdGUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF90aGlzMi5zZXQoa2V5LCBudWxsKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KHBhdGgpIHsKICAgICAgdmFyIGtleVBhdGggPSB0aGlzLl9nZXRJbmRleChwYXRoKTsKCiAgICAgIHZhciBvcmlnVmFsdWUgPSBfbG9kYXNoLmRlZmF1bHQuZ2V0KHRoaXMuX2RlZmF1bHRTdGF0ZSwga2V5UGF0aCk7CgogICAgICB2YXIgY3VycmVudFZhbHVlID0gX2xvZGFzaC5kZWZhdWx0LmdldCh0aGlzLl9tZXJnZWRTdGF0ZSwga2V5UGF0aCk7CgogICAgICBpZiAoX2xvZGFzaC5kZWZhdWx0LmlzVW5kZWZpbmVkKG9yaWdWYWx1ZSkpIHsKICAgICAgICB0aGlzLl9jbGVhblBhdGgocGF0aCwgdGhpcy5fbWVyZ2VkU3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIF9sb2Rhc2guZGVmYXVsdC5zZXQodGhpcy5fbWVyZ2VkU3RhdGUsIGtleVBhdGgsIG9yaWdWYWx1ZSk7CiAgICAgIH0gLy8gY2xlYW4gdXAgdGhlIGNoYW5nZWRTdGF0ZSB0cmVlCgoKICAgICAgdGhpcy5fY2xlYW5QYXRoKHBhdGgsIHRoaXMuX2NoYW5nZWRTdGF0ZSk7CgogICAgICBpZiAoIV9sb2Rhc2guZGVmYXVsdC5pc0VxdWFsKGN1cnJlbnRWYWx1ZSwgb3JpZ1ZhbHVlKSkgdGhpcy5lbWl0KCdjaGFuZ2UnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDaGFuZ2VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDaGFuZ2VzKCkgewogICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcCh0aGlzLl9jaGFuZ2VkU3RhdGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInRvSlNPTiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9KU09OKCkgewogICAgICByZXR1cm4gdGhpcy5nZXQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0b1N0cmluZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmcm9tU3RyaW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmcm9tU3RyaW5nKGlucHV0KSB7CiAgICAgIHJldHVybiB0aGlzLnNldChKU09OLnBhcnNlKGlucHV0KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2dldEluZGV4IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0SW5kZXgoa2V5KSB7CiAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuaXNVbmRlZmluZWQoa2V5KSkgcmV0dXJuIHRoaXMuX3BhdGg7CiAgICAgIHJldHVybiAodGhpcy5fcGF0aCB8fCBbXSkuY29uY2F0KCgwLCBfdG9QYXRoLmRlZmF1bHQpKGtleSkpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRQYXJ0aWFsSW5kZXgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRQYXJ0aWFsSW5kZXgoa2V5KSB7CiAgICAgIHZhciBrZXlQYXRoID0gdGhpcy5fZ2V0SW5kZXgoa2V5KTsKCiAgICAgIHJldHVybiBrZXlQYXRoLnNsaWNlKHRoaXMuX3BhdGgubGVuZ3RoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfY2xlYW5QYXRoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY2xlYW5QYXRoKHBhdGgsIHN0YXRlVHJlZSkgewogICAgICB2YXIgcGFydGlhbFBhdGggPSB0aGlzLl9nZXRQYXJ0aWFsSW5kZXgocGF0aCk7CgogICAgICB2YXIgcmVtb3ZlID0gdHJ1ZTsgLy8gcmVjdXJzaXZlbHkgZGVsZXRlIHZhbHVlIHRyZWUsIHdoZW4gbm8gb3RoZXIga2V5cyBleGlzdAoKICAgICAgd2hpbGUgKHBhcnRpYWxQYXRoLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgbGFzdEtleSA9IHBhcnRpYWxQYXRoLnNwbGljZShwYXJ0aWFsUGF0aC5sZW5ndGggLSAxLCAxKVswXTsKCiAgICAgICAgdmFyIHN0YXRlUGF0aCA9IHRoaXMuX3BhdGguY29uY2F0KHBhcnRpYWxQYXRoKTsKCiAgICAgICAgdmFyIHN0YXRlVmFsID0gc3RhdGVQYXRoLmxlbmd0aCA+IDAgPyBfbG9kYXNoLmRlZmF1bHQuZ2V0KHN0YXRlVHJlZSwgc3RhdGVQYXRoKSA6IHN0YXRlVHJlZTsgLy8gaWYgc3RhdGVWYWwgaXNuJ3QgYW4gb2JqZWN0LCBkbyBub3RoaW5nCgogICAgICAgIGlmICghX2xvZGFzaC5kZWZhdWx0LmlzUGxhaW5PYmplY3Qoc3RhdGVWYWwpKSByZXR1cm47CiAgICAgICAgaWYgKHJlbW92ZSkgZGVsZXRlIHN0YXRlVmFsW2xhc3RLZXldOwogICAgICAgIGlmIChPYmplY3Qua2V5cyhzdGF0ZVZhbCkubGVuZ3RoID4gMCkgcmVtb3ZlID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2V0RGVmYXVsdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldERlZmF1bHQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9oYXNQYXRoKCkgPyB1bmRlZmluZWQgOiB7fTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2V0UGF0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFBhdGgocGF0aCkgewogICAgICB2YXIgaXNTdHJpbmcgPSBfbG9kYXNoLmRlZmF1bHQuaXNTdHJpbmcocGF0aCk7CgogICAgICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkocGF0aCk7CiAgICAgIGlmICghaXNTdHJpbmcgJiYgIWlzQXJyYXkpIHJldHVybiBbXTsKICAgICAgcmV0dXJuIGlzU3RyaW5nID8gW3RoaXMuX2dldEluZGV4KHBhdGgpXSA6IHBhdGg7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2hhc1BhdGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9oYXNQYXRoKCkgewogICAgICByZXR1cm4gdGhpcy5fcGF0aC5sZW5ndGggPiAwOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXQoa2V5LCBkZWYpIHsKICAgICAgLy8gbm8gcGF0aCBhbmQgbm8ga2V5LCBnZXQgdGhlIHdob2xlIHN0YXRlCiAgICAgIGlmICghdGhpcy5faGFzUGF0aCgpICYmIF9sb2Rhc2guZGVmYXVsdC5pc1VuZGVmaW5lZChrZXkpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX21lcmdlZFN0YXRlOwogICAgICB9CgogICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmdldCh0aGlzLl9tZXJnZWRTdGF0ZSwgdGhpcy5fZ2V0SW5kZXgoa2V5KSwgZGVmKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0KGtleSwgdmFsdWUsIHNpbGVudCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBzdGF0ZUNoYW5nZWQgPSBmYWxzZTsKICAgICAgdmFyIGluaXRpYWxTdGF0ZSA9ICF0aGlzLl9pbml0aWFsaXplZDsKCiAgICAgIHZhciBrZXlQYXRoID0gdGhpcy5fZ2V0SW5kZXgoa2V5KTsKCiAgICAgIHZhciBoYXNLZXlQYXRoID0ga2V5UGF0aC5sZW5ndGggPiAwOyAvLyBpZiB0aGlzIGlzIHRoZSBpbml0aWFsIHN0YXRlIHZhbHVlLCBzYXZlIHZhbHVlIGFzIHRoZSBkZWZhdWx0CgogICAgICBpZiAoaW5pdGlhbFN0YXRlKSB7CiAgICAgICAgdGhpcy5fY2hhbmdlZFN0YXRlID0ge307CiAgICAgICAgaWYgKCF0aGlzLl9oYXNQYXRoKCkgJiYgX2xvZGFzaC5kZWZhdWx0LmlzVW5kZWZpbmVkKGtleSkpIHRoaXMuX2RlZmF1bHRTdGF0ZSA9IHZhbHVlO2Vsc2UgdGhpcy5fZGVmYXVsdFN0YXRlID0gX2xvZGFzaC5kZWZhdWx0LnNldCh7fSwga2V5UGF0aCwgdmFsdWUpOwogICAgICB9CgogICAgICBpZiAoIWluaXRpYWxTdGF0ZSkgewogICAgICAgIC8vIG5vIHBhdGggYW5kIG5vIGtleSwgc2V0IHRoZSB3aG9sZSBzdGF0ZQogICAgICAgIGlmICghdGhpcy5faGFzUGF0aCgpICYmIF9sb2Rhc2guZGVmYXVsdC5pc1VuZGVmaW5lZChrZXkpKSB7CiAgICAgICAgICAvLyBjb21wYXJlIGNoYW5nZWRTdGF0ZSBhbmQgbmV3IHN0YXRlLCBlbWl0IGFuIGV2ZW50IHdoZW4gZGlmZmVyZW50CiAgICAgICAgICBzdGF0ZUNoYW5nZWQgPSAhX2xvZGFzaC5kZWZhdWx0LmlzRXF1YWwodGhpcy5fY2hhbmdlZFN0YXRlLCB2YWx1ZSk7CiAgICAgICAgICB0aGlzLl9jaGFuZ2VkU3RhdGUgPSB2YWx1ZTsKICAgICAgICAgIHRoaXMuX21lcmdlZFN0YXRlID0gX2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcCh2YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGNoZWNrIGZvciBjaGFuZ2VzIGF0IHBhdGgsIGVtaXQgYW4gZXZlbnQgd2hlbiBkaWZmZXJlbnQKICAgICAgICAgIHZhciBjdXJWYWwgPSBoYXNLZXlQYXRoID8gdGhpcy5nZXQoa2V5UGF0aCkgOiB0aGlzLl9tZXJnZWRTdGF0ZTsKICAgICAgICAgIHN0YXRlQ2hhbmdlZCA9ICFfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChjdXJWYWwsIHZhbHVlKTsgLy8gYXJyYXlzIGFyZSBtZXJnZSBieSBpbmRleCwgbm90IGRlc2lyZWQgLSBlbnN1cmUgdGhleSBhcmUgcmVwbGFjZWQKCiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShfbG9kYXNoLmRlZmF1bHQuZ2V0KHRoaXMuX21lcmdlZFN0YXRlLCBrZXlQYXRoKSkpIHsKICAgICAgICAgICAgaWYgKGhhc0tleVBhdGgpIF9sb2Rhc2guZGVmYXVsdC5zZXQodGhpcy5fbWVyZ2VkU3RhdGUsIGtleVBhdGgsIHVuZGVmaW5lZCk7ZWxzZSB0aGlzLl9tZXJnZWRTdGF0ZSA9IHVuZGVmaW5lZDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaGFzS2V5UGF0aCkgewogICAgICAgICAgICBfbG9kYXNoLmRlZmF1bHQuc2V0KHRoaXMuX2NoYW5nZWRTdGF0ZSwga2V5UGF0aCwgdmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5fY2hhbmdlZFN0YXRlID0gX2xvZGFzaC5kZWZhdWx0LmlzUGxhaW5PYmplY3QodmFsdWUpID8gdmFsdWUgOiB7fTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gLy8gdXBkYXRlIHRoZSBtZXJnZWQgc3RhdGUgdmFsdWUKCgogICAgICB2YXIgdGFyZ2V0T2JqID0gdGhpcy5fbWVyZ2VkU3RhdGUgfHwgX2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcCh0aGlzLl9kZWZhdWx0U3RhdGUpOwoKICAgICAgdmFyIHNvdXJjZU9iaiA9IF9sb2Rhc2guZGVmYXVsdC5tZXJnZSh7fSwgdGhpcy5fY2hhbmdlZFN0YXRlKTsgLy8gaGFuZGxlciBhcmd1bWVudHMgYXJlICh0YXJnZXRWYWx1ZSwgc291cmNlVmFsdWUsIGtleSwgdGFyZ2V0LCBzb3VyY2UpCgoKICAgICAgdmFyIG1lcmdlTWV0aG9kID0gZnVuY3Rpb24gbWVyZ2VNZXRob2QodGFyZ2V0VmFsdWUsIHNvdXJjZVZhbHVlLCBtZXJnZUtleSkgewogICAgICAgIC8vIGlmIG5vdCBpbml0aWFsIHN0YXRlLCBza2lwIGRlZmF1bHQgbWVyZ2UgbWV0aG9kIChpZS4gcmV0dXJuIHZhbHVlLCBzZWUgbm90ZSBiZWxvdykKICAgICAgICBpZiAoIWluaXRpYWxTdGF0ZSAmJiBfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChrZXlQYXRoLCBzZWxmLl9nZXRJbmRleChtZXJnZUtleSkpKSB7CiAgICAgICAgICAvLyB1c2UgdGhlIHNvdXJjZVZhbHVlIG9yIGZhbGwgYmFjayB0byB0YXJnZXRWYWx1ZQogICAgICAgICAgcmV0dXJuICFfbG9kYXNoLmRlZmF1bHQuaXNVbmRlZmluZWQoc291cmNlVmFsdWUpID8gc291cmNlVmFsdWUgOiB0YXJnZXRWYWx1ZTsKICAgICAgICB9CiAgICAgIH07IC8vIElmIGBtZXJnZU1ldGhvZGAgaXMgcHJvdmlkZWQgaXQgaXMgaW52b2tlZCB0byBwcm9kdWNlIHRoZSBtZXJnZWQgdmFsdWVzIG9mIHRoZQogICAgICAvLyBkZXN0aW5hdGlvbiBhbmQgc291cmNlIHByb3BlcnRpZXMuCiAgICAgIC8vIElmIGBtZXJnZU1ldGhvZGAgcmV0dXJucyBgdW5kZWZpbmVkYCB0aGUgZGVmYXVsdCBtZXJnaW5nIG1ldGhvZCBpcyB1c2VkCgoKICAgICAgdGhpcy5fbWVyZ2VkU3RhdGUgPSBfbG9kYXNoLmRlZmF1bHQubWVyZ2UodGFyZ2V0T2JqLCBzb3VyY2VPYmosIG1lcmdlTWV0aG9kKTsgLy8gc2FuaXR5IGNoZWNrOyB2ZXJpZnkgdGhhdCB0aGVyZSBhcmUgYWN0dWFsbHkgY2hhbmdlcwoKICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5pc0VxdWFsKHRoaXMuX21lcmdlZFN0YXRlLCB0aGlzLl9kZWZhdWx0U3RhdGUpKSB0aGlzLl9jaGFuZ2VkU3RhdGUgPSB7fTsKICAgICAgaWYgKCFzaWxlbnQgJiYgc3RhdGVDaGFuZ2VkKSB0aGlzLmVtaXQoJ2NoYW5nZScsIGtleSk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBlcnNpc3RlZFN0YXRlOwp9KCk7CgpleHBvcnRzLlBlcnNpc3RlZFN0YXRlID0gUGVyc2lzdGVkU3RhdGU7"},null]}