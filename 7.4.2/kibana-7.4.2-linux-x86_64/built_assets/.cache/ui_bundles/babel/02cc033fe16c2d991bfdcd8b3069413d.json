{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/metrics/public/components/aggs/agg_select.js","dependencies":[{"path":"src/legacy/core_plugins/metrics/public/components/aggs/agg_select.js","mtime":1572296411048},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkFnZ1NlbGVjdCA9IHZvaWQgMDsKCnZhciBfcHJvcFR5cGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJwcm9wLXR5cGVzIikpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9jaGVja191aV9yZXN0cmljdGlvbnMgPSByZXF1aXJlKCIuLi8uLi9saWIvY2hlY2tfdWlfcmVzdHJpY3Rpb25zIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfQoKdmFyIG1ldHJpY0FnZ3MgPSBbewogIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndHN2Yi5hZ2dTZWxlY3QubWV0cmljc0FnZ3MuYXZlcmFnZUxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdBdmVyYWdlJwogIH0pLAogIHZhbHVlOiAnYXZnJwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5tZXRyaWNzQWdncy5jYXJkaW5hbGl0eUxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdDYXJkaW5hbGl0eScKICB9KSwKICB2YWx1ZTogJ2NhcmRpbmFsaXR5Jwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5tZXRyaWNzQWdncy5jb3VudExhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdDb3VudCcKICB9KSwKICB2YWx1ZTogJ2NvdW50Jwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5tZXRyaWNzQWdncy5maWx0ZXJSYXRpb0xhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdGaWx0ZXIgUmF0aW8nCiAgfSksCiAgdmFsdWU6ICdmaWx0ZXJfcmF0aW8nCn0sIHsKICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3RzdmIuYWdnU2VsZWN0Lm1ldHJpY3NBZ2dzLm1heExhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdNYXgnCiAgfSksCiAgdmFsdWU6ICdtYXgnCn0sIHsKICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3RzdmIuYWdnU2VsZWN0Lm1ldHJpY3NBZ2dzLm1pbkxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdNaW4nCiAgfSksCiAgdmFsdWU6ICdtaW4nCn0sIHsKICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3RzdmIuYWdnU2VsZWN0Lm1ldHJpY3NBZ2dzLnBlcmNlbnRpbGVMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnUGVyY2VudGlsZScKICB9KSwKICB2YWx1ZTogJ3BlcmNlbnRpbGUnCn0sIHsKICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3RzdmIuYWdnU2VsZWN0Lm1ldHJpY3NBZ2dzLnBlcmNlbnRpbGVSYW5rTGFiZWwnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ1BlcmNlbnRpbGUgUmFuaycKICB9KSwKICB2YWx1ZTogJ3BlcmNlbnRpbGVfcmFuaycKfSwgewogIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndHN2Yi5hZ2dTZWxlY3QubWV0cmljc0FnZ3Muc3RhdGljVmFsdWVMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU3RhdGljIFZhbHVlJwogIH0pLAogIHZhbHVlOiAnc3RhdGljJwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5tZXRyaWNzQWdncy5zdGREZXZpYXRpb25MYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU3RkLiBEZXZpYXRpb24nCiAgfSksCiAgdmFsdWU6ICdzdGRfZGV2aWF0aW9uJwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5tZXRyaWNzQWdncy5zdW1MYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU3VtJwogIH0pLAogIHZhbHVlOiAnc3VtJwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5tZXRyaWNzQWdncy5zdW1PZlNxdWFyZXNMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU3VtIG9mIFNxdWFyZXMnCiAgfSksCiAgdmFsdWU6ICdzdW1fb2Zfc3F1YXJlcycKfSwgewogIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndHN2Yi5hZ2dTZWxlY3QubWV0cmljc0FnZ3MudG9wSGl0TGFiZWwnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ1RvcCBIaXQnCiAgfSksCiAgdmFsdWU6ICd0b3BfaGl0Jwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5tZXRyaWNzQWdncy52YWx1ZUNvdW50TGFiZWwnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ1ZhbHVlIENvdW50JwogIH0pLAogIHZhbHVlOiAndmFsdWVfY291bnQnCn0sIHsKICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3RzdmIuYWdnU2VsZWN0Lm1ldHJpY3NBZ2dzLnZhcmlhbmNlTGFiZWwnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ1ZhcmlhbmNlJwogIH0pLAogIHZhbHVlOiAndmFyaWFuY2UnCn1dOwp2YXIgcGlwZWxpbmVBZ2dzID0gW3sKICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3RzdmIuYWdnU2VsZWN0LnBpcGVsaW5lQWdncy5idWNrZXRTY3JpcHRMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnQnVja2V0IFNjcmlwdCcKICB9KSwKICB2YWx1ZTogJ2NhbGN1bGF0aW9uJwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5waXBlbGluZUFnZ3MuY3VtdWxhdGl2ZVN1bUxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdDdW11bGF0aXZlIFN1bScKICB9KSwKICB2YWx1ZTogJ2N1bXVsYXRpdmVfc3VtJwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5waXBlbGluZUFnZ3MuZGVyaXZhdGl2ZUxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdEZXJpdmF0aXZlJwogIH0pLAogIHZhbHVlOiAnZGVyaXZhdGl2ZScKfSwgewogIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndHN2Yi5hZ2dTZWxlY3QucGlwZWxpbmVBZ2dzLm1vdmluZ0F2ZXJhZ2VMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnTW92aW5nIEF2ZXJhZ2UnCiAgfSksCiAgdmFsdWU6ICdtb3ZpbmdfYXZlcmFnZScKfSwgewogIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndHN2Yi5hZ2dTZWxlY3QucGlwZWxpbmVBZ2dzLnBvc2l0aXZlT25seUxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdQb3NpdGl2ZSBPbmx5JwogIH0pLAogIHZhbHVlOiAncG9zaXRpdmVfb25seScKfSwgewogIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndHN2Yi5hZ2dTZWxlY3QucGlwZWxpbmVBZ2dzLnNlcmlhbERpZmZlcmVuY2VMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VyaWFsIERpZmZlcmVuY2UnCiAgfSksCiAgdmFsdWU6ICdzZXJpYWxfZGlmZicKfV07CnZhciBzaWJsaW5nQWdncyA9IFt7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5zaWJsaW5nQWdncy5vdmVyYWxsQXZlcmFnZUxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdPdmVyYWxsIEF2ZXJhZ2UnCiAgfSksCiAgdmFsdWU6ICdhdmdfYnVja2V0Jwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5zaWJsaW5nQWdncy5vdmVyYWxsTWF4TGFiZWwnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ092ZXJhbGwgTWF4JwogIH0pLAogIHZhbHVlOiAnbWF4X2J1Y2tldCcKfSwgewogIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndHN2Yi5hZ2dTZWxlY3Quc2libGluZ0FnZ3Mub3ZlcmFsbE1pbkxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdPdmVyYWxsIE1pbicKICB9KSwKICB2YWx1ZTogJ21pbl9idWNrZXQnCn0sIHsKICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3RzdmIuYWdnU2VsZWN0LnNpYmxpbmdBZ2dzLm92ZXJhbGxTdGREZXZpYXRpb25MYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnT3ZlcmFsbCBTdGQuIERldmlhdGlvbicKICB9KSwKICB2YWx1ZTogJ3N0ZF9kZXZpYXRpb25fYnVja2V0Jwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5zaWJsaW5nQWdncy5vdmVyYWxsU3VtTGFiZWwnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ092ZXJhbGwgU3VtJwogIH0pLAogIHZhbHVlOiAnc3VtX2J1Y2tldCcKfSwgewogIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndHN2Yi5hZ2dTZWxlY3Quc2libGluZ0FnZ3Mub3ZlcmFsbFN1bU9mU3F1YXJlc0xhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdPdmVyYWxsIFN1bSBvZiBTcXVhcmVzJwogIH0pLAogIHZhbHVlOiAnc3VtX29mX3NxdWFyZXNfYnVja2V0Jwp9LCB7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5zaWJsaW5nQWdncy5vdmVyYWxsVmFyaWFuY2VMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnT3ZlcmFsbCBWYXJpYW5jZScKICB9KSwKICB2YWx1ZTogJ3ZhcmlhbmNlX2J1Y2tldCcKfV07CnZhciBzcGVjaWFsQWdncyA9IFt7CiAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0c3ZiLmFnZ1NlbGVjdC5zcGVjaWFsQWdncy5zZXJpZXNBZ2dMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VyaWVzIEFnZycKICB9KSwKICB2YWx1ZTogJ3Nlcmllc19hZ2cnCn0sIHsKICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3RzdmIuYWdnU2VsZWN0LnNwZWNpYWxBZ2dzLm1hdGhMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnTWF0aCcKICB9KSwKICB2YWx1ZTogJ21hdGgnCn1dOwp2YXIgYWxsQWdnT3B0aW9ucyA9IFtdLmNvbmNhdChtZXRyaWNBZ2dzLCBwaXBlbGluZUFnZ3MsIHNpYmxpbmdBZ2dzLCBzcGVjaWFsQWdncyk7CgpmdW5jdGlvbiBmaWx0ZXJCeVBhbmVsVHlwZShwYW5lbFR5cGUpIHsKICByZXR1cm4gZnVuY3Rpb24gKGFnZykgewogICAgaWYgKHBhbmVsVHlwZSA9PT0gJ3RhYmxlJykgcmV0dXJuIGFnZy52YWx1ZSAhPT0gJ3Nlcmllc19hZ2cnOwogICAgcmV0dXJuIHRydWU7CiAgfTsKfQoKZnVuY3Rpb24gQWdnU2VsZWN0VWkocHJvcHMpIHsKICB2YXIgc2libGluZ3MgPSBwcm9wcy5zaWJsaW5ncywKICAgICAgcGFuZWxUeXBlID0gcHJvcHMucGFuZWxUeXBlLAogICAgICB2YWx1ZSA9IHByb3BzLnZhbHVlLAogICAgICBvbkNoYW5nZSA9IHByb3BzLm9uQ2hhbmdlLAogICAgICBpbnRsID0gcHJvcHMuaW50bCwKICAgICAgdWlSZXN0cmljdGlvbnMgPSBwcm9wcy51aVJlc3RyaWN0aW9ucywKICAgICAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgWyJzaWJsaW5ncyIsICJwYW5lbFR5cGUiLCAidmFsdWUiLCAib25DaGFuZ2UiLCAiaW50bCIsICJ1aVJlc3RyaWN0aW9ucyJdKTsKCiAgdmFyIHNlbGVjdGVkT3B0aW9ucyA9IGFsbEFnZ09wdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChvcHRpb24pIHsKICAgIHJldHVybiB2YWx1ZSA9PT0gb3B0aW9uLnZhbHVlICYmICgwLCBfY2hlY2tfdWlfcmVzdHJpY3Rpb25zLmlzTWV0cmljRW5hYmxlZCkob3B0aW9uLnZhbHVlLCB1aVJlc3RyaWN0aW9ucyk7CiAgfSk7CiAgdmFyIGVuYWJsZVBpcGVsaW5lcyA9IHNpYmxpbmdzLnNvbWUoZnVuY3Rpb24gKHMpIHsKICAgIHJldHVybiAhIW1ldHJpY0FnZ3MuZmluZChmdW5jdGlvbiAobSkgewogICAgICByZXR1cm4gbS52YWx1ZSA9PT0gcy50eXBlOwogICAgfSk7CiAgfSk7CiAgaWYgKHNpYmxpbmdzLmxlbmd0aCA8PSAxKSBlbmFibGVQaXBlbGluZXMgPSBmYWxzZTsKICB2YXIgb3B0aW9uczsKCiAgaWYgKHBhbmVsVHlwZSA9PT0gJ21ldHJpY3MnKSB7CiAgICBvcHRpb25zID0gbWV0cmljQWdnczsKICB9IGVsc2UgewogICAgdmFyIGRpc2FibGVTaWJsaW5nQWdncyA9IGZ1bmN0aW9uIGRpc2FibGVTaWJsaW5nQWdncyhhZ2cpIHsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGFnZywgewogICAgICAgIGRpc2FibGVkOiAhZW5hYmxlUGlwZWxpbmVzIHx8ICEoMCwgX2NoZWNrX3VpX3Jlc3RyaWN0aW9ucy5pc01ldHJpY0VuYWJsZWQpKGFnZy52YWx1ZSwgdWlSZXN0cmljdGlvbnMpCiAgICAgIH0pOwogICAgfTsKCiAgICBvcHRpb25zID0gW3sKICAgICAgbGFiZWw6IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgaWQ6ICd0c3ZiLmFnZ1NlbGVjdC5hZ2dHcm91cHMubWV0cmljQWdnTGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTWV0cmljIEFnZ3JlZ2F0aW9ucycKICAgICAgfSksCiAgICAgIG9wdGlvbnM6IG1ldHJpY0FnZ3MubWFwKGZ1bmN0aW9uIChhZ2cpIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgYWdnLCB7CiAgICAgICAgICBkaXNhYmxlZDogISgwLCBfY2hlY2tfdWlfcmVzdHJpY3Rpb25zLmlzTWV0cmljRW5hYmxlZCkoYWdnLnZhbHVlLCB1aVJlc3RyaWN0aW9ucykKICAgICAgICB9KTsKICAgICAgfSkKICAgIH0sIHsKICAgICAgbGFiZWw6IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgaWQ6ICd0c3ZiLmFnZ1NlbGVjdC5hZ2dHcm91cHMucGFyZW50UGlwZWxpbmVBZ2dMYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQYXJlbnQgUGlwZWxpbmUgQWdncmVnYXRpb25zJwogICAgICB9KSwKICAgICAgb3B0aW9uczogcGlwZWxpbmVBZ2dzLmZpbHRlcihmaWx0ZXJCeVBhbmVsVHlwZShwYW5lbFR5cGUpKS5tYXAoZGlzYWJsZVNpYmxpbmdBZ2dzKQogICAgfSwgewogICAgICBsYWJlbDogaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICBpZDogJ3RzdmIuYWdnU2VsZWN0LmFnZ0dyb3Vwcy5zaWJsaW5nUGlwZWxpbmVBZ2dMYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaWJsaW5nIFBpcGVsaW5lIEFnZ3JlZ2F0aW9ucycKICAgICAgfSksCiAgICAgIG9wdGlvbnM6IHNpYmxpbmdBZ2dzLm1hcChkaXNhYmxlU2libGluZ0FnZ3MpCiAgICB9LCB7CiAgICAgIGxhYmVsOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgIGlkOiAndHN2Yi5hZ2dTZWxlY3QuYWdnR3JvdXBzLnNwZWNpYWxBZ2dMYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTcGVjaWFsIEFnZ3JlZ2F0aW9ucycKICAgICAgfSksCiAgICAgIG9wdGlvbnM6IHNwZWNpYWxBZ2dzLm1hcChkaXNhYmxlU2libGluZ0FnZ3MpCiAgICB9XTsKICB9CgogIHZhciBoYW5kbGVDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVDaGFuZ2Uoc2VsZWN0ZWRPcHRpb25zKSB7CiAgICBpZiAoIXNlbGVjdGVkT3B0aW9ucyB8fCBzZWxlY3RlZE9wdGlvbnMubGVuZ3RoIDw9IDApIHJldHVybjsKICAgIG9uQ2hhbmdlKHNlbGVjdGVkT3B0aW9ucyk7CiAgfTsKCiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJhZ2dTZWxlY3RvciIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29tYm9Cb3gsIF9leHRlbmRzKHsKICAgIGlzQ2xlYXJhYmxlOiBmYWxzZSwKICAgIHBsYWNlaG9sZGVyOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICBpZDogJ3RzdmIuYWdnU2VsZWN0LnNlbGVjdEFnZ1BsYWNlaG9sZGVyJywKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZWxlY3QgYWdncmVnYXRpb24nCiAgICB9KSwKICAgIG9wdGlvbnM6IG9wdGlvbnMsCiAgICBzZWxlY3RlZE9wdGlvbnM6IHNlbGVjdGVkT3B0aW9ucywKICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICBzaW5nbGVTZWxlY3Rpb246IHsKICAgICAgYXNQbGFpblRleHQ6IHRydWUKICAgIH0KICB9LCByZXN0KSkpOwp9CgpBZ2dTZWxlY3RVaS5wcm9wVHlwZXMgPSB7CiAgb25DaGFuZ2U6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLAogIHBhbmVsVHlwZTogX3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZywKICBzaWJsaW5nczogX3Byb3BUeXBlcy5kZWZhdWx0LmFycmF5LAogIHZhbHVlOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLAogIHVpUmVzdHJpY3Rpb25zOiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0Cn07CnZhciBBZ2dTZWxlY3QgPSAoMCwgX3JlYWN0Mi5pbmplY3RJMThuKShBZ2dTZWxlY3RVaSk7CmV4cG9ydHMuQWdnU2VsZWN0ID0gQWdnU2VsZWN0Ow=="},null]}