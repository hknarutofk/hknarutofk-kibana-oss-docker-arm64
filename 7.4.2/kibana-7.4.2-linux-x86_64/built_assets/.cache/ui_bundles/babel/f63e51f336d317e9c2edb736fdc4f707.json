{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/discover/components/field_chooser/field_chooser.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/discover/components/field_chooser/field_chooser.js","mtime":1572296410124},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgidWkvZGlyZWN0aXZlcy9jc3NfdHJ1bmNhdGUiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKcmVxdWlyZSgidWkvZGlyZWN0aXZlcy9maWVsZF9uYW1lIik7CgpyZXF1aXJlKCIuL2Rpc2NvdmVyX2ZpZWxkIik7CgpyZXF1aXJlKCJ1aS9hbmd1bGFyX3VpX3NlbGVjdCIpOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfanF1ZXJ5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJqcXVlcnkiKSk7Cgp2YXIgX3Jpc29uTm9kZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmlzb24tbm9kZSIpKTsKCnZhciBfZmllbGRfY2FsY3VsYXRvciA9IHJlcXVpcmUoIi4vbGliL2ZpZWxkX2NhbGN1bGF0b3IiKTsKCnZhciBfaW5kZXhfcGF0dGVybnMgPSByZXF1aXJlKCJ1aS9pbmRleF9wYXR0ZXJucyIpOwoKdmFyIF9tb2R1bGVzID0gcmVxdWlyZSgidWkvbW9kdWxlcyIpOwoKdmFyIF9maWVsZF9jaG9vc2VyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2ZpZWxkX2Nob29zZXIuaHRtbCIpKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9Cgp2YXIgYXBwID0gX21vZHVsZXMudWlNb2R1bGVzLmdldCgnYXBwcy9kaXNjb3ZlcicpOwoKYXBwLmRpcmVjdGl2ZSgnZGlzY0ZpZWxkQ2hvb3NlcicsIGZ1bmN0aW9uICgkbG9jYXRpb24sIGNvbmZpZywgJHJvdXRlKSB7CiAgcmV0dXJuIHsKICAgIHJlc3RyaWN0OiAnRScsCiAgICBzY29wZTogewogICAgICBjb2x1bW5zOiAnPScsCiAgICAgIGhpdHM6ICc9JywKICAgICAgZmllbGRDb3VudHM6ICc9JywKICAgICAgc3RhdGU6ICc9JywKICAgICAgaW5kZXhQYXR0ZXJuOiAnPScsCiAgICAgIGluZGV4UGF0dGVybkxpc3Q6ICc9JywKICAgICAgb25BZGRGaWVsZDogJz0nLAogICAgICBvbkFkZEZpbHRlcjogJz0nLAogICAgICBvblJlbW92ZUZpZWxkOiAnPScKICAgIH0sCiAgICB0ZW1wbGF0ZTogX2ZpZWxkX2Nob29zZXIuZGVmYXVsdCwKICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoJHNjb3BlKSB7CiAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaCgnc2hvd0ZpbHRlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAkc2NvcGUudG9nZ2xlRmllbGRGaWx0ZXJCdXR0b25BcmlhTGFiZWwgPSAkc2NvcGUuJHBhcmVudC5zaG93RmlsdGVyID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5kaXNjb3Zlci5maWVsZENob29zZXIudG9nZ2xlRmllbGRGaWx0ZXJCdXR0b25IaWRlQXJpYUxhYmVsJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdIaWRlIGZpZWxkIHNldHRpbmdzJwogICAgICAgIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5kaXNjb3Zlci5maWVsZENob29zZXIudG9nZ2xlRmllbGRGaWx0ZXJCdXR0b25TaG93QXJpYUxhYmVsJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaG93IGZpZWxkIHNldHRpbmdzJwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgJHNjb3BlLnNlbGVjdGVkSW5kZXhQYXR0ZXJuID0gJHNjb3BlLmluZGV4UGF0dGVybkxpc3QuZmluZChmdW5jdGlvbiAocGF0dGVybikgewogICAgICAgIHJldHVybiBwYXR0ZXJuLmlkID09PSAkc2NvcGUuaW5kZXhQYXR0ZXJuLmlkOwogICAgICB9KTsKICAgICAgJHNjb3BlLmluZGV4UGF0dGVybkxpc3QgPSBfbG9kYXNoLmRlZmF1bHQuc29ydEJ5KCRzY29wZS5pbmRleFBhdHRlcm5MaXN0LCBmdW5jdGlvbiAobykgewogICAgICAgIHJldHVybiBvLmdldCgndGl0bGUnKTsKICAgICAgfSk7CgogICAgICAkc2NvcGUuc2V0SW5kZXhQYXR0ZXJuID0gZnVuY3Rpb24gKHBhdHRlcm4pIHsKICAgICAgICAkc2NvcGUuc3RhdGUuaW5kZXggPSBwYXR0ZXJuLmlkOwogICAgICAgICRzY29wZS5zdGF0ZS5zYXZlKCk7CiAgICAgIH07CgogICAgICAkc2NvcGUuJHdhdGNoKCdzdGF0ZS5pbmRleCcsIGZ1bmN0aW9uIChpZCwgcHJldmlvdXNJZCkgewogICAgICAgIGlmIChwcmV2aW91c0lkID09IG51bGwgfHwgcHJldmlvdXNJZCA9PT0gaWQpIHJldHVybjsKICAgICAgICAkcm91dGUucmVsb2FkKCk7CiAgICAgIH0pOwogICAgICB2YXIgZmlsdGVyID0gJHNjb3BlLmZpbHRlciA9IHsKICAgICAgICBwcm9wczogWyd0eXBlJywgJ2FnZ3JlZ2F0YWJsZScsICdzZWFyY2hhYmxlJywgJ21pc3NpbmcnLCAnbmFtZSddLAogICAgICAgIGRlZmF1bHRzOiB7CiAgICAgICAgICBtaXNzaW5nOiB0cnVlLAogICAgICAgICAgdHlwZTogJ2FueScKICAgICAgICB9LAogICAgICAgIGJvb2xPcHRzOiBbewogICAgICAgICAgbGFiZWw6ICdhbnknLAogICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZAogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAneWVzJywKICAgICAgICAgIHZhbHVlOiB0cnVlCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICdubycsCiAgICAgICAgICB2YWx1ZTogZmFsc2UKICAgICAgICB9XSwKICAgICAgICB0b2dnbGVWYWw6IGZ1bmN0aW9uIHRvZ2dsZVZhbChuYW1lLCBkZWYpIHsKICAgICAgICAgIGlmIChmaWx0ZXIudmFsc1tuYW1lXSAhPT0gZGVmKSBmaWx0ZXIudmFsc1tuYW1lXSA9IGRlZjtlbHNlIGZpbHRlci52YWxzW25hbWVdID0gdW5kZWZpbmVkOwogICAgICAgIH0sCiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICAgICAgZmlsdGVyLnZhbHMgPSBfbG9kYXNoLmRlZmF1bHQuY2xvbmUoZmlsdGVyLmRlZmF1bHRzKTsKICAgICAgICB9LAogICAgICAgIGlzRmllbGRTZWxlY3RlZDogZnVuY3Rpb24gaXNGaWVsZFNlbGVjdGVkKGZpZWxkKSB7CiAgICAgICAgICByZXR1cm4gZmllbGQuZGlzcGxheTsKICAgICAgICB9LAogICAgICAgIGlzRmllbGRGaWx0ZXJlZDogZnVuY3Rpb24gaXNGaWVsZEZpbHRlcmVkKGZpZWxkKSB7CiAgICAgICAgICB2YXIgbWF0Y2hGaWx0ZXIgPSBmaWx0ZXIudmFscy50eXBlID09PSAnYW55JyB8fCBmaWVsZC50eXBlID09PSBmaWx0ZXIudmFscy50eXBlOwogICAgICAgICAgdmFyIGlzQWdncmVnYXRhYmxlID0gZmlsdGVyLnZhbHMuYWdncmVnYXRhYmxlID09IG51bGwgfHwgZmllbGQuYWdncmVnYXRhYmxlID09PSBmaWx0ZXIudmFscy5hZ2dyZWdhdGFibGU7CiAgICAgICAgICB2YXIgaXNTZWFyY2hhYmxlID0gZmlsdGVyLnZhbHMuc2VhcmNoYWJsZSA9PSBudWxsIHx8IGZpZWxkLnNlYXJjaGFibGUgPT09IGZpbHRlci52YWxzLnNlYXJjaGFibGU7CiAgICAgICAgICB2YXIgc2NyaXB0ZWRPck1pc3NpbmcgPSAhZmlsdGVyLnZhbHMubWlzc2luZyB8fCBmaWVsZC5zY3JpcHRlZCB8fCBmaWVsZC5yb3dDb3VudCA+IDA7CiAgICAgICAgICB2YXIgbWF0Y2hOYW1lID0gIWZpbHRlci52YWxzLm5hbWUgfHwgZmllbGQubmFtZS5pbmRleE9mKGZpbHRlci52YWxzLm5hbWUpICE9PSAtMTsKICAgICAgICAgIHJldHVybiAhZmllbGQuZGlzcGxheSAmJiBtYXRjaEZpbHRlciAmJiBpc0FnZ3JlZ2F0YWJsZSAmJiBpc1NlYXJjaGFibGUgJiYgc2NyaXB0ZWRPck1pc3NpbmcgJiYgbWF0Y2hOYW1lOwogICAgICAgIH0sCiAgICAgICAgcG9wdWxhcml0eTogZnVuY3Rpb24gcG9wdWxhcml0eShmaWVsZCkgewogICAgICAgICAgcmV0dXJuIGZpZWxkLmNvdW50ID4gMDsKICAgICAgICB9LAogICAgICAgIGdldEFjdGl2ZTogZnVuY3Rpb24gZ2V0QWN0aXZlKCkgewogICAgICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zb21lKGZpbHRlci5wcm9wcywgZnVuY3Rpb24gKHByb3ApIHsKICAgICAgICAgICAgcmV0dXJuIGZpbHRlci52YWxzW3Byb3BdICE9PSBmaWx0ZXIuZGVmYXVsdHNbcHJvcF07CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07IC8vIHNldCB0aGUgaW5pdGlhbCB2YWx1ZXMgdG8gdGhlIGRlZmF1bHRzCgogICAgICBmaWx0ZXIucmVzZXQoKTsKICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oJ2ZpbHRlci52YWxzJywgZnVuY3Rpb24gKCkgewogICAgICAgIGZpbHRlci5hY3RpdmUgPSBmaWx0ZXIuZ2V0QWN0aXZlKCk7CiAgICAgIH0pOwogICAgICAkc2NvcGUuJHdhdGNoTXVsdGkoWydbXWZpZWxkQ291bnRzJywgJ1tdY29sdW1ucycsICdbXWhpdHMnXSwgZnVuY3Rpb24gKGN1ciwgcHJldikgewogICAgICAgIHZhciBuZXdIaXRzID0gY3VyWzJdICE9PSBwcmV2WzJdOwogICAgICAgIHZhciBmaWVsZHMgPSAkc2NvcGUuZmllbGRzOwogICAgICAgIHZhciBjb2x1bW5zID0gJHNjb3BlLmNvbHVtbnMgfHwgW107CiAgICAgICAgdmFyIGZpZWxkQ291bnRzID0gJHNjb3BlLmZpZWxkQ291bnRzOwoKICAgICAgICBpZiAoIWZpZWxkcyB8fCBuZXdIaXRzKSB7CiAgICAgICAgICAkc2NvcGUuZmllbGRzID0gZmllbGRzID0gZ2V0RmllbGRzKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWZpZWxkcykgcmV0dXJuOyAvLyBncm91cCB0aGUgZmllbGRzIGludG8gcG9wdWxhciBhbmQgdXAtcG9wdWxhciBsaXN0cwoKICAgICAgICBfbG9kYXNoLmRlZmF1bHQuY2hhaW4oZmllbGRzKS5lYWNoKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgZmllbGQuZGlzcGxheU9yZGVyID0gX2xvZGFzaC5kZWZhdWx0LmluZGV4T2YoY29sdW1ucywgZmllbGQubmFtZSkgKyAxOwogICAgICAgICAgZmllbGQuZGlzcGxheSA9ICEhZmllbGQuZGlzcGxheU9yZGVyOwogICAgICAgICAgZmllbGQucm93Q291bnQgPSBmaWVsZENvdW50c1tmaWVsZC5uYW1lXTsKICAgICAgICB9KS5zb3J0QnkoZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgICAgICByZXR1cm4gKGZpZWxkLmNvdW50IHx8IDApICogLTE7CiAgICAgICAgfSkuZ3JvdXBCeShmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICAgIGlmIChmaWVsZC5kaXNwbGF5KSByZXR1cm4gJ3NlbGVjdGVkJzsKICAgICAgICAgIHJldHVybiBmaWVsZC5jb3VudCA+IDAgPyAncG9wdWxhcicgOiAndW5wb3B1bGFyJzsKICAgICAgICB9KS50YXAoZnVuY3Rpb24gKGdyb3VwcykgewogICAgICAgICAgZ3JvdXBzLnNlbGVjdGVkID0gX2xvZGFzaC5kZWZhdWx0LnNvcnRCeShncm91cHMuc2VsZWN0ZWQgfHwgW10sICdkaXNwbGF5T3JkZXInKTsKICAgICAgICAgIGdyb3Vwcy5wb3B1bGFyID0gZ3JvdXBzLnBvcHVsYXIgfHwgW107CiAgICAgICAgICBncm91cHMudW5wb3B1bGFyID0gZ3JvdXBzLnVucG9wdWxhciB8fCBbXTsgLy8gbW92ZSBleGNlc3MgcG9wdWxhciBmaWVsZHMgdG8gdW4tcG9wdWxhciBsaXN0CgogICAgICAgICAgdmFyIGV4dHJhcyA9IGdyb3Vwcy5wb3B1bGFyLnNwbGljZShjb25maWcuZ2V0KCdmaWVsZHM6cG9wdWxhckxpbWl0JykpOwogICAgICAgICAgZ3JvdXBzLnVucG9wdWxhciA9IGV4dHJhcy5jb25jYXQoZ3JvdXBzLnVucG9wdWxhcik7CiAgICAgICAgfSkuZWFjaChmdW5jdGlvbiAoZ3JvdXAsIG5hbWUpIHsKICAgICAgICAgICRzY29wZVtuYW1lICsgJ0ZpZWxkcyddID0gX2xvZGFzaC5kZWZhdWx0LnNvcnRCeShncm91cCwgbmFtZSA9PT0gJ3NlbGVjdGVkJyA/ICdkaXNwbGF5JyA6ICduYW1lJyk7CiAgICAgICAgfSkuY29tbWl0KCk7IC8vIGluY2x1ZGUgdW5kZWZpbmVkIHNvIHRoZSB1c2VyIGNhbiBjbGVhciB0aGUgZmlsdGVyCgoKICAgICAgICAkc2NvcGUuZmllbGRUeXBlcyA9IF9sb2Rhc2guZGVmYXVsdC51bmlvbihbJ2FueSddLCBfbG9kYXNoLmRlZmF1bHQucGx1Y2soZmllbGRzLCAndHlwZScpKTsKICAgICAgfSk7CgogICAgICAkc2NvcGUuaW5jcmVhc2VGaWVsZENvdW50ZXIgPSBmdW5jdGlvbiAoZmllbGROYW1lKSB7CiAgICAgICAgJHNjb3BlLmluZGV4UGF0dGVybi5wb3B1bGFyaXplRmllbGQoZmllbGROYW1lLCAxKTsKICAgICAgfTsKCiAgICAgIGZ1bmN0aW9uIGdldFZpc3VhbGl6ZVVybChmaWVsZCkgewogICAgICAgIGlmICghJHNjb3BlLnN0YXRlKSB7CiAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfQoKICAgICAgICB2YXIgYWdnID0ge307CiAgICAgICAgdmFyIGlzR2VvUG9pbnQgPSBmaWVsZC50eXBlID09PSAnZ2VvX3BvaW50JzsKICAgICAgICB2YXIgdHlwZSA9IGlzR2VvUG9pbnQgPyAndGlsZV9tYXAnIDogJ2hpc3RvZ3JhbSc7IC8vIElmIHdlJ3JlIHZpc3VhbGl6aW5nIGEgZGF0ZSBmaWVsZCwgYW5kIG91ciBpbmRleCBpcyB0aW1lIGJhc2VkIChhbmQgdGh1cyBoYXMgYSB0aW1lIGZpbHRlciksCiAgICAgICAgLy8gdGhlbiBydW4gYSBkYXRlIGhpc3RvZ3JhbQoKICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2RhdGUnICYmICRzY29wZS5pbmRleFBhdHRlcm4udGltZUZpZWxkTmFtZSA9PT0gZmllbGQubmFtZSkgewogICAgICAgICAgYWdnID0gewogICAgICAgICAgICB0eXBlOiAnZGF0ZV9oaXN0b2dyYW0nLAogICAgICAgICAgICBzY2hlbWE6ICdzZWdtZW50JywKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkLm5hbWUsCiAgICAgICAgICAgICAgaW50ZXJ2YWw6ICdhdXRvJwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSBpZiAoaXNHZW9Qb2ludCkgewogICAgICAgICAgYWdnID0gewogICAgICAgICAgICB0eXBlOiAnZ2VvaGFzaF9ncmlkJywKICAgICAgICAgICAgc2NoZW1hOiAnc2VnbWVudCcsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIGZpZWxkOiBmaWVsZC5uYW1lLAogICAgICAgICAgICAgIHByZWNpc2lvbjogMwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhZ2cgPSB7CiAgICAgICAgICAgIHR5cGU6ICd0ZXJtcycsCiAgICAgICAgICAgIHNjaGVtYTogJ3NlZ21lbnQnLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBmaWVsZDogZmllbGQubmFtZSwKICAgICAgICAgICAgICBzaXplOiBwYXJzZUludChjb25maWcuZ2V0KCdkaXNjb3ZlcjphZ2dzOnRlcm1zOnNpemUnKSwgMTApLAogICAgICAgICAgICAgIG9yZGVyQnk6ICcyJwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICcjL3Zpc3VhbGl6ZS9jcmVhdGU/JyArIF9qcXVlcnkuZGVmYXVsdC5wYXJhbShfbG9kYXNoLmRlZmF1bHQuYXNzaWduKF9sb2Rhc2guZGVmYXVsdC5jbG9uZSgkbG9jYXRpb24uc2VhcmNoKCkpLCB7CiAgICAgICAgICBpbmRleFBhdHRlcm46ICRzY29wZS5zdGF0ZS5pbmRleCwKICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICBfYTogX3Jpc29uTm9kZS5kZWZhdWx0LmVuY29kZSh7CiAgICAgICAgICAgIGZpbHRlcnM6ICRzY29wZS5zdGF0ZS5maWx0ZXJzIHx8IFtdLAogICAgICAgICAgICBxdWVyeTogJHNjb3BlLnN0YXRlLnF1ZXJ5IHx8IHVuZGVmaW5lZCwKICAgICAgICAgICAgdmlzOiB7CiAgICAgICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgICAgICBhZ2dzOiBbewogICAgICAgICAgICAgICAgc2NoZW1hOiAnbWV0cmljJywKICAgICAgICAgICAgICAgIHR5cGU6ICdjb3VudCcsCiAgICAgICAgICAgICAgICAnaWQnOiAnMicKICAgICAgICAgICAgICB9LCBhZ2ddCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSkpOwogICAgICB9CgogICAgICAkc2NvcGUuY29tcHV0ZURldGFpbHMgPSBmdW5jdGlvbiAoZmllbGQsIHJlY29tcHV0ZSkgewogICAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuaXNVbmRlZmluZWQoZmllbGQuZGV0YWlscykgfHwgcmVjb21wdXRlKSB7CiAgICAgICAgICBmaWVsZC5kZXRhaWxzID0gX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgIHZpc3VhbGl6ZVVybDogZmllbGQudmlzdWFsaXphYmxlID8gZ2V0VmlzdWFsaXplVXJsKGZpZWxkKSA6IG51bGwKICAgICAgICAgIH0sIF9maWVsZF9jYWxjdWxhdG9yLmZpZWxkQ2FsY3VsYXRvci5nZXRGaWVsZFZhbHVlQ291bnRzKHsKICAgICAgICAgICAgaGl0czogJHNjb3BlLmhpdHMsCiAgICAgICAgICAgIGZpZWxkOiBmaWVsZCwKICAgICAgICAgICAgY291bnQ6IDUsCiAgICAgICAgICAgIGdyb3VwZWQ6IGZhbHNlCiAgICAgICAgICB9KSk7CgogICAgICAgICAgX2xvZGFzaC5kZWZhdWx0LmVhY2goZmllbGQuZGV0YWlscy5idWNrZXRzLCBmdW5jdGlvbiAoYnVja2V0KSB7CiAgICAgICAgICAgIGJ1Y2tldC5kaXNwbGF5ID0gZmllbGQuZm9ybWF0LmNvbnZlcnQoYnVja2V0LnZhbHVlKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgICRzY29wZS5pbmNyZWFzZUZpZWxkQ291bnRlcihmaWVsZCwgMSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlbGV0ZSBmaWVsZC5kZXRhaWxzOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGZ1bmN0aW9uIGdldEZpZWxkcygpIHsKICAgICAgICB2YXIgcHJldkZpZWxkcyA9ICRzY29wZS5maWVsZHM7CiAgICAgICAgdmFyIGluZGV4UGF0dGVybiA9ICRzY29wZS5pbmRleFBhdHRlcm47CiAgICAgICAgdmFyIGhpdHMgPSAkc2NvcGUuaGl0czsKICAgICAgICB2YXIgZmllbGRDb3VudHMgPSAkc2NvcGUuZmllbGRDb3VudHM7CiAgICAgICAgaWYgKCFpbmRleFBhdHRlcm4gfHwgIWhpdHMgfHwgIWZpZWxkQ291bnRzKSByZXR1cm47CiAgICAgICAgdmFyIGZpZWxkU3BlY3MgPSBpbmRleFBhdHRlcm4uZmllbGRzLnNsaWNlKDApOwoKICAgICAgICB2YXIgZmllbGROYW1lc0luRG9jcyA9IF9sb2Rhc2guZGVmYXVsdC5rZXlzKGZpZWxkQ291bnRzKTsKCiAgICAgICAgdmFyIGZpZWxkTmFtZXNJbkluZGV4UGF0dGVybiA9IF9sb2Rhc2guZGVmYXVsdC5rZXlzKGluZGV4UGF0dGVybi5maWVsZHMuYnlOYW1lKTsKCiAgICAgICAgX2xvZGFzaC5kZWZhdWx0LmRpZmZlcmVuY2UoZmllbGROYW1lc0luRG9jcywgZmllbGROYW1lc0luSW5kZXhQYXR0ZXJuKS5mb3JFYWNoKGZ1bmN0aW9uICh1bmtub3duRmllbGROYW1lKSB7CiAgICAgICAgICBmaWVsZFNwZWNzLnB1c2goewogICAgICAgICAgICBuYW1lOiB1bmtub3duRmllbGROYW1lLAogICAgICAgICAgICB0eXBlOiAndW5rbm93bicKICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgZmllbGRzID0gbmV3IF9pbmRleF9wYXR0ZXJucy5GaWVsZExpc3QoaW5kZXhQYXR0ZXJuLCBmaWVsZFNwZWNzKTsKCiAgICAgICAgaWYgKHByZXZGaWVsZHMpIHsKICAgICAgICAgIGZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgICBmaWVsZC5kZXRhaWxzID0gX2xvZGFzaC5kZWZhdWx0LmdldChwcmV2RmllbGRzLCBbJ2J5TmFtZScsIGZpZWxkLm5hbWUsICdkZXRhaWxzJ10pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmllbGRzOwogICAgICB9CiAgICB9CiAgfTsKfSk7"},null]}