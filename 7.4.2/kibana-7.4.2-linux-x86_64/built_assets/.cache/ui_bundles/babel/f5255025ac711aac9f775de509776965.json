{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/public/http/http_setup.js","dependencies":[{"path":"src/core/public/http/http_setup.js","mtime":1572296408456},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnNldHVwID0gdm9pZCAwOwoKdmFyIF9yeGpzID0gcmVxdWlyZSgicnhqcyIpOwoKdmFyIF9vcGVyYXRvcnMgPSByZXF1aXJlKCJyeGpzL29wZXJhdG9ycyIpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfdXJsID0gcmVxdWlyZSgidXJsIik7Cgp2YXIgX2h0dHBfaW50ZXJjZXB0X2NvbnRyb2xsZXIgPSByZXF1aXJlKCIuL2h0dHBfaW50ZXJjZXB0X2NvbnRyb2xsZXIiKTsKCnZhciBfaHR0cF9mZXRjaF9lcnJvciA9IHJlcXVpcmUoIi4vaHR0cF9mZXRjaF9lcnJvciIpOwoKdmFyIF9odHRwX2ludGVyY2VwdF9oYWx0X2Vycm9yID0gcmVxdWlyZSgiLi9odHRwX2ludGVyY2VwdF9oYWx0X2Vycm9yIik7Cgp2YXIgX2Jhc2VfcGF0aF9zZXJ2aWNlID0gcmVxdWlyZSgiLi9iYXNlX3BhdGhfc2VydmljZSIpOwoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsKICB0cnkgewogICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOwogICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsKICB9IGNhdGNoIChlcnJvcikgewogICAgcmVqZWN0KGVycm9yKTsKICAgIHJldHVybjsKICB9CgogIGlmIChpbmZvLmRvbmUpIHsKICAgIHJlc29sdmUodmFsdWUpOwogIH0gZWxzZSB7CiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7CiAgfQp9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsKCiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsKICAgICAgfQoKICAgICAgX25leHQodW5kZWZpbmVkKTsKICAgIH0pOwogIH07Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHsKICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsKCiAgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOwoKICB2YXIga2V5LCBpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7CgogICAgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsKICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsKICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsKICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsKICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsKICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsKICB2YXIgdGFyZ2V0ID0ge307CiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOwogIHZhciBrZXksIGk7CgogIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7CiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldOwogICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsKICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9Cgp2YXIgSlNPTl9DT05URU5UID0gL14oYXBwbGljYXRpb25cLyhqc29ufHgtamF2YXNjcmlwdCl8dGV4dFwvKHgtKT9qYXZhc2NyaXB0fHgtanNvbikoOy4qKT8kLzsKdmFyIE5ESlNPTl9DT05URU5UID0gL14oYXBwbGljYXRpb25cL25kanNvbikoOy4qKT8kLzsKCnZhciBzZXR1cCA9IGZ1bmN0aW9uIHNldHVwKGluamVjdGVkTWV0YWRhdGEsIGZhdGFsRXJyb3JzKSB7CiAgdmFyIGxvYWRpbmdDb3VudCQgPSBuZXcgX3J4anMuQmVoYXZpb3JTdWJqZWN0KDApOwogIHZhciBzdG9wJCA9IG5ldyBfcnhqcy5TdWJqZWN0KCk7CiAgdmFyIGludGVyY2VwdG9ycyA9IG5ldyBTZXQoKTsKICB2YXIga2liYW5hVmVyc2lvbiA9IGluamVjdGVkTWV0YWRhdGEuZ2V0S2liYW5hVmVyc2lvbigpOwogIHZhciBiYXNlUGF0aCA9IG5ldyBfYmFzZV9wYXRoX3NlcnZpY2UuQmFzZVBhdGgoaW5qZWN0ZWRNZXRhZGF0YS5nZXRCYXNlUGF0aCgpKTsKCiAgZnVuY3Rpb24gaW50ZXJjZXB0KGludGVyY2VwdG9yKSB7CiAgICBpbnRlcmNlcHRvcnMuYWRkKGludGVyY2VwdG9yKTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBpbnRlcmNlcHRvcnMuZGVsZXRlKGludGVyY2VwdG9yKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiByZW1vdmVBbGxJbnRlcmNlcHRvcnMoKSB7CiAgICBpbnRlcmNlcHRvcnMuY2xlYXIoKTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3QocGF0aCwgb3B0aW9ucykgewogICAgdmFyIF9tZXJnZSA9ICgwLCBfbG9kYXNoLm1lcmdlKSh7CiAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLAogICAgICBwcmVwZW5kQmFzZVBhdGg6IHRydWUsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAna2JuLXZlcnNpb24nOiBraWJhbmFWZXJzaW9uLAogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgfQogICAgfSwgb3B0aW9ucyB8fCB7fSksCiAgICAgICAgcXVlcnkgPSBfbWVyZ2UucXVlcnksCiAgICAgICAgc2hvdWxkUHJlcGVuZEJhc2VQYXRoID0gX21lcmdlLnByZXBlbmRCYXNlUGF0aCwKICAgICAgICBmZXRjaE9wdGlvbnMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX21lcmdlLCBbInF1ZXJ5IiwgInByZXBlbmRCYXNlUGF0aCJdKTsKCiAgICB2YXIgdXJsID0gKDAsIF91cmwuZm9ybWF0KSh7CiAgICAgIHBhdGhuYW1lOiBzaG91bGRQcmVwZW5kQmFzZVBhdGggPyBiYXNlUGF0aC5wcmVwZW5kKHBhdGgpIDogcGF0aCwKICAgICAgcXVlcnk6IHF1ZXJ5CiAgICB9KTsKCiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhlYWRlcnMgJiYgJ0NvbnRlbnQtVHlwZScgaW4gb3B0aW9ucy5oZWFkZXJzICYmIG9wdGlvbnMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPT09IHVuZGVmaW5lZCkgewogICAgICBkZWxldGUgZmV0Y2hPcHRpb25zLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddOwogICAgfQoKICAgIHJldHVybiBuZXcgUmVxdWVzdCh1cmwsIGZldGNoT3B0aW9ucyk7CiAgfSAvLyBSZXF1ZXN0L3Jlc3BvbnNlIGludGVyY2VwdG9ycyBhcmUgY2FsbGVkIGluIG9wcG9zaXRlIG9yZGVycy4KICAvLyBSZXF1ZXN0IGhvb2tzIHN0YXJ0IGZyb20gdGhlIG5ld2VzdCBpbnRlcmNlcHRvciBhbmQgZW5kIHdpdGggdGhlIG9sZGVzdC4KCgogIGZ1bmN0aW9uIGludGVyY2VwdFJlcXVlc3QocmVxdWVzdCwgY29udHJvbGxlcikgewogICAgdmFyIG5leHQgPSByZXF1ZXN0OwogICAgcmV0dXJuIF90b0NvbnN1bWFibGVBcnJheShpbnRlcmNlcHRvcnMpLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChwcm9taXNlLCBpbnRlcmNlcHRvcikgewogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGN1cnJlbnQpIHsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgaWYgKCFjb250cm9sbGVyLmhhbHRlZCkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgX2h0dHBfaW50ZXJjZXB0X2hhbHRfZXJyb3IuSHR0cEludGVyY2VwdEhhbHRFcnJvcigpOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlcXVlc3QpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgY3VycmVudCk7CgogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGludGVyY2VwdG9yLnJlcXVlc3QoY3VycmVudCwgY29udHJvbGxlcik7CgogICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgICBpZiAoX2NvbnRleHQudDApIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBjdXJyZW50OwoKICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgbmV4dCA9IF9jb250ZXh0LnQwOwogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KTsKCiAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCksCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihlcnJvcikgewogICAgICAgICAgdmFyIG5leHRSZXF1ZXN0OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBfaHR0cF9pbnRlcmNlcHRfaGFsdF9lcnJvci5IdHRwSW50ZXJjZXB0SGFsdEVycm9yKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7CgogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICBpZiAoIWNvbnRyb2xsZXIuaGFsdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgX2h0dHBfaW50ZXJjZXB0X2hhbHRfZXJyb3IuSHR0cEludGVyY2VwdEhhbHRFcnJvcigpOwoKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcikgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7CgogICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICByZXR1cm4gaW50ZXJjZXB0b3IucmVxdWVzdEVycm9yKHsKICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsCiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdDogbmV4dAogICAgICAgICAgICAgICAgICB9LCBjb250cm9sbGVyKTsKCiAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICBuZXh0UmVxdWVzdCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgICAgaWYgKG5leHRSZXF1ZXN0KSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7CgogICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgbmV4dCA9IG5leHRSZXF1ZXN0OwogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgbmV4dCk7CgogICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9LCBQcm9taXNlLnJlc29sdmUocmVxdWVzdCkpOwogIH0gLy8gUmVzcG9uc2UgaG9va3Mgc3RhcnQgZnJvbSB0aGUgb2xkZXN0IGludGVyY2VwdG9yIGFuZCBlbmQgd2l0aCB0aGUgbmV3ZXN0LgoKCiAgZnVuY3Rpb24gaW50ZXJjZXB0UmVzcG9uc2UoX3gzLCBfeDQpIHsKICAgIHJldHVybiBfaW50ZXJjZXB0UmVzcG9uc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIGZ1bmN0aW9uIF9pbnRlcmNlcHRSZXNwb25zZSgpIHsKICAgIF9pbnRlcmNlcHRSZXNwb25zZSA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocmVzcG9uc2VQcm9taXNlLCBjb250cm9sbGVyKSB7CiAgICAgIHZhciBjdXJyZW50LCBmaW5hbEh0dHBSZXNwb25zZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF90b0NvbnN1bWFibGVBcnJheShpbnRlcmNlcHRvcnMpLnJlZHVjZShmdW5jdGlvbiAocHJvbWlzZSwgaW50ZXJjZXB0b3IpIHsKICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oCiAgICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmNSA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGh0dHBSZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRyb2xsZXIuaGFsdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IF9odHRwX2ludGVyY2VwdF9oYWx0X2Vycm9yLkh0dHBJbnRlcmNlcHRIYWx0RXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGh0dHBSZXNwb25zZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcmNlcHRvci5yZXNwb25zZShodHRwUmVzcG9uc2UsIGNvbnRyb2xsZXIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2NvbnRleHQzLnQwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gaHR0cFJlc3BvbnNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gX2NvbnRleHQzLnQwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGN1cnJlbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDYpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWY2ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgICAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBfaHR0cF9pbnRlcmNlcHRfaGFsdF9lcnJvci5IdHRwSW50ZXJjZXB0SGFsdEVycm9yKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRyb2xsZXIuaGFsdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IF9odHRwX2ludGVyY2VwdF9oYWx0X2Vycm9yLkh0dHBJbnRlcmNlcHRIYWx0RXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlc3BvbnNlRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcmNlcHRvci5yZXNwb25zZUVycm9yKF9vYmplY3RTcHJlYWQoe30sIGN1cnJlbnQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgY29udHJvbGxlcik7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgbmV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKTsKICAgICAgICAgICAgICB9LCByZXNwb25zZVByb21pc2UpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGZpbmFsSHR0cFJlc3BvbnNlID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGZpbmFsSHR0cFJlc3BvbnNlLmJvZHkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTUpOwogICAgfSkpOwogICAgcmV0dXJuIF9pbnRlcmNlcHRSZXNwb25zZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgZnVuY3Rpb24gZmV0Y2hlcihfeDUpIHsKICAgIHJldHVybiBfZmV0Y2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgZnVuY3Rpb24gX2ZldGNoZXIoKSB7CiAgICBfZmV0Y2hlciA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYocmVxdWVzdCkgewogICAgICB2YXIgcmVzcG9uc2UsIGJvZHksIGNvbnRlbnRUeXBlLCB0ZXh0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGJvZHkgPSBudWxsOwogICAgICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMTsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5mZXRjaChyZXF1ZXN0KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSA3OwogICAgICAgICAgICAgIF9jb250ZXh0Ni50MCA9IF9jb250ZXh0NlsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICB0aHJvdyBuZXcgX2h0dHBfZmV0Y2hfZXJyb3IuSHR0cEZldGNoRXJyb3IoX2NvbnRleHQ2LnQwLm1lc3NhZ2UpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdDb250ZW50LVR5cGUnKSB8fCAnJzsKICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDExOwoKICAgICAgICAgICAgICBpZiAoIU5ESlNPTl9DT05URU5ULnRlc3QoY29udGVudFR5cGUpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE1OwogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5ibG9iKCk7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGJvZHkgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI4OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBpZiAoIUpTT05fQ09OVEVOVC50ZXN0KGNvbnRlbnRUeXBlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyMTsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBib2R5ID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyODsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyNjsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpOwoKICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICB0ZXh0ID0gX2NvbnRleHQ2LnNlbnQ7CgogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBib2R5ID0gSlNPTi5wYXJzZSh0ZXh0KTsKICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGJvZHkgPSB0ZXh0OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzMzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSAzMDsKICAgICAgICAgICAgICBfY29udGV4dDYudDEgPSBfY29udGV4dDZbImNhdGNoIl0oMTEpOwogICAgICAgICAgICAgIHRocm93IG5ldyBfaHR0cF9mZXRjaF9lcnJvci5IdHRwRmV0Y2hFcnJvcihfY29udGV4dDYudDEubWVzc2FnZSwgcmVzcG9uc2UsIGJvZHkpOwoKICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRocm93IG5ldyBfaHR0cF9mZXRjaF9lcnJvci5IdHRwRmV0Y2hFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0LCByZXNwb25zZSwgYm9keSk7CgogICAgICAgICAgICBjYXNlIDM1OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2UsCiAgICAgICAgICAgICAgICBib2R5OiBib2R5LAogICAgICAgICAgICAgICAgcmVxdWVzdDogcmVxdWVzdAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU2LCBudWxsLCBbWzEsIDddLCBbMTEsIDMwXV0pOwogICAgfSkpOwogICAgcmV0dXJuIF9mZXRjaGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICBmdW5jdGlvbiBmZXRjaChwYXRoKSB7CiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICB2YXIgY29udHJvbGxlciA9IG5ldyBfaHR0cF9pbnRlcmNlcHRfY29udHJvbGxlci5IdHRwSW50ZXJjZXB0Q29udHJvbGxlcigpOwogICAgdmFyIGluaXRpYWxSZXF1ZXN0ID0gY3JlYXRlUmVxdWVzdChwYXRoLCBvcHRpb25zKTsKICAgIHJldHVybiBpbnRlcmNlcHRSZXNwb25zZShpbnRlcmNlcHRSZXF1ZXN0KGluaXRpYWxSZXF1ZXN0LCBjb250cm9sbGVyKS50aGVuKGZldGNoZXIpLCBjb250cm9sbGVyKTsKICB9CgogIGZ1bmN0aW9uIHNob3J0aGFuZChtZXRob2QpIHsKICAgIHJldHVybiBmdW5jdGlvbiAocGF0aCkgewogICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHJldHVybiBmZXRjaChwYXRoLCBfb2JqZWN0U3ByZWFkKHt9LCBvcHRpb25zLCB7CiAgICAgICAgbWV0aG9kOiBtZXRob2QKICAgICAgfSkpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIHN0b3AoKSB7CiAgICBzdG9wJC5uZXh0KCk7CiAgICBsb2FkaW5nQ291bnQkLmNvbXBsZXRlKCk7CiAgfQoKICBmdW5jdGlvbiBhZGRMb2FkaW5nQ291bnQoY291bnQkKSB7CiAgICBjb3VudCQucGlwZSgoMCwgX29wZXJhdG9ycy5kaXN0aW5jdFVudGlsQ2hhbmdlZCkoKSwgKDAsIF9vcGVyYXRvcnMudGFwKShmdW5jdGlvbiAoY291bnQpIHsKICAgICAgaWYgKGNvdW50IDwgMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignT2JzZXJ2YWJsZXMgcGFzc2VkIHRvIGxvYWRpbmdDb3VudC5hZGQoKSBtdXN0IG9ubHkgZW1pdCBwb3NpdGl2ZSBudW1iZXJzJyk7CiAgICAgIH0KICAgIH0pLCAvLyB1c2UgdGFrZVVudGlsKCkgc28gdGhhdCB3ZSBjYW4gZmluaXNoIGVhY2ggc3RyZWFtIG9uIHN0b3AoKSB0aGUgc2FtZSB3YXkgd2UgZG8gd2hlbiB0aGV5IGNvbXBsZXRlLAogICAgLy8gYnkgcmVtb3ZpbmcgdGhlIHByZXZpb3VzIGNvdW50IGZyb20gdGhlIHRvdGFsCiAgICAoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKHN0b3AkKSwgKDAsIF9vcGVyYXRvcnMuZW5kV2l0aCkoMCksICgwLCBfb3BlcmF0b3JzLnN0YXJ0V2l0aCkoMCksICgwLCBfb3BlcmF0b3JzLnBhaXJ3aXNlKSgpLCAoMCwgX29wZXJhdG9ycy5tYXApKGZ1bmN0aW9uIChfcmVmMykgewogICAgICB2YXIgX3JlZjQgPSBfc2xpY2VkVG9BcnJheShfcmVmMywgMiksCiAgICAgICAgICBwcmV2ID0gX3JlZjRbMF0sCiAgICAgICAgICBuZXh0ID0gX3JlZjRbMV07CgogICAgICByZXR1cm4gbmV4dCAtIHByZXY7CiAgICB9KSkuc3Vic2NyaWJlKHsKICAgICAgbmV4dDogZnVuY3Rpb24gbmV4dChkZWx0YSkgewogICAgICAgIGxvYWRpbmdDb3VudCQubmV4dChsb2FkaW5nQ291bnQkLmdldFZhbHVlKCkgKyBkZWx0YSk7CiAgICAgIH0sCiAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IpIHsKICAgICAgICBpZiAoZmF0YWxFcnJvcnMpIHsKICAgICAgICAgIGZhdGFsRXJyb3JzLmFkZChfZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBnZXRMb2FkaW5nQ291bnQkKCkgewogICAgcmV0dXJuIGxvYWRpbmdDb3VudCQucGlwZSgoMCwgX29wZXJhdG9ycy5kaXN0aW5jdFVudGlsQ2hhbmdlZCkoKSk7CiAgfQoKICByZXR1cm4gewogICAgc3RvcDogc3RvcCwKICAgIGJhc2VQYXRoOiBiYXNlUGF0aCwKICAgIGludGVyY2VwdDogaW50ZXJjZXB0LAogICAgcmVtb3ZlQWxsSW50ZXJjZXB0b3JzOiByZW1vdmVBbGxJbnRlcmNlcHRvcnMsCiAgICBmZXRjaDogZmV0Y2gsCiAgICBkZWxldGU6IHNob3J0aGFuZCgnREVMRVRFJyksCiAgICBnZXQ6IHNob3J0aGFuZCgnR0VUJyksCiAgICBoZWFkOiBzaG9ydGhhbmQoJ0hFQUQnKSwKICAgIG9wdGlvbnM6IHNob3J0aGFuZCgnT1BUSU9OUycpLAogICAgcGF0Y2g6IHNob3J0aGFuZCgnUEFUQ0gnKSwKICAgIHBvc3Q6IHNob3J0aGFuZCgnUE9TVCcpLAogICAgcHV0OiBzaG9ydGhhbmQoJ1BVVCcpLAogICAgYWRkTG9hZGluZ0NvdW50OiBhZGRMb2FkaW5nQ291bnQsCiAgICBnZXRMb2FkaW5nQ291bnQkOiBnZXRMb2FkaW5nQ291bnQkCiAgfTsKfTsKCmV4cG9ydHMuc2V0dXAgPSBzZXR1cDs="},null]}