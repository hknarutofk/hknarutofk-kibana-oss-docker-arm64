{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/courier/search_strategy/default_search_strategy.js","dependencies":[{"path":"src/legacy/ui/public/courier/search_strategy/default_search_strategy.js","mtime":1572296412544},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHRTZWFyY2hTdHJhdGVneSA9IHZvaWQgMDsKCnZhciBfc2VhcmNoX3N0cmF0ZWd5X3JlZ2lzdHJ5ID0gcmVxdWlyZSgiLi9zZWFyY2hfc3RyYXRlZ3lfcmVnaXN0cnkiKTsKCnZhciBfaXNfZGVmYXVsdF90eXBlX2luZGV4X3BhdHRlcm4gPSByZXF1aXJlKCIuL2lzX2RlZmF1bHRfdHlwZV9pbmRleF9wYXR0ZXJuIik7Cgp2YXIgX3NlYXJjaF9lcnJvciA9IHJlcXVpcmUoIi4vc2VhcmNoX2Vycm9yIik7Cgp2YXIgX2dldF9zZWFyY2hfcGFyYW1zID0gcmVxdWlyZSgiLi4vZmV0Y2gvZ2V0X3NlYXJjaF9wYXJhbXMiKTsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBnZXRBbGxGZXRjaFBhcmFtcyhzZWFyY2hSZXF1ZXN0cywgUHJvbWlzZSkgewogIHJldHVybiBQcm9taXNlLm1hcChzZWFyY2hSZXF1ZXN0cywgZnVuY3Rpb24gKHNlYXJjaFJlcXVlc3QpIHsKICAgIHJldHVybiBQcm9taXNlLnRyeShzZWFyY2hSZXF1ZXN0LmdldEZldGNoUGFyYW1zLCB2b2lkIDAsIHNlYXJjaFJlcXVlc3QpLnRoZW4oZnVuY3Rpb24gKGZldGNoUGFyYW1zKSB7CiAgICAgIHJldHVybiBzZWFyY2hSZXF1ZXN0LmZldGNoUGFyYW1zID0gZmV0Y2hQYXJhbXM7CiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICByZXR1cm4gewogICAgICAgIHJlc29sdmVkOiB2YWx1ZQogICAgICB9OwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcmVqZWN0ZWQ6IGVycm9yCiAgICAgIH07CiAgICB9KTsKICB9KTsKfQoKZnVuY3Rpb24gc2VyaWFsaXplQWxsRmV0Y2hQYXJhbXMoX3gsIF94MiwgX3gzKSB7CiAgcmV0dXJuIF9zZXJpYWxpemVBbGxGZXRjaFBhcmFtcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfc2VyaWFsaXplQWxsRmV0Y2hQYXJhbXMoKSB7CiAgX3NlcmlhbGl6ZUFsbEZldGNoUGFyYW1zID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGZldGNoUGFyYW1zLCBzZWFyY2hSZXF1ZXN0cywgc2VyaWFsaXplRmV0Y2hQYXJhbXMpIHsKICAgIHZhciBzZWFyY2hSZXF1ZXN0c1dpdGhGZXRjaFBhcmFtcywgZmFpbGVkU2VhcmNoUmVxdWVzdHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBzZWFyY2hSZXF1ZXN0c1dpdGhGZXRjaFBhcmFtcyA9IFtdOwogICAgICAgICAgICBmYWlsZWRTZWFyY2hSZXF1ZXN0cyA9IFtdOyAvLyBHYXRoZXIgdGhlIGZldGNoIHBhcmFtIHJlc3BvbnNlcyBmcm9tIGFsbCB0aGUgc3VjY2Vzc2Z1bCByZXF1ZXN0cy4KCiAgICAgICAgICAgIGZldGNoUGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgaW5kZXgpIHsKICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc29sdmVkKSB7CiAgICAgICAgICAgICAgICBzZWFyY2hSZXF1ZXN0c1dpdGhGZXRjaFBhcmFtcy5wdXNoKHJlc3VsdC5yZXNvbHZlZCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBzZWFyY2hSZXF1ZXN0ID0gc2VhcmNoUmVxdWVzdHNbaW5kZXhdOwogICAgICAgICAgICAgICAgc2VhcmNoUmVxdWVzdC5oYW5kbGVGYWlsdXJlKHJlc3VsdC5yZWplY3RlZCk7CiAgICAgICAgICAgICAgICBmYWlsZWRTZWFyY2hSZXF1ZXN0cy5wdXNoKHNlYXJjaFJlcXVlc3QpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZUZldGNoUGFyYW1zKHNlYXJjaFJlcXVlc3RzV2l0aEZldGNoUGFyYW1zKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICBfY29udGV4dDIudDEgPSBmYWlsZWRTZWFyY2hSZXF1ZXN0czsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICBzZXJpYWxpemVkRmV0Y2hQYXJhbXM6IF9jb250ZXh0Mi50MCwKICAgICAgICAgICAgICBmYWlsZWRTZWFyY2hSZXF1ZXN0czogX2NvbnRleHQyLnQxCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX3NlcmlhbGl6ZUFsbEZldGNoUGFyYW1zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCnZhciBkZWZhdWx0U2VhcmNoU3RyYXRlZ3kgPSB7CiAgaWQ6ICdkZWZhdWx0JywKICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaChwYXJhbXMpIHsKICAgIHZhciBjb25maWcgPSBwYXJhbXMuY29uZmlnOwogICAgcmV0dXJuIGNvbmZpZy5nZXQoJ2NvdXJpZXI6YmF0Y2hTZWFyY2hlcycpID8gbXNlYXJjaChwYXJhbXMpIDogX3NlYXJjaChwYXJhbXMpOwogIH0sCiAgaXNWaWFibGU6IGZ1bmN0aW9uIGlzVmlhYmxlKGluZGV4UGF0dGVybikgewogICAgaWYgKCFpbmRleFBhdHRlcm4pIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiAoMCwgX2lzX2RlZmF1bHRfdHlwZV9pbmRleF9wYXR0ZXJuLmlzRGVmYXVsdFR5cGVJbmRleFBhdHRlcm4pKGluZGV4UGF0dGVybik7CiAgfQp9OwpleHBvcnRzLmRlZmF1bHRTZWFyY2hTdHJhdGVneSA9IGRlZmF1bHRTZWFyY2hTdHJhdGVneTsKCmZ1bmN0aW9uIG1zZWFyY2goX3g0KSB7CiAgcmV0dXJuIF9tc2VhcmNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9tc2VhcmNoKCkgewogIF9tc2VhcmNoID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKF9yZWYpIHsKICAgIHZhciBzZWFyY2hSZXF1ZXN0cywgZXMsIFByb21pc2UsIHNlcmlhbGl6ZUZldGNoUGFyYW1zLCBjb25maWcsIGFsbEZldGNoUGFyYW1zLCBfcmVmNSwgc2VyaWFsaXplZEZldGNoUGFyYW1zLCBmYWlsZWRTZWFyY2hSZXF1ZXN0cywgbXNlYXJjaFBhcmFtcywgc2VhcmNoaW5nOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHNlYXJjaFJlcXVlc3RzID0gX3JlZi5zZWFyY2hSZXF1ZXN0cywgZXMgPSBfcmVmLmVzLCBQcm9taXNlID0gX3JlZi5Qcm9taXNlLCBzZXJpYWxpemVGZXRjaFBhcmFtcyA9IF9yZWYuc2VyaWFsaXplRmV0Y2hQYXJhbXMsIGNvbmZpZyA9IF9yZWYuY29uZmlnOwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBnZXRBbGxGZXRjaFBhcmFtcyhzZWFyY2hSZXF1ZXN0cywgUHJvbWlzZSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBhbGxGZXRjaFBhcmFtcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBzZXJpYWxpemVBbGxGZXRjaFBhcmFtcyhhbGxGZXRjaFBhcmFtcywgc2VhcmNoUmVxdWVzdHMsIHNlcmlhbGl6ZUZldGNoUGFyYW1zKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIF9yZWY1ID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIHNlcmlhbGl6ZWRGZXRjaFBhcmFtcyA9IF9yZWY1LnNlcmlhbGl6ZWRGZXRjaFBhcmFtczsKICAgICAgICAgICAgZmFpbGVkU2VhcmNoUmVxdWVzdHMgPSBfcmVmNS5mYWlsZWRTZWFyY2hSZXF1ZXN0czsKCiAgICAgICAgICAgIGlmICghKHNlcmlhbGl6ZWRGZXRjaFBhcmFtcy50cmltKCkgPT09ICcnKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgZmFpbGVkU2VhcmNoUmVxdWVzdHM6IGZhaWxlZFNlYXJjaFJlcXVlc3RzCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIG1zZWFyY2hQYXJhbXMgPSBfb2JqZWN0U3ByZWFkKHt9LCAoMCwgX2dldF9zZWFyY2hfcGFyYW1zLmdldE1TZWFyY2hQYXJhbXMpKGNvbmZpZyksIHsKICAgICAgICAgICAgICBib2R5OiBzZXJpYWxpemVkRmV0Y2hQYXJhbXMKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHNlYXJjaGluZyA9IGVzLm1zZWFyY2gobXNlYXJjaFBhcmFtcyk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgLy8gTXVuZ2UgZGF0YSBpbnRvIHNoYXBlIGV4cGVjdGVkIGJ5IGNvbnN1bWVyLgogICAgICAgICAgICAgIHNlYXJjaGluZzogbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgLy8gVW53cmFwIHRoZSByZXNwb25zZXMgb2JqZWN0IHJldHVybmVkIGJ5IHRoZSBFUyBjbGllbnQuCiAgICAgICAgICAgICAgICBzZWFyY2hpbmcudGhlbihmdW5jdGlvbiAoX3JlZjYpIHsKICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlcyA9IF9yZWY2LnJlc3BvbnNlczsKICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZXMpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBFUyBjbGllbnQgZXJyb3IgYXMgYSBTZWFyY2hFcnJvci4KICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1c0NvZGUgPSBlcnJvci5zdGF0dXNDb2RlLAogICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWUgPSBlcnJvci5kaXNwbGF5TmFtZSwKICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IGVycm9yLnBhdGg7CiAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2hFcnJvciA9IG5ldyBfc2VhcmNoX2Vycm9yLlNlYXJjaEVycm9yKHsKICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1c0NvZGUsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGRpc3BsYXlOYW1lLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgcmVqZWN0KHNlYXJjaEVycm9yKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGFib3J0OiBzZWFyY2hpbmcuYWJvcnQsCiAgICAgICAgICAgICAgZmFpbGVkU2VhcmNoUmVxdWVzdHM6IGZhaWxlZFNlYXJjaFJlcXVlc3RzCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CiAgcmV0dXJuIF9tc2VhcmNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9zZWFyY2goX3JlZjIpIHsKICB2YXIgc2VhcmNoUmVxdWVzdHMgPSBfcmVmMi5zZWFyY2hSZXF1ZXN0cywKICAgICAgZXMgPSBfcmVmMi5lcywKICAgICAgUHJvbWlzZSA9IF9yZWYyLlByb21pc2UsCiAgICAgIGNvbmZpZyA9IF9yZWYyLmNvbmZpZywKICAgICAgc2Vzc2lvbklkID0gX3JlZjIuc2Vzc2lvbklkLAogICAgICBlc1NoYXJkVGltZW91dCA9IF9yZWYyLmVzU2hhcmRUaW1lb3V0OwogIHZhciBmYWlsZWRTZWFyY2hSZXF1ZXN0cyA9IFtdOwogIHZhciBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7CiAgdmFyIHNlYXJjaFBhcmFtcyA9ICgwLCBfZ2V0X3NlYXJjaF9wYXJhbXMuZ2V0U2VhcmNoUGFyYW1zKShjb25maWcsIHNlc3Npb25JZCwgZXNTaGFyZFRpbWVvdXQpOwogIHZhciBwcm9taXNlcyA9IHNlYXJjaFJlcXVlc3RzLm1hcCgKICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHNlYXJjaFJlcXVlc3QpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHNlYXJjaFJlcXVlc3QuZ2V0RmV0Y2hQYXJhbXMoKS50aGVuKGZ1bmN0aW9uIChmZXRjaFBhcmFtcykgewogICAgICAgICAgICAgICAgdmFyIF9zZWFyY2hSZXF1ZXN0JGZldGNoUCA9IHNlYXJjaFJlcXVlc3QuZmV0Y2hQYXJhbXMgPSBmZXRjaFBhcmFtcywKICAgICAgICAgICAgICAgICAgICBpbmRleCA9IF9zZWFyY2hSZXF1ZXN0JGZldGNoUC5pbmRleCwKICAgICAgICAgICAgICAgICAgICBib2R5ID0gX3NlYXJjaFJlcXVlc3QkZmV0Y2hQLmJvZHk7CgogICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBlcy5zZWFyY2goX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleC50aXRsZSB8fCBpbmRleCwKICAgICAgICAgICAgICAgICAgYm9keTogYm9keQogICAgICAgICAgICAgICAgfSwgc2VhcmNoUGFyYW1zKSk7CiAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgcHJvbWlzZS5hYm9ydCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHNlYXJjaFJlcXVlc3QuaGFuZGxlRmFpbHVyZShlcnJvcik7CiAgICAgICAgICAgICAgICBmYWlsZWRTZWFyY2hSZXF1ZXN0cy5wdXNoKHNlYXJjaFJlcXVlc3QpOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gX3JlZjQucmVzcG9uc2U7CiAgICAgICAgICAgICAgICAvLyBDb3B5aW5nIHRoZSBfbXNlYXJjaCBiZWhhdmlvciB3aGVyZSB0aGUgZXJyb3JzIGZvciBpbmRpdmlkdWFsIHJlcXVlc3RzIGFyZSByZXR1cm5lZAogICAgICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiB0aHJvd24KICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlKTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiAoX3g1KSB7CiAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCkpOwogIHJldHVybiB7CiAgICBzZWFyY2hpbmc6IFByb21pc2UuYWxsKHByb21pc2VzKSwKICAgIGFib3J0OiBmdW5jdGlvbiBhYm9ydCgpIHsKICAgICAgcmV0dXJuIGFib3J0Q29udHJvbGxlci5hYm9ydCgpOwogICAgfSwKICAgIGZhaWxlZFNlYXJjaFJlcXVlc3RzOiBmYWlsZWRTZWFyY2hSZXF1ZXN0cwogIH07Cn0KCigwLCBfc2VhcmNoX3N0cmF0ZWd5X3JlZ2lzdHJ5LmFkZFNlYXJjaFN0cmF0ZWd5KShkZWZhdWx0U2VhcmNoU3RyYXRlZ3kpOw=="},null]}