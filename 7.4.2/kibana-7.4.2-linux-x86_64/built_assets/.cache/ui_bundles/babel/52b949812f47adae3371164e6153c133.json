{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/metrics/public/components/vis_types/timeseries/vis.js","dependencies":[{"path":"src/legacy/core_plugins/metrics/public/components/vis_types/timeseries/vis.js","mtime":1572296411100},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRpbWVzZXJpZXNWaXN1YWxpemF0aW9uID0gdm9pZCAwOwoKdmFyIF9wcm9wVHlwZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInByb3AtdHlwZXMiKSk7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX25vdGlmeSA9IHJlcXVpcmUoInVpL25vdGlmeSIpOwoKdmFyIF90aWNrX2Zvcm1hdHRlciA9IHJlcXVpcmUoIi4uLy4uL2xpYi90aWNrX2Zvcm1hdHRlciIpOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfdGltZXNlcmllcyA9IHJlcXVpcmUoIi4uLy4uLy4uL3Zpc3VhbGl6YXRpb25zL2NvbXBvbmVudHMvdGltZXNlcmllcyIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi9raWJhbmFfcmVhY3QvcHVibGljIik7Cgp2YXIgX3JlcGxhY2VfdmFycyA9IHJlcXVpcmUoIi4uLy4uL2xpYi9yZXBsYWNlX3ZhcnMiKTsKCnZhciBfZ2V0X2F4aXNfbGFiZWxfc3RyaW5nID0gcmVxdWlyZSgiLi4vLi4vbGliL2dldF9heGlzX2xhYmVsX3N0cmluZyIpOwoKdmFyIF9nZXRfaW50ZXJ2YWwgPSByZXF1aXJlKCIuLi8uLi9saWIvZ2V0X2ludGVydmFsIik7Cgp2YXIgX2NyZWF0ZV94YXhpc19mb3JtYXR0ZXIgPSByZXF1aXJlKCIuLi8uLi9saWIvY3JlYXRlX3hheGlzX2Zvcm1hdHRlciIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgpmdW5jdGlvbiBoYXNTZXBhcmF0ZUF4aXMocm93KSB7CiAgcmV0dXJuIHJvdy5zZXBhcmF0ZV9heGlzOwp9Cgp2YXIgVGltZXNlcmllc1Zpc3VhbGl6YXRpb24gPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFRpbWVzZXJpZXNWaXN1YWxpemF0aW9uLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gVGltZXNlcmllc1Zpc3VhbGl6YXRpb24oKSB7CiAgICB2YXIgX2dldFByb3RvdHlwZU9mMjsKCiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRpbWVzZXJpZXNWaXN1YWxpemF0aW9uKTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfZ2V0UHJvdG90eXBlT2YyID0gX2dldFByb3RvdHlwZU9mKFRpbWVzZXJpZXNWaXN1YWxpemF0aW9uKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0SW50ZXJ2YWwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgdmlzRGF0YSA9IF90aGlzJHByb3BzLnZpc0RhdGEsCiAgICAgICAgICBtb2RlbCA9IF90aGlzJHByb3BzLm1vZGVsOwogICAgICByZXR1cm4gKDAsIF9nZXRfaW50ZXJ2YWwuZ2V0SW50ZXJ2YWwpKHZpc0RhdGEsIG1vZGVsKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInhheGlzRm9ybWF0dGVyIiwgZnVuY3Rpb24gKHZhbCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMkdmlzRGF0YSA9IF90aGlzLnByb3BzLnZpc0RhdGEsCiAgICAgICAgICBzY2FsZWREYXRhRm9ybWF0ID0gX3RoaXMkcHJvcHMkdmlzRGF0YS5zY2FsZWREYXRhRm9ybWF0LAogICAgICAgICAgZGF0ZUZvcm1hdCA9IF90aGlzJHByb3BzJHZpc0RhdGEuZGF0ZUZvcm1hdDsKICAgICAgaWYgKCFzY2FsZWREYXRhRm9ybWF0IHx8ICFkYXRlRm9ybWF0KSByZXR1cm4gdmFsOwogICAgICB2YXIgZm9ybWF0dGVyID0gKDAsIF9jcmVhdGVfeGF4aXNfZm9ybWF0dGVyLmNyZWF0ZVhheGlzRm9ybWF0dGVyKShfdGhpcy5nZXRJbnRlcnZhbCgpLCBzY2FsZWREYXRhRm9ybWF0LCBkYXRlRm9ybWF0KTsKICAgICAgcmV0dXJuIGZvcm1hdHRlcih2YWwpOwogICAgfSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFRpbWVzZXJpZXNWaXN1YWxpemF0aW9uLCBbewogICAga2V5OiAiY29tcG9uZW50RGlkVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7CiAgICAgIGlmICh0aGlzLnNob3dUb2FzdE5vdGlmaWNhdGlvbiAmJiB0aGlzLm5vdGlmaWNhdGlvblJlYXNvbiAhPT0gdGhpcy5zaG93VG9hc3ROb3RpZmljYXRpb24ucmVhc29uKSB7CiAgICAgICAgaWYgKHRoaXMubm90aWZpY2F0aW9uKSB7CiAgICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5yZW1vdmUodGhpcy5ub3RpZmljYXRpb24pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25SZWFzb24gPSB0aGlzLnNob3dUb2FzdE5vdGlmaWNhdGlvbi5yZWFzb247CiAgICAgICAgdGhpcy5ub3RpZmljYXRpb24gPSBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoewogICAgICAgICAgdGl0bGU6IHRoaXMuc2hvd1RvYXN0Tm90aWZpY2F0aW9uLnRpdGxlLAogICAgICAgICAgdGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcHVibGljLk1hcmtkb3duU2ltcGxlLCBudWxsLCB0aGlzLnNob3dUb2FzdE5vdGlmaWNhdGlvbi5yZWFzb24pCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5zaG93VG9hc3ROb3RpZmljYXRpb24gJiYgdGhpcy5ub3RpZmljYXRpb24pIHsKICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5yZW1vdmUodGhpcy5ub3RpZmljYXRpb24pOwoKICAgICAgICB0aGlzLm5vdGlmaWNhdGlvblJlYXNvbiA9IG51bGw7CiAgICAgICAgdGhpcy5ub3RpZmljYXRpb24gPSBudWxsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsCiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBfdGhpcyRwcm9wczIuYmFja2dyb3VuZENvbG9yLAogICAgICAgICAgbW9kZWwgPSBfdGhpcyRwcm9wczIubW9kZWwsCiAgICAgICAgICB2aXNEYXRhID0gX3RoaXMkcHJvcHMyLnZpc0RhdGE7CgogICAgICB2YXIgc2VyaWVzID0gX2xvZGFzaC5kZWZhdWx0LmdldCh2aXNEYXRhLCAiIi5jb25jYXQobW9kZWwuaWQsICIuc2VyaWVzIiksIFtdKTsKCiAgICAgIHZhciBhbm5vdGF0aW9uczsKICAgICAgdGhpcy5zaG93VG9hc3ROb3RpZmljYXRpb24gPSBudWxsOwoKICAgICAgaWYgKG1vZGVsLmFubm90YXRpb25zICYmIEFycmF5LmlzQXJyYXkobW9kZWwuYW5ub3RhdGlvbnMpKSB7CiAgICAgICAgYW5ub3RhdGlvbnMgPSBtb2RlbC5hbm5vdGF0aW9ucy5tYXAoZnVuY3Rpb24gKGFubm90YXRpb24pIHsKICAgICAgICAgIHZhciBkYXRhID0gX2xvZGFzaC5kZWZhdWx0LmdldCh2aXNEYXRhLCAiIi5jb25jYXQobW9kZWwuaWQsICIuYW5ub3RhdGlvbnMuIikuY29uY2F0KGFubm90YXRpb24uaWQpLCBbXSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBbaXRlbS5rZXksIGl0ZW0uZG9jc107CiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogYW5ub3RhdGlvbi5pZCwKICAgICAgICAgICAgY29sb3I6IGFubm90YXRpb24uY29sb3IsCiAgICAgICAgICAgIGljb246IGFubm90YXRpb24uaWNvbiwKICAgICAgICAgICAgc2VyaWVzOiBkYXRhLm1hcChmdW5jdGlvbiAocykgewogICAgICAgICAgICAgIHJldHVybiBbc1swXSwgc1sxXS5tYXAoZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgICAgdmFyIHZhcnMgPSAoMCwgX3JlcGxhY2VfdmFycy5yZXBsYWNlVmFycykoYW5ub3RhdGlvbi50ZW1wbGF0ZSwgbnVsbCwgZG9jKTsKCiAgICAgICAgICAgICAgICBpZiAodmFycyBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5zaG93VG9hc3ROb3RpZmljYXRpb24gPSB2YXJzLmVycm9yLmNhdXNlZF9ieTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFubm90YXRpb24udGVtcGxhdGU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHZhcnM7CiAgICAgICAgICAgICAgfSldOwogICAgICAgICAgICB9KQogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdmFyIHNlcmllc01vZGVsID0gbW9kZWwuc2VyaWVzLm1hcChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQuY2xvbmVEZWVwKHMpOwogICAgICB9KTsKICAgICAgdmFyIGZpcnN0U2VyaWVzID0gc2VyaWVzTW9kZWwuZmluZChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBzLmZvcm1hdHRlciAmJiAhcy5zZXBhcmF0ZV9heGlzOwogICAgICB9KTsKICAgICAgdmFyIGZvcm1hdHRlciA9ICgwLCBfdGlja19mb3JtYXR0ZXIudGlja0Zvcm1hdHRlcikoX2xvZGFzaC5kZWZhdWx0LmdldChmaXJzdFNlcmllcywgJ2Zvcm1hdHRlcicpLCBfbG9kYXNoLmRlZmF1bHQuZ2V0KGZpcnN0U2VyaWVzLCAndmFsdWVfdGVtcGxhdGUnKSwgdGhpcy5wcm9wcy5nZXRDb25maWcpOwogICAgICB2YXIgbWFpbkF4aXMgPSB7CiAgICAgICAgcG9zaXRpb246IG1vZGVsLmF4aXNfcG9zaXRpb24sCiAgICAgICAgdGlja0Zvcm1hdHRlcjogZm9ybWF0dGVyLAogICAgICAgIGF4aXNGb3JtYXR0ZXI6IF9sb2Rhc2guZGVmYXVsdC5nZXQoZmlyc3RTZXJpZXMsICdmb3JtYXR0ZXInLCAnbnVtYmVyJyksCiAgICAgICAgYXhpc0Zvcm1hdHRlclRlbXBsYXRlOiBfbG9kYXNoLmRlZmF1bHQuZ2V0KGZpcnN0U2VyaWVzLCAndmFsdWVfdGVtcGxhdGUnKQogICAgICB9OwogICAgICBpZiAobW9kZWwuYXhpc19taW4pIG1haW5BeGlzLm1pbiA9IG1vZGVsLmF4aXNfbWluOwogICAgICBpZiAobW9kZWwuYXhpc19tYXgpIG1haW5BeGlzLm1heCA9IG1vZGVsLmF4aXNfbWF4OwoKICAgICAgaWYgKG1vZGVsLmF4aXNfc2NhbGUgPT09ICdsb2cnKSB7CiAgICAgICAgbWFpbkF4aXMubW9kZSA9ICdsb2cnOwoKICAgICAgICBtYWluQXhpcy50cmFuc2Zvcm0gPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIHJldHVybiB2YWx1ZSA+IDAgPyBNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMTAgOiBudWxsOwogICAgICAgIH07CgogICAgICAgIG1haW5BeGlzLmludmVyc2VUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIHJldHVybiBNYXRoLnBvdygxMCwgdmFsdWUpOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciB5YXhlcyA9IFttYWluQXhpc107CiAgICAgIHNlcmllc01vZGVsLmZvckVhY2goZnVuY3Rpb24gKHMpIHsKICAgICAgICBzZXJpZXMuZmlsdGVyKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnN0YXJ0c1dpdGgoci5pZCwgcy5pZCk7CiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAocikgewogICAgICAgICAgcmV0dXJuIHIudGlja0Zvcm1hdHRlciA9ICgwLCBfdGlja19mb3JtYXR0ZXIudGlja0Zvcm1hdHRlcikocy5mb3JtYXR0ZXIsIHMudmFsdWVfdGVtcGxhdGUsIF90aGlzMi5wcm9wcy5nZXRDb25maWcpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAocy5oaWRlX2luX2xlZ2VuZCkgewogICAgICAgICAgc2VyaWVzLmZpbHRlcihmdW5jdGlvbiAocikgewogICAgICAgICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnN0YXJ0c1dpdGgoci5pZCwgcy5pZCk7CiAgICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgIHJldHVybiBkZWxldGUgci5sYWJlbDsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKHMuc3RhY2tlZCAhPT0gJ25vbmUnKSB7CiAgICAgICAgICBzZXJpZXMuZmlsdGVyKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQuc3RhcnRzV2l0aChyLmlkLCBzLmlkKTsKICAgICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgICByb3cuZGF0YSA9IHJvdy5kYXRhLm1hcChmdW5jdGlvbiAocG9pbnQpIHsKICAgICAgICAgICAgICBpZiAoIXBvaW50WzFdKSByZXR1cm4gW3BvaW50WzBdLCAwXTsKICAgICAgICAgICAgICByZXR1cm4gcG9pbnQ7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAocy5zdGFja2VkID09PSAncGVyY2VudCcpIHsKICAgICAgICAgIHMuc2VwYXJhdGVfYXhpcyA9IHRydWU7CiAgICAgICAgICBzLmF4aXNGb3JtYXR0ZXIgPSAncGVyY2VudCc7CiAgICAgICAgICBzLmF4aXNfbWluID0gMDsKICAgICAgICAgIHMuYXhpc19tYXggPSAxOwogICAgICAgICAgcy5heGlzX3Bvc2l0aW9uID0gbW9kZWwuYXhpc19wb3NpdGlvbjsKICAgICAgICAgIHZhciBzZXJpZXNEYXRhID0gc2VyaWVzLmZpbHRlcihmdW5jdGlvbiAocikgewogICAgICAgICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnN0YXJ0c1dpdGgoci5pZCwgcy5pZCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBmaXJzdCA9IHNlcmllc0RhdGFbMF07CgogICAgICAgICAgaWYgKGZpcnN0KSB7CiAgICAgICAgICAgIGZpcnN0LmRhdGEuZm9yRWFjaChmdW5jdGlvbiAocm93LCBpbmRleCkgewogICAgICAgICAgICAgIHZhciByb3dTdW0gPSBzZXJpZXNEYXRhLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBpdGVtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5kYXRhW2luZGV4XVsxXSArIGFjYzsKICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgICBzZXJpZXNEYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGl0ZW0uZGF0YVtpbmRleF1bMV0gPSByb3dTdW0gJiYgaXRlbS5kYXRhW2luZGV4XVsxXSAvIHJvd1N1bSB8fCAwOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICB2YXIgaW50ZXJ2YWwgPSB0aGlzLmdldEludGVydmFsKCk7CiAgICAgIHZhciBheGlzQ291bnQgPSAxOwoKICAgICAgaWYgKHNlcmllc01vZGVsLnNvbWUoaGFzU2VwYXJhdGVBeGlzKSkgewogICAgICAgIHNlcmllc01vZGVsLmZvckVhY2goZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgaWYgKHJvdy5zZXBhcmF0ZV9heGlzKSB7CiAgICAgICAgICAgIGF4aXNDb3VudCsrOwoKICAgICAgICAgICAgdmFyIF9mb3JtYXR0ZXIgPSAoMCwgX3RpY2tfZm9ybWF0dGVyLnRpY2tGb3JtYXR0ZXIpKHJvdy5mb3JtYXR0ZXIsIHJvdy52YWx1ZV90ZW1wbGF0ZSwgX3RoaXMyLnByb3BzLmdldENvbmZpZyk7CgogICAgICAgICAgICB2YXIgeWF4aXMgPSB7CiAgICAgICAgICAgICAgYWxpZ25UaWNrc1dpdGhBeGlzOiAxLAogICAgICAgICAgICAgIHBvc2l0aW9uOiByb3cuYXhpc19wb3NpdGlvbiwKICAgICAgICAgICAgICB0aWNrRm9ybWF0dGVyOiBfZm9ybWF0dGVyLAogICAgICAgICAgICAgIGF4aXNGb3JtYXR0ZXI6IHJvdy5heGlzX2Zvcm1hdHRlciwKICAgICAgICAgICAgICBheGlzRm9ybWF0dGVyVGVtcGxhdGU6IHJvdy52YWx1ZV90ZW1wbGF0ZQogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAocm93LmF4aXNfbWluICE9IG51bGwpIHlheGlzLm1pbiA9IHJvdy5heGlzX21pbjsKICAgICAgICAgICAgaWYgKHJvdy5heGlzX21heCAhPSBudWxsKSB5YXhpcy5tYXggPSByb3cuYXhpc19tYXg7CiAgICAgICAgICAgIHlheGVzLnB1c2goeWF4aXMpOyAvLyBBc3NpZ24gYXhpcyBhbmQgZm9ybWF0dGVyIHRvIGVhY2ggc2VyaWVzCgogICAgICAgICAgICBzZXJpZXMuZmlsdGVyKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zdGFydHNXaXRoKHIuaWQsIHJvdy5pZCk7CiAgICAgICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICByLnlheGlzID0gYXhpc0NvdW50OwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdmFyIHBhbmVsQmFja2dyb3VuZENvbG9yID0gbW9kZWwuYmFja2dyb3VuZF9jb2xvciB8fCBiYWNrZ3JvdW5kQ29sb3I7CiAgICAgIHZhciBzdHlsZSA9IHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHBhbmVsQmFja2dyb3VuZENvbG9yCiAgICAgIH07CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgZGF0ZUZvcm1hdDogdGhpcy5wcm9wcy5kYXRlRm9ybWF0LAogICAgICAgIGNyb3NzaGFpcjogdHJ1ZSwKICAgICAgICB0aWNrRm9ybWF0dGVyOiBmb3JtYXR0ZXIsCiAgICAgICAgbGVnZW5kUG9zaXRpb246IG1vZGVsLmxlZ2VuZF9wb3NpdGlvbiB8fCAncmlnaHQnLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogcGFuZWxCYWNrZ3JvdW5kQ29sb3IsCiAgICAgICAgc2VyaWVzOiBzZXJpZXMsCiAgICAgICAgYW5ub3RhdGlvbnM6IGFubm90YXRpb25zLAogICAgICAgIHlheGVzOiB5YXhlcywKICAgICAgICBzaG93R3JpZDogQm9vbGVhbihtb2RlbC5zaG93X2dyaWQpLAogICAgICAgIGxlZ2VuZDogQm9vbGVhbihtb2RlbC5zaG93X2xlZ2VuZCksCiAgICAgICAgeEF4aXNGb3JtYXR0ZXI6IHRoaXMueGF4aXNGb3JtYXR0ZXIsCiAgICAgICAgb25CcnVzaDogZnVuY3Rpb24gb25CcnVzaChyYW5nZXMpIHsKICAgICAgICAgIGlmIChfdGhpczIucHJvcHMub25CcnVzaCkgX3RoaXMyLnByb3BzLm9uQnJ1c2gocmFuZ2VzKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAoaW50ZXJ2YWwpIHsKICAgICAgICBwYXJhbXMueGF4aXNMYWJlbCA9ICgwLCBfZ2V0X2F4aXNfbGFiZWxfc3RyaW5nLmdldEF4aXNMYWJlbFN0cmluZykoaW50ZXJ2YWwpOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogInR2YlZpcyIsCiAgICAgICAgc3R5bGU6IHN0eWxlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3RpbWVzZXJpZXMuVGltZXNlcmllcywgcGFyYW1zKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVGltZXNlcmllc1Zpc3VhbGl6YXRpb247Cn0oX3JlYWN0LkNvbXBvbmVudCk7CgpleHBvcnRzLlRpbWVzZXJpZXNWaXN1YWxpemF0aW9uID0gVGltZXNlcmllc1Zpc3VhbGl6YXRpb247ClRpbWVzZXJpZXNWaXN1YWxpemF0aW9uLnByb3BUeXBlcyA9IHsKICBiYWNrZ3JvdW5kQ29sb3I6IF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsCiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLAogIG1vZGVsOiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LAogIG9uQnJ1c2g6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLAogIG9uQ2hhbmdlOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYywKICB2aXNEYXRhOiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LAogIGRhdGVGb3JtYXQ6IF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsCiAgZ2V0Q29uZmlnOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYwp9Ow=="},null]}