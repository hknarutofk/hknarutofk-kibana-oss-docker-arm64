{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_table/public/agg_table/agg_table.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_table/public/agg_table/agg_table.js","mtime":1572296411604},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1572297165884},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1572297178034},{"path":"node_modules/babel-loader/lib/index.js","mtime":1572297165764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLktibkFnZ1RhYmxlID0gS2JuQWdnVGFibGU7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9hZ2dfdGFibGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vYWdnX3RhYmxlLmh0bWwiKSk7Cgp2YXIgX3V0aWxpdGllcyA9IHJlcXVpcmUoInVpL3Zpc3VhbGl6ZS9sb2FkZXIvcGlwZWxpbmVfaGVscGVycy91dGlsaXRpZXMiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQoKZnVuY3Rpb24gS2JuQWdnVGFibGUoY29uZmlnLCBSZWN1cnNpb25IZWxwZXIpIHsKICByZXR1cm4gewogICAgcmVzdHJpY3Q6ICdFJywKICAgIHRlbXBsYXRlOiBfYWdnX3RhYmxlLmRlZmF1bHQsCiAgICBzY29wZTogewogICAgICB0YWJsZTogJz0nLAogICAgICBkaW1lbnNpb25zOiAnPScsCiAgICAgIHBlclBhZ2U6ICc9PycsCiAgICAgIHNvcnQ6ICc9PycsCiAgICAgIGV4cG9ydFRpdGxlOiAnPT8nLAogICAgICBzaG93VG90YWw6ICc9JywKICAgICAgdG90YWxGdW5jOiAnPScsCiAgICAgIHBlcmNlbnRhZ2VDb2w6ICc9JywKICAgICAgZmlsdGVyOiAnPScKICAgIH0sCiAgICBjb250cm9sbGVyQXM6ICdhZ2dUYWJsZScsCiAgICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKCRlbCkgewogICAgICAvLyBVc2UgdGhlIGNvbXBpbGUgZnVuY3Rpb24gZnJvbSB0aGUgUmVjdXJzaW9uSGVscGVyLAogICAgICAvLyBBbmQgcmV0dXJuIHRoZSBsaW5raW5nIGZ1bmN0aW9uKHMpIHdoaWNoIGl0IHJldHVybnMKICAgICAgcmV0dXJuIFJlY3Vyc2lvbkhlbHBlci5jb21waWxlKCRlbCk7CiAgICB9LAogICAgY29udHJvbGxlcjogZnVuY3Rpb24gY29udHJvbGxlcigkc2NvcGUpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBzZWxmLl9zYXZlQXMgPSByZXF1aXJlKCdAZWxhc3RpYy9maWxlc2F2ZXInKS5zYXZlQXM7CiAgICAgIHNlbGYuY3N2ID0gewogICAgICAgIHNlcGFyYXRvcjogY29uZmlnLmdldCgnY3N2OnNlcGFyYXRvcicpLAogICAgICAgIHF1b3RlVmFsdWVzOiBjb25maWcuZ2V0KCdjc3Y6cXVvdGVWYWx1ZXMnKQogICAgICB9OwoKICAgICAgc2VsZi5leHBvcnRBc0NzdiA9IGZ1bmN0aW9uIChmb3JtYXR0ZWQpIHsKICAgICAgICB2YXIgY3N2ID0gbmV3IEJsb2IoW3NlbGYudG9Dc3YoZm9ybWF0dGVkKV0sIHsKICAgICAgICAgIHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnCiAgICAgICAgfSk7CgogICAgICAgIHNlbGYuX3NhdmVBcyhjc3YsIHNlbGYuY3N2LmZpbGVuYW1lKTsKICAgICAgfTsKCiAgICAgIHNlbGYudG9Dc3YgPSBmdW5jdGlvbiAoZm9ybWF0dGVkKSB7CiAgICAgICAgdmFyIHJvd3MgPSAkc2NvcGUudGFibGUucm93czsKICAgICAgICB2YXIgY29sdW1ucyA9IGZvcm1hdHRlZCA/ICRzY29wZS5mb3JtYXR0ZWRDb2x1bW5zIDogJHNjb3BlLnRhYmxlLmNvbHVtbnM7CiAgICAgICAgdmFyIG5vbkFscGhhTnVtUkUgPSAvW15hLXpBLVowLTldLzsKICAgICAgICB2YXIgYWxsRG91YmxlUXVvdGVSRSA9IC8iL2c7CgogICAgICAgIGZ1bmN0aW9uIGVzY2FwZSh2YWwpIHsKICAgICAgICAgIGlmICghZm9ybWF0dGVkICYmIF9sb2Rhc2guZGVmYXVsdC5pc09iamVjdCh2YWwpKSB2YWwgPSB2YWwudmFsdWVPZigpOwogICAgICAgICAgdmFsID0gU3RyaW5nKHZhbCk7CgogICAgICAgICAgaWYgKHNlbGYuY3N2LnF1b3RlVmFsdWVzICYmIG5vbkFscGhhTnVtUkUudGVzdCh2YWwpKSB7CiAgICAgICAgICAgIHZhbCA9ICciJyArIHZhbC5yZXBsYWNlKGFsbERvdWJsZVF1b3RlUkUsICciIicpICsgJyInOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgICAgfSAvLyBlc2NhcGUgZWFjaCBjZWxsIGluIGVhY2ggcm93CgoKICAgICAgICB2YXIgY3N2Um93cyA9IHJvd3MubWFwKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhyb3cpLm1hcChmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICAgICAgICAgIGsgPSBfcmVmMlswXSwKICAgICAgICAgICAgICAgIHYgPSBfcmVmMlsxXTsKCiAgICAgICAgICAgIHJldHVybiBlc2NhcGUoZm9ybWF0dGVkID8gY29sdW1ucy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGMuaWQgPT09IGs7CiAgICAgICAgICAgIH0pLmZvcm1hdHRlci5jb252ZXJ0KHYpIDogdik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsgLy8gYWRkIHRoZSBjb2x1bW5zIHRvIHRoZSByb3dzCgogICAgICAgIGNzdlJvd3MudW5zaGlmdChjb2x1bW5zLm1hcChmdW5jdGlvbiAoY29sKSB7CiAgICAgICAgICByZXR1cm4gZXNjYXBlKGZvcm1hdHRlZCA/IGNvbC50aXRsZSA6IGNvbC5uYW1lKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGNzdlJvd3MubWFwKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICAgIHJldHVybiByb3cuam9pbihzZWxmLmNzdi5zZXBhcmF0b3IpICsgJ1xyXG4nOwogICAgICAgIH0pLmpvaW4oJycpOwogICAgICB9OwoKICAgICAgJHNjb3BlLiR3YXRjaE11bHRpKFsndGFibGUnLCAnZXhwb3J0VGl0bGUnLCAncGVyY2VudGFnZUNvbCcsICd0b3RhbEZ1bmMnLCAnPXNjb3BlLmRpbWVuc2lvbnMnXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0YWJsZSA9ICRzY29wZS50YWJsZSwKICAgICAgICAgICAgZXhwb3J0VGl0bGUgPSAkc2NvcGUuZXhwb3J0VGl0bGUsCiAgICAgICAgICAgIHBlcmNlbnRhZ2VDb2wgPSAkc2NvcGUucGVyY2VudGFnZUNvbDsKICAgICAgICB2YXIgc2hvd1BlcmNlbnRhZ2UgPSBwZXJjZW50YWdlQ29sICE9PSAnJzsKCiAgICAgICAgaWYgKCF0YWJsZSkgewogICAgICAgICAgJHNjb3BlLnJvd3MgPSBudWxsOwogICAgICAgICAgJHNjb3BlLmZvcm1hdHRlZENvbHVtbnMgPSBudWxsOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5jc3YuZmlsZW5hbWUgPSAoZXhwb3J0VGl0bGUgfHwgdGFibGUudGl0bGUgfHwgJ3RhYmxlJykgKyAnLmNzdic7CiAgICAgICAgJHNjb3BlLnJvd3MgPSB0YWJsZS5yb3dzOwogICAgICAgICRzY29wZS5mb3JtYXR0ZWRDb2x1bW5zID0gW107CiAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUuZGltZW5zaW9ucyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjsKICAgICAgICB2YXIgXyRzY29wZSRkaW1lbnNpb25zID0gJHNjb3BlLmRpbWVuc2lvbnMsCiAgICAgICAgICAgIGJ1Y2tldHMgPSBfJHNjb3BlJGRpbWVuc2lvbnMuYnVja2V0cywKICAgICAgICAgICAgbWV0cmljcyA9IF8kc2NvcGUkZGltZW5zaW9ucy5tZXRyaWNzOwogICAgICAgICRzY29wZS5mb3JtYXR0ZWRDb2x1bW5zID0gdGFibGUuY29sdW1ucy5tYXAoZnVuY3Rpb24gKGNvbCwgaSkgewogICAgICAgICAgdmFyIGlzQnVja2V0ID0gYnVja2V0cy5maW5kKGZ1bmN0aW9uIChidWNrZXQpIHsKICAgICAgICAgICAgcmV0dXJuIGJ1Y2tldC5hY2Nlc3NvciA9PT0gaTsKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGlzQnVja2V0IHx8IG1ldHJpY3MuZmluZChmdW5jdGlvbiAobWV0cmljKSB7CiAgICAgICAgICAgIHJldHVybiBtZXRyaWMuYWNjZXNzb3IgPT09IGk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICghZGltZW5zaW9uKSByZXR1cm47CiAgICAgICAgICB2YXIgZm9ybWF0dGVyID0gKDAsIF91dGlsaXRpZXMuZ2V0Rm9ybWF0KShkaW1lbnNpb24uZm9ybWF0KTsKICAgICAgICAgIHZhciBmb3JtYXR0ZWRDb2x1bW4gPSB7CiAgICAgICAgICAgIGlkOiBjb2wuaWQsCiAgICAgICAgICAgIHRpdGxlOiBjb2wubmFtZSwKICAgICAgICAgICAgZm9ybWF0dGVyOiBmb3JtYXR0ZXIsCiAgICAgICAgICAgIGZpbHRlcmFibGU6ICEhaXNCdWNrZXQKICAgICAgICAgIH07CiAgICAgICAgICB2YXIgbGFzdCA9IGkgPT09IHRhYmxlLmNvbHVtbnMubGVuZ3RoIC0gMTsKCiAgICAgICAgICBpZiAobGFzdCB8fCAhaXNCdWNrZXQpIHsKICAgICAgICAgICAgZm9ybWF0dGVkQ29sdW1uLmNsYXNzID0gJ3Zpc3VhbGl6ZS10YWJsZS1yaWdodCc7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGlzRGF0ZSA9IF9sb2Rhc2guZGVmYXVsdC5nZXQoZGltZW5zaW9uLCAnZm9ybWF0LmlkJykgPT09ICdkYXRlJyB8fCBfbG9kYXNoLmRlZmF1bHQuZ2V0KGRpbWVuc2lvbiwgJ2Zvcm1hdC5wYXJhbXMuaWQnKSA9PT0gJ2RhdGUnOwogICAgICAgICAgdmFyIGlzTnVtZXJpYyA9IF9sb2Rhc2guZGVmYXVsdC5nZXQoZGltZW5zaW9uLCAnZm9ybWF0LmlkJykgPT09ICdudW1iZXInIHx8IF9sb2Rhc2guZGVmYXVsdC5nZXQoZGltZW5zaW9uLCAnZm9ybWF0LnBhcmFtcy5pZCcpID09PSAnbnVtYmVyJzsKICAgICAgICAgIHZhciB0b3RhbEZ1bmMgPSAkc2NvcGUudG90YWxGdW5jOwoKICAgICAgICAgIGlmICh0eXBlb2YgdG90YWxGdW5jID09PSAndW5kZWZpbmVkJyAmJiBzaG93UGVyY2VudGFnZSkgewogICAgICAgICAgICB0b3RhbEZ1bmMgPSAnc3VtJzsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaXNOdW1lcmljIHx8IGlzRGF0ZSB8fCB0b3RhbEZ1bmMgPT09ICdjb3VudCcpIHsKICAgICAgICAgICAgdmFyIHN1bSA9IGZ1bmN0aW9uIHN1bSh0YWJsZVJvd3MpIHsKICAgICAgICAgICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnJlZHVjZSh0YWJsZVJvd3MsIGZ1bmN0aW9uIChwcmV2LCBjdXJyKSB7CiAgICAgICAgICAgICAgICAvLyBzb21lIG1ldHJpY3MgcmV0dXJuIHVuZGVmaW5lZCBmb3Igc29tZSBvZiB0aGUgdmFsdWVzCiAgICAgICAgICAgICAgICAvLyBkZXJpdmF0aXZlIGlzIGFuIGV4YW1wbGUgb2YgdGhpcyBhcyBpdCByZXR1cm5zIHVuZGVmaW5lZCBpbiB0aGUgZmlyc3Qgcm93CiAgICAgICAgICAgICAgICBpZiAoY3Vycltjb2wuaWRdID09PSB1bmRlZmluZWQpIHJldHVybiBwcmV2OwogICAgICAgICAgICAgICAgcmV0dXJuIHByZXYgKyBjdXJyW2NvbC5pZF07CiAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBmb3JtYXR0ZWRDb2x1bW4uc3VtVG90YWwgPSBzdW0odGFibGUucm93cyk7CgogICAgICAgICAgICBzd2l0Y2ggKHRvdGFsRnVuYykgewogICAgICAgICAgICAgIGNhc2UgJ3N1bSc6CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGlmICghaXNEYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsID0gZm9ybWF0dGVkQ29sdW1uLnN1bVRvdGFsOwogICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZENvbHVtbi5mb3JtYXR0ZWRUb3RhbCA9IGZvcm1hdHRlci5jb252ZXJ0KHRvdGFsKTsKICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRDb2x1bW4udG90YWwgPSBmb3JtYXR0ZWRDb2x1bW4uc3VtVG90YWw7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlICdhdmcnOgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBpZiAoIWlzRGF0ZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBfdG90YWwgPSBzdW0odGFibGUucm93cykgLyB0YWJsZS5yb3dzLmxlbmd0aDsKCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQ29sdW1uLmZvcm1hdHRlZFRvdGFsID0gZm9ybWF0dGVyLmNvbnZlcnQoX3RvdGFsKTsKICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRDb2x1bW4udG90YWwgPSBfdG90YWw7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlICdtaW4nOgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICB2YXIgX3RvdGFsMiA9IF9sb2Rhc2guZGVmYXVsdC5jaGFpbih0YWJsZS5yb3dzKS5tYXAoY29sLmlkKS5taW4oKS52YWx1ZSgpOwoKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQ29sdW1uLmZvcm1hdHRlZFRvdGFsID0gZm9ybWF0dGVyLmNvbnZlcnQoX3RvdGFsMik7CiAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZENvbHVtbi50b3RhbCA9IF90b3RhbDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlICdtYXgnOgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICB2YXIgX3RvdGFsMyA9IF9sb2Rhc2guZGVmYXVsdC5jaGFpbih0YWJsZS5yb3dzKS5tYXAoY29sLmlkKS5tYXgoKS52YWx1ZSgpOwoKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQ29sdW1uLmZvcm1hdHRlZFRvdGFsID0gZm9ybWF0dGVyLmNvbnZlcnQoX3RvdGFsMyk7CiAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZENvbHVtbi50b3RhbCA9IF90b3RhbDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlICdjb3VudCc6CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHZhciBfdG90YWw0ID0gdGFibGUucm93cy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZENvbHVtbi5mb3JtYXR0ZWRUb3RhbCA9IF90b3RhbDQ7CiAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZENvbHVtbi50b3RhbCA9IF90b3RhbDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkQ29sdW1uOwogICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoY29sdW1uKSB7CiAgICAgICAgICByZXR1cm4gY29sdW1uOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoc2hvd1BlcmNlbnRhZ2UpIHsKICAgICAgICAgIHZhciBpbnNlcnRBdEluZGV4ID0gX2xvZGFzaC5kZWZhdWx0LmZpbmRJbmRleCgkc2NvcGUuZm9ybWF0dGVkQ29sdW1ucywgewogICAgICAgICAgICB0aXRsZTogcGVyY2VudGFnZUNvbAogICAgICAgICAgfSk7IC8vIGNvbHVtbiB0byBzaG93IHBlcmNlbnRhZ2UgZm9yIHdhcyByZW1vdmVkCgoKICAgICAgICAgIGlmIChpbnNlcnRBdEluZGV4IDwgMCkgcmV0dXJuOwoKICAgICAgICAgIHZhciBfYWRkUGVyY2VudGFnZUNvbCA9IGFkZFBlcmNlbnRhZ2VDb2woJHNjb3BlLmZvcm1hdHRlZENvbHVtbnMsIHBlcmNlbnRhZ2VDb2wsIHRhYmxlLnJvd3MsIGluc2VydEF0SW5kZXgpLAogICAgICAgICAgICAgIGNvbHMgPSBfYWRkUGVyY2VudGFnZUNvbC5jb2xzLAogICAgICAgICAgICAgIHJvd3MgPSBfYWRkUGVyY2VudGFnZUNvbC5yb3dzOwoKICAgICAgICAgICRzY29wZS5yb3dzID0gcm93czsKICAgICAgICAgICRzY29wZS5mb3JtYXR0ZWRDb2x1bW5zID0gY29sczsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH07Cn0KLyoqCiAqIEBwYXJhbSB7W11PYmplY3R9IGNvbHVtbnMgLSB0aGUgZm9ybWF0dGVkIGNvbHVtbnMgdGhhdCB3aWxsIGJlIGRpc3BsYXllZAogKiBAcGFyYW0ge1N0cmluZ30gdGl0bGUgLSB0aGUgdGl0bGUgb2YgdGhlIGNvbHVtbiB0byBhZGQgdG8KICogQHBhcmFtIHtbXU9iamVjdH0gcm93cyAtIHRoZSByb3cgZGF0YSBmb3IgdGhlIGNvbHVtbnMKICogQHBhcmFtIHtOdW1iZXJ9IGluc2VydEF0SW5kZXggLSB0aGUgaW5kZXggdG8gaW5zZXJ0IHRoZSBwZXJjZW50YWdlIGNvbHVtbiBhdAogKiBAcmV0dXJucyB7T2JqZWN0fSAtIGNvbHMgYW5kIHJvd3MgZm9yIHRoZSB0YWJsZSB0byByZW5kZXIgbm93IGluY2x1ZGVkIHBlcmNlbnRhZ2UgY29sdW1uKHMpCiAqLwoKCmZ1bmN0aW9uIGFkZFBlcmNlbnRhZ2VDb2woY29sdW1ucywgdGl0bGUsIHJvd3MsIGluc2VydEF0SW5kZXgpIHsKICB2YXIgX2NvbHVtbnMkaW5zZXJ0QXRJbmRlID0gY29sdW1uc1tpbnNlcnRBdEluZGV4XSwKICAgICAgaWQgPSBfY29sdW1ucyRpbnNlcnRBdEluZGUuaWQsCiAgICAgIHN1bVRvdGFsID0gX2NvbHVtbnMkaW5zZXJ0QXRJbmRlLnN1bVRvdGFsOwogIHZhciBuZXdJZCA9ICIiLmNvbmNhdChpZCwgIi1wZXJjZW50cyIpOwogIHZhciBmb3JtYXR0ZXIgPSAoMCwgX3V0aWxpdGllcy5nZXRGb3JtYXQpKHsKICAgIGlkOiAncGVyY2VudCcKICB9KTsKCiAgdmFyIGkxOG5UaXRsZSA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXNUeXBlVGFibGUucGFyYW1zLnBlcmNlbnRhZ2VUYWJsZUNvbHVtbk5hbWUnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ3t0aXRsZX0gcGVyY2VudGFnZXMnLAogICAgdmFsdWVzOiB7CiAgICAgIHRpdGxlOiB0aXRsZQogICAgfQogIH0pOwoKICB2YXIgbmV3Q29scyA9IGluc2VydChjb2x1bW5zLCBpbnNlcnRBdEluZGV4LCB7CiAgICB0aXRsZTogaTE4blRpdGxlLAogICAgaWQ6IG5ld0lkLAogICAgZm9ybWF0dGVyOiBmb3JtYXR0ZXIKICB9KTsKICB2YXIgbmV3Um93cyA9IHJvd3MubWFwKGZ1bmN0aW9uIChyb3cpIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9kZWZpbmVQcm9wZXJ0eSh7fSwgbmV3SWQsIGZvcm1hdHRlci5jb252ZXJ0KHJvd1tpZF0gLyBzdW1Ub3RhbCAvIDEwMCkpLCByb3cpOwogIH0pOwogIHJldHVybiB7CiAgICBjb2xzOiBuZXdDb2xzLAogICAgcm93czogbmV3Um93cwogIH07Cn0KCmZ1bmN0aW9uIGluc2VydChhcnIsIGluZGV4KSB7CiAgdmFyIG5ld0FycmF5ID0gX3RvQ29uc3VtYWJsZUFycmF5KGFycik7CgogIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBpdGVtcyA9IG5ldyBBcnJheShfbGVuID4gMiA/IF9sZW4gLSAyIDogMCksIF9rZXkgPSAyOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICBpdGVtc1tfa2V5IC0gMl0gPSBhcmd1bWVudHNbX2tleV07CiAgfQoKICBuZXdBcnJheS5zcGxpY2UuYXBwbHkobmV3QXJyYXksIFtpbmRleCArIDEsIDBdLmNvbmNhdChpdGVtcykpOwogIHJldHVybiBuZXdBcnJheTsKfQ=="},null]}