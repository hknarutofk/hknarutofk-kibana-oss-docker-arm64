(window["dashboard_bundle_jsonpfunction"]=window["dashboard_bundle_jsonpfunction"]||[]).push([[1],{103:function(module,exports){},104:function(module,exports){},107:function(module,exports){},108:function(module,exports){},109:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(110);case"v7light":return __webpack_require__(112);case"v8dark":return __webpack_require__(114);case"v8light":return __webpack_require__(116)}},110:function(module,exports,__webpack_require__){var api=__webpack_require__(30);var content=__webpack_require__(111);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},111:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(31);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".react-grid-layout .gs-w {\n  z-index: auto; }\n\n/**\n * 1. Due to https://github.com/STRML/react-grid-layout/issues/240 we have to manually hide the resizable\n * element.\n */\n.dshLayout--viewing .react-resizable-handle {\n  display: none;\n  /* 1 */ }\n\n/**\n * 1. If we don't give the resizable handler a larger z index value the layout will hide it.\n */\n.dshLayout--editing .react-resizable-handle {\n  width: 24px;\n  height: 24px;\n  z-index: 1000;\n  /* 1 */\n  right: 0;\n  bottom: 0;\n  padding-right: 8px;\n  padding-bottom: 8px; }\n\n/**\n * 1. Need to override the react grid layout height when a single panel is expanded. Important is required because\n * otherwise the height is set inline.\n */\n.dshLayout-isMaximizedPanel {\n  height: 100% !important;\n  /* 1. */\n  width: 100%;\n  position: absolute !important;\n  /* 1 */ }\n\n/**\n * .dshLayout-withoutMargins only affects the panel styles themselves, see ../panel\n */\n/**\n * When a single panel is expanded, all the other panels are hidden in the grid.\n */\n.dshDashboardGrid__item--hidden {\n  display: none; }\n\n/**\n * 1. We need to mark this as important because react grid layout sets the width and height of the panels inline.\n */\n.dshDashboardGrid__item--expanded {\n  height: 100% !important;\n  /* 1 */\n  width: 100% !important;\n  /* 1 */\n  top: 0 !important;\n  /* 1 */\n  left: 0 !important;\n  /* 1 */ }\n\n.react-grid-item {\n  /**\n   * Disable transitions from the library on each grid element.\n   */\n  transition: none;\n  /**\n    * Copy over and overwrite the fill color with EUI color mixin (for theming)\n    */\n  /**\n   * Dragged/Resized panels in dashboard should always appear above other panels\n   * and above the placeholder\n   */\n  /**\n   * Overwrites red coloring that comes from this library by default.\n   */ }\n  .react-grid-item > .react-resizable-handle {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpolygon fill='rgb%28152, 162, 179%29' points='6 6 0 6 0 4.2 4 4.2 4.2 4.2 4.2 0 6 0' /%3E%3C/svg%3E%0A\"); }\n    .react-grid-item > .react-resizable-handle::after {\n      border: none !important;\n      /** overrides library default visual indicator **/ }\n    .react-grid-item > .react-resizable-handle:hover, .react-grid-item > .react-resizable-handle:focus {\n      background-color: rgba(255, 206, 122, 0.3); }\n  .react-grid-item.resizing, .react-grid-item.react-draggable-dragging {\n    z-index: 2000 !important; }\n  .react-grid-item.react-draggable-dragging {\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    box-shadow: 0 40px 64px 0 rgba(0, 0, 0, 0.1), 0 24px 32px 0 rgba(0, 0, 0, 0.1), 0 16px 16px 0 rgba(0, 0, 0, 0.1), 0 8px 8px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n    border-radius: 4px; }\n  .react-grid-item.react-grid-placeholder {\n    border-radius: 4px;\n    background: #FFCE7A; }\n\n@media only screen and (max-width: 574px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n/**\n  * EDITING MODE\n  * Use .dshLayout--editing to target editing state because\n  * .embPanel--editing doesn't get updating without a hard refresh\n  */\n.dshLayout-withoutMargins .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  box-shadow: none;\n  border-radius: 0; }\n\n.dshLayout-withoutMargins:not(.dshLayout--editing) .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  border-color: transparent; }\n\n.dshDashboardViewport {\n  width: 100%; }\n\n.dshDashboardViewport-withMargins {\n  width: 100%; }\n\n/**\n * Needs to correspond with the react root nested inside angular.\n */\n#dashboardViewport {\n  flex: 1;\n  display: flex;\n  flex-direction: column; }\n  #dashboardViewport [data-reactroot] {\n    flex: 1; }\n\n.dshAppContainer {\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n\n.dshStartScreen {\n  text-align: center; }\n\n.dshStartScreen__pageContent {\n  padding: 40px; }\n\n.dshStartScreen__panelDesc {\n  max-width: 260px;\n  margin: 0 auto; }\n\n.dshEmptyWidget {\n  border: 1px solid #343741;\n  border-style: dashed;\n  border-radius: 4px;\n  padding: 80px;\n  max-width: 400px;\n  margin-left: 8px;\n  text-align: center; }\n",""]);module.exports=exports},112:function(module,exports,__webpack_require__){var api=__webpack_require__(30);var content=__webpack_require__(113);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},113:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(31);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".react-grid-layout .gs-w {\n  z-index: auto; }\n\n/**\n * 1. Due to https://github.com/STRML/react-grid-layout/issues/240 we have to manually hide the resizable\n * element.\n */\n.dshLayout--viewing .react-resizable-handle {\n  display: none;\n  /* 1 */ }\n\n/**\n * 1. If we don't give the resizable handler a larger z index value the layout will hide it.\n */\n.dshLayout--editing .react-resizable-handle {\n  width: 24px;\n  height: 24px;\n  z-index: 1000;\n  /* 1 */\n  right: 0;\n  bottom: 0;\n  padding-right: 8px;\n  padding-bottom: 8px; }\n\n/**\n * 1. Need to override the react grid layout height when a single panel is expanded. Important is required because\n * otherwise the height is set inline.\n */\n.dshLayout-isMaximizedPanel {\n  height: 100% !important;\n  /* 1. */\n  width: 100%;\n  position: absolute !important;\n  /* 1 */ }\n\n/**\n * .dshLayout-withoutMargins only affects the panel styles themselves, see ../panel\n */\n/**\n * When a single panel is expanded, all the other panels are hidden in the grid.\n */\n.dshDashboardGrid__item--hidden {\n  display: none; }\n\n/**\n * 1. We need to mark this as important because react grid layout sets the width and height of the panels inline.\n */\n.dshDashboardGrid__item--expanded {\n  height: 100% !important;\n  /* 1 */\n  width: 100% !important;\n  /* 1 */\n  top: 0 !important;\n  /* 1 */\n  left: 0 !important;\n  /* 1 */ }\n\n.react-grid-item {\n  /**\n   * Disable transitions from the library on each grid element.\n   */\n  transition: none;\n  /**\n    * Copy over and overwrite the fill color with EUI color mixin (for theming)\n    */\n  /**\n   * Dragged/Resized panels in dashboard should always appear above other panels\n   * and above the placeholder\n   */\n  /**\n   * Overwrites red coloring that comes from this library by default.\n   */ }\n  .react-grid-item > .react-resizable-handle {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpolygon fill='rgb%28105, 112, 125%29' points='6 6 0 6 0 4.2 4 4.2 4.2 4.2 4.2 0 6 0' /%3E%3C/svg%3E%0A\"); }\n    .react-grid-item > .react-resizable-handle::after {\n      border: none !important;\n      /** overrides library default visual indicator **/ }\n    .react-grid-item > .react-resizable-handle:hover, .react-grid-item > .react-resizable-handle:focus {\n      background-color: rgba(245, 167, 0, 0.1); }\n  .react-grid-item.resizing, .react-grid-item.react-draggable-dragging {\n    z-index: 2000 !important; }\n  .react-grid-item.react-draggable-dragging {\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    box-shadow: 0 40px 64px 0 rgba(65, 78, 101, 0.1), 0 24px 32px 0 rgba(65, 78, 101, 0.1), 0 16px 16px 0 rgba(65, 78, 101, 0.1), 0 8px 8px 0 rgba(65, 78, 101, 0.1), 0 4px 4px 0 rgba(65, 78, 101, 0.1), 0 2px 2px 0 rgba(65, 78, 101, 0.1);\n    border-radius: 4px; }\n  .react-grid-item.react-grid-placeholder {\n    border-radius: 4px;\n    background: #F5A700; }\n\n@media only screen and (max-width: 574px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n/**\n  * EDITING MODE\n  * Use .dshLayout--editing to target editing state because\n  * .embPanel--editing doesn't get updating without a hard refresh\n  */\n.dshLayout-withoutMargins .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  box-shadow: none;\n  border-radius: 0; }\n\n.dshLayout-withoutMargins:not(.dshLayout--editing) .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  border-color: transparent; }\n\n.dshDashboardViewport {\n  width: 100%; }\n\n.dshDashboardViewport-withMargins {\n  width: 100%; }\n\n/**\n * Needs to correspond with the react root nested inside angular.\n */\n#dashboardViewport {\n  flex: 1;\n  display: flex;\n  flex-direction: column; }\n  #dashboardViewport [data-reactroot] {\n    flex: 1; }\n\n.dshAppContainer {\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n\n.dshStartScreen {\n  text-align: center; }\n\n.dshStartScreen__pageContent {\n  padding: 40px; }\n\n.dshStartScreen__panelDesc {\n  max-width: 260px;\n  margin: 0 auto; }\n\n.dshEmptyWidget {\n  border: 1px solid #D3DAE6;\n  border-style: dashed;\n  border-radius: 4px;\n  padding: 80px;\n  max-width: 400px;\n  margin-left: 8px;\n  text-align: center; }\n",""]);module.exports=exports},114:function(module,exports,__webpack_require__){var api=__webpack_require__(30);var content=__webpack_require__(115);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},115:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(31);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".react-grid-layout .gs-w {\n  z-index: auto; }\n\n/**\n * 1. Due to https://github.com/STRML/react-grid-layout/issues/240 we have to manually hide the resizable\n * element.\n */\n.dshLayout--viewing .react-resizable-handle {\n  display: none;\n  /* 1 */ }\n\n/**\n * 1. If we don't give the resizable handler a larger z index value the layout will hide it.\n */\n.dshLayout--editing .react-resizable-handle {\n  width: 24px;\n  height: 24px;\n  z-index: 1000;\n  /* 1 */\n  right: 0;\n  bottom: 0;\n  padding-right: 8px;\n  padding-bottom: 8px; }\n\n/**\n * 1. Need to override the react grid layout height when a single panel is expanded. Important is required because\n * otherwise the height is set inline.\n */\n.dshLayout-isMaximizedPanel {\n  height: 100% !important;\n  /* 1. */\n  width: 100%;\n  position: absolute !important;\n  /* 1 */ }\n\n/**\n * .dshLayout-withoutMargins only affects the panel styles themselves, see ../panel\n */\n/**\n * When a single panel is expanded, all the other panels are hidden in the grid.\n */\n.dshDashboardGrid__item--hidden {\n  display: none; }\n\n/**\n * 1. We need to mark this as important because react grid layout sets the width and height of the panels inline.\n */\n.dshDashboardGrid__item--expanded {\n  height: 100% !important;\n  /* 1 */\n  width: 100% !important;\n  /* 1 */\n  top: 0 !important;\n  /* 1 */\n  left: 0 !important;\n  /* 1 */ }\n\n.react-grid-item {\n  /**\n   * Disable transitions from the library on each grid element.\n   */\n  transition: none;\n  /**\n    * Copy over and overwrite the fill color with EUI color mixin (for theming)\n    */\n  /**\n   * Dragged/Resized panels in dashboard should always appear above other panels\n   * and above the placeholder\n   */\n  /**\n   * Overwrites red coloring that comes from this library by default.\n   */ }\n  .react-grid-item > .react-resizable-handle {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpolygon fill='rgb%28152, 162, 179%29' points='6 6 0 6 0 4.2 4 4.2 4.2 4.2 4.2 0 6 0' /%3E%3C/svg%3E%0A\"); }\n    .react-grid-item > .react-resizable-handle::after {\n      border: none !important;\n      /** overrides library default visual indicator **/ }\n    .react-grid-item > .react-resizable-handle:hover, .react-grid-item > .react-resizable-handle:focus {\n      background-color: rgba(255, 206, 122, 0.3); }\n  .react-grid-item.resizing, .react-grid-item.react-draggable-dragging {\n    z-index: 2000 !important; }\n  .react-grid-item.react-draggable-dragging {\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    box-shadow: 0 2.7px 9px rgba(0, 0, 0, 0.325), 0 9.4px 24px rgba(0, 0, 0, 0.225), 0 21.8px 43px rgba(0, 0, 0, 0.2);\n    border-radius: 6px; }\n  .react-grid-item.react-grid-placeholder {\n    border-radius: 6px;\n    background: #FFCE7A; }\n\n@media only screen and (max-width: 574px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n/**\n  * EDITING MODE\n  * Use .dshLayout--editing to target editing state because\n  * .embPanel--editing doesn't get updating without a hard refresh\n  */\n.dshLayout-withoutMargins .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  box-shadow: none;\n  border-radius: 0; }\n\n.dshLayout-withoutMargins:not(.dshLayout--editing) .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  border-color: transparent; }\n\n.dshDashboardViewport {\n  width: 100%; }\n\n.dshDashboardViewport-withMargins {\n  width: 100%; }\n\n/**\n * Needs to correspond with the react root nested inside angular.\n */\n#dashboardViewport {\n  flex: 1;\n  display: flex;\n  flex-direction: column; }\n  #dashboardViewport [data-reactroot] {\n    flex: 1; }\n\n.dshAppContainer {\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n\n.dshStartScreen {\n  text-align: center; }\n\n.dshStartScreen__pageContent {\n  padding: 40px; }\n\n.dshStartScreen__panelDesc {\n  max-width: 260px;\n  margin: 0 auto; }\n\n.dshEmptyWidget {\n  border: 1px solid #343741;\n  border-style: dashed;\n  border-radius: 6px;\n  padding: 80px;\n  max-width: 400px;\n  margin-left: 8px;\n  text-align: center; }\n",""]);module.exports=exports},116:function(module,exports,__webpack_require__){var api=__webpack_require__(30);var content=__webpack_require__(117);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},117:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(31);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".react-grid-layout .gs-w {\n  z-index: auto; }\n\n/**\n * 1. Due to https://github.com/STRML/react-grid-layout/issues/240 we have to manually hide the resizable\n * element.\n */\n.dshLayout--viewing .react-resizable-handle {\n  display: none;\n  /* 1 */ }\n\n/**\n * 1. If we don't give the resizable handler a larger z index value the layout will hide it.\n */\n.dshLayout--editing .react-resizable-handle {\n  width: 24px;\n  height: 24px;\n  z-index: 1000;\n  /* 1 */\n  right: 0;\n  bottom: 0;\n  padding-right: 8px;\n  padding-bottom: 8px; }\n\n/**\n * 1. Need to override the react grid layout height when a single panel is expanded. Important is required because\n * otherwise the height is set inline.\n */\n.dshLayout-isMaximizedPanel {\n  height: 100% !important;\n  /* 1. */\n  width: 100%;\n  position: absolute !important;\n  /* 1 */ }\n\n/**\n * .dshLayout-withoutMargins only affects the panel styles themselves, see ../panel\n */\n/**\n * When a single panel is expanded, all the other panels are hidden in the grid.\n */\n.dshDashboardGrid__item--hidden {\n  display: none; }\n\n/**\n * 1. We need to mark this as important because react grid layout sets the width and height of the panels inline.\n */\n.dshDashboardGrid__item--expanded {\n  height: 100% !important;\n  /* 1 */\n  width: 100% !important;\n  /* 1 */\n  top: 0 !important;\n  /* 1 */\n  left: 0 !important;\n  /* 1 */ }\n\n.react-grid-item {\n  /**\n   * Disable transitions from the library on each grid element.\n   */\n  transition: none;\n  /**\n    * Copy over and overwrite the fill color with EUI color mixin (for theming)\n    */\n  /**\n   * Dragged/Resized panels in dashboard should always appear above other panels\n   * and above the placeholder\n   */\n  /**\n   * Overwrites red coloring that comes from this library by default.\n   */ }\n  .react-grid-item > .react-resizable-handle {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpolygon fill='rgb%28105, 112, 125%29' points='6 6 0 6 0 4.2 4 4.2 4.2 4.2 4.2 0 6 0' /%3E%3C/svg%3E%0A\"); }\n    .react-grid-item > .react-resizable-handle::after {\n      border: none !important;\n      /** overrides library default visual indicator **/ }\n    .react-grid-item > .react-resizable-handle:hover, .react-grid-item > .react-resizable-handle:focus {\n      background-color: rgba(245, 167, 0, 0.1); }\n  .react-grid-item.resizing, .react-grid-item.react-draggable-dragging {\n    z-index: 2000 !important; }\n  .react-grid-item.react-draggable-dragging {\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    box-shadow: 0 2.7px 9px rgba(0, 0, 0, 0.13), 0 9.4px 24px rgba(0, 0, 0, 0.09), 0 21.8px 43px rgba(0, 0, 0, 0.08);\n    border-radius: 6px; }\n  .react-grid-item.react-grid-placeholder {\n    border-radius: 6px;\n    background: #F5A700; }\n\n@media only screen and (max-width: 574px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n/**\n  * EDITING MODE\n  * Use .dshLayout--editing to target editing state because\n  * .embPanel--editing doesn't get updating without a hard refresh\n  */\n.dshLayout-withoutMargins .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  box-shadow: none;\n  border-radius: 0; }\n\n.dshLayout-withoutMargins:not(.dshLayout--editing) .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  border-color: transparent; }\n\n.dshDashboardViewport {\n  width: 100%; }\n\n.dshDashboardViewport-withMargins {\n  width: 100%; }\n\n/**\n * Needs to correspond with the react root nested inside angular.\n */\n#dashboardViewport {\n  flex: 1;\n  display: flex;\n  flex-direction: column; }\n  #dashboardViewport [data-reactroot] {\n    flex: 1; }\n\n.dshAppContainer {\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n\n.dshStartScreen {\n  text-align: center; }\n\n.dshStartScreen__pageContent {\n  padding: 40px; }\n\n.dshStartScreen__panelDesc {\n  max-width: 260px;\n  margin: 0 auto; }\n\n.dshEmptyWidget {\n  border: 1px solid #D3DAE6;\n  border-style: dashed;\n  border-radius: 6px;\n  padding: 80px;\n  max-width: 400px;\n  margin-left: 8px;\n  text-align: center; }\n",""]);module.exports=exports},129:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return application_renderApp}));var application=__webpack_require__(109);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(13);var external_kbnSharedDeps_Angular_=__webpack_require__(99);var external_kbnSharedDeps_Angular_default=__webpack_require__.n(external_kbnSharedDeps_Angular_);var angular_sanitize=__webpack_require__(105);var external_kbnSharedDeps_KbnI18nAngular_=__webpack_require__(101);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var query_string=__webpack_require__(29);var dashboard_app='<dashboard-app\n  class="app-container dshAppContainer"\n  ng-class="{\'dshAppContainer--withMargins\': model.useMargins}"\n>\n  <div id="dashboardChrome"></div>\n  <h1 class="euiScreenReaderOnly">{{screenTitle}}</h1>\n  <div id="dashboardViewport"></div>\n\n</dashboard-app>\n';var dashboard_listing_ng_wrapper='<dashboard-listing\n  core="core"\n  create-item="create"\n  get-view-url="getViewUrl"\n  edit-item="editItem"\n  find-items="find"\n  delete-items="delete"\n  listing-limit="listingLimit"\n  hide-write-controls="hideWriteControls"\n  initial-filter="initialFilter"\n  initial-page-size="initialPageSize"\n></dashboard-listing>\n';var node_modules_history=__webpack_require__(121);var external_kbnSharedDeps_Lodash_=__webpack_require__(8);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(14);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var fast_deep_equal=__webpack_require__(119);var fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);var external_kbnSharedDeps_Rxjs_=__webpack_require__(33);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(28);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(22);var emptyDashboardTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.emptyDashboardTitle",{defaultMessage:"This dashboard is empty."});var emptyDashboardAdditionalPrivilege=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.emptyDashboardAdditionalPrivilege",{defaultMessage:"You need additional privileges to edit this dashboard."});var fillDashboardTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.fillDashboardTitle",{defaultMessage:"This dashboard is empty. Let’s fill it up!"});var howToStartWorkingOnNewDashboardDescription1=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.howToStartWorkingOnNewDashboardDescription1",{defaultMessage:"Click"});var howToStartWorkingOnNewDashboardDescription2=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.howToStartWorkingOnNewDashboardDescription2",{defaultMessage:"in the menu bar above to start adding panels."});var howToStartWorkingOnNewDashboardEditLinkText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.howToStartWorkingOnNewDashboardEditLinkText",{defaultMessage:"Edit"});var howToStartWorkingOnNewDashboardEditLinkAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.howToStartWorkingOnNewDashboardEditLinkAriaLabel",{defaultMessage:"Edit dashboard"});var addExistingVisualizationLinkText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.addExistingVisualizationLinkText",{defaultMessage:"Add an existing"});var addExistingVisualizationLinkAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.addVisualizationLinkAriaLabel",{defaultMessage:"Add an existing visualization"});var addNewVisualizationDescription=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.addNewVisualizationText",{defaultMessage:"or new object to this dashboard"});var createNewVisualizationButton=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.createNewVisualizationButton",{defaultMessage:"Create new"});var createNewVisualizationButtonAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.createNewVisualizationButtonAriaLabel",{defaultMessage:"Create new visualization button"});function DashboardEmptyScreen(_ref){var showLinkToVisualize=_ref.showLinkToVisualize,onLinkClick=_ref.onLinkClick,onVisualizeClick=_ref.onVisualizeClick,uiSettings=_ref.uiSettings,http=_ref.http,isReadonlyMode=_ref.isReadonlyMode;var IS_DARK_THEME=uiSettings.get("theme:darkMode");var emptyStateGraphicURL=IS_DARK_THEME?"/plugins/home/assets/welcome_graphic_dark_2x.png":"/plugins/home/assets/welcome_graphic_light_2x.png";var linkToVisualizeParagraph=external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"linkToVisualizeParagraph"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{iconSide:"left",size:"s",iconType:"plusInCircle",onClick:onVisualizeClick,"data-test-subj":"addVisualizationButton","aria-label":createNewVisualizationButtonAriaLabel},createNewVisualizationButton));var paragraph=function paragraph(description1,description2,linkText,ariaLabel,dataTestSubj){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"m",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,description1,description1&&external_kbnSharedDeps_React_default.a.createElement("span",null," "),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:onLinkClick,"aria-label":ariaLabel,"data-test-subj":dataTestSubj||""},linkText),external_kbnSharedDeps_React_default.a.createElement("span",null," "),description2))};var enterEditModeParagraph=paragraph(howToStartWorkingOnNewDashboardDescription1,howToStartWorkingOnNewDashboardDescription2,howToStartWorkingOnNewDashboardEditLinkText,howToStartWorkingOnNewDashboardEditLinkAriaLabel);var enterViewModeParagraph=paragraph(null,addNewVisualizationDescription,addExistingVisualizationLinkText,addExistingVisualizationLinkAriaLabel);var page=function page(mainText,showAdditionalParagraph,additionalText){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPage"],{className:"dshStartScreen",restrictWidth:"500px"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{verticalPosition:"center",horizontalPosition:"center",paddingSize:"none",className:"dshStartScreen__pageContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiImage"],{url:http.basePath.prepend(emptyStateGraphicURL),alt:""}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("p",{style:{fontWeight:"bold"}},mainText)),additionalText?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"m",color:"subdued"},additionalText):null,showAdditionalParagraph?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"dshStartScreen__panelDesc"},enterEditModeParagraph)):null)))};var readonlyMode=page(emptyDashboardTitle,false,emptyDashboardAdditionalPrivilege);var viewMode=page(fillDashboardTitle,true);var editMode=external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"emptyDashboardWidget",className:"dshEmptyWidget"},enterViewModeParagraph,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),linkToVisualizeParagraph);var actionableMode=showLinkToVisualize?editMode:viewMode;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,isReadonlyMode?readonlyMode:actionableMode)}var public_=__webpack_require__(18);var savedObjects_public_=__webpack_require__(11);var application_embeddable=__webpack_require__(10);var embeddable_public_=__webpack_require__(4);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var options_OptionsMenu=function(_Component){_inherits(OptionsMenu,_Component);var _super=_createSuper(OptionsMenu);function OptionsMenu(props){var _this;_classCallCheck(this,OptionsMenu);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"state",{useMargins:_this.props.useMargins,hidePanelTitles:_this.props.hidePanelTitles});_defineProperty(_assertThisInitialized(_this),"handleUseMarginsChange",(function(evt){var isChecked=evt.target.checked;_this.props.onUseMarginsChange(isChecked);_this.setState({useMargins:isChecked})}));_defineProperty(_assertThisInitialized(_this),"handleHidePanelTitlesChange",(function(evt){var isChecked=!evt.target.checked;_this.props.onHidePanelTitlesChange(isChecked);_this.setState({hidePanelTitles:isChecked})}));return _this}_createClass(OptionsMenu,[{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{"data-test-subj":"dashboardOptionsMenu"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNav.options.useMarginsBetweenPanelsSwitchLabel",{defaultMessage:"Use margins between panels"}),checked:this.state.useMargins,onChange:this.handleUseMarginsChange,"data-test-subj":"dashboardMarginsCheckbox"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNav.options.hideAllPanelTitlesSwitchLabel",{defaultMessage:"Show panel titles"}),checked:!this.state.hidePanelTitles,onChange:this.handleHidePanelTitlesChange,"data-test-subj":"dashboardPanelTitlesCheckbox"})))}}]);return OptionsMenu}(external_kbnSharedDeps_React_["Component"]);var isOpen=false;var show_options_popover_container=document.createElement("div");var show_options_popover_onClose=function onClose(){external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(show_options_popover_container);isOpen=false};function showOptionsPopover(_ref){var anchorElement=_ref.anchorElement,useMargins=_ref.useMargins,onUseMarginsChange=_ref.onUseMarginsChange,hidePanelTitles=_ref.hidePanelTitles,onHidePanelTitlesChange=_ref.onHidePanelTitlesChange;if(isOpen){show_options_popover_onClose();return}isOpen=true;document.body.appendChild(show_options_popover_container);var element=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiWrappingPopover"],{id:"popover",button:anchorElement,isOpen:true,closePopover:show_options_popover_onClose},external_kbnSharedDeps_React_default.a.createElement(options_OptionsMenu,{useMargins:useMargins,onUseMarginsChange:onUseMarginsChange,hidePanelTitles:hidePanelTitles,onHidePanelTitlesChange:onHidePanelTitlesChange})));external_kbnSharedDeps_ReactDom_default.a.render(element,show_options_popover_container)}function save_modal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function save_modal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function save_modal_createClass(Constructor,protoProps,staticProps){if(protoProps)save_modal_defineProperties(Constructor.prototype,protoProps);if(staticProps)save_modal_defineProperties(Constructor,staticProps);return Constructor}function save_modal_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)save_modal_setPrototypeOf(subClass,superClass)}function save_modal_setPrototypeOf(o,p){save_modal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return save_modal_setPrototypeOf(o,p)}function save_modal_createSuper(Derived){var hasNativeReflectConstruct=save_modal_isNativeReflectConstruct();return function _createSuperInternal(){var Super=save_modal_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=save_modal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return save_modal_possibleConstructorReturn(this,result)}}function save_modal_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return save_modal_assertThisInitialized(self)}function save_modal_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function save_modal_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function save_modal_getPrototypeOf(o){save_modal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return save_modal_getPrototypeOf(o)}function save_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var save_modal_DashboardSaveModal=function(_React$Component){save_modal_inherits(DashboardSaveModal,_React$Component);var _super=save_modal_createSuper(DashboardSaveModal);function DashboardSaveModal(props){var _this;save_modal_classCallCheck(this,DashboardSaveModal);_this=_super.call(this,props);save_modal_defineProperty(save_modal_assertThisInitialized(_this),"state",{description:_this.props.description,timeRestore:_this.props.timeRestore});save_modal_defineProperty(save_modal_assertThisInitialized(_this),"saveDashboard",(function(_ref){var newTitle=_ref.newTitle,newCopyOnSave=_ref.newCopyOnSave,isTitleDuplicateConfirmed=_ref.isTitleDuplicateConfirmed,onTitleDuplicate=_ref.onTitleDuplicate;_this.props.onSave({newTitle:newTitle,newDescription:_this.state.description,newCopyOnSave:newCopyOnSave,newTimeRestore:_this.state.timeRestore,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate})}));save_modal_defineProperty(save_modal_assertThisInitialized(_this),"onDescriptionChange",(function(event){_this.setState({description:event.target.value})}));save_modal_defineProperty(save_modal_assertThisInitialized(_this),"onTimeRestoreChange",(function(event){_this.setState({timeRestore:event.target.checked})}));return _this}save_modal_createClass(DashboardSaveModal,[{key:"renderDashboardSaveOptions",value:function renderDashboardSaveOptions(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.saveModal.descriptionFormRowLabel",defaultMessage:"Description"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{"data-test-subj":"dashboardDescription",value:this.state.description,onChange:this.onDescriptionChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.saveModal.storeTimeWithDashboardFormRowHelpText",defaultMessage:"This changes the time filter to the currently selected time each time this dashboard is loaded."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"storeTimeWithDashboard",checked:this.state.timeRestore,onChange:this.onTimeRestoreChange,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.saveModal.storeTimeWithDashboardFormRowLabel",defaultMessage:"Store time with dashboard"})})))}},{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement(savedObjects_public_["SavedObjectSaveModal"],{onSave:this.saveDashboard,onClose:this.props.onClose,title:this.props.title,showCopyOnSave:this.props.showCopyOnSave,objectType:"dashboard",options:this.renderDashboardSaveOptions(),showDescription:false})}}]);return DashboardSaveModal}(external_kbnSharedDeps_React_default.a.Component);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function clone_modal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function clone_modal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function clone_modal_createClass(Constructor,protoProps,staticProps){if(protoProps)clone_modal_defineProperties(Constructor.prototype,protoProps);if(staticProps)clone_modal_defineProperties(Constructor,staticProps);return Constructor}function clone_modal_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)clone_modal_setPrototypeOf(subClass,superClass)}function clone_modal_setPrototypeOf(o,p){clone_modal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return clone_modal_setPrototypeOf(o,p)}function clone_modal_createSuper(Derived){var hasNativeReflectConstruct=clone_modal_isNativeReflectConstruct();return function _createSuperInternal(){var Super=clone_modal_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=clone_modal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return clone_modal_possibleConstructorReturn(this,result)}}function clone_modal_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return clone_modal_assertThisInitialized(self)}function clone_modal_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function clone_modal_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function clone_modal_getPrototypeOf(o){clone_modal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return clone_modal_getPrototypeOf(o)}function clone_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var clone_modal_DashboardCloneModal=function(_React$Component){clone_modal_inherits(DashboardCloneModal,_React$Component);var _super=clone_modal_createSuper(DashboardCloneModal);function DashboardCloneModal(props){var _this;clone_modal_classCallCheck(this,DashboardCloneModal);_this=_super.call(this,props);clone_modal_defineProperty(clone_modal_assertThisInitialized(_this),"isMounted",false);clone_modal_defineProperty(clone_modal_assertThisInitialized(_this),"onTitleDuplicate",(function(){_this.setState({isTitleDuplicateConfirmed:true,hasTitleDuplicate:true})}));clone_modal_defineProperty(clone_modal_assertThisInitialized(_this),"cloneDashboard",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});_context.next=3;return _this.props.onClone(_this.state.newDashboardName,_this.state.isTitleDuplicateConfirmed,_this.onTitleDuplicate);case 3:if(_this.isMounted){_this.setState({isLoading:false})}case 4:case"end":return _context.stop()}}}),_callee)}))));clone_modal_defineProperty(clone_modal_assertThisInitialized(_this),"onInputChange",(function(event){_this.setState({newDashboardName:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})}));clone_modal_defineProperty(clone_modal_assertThisInitialized(_this),"renderDuplicateTitleCallout",(function(){if(!_this.state.hasTitleDuplicate){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"s",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNav.cloneModal.dashboardExistsTitle",{defaultMessage:"A dashboard with the title {newDashboardName} already exists.",values:{newDashboardName:"'".concat(_this.state.newDashboardName,"'")}}),color:"warning","data-test-subj":"titleDupicateWarnMsg"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.dashboardExistsDescription",defaultMessage:"Click {confirmClone} to clone the dashboard with the duplicate title.",values:{confirmClone:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.confirmCloneDescription",defaultMessage:"Confirm Clone"}))}}))))}));_this.state={newDashboardName:props.title,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false};return _this}clone_modal_createClass(DashboardCloneModal,[{key:"componentDidMount",value:function componentDidMount(){this.isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.isMounted=false}},{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{"data-test-subj":"dashboardCloneModal",className:"dshCloneModal",onClose:this.props.onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.cloneDashboardModalHeaderTitle",defaultMessage:"Clone dashboard"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.enterNewNameForDashboardDescription",defaultMessage:"Please enter a new name for your dashboard."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{autoFocus:true,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.cloneModal.cloneDashboardTitleAriaLabel",{defaultMessage:"Cloned Dashboard Title"}),"data-test-subj":"clonedDashboardTitle",value:this.state.newDashboardName,onChange:this.onInputChange,isInvalid:this.state.hasTitleDuplicate}),this.renderDuplicateTitleCallout()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"cloneCancelButton",onClick:this.props.onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.cancelButtonLabel",defaultMessage:"Cancel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"cloneConfirmButton",onClick:this.cloneDashboard,isLoading:this.state.isLoading},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.confirmButtonLabel",defaultMessage:"Confirm Clone"})))))}}]);return DashboardCloneModal}(external_kbnSharedDeps_React_default.a.Component);function show_clone_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function show_clone_modal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){show_clone_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){show_clone_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function showCloneModal(onClone,title){var container=document.createElement("div");var closeModal=function closeModal(){external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(container);document.body.removeChild(container)};var onCloneConfirmed=function(){var _ref=show_clone_modal_asyncToGenerator(regeneratorRuntime.mark((function _callee(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate).then((function(response){if(response.error||response.id){closeModal()}}));case 1:case"end":return _context.stop()}}}),_callee)})));return function onCloneConfirmed(_x,_x2,_x3){return _ref.apply(this,arguments)}}();document.body.appendChild(container);var element=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(clone_modal_DashboardCloneModal,{onClone:onCloneConfirmed,onClose:closeModal,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNav.showCloneModal.dashboardCopyTitle",{defaultMessage:"{title} Copy",values:{title:title}})}));external_kbnSharedDeps_ReactDom_default.a.render(element,container)}var external_kbnSharedDeps_Moment_=__webpack_require__(102);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function filter_utils_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function filter_utils_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function filter_utils_createClass(Constructor,protoProps,staticProps){if(protoProps)filter_utils_defineProperties(Constructor.prototype,protoProps);if(staticProps)filter_utils_defineProperties(Constructor,staticProps);return Constructor}var filter_utils_FilterUtils=function(){function FilterUtils(){filter_utils_classCallCheck(this,FilterUtils)}filter_utils_createClass(FilterUtils,null,[{key:"convertTimeToUTCString",value:function convertTimeToUTCString(time){if(external_kbnSharedDeps_Moment_default()(time).isValid()){return external_kbnSharedDeps_Moment_default()(time).utc().format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}else{return time}}},{key:"areTimesEqual",value:function areTimesEqual(timeA,timeB){return this.convertTimeToUTCString(timeA)===this.convertTimeToUTCString(timeB)}},{key:"cleanFiltersForComparison",value:function cleanFiltersForComparison(filters){return external_kbnSharedDeps_Lodash_default.a.map(filters,(function(filter){var f=external_kbnSharedDeps_Lodash_default.a.omit(filter,["$$hashKey","$state"]);if(f.meta){return external_kbnSharedDeps_Lodash_default.a.omit(f.meta,["value"])}return f}))}}]);return FilterUtils}();function updateSavedDashboard(savedDashboard,appState,timeFilter,toJson){savedDashboard.title=appState.title;savedDashboard.description=appState.description;savedDashboard.timeRestore=appState.timeRestore;savedDashboard.panelsJSON=toJson(appState.panels);savedDashboard.optionsJSON=toJson(appState.options);savedDashboard.timeFrom=savedDashboard.timeRestore?filter_utils_FilterUtils.convertTimeToUTCString(timeFilter.getTime().from):undefined;savedDashboard.timeTo=savedDashboard.timeRestore?filter_utils_FilterUtils.convertTimeToUTCString(timeFilter.getTime().to):undefined;var timeRestoreObj=external_kbnSharedDeps_Lodash_default.a.pick(timeFilter.getRefreshInterval(),["display","pause","section","value"]);savedDashboard.refreshInterval=savedDashboard.timeRestore?timeRestoreObj:undefined;var unpinnedFilters=savedDashboard.getFilters().filter((function(filter){return!public_["esFilters"].isFilterPinned(filter)}));savedDashboard.searchSource.setField("filter",unpinnedFilters)}function saveDashboard(toJson,timeFilter,dashboardStateManager,saveOptions){var savedDashboard=dashboardStateManager.savedDashboard;var appState=dashboardStateManager.appState;updateSavedDashboard(savedDashboard,appState,timeFilter,toJson);return savedDashboard.save(saveOptions).then((function(id){if(id){dashboardStateManager.lastSavedDashboardFilters=dashboardStateManager.getFilterState();dashboardStateManager.resetState()}return id}))}var embeddable_plugin=__webpack_require__(3);function getAppStateDefaults(savedDashboard,hideWriteControls){return{fullScreenMode:false,title:savedDashboard.title,description:savedDashboard.description||"",timeRestore:savedDashboard.timeRestore,panels:savedDashboard.panelsJSON?JSON.parse(savedDashboard.panelsJSON):[],options:savedDashboard.optionsJSON?JSON.parse(savedDashboard.optionsJSON):{},query:savedDashboard.getQuery(),filters:savedDashboard.getFilters(),viewMode:savedDashboard.id||hideWriteControls?embeddable_plugin["ViewMode"].VIEW:embeddable_plugin["ViewMode"].EDIT}}var semver=__webpack_require__(106);var semver_default=__webpack_require__.n(semver);function util_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function util_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)util_setPrototypeOf(subClass,superClass)}function util_createSuper(Derived){var hasNativeReflectConstruct=util_isNativeReflectConstruct();return function _createSuperInternal(){var Super=util_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=util_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return util_possibleConstructorReturn(this,result)}}function util_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return util_assertThisInitialized(self)}function util_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,util_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return util_setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function _construct(Parent,args,Class){if(util_isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)util_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function util_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function util_setPrototypeOf(o,p){util_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return util_setPrototypeOf(o,p)}function util_getPrototypeOf(o){util_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return util_getPrototypeOf(o)}function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}var UnreachableCaseError=function(_Error){util_inherits(UnreachableCaseError,_Error);var _super=util_createSuper(UnreachableCaseError);function UnreachableCaseError(val){util_classCallCheck(this,UnreachableCaseError);return _super.call(this,"Unreachable case: ".concat(val))}return UnreachableCaseError}(_wrapNativeSuper(Error));function createUiStatsMetric(_ref){var type=_ref.type,appName=_ref.appName,eventName=_ref.eventName,_ref$count=_ref.count,count=_ref$count===void 0?1:_ref$count;return{type:type,appName:appName,eventName:eventName,count:count}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(100);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function application_usage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function application_usage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function application_usage_createClass(Constructor,protoProps,staticProps){if(protoProps)application_usage_defineProperties(Constructor.prototype,protoProps);if(staticProps)application_usage_defineProperties(Constructor,staticProps);return Constructor}function application_usage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var application_usage_ApplicationUsage=function(){function ApplicationUsage(){application_usage_classCallCheck(this,ApplicationUsage);application_usage_defineProperty(this,"currentUsage",void 0)}application_usage_createClass(ApplicationUsage,[{key:"start",value:function start(){var _this=this;if(window)window.addEventListener("click",(function(){return _this.currentUsage&&_this.currentUsage.numberOfClicks++}))}},{key:"appChanged",value:function appChanged(appId){var currentUsage=this.currentUsage;if(appId){this.currentUsage={type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}else{this.currentUsage=void 0}return currentUsage}}]);return ApplicationUsage}();var stats=__webpack_require__(107);function trackUsageAgent(appName){var userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}var METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function storage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function storage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function storage_createClass(Constructor,protoProps,staticProps){if(protoProps)storage_defineProperties(Constructor.prototype,protoProps);if(staticProps)storage_defineProperties(Constructor,staticProps);return Constructor}function storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReportStorageManager=function(){function ReportStorageManager(storageKey,storage){storage_classCallCheck(this,ReportStorageManager);storage_defineProperty(this,"storageKey",void 0);storage_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}storage_createClass(ReportStorageManager,[{key:"get",value:function get(){if(!this.storage)return;return this.storage.get(this.storageKey)}},{key:"store",value:function store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}]);return ReportStorageManager}();function report_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function report_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function report_createClass(Constructor,protoProps,staticProps){if(protoProps)report_defineProperties(Constructor.prototype,protoProps);if(staticProps)report_defineProperties(Constructor,staticProps);return Constructor}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REPORT_VERSION=1;var report_ReportManager=function(){function ReportManager(report){report_classCallCheck(this,ReportManager);report_defineProperty(this,"report",void 0);this.report=report||ReportManager.createReport()}report_createClass(ReportManager,[{key:"clearReport",value:function clearReport(){this.report=ReportManager.createReport()}},{key:"isReportEmpty",value:function isReportEmpty(){var _this$report=this.report,uiStatsMetrics=_this$report.uiStatsMetrics,userAgent=_this$report.userAgent,appUsage=_this$report.application_usage;var noUiStats=!uiStatsMetrics||Object.keys(uiStatsMetrics).length===0;var noUserAgent=!userAgent||Object.keys(userAgent).length===0;var noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiStats&&noUserAgent&&noAppUsage}},{key:"incrementStats",value:function incrementStats(count,stats){var _ref=stats||{},_ref$min=_ref.min,min=_ref$min===void 0?0:_ref$min,_ref$max=_ref.max,max=_ref$max===void 0?0:_ref$max,_ref$sum=_ref.sum,sum=_ref$sum===void 0?0:_ref$sum;var newMin=Math.min(min,count);var newMax=Math.max(max,count);var newAvg=newMin+newMax/2;var newSum=sum+count;return{min:newMin,max:newMax,avg:newAvg,sum:newSum}}},{key:"assignReports",value:function assignReports(newMetrics){var _this=this;wrapArray(newMetrics).forEach((function(newMetric){return _this.assignReport(_this.report,newMetric)}));return{report:this.report}}},{key:"assignReport",value:function assignReport(report,metric){var key=ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{var appName=metric.appName,type=metric.type,userAgent=metric.userAgent;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _appName=metric.appName,_type=metric.type,eventName=metric.eventName,count=metric.count;report.uiStatsMetrics=report.uiStatsMetrics||{};var existingStats=(report.uiStatsMetrics[key]||{}).stats;report.uiStatsMetrics[key]={key:key,appName:_appName,eventName:eventName,type:_type,stats:this.incrementStats(count,existingStats)};return}case METRIC_TYPE.APPLICATION_USAGE:var numberOfClicks=metric.numberOfClicks,startTime=metric.startTime;var minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};var appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0};report.application_usage[key]={minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};break;default:throw new UnreachableCaseError(metric)}}}],[{key:"createReport",value:function createReport(){return{reportVersion:REPORT_VERSION}}},{key:"createMetricKey",value:function createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{var appName=metric.appName,type=metric.type;return"".concat(appName,"-").concat(type)}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _appName2=metric.appName,eventName=metric.eventName,_type2=metric.type;return"".concat(_appName2,"-").concat(_type2,"-").concat(eventName)}case METRIC_TYPE.APPLICATION_USAGE:return metric.appId;default:throw new UnreachableCaseError(metric)}}}]);return ReportManager}();report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function reporter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function reporter_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){reporter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){reporter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function reporter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function reporter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function reporter_createClass(Constructor,protoProps,staticProps){if(protoProps)reporter_defineProperties(Constructor.prototype,protoProps);if(staticProps)reporter_defineProperties(Constructor,staticProps);return Constructor}function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var reporter_Reporter=function(){function Reporter(config){var _this=this;reporter_classCallCheck(this,Reporter);reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"lastAppId",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"applicationUsage",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"started",false);reporter_defineProperty(this,"start",(function(){if(!_this.interval){_this.interval=setTimeout((function(){_this.interval=undefined;_this.sendReports()}),_this.checkInterval)}if(_this.started){return}if(window&&document){window.addEventListener("beforeunload",(function(){return _this.reportApplicationUsage()}));document.addEventListener("visibilitychange",(function(){if(document.visibilityState==="visible"&&_this.lastAppId){_this.reportApplicationUsage(_this.lastAppId)}else if(document.visibilityState==="hidden"){_this.reportApplicationUsage();_this.sendReports()}}))}_this.started=true;_this.applicationUsage.start()}));reporter_defineProperty(this,"reportUiStats",(function(appName,type,eventNames,count){var metrics=wrapArray(eventNames).map((function(eventName){_this.log("".concat(type," Metric -> (").concat(appName,":").concat(eventName,"):"));var report=createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count});_this.log(report);return report}));_this.saveToReport(metrics)}));reporter_defineProperty(this,"reportUserAgent",(function(appName){_this.log("Reporting user-agent.");var report=trackUsageAgent(appName);_this.saveToReport([report])}));reporter_defineProperty(this,"sendReports",reporter_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var versionMismatch;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.reportManager.isReportEmpty()){_context.next=13;break}_context.prev=1;_context.next=4;return _this.http(_this.reportManager.report);case 4:_this.flushReport();_context.next=13;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);_this.log("Error Sending Metrics Report ".concat(_context.t0));_this.retryCount=_this.retryCount+1;versionMismatch=_this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||_this.retryCount>_this.maxRetries){_this.flushReport()}case 13:_this.start();case 14:case"end":return _context.stop()}}}),_callee,null,[[1,7]])}))));var http=config.http,storage=config.storage,debug=config.debug,_config$checkInterval=config.checkInterval,checkInterval=_config$checkInterval===void 0?9e4:_config$checkInterval,_config$storageKey=config.storageKey,storageKey=_config$storageKey===void 0?"analytics":_config$storageKey;this.http=http;this.checkInterval=checkInterval;this.applicationUsage=new application_usage_ApplicationUsage;this.storageManager=new ReportStorageManager(storageKey,storage);var storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}reporter_createClass(Reporter,[{key:"saveToReport",value:function saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}},{key:"flushReport",value:function flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}},{key:"log",value:function log(message){if(this.debug){console.debug(message)}}},{key:"reportApplicationUsage",value:function reportApplicationUsage(appId){this.log("Reporting application changed to ".concat(appId));this.lastAppId=appId||this.lastAppId;var appChangedReport=this.applicationUsage.appChanged(appId);if(appChangedReport)this.saveToReport([appChangedReport])}}]);return Reporter}();var types=__webpack_require__(108);var bwc_types=__webpack_require__(104);var common_types=__webpack_require__(103);var uuid=__webpack_require__(12);var uuid_default=__webpack_require__.n(uuid);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){migrate_to_730_panels_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function migrate_to_730_panels_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var PANEL_HEIGHT_SCALE_FACTOR=5;var PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS=4;var PANEL_WIDTH_SCALE_FACTOR=4;function isPre61Panel(panel){return panel.row!==undefined}function is61Panel(panel){return semver_default.a.satisfies(panel.version,"6.1.x")}function is62Panel(panel){return semver_default.a.satisfies(panel.version,"6.2.x")}function is63Panel(panel){return semver_default.a.satisfies(panel.version,"6.3.x")}function is640To720Panel(panel){return semver_default.a.satisfies(panel.version,">6.3")&&semver_default.a.satisfies(panel.version,"<7.3")}function migratePre61PanelToLatest(panel,version,useMargins,uiState){if(panel.col===undefined||panel.row===undefined){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.panel.unableToMigratePanelDataForSixOneZeroErrorMessage",{defaultMessage:'Unable to migrate panel data for "6.1.0" backwards compatibility, panel does not contain expected col and/or row fields'}))}var embeddableConfig=uiState?uiState["P-".concat(panel.panelIndex)]||{}:{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;var DASHBOARD_GRID_COLUMN_COUNT=48;var DEFAULT_PANEL_WIDTH=DASHBOARD_GRID_COLUMN_COUNT/2;var DEFAULT_PANEL_HEIGHT=15;var columns=panel.columns,sort=panel.sort,row=panel.row,col=panel.col,sizeX=panel.size_x,sizeY=panel.size_y,rest=_objectWithoutProperties(panel,["columns","sort","row","col","size_x","size_y"]);var panelIndex=panel.panelIndex?panel.panelIndex.toString():uuid_default.a.v4();return _objectSpread(_objectSpread({},rest),{},{version:version,panelIndex:panelIndex,gridData:{x:(col-1)*PANEL_WIDTH_SCALE_FACTOR,y:(row-1)*heightScaleFactor,w:sizeX?sizeX*PANEL_WIDTH_SCALE_FACTOR:DEFAULT_PANEL_WIDTH,h:sizeY?sizeY*heightScaleFactor:DEFAULT_PANEL_HEIGHT,i:panelIndex},embeddableConfig:embeddableConfig})}function migrate610PanelToLatest(panel,version,useMargins,uiState){["w","x","h","y"].forEach((function(key){if(panel.gridData[key]===undefined){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.panel.unableToMigratePanelDataForSixThreeZeroErrorMessage",{defaultMessage:'Unable to migrate panel data for "6.3.0" backwards compatibility, panel does not contain expected field: {key}',values:{key:key}}))}}));var embeddableConfig=uiState?uiState["P-".concat(panel.panelIndex)]||{}:{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;var columns=panel.columns,sort=panel.sort,rest=_objectWithoutProperties(panel,["columns","sort"]);var panelIndex=panel.panelIndex?panel.panelIndex.toString():uuid_default.a.v4();return _objectSpread(_objectSpread({},rest),{},{version:version,panelIndex:panelIndex,gridData:{w:panel.gridData.w*PANEL_WIDTH_SCALE_FACTOR,h:panel.gridData.h*heightScaleFactor,x:panel.gridData.x*PANEL_WIDTH_SCALE_FACTOR,y:panel.gridData.y*heightScaleFactor,i:panel.gridData.i},embeddableConfig:embeddableConfig})}function migrate620PanelToLatest(panel,version,useMargins){var embeddableConfig=panel.embeddableConfig||{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;var columns=panel.columns,sort=panel.sort,rest=_objectWithoutProperties(panel,["columns","sort"]);var panelIndex=panel.panelIndex?panel.panelIndex.toString():uuid_default.a.v4();return _objectSpread(_objectSpread({},rest),{},{version:version,panelIndex:panelIndex,gridData:{w:panel.gridData.w*PANEL_WIDTH_SCALE_FACTOR,h:panel.gridData.h*heightScaleFactor,x:panel.gridData.x*PANEL_WIDTH_SCALE_FACTOR,y:panel.gridData.y*heightScaleFactor,i:panel.gridData.i},embeddableConfig:embeddableConfig})}function migrate630PanelToLatest(panel,version){var embeddableConfig=panel.embeddableConfig||{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var columns=panel.columns,sort=panel.sort,rest=_objectWithoutProperties(panel,["columns","sort"]);var panelIndex=panel.panelIndex?panel.panelIndex.toString():uuid_default.a.v4();return _objectSpread(_objectSpread({},rest),{},{version:version,panelIndex:panelIndex,embeddableConfig:embeddableConfig})}function migrate640To720PanelsToLatest(panel,version){var panelIndex=panel.panelIndex?panel.panelIndex.toString():uuid_default.a.v4();return _objectSpread(_objectSpread({},panel),{},{version:version,panelIndex:panelIndex})}function migratePanelsTo730(panels,version,useMargins,uiState){return panels.map((function(panel){if(isPre61Panel(panel)){return migratePre61PanelToLatest(panel,version,useMargins,uiState)}if(is61Panel(panel)){return migrate610PanelToLatest(panel,version,useMargins,uiState)}if(is62Panel(panel)){return migrate620PanelToLatest(panel,version,useMargins)}if(is63Panel(panel)){return migrate630PanelToLatest(panel,version)}if(is640To720Panel(panel)){return migrate640To720PanelsToLatest(panel,version)}return panel}))}function migrateAppState(appState,kibanaVersion,usageCollection){if(!appState.panels){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.panel.invalidData",{defaultMessage:"Invalid data in url"}))}var panelNeedsMigration=appState.panels.some((function(panel){if(panel.version===undefined)return true;var version=panel.version;if(usageCollection){usageCollection.reportUiStats("DashboardPanelVersionInUrl",METRIC_TYPE.LOADED,"".concat(version))}return semver_default.a.satisfies(version,"<7.3")}));if(panelNeedsMigration){appState.panels=migratePanelsTo730(appState.panels,kibanaVersion,appState.useMargins,appState.uiState);delete appState.uiState}return appState}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getDashboardIdFromUrl(url){var _url$match;var _ref=(_url$match=url.match(/view\/(.*?)(\/|\?|$)/))!==null&&_url$match!==void 0?_url$match:[undefined,undefined],_ref2=_slicedToArray(_ref,2),dashboardId=_ref2[1];return dashboardId!==null&&dashboardId!==void 0?dashboardId:undefined}function migrateLegacyQuery(query){if(!Object(external_kbnSharedDeps_Lodash_["has"])(query,"language")){return{query:query,language:"lucene"}}return query}function embeddable_saved_object_converters_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function embeddable_saved_object_converters_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){embeddable_saved_object_converters_ownKeys(Object(source),true).forEach((function(key){embeddable_saved_object_converters_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{embeddable_saved_object_converters_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function embeddable_saved_object_converters_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function convertSavedDashboardPanelToPanelState(savedDashboardPanel){return{type:savedDashboardPanel.type,gridData:savedDashboardPanel.gridData,explicitInput:embeddable_saved_object_converters_objectSpread(embeddable_saved_object_converters_objectSpread(embeddable_saved_object_converters_objectSpread({id:savedDashboardPanel.panelIndex},savedDashboardPanel.id!==undefined&&{savedObjectId:savedDashboardPanel.id}),savedDashboardPanel.title!==undefined&&{title:savedDashboardPanel.title}),savedDashboardPanel.embeddableConfig)}}function convertPanelStateToSavedDashboardPanel(panelState,version){var customTitle=panelState.explicitInput.title?panelState.explicitInput.title:undefined;var savedObjectId=panelState.explicitInput.savedObjectId;return embeddable_saved_object_converters_objectSpread(embeddable_saved_object_converters_objectSpread({version:version,type:panelState.type,gridData:panelState.gridData,panelIndex:panelState.explicitInput.id,embeddableConfig:Object(external_kbnSharedDeps_Lodash_["omit"])(panelState.explicitInput,["id","savedObjectId"])},customTitle&&{title:customTitle}),savedObjectId!==undefined&&{id:savedObjectId})}var kibanaUtils_public_=__webpack_require__(17);function dashboard_state_manager_objectWithoutProperties(source,excluded){if(source==null)return{};var target=dashboard_state_manager_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function dashboard_state_manager_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||dashboard_state_manager_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dashboard_state_manager_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return dashboard_state_manager_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dashboard_state_manager_arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return dashboard_state_manager_arrayLikeToArray(arr)}function dashboard_state_manager_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function dashboard_state_manager_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function dashboard_state_manager_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){dashboard_state_manager_ownKeys(Object(source),true).forEach((function(key){dashboard_state_manager_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{dashboard_state_manager_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function dashboard_state_manager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function dashboard_state_manager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function dashboard_state_manager_createClass(Constructor,protoProps,staticProps){if(protoProps)dashboard_state_manager_defineProperties(Constructor.prototype,protoProps);if(staticProps)dashboard_state_manager_defineProperties(Constructor,staticProps);return Constructor}function dashboard_state_manager_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var dashboard_state_manager_DashboardStateManager=function(){dashboard_state_manager_createClass(DashboardStateManager,[{key:"appState",get:function get(){return this.stateContainer.get()}},{key:"appState$",get:function get(){return this.stateContainer.state$}}]);function DashboardStateManager(_ref){var _this=this;var savedDashboard=_ref.savedDashboard,hideWriteControls=_ref.hideWriteControls,kibanaVersion=_ref.kibanaVersion,kbnUrlStateStorage=_ref.kbnUrlStateStorage,history=_ref.history,usageCollection=_ref.usageCollection;dashboard_state_manager_classCallCheck(this,DashboardStateManager);dashboard_state_manager_defineProperty(this,"savedDashboard",void 0);dashboard_state_manager_defineProperty(this,"lastSavedDashboardFilters",void 0);dashboard_state_manager_defineProperty(this,"stateDefaults",void 0);dashboard_state_manager_defineProperty(this,"hideWriteControls",void 0);dashboard_state_manager_defineProperty(this,"kibanaVersion",void 0);dashboard_state_manager_defineProperty(this,"isDirty",void 0);dashboard_state_manager_defineProperty(this,"changeListeners",void 0);dashboard_state_manager_defineProperty(this,"stateContainer",void 0);dashboard_state_manager_defineProperty(this,"stateContainerChangeSub",void 0);dashboard_state_manager_defineProperty(this,"STATE_STORAGE_KEY","_a");dashboard_state_manager_defineProperty(this,"kbnUrlStateStorage",void 0);dashboard_state_manager_defineProperty(this,"stateSyncRef",void 0);dashboard_state_manager_defineProperty(this,"history",void 0);dashboard_state_manager_defineProperty(this,"usageCollection",void 0);this.history=history;this.kibanaVersion=kibanaVersion;this.savedDashboard=savedDashboard;this.hideWriteControls=hideWriteControls;this.usageCollection=usageCollection;this.stateDefaults=migrateAppState(getAppStateDefaults(this.savedDashboard,this.hideWriteControls),kibanaVersion,usageCollection);this.kbnUrlStateStorage=kbnUrlStateStorage;var initialState=migrateAppState(dashboard_state_manager_objectSpread(dashboard_state_manager_objectSpread({},this.stateDefaults),this.kbnUrlStateStorage.get(this.STATE_STORAGE_KEY)),kibanaVersion,usageCollection);this.stateContainer=Object(kibanaUtils_public_["createStateContainer"])(initialState,{set:function set(state){return function(prop,value){return dashboard_state_manager_objectSpread(dashboard_state_manager_objectSpread({},state),{},{[prop]:value})}},setOption:function setOption(state){return function(option,value){return dashboard_state_manager_objectSpread(dashboard_state_manager_objectSpread({},state),{},{options:dashboard_state_manager_objectSpread(dashboard_state_manager_objectSpread({},state.options),{},{[option]:value})})}}});this.isDirty=false;this.lastSavedDashboardFilters=this.getFilterState();this.changeListeners=[];this.stateContainerChangeSub=this.stateContainer.state$.subscribe((function(){_this.isDirty=_this.checkIsDirty();_this.changeListeners.forEach((function(listener){return listener({dirty:_this.isDirty})}))}));this.stateSyncRef=Object(kibanaUtils_public_["syncState"])({storageKey:this.STATE_STORAGE_KEY,stateContainer:dashboard_state_manager_objectSpread(dashboard_state_manager_objectSpread({},this.stateContainer),{},{get:function get(){return _this.toUrlState(_this.stateContainer.get())},set:function set(state){if(state){var currentDashboardIdInUrl=getDashboardIdFromUrl(history.location.pathname);if(currentDashboardIdInUrl!==_this.savedDashboard.id)return;_this.stateContainer.set(dashboard_state_manager_objectSpread(dashboard_state_manager_objectSpread({},_this.stateDefaults),state))}else{}}}),stateStorage:this.kbnUrlStateStorage})}dashboard_state_manager_createClass(DashboardStateManager,[{key:"startStateSyncing",value:function startStateSyncing(){this.saveState({replace:true});this.stateSyncRef.start()}},{key:"registerChangeListener",value:function registerChangeListener(callback){this.changeListeners.push(callback)}},{key:"handleDashboardContainerChanges",value:function handleDashboardContainerChanges(dashboardContainer){var _this2=this;var dirty=false;var dirtyBecauseOfInitialStateMigration=false;var savedDashboardPanelMap={};var input=dashboardContainer.getInput();this.getPanels().forEach((function(savedDashboardPanel){if(input.panels[savedDashboardPanel.panelIndex]!==undefined){savedDashboardPanelMap[savedDashboardPanel.panelIndex]=savedDashboardPanel}else{dirty=true}}));var convertedPanelStateMap={};Object.values(input.panels).forEach((function(panelState){if(savedDashboardPanelMap[panelState.explicitInput.id]===undefined){dirty=true}convertedPanelStateMap[panelState.explicitInput.id]=convertPanelStateToSavedDashboardPanel(panelState,_this2.kibanaVersion);if(!external_kbnSharedDeps_Lodash_default.a.isEqual(convertedPanelStateMap[panelState.explicitInput.id],savedDashboardPanelMap[panelState.explicitInput.id])){var _savedDashboardPanelM,_convertedPanelStateM;dirty=true;var oldVersion=(_savedDashboardPanelM=savedDashboardPanelMap[panelState.explicitInput.id])===null||_savedDashboardPanelM===void 0?void 0:_savedDashboardPanelM.version;var newVersion=(_convertedPanelStateM=convertedPanelStateMap[panelState.explicitInput.id])===null||_convertedPanelStateM===void 0?void 0:_convertedPanelStateM.version;if(oldVersion&&newVersion&&oldVersion!==newVersion){dirtyBecauseOfInitialStateMigration=true}}}));if(dirty){this.stateContainer.transitions.set("panels",Object.values(convertedPanelStateMap));if(dirtyBecauseOfInitialStateMigration){this.saveState({replace:true})}}if(input.isFullScreenMode!==this.getFullScreenMode()){this.setFullScreenMode(input.isFullScreenMode)}if(input.expandedPanelId!==this.getExpandedPanelId()){this.setExpandedPanelId(input.expandedPanelId)}if(!external_kbnSharedDeps_Lodash_default.a.isEqual(input.query,this.getQuery())){this.setQuery(input.query)}this.changeListeners.forEach((function(listener){return listener({dirty:dirty})}))}},{key:"getFullScreenMode",value:function getFullScreenMode(){return this.appState.fullScreenMode}},{key:"setFullScreenMode",value:function setFullScreenMode(fullScreenMode){this.stateContainer.transitions.set("fullScreenMode",fullScreenMode)}},{key:"getExpandedPanelId",value:function getExpandedPanelId(){return this.appState.expandedPanelId}},{key:"setExpandedPanelId",value:function setExpandedPanelId(expandedPanelId){this.stateContainer.transitions.set("expandedPanelId",expandedPanelId)}},{key:"setFilters",value:function setFilters(filters){this.stateContainer.transitions.set("filters",filters)}},{key:"resetState",value:function resetState(){this.savedDashboard.title=this.savedDashboard.lastSavedTitle;this.stateDefaults=migrateAppState(getAppStateDefaults(this.savedDashboard,this.hideWriteControls),this.kibanaVersion,this.usageCollection);this.stateDefaults.query=this.lastSavedDashboardFilters.query;this.stateDefaults.filters=_toConsumableArray(this.getLastSavedFilterBars());this.isDirty=false;this.stateContainer.set(this.stateDefaults)}},{key:"getFilterState",value:function getFilterState(){return{timeTo:this.savedDashboard.timeTo,timeFrom:this.savedDashboard.timeFrom,filterBars:this.savedDashboard.getFilters(),query:this.savedDashboard.getQuery()}}},{key:"getTitle",value:function getTitle(){return this.appState.title}},{key:"isSaved",value:function isSaved(){return!!this.savedDashboard.id}},{key:"isNew",value:function isNew(){return!this.isSaved()}},{key:"getDescription",value:function getDescription(){return this.appState.description}},{key:"setDescription",value:function setDescription(description){this.stateContainer.transitions.set("description",description)}},{key:"setTitle",value:function setTitle(title){this.savedDashboard.title=title;this.stateContainer.transitions.set("title",title)}},{key:"getAppState",value:function getAppState(){return this.stateContainer.get()}},{key:"getQuery",value:function getQuery(){return migrateLegacyQuery(this.stateContainer.get().query)}},{key:"getSavedQueryId",value:function getSavedQueryId(){return this.stateContainer.get().savedQuery}},{key:"setSavedQueryId",value:function setSavedQueryId(id){this.stateContainer.transitions.set("savedQuery",id)}},{key:"getUseMargins",value:function getUseMargins(){return this.appState.options.useMargins===undefined?false:this.appState.options.useMargins}},{key:"setUseMargins",value:function setUseMargins(useMargins){this.stateContainer.transitions.setOption("useMargins",useMargins)}},{key:"getHidePanelTitles",value:function getHidePanelTitles(){return this.appState.options.hidePanelTitles}},{key:"setHidePanelTitles",value:function setHidePanelTitles(hidePanelTitles){this.stateContainer.transitions.setOption("hidePanelTitles",hidePanelTitles)}},{key:"getTimeRestore",value:function getTimeRestore(){return this.appState.timeRestore}},{key:"setTimeRestore",value:function setTimeRestore(timeRestore){this.stateContainer.transitions.set("timeRestore",timeRestore)}},{key:"getIsTimeSavedWithDashboard",value:function getIsTimeSavedWithDashboard(){return this.savedDashboard.timeRestore}},{key:"getLastSavedFilterBars",value:function getLastSavedFilterBars(){return this.lastSavedDashboardFilters.filterBars}},{key:"getLastSavedQuery",value:function getLastSavedQuery(){return this.lastSavedDashboardFilters.query}},{key:"getQueryChanged",value:function getQueryChanged(){var currentQuery=this.appState.query;var lastSavedQuery=this.getLastSavedQuery();var query=migrateLegacyQuery(currentQuery);var isLegacyStringQuery=external_kbnSharedDeps_Lodash_default.a.isString(lastSavedQuery)&&external_kbnSharedDeps_Lodash_default.a.isPlainObject(currentQuery)&&external_kbnSharedDeps_Lodash_default.a.has(currentQuery,"query");if(isLegacyStringQuery){return lastSavedQuery!==query.query}return!external_kbnSharedDeps_Lodash_default.a.isEqual(currentQuery,lastSavedQuery)}},{key:"getFilterBarChanged",value:function getFilterBarChanged(){return!external_kbnSharedDeps_Lodash_default.a.isEqual(filter_utils_FilterUtils.cleanFiltersForComparison(this.appState.filters),filter_utils_FilterUtils.cleanFiltersForComparison(this.getLastSavedFilterBars()))}},{key:"getTimeChanged",value:function getTimeChanged(timeFilter){return!filter_utils_FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeFrom,timeFilter.getTime().from)||!filter_utils_FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeTo,timeFilter.getTime().to)}},{key:"getViewMode",value:function getViewMode(){return this.hideWriteControls?embeddable_plugin["ViewMode"].VIEW:this.appState.viewMode}},{key:"getIsViewMode",value:function getIsViewMode(){return this.getViewMode()===embeddable_plugin["ViewMode"].VIEW}},{key:"getIsEditMode",value:function getIsEditMode(){return this.getViewMode()===embeddable_plugin["ViewMode"].EDIT}},{key:"getIsDirty",value:function getIsDirty(timeFilter){var hasTimeFilterChanged=timeFilter?this.getFiltersChanged(timeFilter):false;return this.getIsEditMode()&&(this.isDirty||hasTimeFilterChanged)}},{key:"getPanels",value:function getPanels(){return this.appState.panels}},{key:"updatePanel",value:function updatePanel(panelIndex,panelAttributes){var foundPanel=this.getPanels().find((function(panel){return panel.panelIndex===panelIndex}));Object.assign(foundPanel,panelAttributes);return foundPanel}},{key:"getChangedFilterTypes",value:function getChangedFilterTypes(timeFilter){var changedFilters=[];if(this.getFilterBarChanged()){changedFilters.push("filter")}if(this.getQueryChanged()){changedFilters.push("query")}if(this.savedDashboard.timeRestore&&this.getTimeChanged(timeFilter)){changedFilters.push("time range")}return changedFilters}},{key:"getFiltersChanged",value:function getFiltersChanged(timeFilter){return this.getChangedFilterTypes(timeFilter).length>0}},{key:"syncTimefilterWithDashboardTime",value:function syncTimefilterWithDashboardTime(timeFilter){if(!this.getIsTimeSavedWithDashboard()){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.stateManager.timeNotSavedWithDashboardErrorMessage",{defaultMessage:"The time is not saved with this dashboard so should not be synced."}))}if(this.savedDashboard.timeFrom&&this.savedDashboard.timeTo){timeFilter.setTime({from:this.savedDashboard.timeFrom,to:this.savedDashboard.timeTo})}}},{key:"syncTimefilterWithDashboardRefreshInterval",value:function syncTimefilterWithDashboardRefreshInterval(timeFilter){if(!this.getIsTimeSavedWithDashboard()){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.stateManager.timeNotSavedWithDashboardErrorMessage",{defaultMessage:"The time is not saved with this dashboard so should not be synced."}))}if(this.savedDashboard.refreshInterval){timeFilter.setRefreshInterval(this.savedDashboard.refreshInterval)}}},{key:"saveState",value:function saveState(_ref2){var replace=_ref2.replace;this.kbnUrlStateStorage.set(this.STATE_STORAGE_KEY,this.toUrlState(this.stateContainer.get()));return this.kbnUrlStateStorage.flush({replace:replace})}},{key:"changeDashboardUrl",value:function changeDashboardUrl(pathname){var updated=this.saveState({replace:false});this.history[updated?"replace":"push"](dashboard_state_manager_objectSpread(dashboard_state_manager_objectSpread({},this.history.location),{},{pathname:pathname}))}},{key:"setQuery",value:function setQuery(query){this.stateContainer.transitions.set("query",query)}},{key:"applyFilters",value:function applyFilters(query,filters){this.savedDashboard.searchSource.setField("query",query);this.savedDashboard.searchSource.setField("filter",filters);this.stateContainer.transitions.set("query",query)}},{key:"switchViewMode",value:function switchViewMode(newMode){this.stateContainer.transitions.set("viewMode",newMode)}},{key:"destroy",value:function destroy(){this.stateContainerChangeSub.unsubscribe();this.savedDashboard.destroy();if(this.stateSyncRef){this.stateSyncRef.stop()}}},{key:"checkIsDirty",value:function checkIsDirty(){var propsToIgnore=["viewMode","filters","query"];var initial=external_kbnSharedDeps_Lodash_default.a.omit(this.stateDefaults,propsToIgnore);var current=external_kbnSharedDeps_Lodash_default.a.omit(this.stateContainer.get(),propsToIgnore);return!external_kbnSharedDeps_Lodash_default.a.isEqual(initial,current)}},{key:"toUrlState",value:function toUrlState(state){if(state.viewMode===embeddable_plugin["ViewMode"].VIEW){var panels=state.panels,stateWithoutPanels=dashboard_state_manager_objectWithoutProperties(state,["panels"]);return stateWithoutPanels}return state}}]);return DashboardStateManager}();var dashboard_constants=__webpack_require__(7);var TopNavIds={SHARE:"share",OPTIONS:"options",SAVE:"save",EXIT_EDIT_MODE:"exitEditMode",ENTER_EDIT_MODE:"enterEditMode",CLONE:"clone",FULL_SCREEN:"fullScreenMode",VISUALIZE:"visualize",ADD_EXISTING:"addExisting"};function getTopNavConfig(dashboardMode,actions,hideWriteControls,onAppLeave){switch(dashboardMode){case embeddable_plugin["ViewMode"].VIEW:return hideWriteControls?[getFullScreenConfig(actions[TopNavIds.FULL_SCREEN]),getShareConfig(actions[TopNavIds.SHARE])]:[getFullScreenConfig(actions[TopNavIds.FULL_SCREEN]),getShareConfig(actions[TopNavIds.SHARE]),getCloneConfig(actions[TopNavIds.CLONE]),getEditConfig(actions[TopNavIds.ENTER_EDIT_MODE])];case embeddable_plugin["ViewMode"].EDIT:return[getOptionsConfig(actions[TopNavIds.OPTIONS]),getShareConfig(actions[TopNavIds.SHARE]),getAddConfig(actions[TopNavIds.ADD_EXISTING]),getViewConfig(actions[TopNavIds.EXIT_EDIT_MODE]),getSaveConfig(actions[TopNavIds.SAVE]),getCreateNewConfig(actions[TopNavIds.VISUALIZE])];default:return[]}}function getFullScreenConfig(action){return{id:"full-screen",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.fullScreenButtonAriaLabel",{defaultMessage:"full screen"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.fullScreenConfigDescription",{defaultMessage:"Full Screen Mode"}),testId:"dashboardFullScreenMode",run:action}}function getEditConfig(action){return{emphasize:true,id:"edit",iconType:"pencil",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.editButtonAriaLabel",{defaultMessage:"edit"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.editConfigDescription",{defaultMessage:"Switch to edit mode"}),testId:"dashboardEditMode",className:"eui-hideFor--s eui-hideFor--xs",run:action}}function getSaveConfig(action){return{id:"save",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.saveButtonAriaLabel",{defaultMessage:"save"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.saveConfigDescription",{defaultMessage:"Save your dashboard"}),testId:"dashboardSaveMenuItem",run:action}}function getViewConfig(action){return{id:"cancel",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.cancelButtonAriaLabel",{defaultMessage:"cancel"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.viewConfigDescription",{defaultMessage:"Cancel editing and switch to view-only mode"}),testId:"dashboardViewOnlyMode",run:action}}function getCloneConfig(action){return{id:"clone",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.cloneButtonAriaLabel",{defaultMessage:"clone"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.cloneConfigDescription",{defaultMessage:"Create a copy of your dashboard"}),testId:"dashboardClone",run:action}}function getAddConfig(action){return{id:"add",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.addButtonAriaLabel",{defaultMessage:"add"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.addConfigDescription",{defaultMessage:"Add a panel to the dashboard"}),testId:"dashboardAddPanelButton",run:action}}function getCreateNewConfig(action){return{emphasize:true,iconType:"plusInCircleFilled",id:"addNew",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.addNewButtonAriaLabel",{defaultMessage:"Create new"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.addNewConfigDescription",{defaultMessage:"Create a new panel on this dashboard"}),testId:"dashboardAddNewPanelButton",run:action}}function getShareConfig(action){return{id:"share",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.shareButtonAriaLabel",{defaultMessage:"share"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.shareConfigDescription",{defaultMessage:"Share Dashboard"}),testId:"shareTopNavButton",run:action,disableButton:!action}}function getOptionsConfig(action){return{id:"options",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.optionsButtonAriaLabel",{defaultMessage:"options"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.optionsConfigDescription",{defaultMessage:"Options"}),testId:"dashboardOptionsButton",run:action}}function getDashboardTitle(title,viewMode,isDirty,isNew){var isEditMode=viewMode===embeddable_plugin["ViewMode"].EDIT;var displayTitle;var newDashboardTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.savedDashboard.newDashboardTitle",{defaultMessage:"New Dashboard"});var dashboardTitle=isNew?newDashboardTitle:title;if(isEditMode&&isDirty){displayTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.strings.dashboardUnsavedEditTitle",{defaultMessage:"Editing {title} (unsaved)",values:{title:dashboardTitle}})}else if(isEditMode){displayTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.strings.dashboardEditTitle",{defaultMessage:"Editing {title}",values:{title:dashboardTitle}})}else{displayTitle=dashboardTitle}return displayTitle}var kibanaLegacy_public_=__webpack_require__(32);function dashboard_app_controller_slicedToArray(arr,i){return dashboard_app_controller_arrayWithHoles(arr)||dashboard_app_controller_iterableToArrayLimit(arr,i)||dashboard_app_controller_unsupportedIterableToArray(arr,i)||dashboard_app_controller_nonIterableRest()}function dashboard_app_controller_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dashboard_app_controller_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function dashboard_app_controller_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function dashboard_app_controller_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function dashboard_app_controller_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){dashboard_app_controller_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){dashboard_app_controller_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function dashboard_app_controller_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function dashboard_app_controller_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){dashboard_app_controller_ownKeys(Object(source),true).forEach((function(key){dashboard_app_controller_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{dashboard_app_controller_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function dashboard_app_controller_toConsumableArray(arr){return dashboard_app_controller_arrayWithoutHoles(arr)||dashboard_app_controller_iterableToArray(arr)||dashboard_app_controller_unsupportedIterableToArray(arr)||dashboard_app_controller_nonIterableSpread()}function dashboard_app_controller_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dashboard_app_controller_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return dashboard_app_controller_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dashboard_app_controller_arrayLikeToArray(o,minLen)}function dashboard_app_controller_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function dashboard_app_controller_arrayWithoutHoles(arr){if(Array.isArray(arr))return dashboard_app_controller_arrayLikeToArray(arr)}function dashboard_app_controller_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function dashboard_app_controller_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function dashboard_app_controller_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UrlParams;(function(UrlParams){UrlParams["SHOW_TOP_MENU"]="show-top-menu";UrlParams["SHOW_QUERY_INPUT"]="show-query-input";UrlParams["SHOW_TIME_FILTER"]="show-time-filter";UrlParams["SHOW_FILTER_BAR"]="show-filter-bar";UrlParams["HIDE_FILTER_BAR"]="hide-filter-bar"})(UrlParams||(UrlParams={}));var dashboard_app_controller_DashboardAppController=function DashboardAppController(_ref){var _this=this;var pluginInitializerContext=_ref.pluginInitializerContext,$scope=_ref.$scope,$route=_ref.$route,$routeParams=_ref.$routeParams,dashboardConfig=_ref.dashboardConfig,indexPatterns=_ref.indexPatterns,savedQueryService=_ref.savedQueryService,embeddable=_ref.embeddable,share=_ref.share,dashboardCapabilities=_ref.dashboardCapabilities,scopedHistory=_ref.scopedHistory,_ref$embeddableCapabi=_ref.embeddableCapabilities,visualizeCapabilities=_ref$embeddableCapabi.visualizeCapabilities,mapsCapabilities=_ref$embeddableCapabi.mapsCapabilities,queryService=_ref.data.query,_ref$core=_ref.core,notifications=_ref$core.notifications,overlays=_ref$core.overlays,chrome=_ref$core.chrome,injectedMetadata=_ref$core.injectedMetadata,fatalErrors=_ref$core.fatalErrors,uiSettings=_ref$core.uiSettings,savedObjects=_ref$core.savedObjects,http=_ref$core.http,i18nStart=_ref$core.i18n,history=_ref.history,setHeaderActionMenu=_ref.setHeaderActionMenu,kbnUrlStateStorage=_ref.kbnUrlStateStorage,usageCollection=_ref.usageCollection,navigation=_ref.navigation;dashboard_app_controller_classCallCheck(this,DashboardAppController);dashboard_app_controller_defineProperty(this,"appStatus",void 0);var filterManager=queryService.filterManager;var timefilter=queryService.timefilter.timefilter;var queryStringManager=queryService.queryString;var isEmbeddedExternally=Boolean($routeParams.embed);var shouldForceDisplay=function shouldForceDisplay(param){return isEmbeddedExternally&&Boolean($routeParams[param])};var forceShowTopNavMenu=shouldForceDisplay(UrlParams.SHOW_TOP_MENU);var forceShowQueryInput=shouldForceDisplay(UrlParams.SHOW_QUERY_INPUT);var forceShowDatePicker=shouldForceDisplay(UrlParams.SHOW_TIME_FILTER);var forceHideFilterBar=shouldForceDisplay(UrlParams.HIDE_FILTER_BAR);var lastReloadRequestTime=0;var dash=$scope.dash=$route.current.locals.dash;if(dash.id){chrome.docTitle.change(dash.title)}var incomingEmbeddable=embeddable.getStateTransfer(scopedHistory()).getIncomingEmbeddablePackage();var dashboardStateManager=new dashboard_state_manager_DashboardStateManager({savedDashboard:dash,hideWriteControls:dashboardConfig.getHideWriteControls(),kibanaVersion:pluginInitializerContext.env.packageInfo.version,kbnUrlStateStorage:kbnUrlStateStorage,history:history,usageCollection:usageCollection});filterManager.setAppFilters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(dashboardStateManager.appState.filters));queryStringManager.setQuery(migrateLegacyQuery(dashboardStateManager.appState.query));var stopSyncingAppFilters=Object(public_["connectToQueryState"])(queryService,{set:function set(_ref2){var filters=_ref2.filters,query=_ref2.query;dashboardStateManager.setFilters(filters||[]);dashboardStateManager.setQuery(query||queryStringManager.getDefaultQuery())},get:function get(){return{filters:dashboardStateManager.appState.filters,query:dashboardStateManager.getQuery()}},state$:dashboardStateManager.appState$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["map"])((function(state){return{filters:state.filters,query:queryStringManager.formatQuery(state.query)}})))},{filters:public_["esFilters"].FilterStateStore.APP_STATE,query:true});if(dashboardStateManager.getIsTimeSavedWithDashboard()){var initialGlobalStateInUrl=kbnUrlStateStorage.get("_g");if(!(initialGlobalStateInUrl===null||initialGlobalStateInUrl===void 0?void 0:initialGlobalStateInUrl.time)){dashboardStateManager.syncTimefilterWithDashboardTime(timefilter)}if(!(initialGlobalStateInUrl===null||initialGlobalStateInUrl===void 0?void 0:initialGlobalStateInUrl.refreshInterval)){dashboardStateManager.syncTimefilterWithDashboardRefreshInterval(timefilter)}}var _syncQueryStateWithUr=Object(public_["syncQueryStateWithUrl"])(queryService,kbnUrlStateStorage),stopSyncingQueryServiceStateWithUrl=_syncQueryStateWithUr.stop;dashboardStateManager.startStateSyncing();$scope.showSaveQuery=dashboardCapabilities.saveQuery;var getShouldShowEditHelp=function getShouldShowEditHelp(){return!dashboardStateManager.getPanels().length&&dashboardStateManager.getIsEditMode()&&!dashboardConfig.getHideWriteControls()};var getShouldShowViewHelp=function getShouldShowViewHelp(){return!dashboardStateManager.getPanels().length&&dashboardStateManager.getIsViewMode()&&!dashboardConfig.getHideWriteControls()};var shouldShowUnauthorizedEmptyState=function shouldShowUnauthorizedEmptyState(){var readonlyMode=!dashboardStateManager.getPanels().length&&!getShouldShowEditHelp()&&!getShouldShowViewHelp()&&dashboardConfig.getHideWriteControls();var userHasNoPermissions=!dashboardStateManager.getPanels().length&&!visualizeCapabilities.save&&!mapsCapabilities.save;return readonlyMode||userHasNoPermissions};var addVisualization=function addVisualization(){navActions[TopNavIds.VISUALIZE]()};function getDashboardIndexPatterns(container){var panelIndexPatterns=[];Object.values(container.getChildIds()).forEach((function(id){var _panelIndexPatterns;var embeddableInstance=container.getChild(id);if(Object(embeddable_public_["isErrorEmbeddable"])(embeddableInstance))return;var embeddableIndexPatterns=embeddableInstance.getOutput().indexPatterns;if(!embeddableIndexPatterns)return;(_panelIndexPatterns=panelIndexPatterns).push.apply(_panelIndexPatterns,dashboard_app_controller_toConsumableArray(embeddableIndexPatterns))}));panelIndexPatterns=Object(external_kbnSharedDeps_Lodash_["uniqBy"])(panelIndexPatterns,"id");return panelIndexPatterns}var updateIndexPatternsOperator=Object(external_kbnSharedDeps_Rxjs_["pipe"])(Object(external_kbnSharedDeps_RxjsOperators_["filter"])((function(container){return!!container&&!Object(embeddable_public_["isErrorEmbeddable"])(container)})),Object(external_kbnSharedDeps_RxjsOperators_["map"])(getDashboardIndexPatterns),Object(external_kbnSharedDeps_RxjsOperators_["distinctUntilChanged"])((function(a,b){return fast_deep_equal_default()(a.map((function(ip){return ip.id})),b.map((function(ip){return ip.id})))})),Object(external_kbnSharedDeps_RxjsOperators_["switchMap"])((function(panelIndexPatterns){return new external_kbnSharedDeps_Rxjs_["Observable"]((function(observer){if(panelIndexPatterns&&panelIndexPatterns.length>0){$scope.$evalAsync((function(){if(observer.closed)return;$scope.indexPatterns=panelIndexPatterns;observer.complete()}))}else{indexPatterns.getDefault().then((function(defaultIndexPattern){if(observer.closed)return;$scope.$evalAsync((function(){if(observer.closed)return;$scope.indexPatterns=[defaultIndexPattern];observer.complete()}))}))}}))})));var getEmptyScreenProps=function getEmptyScreenProps(shouldShowEditHelp,isEmptyInReadOnlyMode){var emptyScreenProps={onLinkClick:shouldShowEditHelp?$scope.showAddPanel:$scope.enterEditMode,showLinkToVisualize:shouldShowEditHelp,uiSettings:uiSettings,http:http};if(shouldShowEditHelp){emptyScreenProps.onVisualizeClick=addVisualization}if(isEmptyInReadOnlyMode){emptyScreenProps.isReadonlyMode=true}return emptyScreenProps};var getDashboardInput=function getDashboardInput(){var _incomingEmbeddable;var embeddablesMap={};dashboardStateManager.getPanels().forEach((function(panel){embeddablesMap[panel.panelIndex]=convertSavedDashboardPanelToPanelState(panel)}));if(((_incomingEmbeddable=incomingEmbeddable)===null||_incomingEmbeddable===void 0?void 0:_incomingEmbeddable.embeddableId)&&embeddablesMap[incomingEmbeddable.embeddableId]){var originalPanelState=embeddablesMap[incomingEmbeddable.embeddableId];embeddablesMap[incomingEmbeddable.embeddableId]={gridData:originalPanelState.gridData,type:incomingEmbeddable.type,explicitInput:dashboard_app_controller_objectSpread(dashboard_app_controller_objectSpread(dashboard_app_controller_objectSpread({},originalPanelState.explicitInput),incomingEmbeddable.input),{},{id:incomingEmbeddable.embeddableId})};incomingEmbeddable=undefined}var shouldShowEditHelp=getShouldShowEditHelp();var shouldShowViewHelp=getShouldShowViewHelp();var isEmptyInReadonlyMode=shouldShowUnauthorizedEmptyState();return{id:dashboardStateManager.savedDashboard.id||"",filters:filterManager.getFilters(),hidePanelTitles:dashboardStateManager.getHidePanelTitles(),query:$scope.model.query,timeRange:dashboard_app_controller_objectSpread({},external_kbnSharedDeps_Lodash_default.a.cloneDeep(timefilter.getTime())),refreshConfig:timefilter.getRefreshInterval(),viewMode:dashboardStateManager.getViewMode(),panels:embeddablesMap,isFullScreenMode:dashboardStateManager.getFullScreenMode(),isEmbeddedExternally:isEmbeddedExternally,isEmptyState:shouldShowEditHelp||shouldShowViewHelp||isEmptyInReadonlyMode,useMargins:dashboardStateManager.getUseMargins(),lastReloadRequestTime:lastReloadRequestTime,title:dashboardStateManager.getTitle(),description:dashboardStateManager.getDescription(),expandedPanelId:dashboardStateManager.getExpandedPanelId()}};var updateState=function updateState(){$scope.model={query:dashboardStateManager.getQuery(),filters:filterManager.getFilters(),timeRestore:dashboardStateManager.getTimeRestore(),title:dashboardStateManager.getTitle(),description:dashboardStateManager.getDescription(),timeRange:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval()};$scope.panels=dashboardStateManager.getPanels()};updateState();var dashboardContainer;var inputSubscription;var outputSubscription;var dashboardDom=document.getElementById("dashboardViewport");var dashboardFactory=embeddable.getEmbeddableFactory(application_embeddable["DASHBOARD_CONTAINER_TYPE"]);if(dashboardFactory){dashboardFactory.create(getDashboardInput()).then((function(container){if(container&&!Object(embeddable_public_["isErrorEmbeddable"])(container)){dashboardContainer=container;dashboardContainer.renderEmpty=function(){var shouldShowEditHelp=getShouldShowEditHelp();var shouldShowViewHelp=getShouldShowViewHelp();var isEmptyInReadOnlyMode=shouldShowUnauthorizedEmptyState();var isEmptyState=shouldShowEditHelp||shouldShowViewHelp||isEmptyInReadOnlyMode;return isEmptyState?external_kbnSharedDeps_React_default.a.createElement(DashboardEmptyScreen,getEmptyScreenProps(shouldShowEditHelp,isEmptyInReadOnlyMode)):null};outputSubscription=Object(external_kbnSharedDeps_Rxjs_["merge"])(dashboardContainer.getOutput$(),dashboardContainer.getOutput$().pipe(Object(external_kbnSharedDeps_RxjsOperators_["map"])((function(){return dashboardContainer.getChildIds()})),Object(external_kbnSharedDeps_RxjsOperators_["distinctUntilChanged"])(fast_deep_equal_default.a),Object(external_kbnSharedDeps_RxjsOperators_["switchMap"])((function(newChildIds){return external_kbnSharedDeps_Rxjs_["merge"].apply(void 0,dashboard_app_controller_toConsumableArray(newChildIds.map((function(childId){return dashboardContainer.getChild(childId).getOutput$().pipe(Object(external_kbnSharedDeps_RxjsOperators_["catchError"])((function(){return external_kbnSharedDeps_Rxjs_["EMPTY"]})))}))))})))).pipe(Object(external_kbnSharedDeps_RxjsOperators_["mapTo"])(dashboardContainer),Object(external_kbnSharedDeps_RxjsOperators_["startWith"])(dashboardContainer),updateIndexPatternsOperator).subscribe();inputSubscription=dashboardContainer.getInput$().subscribe((function(){var dirty=false;if(!public_["esFilters"].compareFilters(container.getInput().filters,filterManager.getFilters(),public_["esFilters"].COMPARE_ALL_OPTIONS)){filterManager.addFilters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(container.getInput().filters));dashboardStateManager.applyFilters($scope.model.query,container.getInput().filters);dirty=true}dashboardStateManager.handleDashboardContainerChanges(container);$scope.$evalAsync((function(){if(dirty){updateState()}}))}));dashboardStateManager.registerChangeListener((function(){refreshDashboardContainer()}));if(incomingEmbeddable&&(!incomingEmbeddable.embeddableId||!container.getInput().panels[incomingEmbeddable.embeddableId])){container.addNewEmbeddable(incomingEmbeddable.type,incomingEmbeddable.input)}}if(dashboardDom&&container){container.render(dashboardDom)}}))}this.appStatus={dirty:!dash.id};dashboardStateManager.registerChangeListener((function(status){_this.appStatus.dirty=status.dirty||!dash.id;updateState()}));dashboardStateManager.applyFilters(dashboardStateManager.getQuery()||queryStringManager.getDefaultQuery(),filterManager.getFilters());timefilter.disableTimeRangeSelector();timefilter.disableAutoRefreshSelector();var landingPageUrl=function landingPageUrl(){return"#".concat(dashboard_constants["a"].LANDING_PAGE_PATH)};var getDashTitle=function getDashTitle(){return getDashboardTitle(dashboardStateManager.getTitle(),dashboardStateManager.getViewMode(),dashboardStateManager.getIsDirty(timefilter),dashboardStateManager.isNew())};var updateBreadcrumbs=function updateBreadcrumbs(){chrome.setBreadcrumbs([{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.dashboardAppBreadcrumbsTitle",{defaultMessage:"Dashboard"}),href:landingPageUrl()},{text:getDashTitle()}])};updateBreadcrumbs();dashboardStateManager.registerChangeListener(updateBreadcrumbs);var getChangesFromAppStateForContainerState=function getChangesFromAppStateForContainerState(){var appStateDashboardInput=getDashboardInput();if(!dashboardContainer||Object(embeddable_public_["isErrorEmbeddable"])(dashboardContainer)){return appStateDashboardInput}var containerInput=dashboardContainer.getInput();var differences={};if(!public_["esFilters"].compareFilters(containerInput.filters,appStateDashboardInput.filters,public_["esFilters"].COMPARE_ALL_OPTIONS)){differences.filters=appStateDashboardInput.filters}Object.keys(external_kbnSharedDeps_Lodash_default.a.omit(containerInput,["filters"])).forEach((function(key){var containerValue=containerInput[key];var appStateValue=appStateDashboardInput[key];if(!external_kbnSharedDeps_Lodash_default.a.isEqual(containerValue,appStateValue)){differences[key]=appStateValue}}));return Object.values(differences).length===0?undefined:external_kbnSharedDeps_Lodash_default.a.cloneDeep(differences)};var refreshDashboardContainer=function refreshDashboardContainer(){var changes=getChangesFromAppStateForContainerState();if(changes&&dashboardContainer){dashboardContainer.updateInput(changes)}};$scope.handleRefresh=function(_payload,isUpdate){if(isUpdate===false){lastReloadRequestTime=(new Date).getTime();refreshDashboardContainer()}};var updateStateFromSavedQuery=function updateStateFromSavedQuery(savedQuery){var allFilters=filterManager.getFilters();dashboardStateManager.applyFilters(savedQuery.attributes.query,allFilters);if(savedQuery.attributes.timefilter){timefilter.setTime({from:savedQuery.attributes.timefilter.from,to:savedQuery.attributes.timefilter.to});if(savedQuery.attributes.timefilter.refreshInterval){timefilter.setRefreshInterval(savedQuery.attributes.timefilter.refreshInterval)}}setTimeout((function(){filterManager.setFilters(allFilters)}),0)};$scope.$watch("savedQuery",(function(newSavedQuery){if(!newSavedQuery)return;dashboardStateManager.setSavedQueryId(newSavedQuery.id);updateStateFromSavedQuery(newSavedQuery)}));$scope.$watch((function(){return dashboardStateManager.getSavedQueryId()}),(function(newSavedQueryId){if(!newSavedQueryId){$scope.savedQuery=undefined;return}if(!$scope.savedQuery||newSavedQueryId!==$scope.savedQuery.id){savedQueryService.getSavedQuery(newSavedQueryId).then((function(savedQuery){$scope.$evalAsync((function(){$scope.savedQuery=savedQuery;updateStateFromSavedQuery(savedQuery)}))}))}}));$scope.indexPatterns=[];$scope.$watch((function(){return dashboardCapabilities.saveQuery}),(function(newCapability){$scope.showSaveQuery=newCapability}));var onSavedQueryIdChange=function onSavedQueryIdChange(savedQueryId){dashboardStateManager.setSavedQueryId(savedQueryId)};var shouldShowFilterBar=function shouldShowFilterBar(forceHide){return!forceHide&&($scope.model.filters.length>0||!dashboardStateManager.getFullScreenMode())};var shouldShowNavBarComponent=function shouldShowNavBarComponent(forceShow){return(forceShow||$scope.isVisible)&&!dashboardStateManager.getFullScreenMode()};var getNavBarProps=function getNavBarProps(){var isFullScreenMode=dashboardStateManager.getFullScreenMode();var screenTitle=dashboardStateManager.getTitle();var showTopNavMenu=shouldShowNavBarComponent(forceShowTopNavMenu);var showQueryInput=shouldShowNavBarComponent(forceShowQueryInput);var showDatePicker=shouldShowNavBarComponent(forceShowDatePicker);var showQueryBar=showQueryInput||showDatePicker;var showFilterBar=shouldShowFilterBar(forceHideFilterBar);var showSearchBar=showQueryBar||showFilterBar;return{appName:"dashboard",config:showTopNavMenu?$scope.topNavMenu:undefined,className:isFullScreenMode?"kbnTopNavMenu-isFullScreen":undefined,screenTitle:screenTitle,showTopNavMenu:showTopNavMenu,showSearchBar:showSearchBar,showQueryBar:showQueryBar,showQueryInput:showQueryInput,showDatePicker:showDatePicker,showFilterBar:showFilterBar,indexPatterns:$scope.indexPatterns,showSaveQuery:$scope.showSaveQuery,savedQuery:$scope.savedQuery,onSavedQueryIdChange:onSavedQueryIdChange,savedQueryId:dashboardStateManager.getSavedQueryId(),useDefaultBehaviors:true,onQuerySubmit:$scope.handleRefresh}};var dashboardNavBar=document.getElementById("dashboardChrome");var updateNavBar=function updateNavBar(){external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(navigation.ui.TopNavMenu,_extends({},getNavBarProps(),isEmbeddedExternally?{}:{setMenuMountPoint:setHeaderActionMenu})),dashboardNavBar)};var unmountNavBar=function unmountNavBar(){if(dashboardNavBar){external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(dashboardNavBar)}};$scope.timefilterSubscriptions$=new external_kbnSharedDeps_Rxjs_["Subscription"];var timeChanges$=Object(external_kbnSharedDeps_Rxjs_["merge"])(timefilter.getRefreshIntervalUpdate$(),timefilter.getTimeUpdate$());$scope.timefilterSubscriptions$.add(Object(kibanaLegacy_public_["subscribeWithScope"])($scope,timeChanges$,{next:function next(){updateState();refreshDashboardContainer()}},(function(error){return Object(kibanaLegacy_public_["addFatalError"])(fatalErrors,error)})));function updateViewMode(newMode){dashboardStateManager.switchViewMode(newMode)}var onChangeViewMode=function onChangeViewMode(newMode){var isPageRefresh=newMode===dashboardStateManager.getViewMode();var isLeavingEditMode=!isPageRefresh&&newMode===embeddable_public_["ViewMode"].VIEW;var willLoseChanges=isLeavingEditMode&&dashboardStateManager.getIsDirty(timefilter);if(!willLoseChanges){updateViewMode(newMode);return}function revertChangesAndExitEditMode(){dashboardStateManager.resetState();updateViewMode(embeddable_public_["ViewMode"].VIEW);if(dashboardStateManager.getIsTimeSavedWithDashboard()){dashboardStateManager.syncTimefilterWithDashboardTime(timefilter);dashboardStateManager.syncTimefilterWithDashboardRefreshInterval(timefilter)}dashboardStateManager.changeDashboardUrl(dash.id?Object(dashboard_constants["b"])(dash.id):dashboard_constants["a"].CREATE_NEW_DASHBOARD_URL)}overlays.openConfirm(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.changeViewModeConfirmModal.discardChangesDescription",{defaultMessage:"Once you discard your changes, there's no getting them back."}),{confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.changeViewModeConfirmModal.confirmButtonLabel",{defaultMessage:"Discard changes"}),cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.changeViewModeConfirmModal.cancelButtonLabel",{defaultMessage:"Continue editing"}),defaultFocusedButton:external_kbnSharedDeps_ElasticEui_["EUI_MODAL_CANCEL_BUTTON"],title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.changeViewModeConfirmModal.discardChangesTitle",{defaultMessage:"Discard changes to dashboard?"})}).then((function(isConfirmed){if(isConfirmed){revertChangesAndExitEditMode()}}));updateNavBar()};function save(saveOptions){return saveDashboard(external_kbnSharedDeps_Angular_default.a.toJson,timefilter,dashboardStateManager,saveOptions).then((function(id){if(id){notifications.toasts.addSuccess({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.dashboardWasSavedSuccessMessage",{defaultMessage:"Dashboard '{dashTitle}' was saved",values:{dashTitle:dash.title}}),"data-test-subj":"saveDashboardSuccess"});if(dash.id!==$routeParams.id){dashboardStateManager.changeDashboardUrl(Object(dashboard_constants["b"])(dash.id))}else{chrome.docTitle.change(dash.lastSavedTitle);updateViewMode(embeddable_public_["ViewMode"].VIEW)}}return{id:id}})).catch((function(error){notifications.toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.dashboardWasNotSavedDangerMessage",{defaultMessage:"Dashboard '{dashTitle}' was not saved. Error: {errorMessage}",values:{dashTitle:dash.title,errorMessage:error.message}}),"data-test-subj":"saveDashboardFailure"});return{error:error}}))}$scope.showAddPanel=function(){dashboardStateManager.setFullScreenMode(false);navActions[TopNavIds.ADD_EXISTING]()};$scope.enterEditMode=function(){dashboardStateManager.setFullScreenMode(false);navActions[TopNavIds.ENTER_EDIT_MODE]()};var navActions={};navActions[TopNavIds.FULL_SCREEN]=function(){dashboardStateManager.setFullScreenMode(true);updateNavBar()};navActions[TopNavIds.EXIT_EDIT_MODE]=function(){return onChangeViewMode(embeddable_public_["ViewMode"].VIEW)};navActions[TopNavIds.ENTER_EDIT_MODE]=function(){return onChangeViewMode(embeddable_public_["ViewMode"].EDIT)};navActions[TopNavIds.SAVE]=function(){var currentTitle=dashboardStateManager.getTitle();var currentDescription=dashboardStateManager.getDescription();var currentTimeRestore=dashboardStateManager.getTimeRestore();var onSave=function onSave(_ref3){var newTitle=_ref3.newTitle,newDescription=_ref3.newDescription,newCopyOnSave=_ref3.newCopyOnSave,newTimeRestore=_ref3.newTimeRestore,isTitleDuplicateConfirmed=_ref3.isTitleDuplicateConfirmed,onTitleDuplicate=_ref3.onTitleDuplicate;dashboardStateManager.setTitle(newTitle);dashboardStateManager.setDescription(newDescription);dashboardStateManager.savedDashboard.copyOnSave=newCopyOnSave;dashboardStateManager.setTimeRestore(newTimeRestore);var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then((function(response){if(!response.id){dashboardStateManager.setTitle(currentTitle);dashboardStateManager.setDescription(currentDescription);dashboardStateManager.setTimeRestore(currentTimeRestore)}return response}))};var dashboardSaveModal=external_kbnSharedDeps_React_default.a.createElement(save_modal_DashboardSaveModal,{onSave:onSave,onClose:function onClose(){},title:currentTitle,description:currentDescription,timeRestore:currentTimeRestore,showCopyOnSave:dash.id?true:false});Object(savedObjects_public_["showSaveModal"])(dashboardSaveModal,i18nStart.Context)};navActions[TopNavIds.CLONE]=function(){var currentTitle=dashboardStateManager.getTitle();var onClone=function onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate){dashboardStateManager.savedDashboard.copyOnSave=true;dashboardStateManager.setTitle(newTitle);var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then((function(response){if(response.error){dashboardStateManager.setTitle(currentTitle)}updateNavBar();return response}))};showCloneModal(onClone,currentTitle)};navActions[TopNavIds.ADD_EXISTING]=function(){if(dashboardContainer&&!Object(embeddable_public_["isErrorEmbeddable"])(dashboardContainer)){Object(embeddable_public_["openAddPanelFlyout"])({embeddable:dashboardContainer,getAllFactories:embeddable.getEmbeddableFactories,getFactory:embeddable.getEmbeddableFactory,notifications:notifications,overlays:overlays,SavedObjectFinder:Object(savedObjects_public_["getSavedObjectFinder"])(savedObjects,uiSettings)})}};navActions[TopNavIds.VISUALIZE]=dashboard_app_controller_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var type,factory;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:type="visualization";factory=embeddable.getEmbeddableFactory(type);if(factory){_context.next=4;break}throw new embeddable_public_["EmbeddableFactoryNotFoundError"](type);case 4:_context.next=6;return factory.create({},dashboardContainer);case 6:case"end":return _context.stop()}}}),_callee)})));navActions[TopNavIds.OPTIONS]=function(anchorElement){showOptionsPopover({anchorElement:anchorElement,useMargins:dashboardStateManager.getUseMargins(),onUseMarginsChange:function onUseMarginsChange(isChecked){dashboardStateManager.setUseMargins(isChecked)},hidePanelTitles:dashboardStateManager.getHidePanelTitles(),onHidePanelTitlesChange:function onHidePanelTitlesChange(isChecked){dashboardStateManager.setHidePanelTitles(isChecked)}})};if(share){navActions[TopNavIds.SHARE]=function(anchorElement){var EmbedUrlParamExtension=function EmbedUrlParamExtension(_ref5){var setParamValue=_ref5.setParamValue;var _useState=Object(external_kbnSharedDeps_React_["useState"])({[UrlParams.SHOW_TOP_MENU]:false,[UrlParams.SHOW_QUERY_INPUT]:false,[UrlParams.SHOW_TIME_FILTER]:false,[UrlParams.SHOW_FILTER_BAR]:true}),_useState2=dashboard_app_controller_slicedToArray(_useState,2),urlParamsSelectedMap=_useState2[0],setUrlParamsSelectedMap=_useState2[1];var checkboxes=[{id:UrlParams.SHOW_TOP_MENU,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.embedUrlParamExtension.topMenu",{defaultMessage:"Top menu"})},{id:UrlParams.SHOW_QUERY_INPUT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.embedUrlParamExtension.query",{defaultMessage:"Query"})},{id:UrlParams.SHOW_TIME_FILTER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.embedUrlParamExtension.timeFilter",{defaultMessage:"Time filter"})},{id:UrlParams.SHOW_FILTER_BAR,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.embedUrlParamExtension.filterBar",{defaultMessage:"Filter bar"})}];var handleChange=function handleChange(param){var urlParamsSelectedMapUpdate=dashboard_app_controller_objectSpread(dashboard_app_controller_objectSpread({},urlParamsSelectedMap),{},{[param]:!urlParamsSelectedMap[param]});setUrlParamsSelectedMap(urlParamsSelectedMapUpdate);var urlParamValues={[UrlParams.SHOW_TOP_MENU]:urlParamsSelectedMap[UrlParams.SHOW_TOP_MENU],[UrlParams.SHOW_QUERY_INPUT]:urlParamsSelectedMap[UrlParams.SHOW_QUERY_INPUT],[UrlParams.SHOW_TIME_FILTER]:urlParamsSelectedMap[UrlParams.SHOW_TIME_FILTER],[UrlParams.HIDE_FILTER_BAR]:!urlParamsSelectedMap[UrlParams.SHOW_FILTER_BAR],[param===UrlParams.SHOW_FILTER_BAR?UrlParams.HIDE_FILTER_BAR:param]:param===UrlParams.SHOW_FILTER_BAR?urlParamsSelectedMap[UrlParams.SHOW_FILTER_BAR]:!urlParamsSelectedMap[param]};setParamValue(urlParamValues)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckboxGroup"],{options:checkboxes,idToSelectedMap:urlParamsSelectedMap,onChange:handleChange,legend:{children:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.embedUrlParamExtension.include",{defaultMessage:"Include"})},"data-test-subj":"embedUrlParamExtension"})};share.toggleShareContextMenu({anchorElement:anchorElement,allowEmbed:true,allowShortUrl:!dashboardConfig.getHideWriteControls()||dashboardCapabilities.createShortUrl,shareableUrl:Object(kibanaUtils_public_["unhashUrl"])(window.location.href),objectId:dash.id,objectType:"dashboard",sharingData:{title:dash.title},isDirty:dashboardStateManager.getIsDirty(),embedUrlParamExtensions:[{paramName:"embed",component:EmbedUrlParamExtension}]})}}updateViewMode(dashboardStateManager.getViewMode());var filterChanges=Object(external_kbnSharedDeps_Rxjs_["merge"])(filterManager.getUpdates$(),queryStringManager.getUpdates$()).pipe(Object(external_kbnSharedDeps_RxjsOperators_["debounceTime"])(100));var updateSubscription=filterChanges.subscribe({next:function next(){$scope.model.filters=filterManager.getFilters();$scope.model.query=queryStringManager.getQuery();dashboardStateManager.applyFilters($scope.model.query,$scope.model.filters);if(dashboardContainer){dashboardContainer.updateInput({filters:$scope.model.filters,query:$scope.model.query})}}});var visibleSubscription=chrome.getIsVisible$().subscribe((function(isVisible){$scope.$evalAsync((function(){$scope.isVisible=isVisible;updateNavBar()}))}));dashboardStateManager.registerChangeListener((function(){$scope.topNavMenu=getTopNavConfig(dashboardStateManager.getViewMode(),navActions,dashboardConfig.getHideWriteControls());updateNavBar()}));$scope.$watch("indexPatterns",(function(){updateNavBar()}));$scope.$on("$destroy",(function(){unmountNavBar();updateSubscription.unsubscribe();stopSyncingQueryServiceStateWithUrl();stopSyncingAppFilters();visibleSubscription.unsubscribe();$scope.timefilterSubscriptions$.unsubscribe();dashboardStateManager.destroy();if(inputSubscription){inputSubscription.unsubscribe()}if(outputSubscription){outputSubscription.unsubscribe()}if(dashboardContainer){dashboardContainer.destroy()}}))};function dashboard_app_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function dashboard_app_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){dashboard_app_ownKeys(Object(source),true).forEach((function(key){dashboard_app_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{dashboard_app_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function dashboard_app_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function initDashboardAppDirective(app,deps){app.directive("dashboardApp",(function(){return{restrict:"E",controllerAs:"dashboardApp",controller:function controller($scope,$route,$routeParams,kbnUrlStateStorage,history){return new dashboard_app_controller_DashboardAppController(dashboard_app_objectSpread({$route:$route,$scope:$scope,$routeParams:$routeParams,indexPatterns:deps.data.indexPatterns,kbnUrlStateStorage:kbnUrlStateStorage,history:history},deps))}}}))}var kibanaReact_public_=__webpack_require__(9);function dashboard_listing_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function dashboard_listing_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function dashboard_listing_createClass(Constructor,protoProps,staticProps){if(protoProps)dashboard_listing_defineProperties(Constructor.prototype,protoProps);if(staticProps)dashboard_listing_defineProperties(Constructor,staticProps);return Constructor}function dashboard_listing_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)dashboard_listing_setPrototypeOf(subClass,superClass)}function dashboard_listing_setPrototypeOf(o,p){dashboard_listing_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return dashboard_listing_setPrototypeOf(o,p)}function dashboard_listing_createSuper(Derived){var hasNativeReflectConstruct=dashboard_listing_isNativeReflectConstruct();return function _createSuperInternal(){var Super=dashboard_listing_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=dashboard_listing_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return dashboard_listing_possibleConstructorReturn(this,result)}}function dashboard_listing_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return dashboard_listing_assertThisInitialized(self)}function dashboard_listing_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function dashboard_listing_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function dashboard_listing_getPrototypeOf(o){dashboard_listing_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return dashboard_listing_getPrototypeOf(o)}var EMPTY_FILTER="";var dashboard_listing_DashboardListing=function(_React$Component){dashboard_listing_inherits(DashboardListing,_React$Component);var _super=dashboard_listing_createSuper(DashboardListing);function DashboardListing(props){dashboard_listing_classCallCheck(this,DashboardListing);return _super.call(this,props)}dashboard_listing_createClass(DashboardListing,[{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["TableListView"],{headingId:"dashboardListingHeading",createItem:this.props.hideWriteControls?null:this.props.createItem,findItems:this.props.findItems,deleteItems:this.props.hideWriteControls?null:this.props.deleteItems,editItem:this.props.hideWriteControls?null:this.props.editItem,tableColumns:this.getTableColumns(),listingLimit:this.props.listingLimit,initialFilter:this.props.initialFilter,initialPageSize:this.props.initialPageSize,noItemsFragment:this.getNoItemsMessage(),entityName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.listing.table.entityName",{defaultMessage:"dashboard"}),entityNamePlural:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.listing.table.entityNamePlural",{defaultMessage:"dashboards"}),tableListTitle:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.listing.dashboardsTitle",{defaultMessage:"Dashboards"}),toastNotifications:this.props.core.notifications.toasts,uiSettings:this.props.core.uiSettings}))}},{key:"getNoItemsMessage",value:function getNoItemsMessage(){var _this=this;if(this.props.hideWriteControls){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"visualizeApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",{id:"dashboardListingHeading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.noItemsMessage",defaultMessage:"Looks like you don't have any dashboards."}))}))}return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"dashboardApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",{id:"dashboardListingHeading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.createNewDashboard.title",defaultMessage:"Create your first dashboard"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.createNewDashboard.combineDataViewFromKibanaAppDescription",defaultMessage:"You can combine data views from any Kibana app into one dashboard and see everything in one place."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.createNewDashboard.newToKibanaDescription",defaultMessage:"New to Kibana? {sampleDataInstallLink} to take a test drive.",values:{sampleDataInstallLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:function onClick(){return _this.props.core.application.navigateToApp("home",{path:"#/tutorial_directory/sampleData"})}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.createNewDashboard.sampleDataInstallLinkText",defaultMessage:"Install some sample data"}))}}))),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:this.props.createItem,fill:true,iconType:"plusInCircle","data-test-subj":"createDashboardPromptButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.createNewDashboard.createButtonLabel",defaultMessage:"Create new dashboard"}))}))}},{key:"getTableColumns",value:function getTableColumns(){var _this2=this;var tableColumns=[{field:"title",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.listing.table.titleColumnName",{defaultMessage:"Title"}),sortable:true,render:function render(field,record){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:_this2.props.getViewUrl(record),"data-test-subj":"dashboardListingTitleLink-".concat(record.title.split(" ").join("-"))},field)}},{field:"description",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.listing.table.descriptionColumnName",{defaultMessage:"Description"}),dataType:"string",sortable:true}];return tableColumns}}]);return DashboardListing}(external_kbnSharedDeps_React_default.a.Component);dashboard_listing_DashboardListing.defaultProps={initialFilter:EMPTY_FILTER};function addHelpMenuToAppChrome(chrome,docLinks){chrome.setHelpExtension({appName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.helpMenu.appName",{defaultMessage:"Dashboards"}),links:[{linkType:"documentation",href:"".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(docLinks.DOC_LINK_VERSION,"/dashboard.html")}]})}function legacy_app_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function legacy_app_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){legacy_app_ownKeys(Object(source),true).forEach((function(key){legacy_app_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{legacy_app_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function legacy_app_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function initDashboardApp(app,deps){initDashboardAppDirective(app,deps);app.directive("dashboardListing",(function(reactDirective){return reactDirective(dashboard_listing_DashboardListing,[["core",{watchDepth:"reference"}],["createItem",{watchDepth:"reference"}],["getViewUrl",{watchDepth:"reference"}],["editItem",{watchDepth:"reference"}],["findItems",{watchDepth:"reference"}],["deleteItems",{watchDepth:"reference"}],["listingLimit",{watchDepth:"reference"}],["hideWriteControls",{watchDepth:"reference"}],["initialFilter",{watchDepth:"reference"}],["initialPageSize",{watchDepth:"reference"}]])}));function createNewDashboardCtrl($scope){$scope.visitVisualizeAppLinkText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.visitVisualizeAppLinkText",{defaultMessage:"visit the Visualize app"});addHelpMenuToAppChrome(deps.chrome,deps.core.docLinks)}app.factory("history",(function(){return Object(node_modules_history["createHashHistory"])()}));app.factory("kbnUrlStateStorage",(function(history){return Object(kibanaUtils_public_["createKbnUrlStateStorage"])(legacy_app_objectSpread({history:history,useHash:deps.uiSettings.get("state:storeInSessionStorage")},Object(kibanaUtils_public_["withNotifyOnErrors"])(deps.core.notifications.toasts)))}));app.config((function($routeProvider){var defaults={reloadOnSearch:false,requireUICapability:"dashboard.show",badge:function badge(){if(deps.dashboardCapabilities.showWriteControls){return undefined}return{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.badge.readOnly.tooltip",{defaultMessage:"Unable to save dashboards"}),iconType:"glasses"}}};$routeProvider.when("/",{redirectTo:dashboard_constants["a"].LANDING_PAGE_PATH}).when(dashboard_constants["a"].LANDING_PAGE_PATH,legacy_app_objectSpread(legacy_app_objectSpread({},defaults),{},{template:dashboard_listing_ng_wrapper,controller:function controller($scope,kbnUrlStateStorage,history){deps.core.chrome.docTitle.change(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.dashboardPageTitle",{defaultMessage:"Dashboards"}));var service=deps.savedDashboards;var dashboardConfig=deps.dashboardConfig;var _syncQueryStateWithUr=Object(public_["syncQueryStateWithUrl"])(deps.data.query,kbnUrlStateStorage),stopSyncingQueryServiceStateWithUrl=_syncQueryStateWithUr.stop;$scope.listingLimit=deps.savedObjects.settings.getListingLimit();$scope.initialPageSize=deps.savedObjects.settings.getPerPage();$scope.create=function(){history.push(dashboard_constants["a"].CREATE_NEW_DASHBOARD_URL)};$scope.find=function(search){return service.find(search,$scope.listingLimit)};$scope.editItem=function(_ref){var id=_ref.id;history.push("".concat(Object(dashboard_constants["b"])(id),"?_a=(viewMode:edit)"))};$scope.getViewUrl=function(_ref2){var id=_ref2.id;return deps.addBasePath("#".concat(Object(dashboard_constants["b"])(id)))};$scope.delete=function(dashboards){return service.delete(dashboards.map((function(d){return d.id})))};$scope.hideWriteControls=dashboardConfig.getHideWriteControls();$scope.initialFilter=Object(query_string["parse"])(history.location.search).filter||EMPTY_FILTER;deps.chrome.setBreadcrumbs([{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.dashboardBreadcrumbsTitle",{defaultMessage:"Dashboards"})}]);addHelpMenuToAppChrome(deps.chrome,deps.core.docLinks);$scope.core=deps.core;$scope.$on("$destroy",(function(){stopSyncingQueryServiceStateWithUrl()}))},resolve:{dash:function dash($route,history){return deps.data.indexPatterns.ensureDefaultIndexPattern(history).then((function(){var savedObjectsClient=deps.savedObjectsClient;var title=$route.current.params.title;if(title){return savedObjectsClient.find({search:'"'.concat(title,'"'),search_fields:"title",type:"dashboard"}).then((function(results){var matchingDashboards=results.savedObjects.filter((function(dashboard){return dashboard.attributes.title.toLowerCase()===title.toLowerCase()}));if(matchingDashboards.length===1){history.replace(Object(dashboard_constants["b"])(matchingDashboards[0].id))}else{history.replace("".concat(dashboard_constants["a"].LANDING_PAGE_PATH,'?filter="').concat(title,'"'));$route.reload()}return new Promise((function(){}))}))}}))}}})).when(dashboard_constants["a"].CREATE_NEW_DASHBOARD_URL,legacy_app_objectSpread(legacy_app_objectSpread({},defaults),{},{template:dashboard_app,controller:createNewDashboardCtrl,requireUICapability:"dashboard.createNew",resolve:{dash:function dash(history){return deps.data.indexPatterns.ensureDefaultIndexPattern(history).then((function(){return deps.savedDashboards.get()})).catch(Object(kibanaUtils_public_["redirectWhenMissing"])({history:history,navigateToApp:deps.core.application.navigateToApp,mapping:{dashboard:dashboard_constants["a"].LANDING_PAGE_PATH},toastNotifications:deps.core.notifications.toasts}))}}})).when(Object(dashboard_constants["b"])(":id"),legacy_app_objectSpread(legacy_app_objectSpread({},defaults),{},{template:dashboard_app,controller:createNewDashboardCtrl,resolve:{dash:function dash($route,history){var id=$route.current.params.id;return deps.data.indexPatterns.ensureDefaultIndexPattern(history).then((function(){return deps.savedDashboards.get(id)})).then((function(savedDashboard){deps.chrome.recentlyAccessed.add(savedDashboard.getFullPath(),savedDashboard.title,id);return savedDashboard})).catch((function(error){if(error instanceof kibanaUtils_public_["SavedObjectNotFound"]&&id==="create"){history.replace(legacy_app_objectSpread(legacy_app_objectSpread({},history.location),{},{pathname:dashboard_constants["a"].CREATE_NEW_DASHBOARD_URL}));deps.core.notifications.toasts.addWarning(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.urlWasRemovedInSixZeroWarningMessage",{defaultMessage:'The url "dashboard/create" was removed in 6.0. Please update your bookmarks.'}));return new Promise((function(){}))}else{deps.core.notifications.toasts.addDanger(error.message);history.push(dashboard_constants["a"].LANDING_PAGE_PATH);return new Promise((function(){}))}}))}}})).otherwise({resolveRedirectTo:function resolveRedirectTo($rootScope){var path=window.location.hash.substr(1);deps.restorePreviousUrl();$rootScope.$applyAsync((function(){var _deps$navigateToLegac=deps.navigateToLegacyKibanaUrl(path),navigated=_deps$navigateToLegac.navigated;if(!navigated){deps.navigateToDefaultApp()}}));return new Promise((function(){}))}})}))}var angular_route=__webpack_require__(127);var angularModuleInstance=null;var application_renderApp=function renderApp(element,appBasePath,deps){if(!angularModuleInstance){angularModuleInstance=createLocalAngularModule();Object(kibanaLegacy_public_["configureAppAngularModule"])(angularModuleInstance,{core:deps.core,env:deps.pluginInitializerContext.env},true,deps.scopedHistory);initDashboardApp(angularModuleInstance,deps)}var $injector=mountDashboardApp(appBasePath,element);return function(){$injector.get("kbnUrlStateStorage").cancel();$injector.get("$rootScope").$destroy()}};var mainTemplate=function mainTemplate(basePath){return'<div ng-view class="dshAppContainer">\n  <base href="'.concat(basePath,'" />\n</div>')};var moduleName="app/dashboard";var thirdPartyAngularDependencies=["ngSanitize","ngRoute","react"];function mountDashboardApp(appBasePath,element){var mountpoint=document.createElement("div");mountpoint.setAttribute("class","dshAppContainer");mountpoint.innerHTML=mainTemplate(appBasePath);var $injector=external_kbnSharedDeps_Angular_default.a.bootstrap(mountpoint,[moduleName]);element.appendChild(mountpoint);return $injector}function createLocalAngularModule(){createLocalI18nModule();createLocalIconModule();var dashboardAngularModule=external_kbnSharedDeps_Angular_default.a.module(moduleName,[].concat(thirdPartyAngularDependencies,["app/dashboard/I18n","app/dashboard/icon"]));return dashboardAngularModule}function createLocalIconModule(){external_kbnSharedDeps_Angular_default.a.module("app/dashboard/icon",["react"]).directive("icon",(function(reactDirective){return reactDirective(external_kbnSharedDeps_ElasticEui_["EuiIcon"])}))}function createLocalI18nModule(){external_kbnSharedDeps_Angular_default.a.module("app/dashboard/I18n",[]).provider("i18n",external_kbnSharedDeps_KbnI18nAngular_["I18nProvider"]).filter("i18n",external_kbnSharedDeps_KbnI18nAngular_["i18nFilter"]).directive("i18nId",external_kbnSharedDeps_KbnI18nAngular_["i18nDirective"])}}}]);