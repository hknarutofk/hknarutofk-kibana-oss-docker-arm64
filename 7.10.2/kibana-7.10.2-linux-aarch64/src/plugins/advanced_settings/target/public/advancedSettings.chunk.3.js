(window["advancedSettings_bundle_jsonpfunction"]=window["advancedSettings_bundle_jsonpfunction"]||[]).push([[3],[,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},,,,,,,,,,,function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(25);case"v7light":return __webpack_require__(27);case"v8dark":return __webpack_require__(29);case"v8light":return __webpack_require__(31)}},function(module,exports,__webpack_require__){var api=__webpack_require__(12);var content=__webpack_require__(26);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(13);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the "License"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.mgtAdvancedSettings__field + * {\n  margin-top: 16px; }\n\n.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle {\n  padding-left: 8px;\n  margin-left: -8px; }\n\n.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle {\n  box-shadow: -4px 0px #FFCE7A; }\n\n.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle {\n  box-shadow: -4px 0px #F66; }\n\n@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  .mgtAdvancedSettings__field {\n    min-height: 1px; }\n    .mgtAdvancedSettings__fieldRow {\n      min-height: 1px; } }\n\n.mgtAdvancedSettings__fieldTitleUnsavedIcon {\n  margin-left: 8px; }\n\n@media only screen and (max-width: 574px) {\n  .mgtAdvancedSettingsForm__unsavedCount {\n    display: none; } }\n\n.mgtAdvancedSettingsForm__unsavedCountMessage {\n  box-shadow: -4px 0px #FFCE7A;\n  padding-left: 8px; }\n\n.mgtAdvancedSettingsForm__button {\n  width: 100%; }\n\n.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body {\n  padding-bottom: 64px; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(12);var content=__webpack_require__(28);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(13);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the "License"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.mgtAdvancedSettings__field + * {\n  margin-top: 16px; }\n\n.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle {\n  padding-left: 8px;\n  margin-left: -8px; }\n\n.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle {\n  box-shadow: -4px 0px #F5A700; }\n\n.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle {\n  box-shadow: -4px 0px #BD271E; }\n\n@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  .mgtAdvancedSettings__field {\n    min-height: 1px; }\n    .mgtAdvancedSettings__fieldRow {\n      min-height: 1px; } }\n\n.mgtAdvancedSettings__fieldTitleUnsavedIcon {\n  margin-left: 8px; }\n\n@media only screen and (max-width: 574px) {\n  .mgtAdvancedSettingsForm__unsavedCount {\n    display: none; } }\n\n.mgtAdvancedSettingsForm__unsavedCountMessage {\n  box-shadow: -4px 0px #F5A700;\n  padding-left: 8px; }\n\n.mgtAdvancedSettingsForm__button {\n  width: 100%; }\n\n.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body {\n  padding-bottom: 64px; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(12);var content=__webpack_require__(30);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(13);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the "License"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.mgtAdvancedSettings__field + * {\n  margin-top: 16px; }\n\n.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle {\n  padding-left: 8px;\n  margin-left: -8px; }\n\n.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle {\n  box-shadow: -4px 0px #FFCE7A; }\n\n.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle {\n  box-shadow: -4px 0px #F66; }\n\n@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  .mgtAdvancedSettings__field {\n    min-height: 1px; }\n    .mgtAdvancedSettings__fieldRow {\n      min-height: 1px; } }\n\n.mgtAdvancedSettings__fieldTitleUnsavedIcon {\n  margin-left: 8px; }\n\n@media only screen and (max-width: 574px) {\n  .mgtAdvancedSettingsForm__unsavedCount {\n    display: none; } }\n\n.mgtAdvancedSettingsForm__unsavedCountMessage {\n  box-shadow: -4px 0px #FFCE7A;\n  padding-left: 8px; }\n\n.mgtAdvancedSettingsForm__button {\n  width: 100%; }\n\n.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body {\n  padding-bottom: 64px; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(12);var content=__webpack_require__(32);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(13);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the "License"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.mgtAdvancedSettings__field + * {\n  margin-top: 16px; }\n\n.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle {\n  padding-left: 8px;\n  margin-left: -8px; }\n\n.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle {\n  box-shadow: -4px 0px #F5A700; }\n\n.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle {\n  box-shadow: -4px 0px #BD271E; }\n\n@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  .mgtAdvancedSettings__field {\n    min-height: 1px; }\n    .mgtAdvancedSettings__fieldRow {\n      min-height: 1px; } }\n\n.mgtAdvancedSettings__fieldTitleUnsavedIcon {\n  margin-left: 8px; }\n\n@media only screen and (max-width: 574px) {\n  .mgtAdvancedSettingsForm__unsavedCount {\n    display: none; } }\n\n.mgtAdvancedSettingsForm__unsavedCountMessage {\n  box-shadow: -4px 0px #F5A700;\n  padding-left: 8px; }\n\n.mgtAdvancedSettingsForm__button {\n  width: 100%; }\n\n.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body {\n  padding-bottom: 64px; }\n',""]);module.exports=exports},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"mountManagementSection",(function(){return mountManagementSection}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(10);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(9);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(3);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var call_outs_CallOuts=function CallOuts(){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"advancedSettings.callOutCautionTitle",defaultMessage:"Caution: You can break stuff here"}),color:"warning",iconType:"bolt"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"advancedSettings.callOutCautionDescription",defaultMessage:"Be careful in here, these settings are for very advanced users only. Tweaks you make here can break large portions of Kibana. Some of these settings may be undocumented, unsupported or experimental. If a field has a default value, blanking the field will reset it to its default which may be unacceptable given other configuration directives. Deleting a custom setting will permanently remove it from Kibana's config."}))))};var lib=__webpack_require__(14);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var search_Search=function(_PureComponent){_inherits(Search,_PureComponent);var _super=_createSuper(Search);function Search(props){var _this;_classCallCheck(this,Search);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"categories",[]);_defineProperty(_assertThisInitialized(_this),"state",{isSearchTextValid:true,parseErrorMessage:null});_defineProperty(_assertThisInitialized(_this),"onChange",(function(_ref){var query=_ref.query,error=_ref.error;if(error){_this.setState({isSearchTextValid:false,parseErrorMessage:error.message});return}_this.setState({isSearchTextValid:true,parseErrorMessage:null});_this.props.onQueryChange({query:query})}));var categories=props.categories;_this.categories=categories.map((function(category){return{value:category,name:Object(lib["c"])(category)}}));return _this}_createClass(Search,[{key:"render",value:function render(){var query=this.props.query;var box={incremental:true,"data-test-subj":"settingsSearchBar","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.searchBarAriaLabel",{defaultMessage:"Search advanced settings"})};var filters=[{type:"field_value_selection",field:"category",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.categorySearchLabel",{defaultMessage:"Category"}),multiSelect:"or",options:this.categories}];var queryParseError;if(!this.state.isSearchTextValid){var parseErrorMsg=external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.searchBar.unableToParseQueryErrorMessage",{defaultMessage:"Unable to parse query"});queryParseError=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormErrorText"],null,"".concat(parseErrorMsg,". ").concat(this.state.parseErrorMessage))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSearchBar"],{box:box,filters:filters,onChange:this.onChange,query:query}),queryParseError)}}]);return Search}(external_kbnSharedDeps_React_["PureComponent"]);var external_kbnSharedDeps_Lodash_=__webpack_require__(8);var public_=__webpack_require__(11);var field=__webpack_require__(33);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){form_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function form_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function form_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function form_createClass(Constructor,protoProps,staticProps){if(protoProps)form_defineProperties(Constructor.prototype,protoProps);if(staticProps)form_defineProperties(Constructor,staticProps);return Constructor}function form_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)form_setPrototypeOf(subClass,superClass)}function form_setPrototypeOf(o,p){form_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return form_setPrototypeOf(o,p)}function form_createSuper(Derived){var hasNativeReflectConstruct=form_isNativeReflectConstruct();return function _createSuperInternal(){var Super=form_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=form_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return form_possibleConstructorReturn(this,result)}}function form_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return form_assertThisInitialized(self)}function form_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function form_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function form_getPrototypeOf(o){form_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return form_getPrototypeOf(o)}function form_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var form_Form=function(_PureComponent){form_inherits(Form,_PureComponent);var _super=form_createSuper(Form);function Form(){var _this;form_classCallCheck(this,Form);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));form_defineProperty(form_assertThisInitialized(_this),"state",{unsavedChanges:{},loading:false});form_defineProperty(form_assertThisInitialized(_this),"getSettingByKey",(function(key){return Object.values(_this.props.settings).flat().find((function(el){return el.name===key}))}));form_defineProperty(form_assertThisInitialized(_this),"getCountOfUnsavedChanges",(function(){return Object.keys(_this.state.unsavedChanges).length}));form_defineProperty(form_assertThisInitialized(_this),"getCountOfHiddenUnsavedChanges",(function(){var shownSettings=Object.values(_this.props.visibleSettings).flat().map((function(setting){return setting.name}));return Object.keys(_this.state.unsavedChanges).filter((function(key){return!shownSettings.includes(key)})).length}));form_defineProperty(form_assertThisInitialized(_this),"areChangesInvalid",(function(){var unsavedChanges=_this.state.unsavedChanges;return Object.values(unsavedChanges).some((function(_ref){var isInvalid=_ref.isInvalid;return isInvalid}))}));form_defineProperty(form_assertThisInitialized(_this),"handleChange",(function(key,change){var setting=_this.getSettingByKey(key);if(!setting){return}var type=setting.type,defVal=setting.defVal,value=setting.value;var savedValue=Object(field["getEditableValue"])(type,value,defVal);if(change.value===savedValue){return _this.clearChange(key)}_this.setState({unsavedChanges:_objectSpread(_objectSpread({},_this.state.unsavedChanges),{},{[key]:change})})}));form_defineProperty(form_assertThisInitialized(_this),"clearChange",(function(key){if(!_this.state.unsavedChanges[key]){return}var unsavedChanges=_objectSpread({},_this.state.unsavedChanges);delete unsavedChanges[key];_this.setState({unsavedChanges:unsavedChanges})}));form_defineProperty(form_assertThisInitialized(_this),"clearAllUnsaved",(function(){_this.setState({unsavedChanges:{}})}));form_defineProperty(form_assertThisInitialized(_this),"saveAll",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var unsavedChanges,configToSave,requiresReload;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setLoading(true);unsavedChanges=_this.state.unsavedChanges;if(!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(unsavedChanges)){_context.next=4;break}return _context.abrupt("return");case 4:configToSave={};requiresReload=false;Object.entries(unsavedChanges).forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2),name=_ref4[0],value=_ref4[1].value;var setting=_this.getSettingByKey(name);if(!setting){return}var defVal=setting.defVal,type=setting.type,requiresPageReload=setting.requiresPageReload;var valueToSave=value;var equalsToDefault=false;switch(type){case"array":valueToSave=valueToSave.trim();valueToSave=valueToSave===""?[]:valueToSave.split(",").map((function(val){return val.trim()}));equalsToDefault=valueToSave.join(",")===defVal.join(",");break;case"json":var isArray=Array.isArray(JSON.parse(defVal||"{}"));valueToSave=valueToSave.trim();valueToSave=valueToSave||(isArray?"[]":"{}");default:equalsToDefault=valueToSave===defVal}if(requiresPageReload){requiresReload=true}configToSave[name]=equalsToDefault?null:valueToSave}));_context.prev=7;_context.next=10;return _this.props.save(configToSave);case 10:_this.clearAllUnsaved();if(requiresReload){_this.renderPageReloadToast()}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context["catch"](7);_this.props.toasts.addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.form.saveErrorMessage",{defaultMessage:"Unable to save"}));case 17:_this.setLoading(false);case 18:case"end":return _context.stop()}}}),_callee,null,[[7,14]])}))));form_defineProperty(form_assertThisInitialized(_this),"renderPageReloadToast",(function(){_this.props.toasts.add({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.form.requiresPageReloadToastDescription",{defaultMessage:"One or more settings require you to reload the page to take effect."}),text:Object(public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",onClick:function onClick(){return window.location.reload()}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.form.requiresPageReloadToastButtonLabel",{defaultMessage:"Reload page"})))))),color:"success"})}));form_defineProperty(form_assertThisInitialized(_this),"renderCountOfUnsaved",(function(){var unsavedCount=_this.getCountOfUnsavedChanges();var hiddenUnsavedCount=_this.getCountOfHiddenUnsavedChanges();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{className:"mgtAdvancedSettingsForm__unsavedCountMessage",color:"ghost"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"advancedSettings.form.countOfSettingsChanged",defaultMessage:"{unsavedCount} unsaved {unsavedCount, plural, one {setting} other {settings} }{hiddenCount, plural, =0 {} other {, # hidden} }",values:{unsavedCount:unsavedCount,hiddenCount:hiddenUnsavedCount}}))}));form_defineProperty(form_assertThisInitialized(_this),"renderBottomBar",(function(){var areChangesInvalid=_this.areChangesInvalid();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBottomBar"],{"data-test-subj":"advancedSetting-bottomBar"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center",responsive:false,gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mgtAdvancedSettingsForm__unsavedCount"},external_kbnSharedDeps_React_default.a.createElement("p",{id:"aria-describedby.countOfUnsavedSettings"},_this.renderCountOfUnsaved())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"ghost",size:"s",iconType:"cross",onClick:_this.clearAllUnsaved,"aria-describedby":"aria-describedby.countOfUnsavedSettings","data-test-subj":"advancedSetting-cancelButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.form.cancelButtonLabel",{defaultMessage:"Cancel changes"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:areChangesInvalid&&external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.form.saveButtonTooltipWithInvalidChanges",{defaultMessage:"Fix invalid settings before saving."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{className:"mgtAdvancedSettingsForm__button",disabled:areChangesInvalid,color:"secondary",fill:true,size:"s",iconType:"check",onClick:_this.saveAll,"aria-describedby":"aria-describedby.countOfUnsavedSettings",isLoading:_this.state.loading,"data-test-subj":"advancedSetting-saveButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.form.saveButtonLabel",{defaultMessage:"Save changes"}))))))}));return _this}form_createClass(Form,[{key:"setLoading",value:function setLoading(loading){this.setState({loading:loading})}},{key:"renderClearQueryLink",value:function renderClearQueryLink(totalSettings,currentSettings){var clearQuery=this.props.clearQuery;if(totalSettings!==currentSettings){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"advancedSettings.form.searchResultText",defaultMessage:"Search terms are hiding {settingsCount} settings {clearSearch}",values:{settingsCount:totalSettings-currentSettings,clearSearch:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:clearQuery},external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"advancedSettings.form.clearSearchResultText",defaultMessage:"(clear search)"})))}})))}return null}},{key:"renderCategory",value:function renderCategory(category,settings,totalSettings){var _this2=this;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:category},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"baseline"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("h2",null,Object(lib["c"])(category))),this.renderClearQueryLink(totalSettings,settings.length))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),settings.map((function(setting){return external_kbnSharedDeps_React_default.a.createElement(field["Field"],{key:setting.name,setting:setting,handleChange:_this2.handleChange,unsavedChanges:_this2.state.unsavedChanges[setting.name],clearChange:_this2.clearChange,enableSaving:_this2.props.enableSaving,dockLinks:_this2.props.dockLinks,toasts:_this2.props.toasts})})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}))}},{key:"maybeRenderNoSettings",value:function maybeRenderNoSettings(clearQuery){if(this.props.showNoResultsMessage){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"advancedSettings.form.noSearchResultText",defaultMessage:"No settings found {clearSearch}",values:{clearSearch:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:clearQuery},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"advancedSettings.form.clearNoSearchResultText",defaultMessage:"(clear search)"}))}}))}return null}},{key:"render",value:function render(){var _this3=this;var unsavedChanges=this.state.unsavedChanges;var _this$props=this.props,visibleSettings=_this$props.visibleSettings,categories=_this$props.categories,categoryCounts=_this$props.categoryCounts,clearQuery=_this$props.clearQuery;var currentCategories=[];var hasUnsavedChanges=!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(unsavedChanges);if(hasUnsavedChanges){document.body.classList.add("kbnBody--mgtAdvancedSettingsHasBottomBar")}else{document.body.classList.remove("kbnBody--mgtAdvancedSettingsHasBottomBar")}categories.forEach((function(category){if(visibleSettings[category]&&visibleSettings[category].length){currentCategories.push(category)}}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("div",null,currentCategories.length?currentCategories.map((function(category){return _this3.renderCategory(category,visibleSettings[category],categoryCounts[category])})):this.maybeRenderNoSettings(clearQuery)),hasUnsavedChanges&&this.renderBottomBar())}}]);return Form}(external_kbnSharedDeps_React_["PureComponent"]);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||advanced_settings_voice_announcement_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function advanced_settings_voice_announcement_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return advanced_settings_voice_announcement_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return advanced_settings_voice_announcement_arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return advanced_settings_voice_announcement_arrayLikeToArray(arr)}function advanced_settings_voice_announcement_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function advanced_settings_voice_announcement_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function advanced_settings_voice_announcement_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function advanced_settings_voice_announcement_createClass(Constructor,protoProps,staticProps){if(protoProps)advanced_settings_voice_announcement_defineProperties(Constructor.prototype,protoProps);if(staticProps)advanced_settings_voice_announcement_defineProperties(Constructor,staticProps);return Constructor}function advanced_settings_voice_announcement_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)advanced_settings_voice_announcement_setPrototypeOf(subClass,superClass)}function advanced_settings_voice_announcement_setPrototypeOf(o,p){advanced_settings_voice_announcement_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return advanced_settings_voice_announcement_setPrototypeOf(o,p)}function advanced_settings_voice_announcement_createSuper(Derived){var hasNativeReflectConstruct=advanced_settings_voice_announcement_isNativeReflectConstruct();return function _createSuperInternal(){var Super=advanced_settings_voice_announcement_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=advanced_settings_voice_announcement_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return advanced_settings_voice_announcement_possibleConstructorReturn(this,result)}}function advanced_settings_voice_announcement_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return advanced_settings_voice_announcement_assertThisInitialized(self)}function advanced_settings_voice_announcement_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function advanced_settings_voice_announcement_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function advanced_settings_voice_announcement_getPrototypeOf(o){advanced_settings_voice_announcement_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return advanced_settings_voice_announcement_getPrototypeOf(o)}function advanced_settings_voice_announcement_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var advanced_settings_voice_announcement_AdvancedSettingsVoiceAnnouncement=function(_Component){advanced_settings_voice_announcement_inherits(AdvancedSettingsVoiceAnnouncement,_Component);var _super=advanced_settings_voice_announcement_createSuper(AdvancedSettingsVoiceAnnouncement);function AdvancedSettingsVoiceAnnouncement(){var _this;advanced_settings_voice_announcement_classCallCheck(this,AdvancedSettingsVoiceAnnouncement);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));advanced_settings_voice_announcement_defineProperty(advanced_settings_voice_announcement_assertThisInitialized(_this),"shouldComponentUpdate",(function(nextProps){return nextProps.queryText!==_this.props.queryText}));return _this}advanced_settings_voice_announcement_createClass(AdvancedSettingsVoiceAnnouncement,[{key:"render",value:function render(){var filteredSections=Object.values(this.props.settings).map((function(setting){return setting.map((function(option){return option.ariaName}))}));var filteredOptions=_toConsumableArray(filteredSections);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_kbnSharedDeps_React_default.a.createElement("div",{role:"region","aria-live":"polite","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.voiceAnnouncement.ariaLabel",{defaultMessage:"Advanced Settings results info"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDelayRender"],null,this.props.queryText?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"advancedSettings.voiceAnnouncement.searchResultScreenReaderMessage",defaultMessage:"You searched for {query}. There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{query:this.props.queryText,sectionLenght:filteredSections.length,optionLenght:filteredOptions.length}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"advancedSettings.voiceAnnouncement.noSearchResultScreenReaderMessage",defaultMessage:"There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{sectionLenght:filteredSections.length,optionLenght:filteredOptions.length}}))))}}]);return AdvancedSettingsVoiceAnnouncement}(external_kbnSharedDeps_React_["Component"]);function advanced_settings_slicedToArray(arr,i){return advanced_settings_arrayWithHoles(arr)||advanced_settings_iterableToArrayLimit(arr,i)||advanced_settings_unsupportedIterableToArray(arr,i)||advanced_settings_nonIterableRest()}function advanced_settings_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function advanced_settings_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return advanced_settings_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return advanced_settings_arrayLikeToArray(o,minLen)}function advanced_settings_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function advanced_settings_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function advanced_settings_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function advanced_settings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function advanced_settings_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){advanced_settings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){advanced_settings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function advanced_settings_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function advanced_settings_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function advanced_settings_createClass(Constructor,protoProps,staticProps){if(protoProps)advanced_settings_defineProperties(Constructor.prototype,protoProps);if(staticProps)advanced_settings_defineProperties(Constructor,staticProps);return Constructor}function advanced_settings_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)advanced_settings_setPrototypeOf(subClass,superClass)}function advanced_settings_setPrototypeOf(o,p){advanced_settings_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return advanced_settings_setPrototypeOf(o,p)}function advanced_settings_createSuper(Derived){var hasNativeReflectConstruct=advanced_settings_isNativeReflectConstruct();return function _createSuperInternal(){var Super=advanced_settings_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=advanced_settings_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return advanced_settings_possibleConstructorReturn(this,result)}}function advanced_settings_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return advanced_settings_assertThisInitialized(self)}function advanced_settings_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function advanced_settings_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function advanced_settings_getPrototypeOf(o){advanced_settings_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return advanced_settings_getPrototypeOf(o)}function advanced_settings_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var advanced_settings_AdvancedSettingsComponent=function(_Component){advanced_settings_inherits(AdvancedSettingsComponent,_Component);var _super=advanced_settings_createSuper(AdvancedSettingsComponent);function AdvancedSettingsComponent(props){var _this;advanced_settings_classCallCheck(this,AdvancedSettingsComponent);_this=_super.call(this,props);advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"settings",void 0);advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"groupedSettings",void 0);advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"categoryCounts",void 0);advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"categories",[]);advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"uiSettingsSubscription",void 0);advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"initSettings",_this.mapConfig);advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"initGroupedSettings",_this.mapSettings);advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"onQueryChange",(function(_ref){var query=_ref.query;_this.setState({query:query,filteredSettings:_this.mapSettings(external_kbnSharedDeps_ElasticEui_["Query"].execute(query,_this.settings))})}));advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"clearQuery",(function(){_this.setState({query:external_kbnSharedDeps_ElasticEui_["Query"].parse(""),footerQueryMatched:false,filteredSettings:_this.groupedSettings})}));advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"onFooterQueryMatchChange",(function(matched){_this.setState({footerQueryMatched:matched})}));advanced_settings_defineProperty(advanced_settings_assertThisInitialized(_this),"saveConfig",function(){var _ref2=advanced_settings_asyncToGenerator(regeneratorRuntime.mark((function _callee(changes){var arr;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:arr=Object.entries(changes).map((function(_ref3){var _ref4=advanced_settings_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return _this.props.uiSettings.set(key,value)}));return _context.abrupt("return",Promise.all(arr));case 2:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}());_this.settings=_this.initSettings(_this.props.uiSettings);_this.groupedSettings=_this.initGroupedSettings(_this.settings);_this.categories=_this.initCategories(_this.groupedSettings);_this.categoryCounts=_this.initCategoryCounts(_this.groupedSettings);var parsedQuery=external_kbnSharedDeps_ElasticEui_["Query"].parse(_this.props.queryText?Object(lib["b"])(_this.props.queryText):"");_this.state={query:parsedQuery,footerQueryMatched:false,filteredSettings:_this.mapSettings(external_kbnSharedDeps_ElasticEui_["Query"].execute(parsedQuery,_this.settings))};return _this}advanced_settings_createClass(AdvancedSettingsComponent,[{key:"init",value:function init(config){this.settings=this.initSettings(config);this.groupedSettings=this.initGroupedSettings(this.settings);this.categories=this.initCategories(this.groupedSettings);this.categoryCounts=this.initCategoryCounts(this.groupedSettings)}},{key:"initCategories",value:function initCategories(groupedSettings){return Object.keys(groupedSettings).sort((function(a,b){if(a===lib["a"])return-1;if(b===lib["a"])return 1;if(a>b)return 1;return a===b?0:-1}))}},{key:"initCategoryCounts",value:function initCategoryCounts(groupedSettings){return Object.keys(groupedSettings).reduce((function(counts,category){counts[category]=groupedSettings[category].length;return counts}),{})}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.uiSettingsSubscription=this.props.uiSettings.getUpdate$().subscribe((function(){var query=_this2.state.query;_this2.init(_this2.props.uiSettings);_this2.setState({filteredSettings:_this2.mapSettings(external_kbnSharedDeps_ElasticEui_["Query"].execute(query,_this2.settings))})}));var hash=window.location.hash;if(hash!==""){setTimeout((function(){var _document$getElementB;var id=hash.replace("#","");var element=document.getElementById(id);var globalNavOffset=0;var globalNavBars=(_document$getElementB=document.getElementById("globalHeaderBars"))===null||_document$getElementB===void 0?void 0:_document$getElementB.getElementsByClassName("euiHeader");if(globalNavBars){Array.from(globalNavBars).forEach((function(navBar){globalNavOffset+=navBar.offsetHeight}))}if(element){element.scrollIntoView();window.scrollBy(0,-globalNavOffset)}}),0)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.uiSettingsSubscription){this.uiSettingsSubscription.unsubscribe()}}},{key:"mapConfig",value:function mapConfig(config){var all=config.getAll();return Object.entries(all).map((function(setting){return Object(lib["e"])({def:setting[1],name:setting[0],value:setting[1].userValue,isCustom:config.isCustom(setting[0]),isOverridden:config.isOverridden(setting[0])})})).filter((function(c){return!c.readonly})).sort(external_kbnSharedDeps_ElasticEui_["Comparators"].property("name",external_kbnSharedDeps_ElasticEui_["Comparators"].default("asc")))}},{key:"mapSettings",value:function mapSettings(settings){return settings.reduce((function(groupedSettings,setting){var category=setting.category[0];(groupedSettings[category]=groupedSettings[category]||[]).push(setting);return groupedSettings}),{})}},{key:"render",value:function render(){var _this$state=this.state,filteredSettings=_this$state.filteredSettings,query=_this$state.query,footerQueryMatched=_this$state.footerQueryMatched;var componentRegistry=this.props.componentRegistry;var PageTitle=componentRegistry.get(componentRegistry.componentType.PAGE_TITLE_COMPONENT);var PageSubtitle=componentRegistry.get(componentRegistry.componentType.PAGE_SUBTITLE_COMPONENT);var PageFooter=componentRegistry.get(componentRegistry.componentType.PAGE_FOOTER_COMPONENT);return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(PageTitle,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(search_Search,{query:query,categories:this.categories,onQueryChange:this.onQueryChange}))),external_kbnSharedDeps_React_default.a.createElement(PageSubtitle,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(call_outs_CallOuts,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(advanced_settings_voice_announcement_AdvancedSettingsVoiceAnnouncement,{queryText:query.text,settings:filteredSettings}),external_kbnSharedDeps_React_default.a.createElement(form_Form,{settings:this.groupedSettings,visibleSettings:filteredSettings,categories:this.categories,categoryCounts:this.categoryCounts,clearQuery:this.clearQuery,save:this.saveConfig,showNoResultsMessage:!footerQueryMatched,enableSaving:this.props.enableSaving,dockLinks:this.props.dockLinks,toasts:this.props.toasts}),external_kbnSharedDeps_React_default.a.createElement(PageFooter,{toasts:this.props.toasts,query:query,onQueryMatchChange:this.onFooterQueryMatchChange,enableSaving:this.props.enableSaving}))}}]);return AdvancedSettingsComponent}(external_kbnSharedDeps_React_["Component"]);var advanced_settings_AdvancedSettings=function AdvancedSettings(props){var _useParams=Object(external_kbnSharedDeps_ReactRouterDom_["useParams"])(),query=_useParams.query;return external_kbnSharedDeps_React_default.a.createElement(advanced_settings_AdvancedSettingsComponent,{queryText:query||"",enableSaving:props.enableSaving,uiSettings:props.uiSettings,dockLinks:props.dockLinks,toasts:props.toasts,componentRegistry:props.componentRegistry})};var management_app=__webpack_require__(24);function mount_management_section_slicedToArray(arr,i){return mount_management_section_arrayWithHoles(arr)||mount_management_section_iterableToArrayLimit(arr,i)||mount_management_section_unsupportedIterableToArray(arr,i)||mount_management_section_nonIterableRest()}function mount_management_section_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mount_management_section_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return mount_management_section_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mount_management_section_arrayLikeToArray(o,minLen)}function mount_management_section_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function mount_management_section_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function mount_management_section_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function mount_management_section_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function mount_management_section_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){mount_management_section_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){mount_management_section_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"});var crumb=[{text:title}];var readOnlyBadge={text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("advancedSettings.badge.readOnly.tooltip",{defaultMessage:"Unable to save advanced settings"}),iconType:"glasses"};function mountManagementSection(_x,_x2,_x3){return _mountManagementSection.apply(this,arguments)}function _mountManagementSection(){_mountManagementSection=mount_management_section_asyncToGenerator(regeneratorRuntime.mark((function _callee(getStartServices,params,componentRegistry){var _yield$getStartServic,_yield$getStartServic2,_yield$getStartServic3,uiSettings,notifications,docLinks,application,chrome,canSave;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params.setBreadcrumbs(crumb);_context.next=3;return getStartServices();case 3:_yield$getStartServic=_context.sent;_yield$getStartServic2=mount_management_section_slicedToArray(_yield$getStartServic,1);_yield$getStartServic3=_yield$getStartServic2[0];uiSettings=_yield$getStartServic3.uiSettings;notifications=_yield$getStartServic3.notifications;docLinks=_yield$getStartServic3.docLinks;application=_yield$getStartServic3.application;chrome=_yield$getStartServic3.chrome;canSave=application.capabilities.advancedSettings.save;if(!canSave){chrome.setBadge(readOnlyBadge)}external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:params.history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:["/:query","/"]},external_kbnSharedDeps_React_default.a.createElement(advanced_settings_AdvancedSettings,{enableSaving:canSave,toasts:notifications.toasts,dockLinks:docLinks.links,uiSettings:uiSettings,componentRegistry:componentRegistry}))))),params.element);return _context.abrupt("return",(function(){external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(params.element)}));case 15:case"end":return _context.stop()}}}),_callee)})));return _mountManagementSection.apply(this,arguments)}}]]);