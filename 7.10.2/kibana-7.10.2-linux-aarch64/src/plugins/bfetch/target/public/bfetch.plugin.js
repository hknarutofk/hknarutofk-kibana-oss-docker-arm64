(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=9)})([function(module,__webpack_exports__,__webpack_require__){"use strict";var _util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);__webpack_require__.d(__webpack_exports__,"normalizeError",(function(){return _util__WEBPACK_IMPORTED_MODULE_0__["a"]}));__webpack_require__.d(__webpack_exports__,"removeLeadingSlash",(function(){return _util__WEBPACK_IMPORTED_MODULE_0__["b"]}));var _streaming__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);if(__webpack_require__.o(_streaming__WEBPACK_IMPORTED_MODULE_1__,"createBatchedFunction"))__webpack_require__.d(__webpack_exports__,"createBatchedFunction",(function(){return _streaming__WEBPACK_IMPORTED_MODULE_1__["createBatchedFunction"]}));var _buffer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5);__webpack_require__.d(__webpack_exports__,"createBatchedFunction",(function(){return _buffer__WEBPACK_IMPORTED_MODULE_2__["a"]}));var _batch__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4);var _batch__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_batch__WEBPACK_IMPORTED_MODULE_3__)},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,__webpack_exports__,__webpack_require__){"use strict";var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3);var _types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_types__WEBPACK_IMPORTED_MODULE_0__);if(__webpack_require__.o(_types__WEBPACK_IMPORTED_MODULE_0__,"createBatchedFunction"))__webpack_require__.d(__webpack_exports__,"createBatchedFunction",(function(){return _types__WEBPACK_IMPORTED_MODULE_0__["createBatchedFunction"]}))},function(module,exports){},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return create_batched_function_createBatchedFunction}));function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ItemBuffer=function(){function ItemBuffer(params){_classCallCheck(this,ItemBuffer);this.params=params;_defineProperty(this,"list",[])}_createClass(ItemBuffer,[{key:"write",value:function write(item){this.list.push(item);var flushOnMaxItems=this.params.flushOnMaxItems;if(flushOnMaxItems){if(this.list.length>=flushOnMaxItems){this.flush()}}}},{key:"clear",value:function clear(){this.list=[]}},{key:"flush",value:function flush(){var list;var _ref=[this.list,[]];list=_ref[0];this.list=_ref[1];this.params.onFlush(list)}},{key:"length",get:function get(){return this.list.length}}]);return ItemBuffer}();function timed_item_buffer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function timed_item_buffer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function timed_item_buffer_createClass(Constructor,protoProps,staticProps){if(protoProps)timed_item_buffer_defineProperties(Constructor.prototype,protoProps);if(staticProps)timed_item_buffer_defineProperties(Constructor,staticProps);return Constructor}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function timed_item_buffer_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TimedItemBuffer=function(_ItemBuffer){_inherits(TimedItemBuffer,_ItemBuffer);var _super=_createSuper(TimedItemBuffer);function TimedItemBuffer(params){var _this;timed_item_buffer_classCallCheck(this,TimedItemBuffer);_this=_super.call(this,params);_this.params=params;timed_item_buffer_defineProperty(_assertThisInitialized(_this),"timer",void 0);timed_item_buffer_defineProperty(_assertThisInitialized(_this),"onTimeout",(function(){_this.flush()}));return _this}timed_item_buffer_createClass(TimedItemBuffer,[{key:"write",value:function write(item){_get(_getPrototypeOf(TimedItemBuffer.prototype),"write",this).call(this,item);if(this.params.maxItemAge&&this.length===1){this.timer=setTimeout(this.onTimeout,this.params.maxItemAge)}}},{key:"clear",value:function clear(){clearTimeout(this.timer);_get(_getPrototypeOf(TimedItemBuffer.prototype),"clear",this).call(this)}},{key:"flush",value:function flush(){clearTimeout(this.timer);_get(_getPrototypeOf(TimedItemBuffer.prototype),"flush",this).call(this)}}]);return TimedItemBuffer}(ItemBuffer);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var create_batched_function_createBatchedFunction=function createBatchedFunction(params){var onCall=params.onCall,onBatch=params.onBatch,_params$maxItemAge=params.maxItemAge,maxItemAge=_params$maxItemAge===void 0?10:_params$maxItemAge,_params$flushOnMaxIte=params.flushOnMaxItems,flushOnMaxItems=_params$flushOnMaxIte===void 0?25:_params$flushOnMaxIte;var buffer=new TimedItemBuffer({onFlush:onBatch,maxItemAge:maxItemAge,flushOnMaxItems:flushOnMaxItems});var fn=function fn(){var _onCall=onCall.apply(void 0,arguments),_onCall2=_slicedToArray(_onCall,2),result=_onCall2[0],batchEntry=_onCall2[1];buffer.write(batchEntry);return result};return[fn,buffer]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return normalizeError}));__webpack_require__.d(__webpack_exports__,"b",(function(){return removeLeadingSlash}));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var normalizeError=function normalizeError(err){if(!err){return{message:"Unknown error."}}if(err instanceof Error){return{message:err.message}}if(typeof err==="object"){return _objectSpread(_objectSpread({},err),{},{message:err.message||"Unknown error."})}return{message:String(err)}};var removeLeadingSlash=function removeLeadingSlash(text){return text[0]==="/"?text.substr(1):text}},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_bfetch_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);var _node_modules_val_loader_dist_cjs_js_key_bfetch_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_bfetch_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/bfetch/public",__webpack_require__,11)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["bfetch"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"BfetchPublicSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"BfetchPublicStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"BfetchPublicContract",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"split",(function(){return split_split}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_Rxjs_=__webpack_require__(1);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(7);var split_split=function split(){var delimiter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"\n";return function(in$){var out$=new external_kbnSharedDeps_Rxjs_["Subject"];var startingText="";in$.subscribe((function(chunk){var messages=(startingText+chunk).split(delimiter);messages.slice(0,-1).forEach(out$.next.bind(out$));startingText=messages.length?messages[messages.length-1]:""}),out$.error.bind(out$),(function(){out$.next(startingText);out$.complete()}));return out$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["filter"])(Boolean))}};var from_streaming_xhr_fromStreamingXhr=function fromStreamingXhr(xhr){var subject=new external_kbnSharedDeps_Rxjs_["Subject"];var index=0;var processBatch=function processBatch(){var responseText=xhr.responseText;if(index>=responseText.length)return;subject.next(responseText.substr(index));index=responseText.length};xhr.onprogress=processBatch;xhr.onreadystatechange=function(){processBatch();if(xhr.readyState===4){if(xhr.status===0||xhr.status>=400){subject.error(new Error("Batch request failed with status ".concat(xhr.status)))}else{subject.complete()}}};return subject};function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function fetch_streaming_fetchStreaming(_ref){var url=_ref.url,_ref$headers=_ref.headers,headers=_ref$headers===void 0?{}:_ref$headers,_ref$method=_ref.method,method=_ref$method===void 0?"POST":_ref$method,_ref$body=_ref.body,body=_ref$body===void 0?"":_ref$body;var xhr=new window.XMLHttpRequest;xhr.open(method,url);xhr.withCredentials=true;Object.entries(headers).forEach((function(_ref2){var _ref3=_slicedToArray(_ref2,2),k=_ref3[0],v=_ref3[1];return xhr.setRequestHeader(k,v)}));var stream=from_streaming_xhr_fromStreamingXhr(xhr);xhr.send(body);return{xhr:xhr,stream:stream}}var common=__webpack_require__(0);var public_=__webpack_require__(8);function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=create_streaming_batched_function_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e3){didErr=true;err=_e3},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function create_streaming_batched_function_slicedToArray(arr,i){return create_streaming_batched_function_arrayWithHoles(arr)||create_streaming_batched_function_iterableToArrayLimit(arr,i)||create_streaming_batched_function_unsupportedIterableToArray(arr,i)||create_streaming_batched_function_nonIterableRest()}function create_streaming_batched_function_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function create_streaming_batched_function_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return create_streaming_batched_function_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return create_streaming_batched_function_arrayLikeToArray(o,minLen)}function create_streaming_batched_function_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function create_streaming_batched_function_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function create_streaming_batched_function_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var create_streaming_batched_function_createStreamingBatchedFunction=function createStreamingBatchedFunction(params){var url=params.url,_params$fetchStreamin=params.fetchStreaming,fetchStreamingInjected=_params$fetchStreamin===void 0?fetch_streaming_fetchStreaming:_params$fetchStreamin,_params$flushOnMaxIte=params.flushOnMaxItems,flushOnMaxItems=_params$flushOnMaxIte===void 0?25:_params$flushOnMaxIte,_params$maxItemAge=params.maxItemAge,maxItemAge=_params$maxItemAge===void 0?10:_params$maxItemAge;var _createBatchedFunctio=Object(common["createBatchedFunction"])({onCall:function onCall(payload){var future=Object(public_["defer"])();var entry={payload:payload,future:future};return[future.promise,entry]},onBatch:function(){var _onBatch=_asyncToGenerator(regeneratorRuntime.mark((function _callee(items){var responsesReceived,batch,_fetchStreamingInject,stream,_iterator3,_step3,item;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;responsesReceived=0;batch=items.map((function(_ref){var payload=_ref.payload;return payload}));_fetchStreamingInject=fetchStreamingInjected({url:url,body:JSON.stringify({batch:batch}),method:"POST"}),stream=_fetchStreamingInject.stream;stream.pipe(split_split("\n")).subscribe({next:function next(json){var response=JSON.parse(json);if(response.error){responsesReceived++;items[response.id].future.reject(response.error)}else if(response.result!==undefined){responsesReceived++;items[response.id].future.resolve(response.result)}},error:function(_error){function error(_x2){return _error.apply(this,arguments)}error.toString=function(){return _error.toString()};return error}((function(error){var normalizedError=Object(common["normalizeError"])(error);normalizedError.code="STREAM";var _iterator=_createForOfIteratorHelper(items),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var future=_step.value.future;future.reject(normalizedError)}}catch(err){_iterator.e(err)}finally{_iterator.f()}})),complete:function complete(){var streamTerminatedPrematurely=responsesReceived!==items.length;if(streamTerminatedPrematurely){var _error2={message:"Connection terminated prematurely.",code:"CONNECTION"};var _iterator2=_createForOfIteratorHelper(items),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var future=_step2.value.future;future.reject(_error2)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}});_context.next=7;return stream.toPromise();case 7:_context.next=13;break;case 9:_context.prev=9;_context.t0=_context["catch"](0);_iterator3=_createForOfIteratorHelper(items);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){item=_step3.value;item.future.reject(_context.t0)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}case 13:case"end":return _context.stop()}}}),_callee,null,[[0,9]])})));function onBatch(_x){return _onBatch.apply(this,arguments)}return onBatch}(),flushOnMaxItems:flushOnMaxItems,maxItemAge:maxItemAge}),_createBatchedFunctio2=create_streaming_batched_function_slicedToArray(_createBatchedFunctio,1),fn=_createBatchedFunctio2[0];return fn};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var plugin_BfetchPublicPlugin=function(){function BfetchPublicPlugin(initializerContext){_classCallCheck(this,BfetchPublicPlugin);this.initializerContext=initializerContext;_defineProperty(this,"contract",void 0);_defineProperty(this,"fetchStreaming",(function(version,basePath){return function(params){return fetch_streaming_fetchStreaming(_objectSpread(_objectSpread({},params),{},{url:"".concat(basePath,"/").concat(Object(common["removeLeadingSlash"])(params.url)),headers:_objectSpread({"Content-Type":"application/json","kbn-version":version},params.headers||{})}))}}));_defineProperty(this,"batchedFunction",(function(fetchStreaming){return function(params){return create_streaming_batched_function_createStreamingBatchedFunction(_objectSpread(_objectSpread({},params),{},{fetchStreaming:params.fetchStreaming||fetchStreaming}))}}))}_createClass(BfetchPublicPlugin,[{key:"setup",value:function setup(core,plugins){var version=this.initializerContext.env.packageInfo.version;var basePath=core.http.basePath.get();var fetchStreaming=this.fetchStreaming(version,basePath);var batchedFunction=this.batchedFunction(fetchStreaming);this.contract={fetchStreaming:fetchStreaming,batchedFunction:batchedFunction};return this.contract}},{key:"start",value:function start(core,plugins){return this.contract}},{key:"stop",value:function stop(){}}]);return BfetchPublicPlugin}();function public_plugin(initializerContext){return new plugin_BfetchPublicPlugin(initializerContext)}}]);