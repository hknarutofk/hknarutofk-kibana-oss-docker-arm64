(window["visTypeVega_bundle_jsonpfunction"]=window["visTypeVega_bundle_jsonpfunction"]||[]).push([[1],{52:function(module,__webpack_exports__,__webpack_require__){"use strict";var vega_lite_build_es5_vega_lite__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(54);var vega_lite_build_es5_vega_lite__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(vega_lite_build_es5_vega_lite__WEBPACK_IMPORTED_MODULE_0__);__webpack_require__.d(__webpack_exports__,"b",(function(){return vega_lite_build_es5_vega_lite__WEBPACK_IMPORTED_MODULE_0__}));var vega_build_es5_vega__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(56);var vega_build_es5_vega__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(vega_build_es5_vega__WEBPACK_IMPORTED_MODULE_1__);__webpack_require__.d(__webpack_exports__,"a",(function(){return vega_build_es5_vega__WEBPACK_IMPORTED_MODULE_1__}))},53:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return bypassExternalUrlCheck}));__webpack_require__.d(__webpack_exports__,"a",(function(){return vega_base_view_VegaBaseView}));var external_kbnSharedDeps_Jquery_=__webpack_require__(49);var external_kbnSharedDeps_Jquery_default=__webpack_require__.n(external_kbnSharedDeps_Jquery_);var external_kbnSharedDeps_Moment_=__webpack_require__(48);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var elastic_datemath=__webpack_require__(64);var elastic_datemath_default=__webpack_require__.n(elastic_datemath);var vega=__webpack_require__(52);var utils=__webpack_require__(57);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var vega_tooltip=__webpack_require__(65);var external_kbnSharedDeps_Lodash_=__webpack_require__(12);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var tooltipId="vega-kibana-tooltip";function createRect(left,top,width,height){return{left:left,top:top,width:width,height:height,x:left,y:top,right:left+width,bottom:top+height}}var vega_tooltip_TooltipHandler=function(){function TooltipHandler(container,view,opts){_classCallCheck(this,TooltipHandler);this.container=container;this.position=opts.position;this.padding=opts.padding;this.centerOnMark=opts.centerOnMark;view.tooltip(this.handler.bind(this))}_createClass(TooltipHandler,[{key:"handler",value:function handler(view,event,item,value){this.hideTooltip();if(value==null||value===""){return}var el=document.createElement("div");el.setAttribute("id",tooltipId);["vgaVis__tooltip","euiToolTipPopover","euiToolTip","euiToolTip--".concat(this.position)].forEach((function(className){el.classList.add(className)}));el.innerHTML=Object(vega_tooltip["formatValue"])(value,external_kbnSharedDeps_Lodash_default.a.escape,2);document.body.appendChild(el);var anchorBounds;if(item.bounds.width()>this.centerOnMark||item.bounds.height()>this.centerOnMark){anchorBounds=createRect(event.clientX,event.clientY,0,0)}else{var containerBox=this.container.getBoundingClientRect();anchorBounds=createRect(containerBox.left+view._origin[0]+item.bounds.x1,containerBox.top+view._origin[1]+item.bounds.y1,item.bounds.width(),item.bounds.height())}var pos=Object(external_kbnSharedDeps_ElasticEui_["calculatePopoverPosition"])(anchorBounds,el.getBoundingClientRect(),this.position,this.padding);el.setAttribute("style","top: ".concat(pos.top,"px; left: ").concat(pos.left,"px"))}},{key:"hideTooltip",value:function hideTooltip(){var el=document.getElementById(tooltipId);if(el)el.remove()}}]);return TooltipHandler}();var public_=__webpack_require__(9);var services=__webpack_require__(3);var extract_index_pattern=__webpack_require__(17);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e3){didErr=true;err=_e3},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function vega_base_view_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function vega_base_view_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function vega_base_view_createClass(Constructor,protoProps,staticProps){if(protoProps)vega_base_view_defineProperties(Constructor.prototype,protoProps);if(staticProps)vega_base_view_defineProperties(Constructor,staticProps);return Constructor}vega["a"].scheme("elastic",Object(external_kbnSharedDeps_ElasticEui_["euiPaletteColorBlind"])());var vegaFunctions={kibanaAddFilter:"addFilterHandler",kibanaRemoveFilter:"removeFilterHandler",kibanaRemoveAllFilters:"removeAllFiltersHandler",kibanaSetTimeFilter:"setTimeFilterHandler"};var vega_base_view_loop=function _loop(){var funcName=_Object$keys[_i];if(!vega["a"].expressionFunction(funcName)){vega["a"].expressionFunction(funcName,(function handlerFwd(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var view=this.context.dataflow;view.runAfter((function(){var _view$_kibanaView;return(_view$_kibanaView=view._kibanaView).vegaFunctionsHandler.apply(_view$_kibanaView,[funcName].concat(args))}))}))}};for(var _i=0,_Object$keys=Object.keys(vegaFunctions);_i<_Object$keys.length;_i++){vega_base_view_loop()}var bypassToken=Symbol();function bypassExternalUrlCheck(url){return{url:url,bypassToken:bypassToken}}var vega_base_view_VegaBaseView=function(){function VegaBaseView(opts){vega_base_view_classCallCheck(this,VegaBaseView);this._$parentEl=external_kbnSharedDeps_Jquery_default()(opts.parentEl);this._parser=opts.vegaParser;this._serviceSettings=opts.serviceSettings;this._filterManager=opts.filterManager;this._applyFilter=opts.applyFilter;this._timefilter=opts.timefilter;this._view=null;this._vegaViewConfig=null;this._$messages=null;this._destroyHandlers=[];this._initialized=false;this._enableExternalUrls=Object(services["c"])()}vega_base_view_createClass(VegaBaseView,[{key:"init",value:function(){var _init=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this=this;var _iterator,_step,warn;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!this._initialized){_context.next=2;break}throw new Error;case 2:this._initialized=true;_context.prev=3;this._$parentEl.empty().addClass("vgaVis").css("flex-direction",this._parser.containerDir);_iterator=_createForOfIteratorHelper(this._parser.warnings);try{for(_iterator.s();!(_step=_iterator.n()).done;){warn=_step.value;this._addMessage("warn",warn)}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(!this._parser.error){_context.next=10;break}this._addMessage("err",this._parser.error);return _context.abrupt("return");case 10:this._$container=external_kbnSharedDeps_Jquery_default()('<div class="vgaVis__view">').css("height","100%").appendTo(this._$parentEl);this._$controls=external_kbnSharedDeps_Jquery_default()('<div class="vgaVis__controls vgaVis__controls--'.concat(this._parser.controlsDir,'">')).appendTo(this._$parentEl);this._addDestroyHandler((function(){if(_this._$container){_this._$container.remove();_this._$container=null}if(_this._$controls){_this._$controls.remove();_this._$controls=null}if(_this._$messages){_this._$messages.remove();_this._$messages=null}if(_this._view){_this._view.finalize()}_this._view=null}));this._vegaViewConfig=this.createViewConfig();_context.next=16;return this._initViewCustomizations();case 16:_context.next=21;break;case 18:_context.prev=18;_context.t0=_context["catch"](3);this.onError(_context.t0);case 21:case"end":return _context.stop()}}}),_callee,this,[[3,18]])})));function init(){return _init.apply(this,arguments)}return init}()},{key:"findIndex",value:function(){var _findIndex=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(index){var _getData,indexPatterns,idxObj,_yield$indexPatterns$,_yield$indexPatterns$2,_yield$extractIndexPa,_yield$extractIndexPa2,defaultIdx;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_getData=Object(services["a"])(),indexPatterns=_getData.indexPatterns;if(!index){_context2.next=11;break}_context2.next=4;return indexPatterns.find(index);case 4:_yield$indexPatterns$=_context2.sent;_yield$indexPatterns$2=_slicedToArray(_yield$indexPatterns$,1);idxObj=_yield$indexPatterns$2[0];if(idxObj){_context2.next=9;break}throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVega.vegaParser.baseView.indexNotFoundErrorMessage",{defaultMessage:"Index {index} not found",values:{index:'"'.concat(index,'"')}}));case 9:_context2.next=25;break;case 11:_context2.next=13;return Object(extract_index_pattern["a"])(this._parser.isVegaLite?this._parser.vlspec:this._parser.spec);case 13:_yield$extractIndexPa=_context2.sent;_yield$extractIndexPa2=_slicedToArray(_yield$extractIndexPa,1);idxObj=_yield$extractIndexPa2[0];if(idxObj){_context2.next=25;break}_context2.next=19;return indexPatterns.getDefault();case 19:defaultIdx=_context2.sent;if(!defaultIdx){_context2.next=24;break}idxObj=defaultIdx;_context2.next=25;break;case 24:throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVega.vegaParser.baseView.unableToFindDefaultIndexErrorMessage",{defaultMessage:"Unable to find default index"}));case 25:return _context2.abrupt("return",idxObj.id);case 26:case"end":return _context2.stop()}}}),_callee2,this)})));function findIndex(_x){return _findIndex.apply(this,arguments)}return findIndex}()},{key:"createViewConfig",value:function createViewConfig(){var _this2=this;var config={logLevel:vega["a"].Warn,renderer:this._parser.renderer};var loader=vega["a"].loader();var originalSanitize=loader.sanitize.bind(loader);loader.sanitize=function(uri,options){if(uri.bypassToken===bypassToken){uri=uri.url}else if(!_this2._enableExternalUrls){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVega.vegaParser.baseView.externalUrlsAreNotEnabledErrorMessage",{defaultMessage:"External URLs are not enabled. Add   {enableExternalUrls}   to {kibanaConfigFileName}",values:{enableExternalUrls:"vis_type_vega.enableExternalUrls: true",kibanaConfigFileName:"kibana.yml"}}))}return originalSanitize(uri,options)};config.loader=loader;return config}},{key:"onError",value:function onError(){this._addMessage("err",utils["a"].formatErrorToStr.apply(utils["a"],arguments))}},{key:"onWarn",value:function onWarn(){if(!this._parser||!this._parser.hideWarnings){this._addMessage("warn",utils["a"].formatWarningToStr.apply(utils["a"],arguments))}}},{key:"_addMessage",value:function _addMessage(type,text){if(!this._$messages){this._$messages=external_kbnSharedDeps_Jquery_default()('<ul class="vgaVis__messages">').appendTo(this._$parentEl)}this._$messages.append(external_kbnSharedDeps_Jquery_default()('<li class="vgaVis__message vgaVis__message--'.concat(type,'">')).append(external_kbnSharedDeps_Jquery_default()('<pre class="vgaVis__messageCode">').text(text)))}},{key:"resize",value:function resize(){if(this._parser.useResize&&this._view&&this.updateVegaSize(this._view)){return this._view.runAsync()}}},{key:"updateVegaSize",value:function updateVegaSize(view){var heightExtraPadding=6;var width=Math.max(0,this._$container.width());var height=Math.max(0,this._$container.height())-heightExtraPadding;if(view.width()!==width||view.height()!==height){view.width(width).height(height);return true}return false}},{key:"setView",value:function setView(view){if(this._view===view)return;if(this._view){this._view.finalize()}this._view=view;if(view){view._kibanaView=this;if(this._parser.tooltips){var tthandler=new vega_tooltip_TooltipHandler(this._$container[0],view,this._parser.tooltips);this._addDestroyHandler((function(){return tthandler.hideTooltip()}))}return view.runAsync()}}},{key:"vegaFunctionsHandler",value:function(){var _vegaFunctionsHandler=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(funcName){var handlerFunc,_len2,args,_key2,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;handlerFunc=vegaFunctions[funcName];if(!(!handlerFunc||!this[handlerFunc])){_context3.next=4;break}throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVega.vegaParser.baseView.functionIsNotDefinedForGraphErrorMessage",{defaultMessage:"{funcName} is not defined for this graph",values:{funcName:"".concat(funcName,"()")}}));case 4:for(_len2=_args3.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=_args3[_key2]}_context3.next=7;return this[handlerFunc].apply(this,args);case 7:_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3["catch"](0);this.onError(_context3.t0);case 12:case"end":return _context3.stop()}}}),_callee3,this,[[0,9]])})));function vegaFunctionsHandler(_x2){return _vegaFunctionsHandler.apply(this,arguments)}return vegaFunctionsHandler}()},{key:"addFilterHandler",value:function(){var _addFilterHandler=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(query,index){var indexId,filter;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.findIndex(index);case 2:indexId=_context4.sent;filter=public_["esFilters"].buildQueryFilter(query,indexId);this._applyFilter({filters:[filter]});case 5:case"end":return _context4.stop()}}}),_callee4,this)})));function addFilterHandler(_x3,_x4){return _addFilterHandler.apply(this,arguments)}return addFilterHandler}()},{key:"removeFilterHandler",value:function(){var _removeFilterHandler=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(query,index){var indexId,filterToRemove,currentFilters,existingFilter;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.findIndex(index);case 2:indexId=_context5.sent;filterToRemove=public_["esFilters"].buildQueryFilter(query,indexId);currentFilters=this._filterManager.getFilters();existingFilter=currentFilters.find((function(filter){return public_["esFilters"].compareFilters(filter,filterToRemove)}));if(existingFilter){_context5.next=8;break}return _context5.abrupt("return");case 8:try{this._filterManager.removeFilter(existingFilter)}catch(err){this.onError(err)}case 9:case"end":return _context5.stop()}}}),_callee5,this)})));function removeFilterHandler(_x5,_x6){return _removeFilterHandler.apply(this,arguments)}return removeFilterHandler}()},{key:"removeAllFiltersHandler",value:function removeAllFiltersHandler(){this._filterManager.removeAll()}},{key:"setTimeFilterHandler",value:function setTimeFilterHandler(start,end){var _VegaBaseView$_parseT=VegaBaseView._parseTimeRange(start,end),from=_VegaBaseView$_parseT.from,to=_VegaBaseView$_parseT.to,mode=_VegaBaseView$_parseT.mode;this._applyFilter({timeFieldName:"*",filters:[{range:{"*":{mode:mode,gte:from,lte:to}}}]})}},{key:"setDebugValues",value:function setDebugValues(view,spec,vlspec){var _this$_parser$searchA;(_this$_parser$searchA=this._parser.searchAPI.inspectorAdapters)===null||_this$_parser$searchA===void 0?void 0:_this$_parser$searchA.vega.bindInspectValues({view:view,spec:vlspec||spec});if(window){if(window.VEGA_DEBUG===undefined&&console){console.log("%cWelcome to Kibana Vega Plugin!","font-size: 16px; font-weight: bold;");console.log("You can access the Vega view with VEGA_DEBUG. "+"Learn more at https://vega.github.io/vega/docs/api/debugging/.")}var debugObj={};window.VEGA_DEBUG=debugObj;window.VEGA_DEBUG.VEGA_VERSION=vega["a"].version;window.VEGA_DEBUG.VEGA_LITE_VERSION=vega["b"].version;window.VEGA_DEBUG.view=view;window.VEGA_DEBUG.vega_spec=spec;window.VEGA_DEBUG.vegalite_spec=vlspec;this._addDestroyHandler((function(){if(debugObj===window.VEGA_DEBUG){window.VEGA_DEBUG=null}}))}}},{key:"destroy",value:function destroy(){if(this._destroyHandlers){this._ongoingDestroy=Promise.all(this._destroyHandlers.map((function(v){return v()})));this._destroyHandlers=null}return this._ongoingDestroy}},{key:"_addDestroyHandler",value:function _addDestroyHandler(handler){if(this._destroyHandlers){this._destroyHandlers.push(handler)}else{handler()}}}],[{key:"_parseTimeRange",value:function _parseTimeRange(start,end){var absStart=external_kbnSharedDeps_Moment_default()(start);var absEnd=external_kbnSharedDeps_Moment_default()(end);var isValidAbsStart=absStart.isValid();var isValidAbsEnd=absEnd.isValid();var mode="absolute";var from;var to;var reverse;if(isValidAbsStart&&isValidAbsEnd){from=absStart;to=absEnd;reverse=absStart.isAfter(absEnd)}else{var startDate=elastic_datemath_default.a.parse(start);var endDate=elastic_datemath_default.a.parse(end);if(!startDate||!endDate||!startDate.isValid()||!endDate.isValid()){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVega.vegaParser.baseView.timeValuesTypeErrorMessage",{defaultMessage:"Error setting time filter: both time values must be either relative or absolute dates. {start}, {end}",values:{start:"start=".concat(JSON.stringify(start)),end:"end=".concat(JSON.stringify(end))}}))}reverse=startDate.isAfter(endDate);if(isValidAbsStart||isValidAbsEnd){from=startDate;to=endDate}else{mode="relative";from=start;to=end}}if(reverse){var _ref=[to,from];from=_ref[0];to=_ref[1]}return{from:from,to:to,mode:mode}}}]);return VegaBaseView}()},57:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Utils}));var json_stringify_pretty_compact__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16);var json_stringify_pretty_compact__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(json_stringify_pretty_compact__WEBPACK_IMPORTED_MODULE_0__);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Utils=function(){function Utils(){_classCallCheck(this,Utils)}_createClass(Utils,null,[{key:"formatWarningToStr",value:function formatWarningToStr(){var value=arguments.length<=0?undefined:arguments[0];if(arguments.length>=2){try{if(typeof(arguments.length<=1?undefined:arguments[1])==="string"){value+="\n".concat(arguments.length<=1?undefined:arguments[1])}else{value+="\n"+json_stringify_pretty_compact__WEBPACK_IMPORTED_MODULE_0___default()(arguments.length<=1?undefined:arguments[1],{maxLength:70})}}catch(err){}}return value}},{key:"formatErrorToStr",value:function formatErrorToStr(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var error=args[0];if(!error){error="ERR"}else if(error instanceof Error){error=error.message}return Utils.formatWarningToStr.apply(Utils,[error].concat(_toConsumableArray(Array.from(args).slice(1))))}}]);return Utils}()},64:function(module,exports,__webpack_require__){function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var moment=__webpack_require__(48);var unitsMap={ms:{weight:1,type:"fixed",base:1},s:{weight:2,type:"fixed",base:1e3},m:{weight:3,type:"mixed",base:1e3*60},h:{weight:4,type:"mixed",base:1e3*60*60},d:{weight:5,type:"mixed",base:1e3*60*60*24},w:{weight:6,type:"calendar",base:NaN},M:{weight:7,type:"calendar",base:NaN},y:{weight:9,type:"calendar",base:NaN}};var units=Object.keys(unitsMap).sort((function(a,b){return unitsMap[b].weight-unitsMap[a].weight}));var unitsDesc=_toConsumableArray(units);var unitsAsc=_toConsumableArray(units).reverse();var isDate=function isDate(d){return Object.prototype.toString.call(d)==="[object Date]"};var isValidDate=function isValidDate(d){return isDate(d)&&!isNaN(d.valueOf())};function parse(text){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$roundUp=_ref.roundUp,roundUp=_ref$roundUp===void 0?false:_ref$roundUp,_ref$momentInstance=_ref.momentInstance,momentInstance=_ref$momentInstance===void 0?moment:_ref$momentInstance,forceNow=_ref.forceNow;if(!text)return undefined;if(momentInstance.isMoment(text))return text;if(isDate(text))return momentInstance(text);if(forceNow!==undefined&&!isValidDate(forceNow)){throw new Error("forceNow must be a valid Date")}var time;var mathString="";var index;var parseString;if(text.substring(0,3)==="now"){time=momentInstance(forceNow);mathString=text.substring("now".length)}else{index=text.indexOf("||");if(index===-1){parseString=text;mathString=""}else{parseString=text.substring(0,index);mathString=text.substring(index+2)}time=momentInstance(parseString)}if(!mathString.length){return time}return parseDateMath(mathString,time,roundUp)}function parseDateMath(mathString,time,roundUp){var dateTime=time;var len=mathString.length;var i=0;while(i<len){var c=mathString.charAt(i++);var type=void 0;var num=void 0;var unit=void 0;if(c==="/"){type=0}else if(c==="+"){type=1}else if(c==="-"){type=2}else{return}if(isNaN(mathString.charAt(i))){num=1}else if(mathString.length===2){num=mathString.charAt(i)}else{var numFrom=i;while(!isNaN(mathString.charAt(i))){i++;if(i>=len)return}num=parseInt(mathString.substring(numFrom,i),10)}if(type===0){if(num!==1){return}}unit=mathString.charAt(i++);for(var j=i;j<len;j++){var unitChar=mathString.charAt(i);if(/[a-z]/i.test(unitChar)){unit+=unitChar;i++}else{break}}if(units.indexOf(unit)===-1){return}else{if(type===0){if(roundUp)dateTime.endOf(unit);else dateTime.startOf(unit)}else if(type===1){dateTime.add(num,unit)}else if(type===2){dateTime.subtract(num,unit)}}}return dateTime}module.exports={parse:parse,unitsMap:Object.freeze(unitsMap),units:Object.freeze(units),unitsAsc:Object.freeze(unitsAsc),unitsDesc:Object.freeze(unitsDesc)}}}]);