(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=37)})([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){exports.set=__webpack_require__(48);exports.setWith=__webpack_require__(92)},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,exports,__webpack_require__){var getNative=__webpack_require__(22);var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var eq=__webpack_require__(32);function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(83);function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,exports,__webpack_require__){"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=$getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){var args=[];for(var i=0;i<arguments.length;i++)args.push(arguments[i]);if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;ReflectApply(this.listener,this.target,args)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/discover/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(52),getValue=__webpack_require__(60);function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},function(module,exports,__webpack_require__){var root=__webpack_require__(24);var Symbol=root.Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(53);var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(31),isObjectLike=__webpack_require__(63);var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},function(module,exports){},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(49),castPath=__webpack_require__(61),isFunction=__webpack_require__(30),isIndex=__webpack_require__(90),isObject=__webpack_require__(25),toKey=__webpack_require__(91);function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(key=="prototype"&&isFunction(nested)){throw new Error("Illegal access of function prototype")}if(index!=lastIndex){var objValue=hasOwnProperty.call(nested,key)?nested[key]:undefined;newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(31),isObject=__webpack_require__(25);var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(23),getRawTag=__webpack_require__(55),objectToString=__webpack_require__(56);var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},function(module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},function(module,exports){},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_visualizations_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(38);var _node_modules_val_loader_dist_cjs_js_key_visualizations_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_visualizations_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/visualizations/public",__webpack_require__,93)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["visualizations"]},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(40);case"v7light":return __webpack_require__(42);case"v8dark":return __webpack_require__(44);case"v8light":return __webpack_require__(46)}},function(module,exports,__webpack_require__){var api=__webpack_require__(12);var content=__webpack_require__(41);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(13);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".visNewVisDialog {\n  max-width: 100vw;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='313' height='461' viewBox='0 0 313 461'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath fill='%2318191E' d='M294.009,184.137 C456.386,184.137 588.018,315.77 588.018,478.146 C588.018,640.523 456.386,772.156 294.009,772.156 C131.632,772.156 0,640.523 0,478.146 C0,315.77 131.632,184.137 294.009,184.137 Z M294.009,384.552 C242.318,384.552 200.415,426.456 200.415,478.146 C200.415,529.837 242.318,571.741 294.009,571.741 C345.7,571.741 387.604,529.837 387.604,478.146 C387.604,426.456 345.7,384.552 294.009,384.552 Z'/%3E%3Cpath fill='%2315161B' d='M202.958,365.731 L202.958,380.991 L187.698,380.991 L187.698,365.731 L202.958,365.731 Z M202.958,327.073 L202.958,342.333 L187.698,342.333 L187.698,327.073 L202.958,327.073 Z M243.651,325.038 L243.651,340.298 L228.391,340.298 L228.391,325.038 L243.651,325.038 Z M243.651,286.379 L243.651,301.639 L228.391,301.639 L228.391,286.379 L243.651,286.379 Z M202.958,285.362 L202.958,300.622 L187.698,300.622 L187.698,285.362 L202.958,285.362 Z M284.345,284.345 L284.345,299.605 L269.085,299.605 L269.085,284.345 L284.345,284.345 Z M284.345,245.686 L284.345,260.946 L269.085,260.946 L269.085,245.686 L284.345,245.686 Z M243.651,244.669 L243.651,259.929 L228.391,259.929 L228.391,244.669 L243.651,244.669 Z M202.958,243.651 L202.958,258.911 L187.698,258.911 L187.698,243.651 L202.958,243.651 Z M284.345,203.975 L284.345,219.235 L269.085,219.235 L269.085,203.975 L284.345,203.975 Z M202.958,203.975 L202.958,219.235 L187.698,219.235 L187.698,203.975 L202.958,203.975 Z M243.651,202.958 L243.651,218.218 L228.391,218.218 L228.391,202.958 L243.651,202.958 Z M243.651,163.282 L243.651,178.542 L228.391,178.542 L228.391,163.282 L243.651,163.282 Z M202.958,163.282 L202.958,178.542 L187.698,178.542 L187.698,163.282 L202.958,163.282 Z M284.345,162.265 L284.345,177.525 L269.085,177.525 L269.085,162.265 L284.345,162.265 Z M284.345,122.589 L284.345,137.849 L269.085,137.849 L269.085,122.589 L284.345,122.589 Z M243.651,122.589 L243.651,137.849 L228.391,137.849 L228.391,122.589 L243.651,122.589 Z M202.958,122.589 L202.958,137.849 L187.698,137.849 L187.698,122.589 L202.958,122.589 Z M284.345,81.8954 L284.345,97.1554 L269.085,97.1554 L269.085,81.8954 L284.345,81.8954 Z M243.651,81.8954 L243.651,97.1554 L228.391,97.1554 L228.391,81.8954 L243.651,81.8954 Z M202.958,81.8954 L202.958,97.1554 L187.698,97.1554 L187.698,81.8954 L202.958,81.8954 Z M284.345,41.202 L284.345,56.462 L269.085,56.462 L269.085,41.202 L284.345,41.202 Z M243.651,41.202 L243.651,56.462 L228.391,56.462 L228.391,41.202 L243.651,41.202 Z M284.345,0.508789 L284.345,15.7688 L269.085,15.7688 L269.085,0.508789 L284.345,0.508789 Z'/%3E%3C/g%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: calc(100% + 1px) calc(100% + 1px);\n  background-size: 30%; }\n\n.visNewVisSearchDialog {\n  width: 720px;\n  min-height: 600px; }\n\n.visNewVisDialog__body {\n  display: flex;\n  padding: 12px 24px 0;\n  min-height: 0; }\n\n.visNewVisDialog__list {\n  min-height: 0; }\n\n.visNewVisDialog__searchWrapper {\n  flex-shrink: 0; }\n\n.visNewVisDialog__typesWrapper {\n  -webkit-mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n          mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n  max-width: 400px;\n  min-height: 0;\n  margin-top: 2px;\n  overflow: hidden; }\n\n.visNewVisDialog__types {\n  scrollbar-width: thin;\n  width: auto;\n  overflow-y: auto;\n  padding-top: 16px;\n  justify-content: center;\n  padding-bottom: 16px; }\n  .visNewVisDialog__types::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .visNewVisDialog__types::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .visNewVisDialog__types::-webkit-scrollbar-corner, .visNewVisDialog__types::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.visNewVisDialog__description {\n  width: 320px; }\n\n.visNewVisDialog__type:disabled {\n  opacity: 0.2;\n  pointer-events: none; }\n\n.visNewVisDialog__typeImage {\n  width: 24px;\n  height: 24px; }\n\n@media only screen and (max-width: 574px) {\n  .visNewVisDialog {\n    background-image: none; }\n  .visNewVisDialog__typesWrapper {\n    max-width: none; }\n  .visNewVisDialog__types {\n    justify-content: flex-start; }\n  .visNewVisDialog__description {\n    display: none; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .visNewVisDialog {\n    background-image: none; }\n  .visNewVisDialog__typesWrapper {\n    max-width: none; }\n  .visNewVisDialog__types {\n    justify-content: flex-start; }\n  .visNewVisDialog__description {\n    display: none; } }\n\n@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  .visNewVisDialog {\n    width: 820px; }\n  .visNewVisDialog__body {\n    flex-basis: 800px; } }\n\n.visDisabledLabVisualization {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n\n.visDisabledLabVisualization__icon {\n  font-size: 28px; }\n\n/*\n* 1. Fix overflow of vis's specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visualization .visChart__container {\n  overflow: visible;\n  /* 1 */ }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0; }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*=\"-isOpen\"] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel .visLegend__toggle {\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%;\n  /**\n   * 1. Expand to fill the container but accept being squeezed smaller by the spy, even so small\n   *    that it disappears entirely.\n   */ }\n  .visualization .visChart__container {\n    scrollbar-width: thin;\n    min-height: 0;\n    flex: 1 1 0;\n    /* 1 */\n    display: flex;\n    flex-direction: row;\n    overflow: auto;\n    transition: opacity 0.01s; }\n    .visualization .visChart__container::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .visualization .visChart__container::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .visualization .visChart__container::-webkit-scrollbar-corner, .visualization .visChart__container::-webkit-scrollbar-track {\n      background-color: transparent; }\n    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n      .visualization .visChart__container {\n        flex: 1 0; } }\n    .visualization .visChart__container:focus {\n      box-shadow: none; }\n  .visualization .loading {\n    opacity: 0.5; }\n  .visualization .spinner {\n    position: absolute;\n    top: 40%;\n    left: 0;\n    right: 0;\n    z-index: 20;\n    opacity: 0.5; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(12);var content=__webpack_require__(43);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(13);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".visNewVisDialog {\n  max-width: 100vw;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='313' height='461' viewBox='0 0 313 461'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath fill='%23F5F7FA' d='M294.009,184.137 C456.386,184.137 588.018,315.77 588.018,478.146 C588.018,640.523 456.386,772.156 294.009,772.156 C131.632,772.156 0,640.523 0,478.146 C0,315.77 131.632,184.137 294.009,184.137 Z M294.009,384.552 C242.318,384.552 200.415,426.456 200.415,478.146 C200.415,529.837 242.318,571.741 294.009,571.741 C345.7,571.741 387.604,529.837 387.604,478.146 C387.604,426.456 345.7,384.552 294.009,384.552 Z'/%3E%3Cpath fill='%23E6EBF2' d='M202.958,365.731 L202.958,380.991 L187.698,380.991 L187.698,365.731 L202.958,365.731 Z M202.958,327.073 L202.958,342.333 L187.698,342.333 L187.698,327.073 L202.958,327.073 Z M243.651,325.038 L243.651,340.298 L228.391,340.298 L228.391,325.038 L243.651,325.038 Z M243.651,286.379 L243.651,301.639 L228.391,301.639 L228.391,286.379 L243.651,286.379 Z M202.958,285.362 L202.958,300.622 L187.698,300.622 L187.698,285.362 L202.958,285.362 Z M284.345,284.345 L284.345,299.605 L269.085,299.605 L269.085,284.345 L284.345,284.345 Z M284.345,245.686 L284.345,260.946 L269.085,260.946 L269.085,245.686 L284.345,245.686 Z M243.651,244.669 L243.651,259.929 L228.391,259.929 L228.391,244.669 L243.651,244.669 Z M202.958,243.651 L202.958,258.911 L187.698,258.911 L187.698,243.651 L202.958,243.651 Z M284.345,203.975 L284.345,219.235 L269.085,219.235 L269.085,203.975 L284.345,203.975 Z M202.958,203.975 L202.958,219.235 L187.698,219.235 L187.698,203.975 L202.958,203.975 Z M243.651,202.958 L243.651,218.218 L228.391,218.218 L228.391,202.958 L243.651,202.958 Z M243.651,163.282 L243.651,178.542 L228.391,178.542 L228.391,163.282 L243.651,163.282 Z M202.958,163.282 L202.958,178.542 L187.698,178.542 L187.698,163.282 L202.958,163.282 Z M284.345,162.265 L284.345,177.525 L269.085,177.525 L269.085,162.265 L284.345,162.265 Z M284.345,122.589 L284.345,137.849 L269.085,137.849 L269.085,122.589 L284.345,122.589 Z M243.651,122.589 L243.651,137.849 L228.391,137.849 L228.391,122.589 L243.651,122.589 Z M202.958,122.589 L202.958,137.849 L187.698,137.849 L187.698,122.589 L202.958,122.589 Z M284.345,81.8954 L284.345,97.1554 L269.085,97.1554 L269.085,81.8954 L284.345,81.8954 Z M243.651,81.8954 L243.651,97.1554 L228.391,97.1554 L228.391,81.8954 L243.651,81.8954 Z M202.958,81.8954 L202.958,97.1554 L187.698,97.1554 L187.698,81.8954 L202.958,81.8954 Z M284.345,41.202 L284.345,56.462 L269.085,56.462 L269.085,41.202 L284.345,41.202 Z M243.651,41.202 L243.651,56.462 L228.391,56.462 L228.391,41.202 L243.651,41.202 Z M284.345,0.508789 L284.345,15.7688 L269.085,15.7688 L269.085,0.508789 L284.345,0.508789 Z'/%3E%3C/g%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: calc(100% + 1px) calc(100% + 1px);\n  background-size: 30%; }\n\n.visNewVisSearchDialog {\n  width: 720px;\n  min-height: 600px; }\n\n.visNewVisDialog__body {\n  display: flex;\n  padding: 12px 24px 0;\n  min-height: 0; }\n\n.visNewVisDialog__list {\n  min-height: 0; }\n\n.visNewVisDialog__searchWrapper {\n  flex-shrink: 0; }\n\n.visNewVisDialog__typesWrapper {\n  -webkit-mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n          mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n  max-width: 400px;\n  min-height: 0;\n  margin-top: 2px;\n  overflow: hidden; }\n\n.visNewVisDialog__types {\n  scrollbar-width: thin;\n  width: auto;\n  overflow-y: auto;\n  padding-top: 16px;\n  justify-content: center;\n  padding-bottom: 16px; }\n  .visNewVisDialog__types::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .visNewVisDialog__types::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .visNewVisDialog__types::-webkit-scrollbar-corner, .visNewVisDialog__types::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.visNewVisDialog__description {\n  width: 320px; }\n\n.visNewVisDialog__type:disabled {\n  opacity: 0.2;\n  pointer-events: none; }\n\n.visNewVisDialog__typeImage {\n  width: 24px;\n  height: 24px; }\n\n@media only screen and (max-width: 574px) {\n  .visNewVisDialog {\n    background-image: none; }\n  .visNewVisDialog__typesWrapper {\n    max-width: none; }\n  .visNewVisDialog__types {\n    justify-content: flex-start; }\n  .visNewVisDialog__description {\n    display: none; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .visNewVisDialog {\n    background-image: none; }\n  .visNewVisDialog__typesWrapper {\n    max-width: none; }\n  .visNewVisDialog__types {\n    justify-content: flex-start; }\n  .visNewVisDialog__description {\n    display: none; } }\n\n@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  .visNewVisDialog {\n    width: 820px; }\n  .visNewVisDialog__body {\n    flex-basis: 800px; } }\n\n.visDisabledLabVisualization {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n\n.visDisabledLabVisualization__icon {\n  font-size: 28px; }\n\n/*\n* 1. Fix overflow of vis's specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visualization .visChart__container {\n  overflow: visible;\n  /* 1 */ }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0; }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*=\"-isOpen\"] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel .visLegend__toggle {\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%;\n  /**\n   * 1. Expand to fill the container but accept being squeezed smaller by the spy, even so small\n   *    that it disappears entirely.\n   */ }\n  .visualization .visChart__container {\n    scrollbar-width: thin;\n    min-height: 0;\n    flex: 1 1 0;\n    /* 1 */\n    display: flex;\n    flex-direction: row;\n    overflow: auto;\n    transition: opacity 0.01s; }\n    .visualization .visChart__container::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .visualization .visChart__container::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .visualization .visChart__container::-webkit-scrollbar-corner, .visualization .visChart__container::-webkit-scrollbar-track {\n      background-color: transparent; }\n    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n      .visualization .visChart__container {\n        flex: 1 0; } }\n    .visualization .visChart__container:focus {\n      box-shadow: none; }\n  .visualization .loading {\n    opacity: 0.5; }\n  .visualization .spinner {\n    position: absolute;\n    top: 40%;\n    left: 0;\n    right: 0;\n    z-index: 20;\n    opacity: 0.5; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(12);var content=__webpack_require__(45);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(13);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".visNewVisDialog {\n  max-width: 100vw;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='313' height='461' viewBox='0 0 313 461'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath fill='%2318191E' d='M294.009,184.137 C456.386,184.137 588.018,315.77 588.018,478.146 C588.018,640.523 456.386,772.156 294.009,772.156 C131.632,772.156 0,640.523 0,478.146 C0,315.77 131.632,184.137 294.009,184.137 Z M294.009,384.552 C242.318,384.552 200.415,426.456 200.415,478.146 C200.415,529.837 242.318,571.741 294.009,571.741 C345.7,571.741 387.604,529.837 387.604,478.146 C387.604,426.456 345.7,384.552 294.009,384.552 Z'/%3E%3Cpath fill='%2315161B' d='M202.958,365.731 L202.958,380.991 L187.698,380.991 L187.698,365.731 L202.958,365.731 Z M202.958,327.073 L202.958,342.333 L187.698,342.333 L187.698,327.073 L202.958,327.073 Z M243.651,325.038 L243.651,340.298 L228.391,340.298 L228.391,325.038 L243.651,325.038 Z M243.651,286.379 L243.651,301.639 L228.391,301.639 L228.391,286.379 L243.651,286.379 Z M202.958,285.362 L202.958,300.622 L187.698,300.622 L187.698,285.362 L202.958,285.362 Z M284.345,284.345 L284.345,299.605 L269.085,299.605 L269.085,284.345 L284.345,284.345 Z M284.345,245.686 L284.345,260.946 L269.085,260.946 L269.085,245.686 L284.345,245.686 Z M243.651,244.669 L243.651,259.929 L228.391,259.929 L228.391,244.669 L243.651,244.669 Z M202.958,243.651 L202.958,258.911 L187.698,258.911 L187.698,243.651 L202.958,243.651 Z M284.345,203.975 L284.345,219.235 L269.085,219.235 L269.085,203.975 L284.345,203.975 Z M202.958,203.975 L202.958,219.235 L187.698,219.235 L187.698,203.975 L202.958,203.975 Z M243.651,202.958 L243.651,218.218 L228.391,218.218 L228.391,202.958 L243.651,202.958 Z M243.651,163.282 L243.651,178.542 L228.391,178.542 L228.391,163.282 L243.651,163.282 Z M202.958,163.282 L202.958,178.542 L187.698,178.542 L187.698,163.282 L202.958,163.282 Z M284.345,162.265 L284.345,177.525 L269.085,177.525 L269.085,162.265 L284.345,162.265 Z M284.345,122.589 L284.345,137.849 L269.085,137.849 L269.085,122.589 L284.345,122.589 Z M243.651,122.589 L243.651,137.849 L228.391,137.849 L228.391,122.589 L243.651,122.589 Z M202.958,122.589 L202.958,137.849 L187.698,137.849 L187.698,122.589 L202.958,122.589 Z M284.345,81.8954 L284.345,97.1554 L269.085,97.1554 L269.085,81.8954 L284.345,81.8954 Z M243.651,81.8954 L243.651,97.1554 L228.391,97.1554 L228.391,81.8954 L243.651,81.8954 Z M202.958,81.8954 L202.958,97.1554 L187.698,97.1554 L187.698,81.8954 L202.958,81.8954 Z M284.345,41.202 L284.345,56.462 L269.085,56.462 L269.085,41.202 L284.345,41.202 Z M243.651,41.202 L243.651,56.462 L228.391,56.462 L228.391,41.202 L243.651,41.202 Z M284.345,0.508789 L284.345,15.7688 L269.085,15.7688 L269.085,0.508789 L284.345,0.508789 Z'/%3E%3C/g%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: calc(100% + 1px) calc(100% + 1px);\n  background-size: 30%; }\n\n.visNewVisSearchDialog {\n  width: 720px;\n  min-height: 600px; }\n\n.visNewVisDialog__body {\n  display: flex;\n  padding: 12px 24px 0;\n  min-height: 0; }\n\n.visNewVisDialog__list {\n  min-height: 0; }\n\n.visNewVisDialog__searchWrapper {\n  flex-shrink: 0; }\n\n.visNewVisDialog__typesWrapper {\n  -webkit-mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n          mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n  max-width: 400px;\n  min-height: 0;\n  margin-top: 2px;\n  overflow: hidden; }\n\n.visNewVisDialog__types {\n  scrollbar-width: thin;\n  width: auto;\n  overflow-y: auto;\n  padding-top: 16px;\n  justify-content: center;\n  padding-bottom: 16px; }\n  .visNewVisDialog__types::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .visNewVisDialog__types::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .visNewVisDialog__types::-webkit-scrollbar-corner, .visNewVisDialog__types::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.visNewVisDialog__description {\n  width: 320px; }\n\n.visNewVisDialog__type:disabled {\n  opacity: 0.2;\n  pointer-events: none; }\n\n.visNewVisDialog__typeImage {\n  width: 24px;\n  height: 24px; }\n\n@media only screen and (max-width: 574px) {\n  .visNewVisDialog {\n    background-image: none; }\n  .visNewVisDialog__typesWrapper {\n    max-width: none; }\n  .visNewVisDialog__types {\n    justify-content: flex-start; }\n  .visNewVisDialog__description {\n    display: none; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .visNewVisDialog {\n    background-image: none; }\n  .visNewVisDialog__typesWrapper {\n    max-width: none; }\n  .visNewVisDialog__types {\n    justify-content: flex-start; }\n  .visNewVisDialog__description {\n    display: none; } }\n\n@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  .visNewVisDialog {\n    width: 820px; }\n  .visNewVisDialog__body {\n    flex-basis: 800px; } }\n\n.visDisabledLabVisualization {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n\n.visDisabledLabVisualization__icon {\n  font-size: 27px; }\n\n/*\n* 1. Fix overflow of vis's specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visualization .visChart__container {\n  overflow: visible;\n  /* 1 */ }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0; }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*=\"-isOpen\"] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel .visLegend__toggle {\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%;\n  /**\n   * 1. Expand to fill the container but accept being squeezed smaller by the spy, even so small\n   *    that it disappears entirely.\n   */ }\n  .visualization .visChart__container {\n    scrollbar-width: thin;\n    min-height: 0;\n    flex: 1 1 0;\n    /* 1 */\n    display: flex;\n    flex-direction: row;\n    overflow: auto;\n    transition: opacity 0.01s; }\n    .visualization .visChart__container::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .visualization .visChart__container::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .visualization .visChart__container::-webkit-scrollbar-corner, .visualization .visChart__container::-webkit-scrollbar-track {\n      background-color: transparent; }\n    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n      .visualization .visChart__container {\n        flex: 1 0; } }\n    .visualization .visChart__container:focus {\n      box-shadow: none; }\n  .visualization .loading {\n    opacity: 0.5; }\n  .visualization .spinner {\n    position: absolute;\n    top: 40%;\n    left: 0;\n    right: 0;\n    z-index: 20;\n    opacity: 0.5; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(12);var content=__webpack_require__(47);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(13);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".visNewVisDialog {\n  max-width: 100vw;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='313' height='461' viewBox='0 0 313 461'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath fill='%23F5F7FA' d='M294.009,184.137 C456.386,184.137 588.018,315.77 588.018,478.146 C588.018,640.523 456.386,772.156 294.009,772.156 C131.632,772.156 0,640.523 0,478.146 C0,315.77 131.632,184.137 294.009,184.137 Z M294.009,384.552 C242.318,384.552 200.415,426.456 200.415,478.146 C200.415,529.837 242.318,571.741 294.009,571.741 C345.7,571.741 387.604,529.837 387.604,478.146 C387.604,426.456 345.7,384.552 294.009,384.552 Z'/%3E%3Cpath fill='%23E6EBF2' d='M202.958,365.731 L202.958,380.991 L187.698,380.991 L187.698,365.731 L202.958,365.731 Z M202.958,327.073 L202.958,342.333 L187.698,342.333 L187.698,327.073 L202.958,327.073 Z M243.651,325.038 L243.651,340.298 L228.391,340.298 L228.391,325.038 L243.651,325.038 Z M243.651,286.379 L243.651,301.639 L228.391,301.639 L228.391,286.379 L243.651,286.379 Z M202.958,285.362 L202.958,300.622 L187.698,300.622 L187.698,285.362 L202.958,285.362 Z M284.345,284.345 L284.345,299.605 L269.085,299.605 L269.085,284.345 L284.345,284.345 Z M284.345,245.686 L284.345,260.946 L269.085,260.946 L269.085,245.686 L284.345,245.686 Z M243.651,244.669 L243.651,259.929 L228.391,259.929 L228.391,244.669 L243.651,244.669 Z M202.958,243.651 L202.958,258.911 L187.698,258.911 L187.698,243.651 L202.958,243.651 Z M284.345,203.975 L284.345,219.235 L269.085,219.235 L269.085,203.975 L284.345,203.975 Z M202.958,203.975 L202.958,219.235 L187.698,219.235 L187.698,203.975 L202.958,203.975 Z M243.651,202.958 L243.651,218.218 L228.391,218.218 L228.391,202.958 L243.651,202.958 Z M243.651,163.282 L243.651,178.542 L228.391,178.542 L228.391,163.282 L243.651,163.282 Z M202.958,163.282 L202.958,178.542 L187.698,178.542 L187.698,163.282 L202.958,163.282 Z M284.345,162.265 L284.345,177.525 L269.085,177.525 L269.085,162.265 L284.345,162.265 Z M284.345,122.589 L284.345,137.849 L269.085,137.849 L269.085,122.589 L284.345,122.589 Z M243.651,122.589 L243.651,137.849 L228.391,137.849 L228.391,122.589 L243.651,122.589 Z M202.958,122.589 L202.958,137.849 L187.698,137.849 L187.698,122.589 L202.958,122.589 Z M284.345,81.8954 L284.345,97.1554 L269.085,97.1554 L269.085,81.8954 L284.345,81.8954 Z M243.651,81.8954 L243.651,97.1554 L228.391,97.1554 L228.391,81.8954 L243.651,81.8954 Z M202.958,81.8954 L202.958,97.1554 L187.698,97.1554 L187.698,81.8954 L202.958,81.8954 Z M284.345,41.202 L284.345,56.462 L269.085,56.462 L269.085,41.202 L284.345,41.202 Z M243.651,41.202 L243.651,56.462 L228.391,56.462 L228.391,41.202 L243.651,41.202 Z M284.345,0.508789 L284.345,15.7688 L269.085,15.7688 L269.085,0.508789 L284.345,0.508789 Z'/%3E%3C/g%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: calc(100% + 1px) calc(100% + 1px);\n  background-size: 30%; }\n\n.visNewVisSearchDialog {\n  width: 720px;\n  min-height: 600px; }\n\n.visNewVisDialog__body {\n  display: flex;\n  padding: 12px 24px 0;\n  min-height: 0; }\n\n.visNewVisDialog__list {\n  min-height: 0; }\n\n.visNewVisDialog__searchWrapper {\n  flex-shrink: 0; }\n\n.visNewVisDialog__typesWrapper {\n  -webkit-mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n          mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n  max-width: 400px;\n  min-height: 0;\n  margin-top: 2px;\n  overflow: hidden; }\n\n.visNewVisDialog__types {\n  scrollbar-width: thin;\n  width: auto;\n  overflow-y: auto;\n  padding-top: 16px;\n  justify-content: center;\n  padding-bottom: 16px; }\n  .visNewVisDialog__types::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .visNewVisDialog__types::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .visNewVisDialog__types::-webkit-scrollbar-corner, .visNewVisDialog__types::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.visNewVisDialog__description {\n  width: 320px; }\n\n.visNewVisDialog__type:disabled {\n  opacity: 0.2;\n  pointer-events: none; }\n\n.visNewVisDialog__typeImage {\n  width: 24px;\n  height: 24px; }\n\n@media only screen and (max-width: 574px) {\n  .visNewVisDialog {\n    background-image: none; }\n  .visNewVisDialog__typesWrapper {\n    max-width: none; }\n  .visNewVisDialog__types {\n    justify-content: flex-start; }\n  .visNewVisDialog__description {\n    display: none; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .visNewVisDialog {\n    background-image: none; }\n  .visNewVisDialog__typesWrapper {\n    max-width: none; }\n  .visNewVisDialog__types {\n    justify-content: flex-start; }\n  .visNewVisDialog__description {\n    display: none; } }\n\n@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  .visNewVisDialog {\n    width: 820px; }\n  .visNewVisDialog__body {\n    flex-basis: 800px; } }\n\n.visDisabledLabVisualization {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n\n.visDisabledLabVisualization__icon {\n  font-size: 27px; }\n\n/*\n* 1. Fix overflow of vis's specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visualization .visChart__container {\n  overflow: visible;\n  /* 1 */ }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0; }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*=\"-isOpen\"] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel .visLegend__toggle {\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%;\n  /**\n   * 1. Expand to fill the container but accept being squeezed smaller by the spy, even so small\n   *    that it disappears entirely.\n   */ }\n  .visualization .visChart__container {\n    scrollbar-width: thin;\n    min-height: 0;\n    flex: 1 1 0;\n    /* 1 */\n    display: flex;\n    flex-direction: row;\n    overflow: auto;\n    transition: opacity 0.01s; }\n    .visualization .visChart__container::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .visualization .visChart__container::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .visualization .visChart__container::-webkit-scrollbar-corner, .visualization .visChart__container::-webkit-scrollbar-track {\n      background-color: transparent; }\n    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n      .visualization .visChart__container {\n        flex: 1 0; } }\n    .visualization .visChart__container:focus {\n      box-shadow: none; }\n  .visualization .loading {\n    opacity: 0.5; }\n  .visualization .spinner {\n    position: absolute;\n    top: 40%;\n    left: 0;\n    right: 0;\n    z-index: 20;\n    opacity: 0.5; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(29);function set(object,path,value){return object==null?object:baseSet(object,path,value)}module.exports=set},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(50),eq=__webpack_require__(32);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(51);function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},function(module,exports,__webpack_require__){var getNative=__webpack_require__(22);var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(30),isMasked=__webpack_require__(57),isObject=__webpack_require__(25),toSource=__webpack_require__(59);var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},function(module,exports,__webpack_require__){(function(global){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(54))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(23);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},function(module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(58);var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},function(module,exports,__webpack_require__){var root=__webpack_require__(24);var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},function(module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},function(module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},function(module,exports,__webpack_require__){var isArray=__webpack_require__(26),isKey=__webpack_require__(62),stringToPath=__webpack_require__(64),toString=__webpack_require__(87);function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}module.exports=castPath},function(module,exports,__webpack_require__){var isArray=__webpack_require__(26),isSymbol=__webpack_require__(27);var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}module.exports=isKey},function(module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(65);var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped((function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}));return result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(66);var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,(function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key}));var cache=result.cache;return result}module.exports=memoizeCapped},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(67);var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(68),mapCacheDelete=__webpack_require__(82),mapCacheGet=__webpack_require__(84),mapCacheHas=__webpack_require__(85),mapCacheSet=__webpack_require__(86);function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},function(module,exports,__webpack_require__){var Hash=__webpack_require__(69),ListCache=__webpack_require__(75),Map=__webpack_require__(81);function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(70),hashDelete=__webpack_require__(71),hashGet=__webpack_require__(72),hashHas=__webpack_require__(73),hashSet=__webpack_require__(74);function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(14);function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},function(module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(14);var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(14);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(14);var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(76),listCacheDelete=__webpack_require__(77),listCacheGet=__webpack_require__(78),listCacheHas=__webpack_require__(79),listCacheSet=__webpack_require__(80);function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},function(module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(15);var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(15);function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(15);function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(15);function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},function(module,exports,__webpack_require__){var getNative=__webpack_require__(22),root=__webpack_require__(24);var Map=getNative(root,"Map");module.exports=Map},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(16);function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},function(module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(16);function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(16);function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(16);function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(88);function toString(value){return value==null?"":baseToString(value)}module.exports=toString},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(23),arrayMap=__webpack_require__(89),isArray=__webpack_require__(26),isSymbol=__webpack_require__(27);var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},function(module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(27);var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(29);function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}module.exports=setWith},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));__webpack_require__.d(__webpack_exports__,"Vis",(function(){return vis_Vis}));__webpack_require__.d(__webpack_exports__,"TypesService",(function(){return types_service_TypesService}));__webpack_require__.d(__webpack_exports__,"VISUALIZE_EMBEDDABLE_TYPE",(function(){return VISUALIZE_EMBEDDABLE_TYPE}));__webpack_require__.d(__webpack_exports__,"VIS_EVENT_TO_TRIGGER",(function(){return VIS_EVENT_TO_TRIGGER}));__webpack_require__.d(__webpack_exports__,"VisualizationContainer",(function(){return visualization_container_VisualizationContainer}));__webpack_require__.d(__webpack_exports__,"VisualizationNoResults",(function(){return visualization_noresults_VisualizationNoResults}));__webpack_require__.d(__webpack_exports__,"getVisSchemas",(function(){return getSchemas}));__webpack_require__.d(__webpack_exports__,"VisualizationsSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisualizationsStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisTypeAlias",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisType",(function(){return vis_types_types["VisType"]}));__webpack_require__.d(__webpack_exports__,"BaseVisTypeOptions",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ReactVisTypeOptions",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisParams",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SerializedVis",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SerializedVisData",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisData",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisualizeInput",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SchemaConfig",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"BuildPipelineParams",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"updateOldState",(function(){return vis_update_state_updateOldState}));__webpack_require__.d(__webpack_exports__,"PersistedState",(function(){return persisted_state_PersistedState}));__webpack_require__.d(__webpack_exports__,"VisualizationController",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedVisState",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ISavedVis",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisSavedObject",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisResponseValue",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ExprVisAPIEvents",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisualizationListItem",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VISUALIZE_ENABLE_LABS_SETTING",(function(){return VISUALIZE_ENABLE_LABS_SETTING}));var public_0=__webpack_require__(39);var registry=[];var visTypeAliasRegistry={get:function get(){return[].concat(registry)},add:function add(newVisTypeAlias){if(registry.find((function(visTypeAlias){return visTypeAlias.name===newVisTypeAlias.name}))){throw new Error("".concat(newVisTypeAlias.name," already registered"))}registry.push(newVisTypeAlias)}};var external_kbnSharedDeps_Lodash_=__webpack_require__(1);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultOptions={showTimePicker:true,showQueryBar:true,showFilterBar:true,showIndexSelection:true,hierarchicalData:false};var base_vis_type_BaseVisType=function(){function BaseVisType(opts){var _opts$description,_opts$stage,_opts$hidden,_opts$requestHandler,_opts$responseHandler,_opts$hierarchicalDat,_opts$useCustomNoData;_classCallCheck(this,BaseVisType);_defineProperty(this,"name",void 0);_defineProperty(this,"title",void 0);_defineProperty(this,"description",void 0);_defineProperty(this,"getSupportedTriggers",void 0);_defineProperty(this,"icon",void 0);_defineProperty(this,"image",void 0);_defineProperty(this,"stage",void 0);_defineProperty(this,"options",void 0);_defineProperty(this,"visualization",void 0);_defineProperty(this,"visConfig",void 0);_defineProperty(this,"editor",void 0);_defineProperty(this,"editorConfig",void 0);_defineProperty(this,"hidden",void 0);_defineProperty(this,"requestHandler",void 0);_defineProperty(this,"responseHandler",void 0);_defineProperty(this,"hierarchicalData",void 0);_defineProperty(this,"setup",void 0);_defineProperty(this,"getUsedIndexPattern",void 0);_defineProperty(this,"useCustomNoDataScreen",void 0);_defineProperty(this,"inspectorAdapters",void 0);_defineProperty(this,"toExpressionAst",void 0);_defineProperty(this,"getInfoMessage",void 0);if(!opts.icon&&!opts.image){throw new Error("vis_type must define its icon or image")}this.name=opts.name;this.description=(_opts$description=opts.description)!==null&&_opts$description!==void 0?_opts$description:"";this.getSupportedTriggers=opts.getSupportedTriggers;this.title=opts.title;this.icon=opts.icon;this.image=opts.image;this.visualization=opts.visualization;this.visConfig=Object(external_kbnSharedDeps_Lodash_["defaultsDeep"])({},opts.visConfig,{defaults:{}});this.editor=opts.editor;this.editorConfig=Object(external_kbnSharedDeps_Lodash_["defaultsDeep"])({},opts.editorConfig,{collections:{}});this.options=Object(external_kbnSharedDeps_Lodash_["defaultsDeep"])({},opts.options,defaultOptions);this.stage=(_opts$stage=opts.stage)!==null&&_opts$stage!==void 0?_opts$stage:"production";this.hidden=(_opts$hidden=opts.hidden)!==null&&_opts$hidden!==void 0?_opts$hidden:false;this.requestHandler=(_opts$requestHandler=opts.requestHandler)!==null&&_opts$requestHandler!==void 0?_opts$requestHandler:"courier";this.responseHandler=(_opts$responseHandler=opts.responseHandler)!==null&&_opts$responseHandler!==void 0?_opts$responseHandler:"none";this.setup=opts.setup;this.hierarchicalData=(_opts$hierarchicalDat=opts.hierarchicalData)!==null&&_opts$hierarchicalDat!==void 0?_opts$hierarchicalDat:false;this.getUsedIndexPattern=opts.getUsedIndexPattern;this.useCustomNoDataScreen=(_opts$useCustomNoData=opts.useCustomNoDataScreen)!==null&&_opts$useCustomNoData!==void 0?_opts$useCustomNoData:false;this.inspectorAdapters=opts.inspectorAdapters;this.toExpressionAst=opts.toExpressionAst;this.getInfoMessage=opts.getInfoMessage}_createClass(BaseVisType,[{key:"schemas",get:function get(){var _this$editorConfig$sc,_this$editorConfig;return(_this$editorConfig$sc=(_this$editorConfig=this.editorConfig)===null||_this$editorConfig===void 0?void 0:_this$editorConfig.schemas)!==null&&_this$editorConfig$sc!==void 0?_this$editorConfig$sc:[]}},{key:"requiresSearch",get:function get(){return this.requestHandler!=="none"}}]);return BaseVisType}();var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(6);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var public_=__webpack_require__(4);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var _createGetterSetter=Object(public_["createGetterSetter"])("UISettings"),_createGetterSetter2=_slicedToArray(_createGetterSetter,2),getUISettings=_createGetterSetter2[0],setUISettings=_createGetterSetter2[1];var _createGetterSetter3=Object(public_["createGetterSetter"])("Capabilities"),_createGetterSetter4=_slicedToArray(_createGetterSetter3,2),getCapabilities=_createGetterSetter4[0],setCapabilities=_createGetterSetter4[1];var _createGetterSetter5=Object(public_["createGetterSetter"])("Http"),_createGetterSetter6=_slicedToArray(_createGetterSetter5,2),getHttp=_createGetterSetter6[0],setHttp=_createGetterSetter6[1];var _createGetterSetter7=Object(public_["createGetterSetter"])("Application"),_createGetterSetter8=_slicedToArray(_createGetterSetter7,2),getApplication=_createGetterSetter8[0],setApplication=_createGetterSetter8[1];var _createGetterSetter9=Object(public_["createGetterSetter"])("Embeddable"),_createGetterSetter10=_slicedToArray(_createGetterSetter9,2),getEmbeddable=_createGetterSetter10[0],setEmbeddable=_createGetterSetter10[1];var _createGetterSetter11=Object(public_["createGetterSetter"])("SavedObjects"),_createGetterSetter12=_slicedToArray(_createGetterSetter11,2),getSavedObjects=_createGetterSetter12[0],setSavedObjects=_createGetterSetter12[1];var _createGetterSetter13=Object(public_["createGetterSetter"])("Types"),_createGetterSetter14=_slicedToArray(_createGetterSetter13,2),getTypes=_createGetterSetter14[0],setTypes=_createGetterSetter14[1];var _createGetterSetter15=Object(public_["createGetterSetter"])("I18n"),_createGetterSetter16=_slicedToArray(_createGetterSetter15,2),getI18n=_createGetterSetter16[0],setI18n=_createGetterSetter16[1];var _createGetterSetter17=Object(public_["createGetterSetter"])("FilterManager"),_createGetterSetter18=_slicedToArray(_createGetterSetter17,2),getFilterManager=_createGetterSetter18[0],setFilterManager=_createGetterSetter18[1];var _createGetterSetter19=Object(public_["createGetterSetter"])("TimeFilter"),_createGetterSetter20=_slicedToArray(_createGetterSetter19,2),getTimeFilter=_createGetterSetter20[0],setTimeFilter=_createGetterSetter20[1];var _createGetterSetter21=Object(public_["createGetterSetter"])("IndexPatterns"),_createGetterSetter22=_slicedToArray(_createGetterSetter21,2),getIndexPatterns=_createGetterSetter22[0],setIndexPatterns=_createGetterSetter22[1];var _createGetterSetter23=Object(public_["createGetterSetter"])("Search"),_createGetterSetter24=_slicedToArray(_createGetterSetter23,2),getSearch=_createGetterSetter24[0],setSearch=_createGetterSetter24[1];var _createGetterSetter25=Object(public_["createGetterSetter"])("UsageCollection"),_createGetterSetter26=_slicedToArray(_createGetterSetter25,2),getUsageCollector=_createGetterSetter26[0],setUsageCollector=_createGetterSetter26[1];var _createGetterSetter27=Object(public_["createGetterSetter"])("Expressions"),_createGetterSetter28=_slicedToArray(_createGetterSetter27,2),getExpressions=_createGetterSetter28[0],setExpressions=_createGetterSetter28[1];var _createGetterSetter29=Object(public_["createGetterSetter"])("UiActions"),_createGetterSetter30=_slicedToArray(_createGetterSetter29,2),getUiActions=_createGetterSetter30[0],setUiActions=_createGetterSetter30[1];var _createGetterSetter31=Object(public_["createGetterSetter"])("SavedVisualisationsLoader"),_createGetterSetter32=_slicedToArray(_createGetterSetter31,2),getSavedVisualizationsLoader=_createGetterSetter32[0],setSavedVisualizationsLoader=_createGetterSetter32[1];var _createGetterSetter33=Object(public_["createGetterSetter"])("AggConfigs"),_createGetterSetter34=_slicedToArray(_createGetterSetter33,2),getAggs=_createGetterSetter34[0],setAggs=_createGetterSetter34[1];var _createGetterSetter35=Object(public_["createGetterSetter"])("Overlays"),_createGetterSetter36=_slicedToArray(_createGetterSetter35,2),getOverlays=_createGetterSetter36[0],setOverlays=_createGetterSetter36[1];var _createGetterSetter37=Object(public_["createGetterSetter"])("Chrome"),_createGetterSetter38=_slicedToArray(_createGetterSetter37,2),getChrome=_createGetterSetter38[0],setChrome=_createGetterSetter38[1];var _createGetterSetter39=Object(public_["createGetterSetter"])("savedSearchLoader"),_createGetterSetter40=_slicedToArray(_createGetterSetter39,2),getSavedSearchLoader=_createGetterSetter40[0],setSavedSearchLoader=_createGetterSetter40[1];function react_vis_controller_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function react_vis_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function react_vis_controller_createClass(Constructor,protoProps,staticProps){if(protoProps)react_vis_controller_defineProperties(Constructor.prototype,protoProps);if(staticProps)react_vis_controller_defineProperties(Constructor,staticProps);return Constructor}var react_vis_controller_ReactVisController=function(){function ReactVisController(element,vis){react_vis_controller_classCallCheck(this,ReactVisController);this.element=element;this.vis=vis}react_vis_controller_createClass(ReactVisController,[{key:"render",value:function render(visData,visParams){var _this=this;var I18nContext=getI18n().Context;return new Promise((function(resolve,reject){if(!_this.vis.type||!_this.vis.type.visConfig||!_this.vis.type.visConfig.component){reject("Missing component for ReactVisType")}var Component=_this.vis.type.visConfig.component;var config=getUISettings();Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(Component,{config:config,vis:_this.vis,visData:visData,visParams:visParams,renderComplete:resolve})),_this.element)}))}},{key:"destroy",value:function destroy(){Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(this.element)}}]);return ReactVisController}();function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){react_vis_type_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function react_vis_type_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function react_vis_type_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var react_vis_type_ReactVisType=function(_BaseVisType){_inherits(ReactVisType,_BaseVisType);var _super=_createSuper(ReactVisType);function ReactVisType(opts){var _this;react_vis_type_classCallCheck(this,ReactVisType);_this=_super.call(this,_objectSpread(_objectSpread({},opts),{},{visualization:react_vis_controller_ReactVisController}));if(!_this.visConfig.component){throw new Error("Missing component for ReactVisType")}return _this}return ReactVisType}(base_vis_type_BaseVisType);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||types_service_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function types_service_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return types_service_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return types_service_arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return types_service_arrayLikeToArray(arr)}function types_service_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function types_service_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function types_service_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function types_service_createClass(Constructor,protoProps,staticProps){if(protoProps)types_service_defineProperties(Constructor.prototype,protoProps);if(staticProps)types_service_defineProperties(Constructor,staticProps);return Constructor}function types_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var types_service_TypesService=function(){function TypesService(){types_service_classCallCheck(this,TypesService);types_service_defineProperty(this,"types",{});types_service_defineProperty(this,"unregisteredHiddenTypes",[])}types_service_createClass(TypesService,[{key:"registerVisualization",value:function registerVisualization(visDefinition){if(this.unregisteredHiddenTypes.includes(visDefinition.name)){visDefinition.hidden=true}if(this.types[visDefinition.name]){throw new Error("type already exists!")}this.types[visDefinition.name]=visDefinition}},{key:"setup",value:function setup(){var _this=this;return{createBaseVisualization:function createBaseVisualization(config){var vis=new base_vis_type_BaseVisType(config);_this.registerVisualization(vis)},createReactVisualization:function createReactVisualization(config){var vis=new react_vis_type_ReactVisType(config);_this.registerVisualization(vis)},registerAlias:visTypeAliasRegistry.add,hideTypes:function hideTypes(typeNames){typeNames.forEach((function(name){if(_this.types[name]){_this.types[name].hidden=true}else{_this.unregisteredHiddenTypes.push(name)}}))}}}},{key:"start",value:function start(){var _this2=this;return{get:function get(visualization){return _this2.types[visualization]},all:function all(){return _toConsumableArray(Object.values(_this2.types))},getAliases:visTypeAliasRegistry.get}}},{key:"stop",value:function stop(){}}]);return TypesService}();var vis_types_types=__webpack_require__(28);var embeddable_public_=__webpack_require__(7);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(5);function DisabledLabVisualization(_ref){var title=_ref.title;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"visDisabledLabVisualization"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"kuiVerticalRhythm visDisabledLabVisualization__icon kuiIcon fa-flask","aria-hidden":"true"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"kuiVerticalRhythm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.disabledLabVisualizationTitle",defaultMessage:"{title} is a lab visualization.",values:{title:external_kbnSharedDeps_React_default.a.createElement("em",{className:"visDisabledLabVisualization__title"},title)}})),external_kbnSharedDeps_React_default.a.createElement("div",{className:"kuiVerticalRhythm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.disabledLabVisualizationMessage",defaultMessage:"Please turn on lab-mode in the advanced settings to see lab visualizations."})))}var VISUALIZE_EMBEDDABLE_TYPE="visualization";function disabled_lab_embeddable_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function disabled_lab_embeddable_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function disabled_lab_embeddable_createClass(Constructor,protoProps,staticProps){if(protoProps)disabled_lab_embeddable_defineProperties(Constructor.prototype,protoProps);if(staticProps)disabled_lab_embeddable_defineProperties(Constructor,staticProps);return Constructor}function disabled_lab_embeddable_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)disabled_lab_embeddable_setPrototypeOf(subClass,superClass)}function disabled_lab_embeddable_setPrototypeOf(o,p){disabled_lab_embeddable_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return disabled_lab_embeddable_setPrototypeOf(o,p)}function disabled_lab_embeddable_createSuper(Derived){var hasNativeReflectConstruct=disabled_lab_embeddable_isNativeReflectConstruct();return function _createSuperInternal(){var Super=disabled_lab_embeddable_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=disabled_lab_embeddable_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return disabled_lab_embeddable_possibleConstructorReturn(this,result)}}function disabled_lab_embeddable_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return disabled_lab_embeddable_assertThisInitialized(self)}function disabled_lab_embeddable_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function disabled_lab_embeddable_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function disabled_lab_embeddable_getPrototypeOf(o){disabled_lab_embeddable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return disabled_lab_embeddable_getPrototypeOf(o)}function disabled_lab_embeddable_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var disabled_lab_embeddable_DisabledLabEmbeddable=function(_Embeddable){disabled_lab_embeddable_inherits(DisabledLabEmbeddable,_Embeddable);var _super=disabled_lab_embeddable_createSuper(DisabledLabEmbeddable);function DisabledLabEmbeddable(title,initialInput){var _this;disabled_lab_embeddable_classCallCheck(this,DisabledLabEmbeddable);_this=_super.call(this,initialInput,{title:title});_this.title=title;disabled_lab_embeddable_defineProperty(disabled_lab_embeddable_assertThisInitialized(_this),"domNode",void 0);disabled_lab_embeddable_defineProperty(disabled_lab_embeddable_assertThisInitialized(_this),"type",VISUALIZE_EMBEDDABLE_TYPE);return _this}disabled_lab_embeddable_createClass(DisabledLabEmbeddable,[{key:"reload",value:function reload(){}},{key:"render",value:function render(domNode){if(this.title){this.domNode=domNode;external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(DisabledLabVisualization,{title:this.title}),domNode)}}},{key:"destroy",value:function destroy(){if(this.domNode){external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(this.domNode)}}}]);return DisabledLabEmbeddable}(embeddable_public_["Embeddable"]);var external_kbnSharedDeps_Rxjs_=__webpack_require__(17);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(3);var data_public_=__webpack_require__(10);var external_kbnSharedDeps_Moment_=__webpack_require__(34);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var expressions_public_=__webpack_require__(35);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function build_pipeline_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function build_pipeline_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){build_pipeline_ownKeys(Object(source),true).forEach((function(key){build_pipeline_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{build_pipeline_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function build_pipeline_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var isDateHistogramBucketAggConfig=data_public_["search"].aggs.isDateHistogramBucketAggConfig;var vislibCharts=["area","gauge","goal","heatmap","histogram","horizontal_bar","line"];var getSchemas=function getSchemas(vis,_ref){var timeRange=_ref.timeRange,timefilter=_ref.timefilter;var createSchemaConfig=function createSchemaConfig(accessor,agg){if(isDateHistogramBucketAggConfig(agg)){agg.params.timeRange=timeRange;var bounds=agg.params.timeRange&&agg.fieldIsTimeField()?timefilter.calculateBounds(agg.params.timeRange):undefined;agg.buckets.setBounds(bounds);agg.buckets.setInterval(agg.params.interval)}var hasSubAgg=["derivative","moving_avg","serial_diff","cumulative_sum","sum_bucket","avg_bucket","min_bucket","max_bucket"].includes(agg.type.name);var formatAgg=hasSubAgg?agg.params.customMetric||agg.aggConfigs.getRequestAggById(agg.params.metricAgg):agg;var params={};if(agg.type.name==="geohash_grid"){params.precision=agg.params.precision;params.useGeocentroid=agg.params.useGeocentroid}var label=agg.makeLabel&&agg.makeLabel();return{accessor:accessor,format:formatAgg.toSerializedFieldFormat(),params:params,label:label,aggType:agg.type.name}};var cnt=0;var schemas={metric:[]};if(!vis.data.aggs){return schemas}var responseAggs=vis.data.aggs.getResponseAggs().filter((function(agg){return agg.enabled}));var isHierarchical=vis.isHierarchical();var metrics=responseAggs.filter((function(agg){return agg.type.type==="metrics"}));responseAggs.forEach((function(agg){var skipMetrics=false;var schemaName=agg.schema;if(!schemaName){if(agg.type.name==="geo_centroid"){schemaName="geo_centroid"}else{cnt++;return}}if(schemaName==="split"){schemaName="split_".concat(vis.params.row?"row":"column");skipMetrics=responseAggs.length-metrics.length>1}if(!schemas[schemaName]){schemas[schemaName]=[]}if(!isHierarchical||agg.type.type!=="metrics"){schemas[schemaName].push(createSchemaConfig(cnt++,agg))}if(isHierarchical&&(agg.type.type!=="metrics"||metrics.length===responseAggs.length)){metrics.forEach((function(metric){var schemaConfig=createSchemaConfig(cnt++,metric);if(!skipMetrics){schemas.metric.push(schemaConfig)}}))}}));return schemas};var prepareJson=function prepareJson(variable,data){if(data===undefined){return""}return"".concat(variable,"='").concat(JSON.stringify(data).replace(/\\/g,"\\\\").replace(/'/g,"\\'"),"' ")};var escapeString=function escapeString(data){return data.replace(/\\/g,"\\\\").replace(/'/g,"\\'")};var prepareString=function prepareString(variable,data){if(data===undefined){return""}return"".concat(variable,"='").concat(escapeString(data),"' ")};var prepareValue=function prepareValue(variable,data){var raw=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(data===undefined){return""}if(raw){return"".concat(variable,"=").concat(data," ")}switch(typeof data){case"string":return prepareString(variable,data);case"object":return prepareJson(variable,data);default:return"".concat(variable,"=").concat(data," ")}};var prepareDimension=function prepareDimension(variable,data){if(data===undefined){return""}var expr="".concat(variable,"={visdimension ").concat(data.accessor," ");if(data.format){expr+=prepareValue("format",data.format.id);expr+=prepareJson("formatParams",data.format.params)}expr+="} ";return expr};var build_pipeline_adjustVislibDimensionFormmaters=function adjustVislibDimensionFormmaters(vis,dimensions){var visConfig=vis.params;var responseAggs=vis.data.aggs.getResponseAggs().filter((function(agg){return agg.enabled}));(dimensions.y||[]).forEach((function(yDimension){var yAgg=responseAggs[yDimension.accessor];var seriesParam=(visConfig.seriesParams||[]).find((function(param){return param.data.id===yAgg.id}));if(seriesParam){var usedValueAxis=(visConfig.valueAxes||[]).find((function(valueAxis){return valueAxis.id===seriesParam.valueAxis}));if(Object(external_kbnSharedDeps_Lodash_["get"])(usedValueAxis,"scale.mode")==="percentage"){yDimension.format={id:"percent"}}}if(Object(external_kbnSharedDeps_Lodash_["get"])(visConfig,"gauge.percentageMode")===true){yDimension.format={id:"percent"}}}))};var buildPipelineVisFunction={vega:function vega(params){return"vega ".concat(prepareString("spec",params.spec))},input_control_vis:function input_control_vis(params){return"input_control_vis ".concat(prepareJson("visConfig",params))},metrics:function metrics(_ref2,schemas){var title=_ref2.title,params=_objectWithoutProperties(_ref2,["title"]);var uiState=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var paramsJson=prepareJson("params",params);var uiStateJson=prepareJson("uiState",uiState);var paramsArray=[paramsJson,uiStateJson].filter((function(param){return Boolean(param)}));return"tsvb ".concat(paramsArray.join(" "))},table:function table(params,schemas){var visConfig=build_pipeline_objectSpread(build_pipeline_objectSpread({},params),buildVisConfig.table(schemas,params));return"kibana_table ".concat(prepareJson("visConfig",visConfig))},region_map:function region_map(params,schemas){var visConfig=build_pipeline_objectSpread(build_pipeline_objectSpread({},params),buildVisConfig.region_map(schemas));return"regionmap ".concat(prepareJson("visConfig",visConfig))},tile_map:function tile_map(params,schemas){var visConfig=build_pipeline_objectSpread(build_pipeline_objectSpread({},params),buildVisConfig.tile_map(schemas));return"tilemap ".concat(prepareJson("visConfig",visConfig))},pie:function pie(params,schemas){var visConfig=build_pipeline_objectSpread(build_pipeline_objectSpread({},params),buildVisConfig.pie(schemas));return"kibana_pie ".concat(prepareJson("visConfig",visConfig))}};var buildVisConfig={table:function table(schemas){var visParams=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var visConfig={};var metrics=schemas.metric;var buckets=schemas.bucket||[];visConfig.dimensions={metrics:metrics,buckets:buckets,splitRow:schemas.split_row,splitColumn:schemas.split_column};if(visParams.showMetricsAtAllLevels===false&&visParams.showPartialRows===true){var metricsPerBucket=metrics.length/buckets.length;visConfig.dimensions.metrics.splice(0,metricsPerBucket*buckets.length-metricsPerBucket)}return visConfig},region_map:function region_map(schemas){var visConfig={};visConfig.metric=schemas.metric[0];if(schemas.segment){visConfig.bucket=schemas.segment[0]}return visConfig},tile_map:function tile_map(schemas){var visConfig={};visConfig.dimensions={metric:schemas.metric[0],geohash:schemas.segment?schemas.segment[0]:null,geocentroid:schemas.geo_centroid?schemas.geo_centroid[0]:null};return visConfig},pie:function pie(schemas){var visConfig={};visConfig.dimensions={metric:schemas.metric[0],buckets:schemas.segment,splitRow:schemas.split_row,splitColumn:schemas.split_column};return visConfig}};var buildVislibDimensions=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee(vis,params){var schemas,dimensions,xAgg,_xAgg$buckets$getInte,esUnit,esValue,intervalParam,output;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:schemas=getSchemas(vis,{timeRange:params.timeRange,timefilter:params.timefilter});dimensions={x:schemas.segment?schemas.segment[0]:null,y:schemas.metric,z:schemas.radius,width:schemas.width,series:schemas.group,splitRow:schemas.split_row,splitColumn:schemas.split_column};if(!schemas.segment){_context.next=21;break}xAgg=vis.data.aggs.getResponseAggs()[dimensions.x.accessor];if(!(xAgg.type.name==="date_histogram")){_context.next=14;break}dimensions.x.params.date=true;_xAgg$buckets$getInte=xAgg.buckets.getInterval(),esUnit=_xAgg$buckets$getInte.esUnit,esValue=_xAgg$buckets$getInte.esValue;dimensions.x.params.interval=external_kbnSharedDeps_Moment_default.a.duration(esValue,esUnit);dimensions.x.params.intervalESValue=esValue;dimensions.x.params.intervalESUnit=esUnit;dimensions.x.params.format=xAgg.buckets.getScaledDateFormat();dimensions.x.params.bounds=xAgg.buckets.getBounds();_context.next=21;break;case 14:if(!(xAgg.type.name==="histogram")){_context.next=21;break}intervalParam=xAgg.type.paramByName("interval");output={params:{}};_context.next=19;return intervalParam.modifyAggConfigOnSearchRequestStart(xAgg,vis.data.searchSource,{abortSignal:params.abortSignal});case 19:intervalParam.write(xAgg,output);dimensions.x.params.interval=output.params.interval;case 21:build_pipeline_adjustVislibDimensionFormmaters(vis,dimensions);return _context.abrupt("return",dimensions);case 23:case"end":return _context.stop()}}}),_callee)})));return function buildVislibDimensions(_x,_x2){return _ref3.apply(this,arguments)}}();var buildPipeline=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(vis,params){var _vis$data,indexPattern,searchSource,query,filters,uiState,title,pipeline,visAst,_schemas,visConfig,_visConfig;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_vis$data=vis.data,indexPattern=_vis$data.indexPattern,searchSource=_vis$data.searchSource;query=searchSource.getField("query");filters=searchSource.getField("filter");uiState=vis.uiState,title=vis.title;pipeline="kibana | kibana_context ";if(query){pipeline+=prepareJson("query",query)}if(filters){pipeline+=prepareJson("filters",filters)}if(vis.data.savedSearchId){pipeline+=prepareString("savedSearchId",vis.data.savedSearchId)}pipeline+="| ";if(!vis.type.toExpressionAst){_context2.next=16;break}_context2.next=12;return vis.type.toExpressionAst(vis,params);case 12:visAst=_context2.sent;pipeline+=Object(expressions_public_["formatExpression"])(visAst);_context2.next=34;break;case 16:if(vis.type.requestHandler==="courier"){pipeline+="esaggs\n    ".concat(prepareString("index",indexPattern.id),"\n    metricsAtAllLevels=").concat(vis.isHierarchical(),"\n    partialRows=").concat(vis.params.showPartialRows||false,"\n    ").concat(prepareJson("aggConfigs",vis.data.aggs.aggs)," | ")}_schemas=getSchemas(vis,params);if(!buildPipelineVisFunction[vis.type.name]){_context2.next=22;break}pipeline+=buildPipelineVisFunction[vis.type.name](build_pipeline_objectSpread({title:title},vis.params),_schemas,uiState);_context2.next=34;break;case 22:if(!vislibCharts.includes(vis.type.name)){_context2.next=30;break}visConfig=build_pipeline_objectSpread({},vis.params);_context2.next=26;return buildVislibDimensions(vis,params);case 26:visConfig.dimensions=_context2.sent;pipeline+="vislib type='".concat(vis.type.name,"' ").concat(prepareJson("visConfig",visConfig));_context2.next=34;break;case 30:_visConfig=build_pipeline_objectSpread({},vis.params);_visConfig.dimensions=_schemas;pipeline+="visualization type='".concat(vis.type.name,"'\n    ").concat(prepareJson("visConfig",_visConfig),"\n    metricsAtAllLevels=").concat(vis.isHierarchical(),"\n    partialRows=").concat(vis.params.showPartialRows||false," ");if(indexPattern){pipeline+="".concat(prepareString("index",indexPattern.id)," ");if(vis.data.aggs){pipeline+="".concat(prepareJson("aggConfigs",vis.data.aggs.aggs))}}case 34:return _context2.abrupt("return",pipeline);case 35:case"end":return _context2.stop()}}}),_callee2)})));return function buildPipeline(_x3,_x4){return _ref4.apply(this,arguments)}}();var uiActions_public_=__webpack_require__(21);var VIS_EVENT_TO_TRIGGER={applyFilter:uiActions_public_["APPLY_FILTER_TRIGGER"],brush:uiActions_public_["SELECT_RANGE_TRIGGER"],filter:uiActions_public_["VALUE_CLICK_TRIGGER"]};function visualize_embeddable_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function visualize_embeddable_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){visualize_embeddable_ownKeys(Object(source),true).forEach((function(key){visualize_embeddable_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{visualize_embeddable_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function visualize_embeddable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualize_embeddable_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualize_embeddable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualize_embeddable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function visualize_embeddable_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function visualize_embeddable_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function visualize_embeddable_createClass(Constructor,protoProps,staticProps){if(protoProps)visualize_embeddable_defineProperties(Constructor.prototype,protoProps);if(staticProps)visualize_embeddable_defineProperties(Constructor,staticProps);return Constructor}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=visualize_embeddable_getPrototypeOf(object);if(object===null)break}return object}function visualize_embeddable_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)visualize_embeddable_setPrototypeOf(subClass,superClass)}function visualize_embeddable_setPrototypeOf(o,p){visualize_embeddable_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return visualize_embeddable_setPrototypeOf(o,p)}function visualize_embeddable_createSuper(Derived){var hasNativeReflectConstruct=visualize_embeddable_isNativeReflectConstruct();return function _createSuperInternal(){var Super=visualize_embeddable_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=visualize_embeddable_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return visualize_embeddable_possibleConstructorReturn(this,result)}}function visualize_embeddable_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return visualize_embeddable_assertThisInitialized(self)}function visualize_embeddable_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function visualize_embeddable_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function visualize_embeddable_getPrototypeOf(o){visualize_embeddable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return visualize_embeddable_getPrototypeOf(o)}function visualize_embeddable_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getKeys=function getKeys(o){return Object.keys(o)};var visualize_embeddable_VisualizeEmbeddable=function(_Embeddable){visualize_embeddable_inherits(VisualizeEmbeddable,_Embeddable);var _super=visualize_embeddable_createSuper(VisualizeEmbeddable);function VisualizeEmbeddable(timefilter,_ref,initialInput,attributeService,savedVisualizationsLoader,parent){var _this;var vis=_ref.vis,editPath=_ref.editPath,editUrl=_ref.editUrl,indexPatterns=_ref.indexPatterns,editable=_ref.editable,deps=_ref.deps;visualize_embeddable_classCallCheck(this,VisualizeEmbeddable);_this=_super.call(this,initialInput,{defaultTitle:vis.title,editPath:editPath,editApp:"visualize",editUrl:editUrl,indexPatterns:indexPatterns,editable:editable,visTypeName:vis.type.name},parent);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"handler",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"timefilter",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"timeRange",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"query",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"filters",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"visCustomizations",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"subscriptions",[]);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"expression","");visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"vis",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"domNode",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"type",VISUALIZE_EMBEDDABLE_TYPE);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"autoRefreshFetchSubscription",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"abortController",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"deps",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"inspectorAdapters",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"attributeService",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"savedVisualizationsLoader",void 0);visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"getInspectorAdapters",(function(){if(!_this.handler||_this.inspectorAdapters&&!Object.keys(_this.inspectorAdapters).length){return undefined}return _this.handler.inspect()}));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"openInspector",(function(){if(!_this.handler)return;var adapters=_this.handler.inspect();if(!adapters)return;return _this.deps.start().plugins.inspector.open(adapters,{title:_this.getTitle()})}));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"hasInspector",(function(){return Boolean(_this.getInspectorAdapters())}));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"onContainerLoading",(function(){_this.renderComplete.dispatchInProgress();_this.updateOutput({loading:true,error:undefined})}));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"onContainerRender",(function(){_this.renderComplete.dispatchComplete();_this.updateOutput({loading:false,error:undefined})}));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"onContainerError",(function(error){if(_this.abortController){_this.abortController.abort()}_this.renderComplete.dispatchError();_this.updateOutput({loading:false,error:error})}));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"reload",(function(){_this.handleVisUpdate()}));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"handleVisUpdate",visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.updateHandler();case 1:case"end":return _context.stop()}}}),_callee)}))));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"uiStateChangeHandler",(function(){_this.updateInput(visualize_embeddable_objectSpread({},_this.vis.uiState.toJSON()))}));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"inputIsRefType",(function(input){if(!_this.attributeService){throw new Error("AttributeService must be defined for getInputAsRefType")}return _this.attributeService.inputIsRefType(input)}));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"getInputAsValueType",visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var input;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:input={savedVis:_this.vis.serialize()};if(_this.getTitle()){input.savedVis.title=_this.getTitle()}delete input.savedVis.id;return _context2.abrupt("return",new Promise((function(resolve){resolve(visualize_embeddable_objectSpread({},input))})));case 4:case"end":return _context2.stop()}}}),_callee2)}))));visualize_embeddable_defineProperty(visualize_embeddable_assertThisInitialized(_this),"getInputAsRefType",visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var _this$savedVisualizat;var savedVis,saveModalTitle,attributes;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return(_this$savedVisualizat=_this.savedVisualizationsLoader)===null||_this$savedVisualizat===void 0?void 0:_this$savedVisualizat.get({});case 2:savedVis=_context3.sent;if(savedVis){_context3.next=5;break}throw new Error("Error creating a saved vis object");case 5:if(_this.attributeService){_context3.next=7;break}throw new Error("AttributeService must be defined for getInputAsRefType");case 7:saveModalTitle=_this.getTitle()?_this.getTitle():external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.embeddable.placeholderTitle",{defaultMessage:"Placeholder Title"});attributes={savedVis:savedVis,vis:_this.vis,title:_this.vis.title};return _context3.abrupt("return",_this.attributeService.getInputAsRefType({id:_this.id,attributes:attributes},{showSaveModal:true,saveModalTitle:saveModalTitle}));case 10:case"end":return _context3.stop()}}}),_callee3)}))));_this.deps=deps;_this.timefilter=timefilter;_this.vis=vis;_this.vis.uiState.on("change",_this.uiStateChangeHandler);_this.vis.uiState.on("reload",_this.reload);_this.attributeService=attributeService;_this.savedVisualizationsLoader=savedVisualizationsLoader;_this.autoRefreshFetchSubscription=timefilter.getAutoRefreshFetch$().subscribe(_this.updateHandler.bind(visualize_embeddable_assertThisInitialized(_this)));_this.subscriptions.push(external_kbnSharedDeps_Rxjs_["merge"](_this.getOutput$(),_this.getInput$()).subscribe((function(){_this.handleChanges()})));var inspectorAdapters=_this.vis.type.inspectorAdapters;if(inspectorAdapters){_this.inspectorAdapters=typeof inspectorAdapters==="function"?inspectorAdapters():inspectorAdapters}return _this}visualize_embeddable_createClass(VisualizeEmbeddable,[{key:"getDescription",value:function getDescription(){return this.vis.description}},{key:"transferCustomizationsToUiState",value:function transferCustomizationsToUiState(){var _this2=this;var visCustomizations={vis:this.input.vis,table:this.input.table};if(visCustomizations.vis||visCustomizations.table){if(!external_kbnSharedDeps_Lodash_default.a.isEqual(visCustomizations,this.visCustomizations)){this.visCustomizations=visCustomizations;this.vis.uiState.off("change",this.uiStateChangeHandler);this.vis.uiState.clearAllKeys();if(visCustomizations.vis){this.vis.uiState.set("vis",visCustomizations.vis);getKeys(visCustomizations).forEach((function(key){_this2.vis.uiState.set(key,visCustomizations[key])}))}if(visCustomizations.table){this.vis.uiState.set("table",visCustomizations.table)}this.vis.uiState.on("change",this.uiStateChangeHandler)}}else if(this.parent){this.vis.uiState.clearAllKeys()}}},{key:"handleChanges",value:function(){var _handleChanges=visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var dirty;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.transferCustomizationsToUiState();dirty=false;if(!external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.timeRange,this.timeRange)){this.timeRange=external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.input.timeRange);dirty=true}if(!data_public_["esFilters"].onlyDisabledFiltersChanged(this.input.filters,this.filters)){this.filters=this.input.filters;dirty=true}if(!external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.query,this.query)){this.query=this.input.query;dirty=true}if(this.vis.description&&this.domNode){this.domNode.setAttribute("data-description",this.vis.description)}if(this.handler&&dirty){this.updateHandler()}case 7:case"end":return _context4.stop()}}}),_callee4,this)})));function handleChanges(){return _handleChanges.apply(this,arguments)}return handleChanges}()},{key:"render",value:function(){var _render=visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee6(domNode){var _this3=this;var div,expressions;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:this.timeRange=external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.input.timeRange);this.transferCustomizationsToUiState();div=document.createElement("div");div.className="visualize panel-content panel-content--fullWidth";domNode.appendChild(div);this.domNode=div;_get(visualize_embeddable_getPrototypeOf(VisualizeEmbeddable.prototype),"render",this).call(this,this.domNode);expressions=getExpressions();this.handler=new expressions.ExpressionLoader(this.domNode,undefined,{onRenderError:function onRenderError(element,error){_this3.onContainerError(error)}});this.subscriptions.push(this.handler.events$.subscribe(function(){var _ref5=visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee5(event){var agg,triggerId,context,_this3$vis$data$index,_this3$vis$data$index2;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(event.name==="bounds")){_context5.next=4;break}agg=_this3.vis.data.aggs.aggs.find((function(a){return Object(external_kbnSharedDeps_Lodash_["get"])(a,"type.dslName")==="geohash_grid"}));if(agg&&agg.params.precision!==event.data.precision||agg&&!external_kbnSharedDeps_Lodash_default.a.isEqual(agg.params.boundingBox,event.data.boundingBox)){agg.params.boundingBox=event.data.boundingBox;agg.params.precision=event.data.precision;_this3.reload()}return _context5.abrupt("return");case 4:if(!_this3.input.disableTriggers){triggerId=Object(external_kbnSharedDeps_Lodash_["get"])(VIS_EVENT_TO_TRIGGER,event.name,VIS_EVENT_TO_TRIGGER.filter);if(triggerId===VIS_EVENT_TO_TRIGGER.applyFilter){context=visualize_embeddable_objectSpread({embeddable:_this3,timeFieldName:(_this3$vis$data$index=_this3.vis.data.indexPattern)===null||_this3$vis$data$index===void 0?void 0:_this3$vis$data$index.timeFieldName},event.data)}else{context={embeddable:_this3,data:visualize_embeddable_objectSpread({timeFieldName:(_this3$vis$data$index2=_this3.vis.data.indexPattern)===null||_this3$vis$data$index2===void 0?void 0:_this3$vis$data$index2.timeFieldName},event.data)}}getUiActions().getTrigger(triggerId).exec(context)}case 5:case"end":return _context5.stop()}}}),_callee5)})));return function(_x2){return _ref5.apply(this,arguments)}}()));if(this.vis.description){div.setAttribute("data-description",this.vis.description)}div.setAttribute("data-test-subj","visualizationLoader");div.setAttribute("data-shared-item","");this.subscriptions.push(this.handler.loading$.subscribe(this.onContainerLoading));this.subscriptions.push(this.handler.render$.subscribe(this.onContainerRender));this.updateHandler();case 16:case"end":return _context6.stop()}}}),_callee6,this)})));function render(_x){return _render.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){_get(visualize_embeddable_getPrototypeOf(VisualizeEmbeddable.prototype),"destroy",this).call(this);this.subscriptions.forEach((function(s){return s.unsubscribe()}));this.vis.uiState.off("change",this.uiStateChangeHandler);this.vis.uiState.off("reload",this.reload);if(this.handler){this.handler.destroy();this.handler.getElement().remove()}this.autoRefreshFetchSubscription.unsubscribe()}},{key:"updateHandler",value:function(){var _updateHandler=visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var expressionParams,abortController;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:expressionParams={searchContext:{timeRange:this.timeRange,query:this.input.query,filters:this.input.filters},uiState:this.vis.uiState,inspectorAdapters:this.inspectorAdapters};if(this.abortController){this.abortController.abort()}this.abortController=new AbortController;abortController=this.abortController;_context7.next=6;return buildPipeline(this.vis,{timefilter:this.timefilter,timeRange:this.timeRange,abortSignal:this.abortController.signal});case 6:this.expression=_context7.sent;if(this.handler&&!abortController.signal.aborted){this.handler.update(this.expression,expressionParams)}case 8:case"end":return _context7.stop()}}}),_callee7,this)})));function updateHandler(){return _updateHandler.apply(this,arguments)}return updateHandler}()},{key:"supportedTriggers",value:function supportedTriggers(){var _this$vis$type$getSup,_this$vis$type$getSup2,_this$vis$type;return(_this$vis$type$getSup=(_this$vis$type$getSup2=(_this$vis$type=this.vis.type).getSupportedTriggers)===null||_this$vis$type$getSup2===void 0?void 0:_this$vis$type$getSup2.call(_this$vis$type))!==null&&_this$vis$type$getSup!==void 0?_this$vis$type$getSup:[]}}]);return VisualizeEmbeddable}(embeddable_public_["Embeddable"]);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(11);var events=__webpack_require__(18);var elastic_safer_lodash_set=__webpack_require__(9);function persisted_state_toConsumableArray(arr){return persisted_state_arrayWithoutHoles(arr)||persisted_state_iterableToArray(arr)||persisted_state_unsupportedIterableToArray(arr)||persisted_state_nonIterableSpread()}function persisted_state_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function persisted_state_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return persisted_state_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return persisted_state_arrayLikeToArray(o,minLen)}function persisted_state_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function persisted_state_arrayWithoutHoles(arr){if(Array.isArray(arr))return persisted_state_arrayLikeToArray(arr)}function persisted_state_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function persisted_state_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function persisted_state_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function persisted_state_createClass(Constructor,protoProps,staticProps){if(protoProps)persisted_state_defineProperties(Constructor.prototype,protoProps);if(staticProps)persisted_state_defineProperties(Constructor,staticProps);return Constructor}function persisted_state_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)persisted_state_setPrototypeOf(subClass,superClass)}function persisted_state_setPrototypeOf(o,p){persisted_state_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return persisted_state_setPrototypeOf(o,p)}function persisted_state_createSuper(Derived){var hasNativeReflectConstruct=persisted_state_isNativeReflectConstruct();return function _createSuperInternal(){var Super=persisted_state_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=persisted_state_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return persisted_state_possibleConstructorReturn(this,result)}}function persisted_state_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return persisted_state_assertThisInitialized(self)}function persisted_state_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function persisted_state_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function persisted_state_getPrototypeOf(o){persisted_state_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return persisted_state_getPrototypeOf(o)}function persisted_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function prepSetParams(key,value,path){if(value===undefined&&(Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(key)||path.length>0)){value=key;key=undefined}return{value:Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(value),key:key}}var persisted_state_PersistedState=function(_EventEmitter){persisted_state_inherits(PersistedState,_EventEmitter);var _super=persisted_state_createSuper(PersistedState);function PersistedState(value,path){var _this;persisted_state_classCallCheck(this,PersistedState);_this=_super.call(this);persisted_state_defineProperty(persisted_state_assertThisInitialized(_this),"_path",void 0);persisted_state_defineProperty(persisted_state_assertThisInitialized(_this),"_initialized",void 0);persisted_state_defineProperty(persisted_state_assertThisInitialized(_this),"_changedState",void 0);persisted_state_defineProperty(persisted_state_assertThisInitialized(_this),"_defaultState",void 0);persisted_state_defineProperty(persisted_state_assertThisInitialized(_this),"_mergedState",void 0);_this._path=_this.setPath(path);if(!_this._path.length&&value&&!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(value)){throw new Error("State value must be a plain object")}value=value||_this.getDefault();_this.set(value);_this._initialized=true;return _this}persisted_state_createClass(PersistedState,[{key:"get",value:function get(key,defaultValue){if(!this.hasPath()&&key===undefined){return this._mergedState}return Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(Object(external_kbnSharedDeps_Lodash_["get"])(this._mergedState,this.getIndex(key||""),defaultValue))}},{key:"set",value:function set(key,value){var params=prepSetParams(key,value,this._path);var val=this.setValue(params.key,params.value);this.emit("set");return val}},{key:"setSilent",value:function setSilent(key,value){var params=prepSetParams(key,value,this._path);if(params.key||params.value){return this.setValue(params.key,params.value,true)}}},{key:"clearAllKeys",value:function clearAllKeys(){var _this2=this;Object.getOwnPropertyNames(this._changedState).forEach((function(key){_this2.set(key,null)}))}},{key:"reset",value:function reset(path){var keyPath=this.getIndex(path);var origValue=Object(external_kbnSharedDeps_Lodash_["get"])(this._defaultState,keyPath);var currentValue=Object(external_kbnSharedDeps_Lodash_["get"])(this._mergedState,keyPath);if(origValue===undefined){this.cleanPath(path,this._mergedState)}else{Object(elastic_safer_lodash_set["set"])(this._mergedState,keyPath,origValue)}this.cleanPath(path,this._changedState);if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(currentValue,origValue))this.emit("change")}},{key:"getChanges",value:function getChanges(){return Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(this._changedState)}},{key:"toJSON",value:function toJSON(){return this.get()}},{key:"toString",value:function toString(){return JSON.stringify(this.toJSON())}},{key:"fromString",value:function fromString(input){return this.set(JSON.parse(input))}},{key:"getIndex",value:function getIndex(key){if(key===undefined)return this._path;return[].concat(persisted_state_toConsumableArray(this._path||[]),persisted_state_toConsumableArray(Object(external_kbnSharedDeps_Lodash_["toPath"])(key)))}},{key:"getPartialIndex",value:function getPartialIndex(key){var keyPath=this.getIndex(key);return keyPath.slice(this._path.length)}},{key:"cleanPath",value:function cleanPath(path,stateTree){var partialPath=this.getPartialIndex(path);var remove=true;if(Array.isArray(partialPath)){while(partialPath.length>0){var lastKey=partialPath.splice(partialPath.length-1,1)[0];var statePath=[].concat(persisted_state_toConsumableArray(this._path),[partialPath]);var stateVal=statePath.length>0?Object(external_kbnSharedDeps_Lodash_["get"])(stateTree,statePath):stateTree;if(!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(stateVal))return;if(remove)delete stateVal[lastKey];if(Object.keys(stateVal).length>0)remove=false}}}},{key:"getDefault",value:function getDefault(){return this.hasPath()?undefined:{}}},{key:"setPath",value:function setPath(path){if(Array.isArray(path)){return path}if(Object(external_kbnSharedDeps_Lodash_["isString"])(path)){return persisted_state_toConsumableArray(this.getIndex(path))}return[]}},{key:"hasPath",value:function hasPath(){return this._path.length>0}},{key:"setValue",value:function setValue(key,value){var silent=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var self=this;var stateChanged=false;var initialState=!this._initialized;var keyPath=this.getIndex(key);var hasKeyPath=keyPath.length>0;if(initialState){this._changedState={};if(!this.hasPath()&&key===undefined)this._defaultState=value;else this._defaultState=Object(elastic_safer_lodash_set["set"])({},keyPath,value)}if(!initialState){if(!this.hasPath()&&key===undefined){stateChanged=!Object(external_kbnSharedDeps_Lodash_["isEqual"])(this._changedState,value);this._changedState=value;this._mergedState=Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(value)}else{var curVal=hasKeyPath?this.get(keyPath):this._mergedState;stateChanged=!Object(external_kbnSharedDeps_Lodash_["isEqual"])(curVal,value);if(Array.isArray(Object(external_kbnSharedDeps_Lodash_["get"])(this._mergedState,keyPath))){if(hasKeyPath){Object(elastic_safer_lodash_set["set"])(this._mergedState,keyPath,undefined)}else{this._mergedState=undefined}}if(hasKeyPath){Object(elastic_safer_lodash_set["set"])(this._changedState,keyPath,value)}else{this._changedState=Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(value)?value:{}}}}var targetObj=this._mergedState||Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(this._defaultState);var sourceObj=Object(external_kbnSharedDeps_Lodash_["merge"])({},this._changedState);var mergeMethod=function mergeMethod(targetValue,sourceValue,mergeKey){if(!initialState&&Object(external_kbnSharedDeps_Lodash_["isEqual"])(keyPath,self.getIndex(mergeKey))){return sourceValue===undefined?targetValue:sourceValue}};this._mergedState=Object(external_kbnSharedDeps_Lodash_["mergeWith"])(targetObj,sourceObj,mergeMethod);if(Object(external_kbnSharedDeps_Lodash_["isEqual"])(this._mergedState,this._defaultState))this._changedState={};if(!silent&&stateChanged)this.emit("change",key);return this}}]);return PersistedState}(events["EventEmitter"]);function vis_toConsumableArray(arr){return vis_arrayWithoutHoles(arr)||vis_iterableToArray(arr)||vis_unsupportedIterableToArray(arr)||vis_nonIterableSpread()}function vis_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vis_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return vis_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vis_arrayLikeToArray(o,minLen)}function vis_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function vis_arrayWithoutHoles(arr){if(Array.isArray(arr))return vis_arrayLikeToArray(arr)}function vis_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function vis_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function vis_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){vis_ownKeys(Object(source),true).forEach((function(key){vis_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{vis_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function vis_objectWithoutProperties(source,excluded){if(source==null)return{};var target=vis_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function vis_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function vis_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function vis_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function vis_createClass(Constructor,protoProps,staticProps){if(protoProps)vis_defineProperties(Constructor.prototype,protoProps);if(staticProps)vis_defineProperties(Constructor,staticProps);return Constructor}function vis_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function vis_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var getSearchSource=function(){var _ref=vis_asyncToGenerator(regeneratorRuntime.mark((function _callee(inputSearchSource,savedSearchId){var searchSource,savedSearch;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchSource=inputSearchSource.createCopy();if(!savedSearchId){_context.next=6;break}_context.next=4;return getSavedSearchLoader().get(savedSearchId);case 4:savedSearch=_context.sent;searchSource.setParent(savedSearch.searchSource);case 6:searchSource.setField("size",0);return _context.abrupt("return",searchSource);case 8:case"end":return _context.stop()}}}),_callee)})));return function getSearchSource(_x,_x2){return _ref.apply(this,arguments)}}();var vis_Vis=function(){function Vis(visType){var visState=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};vis_classCallCheck(this,Vis);vis_defineProperty(this,"type",void 0);vis_defineProperty(this,"id",void 0);vis_defineProperty(this,"title","");vis_defineProperty(this,"description","");vis_defineProperty(this,"params",void 0);vis_defineProperty(this,"sessionState",{});vis_defineProperty(this,"data",{});vis_defineProperty(this,"uiState",void 0);this.type=this.getType(visType);this.params=this.getParams(visState.params);this.uiState=new persisted_state_PersistedState(visState.uiState);this.id=visState.id}vis_createClass(Vis,[{key:"getType",value:function getType(visType){var type=getTypes().get(visType);if(!type){var errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.visualizationTypeInvalidMessage",{defaultMessage:'Invalid visualization type "{visType}"',values:{visType:visType}});throw new Error(errorMessage)}return type}},{key:"getParams",value:function getParams(params){var _this$type$visConfig$,_this$type$visConfig;return Object(external_kbnSharedDeps_Lodash_["defaults"])({},Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(params!==null&&params!==void 0?params:{}),Object(external_kbnSharedDeps_Lodash_["cloneDeep"])((_this$type$visConfig$=(_this$type$visConfig=this.type.visConfig)===null||_this$type$visConfig===void 0?void 0:_this$type$visConfig.defaults)!==null&&_this$type$visConfig$!==void 0?_this$type$visConfig$:{}))}},{key:"setState",value:function(){var _setState=vis_asyncToGenerator(regeneratorRuntime.mark((function _callee2(state){var typeChanged,aggs,configStates,errorMessage;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:typeChanged=false;if(state.type&&this.type.name!==state.type){this.type=this.getType(state.type);typeChanged=true}if(state.title!==undefined){this.title=state.title}if(state.description!==undefined){this.description=state.description}if(state.params||typeChanged){this.params=this.getParams(state.params)}if(!(state.data&&state.data.searchSource)){_context2.next=10;break}_context2.next=8;return getSearch().searchSource.create(state.data.searchSource);case 8:this.data.searchSource=_context2.sent;this.data.indexPattern=this.data.searchSource.getField("index");case 10:if(!(state.data&&state.data.savedSearchId)){_context2.next=17;break}this.data.savedSearchId=state.data.savedSearchId;if(!this.data.searchSource){_context2.next=17;break}_context2.next=15;return getSearchSource(this.data.searchSource,this.data.savedSearchId);case 15:this.data.searchSource=_context2.sent;this.data.indexPattern=this.data.searchSource.getField("index");case 17:if(!(state.data&&(state.data.aggs||!this.data.aggs))){_context2.next=26;break}aggs=state.data.aggs?Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(state.data.aggs):[];configStates=this.initializeDefaultsFromSchemas(aggs,this.type.schemas.all||[]);if(this.data.indexPattern){_context2.next=25;break}if(!aggs.length){_context2.next=24;break}errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.initializeWithoutIndexPatternErrorMessage",{defaultMessage:"Trying to initialize aggs without index pattern"});throw new Error(errorMessage);case 24:return _context2.abrupt("return");case 25:this.data.aggs=getAggs().createAggConfigs(this.data.indexPattern,configStates);case 26:case"end":return _context2.stop()}}}),_callee2,this)})));function setState(_x3){return _setState.apply(this,arguments)}return setState}()},{key:"clone",value:function clone(){var _this$serialize=this.serialize(),data=_this$serialize.data,restOfSerialized=vis_objectWithoutProperties(_this$serialize,["data"]);var vis=new Vis(this.type.name,restOfSerialized);vis.setState(vis_objectSpread(vis_objectSpread({},restOfSerialized),{},{data:{}}));var aggs=this.data.indexPattern?getAggs().createAggConfigs(this.data.indexPattern,data.aggs):undefined;vis.data=vis_objectSpread(vis_objectSpread({},this.data),{},{aggs:aggs});return vis}},{key:"serialize",value:function serialize(){var aggs=this.data.aggs?this.data.aggs.aggs.map((function(agg){return agg.toJSON()})):[];return{id:this.id,title:this.title,description:this.description,type:this.type.name,params:Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(this.params),uiState:this.uiState.toJSON(),data:{aggs:aggs,searchSource:this.data.searchSource?this.data.searchSource.getSerializedFields():{},savedSearchId:this.data.savedSearchId}}}},{key:"isHierarchical",value:function isHierarchical(){if(Object(external_kbnSharedDeps_Lodash_["isFunction"])(this.type.hierarchicalData)){return!!this.type.hierarchicalData(this)}else{return!!this.type.hierarchicalData}}},{key:"initializeDefaultsFromSchemas",value:function initializeDefaultsFromSchemas(configStates,schemas){var newConfigs=vis_toConsumableArray(configStates);schemas.filter((function(schema){return Array.isArray(schema.defaults)&&schema.defaults.length>0})).filter((function(schema){return!configStates.find((function(agg){return agg.schema&&agg.schema===schema.name}))})).forEach((function(schema){var defaultSchemaConfig=schema.defaults.slice(0,schema.max);defaultSchemaConfig.forEach((function(d){return newConfigs.push(d)}))}));return newConfigs}}]);return Vis}();var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);function util_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function util_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)util_setPrototypeOf(subClass,superClass)}function util_createSuper(Derived){var hasNativeReflectConstruct=util_isNativeReflectConstruct();return function _createSuperInternal(){var Super=util_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=util_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return util_possibleConstructorReturn(this,result)}}function util_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return util_assertThisInitialized(self)}function util_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,util_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return util_setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function _construct(Parent,args,Class){if(util_isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)util_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function util_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function util_setPrototypeOf(o,p){util_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return util_setPrototypeOf(o,p)}function util_getPrototypeOf(o){util_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return util_getPrototypeOf(o)}function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}var UnreachableCaseError=function(_Error){util_inherits(UnreachableCaseError,_Error);var _super=util_createSuper(UnreachableCaseError);function UnreachableCaseError(val){util_classCallCheck(this,UnreachableCaseError);return _super.call(this,"Unreachable case: ".concat(val))}return UnreachableCaseError}(_wrapNativeSuper(Error));function createUiStatsMetric(_ref){var type=_ref.type,appName=_ref.appName,eventName=_ref.eventName,_ref$count=_ref.count,count=_ref$count===void 0?1:_ref$count;return{type:type,appName:appName,eventName:eventName,count:count}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(19);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function application_usage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function application_usage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function application_usage_createClass(Constructor,protoProps,staticProps){if(protoProps)application_usage_defineProperties(Constructor.prototype,protoProps);if(staticProps)application_usage_defineProperties(Constructor,staticProps);return Constructor}function application_usage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var application_usage_ApplicationUsage=function(){function ApplicationUsage(){application_usage_classCallCheck(this,ApplicationUsage);application_usage_defineProperty(this,"currentUsage",void 0)}application_usage_createClass(ApplicationUsage,[{key:"start",value:function start(){var _this=this;if(window)window.addEventListener("click",(function(){return _this.currentUsage&&_this.currentUsage.numberOfClicks++}))}},{key:"appChanged",value:function appChanged(appId){var currentUsage=this.currentUsage;if(appId){this.currentUsage={type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}else{this.currentUsage=void 0}return currentUsage}}]);return ApplicationUsage}();var stats=__webpack_require__(33);function trackUsageAgent(appName){var userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}var METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function storage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function storage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function storage_createClass(Constructor,protoProps,staticProps){if(protoProps)storage_defineProperties(Constructor.prototype,protoProps);if(staticProps)storage_defineProperties(Constructor,staticProps);return Constructor}function storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReportStorageManager=function(){function ReportStorageManager(storageKey,storage){storage_classCallCheck(this,ReportStorageManager);storage_defineProperty(this,"storageKey",void 0);storage_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}storage_createClass(ReportStorageManager,[{key:"get",value:function get(){if(!this.storage)return;return this.storage.get(this.storageKey)}},{key:"store",value:function store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}]);return ReportStorageManager}();function report_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function report_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function report_createClass(Constructor,protoProps,staticProps){if(protoProps)report_defineProperties(Constructor.prototype,protoProps);if(staticProps)report_defineProperties(Constructor,staticProps);return Constructor}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REPORT_VERSION=1;var report_ReportManager=function(){function ReportManager(report){report_classCallCheck(this,ReportManager);report_defineProperty(this,"report",void 0);this.report=report||ReportManager.createReport()}report_createClass(ReportManager,[{key:"clearReport",value:function clearReport(){this.report=ReportManager.createReport()}},{key:"isReportEmpty",value:function isReportEmpty(){var _this$report=this.report,uiStatsMetrics=_this$report.uiStatsMetrics,userAgent=_this$report.userAgent,appUsage=_this$report.application_usage;var noUiStats=!uiStatsMetrics||Object.keys(uiStatsMetrics).length===0;var noUserAgent=!userAgent||Object.keys(userAgent).length===0;var noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiStats&&noUserAgent&&noAppUsage}},{key:"incrementStats",value:function incrementStats(count,stats){var _ref=stats||{},_ref$min=_ref.min,min=_ref$min===void 0?0:_ref$min,_ref$max=_ref.max,max=_ref$max===void 0?0:_ref$max,_ref$sum=_ref.sum,sum=_ref$sum===void 0?0:_ref$sum;var newMin=Math.min(min,count);var newMax=Math.max(max,count);var newAvg=newMin+newMax/2;var newSum=sum+count;return{min:newMin,max:newMax,avg:newAvg,sum:newSum}}},{key:"assignReports",value:function assignReports(newMetrics){var _this=this;wrapArray(newMetrics).forEach((function(newMetric){return _this.assignReport(_this.report,newMetric)}));return{report:this.report}}},{key:"assignReport",value:function assignReport(report,metric){var key=ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{var appName=metric.appName,type=metric.type,userAgent=metric.userAgent;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _appName=metric.appName,_type=metric.type,eventName=metric.eventName,count=metric.count;report.uiStatsMetrics=report.uiStatsMetrics||{};var existingStats=(report.uiStatsMetrics[key]||{}).stats;report.uiStatsMetrics[key]={key:key,appName:_appName,eventName:eventName,type:_type,stats:this.incrementStats(count,existingStats)};return}case METRIC_TYPE.APPLICATION_USAGE:var numberOfClicks=metric.numberOfClicks,startTime=metric.startTime;var minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};var appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0};report.application_usage[key]={minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};break;default:throw new UnreachableCaseError(metric)}}}],[{key:"createReport",value:function createReport(){return{reportVersion:REPORT_VERSION}}},{key:"createMetricKey",value:function createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{var appName=metric.appName,type=metric.type;return"".concat(appName,"-").concat(type)}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _appName2=metric.appName,eventName=metric.eventName,_type2=metric.type;return"".concat(_appName2,"-").concat(_type2,"-").concat(eventName)}case METRIC_TYPE.APPLICATION_USAGE:return metric.appId;default:throw new UnreachableCaseError(metric)}}}]);return ReportManager}();report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function reporter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function reporter_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){reporter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){reporter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function reporter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function reporter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function reporter_createClass(Constructor,protoProps,staticProps){if(protoProps)reporter_defineProperties(Constructor.prototype,protoProps);if(staticProps)reporter_defineProperties(Constructor,staticProps);return Constructor}function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var reporter_Reporter=function(){function Reporter(config){var _this=this;reporter_classCallCheck(this,Reporter);reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"lastAppId",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"applicationUsage",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"started",false);reporter_defineProperty(this,"start",(function(){if(!_this.interval){_this.interval=setTimeout((function(){_this.interval=undefined;_this.sendReports()}),_this.checkInterval)}if(_this.started){return}if(window&&document){window.addEventListener("beforeunload",(function(){return _this.reportApplicationUsage()}));document.addEventListener("visibilitychange",(function(){if(document.visibilityState==="visible"&&_this.lastAppId){_this.reportApplicationUsage(_this.lastAppId)}else if(document.visibilityState==="hidden"){_this.reportApplicationUsage();_this.sendReports()}}))}_this.started=true;_this.applicationUsage.start()}));reporter_defineProperty(this,"reportUiStats",(function(appName,type,eventNames,count){var metrics=wrapArray(eventNames).map((function(eventName){_this.log("".concat(type," Metric -> (").concat(appName,":").concat(eventName,"):"));var report=createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count});_this.log(report);return report}));_this.saveToReport(metrics)}));reporter_defineProperty(this,"reportUserAgent",(function(appName){_this.log("Reporting user-agent.");var report=trackUsageAgent(appName);_this.saveToReport([report])}));reporter_defineProperty(this,"sendReports",reporter_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var versionMismatch;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.reportManager.isReportEmpty()){_context.next=13;break}_context.prev=1;_context.next=4;return _this.http(_this.reportManager.report);case 4:_this.flushReport();_context.next=13;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);_this.log("Error Sending Metrics Report ".concat(_context.t0));_this.retryCount=_this.retryCount+1;versionMismatch=_this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||_this.retryCount>_this.maxRetries){_this.flushReport()}case 13:_this.start();case 14:case"end":return _context.stop()}}}),_callee,null,[[1,7]])}))));var http=config.http,storage=config.storage,debug=config.debug,_config$checkInterval=config.checkInterval,checkInterval=_config$checkInterval===void 0?9e4:_config$checkInterval,_config$storageKey=config.storageKey,storageKey=_config$storageKey===void 0?"analytics":_config$storageKey;this.http=http;this.checkInterval=checkInterval;this.applicationUsage=new application_usage_ApplicationUsage;this.storageManager=new ReportStorageManager(storageKey,storage);var storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}reporter_createClass(Reporter,[{key:"saveToReport",value:function saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}},{key:"flushReport",value:function flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}},{key:"log",value:function log(message){if(this.debug){console.debug(message)}}},{key:"reportApplicationUsage",value:function reportApplicationUsage(appId){this.log("Reporting application changed to ".concat(appId));this.lastAppId=appId||this.lastAppId;var appChangedReport=this.applicationUsage.appChanged(appId);if(appChangedReport)this.saveToReport([appChangedReport])}}]);return Reporter}();var savedObjects_public_=__webpack_require__(8);function search_selection_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function search_selection_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function search_selection_createClass(Constructor,protoProps,staticProps){if(protoProps)search_selection_defineProperties(Constructor.prototype,protoProps);if(staticProps)search_selection_defineProperties(Constructor,staticProps);return Constructor}function search_selection_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)search_selection_setPrototypeOf(subClass,superClass)}function search_selection_setPrototypeOf(o,p){search_selection_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return search_selection_setPrototypeOf(o,p)}function search_selection_createSuper(Derived){var hasNativeReflectConstruct=search_selection_isNativeReflectConstruct();return function _createSuperInternal(){var Super=search_selection_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=search_selection_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return search_selection_possibleConstructorReturn(this,result)}}function search_selection_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return search_selection_assertThisInitialized(self)}function search_selection_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function search_selection_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function search_selection_getPrototypeOf(o){search_selection_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return search_selection_getPrototypeOf(o)}function search_selection_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var search_selection_SearchSelection=function(_React$Component){search_selection_inherits(SearchSelection,_React$Component);var _super=search_selection_createSuper(SearchSelection);function SearchSelection(){var _this;search_selection_classCallCheck(this,SearchSelection);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));search_selection_defineProperty(search_selection_assertThisInitialized(_this),"fixedPageSize",8);return _this}search_selection_createClass(SearchSelection,[{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.newVisWizard.newVisTypeTitle",defaultMessage:"New {visTypeName}",values:{visTypeName:this.props.visType.title}})," ","/"," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.newVisWizard.chooseSourceTitle",defaultMessage:"Choose a source"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(savedObjects_public_["SavedObjectFinderUi"],{key:"searchSavedObjectFinder",onChoose:this.props.onSearchSelected,showFilter:true,noItemsMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.newVisWizard.searchSelection.notFoundLabel",{defaultMessage:"No matching indices or saved searches found."}),savedObjectMetaData:[{type:"search",getIconForSavedObject:function getIconForSavedObject(){return"search"},name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.newVisWizard.searchSelection.savedObjectType.search",{defaultMessage:"Saved search"})},{type:"index-pattern",getIconForSavedObject:function getIconForSavedObject(){return"indexPatternApp"},name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.newVisWizard.searchSelection.savedObjectType.indexPattern",{defaultMessage:"Index pattern"})}],fixedPageSize:this.fixedPageSize,uiSettings:this.props.uiSettings,savedObjects:this.props.savedObjects})))}}]);return SearchSelection}(external_kbnSharedDeps_React_default.a.Component);var neverCalled=Symbol();function memoizeLast(func){var prevCall=neverCalled;var memoizedFunction=function memoizedFunction(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(prevCall!==neverCalled&&prevCall.this===this&&prevCall.args.length===args.length&&prevCall.args.every((function(arg,index){return arg===args[index]}))){return prevCall.returnValue}prevCall={args:args,this:this,returnValue:func.apply(this,args)};return prevCall.returnValue};return memoizedFunction}function NewVisHelp(props){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.newVisWizard.helpText",defaultMessage:"Start creating your visualization by selecting a type for that visualization."})),props.promotedTypes.map((function(t){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:t.name},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,t.promotion.description)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){return props.onPromotionClicked(t)},fill:true,size:"s",iconType:"popout",iconSide:"right"},t.promotion.buttonText))})))}var vis_help_text_VisHelpText=function VisHelpText(_ref){var name=_ref.name,title=_ref.title,description=_ref.description,highlightMsg=_ref.highlightMsg;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,title)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",{id:"visTypeDescription-".concat(name)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,highlightMsg&&external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("em",null,highlightMsg)),external_kbnSharedDeps_React_default.a.createElement("p",null,description))))};var vis_type_icon_VisTypeIcon=function VisTypeIcon(_ref){var icon=_ref.icon,image=_ref.image;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,image&&external_kbnSharedDeps_React_default.a.createElement("img",{src:image,alt:"",className:"visNewVisDialog__typeImage"}),!image&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:icon||"empty",size:"l",color:"secondary"}))};function type_selection_toConsumableArray(arr){return type_selection_arrayWithoutHoles(arr)||type_selection_iterableToArray(arr)||type_selection_unsupportedIterableToArray(arr)||type_selection_nonIterableSpread()}function type_selection_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function type_selection_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return type_selection_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return type_selection_arrayLikeToArray(o,minLen)}function type_selection_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function type_selection_arrayWithoutHoles(arr){if(Array.isArray(arr))return type_selection_arrayLikeToArray(arr)}function type_selection_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function type_selection_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function type_selection_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function type_selection_createClass(Constructor,protoProps,staticProps){if(protoProps)type_selection_defineProperties(Constructor.prototype,protoProps);if(staticProps)type_selection_defineProperties(Constructor,staticProps);return Constructor}function type_selection_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)type_selection_setPrototypeOf(subClass,superClass)}function type_selection_setPrototypeOf(o,p){type_selection_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return type_selection_setPrototypeOf(o,p)}function type_selection_createSuper(Derived){var hasNativeReflectConstruct=type_selection_isNativeReflectConstruct();return function _createSuperInternal(){var Super=type_selection_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=type_selection_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return type_selection_possibleConstructorReturn(this,result)}}function type_selection_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return type_selection_assertThisInitialized(self)}function type_selection_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function type_selection_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function type_selection_getPrototypeOf(o){type_selection_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return type_selection_getPrototypeOf(o)}function type_selection_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isVisTypeAlias(type){return"aliasPath"in type}var type_selection_TypeSelection=function(_React$Component){type_selection_inherits(TypeSelection,_React$Component);var _super=type_selection_createSuper(TypeSelection);function TypeSelection(){var _this;type_selection_classCallCheck(this,TypeSelection);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));type_selection_defineProperty(type_selection_assertThisInitialized(_this),"state",{highlightedType:null,query:""});type_selection_defineProperty(type_selection_assertThisInitialized(_this),"getFilteredVisTypes",memoizeLast(_this.filteredVisTypes));type_selection_defineProperty(type_selection_assertThisInitialized(_this),"renderVisType",(function(visType){var stage={};var highlightMsg;if(!isVisTypeAlias(visType.type)&&visType.type.stage==="experimental"){stage={betaBadgeLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.newVisWizard.experimentalTitle",{defaultMessage:"Experimental"}),betaBadgeTooltipContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.newVisWizard.experimentalTooltip",{defaultMessage:"This visualization might be changed or removed in a future release and is not subject to the support SLA."})};highlightMsg=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.newVisWizard.experimentalDescription",{defaultMessage:"This visualization is experimental. The design and implementation are less mature than stable visualizations and might be subject to change."})}else if(isVisTypeAlias(visType.type)&&visType.type.stage==="beta"){var aliasDescription=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.newVisWizard.betaDescription",{defaultMessage:"This visualization is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features"});stage={betaBadgeLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.newVisWizard.betaTitle",{defaultMessage:"Beta"}),betaBadgeTooltipContent:aliasDescription};highlightMsg=aliasDescription}var isDisabled=_this.state.query!==""&&!visType.highlighted;var onClick=function onClick(){return _this.props.onVisTypeSelected(visType.type)};var highlightedType={title:visType.type.title,name:visType.type.name,description:visType.type.description,highlightMsg:highlightMsg};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiKeyPadMenuItem"],_extends({key:visType.type.name,label:external_kbnSharedDeps_React_default.a.createElement("span",{"data-test-subj":"visTypeTitle"},visType.type.title),onClick:onClick,onFocus:function onFocus(){return _this.setHighlightType(highlightedType)},onMouseEnter:function onMouseEnter(){return _this.setHighlightType(highlightedType)},onMouseLeave:function onMouseLeave(){return _this.setHighlightType(null)},onBlur:function onBlur(){return _this.setHighlightType(null)},className:"visNewVisDialog__type","data-test-subj":"visType-".concat(visType.type.name),"data-vis-stage":!isVisTypeAlias(visType.type)?visType.type.stage:"alias",disabled:isDisabled,"aria-describedby":"visTypeDescription-".concat(visType.type.name)},stage),external_kbnSharedDeps_React_default.a.createElement(vis_type_icon_VisTypeIcon,{icon:visType.type.icon,image:"image"in visType.type?visType.type.image:undefined}))}));type_selection_defineProperty(type_selection_assertThisInitialized(_this),"onQueryChange",(function(ev){_this.setState({query:ev.target.value})}));return _this}type_selection_createClass(TypeSelection,[{key:"render",value:function render(){var _this$state=this.state,query=_this$state.query,highlightedType=_this$state.highlightedType;var visTypes=this.getFilteredVisTypes(this.props.visTypesRegistry,query);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.newVisWizard.title",defaultMessage:"New Visualization"}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"visNewVisDialog__body"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xl"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"visNewVisDialog__list",direction:"column",gutterSize:"none",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"visNewVisDialog__searchWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{placeholder:"Filter",value:query,onChange:this.onQueryChange,fullWidth:true,"data-test-subj":"filterVisType","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.newVisWizard.filterVisTypeAriaLabel",{defaultMessage:"Filter for a visualization type"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1,className:"visNewVisDialog__typesWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_kbnSharedDeps_React_default.a.createElement("span",{"aria-live":"polite"},query&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.newVisWizard.resultsFound",defaultMessage:"{resultCount} {resultCount, plural, one {type} other {types} } found",values:{resultCount:visTypes.filter((function(type){return type.highlighted})).length}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiKeyPadMenu"],{className:"visNewVisDialog__types","data-test-subj":"visNewDialogTypes"},visTypes.map(this.renderVisType))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"visNewVisDialog__description",grow:false},highlightedType?external_kbnSharedDeps_React_default.a.createElement(vis_help_text_VisHelpText,highlightedType):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.newVisWizard.selectVisType",defaultMessage:"Select a visualization type"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(NewVisHelp,{promotedTypes:visTypes.map((function(t){return t.type})).filter((function(t){return isVisTypeAlias(t)&&Boolean(t.promotion)})),onPromotionClicked:this.props.onVisTypeSelected}))))))}},{key:"filteredVisTypes",value:function filteredVisTypes(visTypes,query){var _this2=this;var types=visTypes.all().filter((function(type){if(!_this2.props.showExperimental&&type.stage==="experimental"){return false}if(type.hidden){return false}return true}));var allTypes=[].concat(type_selection_toConsumableArray(types),type_selection_toConsumableArray(visTypes.getAliases()));var entries;if(!query){entries=allTypes.map((function(type){return{type:type,highlighted:false}}))}else{var q=query.toLowerCase();entries=allTypes.map((function(type){var matchesQuery=type.name.toLowerCase().includes(q)||type.title.toLowerCase().includes(q)||typeof type.description==="string"&&type.description.toLowerCase().includes(q);return{type:type,highlighted:matchesQuery}}))}return Object(external_kbnSharedDeps_Lodash_["orderBy"])(entries,["highlighted","type.promotion","type.title"],["desc","asc","asc"])}},{key:"setHighlightType",value:function setHighlightType(highlightedType){this.setState({highlightedType:highlightedType})}}]);return TypeSelection}(external_kbnSharedDeps_React_default.a.Component);var VISUALIZE_ENABLE_LABS_SETTING="visualize:enableLabs";function new_vis_modal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function new_vis_modal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function new_vis_modal_createClass(Constructor,protoProps,staticProps){if(protoProps)new_vis_modal_defineProperties(Constructor.prototype,protoProps);if(staticProps)new_vis_modal_defineProperties(Constructor,staticProps);return Constructor}function new_vis_modal_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)new_vis_modal_setPrototypeOf(subClass,superClass)}function new_vis_modal_setPrototypeOf(o,p){new_vis_modal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return new_vis_modal_setPrototypeOf(o,p)}function new_vis_modal_createSuper(Derived){var hasNativeReflectConstruct=new_vis_modal_isNativeReflectConstruct();return function _createSuperInternal(){var Super=new_vis_modal_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=new_vis_modal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return new_vis_modal_possibleConstructorReturn(this,result)}}function new_vis_modal_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return new_vis_modal_assertThisInitialized(self)}function new_vis_modal_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function new_vis_modal_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function new_vis_modal_getPrototypeOf(o){new_vis_modal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return new_vis_modal_getPrototypeOf(o)}function new_vis_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var basePath="/create?";var baseUrl="/app/visualize#".concat(basePath);var new_vis_modal_NewVisModal=function(_React$Component){new_vis_modal_inherits(NewVisModal,_React$Component);var _super=new_vis_modal_createSuper(NewVisModal);function NewVisModal(props){var _this$props$usageColl;var _this;new_vis_modal_classCallCheck(this,NewVisModal);_this=_super.call(this,props);new_vis_modal_defineProperty(new_vis_modal_assertThisInitialized(_this),"isLabsEnabled",void 0);new_vis_modal_defineProperty(new_vis_modal_assertThisInitialized(_this),"trackUiMetric",void 0);new_vis_modal_defineProperty(new_vis_modal_assertThisInitialized(_this),"onCloseModal",(function(){_this.setState({showSearchVisModal:false});_this.props.onClose()}));new_vis_modal_defineProperty(new_vis_modal_assertThisInitialized(_this),"onVisTypeSelected",(function(visType){if(!("aliasPath"in visType)&&visType.requiresSearch&&visType.options.showIndexSelection){_this.setState({showSearchVisModal:true,visType:visType})}else{_this.redirectToVis(visType)}}));new_vis_modal_defineProperty(new_vis_modal_assertThisInitialized(_this),"onSearchSelected",(function(searchId,searchType){_this.redirectToVis(_this.state.visType,searchType,searchId)}));_this.isLabsEnabled=props.uiSettings.get(VISUALIZE_ENABLE_LABS_SETTING);_this.state={showSearchVisModal:false};_this.trackUiMetric=(_this$props$usageColl=_this.props.usageCollection)===null||_this$props$usageColl===void 0?void 0:_this$props$usageColl.reportUiStats.bind(_this.props.usageCollection,"visualize");return _this}new_vis_modal_createClass(NewVisModal,[{key:"render",value:function render(){if(!this.props.isOpen){return null}var visNewVisDialogAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.newVisWizard.helpTextAriaLabel",{defaultMessage:"Start creating your visualization by selecting a type for that visualization. Hit escape to close this modal. Hit Tab key to go further."});var selectionModal=this.state.showSearchVisModal&&this.state.visType?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:this.onCloseModal,className:"visNewVisSearchDialog"},external_kbnSharedDeps_React_default.a.createElement(search_selection_SearchSelection,{onSearchSelected:this.onSearchSelected,visType:this.state.visType,uiSettings:this.props.uiSettings,savedObjects:this.props.savedObjects})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:this.onCloseModal,className:"visNewVisDialog","aria-label":visNewVisDialogAriaLabel},external_kbnSharedDeps_React_default.a.createElement(type_selection_TypeSelection,{showExperimental:this.isLabsEnabled,onVisTypeSelected:this.onVisTypeSelected,visTypesRegistry:this.props.visTypesRegistry,addBasePath:this.props.addBasePath}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,selectionModal)}},{key:"redirectToVis",value:function redirectToVis(visType,searchType,searchId){if(this.trackUiMetric){this.trackUiMetric(METRIC_TYPE.CLICK,visType.name)}var params;if("aliasPath"in visType){params=visType.aliasPath;this.props.onClose();this.navigate(visType.aliasApp,visType.aliasPath);return}params=["type=".concat(encodeURIComponent(visType.name))];if(searchType){params.push("".concat(searchType==="search"?"savedSearchId":"indexPattern","=").concat(searchId))}params=params.concat(this.props.editorParams);this.props.onClose();if(this.props.outsideVisualizeApp){this.navigate("visualize","#".concat(basePath).concat(params.join("&")))}else{location.assign(this.props.addBasePath("".concat(baseUrl).concat(params.join("&"))))}}},{key:"navigate",value:function navigate(appId,params){if(this.props.stateTransfer&&this.props.originatingApp){this.props.stateTransfer.navigateToEditor(appId,{path:params,state:{originatingApp:this.props.originatingApp}})}else{this.props.application.navigateToApp(appId,{path:params})}}}]);return NewVisModal}(external_kbnSharedDeps_React_default.a.Component);new_vis_modal_defineProperty(new_vis_modal_NewVisModal,"defaultProps",{editorParams:[]});function showNewVisModal(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$editorParams=_ref.editorParams,editorParams=_ref$editorParams===void 0?[]:_ref$editorParams,onClose=_ref.onClose,originatingApp=_ref.originatingApp,outsideVisualizeApp=_ref.outsideVisualizeApp;var container=document.createElement("div");var isClosed=false;var handleClose=function handleClose(){if(isClosed)return;external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(container);document.body.removeChild(container);if(onClose){onClose()}isClosed=true};document.body.appendChild(container);var element=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(new_vis_modal_NewVisModal,{isOpen:true,onClose:handleClose,originatingApp:originatingApp,stateTransfer:getEmbeddable().getStateTransfer(),outsideVisualizeApp:outsideVisualizeApp,editorParams:editorParams,visTypesRegistry:getTypes(),addBasePath:getHttp().basePath.prepend,uiSettings:getUISettings(),savedObjects:getSavedObjects(),usageCollection:getUsageCollector(),application:getApplication()}));external_kbnSharedDeps_ReactDom_default.a.render(element,container);return function(){return handleClose()}}function vis_update_state_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function vis_update_state_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){vis_update_state_ownKeys(Object(source),true).forEach((function(key){vis_update_state_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{vis_update_state_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function vis_update_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function convertHeatmapLabelColor(visState){var hasOverwriteColorParam=external_kbnSharedDeps_Lodash_default.a.get(visState,"params.valueAxes[0].labels.overwriteColor")!==undefined;if(visState.type==="heatmap"&&visState.params&&!hasOverwriteColorParam){var showLabels=external_kbnSharedDeps_Lodash_default.a.get(visState,"params.valueAxes[0].labels.show",false);var color=external_kbnSharedDeps_Lodash_default.a.get(visState,"params.valueAxes[0].labels.color","#555");Object(elastic_safer_lodash_set["set"])(visState,"params.valueAxes[0].labels.overwriteColor",showLabels&&color!=="#555")}}function convertTermAggregation(visState){if(visState.aggs){visState.aggs.forEach((function(agg){if(agg.type==="terms"&&agg.params&&agg.params.orderBy==="_term"){agg.params.orderBy="_key"}}))}}function convertPropertyNames(visState){if(typeof external_kbnSharedDeps_Lodash_default.a.get(visState,"params.showMeticsAtAllLevels")==="boolean"){visState.params.showMetricsAtAllLevels=visState.params.showMeticsAtAllLevels;delete visState.params.showMeticsAtAllLevels}}function convertDateHistogramScaleMetrics(visState){if(visState.aggs){visState.aggs.forEach((function(agg){if(agg.type==="date_histogram"&&agg.params&&agg.params.interval!=="auto"&&agg.params.scaleMetricValues===undefined){agg.params.scaleMetricValues=true}}))}}function convertSeriesParams(visState){if(visState.params.seriesParams){return}var isUserDefinedYAxis=visState.params.setYExtents;var defaultYExtents=visState.params.defaultYExtents;var mode=["stacked","overlap"].includes(visState.params.mode)?"normal":visState.params.mode||"normal";if(!visState.params.valueAxes||!visState.params.valueAxes.length){visState.params.valueAxes=[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}]}visState.params.valueAxes[0].scale=vis_update_state_objectSpread(vis_update_state_objectSpread({},visState.params.valueAxes[0].scale),{},{type:visState.params.scale||"linear",setYExtents:visState.params.setYExtents||false,defaultYExtents:visState.params.defaultYExtents||false,boundsMargin:defaultYExtents?visState.params.boundsMargin:0,min:isUserDefinedYAxis?visState.params.yAxis.min:undefined,max:isUserDefinedYAxis?visState.params.yAxis.max:undefined,mode:mode});var interpolate=visState.params.smoothLines?"cardinal":visState.params.interpolate;var stacked=["stacked","percentage","wiggle","silhouette"].includes(visState.params.mode);visState.params.seriesParams=[{show:true,type:visState.params.type||"line",mode:stacked?"stacked":"normal",interpolate:interpolate,drawLinesBetweenPoints:visState.params.drawLinesBetweenPoints,showCircles:visState.params.showCircles,radiusRatio:visState.params.radiusRatio,data:{label:"Count",id:"1"},lineWidth:2,valueAxis:"ValueAxis-1"}]}var vis_update_state_updateOldState=function updateOldState(visState){if(!visState)return visState;var newState=external_kbnSharedDeps_Lodash_default.a.cloneDeep(visState);convertTermAggregation(newState);convertPropertyNames(newState);convertDateHistogramScaleMetrics(newState);if(visState.params&&["line","area","histogram"].includes(visState.params.type)){convertSeriesParams(newState)}if(visState.type==="gauge"&&visState.fontSize){delete newState.fontSize;Object(elastic_safer_lodash_set["set"])(newState,"gauge.style.fontSize",visState.fontSize)}if(["gauge","metric"].includes(visState.type)&&external_kbnSharedDeps_Lodash_default.a.get(visState.params,"gauge.gaugeType",null)==="Metric"){newState.type="metric";newState.params.addLegend=false;newState.params.type="metric";newState.params.metric=newState.params.gauge;delete newState.params.gauge;delete newState.params.metric.gaugeType;delete newState.params.metric.gaugeStyle;delete newState.params.metric.backStyle;delete newState.params.metric.scale;delete newState.params.metric.type;delete newState.params.metric.orientation;delete newState.params.metric.verticalSplit;delete newState.params.metric.autoExtend;newState.params.metric.metricColorMode=newState.params.metric.gaugeColorMode;delete newState.params.metric.gaugeColorMode}else if(visState.type==="metric"&&external_kbnSharedDeps_Lodash_default.a.get(visState.params,"gauge.gaugeType","Metric")!=="Metric"){newState.type="gauge";newState.params.type="gauge"}convertHeatmapLabelColor(newState);return newState};function saved_visualization_references_slicedToArray(arr,i){return saved_visualization_references_arrayWithHoles(arr)||saved_visualization_references_iterableToArrayLimit(arr,i)||saved_visualization_references_unsupportedIterableToArray(arr,i)||saved_visualization_references_nonIterableRest()}function saved_visualization_references_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function saved_visualization_references_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function saved_visualization_references_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function saved_visualization_references_toConsumableArray(arr){return saved_visualization_references_arrayWithoutHoles(arr)||saved_visualization_references_iterableToArray(arr)||saved_visualization_references_unsupportedIterableToArray(arr)||saved_visualization_references_nonIterableSpread()}function saved_visualization_references_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function saved_visualization_references_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return saved_visualization_references_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return saved_visualization_references_arrayLikeToArray(o,minLen)}function saved_visualization_references_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function saved_visualization_references_arrayWithoutHoles(arr){if(Array.isArray(arr))return saved_visualization_references_arrayLikeToArray(arr)}function saved_visualization_references_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function saved_visualization_references_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function saved_visualization_references_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){saved_visualization_references_ownKeys(Object(source),true).forEach((function(key){saved_visualization_references_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{saved_visualization_references_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function saved_visualization_references_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function extractReferences(_ref){var attributes=_ref.attributes,_ref$references=_ref.references,references=_ref$references===void 0?[]:_ref$references;var updatedAttributes=saved_visualization_references_objectSpread({},attributes);var updatedReferences=saved_visualization_references_toConsumableArray(references);if(updatedAttributes.searchSourceFields){var _extractSearchSourceR=Object(data_public_["extractSearchSourceReferences"])(updatedAttributes.searchSourceFields),_extractSearchSourceR2=saved_visualization_references_slicedToArray(_extractSearchSourceR,2),searchSource=_extractSearchSourceR2[0],searchSourceReferences=_extractSearchSourceR2[1];updatedAttributes.searchSourceFields=searchSource;searchSourceReferences.forEach((function(r){return updatedReferences.push(r)}))}if(updatedAttributes.savedSearchId){updatedReferences.push({name:"search_0",type:"search",id:String(updatedAttributes.savedSearchId)});delete updatedAttributes.savedSearchId;updatedAttributes.savedSearchRefName="search_0"}if(updatedAttributes.visState){var visState=JSON.parse(String(updatedAttributes.visState));var controls=visState.params&&visState.params.controls||[];controls.forEach((function(control,i){if(!control.indexPattern){return}control.indexPatternRefName="control_".concat(i,"_index_pattern");updatedReferences.push({name:control.indexPatternRefName,type:"index-pattern",id:control.indexPattern});delete control.indexPattern}));updatedAttributes.visState=JSON.stringify(visState)}return{references:updatedReferences,attributes:updatedAttributes}}function injectReferences(savedObject,references){if(savedObject.searchSourceFields){savedObject.searchSourceFields=Object(data_public_["injectSearchSourceReferences"])(savedObject.searchSourceFields,references)}if(savedObject.savedSearchRefName){var savedSearchReference=references.find((function(reference){return reference.name===savedObject.savedSearchRefName}));if(!savedSearchReference){throw new Error('Could not find saved search reference "'.concat(savedObject.savedSearchRefName,'"'))}savedObject.savedSearchId=savedSearchReference.id;delete savedObject.savedSearchRefName}if(savedObject.visState){var controls=savedObject.visState.params&&savedObject.visState.params.controls||[];controls.forEach((function(control){if(!control.indexPatternRefName){return}var reference=references.find((function(ref){return ref.name===control.indexPatternRefName}));if(!reference){throw new Error('Could not find index pattern reference "'.concat(control.indexPatternRefName,'"'))}control.indexPattern=reference.id;delete control.indexPatternRefName}))}}var discover_public_=__webpack_require__(20);function _saved_vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _saved_vis_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){_saved_vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){_saved_vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _saved_vis_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _saved_vis_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_saved_vis_setPrototypeOf(subClass,superClass)}function _saved_vis_setPrototypeOf(o,p){_saved_vis_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _saved_vis_setPrototypeOf(o,p)}function _saved_vis_createSuper(Derived){var hasNativeReflectConstruct=_saved_vis_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_saved_vis_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_saved_vis_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _saved_vis_possibleConstructorReturn(this,result)}}function _saved_vis_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _saved_vis_assertThisInitialized(self)}function _saved_vis_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _saved_vis_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _saved_vis_getPrototypeOf(o){_saved_vis_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _saved_vis_getPrototypeOf(o)}function _saved_vis_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var convertToSerializedVis=function convertToSerializedVis(savedVis){var id=savedVis.id,title=savedVis.title,description=savedVis.description,visState=savedVis.visState,uiStateJSON=savedVis.uiStateJSON,searchSourceFields=savedVis.searchSourceFields;var aggs=searchSourceFields&&searchSourceFields.index?visState.aggs||[]:visState.aggs;return{id:id,title:title,type:visState.type,description:description,params:visState.params,uiState:JSON.parse(uiStateJSON||"{}"),data:{aggs:aggs,searchSource:searchSourceFields,savedSearchId:savedVis.savedSearchId}}};var convertFromSerializedVis=function convertFromSerializedVis(vis){return{id:vis.id,title:vis.title,description:vis.description,visState:{title:vis.title,type:vis.type,aggs:vis.data.aggs,params:vis.params},uiStateJSON:JSON.stringify(vis.uiState),searchSourceFields:vis.data.searchSource,savedSearchId:vis.data.savedSearchId}};function createSavedVisClass(services){var SavedObjectClass=Object(savedObjects_public_["createSavedObjectClass"])(services);var savedSearch=Object(discover_public_["createSavedSearchesLoader"])(services);var SavedVis=function(_SavedObjectClass){_saved_vis_inherits(SavedVis,_SavedObjectClass);var _super=_saved_vis_createSuper(SavedVis);function SavedVis(){var _this;var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_saved_vis_classCallCheck(this,SavedVis);if(typeof opts!=="object"){opts={id:opts}}var visState=!opts.type?null:{type:opts.type};_this=_super.call(this,{type:SavedVis.type,mapping:SavedVis.mapping,extractReferences:extractReferences,injectReferences:injectReferences,id:opts.id||"",indexPattern:opts.indexPattern,defaults:{title:"",visState:visState,uiStateJSON:"{}",description:"",savedSearchId:opts.savedSearchId,version:1},afterESResp:function(){var _afterESResp=_saved_vis_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject){var _savedVis$searchSourc;var savedVis;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedVis=savedObject;_context.next=3;return vis_update_state_updateOldState(savedVis.visState);case 3:savedVis.visState=_context.sent;if(!((_savedVis$searchSourc=savedVis.searchSourceFields)===null||_savedVis$searchSourc===void 0?void 0:_savedVis$searchSourc.index)){_context.next=7;break}_context.next=7;return services.indexPatterns.get(savedVis.searchSourceFields.index);case 7:if(!savedVis.savedSearchId){_context.next=10;break}_context.next=10;return savedSearch.get(savedVis.savedSearchId);case 10:return _context.abrupt("return",savedVis);case 11:case"end":return _context.stop()}}}),_callee)})));function afterESResp(_x){return _afterESResp.apply(this,arguments)}return afterESResp}()});_this.showInRecentlyAccessed=true;_this.getFullPath=function(){return"/app/visualize#/edit/".concat(_this.id)};return _this}return SavedVis}(SavedObjectClass);_saved_vis_defineProperty(SavedVis,"type","visualization");_saved_vis_defineProperty(SavedVis,"mapping",{title:"text",visState:"json",uiStateJSON:"text",description:"text",savedSearchId:"keyword",version:"integer"});_saved_vis_defineProperty(SavedVis,"fieldOrder",["title","description"]);return SavedVis}function create_vis_embeddable_from_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function create_vis_embeddable_from_object_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){create_vis_embeddable_from_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){create_vis_embeddable_from_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var create_vis_embeddable_from_object_createVisEmbeddableFromObject=function createVisEmbeddableFromObject(deps){return function(){var _ref=create_vis_embeddable_from_object_asyncToGenerator(regeneratorRuntime.mark((function _callee(vis,input,savedVisualizationsLoader,attributeService,parent){var savedVisualizations,visId,editPath,editUrl,isLabsEnabled,indexPatterns,editable;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedVisualizations=getSavedVisualizationsLoader();_context.prev=1;visId=vis.id;editPath=visId?savedVisualizations.urlFor(visId):"#/edit_by_value";editUrl=visId?getHttp().basePath.prepend("/app/visualize".concat(savedVisualizations.urlFor(visId))):"";isLabsEnabled=getUISettings().get(VISUALIZE_ENABLE_LABS_SETTING);if(!(!isLabsEnabled&&vis.type.stage==="experimental")){_context.next=8;break}return _context.abrupt("return",new disabled_lab_embeddable_DisabledLabEmbeddable(vis.title,input));case 8:indexPatterns=[];if(!vis.type.getUsedIndexPattern){_context.next=15;break}_context.next=12;return vis.type.getUsedIndexPattern(vis.params);case 12:indexPatterns=_context.sent;_context.next=16;break;case 15:if(vis.data.indexPattern){indexPatterns=[vis.data.indexPattern]}case 16:editable=getCapabilities().visualize.save;return _context.abrupt("return",new visualize_embeddable_VisualizeEmbeddable(getTimeFilter(),{vis:vis,indexPatterns:indexPatterns,editPath:editPath,editUrl:editUrl,editable:editable,deps:deps},input,attributeService,savedVisualizationsLoader,parent));case 20:_context.prev=20;_context.t0=_context["catch"](1);console.error(_context.t0);return _context.abrupt("return",new embeddable_public_["ErrorEmbeddable"](_context.t0,input,parent));case 24:case"end":return _context.stop()}}}),_callee,null,[[1,20]])})));return function(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)}}()};function visualize_embeddable_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualize_embeddable_factory_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualize_embeddable_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualize_embeddable_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function visualize_embeddable_factory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function visualize_embeddable_factory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function visualize_embeddable_factory_createClass(Constructor,protoProps,staticProps){if(protoProps)visualize_embeddable_factory_defineProperties(Constructor.prototype,protoProps);if(staticProps)visualize_embeddable_factory_defineProperties(Constructor,staticProps);return Constructor}function visualize_embeddable_factory_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var visualize_embeddable_factory_VisualizeEmbeddableFactory=function(){function VisualizeEmbeddableFactory(deps){visualize_embeddable_factory_classCallCheck(this,VisualizeEmbeddableFactory);this.deps=deps;visualize_embeddable_factory_defineProperty(this,"type",VISUALIZE_EMBEDDABLE_TYPE);visualize_embeddable_factory_defineProperty(this,"attributeService",void 0);visualize_embeddable_factory_defineProperty(this,"savedObjectMetaData",{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.savedObjectName",{defaultMessage:"Visualization"}),includeFields:["visState"],type:"visualization",getIconForSavedObject:function getIconForSavedObject(savedObject){return getTypes().get(JSON.parse(savedObject.attributes.visState).type).icon||"visualizeApp"},getTooltipForSavedObject:function getTooltipForSavedObject(savedObject){return"".concat(savedObject.attributes.title," (").concat(getTypes().get(JSON.parse(savedObject.attributes.visState).type).title,")")},showSavedObject:function showSavedObject(savedObject){var typeName=JSON.parse(savedObject.attributes.visState).type;var visType=getTypes().get(typeName);if(!visType){return false}if(getUISettings().get(VISUALIZE_ENABLE_LABS_SETTING)){return true}return visType.stage!=="experimental"}})}visualize_embeddable_factory_createClass(VisualizeEmbeddableFactory,[{key:"isEditable",value:function(){var _isEditable=visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",getCapabilities().visualize.save);case 1:case"end":return _context.stop()}}}),_callee)})));function isEditable(){return _isEditable.apply(this,arguments)}return isEditable}()},{key:"getDisplayName",value:function getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.displayName",{defaultMessage:"visualization"})}},{key:"getCurrentAppId",value:function(){var _getCurrentAppId=visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.deps.start().core.application.currentAppId$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["first"])()).toPromise();case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function getCurrentAppId(){return _getCurrentAppId.apply(this,arguments)}return getCurrentAppId}()},{key:"getAttributeService",value:function(){var _getAttributeService=visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(this.attributeService){_context3.next=4;break}_context3.next=3;return this.deps.start().plugins.dashboard.getAttributeService(this.type,{saveMethod:this.saveMethod.bind(this),checkForDuplicateTitle:this.checkTitle.bind(this)});case 3:this.attributeService=_context3.sent;case 4:return _context3.abrupt("return",this.attributeService);case 5:case"end":return _context3.stop()}}}),_callee3,this)})));function getAttributeService(){return _getAttributeService.apply(this,arguments)}return getAttributeService}()},{key:"createFromSavedObject",value:function(){var _createFromSavedObject=visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee4(savedObjectId,input,parent){var savedVisualizations,savedObject,visState,vis;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:savedVisualizations=getSavedVisualizationsLoader();_context4.prev=1;_context4.next=4;return savedVisualizations.get(savedObjectId);case 4:savedObject=_context4.sent;visState=convertToSerializedVis(savedObject);vis=new vis_Vis(savedObject.visState.type,visState);_context4.next=9;return vis.setState(visState);case 9:_context4.t0=create_vis_embeddable_from_object_createVisEmbeddableFromObject(this.deps);_context4.t1=vis;_context4.t2=input;_context4.t3=savedVisualizations;_context4.next=15;return this.getAttributeService();case 15:_context4.t4=_context4.sent;_context4.t5=parent;return _context4.abrupt("return",(0,_context4.t0)(_context4.t1,_context4.t2,_context4.t3,_context4.t4,_context4.t5));case 20:_context4.prev=20;_context4.t6=_context4["catch"](1);console.error(_context4.t6);return _context4.abrupt("return",new embeddable_public_["ErrorEmbeddable"](_context4.t6,input,parent));case 24:case"end":return _context4.stop()}}}),_callee4,this,[[1,20]])})));function createFromSavedObject(_x,_x2,_x3){return _createFromSavedObject.apply(this,arguments)}return createFromSavedObject}()},{key:"create",value:function(){var _create=visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee5(input,parent){var visState,vis,savedVisualizations;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!input.savedVis){_context5.next=17;break}visState=input.savedVis;vis=new vis_Vis(visState.type,visState);_context5.next=5;return vis.setState(visState);case 5:savedVisualizations=getSavedVisualizationsLoader();_context5.t0=create_vis_embeddable_from_object_createVisEmbeddableFromObject(this.deps);_context5.t1=vis;_context5.t2=input;_context5.t3=savedVisualizations;_context5.next=12;return this.getAttributeService();case 12:_context5.t4=_context5.sent;_context5.t5=parent;return _context5.abrupt("return",(0,_context5.t0)(_context5.t1,_context5.t2,_context5.t3,_context5.t4,_context5.t5));case 17:_context5.t6=showNewVisModal;_context5.next=20;return this.getCurrentAppId();case 20:_context5.t7=_context5.sent;_context5.t8={originatingApp:_context5.t7,outsideVisualizeApp:true};(0,_context5.t6)(_context5.t8);return _context5.abrupt("return",undefined);case 24:case"end":return _context5.stop()}}}),_callee5,this)})));function create(_x4,_x5){return _create.apply(this,arguments)}return create}()},{key:"saveMethod",value:function(){var _saveMethod=visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee6(attributes){var _visObj$data$searchSo,title,savedVis,visObj,saveOptions,serializedVis,params,data,id;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;title=attributes.title,savedVis=attributes.savedVis;visObj=attributes.vis;if(savedVis){_context6.next=5;break}throw new Error("No Saved Vis");case 5:saveOptions={confirmOverwrite:false,returnToOrigin:true};savedVis.title=title;savedVis.copyOnSave=false;savedVis.description="";savedVis.searchSourceFields=visObj===null||visObj===void 0?void 0:(_visObj$data$searchSo=visObj.data.searchSource)===null||_visObj$data$searchSo===void 0?void 0:_visObj$data$searchSo.getSerializedFields();serializedVis=visObj.serialize();params=serializedVis.params,data=serializedVis.data;savedVis.visState={title:title,type:serializedVis.type,params:params,aggs:data.aggs};if(visObj){savedVis.uiStateJSON=visObj===null||visObj===void 0?void 0:visObj.uiState.toString()}_context6.next=16;return savedVis.save(saveOptions);case 16:id=_context6.sent;if(!(!id||id==="")){_context6.next=19;break}throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.savingVisualizationFailed.errorMsg",{defaultMessage:"Saving a visualization failed"}));case 19:return _context6.abrupt("return",{id:id});case 22:_context6.prev=22;_context6.t0=_context6["catch"](0);throw _context6.t0;case 25:case"end":return _context6.stop()}}}),_callee6,null,[[0,22]])})));function saveMethod(_x6){return _saveMethod.apply(this,arguments)}return saveMethod}()},{key:"checkTitle",value:function(){var _checkTitle=visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee7(props){var _this=this;var savedObjectsClient,overlays;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.deps.start().core.savedObjects.client;case 2:savedObjectsClient=_context7.sent;_context7.next=5;return this.deps.start().core.overlays;case 5:overlays=_context7.sent;return _context7.abrupt("return",Object(savedObjects_public_["checkForDuplicateTitle"])({title:props.newTitle,copyOnSave:false,lastSavedTitle:"",getEsType:function getEsType(){return _this.type},getDisplayName:this.getDisplayName||function(){return _this.type}},props.isTitleDuplicateConfirmed,props.onTitleDuplicate,{savedObjectsClient:savedObjectsClient,overlays:overlays}));case 7:case"end":return _context7.stop()}}}),_callee7,this)})));function checkTitle(_x7){return _checkTitle.apply(this,arguments)}return checkTitle}()}]);return VisualizeEmbeddableFactory}();function visualization_function_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualization_function_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualization_function_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualization_function_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var visualization_function_visualization=function visualization(){return{name:"visualization",type:"render",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.functions.visualization.help",{defaultMessage:"A simple visualization"}),args:{index:{types:["string","null"],default:null,help:"Index"},metricsAtAllLevels:{types:["boolean"],default:false,help:"Metrics levels"},partialRows:{types:["boolean"],default:false,help:"Partial rows"},type:{types:["string"],default:"",help:"Type"},schemas:{types:["string"],default:'"{}"',help:"Schemas"},visConfig:{types:["string"],default:'"{}"',help:"Visualization configuration"},uiState:{types:["string"],default:'"{}"',help:"User interface state"},aggConfigs:{types:["string"],default:'"{}"',help:"Aggregation configurations"}},fn(input,args,_ref){return visualization_function_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var inspectorAdapters,visConfigParams,schemas,visType,indexPattern,uiStateParams,uiState,aggConfigsState,aggs;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:inspectorAdapters=_ref.inspectorAdapters;visConfigParams=args.visConfig?JSON.parse(args.visConfig):{};schemas=args.schemas?JSON.parse(args.schemas):{};visType=getTypes().get(args.type||"histogram");if(!args.index){_context.next=10;break}_context.next=7;return getIndexPatterns().get(args.index);case 7:_context.t0=_context.sent;_context.next=11;break;case 10:_context.t0=null;case 11:indexPattern=_context.t0;uiStateParams=args.uiState?JSON.parse(args.uiState):{};uiState=new persisted_state_PersistedState(uiStateParams);aggConfigsState=args.aggConfigs?JSON.parse(args.aggConfigs):[];aggs=indexPattern?getSearch().aggs.createAggConfigs(indexPattern,aggConfigsState):undefined;if(!(typeof visType.requestHandler==="function")){_context.next=20;break}_context.next=19;return visType.requestHandler({partialRows:args.partialRows,metricsAtAllLevels:args.metricsAtAllLevels,index:indexPattern,visParams:visConfigParams,timeRange:Object(external_kbnSharedDeps_Lodash_["get"])(input,"timeRange",null),query:Object(external_kbnSharedDeps_Lodash_["get"])(input,"query",null),filters:Object(external_kbnSharedDeps_Lodash_["get"])(input,"filters",null),uiState:uiState,inspectorAdapters:inspectorAdapters,queryFilter:getFilterManager(),aggs:aggs});case 19:input=_context.sent;case 20:if(!(typeof visType.responseHandler==="function")){_context.next=25;break}if(input.columns){input.columns.forEach((function(column){if(column.aggConfig){column.aggConfig.aggConfigs.schemas=visType.schemas.all}}));Object.keys(schemas).forEach((function(key){schemas[key].forEach((function(i){if(input.columns[i]&&input.columns[i].aggConfig){input.columns[i].aggConfig.schema=key}}))}))}_context.next=24;return visType.responseHandler(input,visConfigParams.dimensions);case 24:input=_context.sent;case 25:return _context.abrupt("return",{type:"render",as:"visualization",value:{visData:input,visType:args.type||"",visConfig:visConfigParams}});case 26:case"end":return _context.stop()}}}),_callee)})))()}}};function expressions_vis_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function expressions_vis_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function expressions_vis_createClass(Constructor,protoProps,staticProps){if(protoProps)expressions_vis_defineProperties(Constructor.prototype,protoProps);if(staticProps)expressions_vis_defineProperties(Constructor,staticProps);return Constructor}function vis_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)vis_setPrototypeOf(subClass,superClass)}function vis_setPrototypeOf(o,p){vis_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return vis_setPrototypeOf(o,p)}function vis_createSuper(Derived){var hasNativeReflectConstruct=vis_isNativeReflectConstruct();return function _createSuperInternal(){var Super=vis_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=vis_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return vis_possibleConstructorReturn(this,result)}}function vis_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return vis_assertThisInitialized(self)}function vis_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function vis_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function vis_getPrototypeOf(o){vis_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return vis_getPrototypeOf(o)}function expressions_vis_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var vis_ExprVis=function(_EventEmitter){vis_inherits(ExprVis,_EventEmitter);var _super=vis_createSuper(ExprVis);function ExprVis(){var _this;var visState=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{type:"histogram"};expressions_vis_classCallCheck(this,ExprVis);_this=_super.call(this);expressions_vis_defineProperty(vis_assertThisInitialized(_this),"title","");expressions_vis_defineProperty(vis_assertThisInitialized(_this),"type",void 0);expressions_vis_defineProperty(vis_assertThisInitialized(_this),"params",{});expressions_vis_defineProperty(vis_assertThisInitialized(_this),"sessionState",{});expressions_vis_defineProperty(vis_assertThisInitialized(_this),"API",void 0);expressions_vis_defineProperty(vis_assertThisInitialized(_this),"eventsSubject",void 0);expressions_vis_defineProperty(vis_assertThisInitialized(_this),"uiState",void 0);_this.type=_this.getType(visState.type);_this.uiState=new persisted_state_PersistedState;_this.setState(visState);_this.API={events:{filter:function filter(data){if(!_this.eventsSubject)return;_this.eventsSubject.next({name:"filterBucket",data:data.data?{data:data.data,negate:data.negate}:{data:[data]}})},brush:function brush(data){if(!_this.eventsSubject)return;_this.eventsSubject.next({name:"brush",data:data})},applyFilter:function applyFilter(data){if(!_this.eventsSubject)return;_this.eventsSubject.next({name:"applyFilter",data:data})}}};return _this}expressions_vis_createClass(ExprVis,[{key:"getType",value:function getType(type){if(external_kbnSharedDeps_Lodash_default.a.isString(type)){var newType=getTypes().get(type);if(!newType){throw new Error('Invalid type "'.concat(type,'"'))}return newType}else{return type}}},{key:"setState",value:function setState(state){this.title=state.title||"";if(state.type){this.type=this.getType(state.type)}this.params=external_kbnSharedDeps_Lodash_default.a.defaultsDeep({},external_kbnSharedDeps_Lodash_default.a.cloneDeep(state.params||{}),external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.type.visConfig.defaults||{}))}},{key:"getState",value:function getState(){return{title:this.title,type:this.type.name,params:external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.params)}}},{key:"updateState",value:function updateState(){this.emit("update")}},{key:"forceReload",value:function forceReload(){this.emit("reload")}},{key:"isHierarchical",value:function isHierarchical(){if(external_kbnSharedDeps_Lodash_default.a.isFunction(this.type.hierarchicalData)){return!!this.type.hierarchicalData(this)}else{return!!this.type.hierarchicalData}}},{key:"hasUiState",value:function hasUiState(){return!!this.uiState}},{key:"getUiState",value:function getUiState(){return this.uiState}},{key:"setUiState",value:function setUiState(state){this.uiState=state}},{key:"uiStateVal",value:function uiStateVal(key,val){if(this.hasUiState()){if(external_kbnSharedDeps_Lodash_default.a.isUndefined(val)){return this.uiState.get(key)}return this.uiState.set(key,val)}return val}}]);return ExprVis}(events["EventEmitter"]);function visualization_chart_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualization_chart_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualization_chart_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualization_chart_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function visualization_chart_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function visualization_chart_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function visualization_chart_createClass(Constructor,protoProps,staticProps){if(protoProps)visualization_chart_defineProperties(Constructor.prototype,protoProps);if(staticProps)visualization_chart_defineProperties(Constructor,staticProps);return Constructor}function visualization_chart_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)visualization_chart_setPrototypeOf(subClass,superClass)}function visualization_chart_setPrototypeOf(o,p){visualization_chart_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return visualization_chart_setPrototypeOf(o,p)}function visualization_chart_createSuper(Derived){var hasNativeReflectConstruct=visualization_chart_isNativeReflectConstruct();return function _createSuperInternal(){var Super=visualization_chart_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=visualization_chart_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return visualization_chart_possibleConstructorReturn(this,result)}}function visualization_chart_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return visualization_chart_assertThisInitialized(self)}function visualization_chart_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function visualization_chart_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function visualization_chart_getPrototypeOf(o){visualization_chart_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return visualization_chart_getPrototypeOf(o)}function visualization_chart_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var visualization_chart_VisualizationChart=function(_React$Component){visualization_chart_inherits(VisualizationChart,_React$Component);var _super=visualization_chart_createSuper(VisualizationChart);function VisualizationChart(props){var _this;visualization_chart_classCallCheck(this,VisualizationChart);_this=_super.call(this,props);visualization_chart_defineProperty(visualization_chart_assertThisInitialized(_this),"resizeChecker",void 0);visualization_chart_defineProperty(visualization_chart_assertThisInitialized(_this),"visualization",void 0);visualization_chart_defineProperty(visualization_chart_assertThisInitialized(_this),"chartDiv",external_kbnSharedDeps_React_default.a.createRef());visualization_chart_defineProperty(visualization_chart_assertThisInitialized(_this),"containerDiv",external_kbnSharedDeps_React_default.a.createRef());visualization_chart_defineProperty(visualization_chart_assertThisInitialized(_this),"renderSubject",void 0);visualization_chart_defineProperty(visualization_chart_assertThisInitialized(_this),"renderSubscription",void 0);visualization_chart_defineProperty(visualization_chart_assertThisInitialized(_this),"onUiStateChanged",(function(){_this.startRenderVisualization()}));_this.renderSubject=new external_kbnSharedDeps_Rxjs_["Subject"];var render$=_this.renderSubject.asObservable().pipe(Object(external_kbnSharedDeps_RxjsOperators_["share"])());var success$=render$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["filter"])((function(_ref){var vis=_ref.vis,visData=_ref.visData;return vis&&(!vis.type.requiresSearch||visData)})),Object(external_kbnSharedDeps_RxjsOperators_["debounceTime"])(100),Object(external_kbnSharedDeps_RxjsOperators_["switchMap"])(function(){var _ref3=visualization_chart_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var vis,visData,visParams;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:vis=_ref2.vis,visData=_ref2.visData,visParams=_ref2.visParams;if(_this.visualization){_context.next=3;break}throw new Error("Visualization implementation was not initialized on first render.");case 3:return _context.abrupt("return",_this.visualization.render(visData,visParams));case 4:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref3.apply(this,arguments)}}()));_this.renderSubscription=success$.subscribe((function(){if(_this.props.onInit){_this.props.onInit()}}));return _this}visualization_chart_createClass(VisualizationChart,[{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"visChart__container kbn-resetFocusState",tabIndex:0,ref:this.containerDiv},external_kbnSharedDeps_React_default.a.createElement("div",{className:"visChart",ref:this.chartDiv}))}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;if(!this.chartDiv.current||!this.containerDiv.current){throw new Error("chartDiv and currentDiv reference should always be present.")}var vis=this.props.vis;var Visualization=vis.type.visualization;if(!Visualization){throw new Error("Tried to use VisualizationChart component with a vis without visualization property.")}this.visualization=new Visualization(this.chartDiv.current,vis);this.resizeChecker=new public_["ResizeChecker"](this.containerDiv.current);this.resizeChecker.on("resize",(function(){return _this2.startRenderVisualization()}));if(this.props.listenOnChange){this.props.uiState.on("change",this.onUiStateChanged)}this.startRenderVisualization()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.startRenderVisualization()}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.renderSubscription){this.renderSubscription.unsubscribe()}if(this.resizeChecker){this.resizeChecker.destroy()}if(this.visualization){this.visualization.destroy()}}},{key:"startRenderVisualization",value:function startRenderVisualization(){if(this.containerDiv.current&&this.chartDiv.current){this.renderSubject.next({vis:this.props.vis,visData:this.props.visData,visParams:this.props.visParams})}}}]);return VisualizationChart}(external_kbnSharedDeps_React_default.a.Component);function visualization_noresults_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function visualization_noresults_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function visualization_noresults_createClass(Constructor,protoProps,staticProps){if(protoProps)visualization_noresults_defineProperties(Constructor.prototype,protoProps);if(staticProps)visualization_noresults_defineProperties(Constructor,staticProps);return Constructor}function visualization_noresults_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)visualization_noresults_setPrototypeOf(subClass,superClass)}function visualization_noresults_setPrototypeOf(o,p){visualization_noresults_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return visualization_noresults_setPrototypeOf(o,p)}function visualization_noresults_createSuper(Derived){var hasNativeReflectConstruct=visualization_noresults_isNativeReflectConstruct();return function _createSuperInternal(){var Super=visualization_noresults_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=visualization_noresults_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return visualization_noresults_possibleConstructorReturn(this,result)}}function visualization_noresults_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return visualization_noresults_assertThisInitialized(self)}function visualization_noresults_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function visualization_noresults_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function visualization_noresults_getPrototypeOf(o){visualization_noresults_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return visualization_noresults_getPrototypeOf(o)}function visualization_noresults_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var visualization_noresults_VisualizationNoResults=function(_React$Component){visualization_noresults_inherits(VisualizationNoResults,_React$Component);var _super=visualization_noresults_createSuper(VisualizationNoResults);function VisualizationNoResults(){var _this;visualization_noresults_classCallCheck(this,VisualizationNoResults);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));visualization_noresults_defineProperty(visualization_noresults_assertThisInitialized(_this),"containerDiv",external_kbnSharedDeps_React_default.a.createRef());return _this}visualization_noresults_createClass(VisualizationNoResults,[{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"visError",ref:this.containerDiv},external_kbnSharedDeps_React_default.a.createElement("div",{className:"item top"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"item"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"visualizeApp",size:"m",color:"subdued"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.noResultsFoundTitle",{defaultMessage:"No results found"})))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"item bottom"}))}},{key:"componentDidMount",value:function componentDidMount(){this.afterRender()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.afterRender()}},{key:"afterRender",value:function afterRender(){if(this.props.onInit){this.props.onInit()}}}]);return VisualizationNoResults}(external_kbnSharedDeps_React_default.a.Component);function visualization_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function visualization_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function visualization_createClass(Constructor,protoProps,staticProps){if(protoProps)visualization_defineProperties(Constructor.prototype,protoProps);if(staticProps)visualization_defineProperties(Constructor,staticProps);return Constructor}function visualization_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)visualization_setPrototypeOf(subClass,superClass)}function visualization_setPrototypeOf(o,p){visualization_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return visualization_setPrototypeOf(o,p)}function visualization_createSuper(Derived){var hasNativeReflectConstruct=visualization_isNativeReflectConstruct();return function _createSuperInternal(){var Super=visualization_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=visualization_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return visualization_possibleConstructorReturn(this,result)}}function visualization_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return visualization_assertThisInitialized(self)}function visualization_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function visualization_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function visualization_getPrototypeOf(o){visualization_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return visualization_getPrototypeOf(o)}function visualization_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function shouldShowNoResultsMessage(vis,visData){var requiresSearch=Object(external_kbnSharedDeps_Lodash_["get"])(vis,"type.requiresSearch");var rows=Object(external_kbnSharedDeps_Lodash_["get"])(visData,"rows");var isZeroHits=Object(external_kbnSharedDeps_Lodash_["get"])(visData,"hits")===0||rows&&!rows.length;var shouldShowMessage=!Object(external_kbnSharedDeps_Lodash_["get"])(vis,"type.useCustomNoDataScreen");return Boolean(requiresSearch&&isZeroHits&&shouldShowMessage)}var visualization_Visualization=function(_React$Component){visualization_inherits(Visualization,_React$Component);var _super=visualization_createSuper(Visualization);function Visualization(props){var _this;visualization_classCallCheck(this,Visualization);_this=_super.call(this,props);visualization_defineProperty(visualization_assertThisInitialized(_this),"showNoResultsMessage",memoizeLast(shouldShowNoResultsMessage));props.vis.setUiState(props.uiState);return _this}visualization_createClass(Visualization,[{key:"render",value:function render(){var _this$props=this.props,vis=_this$props.vis,visData=_this$props.visData,visParams=_this$props.visParams,onInit=_this$props.onInit,uiState=_this$props.uiState,listenOnChange=_this$props.listenOnChange;var noResults=this.showNoResultsMessage(vis,visData);return external_kbnSharedDeps_React_default.a.createElement("div",{className:"visualization"},noResults?external_kbnSharedDeps_React_default.a.createElement(visualization_noresults_VisualizationNoResults,{onInit:onInit}):external_kbnSharedDeps_React_default.a.createElement(visualization_chart_VisualizationChart,{vis:vis,visData:visData,visParams:visParams,onInit:onInit,uiState:uiState,listenOnChange:listenOnChange}))}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){if(nextProps.uiState!==this.props.uiState){throw new Error("Changing uiState on <Visualization/> is not supported!")}return true}}]);return Visualization}(external_kbnSharedDeps_React_default.a.Component);var classnames=__webpack_require__(36);var classnames_default=__webpack_require__.n(classnames);var visualization_container_VisualizationContainer=function VisualizationContainer(_ref){var className=_ref.className,children=_ref.children,_ref$showNoResult=_ref.showNoResult,showNoResult=_ref$showNoResult===void 0?false:_ref$showNoResult;var classes=classnames_default()("visualization",className);var fallBack=external_kbnSharedDeps_React_default.a.createElement("div",{className:"visChart__spinner"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingChart"],{mono:true,size:"l"}));return external_kbnSharedDeps_React_default.a.createElement("div",{className:classes},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Suspense"],{fallback:fallBack},showNoResult?external_kbnSharedDeps_React_default.a.createElement(visualization_noresults_VisualizationNoResults,null):children))};function visualization_renderer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualization_renderer_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualization_renderer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualization_renderer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var visualization_renderer_visualization=function visualization(){return{name:"visualization",displayName:"visualization",reuseDomNode:true,render:function(){var _render2=visualization_renderer_asyncToGenerator(regeneratorRuntime.mark((function _callee(domNode,config,handlers){var visData,visConfig,params,visType,vis,uiState,listenOnChange;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:visData=config.visData,visConfig=config.visConfig,params=config.params;visType=config.visType||visConfig.type;vis=new vis_ExprVis({title:config.title,type:visType,params:visConfig});vis.eventsSubject={next:handlers.event};uiState=handlers.uiState||vis.getUiState();handlers.onDestroy((function(){Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(domNode)}));listenOnChange=params?params.listenOnChange:false;Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(visualization_Visualization,{vis:vis,visData:visData,visParams:vis.params,uiState:uiState,listenOnChange:listenOnChange,onInit:handlers.done}),domNode);case 8:case"end":return _context.stop()}}}),_callee)})));function render(_x,_x2,_x3){return _render2.apply(this,arguments)}return render}()}};var range_range=function range(){return{name:"range",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.range.help",{defaultMessage:"Generates range object"}),type:"range",args:{from:{types:["number"],help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.range.from.help",{defaultMessage:"Start of range"}),required:true},to:{types:["number"],help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.range.to.help",{defaultMessage:"End of range"}),required:true}},fn:function fn(context,args){return{type:"range",from:args.from,to:args.to}}}};var vis_dimension_visDimension=function visDimension(){return{name:"visdimension",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.help",{defaultMessage:"Generates visConfig dimension object"}),type:"vis_dimension",inputTypes:["kibana_datatable"],args:{accessor:{types:["string","number"],aliases:["_"],help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.accessor.help",{defaultMessage:"Column in your dataset to use (either column index or column name)"})},format:{types:["string"],default:"string",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.format.help",{defaultMessage:"Format"})},formatParams:{types:["string"],default:'"{}"',help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.formatParams.help",{defaultMessage:"Format params"})}},fn:function fn(input,args){var accessor=typeof args.accessor==="number"?args.accessor:input.columns.find((function(c){return c.id===args.accessor}));if(accessor===undefined){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.error.accessor",{defaultMessage:"Column name provided is invalid"}))}return{type:"vis_dimension",accessor:accessor,format:{id:args.format,params:JSON.parse(args.formatParams)}}}}};function find_list_items_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function find_list_items_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){find_list_items_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){find_list_items_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function find_list_items_findListItems(_x){return _findListItems.apply(this,arguments)}function _findListItems(){_findListItems=find_list_items_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var visTypes,search,size,savedObjectsClient,mapSavedObjectApiHits,extensions,extensionByType,searchOption,searchOptions,_yield$savedObjectsCl,total,savedObjects;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:visTypes=_ref.visTypes,search=_ref.search,size=_ref.size,savedObjectsClient=_ref.savedObjectsClient,mapSavedObjectApiHits=_ref.mapSavedObjectApiHits;extensions=visTypes.map((function(v){var _v$appExtensions;return(_v$appExtensions=v.appExtensions)===null||_v$appExtensions===void 0?void 0:_v$appExtensions.visualizations})).filter(Boolean);extensionByType=extensions.reduce((function(acc,m){return m.docTypes.reduce((function(_acc,type){acc[type]=m;return acc}),acc)}),{});searchOption=function searchOption(field){for(var _len=arguments.length,defaults=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){defaults[_key-1]=arguments[_key]}return external_kbnSharedDeps_Lodash_default()(extensions).map(field).concat(defaults).compact().flatten().uniq().value()};searchOptions={type:searchOption("docTypes","visualization"),searchFields:searchOption("searchFields","title^3","description"),search:search?"".concat(search,"*"):undefined,perPage:size,page:1,defaultSearchOperator:"AND"};_context.next=7;return savedObjectsClient.find(searchOptions);case 7:_yield$savedObjectsCl=_context.sent;total=_yield$savedObjectsCl.total;savedObjects=_yield$savedObjectsCl.savedObjects;return _context.abrupt("return",{total:total,hits:savedObjects.map((function(savedObject){var config=extensionByType[savedObject.type];if(config){return config.toListItem(savedObject)}else{return mapSavedObjectApiHits(savedObject)}}))});case 11:case"end":return _context.stop()}}}),_callee)})));return _findListItems.apply(this,arguments)}function saved_visualizations_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function saved_visualizations_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function saved_visualizations_createClass(Constructor,protoProps,staticProps){if(protoProps)saved_visualizations_defineProperties(Constructor.prototype,protoProps);if(staticProps)saved_visualizations_defineProperties(Constructor,staticProps);return Constructor}function saved_visualizations_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)saved_visualizations_setPrototypeOf(subClass,superClass)}function saved_visualizations_setPrototypeOf(o,p){saved_visualizations_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return saved_visualizations_setPrototypeOf(o,p)}function saved_visualizations_createSuper(Derived){var hasNativeReflectConstruct=saved_visualizations_isNativeReflectConstruct();return function _createSuperInternal(){var Super=saved_visualizations_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=saved_visualizations_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return saved_visualizations_possibleConstructorReturn(this,result)}}function saved_visualizations_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return saved_visualizations_assertThisInitialized(self)}function saved_visualizations_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function saved_visualizations_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function saved_visualizations_getPrototypeOf(o){saved_visualizations_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return saved_visualizations_getPrototypeOf(o)}function saved_visualizations_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createSavedVisLoader(services){var savedObjectsClient=services.savedObjectsClient,visualizationTypes=services.visualizationTypes;var SavedObjectLoaderVisualize=function(_SavedObjectLoader){saved_visualizations_inherits(SavedObjectLoaderVisualize,_SavedObjectLoader);var _super=saved_visualizations_createSuper(SavedObjectLoaderVisualize);function SavedObjectLoaderVisualize(){var _this;saved_visualizations_classCallCheck(this,SavedObjectLoaderVisualize);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));saved_visualizations_defineProperty(saved_visualizations_assertThisInitialized(_this),"mapHitSource",(function(source,id){var visTypes=visualizationTypes;source.id=id;source.url=_this.urlFor(id);var typeName=source.typeName;if(source.visState){try{typeName=JSON.parse(String(source.visState)).type}catch(e){}}if(!typeName||!visTypes.get(typeName)){source.error="Unknown visualization type";return source}source.type=visTypes.get(typeName);source.savedObjectType="visualization";source.icon=source.type.icon;source.image=source.type.image;source.typeTitle=source.type.title;source.editUrl="/edit/".concat(id);return source}));return _this}saved_visualizations_createClass(SavedObjectLoaderVisualize,[{key:"urlFor",value:function urlFor(id){return"#/edit/".concat(encodeURIComponent(id))}},{key:"findListItems",value:function findListItems(){var search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return find_list_items_findListItems({search:search,size:size,mapSavedObjectApiHits:this.mapSavedObjectApiHits.bind(this),savedObjectsClient:savedObjectsClient,visTypes:visualizationTypes.getAliases()})}}]);return SavedObjectLoaderVisualize}(savedObjects_public_["SavedObjectLoader"]);var SavedVis=createSavedVisClass(services);return new SavedObjectLoaderVisualize(SavedVis,savedObjectsClient)}function plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function plugin_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function plugin_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function plugin_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){plugin_ownKeys(Object(source),true).forEach((function(key){plugin_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{plugin_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function plugin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function plugin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function plugin_createClass(Constructor,protoProps,staticProps){if(protoProps)plugin_defineProperties(Constructor.prototype,protoProps);if(staticProps)plugin_defineProperties(Constructor,staticProps);return Constructor}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var plugin_VisualizationsPlugin=function(){function VisualizationsPlugin(initializerContext){plugin_classCallCheck(this,VisualizationsPlugin);plugin_defineProperty(this,"types",new types_service_TypesService);plugin_defineProperty(this,"getStartServicesOrDie",void 0)}plugin_createClass(VisualizationsPlugin,[{key:"setup",value:function setup(core,_ref){var expressions=_ref.expressions,embeddable=_ref.embeddable,usageCollection=_ref.usageCollection,data=_ref.data;var start=this.getStartServicesOrDie=Object(public_["createStartServicesGetter"])(core.getStartServices);setUISettings(core.uiSettings);setUsageCollector(usageCollection);expressions.registerFunction(visualization_function_visualization);expressions.registerRenderer(visualization_renderer_visualization);expressions.registerFunction(range_range);expressions.registerFunction(vis_dimension_visDimension);var embeddableFactory=new visualize_embeddable_factory_VisualizeEmbeddableFactory({start:start});embeddable.registerEmbeddableFactory(VISUALIZE_EMBEDDABLE_TYPE,embeddableFactory);return plugin_objectSpread({},this.types.setup())}},{key:"start",value:function start(core,_ref2){var data=_ref2.data,expressions=_ref2.expressions,uiActions=_ref2.uiActions,embeddable=_ref2.embeddable,dashboard=_ref2.dashboard;var types=this.types.start();setI18n(core.i18n);setTypes(types);setEmbeddable(embeddable);setApplication(core.application);setCapabilities(core.application.capabilities);setHttp(core.http);setSavedObjects(core.savedObjects);setIndexPatterns(data.indexPatterns);setSearch(data.search);setFilterManager(data.query.filterManager);setExpressions(expressions);setUiActions(uiActions);setTimeFilter(data.query.timefilter.timefilter);setAggs(data.search.aggs);setOverlays(core.overlays);setChrome(core.chrome);var savedVisualizationsLoader=createSavedVisLoader({savedObjectsClient:core.savedObjects.client,indexPatterns:data.indexPatterns,search:data.search,chrome:core.chrome,overlays:core.overlays,visualizationTypes:types});setSavedVisualizationsLoader(savedVisualizationsLoader);var savedSearchLoader=Object(discover_public_["createSavedSearchesLoader"])({savedObjectsClient:core.savedObjects.client,indexPatterns:data.indexPatterns,search:data.search,chrome:core.chrome,overlays:core.overlays});setSavedSearchLoader(savedSearchLoader);return plugin_objectSpread(plugin_objectSpread({},types),{},{showNewVisModal:showNewVisModal,createVis:function(){var _createVis=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee(visType,visState){var vis;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:vis=new vis_Vis(visType);_context.next=3;return vis.setState(visState);case 3:return _context.abrupt("return",vis);case 4:case"end":return _context.stop()}}}),_callee)})));function createVis(_x,_x2){return _createVis.apply(this,arguments)}return createVis}(),convertToSerializedVis:convertToSerializedVis,convertFromSerializedVis:convertFromSerializedVis,savedVisualizationsLoader:savedVisualizationsLoader,__LEGACY:{createVisEmbeddableFromObject:create_vis_embeddable_from_object_createVisEmbeddableFromObject({start:this.getStartServicesOrDie})}})}},{key:"stop",value:function stop(){this.types.stop()}}]);return VisualizationsPlugin}();function public_plugin(initializerContext){return new plugin_VisualizationsPlugin(initializerContext)}}]);