(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=10)})([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_inputControlVis_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11);var _node_modules_val_loader_dist_cjs_js_key_inputControlVis_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_inputControlVis_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/inputControlVis/public",__webpack_require__,21)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["inputControlVis"]},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(13);case"v7light":return __webpack_require__(15);case"v8dark":return __webpack_require__(17);case"v8light":return __webpack_require__(19)}},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(14);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".icvControlEditor__panel {\n  z-index: 1;\n  margin-bottom: 16px; }\n\n.icvContainer {\n  width: 100%;\n  margin: 0 4px;\n  padding: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(16);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".icvControlEditor__panel {\n  z-index: 1;\n  margin-bottom: 16px; }\n\n.icvContainer {\n  width: 100%;\n  margin: 0 4px;\n  padding: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(18);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".icvControlEditor__panel {\n  z-index: 1;\n  margin-bottom: 16px; }\n\n.icvContainer {\n  width: 100%;\n  margin: 0 4px;\n  padding: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(20);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".icvControlEditor__panel {\n  z-index: 1;\n  margin-bottom: 16px; }\n\n.icvContainer {\n  width: 100%;\n  margin: 0 4px;\n  padding: 8px; }\n",""]);module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var public_0=__webpack_require__(12);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(4);var input_control_fn_createInputControlVisFn=function createInputControlVisFn(){return{name:"input_control_vis",type:"render",inputTypes:[],help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.function.help",{defaultMessage:"Input control visualization"}),args:{visConfig:{types:["string"],default:'"{}"',help:""}},fn(input,args){var params=JSON.parse(args.visConfig);return{type:"render",as:"visualization",value:{visType:"input_control_vis",visConfig:params}}}}};var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_Lodash_=__webpack_require__(2);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(8);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(3);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var CONTROL_TYPES={LIST:"list",RANGE:"range"};var setControl=function setControl(controls,controlIndex,control){return[].concat(_toConsumableArray(controls.slice(0,controlIndex)),[control],_toConsumableArray(controls.slice(controlIndex+1)))};var addControl=function addControl(controls,control){return[].concat(_toConsumableArray(controls),[control])};var moveControl=function moveControl(controls,controlIndex,direction){var newIndex;if(direction>=0){newIndex=controlIndex+1}else{newIndex=controlIndex-1}if(newIndex<0){return[].concat(_toConsumableArray(controls.slice(1)),[controls[0]])}else if(newIndex>=controls.length){var lastItemIndex=controls.length-1;return[controls[lastItemIndex]].concat(_toConsumableArray(controls.slice(0,lastItemIndex)))}else{var swapped=controls.slice();var temp=swapped[newIndex];swapped[newIndex]=swapped[controlIndex];swapped[controlIndex]=temp;return swapped}};var removeControl=function removeControl(controls,controlIndex){return[].concat(_toConsumableArray(controls.slice(0,controlIndex)),_toConsumableArray(controls.slice(controlIndex+1)))};var getDefaultOptions=function getDefaultOptions(type){var defaultOptions={};switch(type){case CONTROL_TYPES.RANGE:defaultOptions.decimalPlaces=0;defaultOptions.step=1;break;case CONTROL_TYPES.LIST:defaultOptions.type="terms";defaultOptions.multiselect=true;defaultOptions.dynamicOptions=true;defaultOptions.size=5;defaultOptions.order="desc";break}return defaultOptions};var newControl=function newControl(type){return{id:(new Date).getTime().toString(),indexPattern:"",fieldName:"",parent:"",label:"",type:type,options:getDefaultOptions(type)}};var getTitle=function getTitle(controlParams,controlIndex){var title="".concat(controlParams.type,": ").concat(controlIndex);if(controlParams.label){title="".concat(controlParams.label)}else if(controlParams.fieldName){title="".concat(controlParams.fieldName)}return title};function FormRow(props){var control=props.children;if(props.disableMsg){control=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:props.disableMsg,anchorClassName:"eui-displayBlock"},control)}var label=props.warningMsg?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:props.warningMsg},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"alert"})),props.label):props.label;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,id:props.id,"data-test-subj":"inputControl"+props.controlIndex},control)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var list_control_ListControlUi=function(_PureComponent){_inherits(ListControlUi,_PureComponent);var _super=_createSuper(ListControlUi);function ListControlUi(props){var _this;_classCallCheck(this,ListControlUi);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"isMounted",false);_defineProperty(_assertThisInitialized(_this),"state",{isLoading:false});_defineProperty(_assertThisInitialized(_this),"textInput",void 0);_defineProperty(_assertThisInitialized(_this),"componentDidMount",(function(){if(_this.textInput){_this.textInput.setAttribute("focusable","false")}_this.isMounted=true}));_defineProperty(_assertThisInitialized(_this),"componentWillUnmount",(function(){_this.isMounted=false}));_defineProperty(_assertThisInitialized(_this),"setTextInputRef",(function(ref){_this.textInput=ref}));_defineProperty(_assertThisInitialized(_this),"handleOnChange",(function(selectedOptions){var selectedValues=selectedOptions.map((function(_ref){var value=_ref.value;return value}));_this.props.stageFilter(_this.props.controlIndex,selectedValues)}));_defineProperty(_assertThisInitialized(_this),"debouncedFetch",external_kbnSharedDeps_Lodash_default.a.debounce(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(searchValue){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!_this.props.fetchOptions){_context.next=3;break}_context.next=3;return _this.props.fetchOptions(searchValue);case 3:if(_this.isMounted){_this.setState({isLoading:false})}case 4:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"onSearchChange",(function(searchValue){_this.setState({isLoading:true},_this.debouncedFetch.bind(null,searchValue))}));_this.textInput=null;return _this}_createClass(ListControlUi,[{key:"renderControl",value:function renderControl(){var _this$props$options,_this2=this;var intl=this.props.intl;if(this.props.disableMsg){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":intl.formatMessage({id:"inputControl.vis.listControl.selectTextPlaceholder",defaultMessage:"Select..."}),placeholder:intl.formatMessage({id:"inputControl.vis.listControl.selectTextPlaceholder",defaultMessage:"Select..."}),disabled:true})}var options=(_this$props$options=this.props.options)===null||_this$props$options===void 0?void 0:_this$props$options.map((function(option){return{label:_this2.props.formatOptionLabel(option).toString(),value:option,["data-test-subj"]:"option_".concat(option.toString().replace(" ","_"))}})).sort((function(a,b){return a.label.toLowerCase().localeCompare(b.label.toLowerCase())}));var selectedOptions=this.props.selectedOptions.map((function(selectedOption){return{label:_this2.props.formatOptionLabel(selectedOption).toString(),value:selectedOption}}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:intl.formatMessage({id:"inputControl.vis.listControl.selectPlaceholder",defaultMessage:"Select..."}),options:options,isLoading:this.state.isLoading,async:this.props.dynamicOptions,onSearchChange:this.props.dynamicOptions?this.onSearchChange:undefined,selectedOptions:selectedOptions,onChange:this.handleOnChange,singleSelection:!this.props.multiselect,"data-test-subj":"listControlSelect".concat(this.props.controlIndex),inputRef:this.setTextInputRef})}},{key:"render",value:function render(){var partialResultsWarningMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.vis.listControl.partialResultsWarningMessage",{defaultMessage:"Terms list might be incomplete because the request is taking too long. "+"Adjust the autocomplete settings in kibana.yml for complete results."});return external_kbnSharedDeps_React_default.a.createElement(FormRow,{id:this.props.id,label:this.props.label,warningMsg:this.props.partialResults?partialResultsWarningMessage:undefined,controlIndex:this.props.controlIndex,disableMsg:this.props.disableMsg},this.renderControl())}}]);return ListControlUi}(external_kbnSharedDeps_React_["PureComponent"]);_defineProperty(list_control_ListControlUi,"defaultProps",{dynamicOptions:false,multiselect:true,selectedOptions:[],options:[]});var list_control_ListControl=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(list_control_ListControlUi);var public_=__webpack_require__(9);function range_control_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function range_control_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function range_control_createClass(Constructor,protoProps,staticProps){if(protoProps)range_control_defineProperties(Constructor.prototype,protoProps);if(staticProps)range_control_defineProperties(Constructor,staticProps);return Constructor}function range_control_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)range_control_setPrototypeOf(subClass,superClass)}function range_control_setPrototypeOf(o,p){range_control_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return range_control_setPrototypeOf(o,p)}function range_control_createSuper(Derived){var hasNativeReflectConstruct=range_control_isNativeReflectConstruct();return function _createSuperInternal(){var Super=range_control_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=range_control_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return range_control_possibleConstructorReturn(this,result)}}function range_control_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return range_control_assertThisInitialized(self)}function range_control_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function range_control_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function range_control_getPrototypeOf(o){range_control_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return range_control_getPrototypeOf(o)}function range_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function roundWithPrecision(value,decimalPlaces,roundFunction){if(decimalPlaces<=0){return roundFunction(value)}var results=value;results=results*Math.pow(10,decimalPlaces);results=roundFunction(results);results=results/Math.pow(10,decimalPlaces);return results}function ceilWithPrecision(value,decimalPlaces){return roundWithPrecision(value,decimalPlaces,Math.ceil)}function floorWithPrecision(value,decimalPlaces){return roundWithPrecision(value,decimalPlaces,Math.floor)}var range_control_RangeControl=function(_PureComponent){range_control_inherits(RangeControl,_PureComponent);var _super=range_control_createSuper(RangeControl);function RangeControl(){var _this;range_control_classCallCheck(this,RangeControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));range_control_defineProperty(range_control_assertThisInitialized(_this),"state",{});range_control_defineProperty(range_control_assertThisInitialized(_this),"onChangeComplete",external_kbnSharedDeps_Lodash_default.a.debounce((function(value){var controlValue={min:value[0],max:value[1]};_this.props.stageFilter(_this.props.controlIndex,controlValue)}),200));return _this}range_control_createClass(RangeControl,[{key:"renderControl",value:function renderControl(){if(!this.props.control.isEnabled()){return external_kbnSharedDeps_React_default.a.createElement(public_["ValidatedDualRange"],{disabled:true,showInput:true})}var decimalPlaces=external_kbnSharedDeps_Lodash_default.a.get(this.props,"control.options.decimalPlaces",0);var min=floorWithPrecision(this.props.control.min,decimalPlaces);var max=ceilWithPrecision(this.props.control.max,decimalPlaces);var ticks=[{value:min,label:min},{value:max,label:max}];return external_kbnSharedDeps_React_default.a.createElement(public_["ValidatedDualRange"],{id:this.props.control.id,min:min,max:max,value:this.state.value,onChange:this.onChangeComplete,showInput:true,showRange:true,showTicks:true,ticks:ticks})}},{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement(FormRow,{id:this.props.control.id,label:this.props.control.label,controlIndex:this.props.controlIndex,disableMsg:this.props.control.isEnabled()?undefined:this.props.control.disabledReason},this.renderControl())}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var nextValue=nextProps.control.hasValue()?[nextProps.control.value.min,nextProps.control.value.max]:["",""];if(nextProps.control.hasValue()&&nextProps.control.value.min==null){nextValue[0]=""}if(nextProps.control.hasValue()&&nextProps.control.value.max==null){nextValue[1]=""}if(nextValue!==prevState.prevValue){return{value:nextValue,prevValue:nextValue}}return null}}]);return RangeControl}(external_kbnSharedDeps_React_["PureComponent"]);function input_control_vis_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function input_control_vis_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function input_control_vis_createClass(Constructor,protoProps,staticProps){if(protoProps)input_control_vis_defineProperties(Constructor.prototype,protoProps);if(staticProps)input_control_vis_defineProperties(Constructor,staticProps);return Constructor}function input_control_vis_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)input_control_vis_setPrototypeOf(subClass,superClass)}function input_control_vis_setPrototypeOf(o,p){input_control_vis_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return input_control_vis_setPrototypeOf(o,p)}function input_control_vis_createSuper(Derived){var hasNativeReflectConstruct=input_control_vis_isNativeReflectConstruct();return function _createSuperInternal(){var Super=input_control_vis_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=input_control_vis_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return input_control_vis_possibleConstructorReturn(this,result)}}function input_control_vis_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return input_control_vis_assertThisInitialized(self)}function input_control_vis_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function input_control_vis_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function input_control_vis_getPrototypeOf(o){input_control_vis_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return input_control_vis_getPrototypeOf(o)}function isListControl(control){return control.type===CONTROL_TYPES.LIST}function isRangeControl(control){return control.type===CONTROL_TYPES.RANGE}var input_control_vis_InputControlVis=function(_Component){input_control_vis_inherits(InputControlVis,_Component);var _super=input_control_vis_createSuper(InputControlVis);function InputControlVis(props){var _this;input_control_vis_classCallCheck(this,InputControlVis);_this=_super.call(this,props);_this.handleSubmit=_this.handleSubmit.bind(input_control_vis_assertThisInitialized(_this));_this.handleReset=_this.handleReset.bind(input_control_vis_assertThisInitialized(_this));_this.handleClearAll=_this.handleClearAll.bind(input_control_vis_assertThisInitialized(_this));return _this}input_control_vis_createClass(InputControlVis,[{key:"handleSubmit",value:function handleSubmit(){this.props.submitFilters()}},{key:"handleReset",value:function handleReset(){this.props.resetControls()}},{key:"handleClearAll",value:function handleClearAll(){this.props.clearControls()}},{key:"renderControls",value:function renderControls(){var _this2=this;return this.props.controls.map((function(control,index){var controlComponent=null;if(isListControl(control)){controlComponent=external_kbnSharedDeps_React_default.a.createElement(list_control_ListControl,{id:control.id,label:control.label,options:control.selectOptions,selectedOptions:control.value,formatOptionLabel:control.format,disableMsg:control.isEnabled()?undefined:control.disabledReason,multiselect:control.options.multiselect,partialResults:control.partialResults,dynamicOptions:control.options.dynamicOptions,controlIndex:index,stageFilter:_this2.props.stageFilter,fetchOptions:function fetchOptions(query){_this2.props.refreshControl(index,query)}})}else if(isRangeControl(control)){controlComponent=external_kbnSharedDeps_React_default.a.createElement(range_control_RangeControl,{control:control,controlIndex:index,stageFilter:_this2.props.stageFilter})}else{throw new Error("Unhandled control type ".concat(control.type))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:control.id,style:{minWidth:"250px"},"data-test-subj":"inputControlItem"},controlComponent)}))}},{key:"renderStagingButtons",value:function renderStagingButtons(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:this.handleSubmit,disabled:!this.props.hasChanges(),"data-test-subj":"inputControlSubmitBtn"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.vis.inputControlVis.applyChangesButtonLabel",defaultMessage:"Apply changes"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this.handleReset,disabled:!this.props.hasChanges(),"data-test-subj":"inputControlCancelBtn"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.vis.inputControlVis.cancelChangesButtonLabel",defaultMessage:"Cancel changes"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this.handleClearAll,disabled:!this.props.hasValues(),"data-test-subj":"inputControlClearBtn"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.vis.inputControlVis.clearFormButtonLabel",defaultMessage:"Clear form"}))))}},{key:"render",value:function render(){var stagingButtons;if(this.props.controls.length>0&&!this.props.updateFiltersOnChange){stagingButtons=this.renderStagingButtons()}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"icvContainer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{wrap:true},this.renderControls()),stagingButtons)}}]);return InputControlVis}(external_kbnSharedDeps_React_["Component"]);function control_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function control_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function control_createClass(Constructor,protoProps,staticProps){if(protoProps)control_defineProperties(Constructor.prototype,protoProps);if(staticProps)control_defineProperties(Constructor,staticProps);return Constructor}function control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function noValuesDisableMsg(fieldName,indexPatternName){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.control.noValuesDisableTooltip",{defaultMessage:'Filtering occurs on the "{fieldName}" field, which doesn\'t exist on any documents in the "{indexPatternName}" index pattern. Choose a different field or index documents that contain values for this field.',values:{fieldName:fieldName,indexPatternName:indexPatternName}})}function noIndexPatternMsg(indexPatternId){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.control.noIndexPatternTooltip",{defaultMessage:"Could not locate index-pattern id: {indexPatternId}.",values:{indexPatternId:indexPatternId}})}var control_Control=function(){function Control(controlParams,filterManager,useTimeFilter){var _this=this;control_classCallCheck(this,Control);this.controlParams=controlParams;this.filterManager=filterManager;this.useTimeFilter=useTimeFilter;control_defineProperty(this,"kbnFilter",null);control_defineProperty(this,"enable",false);control_defineProperty(this,"disabledReason","");control_defineProperty(this,"value",void 0);control_defineProperty(this,"id",void 0);control_defineProperty(this,"options",void 0);control_defineProperty(this,"type",void 0);control_defineProperty(this,"label",void 0);control_defineProperty(this,"ancestors",[]);control_defineProperty(this,"format",(function(value){var indexPattern=_this.filterManager.getIndexPattern();var field=_this.filterManager.getField();if(field){return indexPattern.getFormatterForField(field).convert(value)}return value}));this.id=controlParams.id;this.controlParams=controlParams;this.options=controlParams.options;this.type=controlParams.type;this.label=controlParams.label?controlParams.label:controlParams.fieldName;this.reset();this.disable(external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.control.notInitializedTooltip",{defaultMessage:"Control has not been initialized"}))}control_createClass(Control,[{key:"setAncestors",value:function setAncestors(ancestors){this.ancestors=ancestors}},{key:"hasAncestors",value:function hasAncestors(){return this.ancestors&&this.ancestors.length>0}},{key:"hasUnsetAncestor",value:function hasUnsetAncestor(){return this.ancestors.reduce((function(accumulator,ancestor){return accumulator||!ancestor.hasValue()}),false)}},{key:"getAncestorValues",value:function getAncestorValues(){return this.ancestors.map((function(ancestor){return ancestor.value}))}},{key:"getAncestorFilters",value:function getAncestorFilters(){return this.ancestors.map((function(ancestor){return ancestor.filterManager.createFilter(ancestor.value)}))}},{key:"isEnabled",value:function isEnabled(){return this.enable}},{key:"disable",value:function disable(reason){this.enable=false;this.disabledReason=reason}},{key:"set",value:function set(newValue){this.value=newValue;if(this.hasValue()){this.kbnFilter=this.filterManager.createFilter(this.value)}else{this.kbnFilter=null}}},{key:"reset",value:function reset(){this.kbnFilter=null;this.value=this.filterManager.getValueFromFilterBar()}},{key:"clear",value:function clear(){this.value=undefined}},{key:"hasChanged",value:function hasChanged(){return!external_kbnSharedDeps_Lodash_default.a.isEqual(this.value,this.filterManager.getValueFromFilterBar())}},{key:"hasKbnFilter",value:function hasKbnFilter(){if(this.kbnFilter){return true}return false}},{key:"getKbnFilter",value:function getKbnFilter(){return this.kbnFilter}},{key:"hasValue",value:function hasValue(){return this.value!==undefined}}]);return Control}();function filter_manager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function filter_manager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function filter_manager_createClass(Constructor,protoProps,staticProps){if(protoProps)filter_manager_defineProperties(Constructor.prototype,protoProps);if(staticProps)filter_manager_defineProperties(Constructor,staticProps);return Constructor}var filter_manager_FilterManager=function(){function FilterManager(controlId,fieldName,indexPattern,queryFilter){filter_manager_classCallCheck(this,FilterManager);this.controlId=controlId;this.fieldName=fieldName;this.indexPattern=indexPattern;this.queryFilter=queryFilter}filter_manager_createClass(FilterManager,[{key:"getIndexPattern",value:function getIndexPattern(){return this.indexPattern}},{key:"getField",value:function getField(){return this.indexPattern.fields.getByName(this.fieldName)}},{key:"findFilters",value:function findFilters(){var _this=this;var kbnFilters=external_kbnSharedDeps_Lodash_default.a.flatten([this.queryFilter.getAppFilters(),this.queryFilter.getGlobalFilters()]);return kbnFilters.filter((function(kbnFilter){return external_kbnSharedDeps_Lodash_default.a.get(kbnFilter,"meta.controlledBy")===_this.controlId}))}}]);return FilterManager}();var data_public_=__webpack_require__(5);function range_filter_manager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function range_filter_manager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function range_filter_manager_createClass(Constructor,protoProps,staticProps){if(protoProps)range_filter_manager_defineProperties(Constructor.prototype,protoProps);if(staticProps)range_filter_manager_defineProperties(Constructor,staticProps);return Constructor}function range_filter_manager_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)range_filter_manager_setPrototypeOf(subClass,superClass)}function range_filter_manager_setPrototypeOf(o,p){range_filter_manager_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return range_filter_manager_setPrototypeOf(o,p)}function range_filter_manager_createSuper(Derived){var hasNativeReflectConstruct=range_filter_manager_isNativeReflectConstruct();return function _createSuperInternal(){var Super=range_filter_manager_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=range_filter_manager_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return range_filter_manager_possibleConstructorReturn(this,result)}}function range_filter_manager_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return range_filter_manager_assertThisInitialized(self)}function range_filter_manager_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function range_filter_manager_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function range_filter_manager_getPrototypeOf(o){range_filter_manager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return range_filter_manager_getPrototypeOf(o)}function toRange(sliderValue){return{gte:sliderValue.min,lte:sliderValue.max}}function fromRange(range){var sliderValue={};if(external_kbnSharedDeps_Lodash_default.a.has(range,"gte")){sliderValue.min=external_kbnSharedDeps_Lodash_default.a.get(range,"gte")}if(external_kbnSharedDeps_Lodash_default.a.has(range,"gt")){sliderValue.min=external_kbnSharedDeps_Lodash_default.a.get(range,"gt")}if(external_kbnSharedDeps_Lodash_default.a.has(range,"lte")){sliderValue.max=external_kbnSharedDeps_Lodash_default.a.get(range,"lte")}if(external_kbnSharedDeps_Lodash_default.a.has(range,"lt")){sliderValue.max=external_kbnSharedDeps_Lodash_default.a.get(range,"lt")}return sliderValue}var range_filter_manager_RangeFilterManager=function(_FilterManager){range_filter_manager_inherits(RangeFilterManager,_FilterManager);var _super=range_filter_manager_createSuper(RangeFilterManager);function RangeFilterManager(){range_filter_manager_classCallCheck(this,RangeFilterManager);return _super.apply(this,arguments)}range_filter_manager_createClass(RangeFilterManager,[{key:"createFilter",value:function createFilter(value){var newFilter=data_public_["esFilters"].buildRangeFilter(this.indexPattern.fields.getByName(this.fieldName),toRange(value),this.indexPattern);newFilter.meta.key=this.fieldName;newFilter.meta.controlledBy=this.controlId;return newFilter}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){var kbnFilters=this.findFilters();if(kbnFilters.length===0){return}var range;if(external_kbnSharedDeps_Lodash_default.a.has(kbnFilters[0],"script")){range=external_kbnSharedDeps_Lodash_default.a.get(kbnFilters[0],"script.script.params")}else{range=external_kbnSharedDeps_Lodash_default.a.get(kbnFilters[0],["range",this.fieldName])}if(!range){return}return fromRange(range)}}]);return RangeFilterManager}(filter_manager_FilterManager);function create_search_source_toConsumableArray(arr){return create_search_source_arrayWithoutHoles(arr)||create_search_source_iterableToArray(arr)||create_search_source_unsupportedIterableToArray(arr)||create_search_source_nonIterableSpread()}function create_search_source_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function create_search_source_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return create_search_source_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return create_search_source_arrayLikeToArray(o,minLen)}function create_search_source_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function create_search_source_arrayWithoutHoles(arr){if(Array.isArray(arr))return create_search_source_arrayLikeToArray(arr)}function create_search_source_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function create_search_source_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function create_search_source_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){create_search_source_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){create_search_source_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function createSearchSource(_x,_x2,_x3,_x4,_x5){return _createSearchSource.apply(this,arguments)}function _createSearchSource(){_createSearchSource=create_search_source_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref,initialState,indexPattern,aggs,useTimeFilter){var create,filters,timefilter,searchSource,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:create=_ref.create;filters=_args.length>5&&_args[5]!==undefined?_args[5]:[];timefilter=_args.length>6?_args[6]:undefined;_context.next=5;return create(initialState||{});case 5:searchSource=_context.sent;searchSource.setParent(undefined);searchSource.setField("filter",(function(){var activeFilters=create_search_source_toConsumableArray(filters);if(useTimeFilter){var filter=timefilter.createFilter(indexPattern);if(filter){activeFilters.push(filter)}}return activeFilters}));searchSource.setField("size",0);searchSource.setField("index",indexPattern);searchSource.setField("aggs",aggs);return _context.abrupt("return",searchSource);case 12:case"end":return _context.stop()}}}),_callee)})));return _createSearchSource.apply(this,arguments)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||range_control_factory_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function range_control_factory_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return range_control_factory_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return range_control_factory_arrayLikeToArray(o,minLen)}function range_control_factory_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function range_control_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function range_control_factory_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){range_control_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){range_control_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function range_control_factory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function range_control_factory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function range_control_factory_createClass(Constructor,protoProps,staticProps){if(protoProps)range_control_factory_defineProperties(Constructor.prototype,protoProps);if(staticProps)range_control_factory_defineProperties(Constructor,staticProps);return Constructor}function range_control_factory_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)range_control_factory_setPrototypeOf(subClass,superClass)}function range_control_factory_setPrototypeOf(o,p){range_control_factory_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return range_control_factory_setPrototypeOf(o,p)}function range_control_factory_createSuper(Derived){var hasNativeReflectConstruct=range_control_factory_isNativeReflectConstruct();return function _createSuperInternal(){var Super=range_control_factory_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=range_control_factory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return range_control_factory_possibleConstructorReturn(this,result)}}function range_control_factory_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return range_control_factory_assertThisInitialized(self)}function range_control_factory_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function range_control_factory_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function range_control_factory_getPrototypeOf(o){range_control_factory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return range_control_factory_getPrototypeOf(o)}function range_control_factory_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var minMaxAgg=function minMaxAgg(field){var aggBody={};if(field){if(field.scripted){aggBody.script={source:field.script,lang:field.lang}}else{aggBody.field=field.name}}return{maxAgg:{max:aggBody},minAgg:{min:aggBody}}};var range_control_factory_RangeControl=function(_Control){range_control_factory_inherits(RangeControl,_Control);var _super=range_control_factory_createSuper(RangeControl);function RangeControl(controlParams,filterManager,useTimeFilter,searchSource,deps){var _this;range_control_factory_classCallCheck(this,RangeControl);_this=_super.call(this,controlParams,filterManager,useTimeFilter);range_control_factory_defineProperty(range_control_factory_assertThisInitialized(_this),"searchSource",void 0);range_control_factory_defineProperty(range_control_factory_assertThisInitialized(_this),"timefilter",void 0);range_control_factory_defineProperty(range_control_factory_assertThisInitialized(_this),"abortController",void 0);range_control_factory_defineProperty(range_control_factory_assertThisInitialized(_this),"min",void 0);range_control_factory_defineProperty(range_control_factory_assertThisInitialized(_this),"max",void 0);_this.timefilter=deps.data.query.timefilter.timefilter;_this.searchSource=searchSource;return _this}range_control_factory_createClass(RangeControl,[{key:"fetch",value:function(){var _fetch=range_control_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var indexPattern,fieldName,aggs,searchSource,abortSignal,resp,min,max;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.abortController){this.abortController.abort()}this.abortController=new AbortController;indexPattern=this.filterManager.getIndexPattern();if(indexPattern){_context.next=6;break}this.disable(noIndexPatternMsg(this.controlParams.indexPattern));return _context.abrupt("return");case 6:fieldName=this.filterManager.fieldName;aggs=minMaxAgg(indexPattern.fields.getByName(fieldName));_context.next=10;return createSearchSource(this.searchSource,null,indexPattern,aggs,this.useTimeFilter,[],this.timefilter);case 10:searchSource=_context.sent;abortSignal=this.abortController.signal;_context.prev=12;_context.next=15;return searchSource.fetch({abortSignal:abortSignal});case 15:resp=_context.sent;_context.next=24;break;case 18:_context.prev=18;_context.t0=_context["catch"](12);if(!(_context.t0.name==="AbortError")){_context.next=22;break}return _context.abrupt("return");case 22:this.disable(external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.rangeControl.unableToFetchTooltip",{defaultMessage:"Unable to fetch range min and max, error: {errorMessage}",values:{errorMessage:_context.t0.message}}));return _context.abrupt("return");case 24:min=external_kbnSharedDeps_Lodash_default.a.get(resp,"aggregations.minAgg.value",null);max=external_kbnSharedDeps_Lodash_default.a.get(resp,"aggregations.maxAgg.value",null);if(!(min===null||max===null)){_context.next=29;break}this.disable(noValuesDisableMsg(fieldName,indexPattern.title));return _context.abrupt("return");case 29:this.min=min;this.max=max;this.enable=true;case 32:case"end":return _context.stop()}}}),_callee,this,[[12,18]])})));function fetch(){return _fetch.apply(this,arguments)}return fetch}()},{key:"destroy",value:function destroy(){if(this.abortController)this.abortController.abort()}}]);return RangeControl}(control_Control);function rangeControlFactory(_x,_x2,_x3){return _rangeControlFactory.apply(this,arguments)}function _rangeControlFactory(){_rangeControlFactory=range_control_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee2(controlParams,useTimeFilter,deps){var _yield$deps$core$getS,_yield$deps$core$getS2,dataPluginStart,indexPattern;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return deps.core.getStartServices();case 2:_yield$deps$core$getS=_context2.sent;_yield$deps$core$getS2=_slicedToArray(_yield$deps$core$getS,2);dataPluginStart=_yield$deps$core$getS2[1].data;_context2.next=7;return dataPluginStart.indexPatterns.get(controlParams.indexPattern);case 7:indexPattern=_context2.sent;return _context2.abrupt("return",new range_control_factory_RangeControl(controlParams,new range_filter_manager_RangeFilterManager(controlParams.id,controlParams.fieldName,indexPattern,deps.data.query.filterManager),useTimeFilter,dataPluginStart.search.searchSource,deps));case 9:case"end":return _context2.stop()}}}),_callee2)})));return _rangeControlFactory.apply(this,arguments)}function phrase_filter_manager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function phrase_filter_manager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function phrase_filter_manager_createClass(Constructor,protoProps,staticProps){if(protoProps)phrase_filter_manager_defineProperties(Constructor.prototype,protoProps);if(staticProps)phrase_filter_manager_defineProperties(Constructor,staticProps);return Constructor}function phrase_filter_manager_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)phrase_filter_manager_setPrototypeOf(subClass,superClass)}function phrase_filter_manager_setPrototypeOf(o,p){phrase_filter_manager_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return phrase_filter_manager_setPrototypeOf(o,p)}function phrase_filter_manager_createSuper(Derived){var hasNativeReflectConstruct=phrase_filter_manager_isNativeReflectConstruct();return function _createSuperInternal(){var Super=phrase_filter_manager_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=phrase_filter_manager_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return phrase_filter_manager_possibleConstructorReturn(this,result)}}function phrase_filter_manager_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return phrase_filter_manager_assertThisInitialized(self)}function phrase_filter_manager_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function phrase_filter_manager_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function phrase_filter_manager_getPrototypeOf(o){phrase_filter_manager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return phrase_filter_manager_getPrototypeOf(o)}var phrase_filter_manager_PhraseFilterManager=function(_FilterManager){phrase_filter_manager_inherits(PhraseFilterManager,_FilterManager);var _super=phrase_filter_manager_createSuper(PhraseFilterManager);function PhraseFilterManager(controlId,fieldName,indexPattern,queryFilter){phrase_filter_manager_classCallCheck(this,PhraseFilterManager);return _super.call(this,controlId,fieldName,indexPattern,queryFilter)}phrase_filter_manager_createClass(PhraseFilterManager,[{key:"createFilter",value:function createFilter(phrases){var newFilter;var value=this.indexPattern.fields.getByName(this.fieldName);if(!value){throw new Error("Unable to find field with name: ".concat(this.fieldName," on indexPattern"))}if(phrases.length===1){newFilter=data_public_["esFilters"].buildPhraseFilter(value,phrases[0],this.indexPattern)}else{newFilter=data_public_["esFilters"].buildPhrasesFilter(value,phrases,this.indexPattern)}newFilter.meta.key=this.fieldName;newFilter.meta.controlledBy=this.controlId;return newFilter}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){var _this=this;var kbnFilters=this.findFilters();if(kbnFilters.length===0){return}var values=kbnFilters.map((function(kbnFilter){return _this.getValueFromFilter(kbnFilter)})).filter((function(value){return value!=null}));if(values.length===0){return}return values.reduce((function(accumulator,currentValue){return accumulator.concat(currentValue)}),[])}},{key:"getValueFromFilter",value:function getValueFromFilter(kbnFilter){var _this2=this;if(external_kbnSharedDeps_Lodash_default.a.has(kbnFilter,"query.bool.should")){return external_kbnSharedDeps_Lodash_default.a.get(kbnFilter,"query.bool.should").map((function(kbnQueryFilter){return _this2.getValueFromFilter(kbnQueryFilter)})).filter((function(value){if(value){return true}return false}))}if(external_kbnSharedDeps_Lodash_default.a.has(kbnFilter,"script")){return external_kbnSharedDeps_Lodash_default.a.get(kbnFilter,"script.script.params.value")}if(data_public_["esFilters"].isPhraseFilter(kbnFilter)){if(data_public_["esFilters"].getPhraseFilterField(kbnFilter)!==this.fieldName){return}return data_public_["esFilters"].getPhraseFilterValue(kbnFilter)}if(external_kbnSharedDeps_Lodash_default.a.has(kbnFilter,["match_phrase",this.fieldName])){return external_kbnSharedDeps_Lodash_default.a.get(kbnFilter,["match_phrase",this.fieldName])}}}]);return PhraseFilterManager}(filter_manager_FilterManager);function list_control_factory_slicedToArray(arr,i){return list_control_factory_arrayWithHoles(arr)||list_control_factory_iterableToArrayLimit(arr,i)||list_control_factory_unsupportedIterableToArray(arr,i)||list_control_factory_nonIterableRest()}function list_control_factory_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function list_control_factory_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return list_control_factory_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return list_control_factory_arrayLikeToArray(o,minLen)}function list_control_factory_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function list_control_factory_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function list_control_factory_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function list_control_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function list_control_factory_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){list_control_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){list_control_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function list_control_factory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function list_control_factory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function list_control_factory_createClass(Constructor,protoProps,staticProps){if(protoProps)list_control_factory_defineProperties(Constructor.prototype,protoProps);if(staticProps)list_control_factory_defineProperties(Constructor,staticProps);return Constructor}function list_control_factory_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)list_control_factory_setPrototypeOf(subClass,superClass)}function list_control_factory_setPrototypeOf(o,p){list_control_factory_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return list_control_factory_setPrototypeOf(o,p)}function list_control_factory_createSuper(Derived){var hasNativeReflectConstruct=list_control_factory_isNativeReflectConstruct();return function _createSuperInternal(){var Super=list_control_factory_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=list_control_factory_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return list_control_factory_possibleConstructorReturn(this,result)}}function list_control_factory_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return list_control_factory_assertThisInitialized(self)}function list_control_factory_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function list_control_factory_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function list_control_factory_getPrototypeOf(o){list_control_factory_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return list_control_factory_getPrototypeOf(o)}function list_control_factory_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getEscapedQuery(){var query=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return query.replace(/[.?+*|{}[\]()"\\#@&<>~]/g,(function(match){return"\\".concat(match)}))}var termsAgg=function termsAgg(_ref){var field=_ref.field,size=_ref.size,direction=_ref.direction,query=_ref.query;var terms={order:{_count:direction}};if(size){terms.size=size<1?1:size}if(field===null||field===void 0?void 0:field.scripted){terms.script={source:field.script,lang:field.lang};terms.value_type=field.type==="number"?"float":field.type}else{terms.field=field===null||field===void 0?void 0:field.name}if(query){terms.include=".*".concat(getEscapedQuery(query),".*")}return{termsAgg:{terms:terms}}};var list_control_factory_ListControl=function(_Control){list_control_factory_inherits(ListControl,_Control);var _super=list_control_factory_createSuper(ListControl);function ListControl(controlParams,filterManager,useTimeFilter,_searchSource,deps){var _this;list_control_factory_classCallCheck(this,ListControl);_this=_super.call(this,controlParams,filterManager,useTimeFilter);list_control_factory_defineProperty(list_control_factory_assertThisInitialized(_this),"getSettings",void 0);list_control_factory_defineProperty(list_control_factory_assertThisInitialized(_this),"timefilter",void 0);list_control_factory_defineProperty(list_control_factory_assertThisInitialized(_this),"searchSource",void 0);list_control_factory_defineProperty(list_control_factory_assertThisInitialized(_this),"abortController",void 0);list_control_factory_defineProperty(list_control_factory_assertThisInitialized(_this),"lastAncestorValues",void 0);list_control_factory_defineProperty(list_control_factory_assertThisInitialized(_this),"lastQuery",void 0);list_control_factory_defineProperty(list_control_factory_assertThisInitialized(_this),"partialResults",void 0);list_control_factory_defineProperty(list_control_factory_assertThisInitialized(_this),"selectOptions",void 0);list_control_factory_defineProperty(list_control_factory_assertThisInitialized(_this),"fetch",function(){var _ref2=list_control_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee(query){var indexPattern,ancestorFilters,ancestorValues,fieldName,settings,initialSearchSourceState,aggs,searchSource,abortSignal,resp,selectOptions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.abortController){_this.abortController.abort()}_this.abortController=new AbortController;indexPattern=_this.filterManager.getIndexPattern();if(indexPattern){_context.next=6;break}_this.disable(noIndexPatternMsg(_this.controlParams.indexPattern));return _context.abrupt("return");case 6:if(!_this.hasAncestors()){_context.next=17;break}if(!_this.hasUnsetAncestor()){_context.next=11;break}_this.disable(external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.listControl.disableTooltip",{defaultMessage:"Disabled until '{label}' is set.",values:{label:_this.ancestors[0].label}}));_this.lastAncestorValues=undefined;return _context.abrupt("return");case 11:ancestorValues=_this.getAncestorValues();if(!(external_kbnSharedDeps_Lodash_default.a.isEqual(ancestorValues,_this.lastAncestorValues)&&external_kbnSharedDeps_Lodash_default.a.isEqual(query,_this.lastQuery))){_context.next=14;break}return _context.abrupt("return");case 14:_this.lastAncestorValues=ancestorValues;_this.lastQuery=query;ancestorFilters=_this.getAncestorFilters();case 17:fieldName=_this.filterManager.fieldName;_context.next=20;return _this.getSettings();case 20:settings=_context.sent;initialSearchSourceState={timeout:"".concat(settings.autocompleteTimeout,"ms"),terminate_after:Number(settings.autocompleteTerminateAfter)};aggs=termsAgg({field:indexPattern.fields.getByName(fieldName),size:_this.options.dynamicOptions?null:external_kbnSharedDeps_Lodash_default.a.get(_this.options,"size",5),direction:"desc",query:query});_context.next=25;return createSearchSource(_this.searchSource,initialSearchSourceState,indexPattern,aggs,_this.useTimeFilter,ancestorFilters,_this.timefilter);case 25:searchSource=_context.sent;abortSignal=_this.abortController.signal;_this.lastQuery=query;_context.prev=28;_context.next=31;return searchSource.fetch({abortSignal:abortSignal});case 31:resp=_context.sent;_context.next=40;break;case 34:_context.prev=34;_context.t0=_context["catch"](28);if(!(_context.t0.name==="AbortError")){_context.next=38;break}return _context.abrupt("return");case 38:_this.disable(external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.listControl.unableToFetchTooltip",{defaultMessage:"Unable to fetch terms, error: {errorMessage}",values:{errorMessage:_context.t0.message}}));return _context.abrupt("return");case 40:if(!(query&&_this.lastQuery!==query)){_context.next=42;break}return _context.abrupt("return");case 42:selectOptions=external_kbnSharedDeps_Lodash_default.a.get(resp,"aggregations.termsAgg.buckets",[]).map((function(bucket){return bucket===null||bucket===void 0?void 0:bucket.key}));if(!(selectOptions.length===0&&!query)){_context.next=46;break}_this.disable(noValuesDisableMsg(fieldName,indexPattern.title));return _context.abrupt("return");case 46:_this.partialResults=resp.terminated_early||resp.timed_out;_this.selectOptions=selectOptions;_this.enable=true;_this.disabledReason="";case 50:case"end":return _context.stop()}}}),_callee,null,[[28,34]])})));return function(_x){return _ref2.apply(this,arguments)}}());_this.getSettings=deps.getSettings;_this.timefilter=deps.data.query.timefilter.timefilter;_this.searchSource=_searchSource;return _this}list_control_factory_createClass(ListControl,[{key:"destroy",value:function destroy(){if(this.abortController)this.abortController.abort()}},{key:"hasValue",value:function hasValue(){return typeof this.value!=="undefined"&&this.value.length>0}}]);return ListControl}(control_Control);function listControlFactory(_x2,_x3,_x4){return _listControlFactory.apply(this,arguments)}function _listControlFactory(){_listControlFactory=list_control_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee2(controlParams,useTimeFilter,deps){var _yield$deps$core$getS,_yield$deps$core$getS2,dataPluginStart,indexPattern,field,listControl;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return deps.core.getStartServices();case 2:_yield$deps$core$getS=_context2.sent;_yield$deps$core$getS2=list_control_factory_slicedToArray(_yield$deps$core$getS,2);dataPluginStart=_yield$deps$core$getS2[1].data;_context2.next=7;return dataPluginStart.indexPatterns.get(controlParams.indexPattern);case 7:indexPattern=_context2.sent;field=indexPattern.fields.getAll().find((function(_ref3){var name=_ref3.name;return name===controlParams.fieldName}));if(field&&field.type!=="string"){controlParams.options.dynamicOptions=false}listControl=new list_control_factory_ListControl(controlParams,new phrase_filter_manager_PhraseFilterManager(controlParams.id,controlParams.fieldName,indexPattern,deps.data.query.filterManager),useTimeFilter,dataPluginStart.search.searchSource,deps);return _context2.abrupt("return",listControl);case 12:case"end":return _context2.stop()}}}),_callee2)})));return _listControlFactory.apply(this,arguments)}function getControlFactory(controlParams){var factory=null;switch(controlParams.type){case CONTROL_TYPES.RANGE:factory=rangeControlFactory;break;case CONTROL_TYPES.LIST:factory=listControlFactory;break;default:throw new Error("Unhandled control type ".concat(controlParams.type))}return factory}function getLineageMap(controlParamsList){function getControlParamsById(controlId){return controlParamsList.find((function(controlParams){return controlParams.id===controlId}))}var lineageMap=new Map;controlParamsList.forEach((function(rootControlParams){var lineage=[rootControlParams.id];var getLineage=function getLineage(controlParams){if(external_kbnSharedDeps_Lodash_default.a.has(controlParams,"parent")&&controlParams.parent!==""&&!lineage.includes(controlParams.parent)){lineage.push(controlParams.parent);var parent=getControlParamsById(controlParams.parent);if(parent){getLineage(parent)}}};getLineage(rootControlParams);lineageMap.set(rootControlParams.id,lineage)}));return lineageMap}function getParentCandidates(controlParamsList,controlId,lineageMap){return controlParamsList.filter((function(controlParams){if(!controlParams.indexPattern||!controlParams.fieldName){return false}var lineage=lineageMap.get(controlParams.id);if(lineage===null||lineage===void 0?void 0:lineage.includes(controlId)){return false}return true})).map((function(controlParams,controlIndex){return{value:controlParams.id,text:getTitle(controlParams,controlIndex)}}))}function vis_controller_slicedToArray(arr,i){return vis_controller_arrayWithHoles(arr)||vis_controller_iterableToArrayLimit(arr,i)||vis_controller_unsupportedIterableToArray(arr,i)||vis_controller_nonIterableRest()}function vis_controller_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vis_controller_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return vis_controller_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vis_controller_arrayLikeToArray(o,minLen)}function vis_controller_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function vis_controller_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function vis_controller_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function vis_controller_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function vis_controller_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){vis_controller_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){vis_controller_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function vis_controller_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function vis_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function vis_controller_createClass(Constructor,protoProps,staticProps){if(protoProps)vis_controller_defineProperties(Constructor.prototype,protoProps);if(staticProps)vis_controller_defineProperties(Constructor,staticProps);return Constructor}function vis_controller_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var vis_controller_createInputControlVisController=function createInputControlVisController(deps){var _temp;return _temp=function(){function InputControlVisController(el,vis){var _this=this;vis_controller_classCallCheck(this,InputControlVisController);this.el=el;this.vis=vis;vis_controller_defineProperty(this,"I18nContext",void 0);vis_controller_defineProperty(this,"_isLoaded",false);vis_controller_defineProperty(this,"controls",void 0);vis_controller_defineProperty(this,"queryBarUpdateHandler",void 0);vis_controller_defineProperty(this,"filterManager",void 0);vis_controller_defineProperty(this,"updateSubsciption",void 0);vis_controller_defineProperty(this,"timeFilterSubscription",void 0);vis_controller_defineProperty(this,"visParams",void 0);vis_controller_defineProperty(this,"drawVis",(function(){var _this$visParams;if(!_this.I18nContext){throw new Error("no i18n context found")}Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(_this.I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(input_control_vis_InputControlVis,{updateFiltersOnChange:(_this$visParams=_this.visParams)===null||_this$visParams===void 0?void 0:_this$visParams.updateFiltersOnChange,controls:_this.controls,stageFilter:_this.stageFilter,submitFilters:_this.submitFilters,resetControls:_this.updateControlsFromKbn,clearControls:_this.clearControls,hasChanges:_this.hasChanges,hasValues:_this.hasValues,refreshControl:_this.refreshControl})),_this.el)}));vis_controller_defineProperty(this,"stageFilter",function(){var _ref=vis_controller_asyncToGenerator(regeneratorRuntime.mark((function _callee(controlIndex,newValue){var _this$visParams2;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.controls[controlIndex].set(newValue);if(!((_this$visParams2=_this.visParams)===null||_this$visParams2===void 0?void 0:_this$visParams2.updateFiltersOnChange)){_context.next=5;break}_this.submitFilters();_context.next=8;break;case 5:_context.next=7;return _this.updateNestedControls();case 7:_this.drawVis();case 8:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2){return _ref.apply(this,arguments)}}());vis_controller_defineProperty(this,"submitFilters",(function(){var _this$visParams3;var stagedControls=_this.controls.filter((function(control){return control.hasChanged()}));var newFilters=stagedControls.map((function(control){return control.getKbnFilter()})).filter((function(filter){return filter!==null}));stagedControls.forEach((function(control){control.filterManager.findFilters().forEach((function(existingFilter){_this.filterManager.removeFilter(existingFilter)}))}));_this.controls.map((function(control){if(control.hasAncestors()&&control.hasUnsetAncestor()){control.filterManager.findFilters().forEach((function(existingFilter){_this.filterManager.removeFilter(existingFilter)}))}}));_this.filterManager.addFilters(newFilters,(_this$visParams3=_this.visParams)===null||_this$visParams3===void 0?void 0:_this$visParams3.pinFilters)}));vis_controller_defineProperty(this,"clearControls",vis_controller_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.controls.forEach((function(control){control.clear()}));_context2.next=3;return _this.updateNestedControls();case 3:_this.drawVis();case 4:case"end":return _context2.stop()}}}),_callee2)}))));vis_controller_defineProperty(this,"updateControlsFromKbn",vis_controller_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.controls.forEach((function(control){control.reset()}));_context3.next=3;return _this.updateNestedControls();case 3:_this.drawVis();case 4:case"end":return _context3.stop()}}}),_callee3)}))));vis_controller_defineProperty(this,"hasChanges",(function(){return _this.controls.map((function(control){return control.hasChanged()})).some((function(control){return control}))}));vis_controller_defineProperty(this,"hasValues",(function(){return _this.controls.map((function(control){return control.hasValue()})).reduce((function(a,b){return a||b}))}));vis_controller_defineProperty(this,"refreshControl",function(){var _ref4=vis_controller_asyncToGenerator(regeneratorRuntime.mark((function _callee4(controlIndex,query){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.controls[controlIndex].fetch(query);case 2:_this.drawVis();case 3:case"end":return _context4.stop()}}}),_callee4)})));return function(_x3,_x4){return _ref4.apply(this,arguments)}}());this.controls=[];this.queryBarUpdateHandler=this.updateControlsFromKbn.bind(this);this.filterManager=deps.data.query.filterManager;this.updateSubsciption=this.filterManager.getUpdates$().subscribe(this.queryBarUpdateHandler);this.timeFilterSubscription=deps.data.query.timefilter.timefilter.getTimeUpdate$().subscribe((function(){var _this$visParams4;if((_this$visParams4=_this.visParams)===null||_this$visParams4===void 0?void 0:_this$visParams4.useTimeFilter){_this._isLoaded=false}}))}vis_controller_createClass(InputControlVisController,[{key:"render",value:function(){var _render=vis_controller_asyncToGenerator(regeneratorRuntime.mark((function _callee5(visData,visParams){var _yield$deps$core$getS,_yield$deps$core$getS2,i18n;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(this.I18nContext){_context5.next=7;break}_context5.next=3;return deps.core.getStartServices();case 3:_yield$deps$core$getS=_context5.sent;_yield$deps$core$getS2=vis_controller_slicedToArray(_yield$deps$core$getS,1);i18n=_yield$deps$core$getS2[0].i18n;this.I18nContext=i18n.Context;case 7:if(!(!this._isLoaded||!Object(external_kbnSharedDeps_Lodash_["isEqual"])(visParams,this.visParams))){_context5.next=14;break}this.visParams=visParams;this.controls=[];_context5.next=12;return this.initControls();case 12:this.controls=_context5.sent;this._isLoaded=true;case 14:this.drawVis();case 15:case"end":return _context5.stop()}}}),_callee5,this)})));function render(_x5,_x6){return _render.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){this.updateSubsciption.unsubscribe();this.timeFilterSubscription.unsubscribe();Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(this.el);this.controls.forEach((function(control){return control.destroy()}))}},{key:"initControls",value:function(){var _initControls=vis_controller_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var _this$visParams5,_this$visParams5$cont,_this2=this;var controlParamsList,controlFactoryPromises,controls,getControl,controlInitPromises;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:controlParamsList=(_this$visParams5=this.visParams)===null||_this$visParams5===void 0?void 0:(_this$visParams5$cont=_this$visParams5.controls)===null||_this$visParams5$cont===void 0?void 0:_this$visParams5$cont.filter((function(controlParams){return controlParams.indexPattern&&controlParams.fieldName}));controlFactoryPromises=controlParamsList.map((function(controlParams){var _this2$visParams;var factory=getControlFactory(controlParams);return factory(controlParams,(_this2$visParams=_this2.visParams)===null||_this2$visParams===void 0?void 0:_this2$visParams.useTimeFilter,deps)}));_context6.next=4;return Promise.all(controlFactoryPromises);case 4:controls=_context6.sent;getControl=function getControl(controlId){return controls.find((function(_ref5){var id=_ref5.id;return id===controlId}))};controlInitPromises=[];getLineageMap(controlParamsList).forEach((function(lineage,controlId){lineage.shift();var ancestors=[];lineage.forEach((function(ancestorId){var control=getControl(ancestorId);if(control){ancestors.push(control)}}));var control=getControl(controlId);if(control){control.setAncestors(ancestors);controlInitPromises.push(control.fetch())}}));_context6.next=10;return Promise.all(controlInitPromises);case 10:return _context6.abrupt("return",controls);case 11:case"end":return _context6.stop()}}}),_callee6,this)})));function initControls(){return _initControls.apply(this,arguments)}return initControls}()},{key:"updateNestedControls",value:function(){var _updateNestedControls=vis_controller_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var fetchPromises;return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:fetchPromises=this.controls.map(function(){var _ref6=vis_controller_asyncToGenerator(regeneratorRuntime.mark((function _callee7(control){return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!control.hasAncestors()){_context7.next=3;break}_context7.next=3;return control.fetch();case 3:case"end":return _context7.stop()}}}),_callee7)})));return function(_x7){return _ref6.apply(this,arguments)}}());_context8.next=3;return Promise.all(fetchPromises);case 3:return _context8.abrupt("return",_context8.sent);case 4:case"end":return _context8.stop()}}}),_callee8,this)})));function updateNestedControls(){return _updateNestedControls.apply(this,arguments)}return updateNestedControls}()}]);return InputControlVisController}(),_temp};function IndexPatternSelectFormRowUi(props){var controlIndex=props.controlIndex,indexPatternId=props.indexPatternId,intl=props.intl,onChange=props.onChange;var selectId="indexPatternSelect-".concat(controlIndex);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:selectId,label:intl.formatMessage({id:"inputControl.editor.indexPatternSelect.patternLabel",defaultMessage:"Index Pattern"})},external_kbnSharedDeps_React_default.a.createElement(props.IndexPatternSelect,{placeholder:intl.formatMessage({id:"inputControl.editor.indexPatternSelect.patternPlaceholder",defaultMessage:"Select index pattern..."}),indexPatternId:indexPatternId,onChange:onChange,"data-test-subj":selectId,savedObjectsClient:{}}))}var IndexPatternSelectFormRow=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(IndexPatternSelectFormRowUi);function field_select_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function field_select_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){field_select_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){field_select_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function field_select_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function field_select_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function field_select_createClass(Constructor,protoProps,staticProps){if(protoProps)field_select_defineProperties(Constructor.prototype,protoProps);if(staticProps)field_select_defineProperties(Constructor,staticProps);return Constructor}function field_select_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)field_select_setPrototypeOf(subClass,superClass)}function field_select_setPrototypeOf(o,p){field_select_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return field_select_setPrototypeOf(o,p)}function field_select_createSuper(Derived){var hasNativeReflectConstruct=field_select_isNativeReflectConstruct();return function _createSuperInternal(){var Super=field_select_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=field_select_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return field_select_possibleConstructorReturn(this,result)}}function field_select_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return field_select_assertThisInitialized(self)}function field_select_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function field_select_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function field_select_getPrototypeOf(o){field_select_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return field_select_getPrototypeOf(o)}function field_select_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var field_select_FieldSelectUi=function(_Component){field_select_inherits(FieldSelectUi,_Component);var _super=field_select_createSuper(FieldSelectUi);function FieldSelectUi(props){var _this;field_select_classCallCheck(this,FieldSelectUi);_this=_super.call(this,props);field_select_defineProperty(field_select_assertThisInitialized(_this),"hasUnmounted",void 0);field_select_defineProperty(field_select_assertThisInitialized(_this),"loadFields",(function(indexPatternId){_this.setState({isLoading:true,fields:[],indexPatternId:indexPatternId},_this.debouncedLoad.bind(null,indexPatternId))}));field_select_defineProperty(field_select_assertThisInitialized(_this),"debouncedLoad",external_kbnSharedDeps_Lodash_default.a.debounce(function(){var _ref=field_select_asyncToGenerator(regeneratorRuntime.mark((function _callee(indexPatternId){var _this$props$filterFie;var indexPattern,fieldsByTypeMap,fields;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!indexPatternId||indexPatternId.length===0)){_context.next=2;break}return _context.abrupt("return");case 2:_context.prev=2;_context.next=5;return _this.props.getIndexPattern(indexPatternId);case 5:indexPattern=_context.sent;_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](2);return _context.abrupt("return");case 11:if(!_this.hasUnmounted){_context.next=13;break}return _context.abrupt("return");case 13:if(!(indexPattern.id!==_this.state.indexPatternId)){_context.next=15;break}return _context.abrupt("return");case 15:fieldsByTypeMap=new Map;fields=[];indexPattern.fields.filter((_this$props$filterFie=_this.props.filterField)!==null&&_this$props$filterFie!==void 0?_this$props$filterFie:function(){return true}).forEach((function(field){var _fieldsByTypeMap$get;var fieldsList=(_fieldsByTypeMap$get=fieldsByTypeMap.get(field.type))!==null&&_fieldsByTypeMap$get!==void 0?_fieldsByTypeMap$get:[];fieldsList.push(field.name);fieldsByTypeMap.set(field.type,fieldsList)}));fieldsByTypeMap.forEach((function(fieldsList,fieldType){fields.push({label:fieldType,options:fieldsList.sort().map((function(fieldName){return{value:fieldName,label:fieldName}}))})}));fields.sort((function(a,b){if(a.label<b.label)return-1;if(a.label>b.label)return 1;return 0}));_this.setState({isLoading:false,fields:fields});case 21:case"end":return _context.stop()}}}),_callee,null,[[2,8]])})));return function(_x){return _ref.apply(this,arguments)}}(),300));field_select_defineProperty(field_select_assertThisInitialized(_this),"onChange",(function(selectedOptions){_this.props.onChange(external_kbnSharedDeps_Lodash_default.a.get(selectedOptions,"0.value"))}));_this.hasUnmounted=false;_this.state={isLoading:false,fields:[],indexPatternId:props.indexPatternId};return _this}field_select_createClass(FieldSelectUi,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.hasUnmounted=true}},{key:"componentDidMount",value:function componentDidMount(){this.loadFields(this.state.indexPatternId)}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){if(this.props.indexPatternId!==nextProps.indexPatternId){var _nextProps$indexPatte;this.loadFields((_nextProps$indexPatte=nextProps.indexPatternId)!==null&&_nextProps$indexPatte!==void 0?_nextProps$indexPatte:"")}}},{key:"render",value:function render(){if(!this.props.indexPatternId||this.props.indexPatternId.trim().length===0){return null}var selectId="fieldSelect-".concat(this.props.controlIndex);var selectedOptions=[];var intl=this.props.intl;if(this.props.fieldName){selectedOptions.push({value:this.props.fieldName,label:this.props.fieldName})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:selectId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.fieldSelect.fieldLabel",defaultMessage:"Field"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:intl.formatMessage({id:"inputControl.editor.fieldSelect.selectFieldPlaceholder",defaultMessage:"Select field..."}),singleSelection:true,isLoading:this.state.isLoading,options:this.state.fields,selectedOptions:selectedOptions,onChange:this.onChange,"data-test-subj":selectId}))}}]);return FieldSelectUi}(external_kbnSharedDeps_React_["Component"]);var FieldSelect=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(field_select_FieldSelectUi);function range_control_editor_slicedToArray(arr,i){return range_control_editor_arrayWithHoles(arr)||range_control_editor_iterableToArrayLimit(arr,i)||range_control_editor_unsupportedIterableToArray(arr,i)||range_control_editor_nonIterableRest()}function range_control_editor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function range_control_editor_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return range_control_editor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return range_control_editor_arrayLikeToArray(o,minLen)}function range_control_editor_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function range_control_editor_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function range_control_editor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function range_control_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function range_control_editor_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){range_control_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){range_control_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function range_control_editor_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function range_control_editor_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function range_control_editor_createClass(Constructor,protoProps,staticProps){if(protoProps)range_control_editor_defineProperties(Constructor.prototype,protoProps);if(staticProps)range_control_editor_defineProperties(Constructor,staticProps);return Constructor}function range_control_editor_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)range_control_editor_setPrototypeOf(subClass,superClass)}function range_control_editor_setPrototypeOf(o,p){range_control_editor_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return range_control_editor_setPrototypeOf(o,p)}function range_control_editor_createSuper(Derived){var hasNativeReflectConstruct=range_control_editor_isNativeReflectConstruct();return function _createSuperInternal(){var Super=range_control_editor_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=range_control_editor_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return range_control_editor_possibleConstructorReturn(this,result)}}function range_control_editor_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return range_control_editor_assertThisInitialized(self)}function range_control_editor_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function range_control_editor_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function range_control_editor_getPrototypeOf(o){range_control_editor_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return range_control_editor_getPrototypeOf(o)}function range_control_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function filterField(field){return field.type==="number"}var range_control_editor_RangeControlEditor=function(_Component){range_control_editor_inherits(RangeControlEditor,_Component);var _super=range_control_editor_createSuper(RangeControlEditor);function RangeControlEditor(){var _this;range_control_editor_classCallCheck(this,RangeControlEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));range_control_editor_defineProperty(range_control_editor_assertThisInitialized(_this),"state",{IndexPatternSelect:null});return _this}range_control_editor_createClass(RangeControlEditor,[{key:"componentDidMount",value:function componentDidMount(){this.getIndexPatternSelect()}},{key:"getIndexPatternSelect",value:function(){var _getIndexPatternSelect=range_control_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$this$props$dep,_yield$this$props$dep2,data;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.props.deps.core.getStartServices();case 2:_yield$this$props$dep=_context.sent;_yield$this$props$dep2=range_control_editor_slicedToArray(_yield$this$props$dep,2);data=_yield$this$props$dep2[1].data;this.setState({IndexPatternSelect:data.ui.IndexPatternSelect});case 6:case"end":return _context.stop()}}}),_callee,this)})));function getIndexPatternSelect(){return _getIndexPatternSelect.apply(this,arguments)}return getIndexPatternSelect}()},{key:"render",value:function render(){var _this2=this;var stepSizeId="stepSize-".concat(this.props.controlIndex);var decimalPlacesId="decimalPlaces-".concat(this.props.controlIndex);if(this.state.IndexPatternSelect===null){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelectFormRow,{indexPatternId:this.props.controlParams.indexPattern,onChange:this.props.handleIndexPatternChange,controlIndex:this.props.controlIndex,IndexPatternSelect:this.state.IndexPatternSelect}),external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{fieldName:this.props.controlParams.fieldName,indexPatternId:this.props.controlParams.indexPattern,filterField:filterField,onChange:this.props.handleFieldNameChange,getIndexPattern:this.props.getIndexPattern,controlIndex:this.props.controlIndex}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:stepSizeId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.rangeControl.stepSizeLabel",defaultMessage:"Step Size"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:this.props.controlParams.options.step,onChange:function onChange(event){_this2.props.handleOptionsChange(_this2.props.controlIndex,"step",event.target.valueAsNumber)},"data-test-subj":"rangeControlSizeInput".concat(this.props.controlIndex)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:decimalPlacesId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.rangeControl.decimalPlacesLabel",defaultMessage:"Decimal Places"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{min:0,value:this.props.controlParams.options.decimalPlaces,onChange:function onChange(event){_this2.props.handleOptionsChange(_this2.props.controlIndex,"decimalPlaces",event.target.valueAsNumber)},"data-test-subj":"rangeControlDecimalPlacesInput".concat(this.props.controlIndex)})))}}]);return RangeControlEditor}(external_kbnSharedDeps_React_["Component"]);function list_control_editor_slicedToArray(arr,i){return list_control_editor_arrayWithHoles(arr)||list_control_editor_iterableToArrayLimit(arr,i)||list_control_editor_unsupportedIterableToArray(arr,i)||list_control_editor_nonIterableRest()}function list_control_editor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function list_control_editor_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function list_control_editor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function list_control_editor_toConsumableArray(arr){return list_control_editor_arrayWithoutHoles(arr)||list_control_editor_iterableToArray(arr)||list_control_editor_unsupportedIterableToArray(arr)||list_control_editor_nonIterableSpread()}function list_control_editor_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function list_control_editor_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return list_control_editor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return list_control_editor_arrayLikeToArray(o,minLen)}function list_control_editor_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function list_control_editor_arrayWithoutHoles(arr){if(Array.isArray(arr))return list_control_editor_arrayLikeToArray(arr)}function list_control_editor_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function list_control_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function list_control_editor_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){list_control_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){list_control_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function list_control_editor_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function list_control_editor_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function list_control_editor_createClass(Constructor,protoProps,staticProps){if(protoProps)list_control_editor_defineProperties(Constructor.prototype,protoProps);if(staticProps)list_control_editor_defineProperties(Constructor,staticProps);return Constructor}function list_control_editor_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)list_control_editor_setPrototypeOf(subClass,superClass)}function list_control_editor_setPrototypeOf(o,p){list_control_editor_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return list_control_editor_setPrototypeOf(o,p)}function list_control_editor_createSuper(Derived){var hasNativeReflectConstruct=list_control_editor_isNativeReflectConstruct();return function _createSuperInternal(){var Super=list_control_editor_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=list_control_editor_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return list_control_editor_possibleConstructorReturn(this,result)}}function list_control_editor_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return list_control_editor_assertThisInitialized(self)}function list_control_editor_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function list_control_editor_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function list_control_editor_getPrototypeOf(o){list_control_editor_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return list_control_editor_getPrototypeOf(o)}function list_control_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function list_control_editor_filterField(field){return Boolean(field.aggregatable)&&["number","boolean","date","ip","string"].includes(field.type)}var list_control_editor_ListControlEditor=function(_PureComponent){list_control_editor_inherits(ListControlEditor,_PureComponent);var _super=list_control_editor_createSuper(ListControlEditor);function ListControlEditor(){var _this;list_control_editor_classCallCheck(this,ListControlEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));list_control_editor_defineProperty(list_control_editor_assertThisInitialized(_this),"isMounted",false);list_control_editor_defineProperty(list_control_editor_assertThisInitialized(_this),"state",{isLoadingFieldType:true,isStringField:false,prevFieldName:_this.props.controlParams.fieldName,IndexPatternSelect:null});list_control_editor_defineProperty(list_control_editor_assertThisInitialized(_this),"componentDidUpdate",(function(){if(_this.state.isLoadingFieldType){_this.loadIsStringField()}}));list_control_editor_defineProperty(list_control_editor_assertThisInitialized(_this),"loadIsStringField",list_control_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var indexPattern,field;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!_this.props.controlParams.indexPattern||!_this.props.controlParams.fieldName)){_context.next=3;break}_this.setState({isLoadingFieldType:false});return _context.abrupt("return");case 3:_context.prev=3;_context.next=6;return _this.props.getIndexPattern(_this.props.controlParams.indexPattern);case 6:indexPattern=_context.sent;_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](3);return _context.abrupt("return");case 12:if(_this.isMounted){_context.next=14;break}return _context.abrupt("return");case 14:field=indexPattern.fields.find((function(_ref2){var name=_ref2.name;return name===_this.props.controlParams.fieldName}));if(field){_context.next=17;break}return _context.abrupt("return");case 17:_this.setState({isLoadingFieldType:false,isStringField:field.type==="string"});case 18:case"end":return _context.stop()}}}),_callee,null,[[3,9]])}))));list_control_editor_defineProperty(list_control_editor_assertThisInitialized(_this),"renderOptions",(function(){var _this$props$controlPa,_this$props$controlPa2;if(_this.state.isLoadingFieldType||!_this.props.controlParams.fieldName){return}var options=[];if(_this.props.parentCandidates&&_this.props.parentCandidates.length>0){var parentCandidatesOptions=[{value:"",text:""}].concat(list_control_editor_toConsumableArray(_this.props.parentCandidates));options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"parentSelect-".concat(_this.props.controlIndex),label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.parentLabel",defaultMessage:"Parent control"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.parentDescription",defaultMessage:"Options are based on the value of parent control. Disabled if parent is not set."}),key:"parentSelect"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:parentCandidatesOptions,value:_this.props.controlParams.parent,onChange:function onChange(event){_this.props.handleParentChange(_this.props.controlIndex,event.target.value)}})))}options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"multiselect-".concat(_this.props.controlIndex),key:"multiselect",helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.multiselectDescription",defaultMessage:"Allow multiple selection"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.multiselectLabel",defaultMessage:"Multiselect"}),checked:(_this$props$controlPa=_this.props.controlParams.options.multiselect)!==null&&_this$props$controlPa!==void 0?_this$props$controlPa:true,onChange:function onChange(event){_this.props.handleOptionsChange(_this.props.controlIndex,"multiselect",event.target.checked)},"data-test-subj":"listControlMultiselectInput"})));var dynamicOptionsHelpText=_this.state.isStringField?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.dynamicOptions.updateDescription",defaultMessage:"Update options in response to user input"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.dynamicOptions.stringFieldDescription",defaultMessage:'Only available for "string" fields'});options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"dynamicOptions-".concat(_this.props.controlIndex),key:"dynamicOptions",helpText:dynamicOptionsHelpText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.dynamicOptionsLabel",defaultMessage:"Dynamic Options"}),checked:(_this$props$controlPa2=_this.props.controlParams.options.dynamicOptions)!==null&&_this$props$controlPa2!==void 0?_this$props$controlPa2:false,onChange:function onChange(event){_this.props.handleOptionsChange(_this.props.controlIndex,"dynamicOptions",event.target.checked)},disabled:_this.state.isStringField?false:true,"data-test-subj":"listControlDynamicOptionsSwitch"})));if(!_this.props.controlParams.options.dynamicOptions||!_this.state.isStringField){options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"size-".concat(_this.props.controlIndex),label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.sizeLabel",defaultMessage:"Size"}),key:"size",helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.sizeDescription",defaultMessage:"Number of options"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{min:1,value:_this.props.controlParams.options.size,onChange:function onChange(event){_this.props.handleOptionsChange(_this.props.controlIndex,"size",event.target.valueAsNumber)},"data-test-subj":"listControlSizeInput"})))}return options}));return _this}list_control_editor_createClass(ListControlEditor,[{key:"componentDidMount",value:function componentDidMount(){this.isMounted=true;this.loadIsStringField();this.getIndexPatternSelect()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.isMounted=false}},{key:"getIndexPatternSelect",value:function(){var _getIndexPatternSelect=list_control_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _yield$this$props$dep,_yield$this$props$dep2,data;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.props.deps.core.getStartServices();case 2:_yield$this$props$dep=_context2.sent;_yield$this$props$dep2=list_control_editor_slicedToArray(_yield$this$props$dep,2);data=_yield$this$props$dep2[1].data;this.setState({IndexPatternSelect:data.ui.IndexPatternSelect});case 6:case"end":return _context2.stop()}}}),_callee2,this)})));function getIndexPatternSelect(){return _getIndexPatternSelect.apply(this,arguments)}return getIndexPatternSelect}()},{key:"render",value:function render(){if(this.state.IndexPatternSelect===null){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelectFormRow,{indexPatternId:this.props.controlParams.indexPattern,onChange:this.props.handleIndexPatternChange,controlIndex:this.props.controlIndex,IndexPatternSelect:this.state.IndexPatternSelect}),external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{fieldName:this.props.controlParams.fieldName,indexPatternId:this.props.controlParams.indexPattern,filterField:list_control_editor_filterField,onChange:this.props.handleFieldNameChange,getIndexPattern:this.props.getIndexPattern,controlIndex:this.props.controlIndex}),this.renderOptions())}}]);return ListControlEditor}(external_kbnSharedDeps_React_["PureComponent"]);list_control_editor_defineProperty(list_control_editor_ListControlEditor,"getDerivedStateFromProps",(function(nextProps,prevState){var isNewFieldName=prevState.prevFieldName!==nextProps.controlParams.fieldName;if(!prevState.isLoadingFieldType&&isNewFieldName){return{prevFieldName:nextProps.controlParams.fieldName,isLoadingFieldType:true}}return null}));function control_editor_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function control_editor_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function control_editor_createClass(Constructor,protoProps,staticProps){if(protoProps)control_editor_defineProperties(Constructor.prototype,protoProps);if(staticProps)control_editor_defineProperties(Constructor,staticProps);return Constructor}function control_editor_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)control_editor_setPrototypeOf(subClass,superClass)}function control_editor_setPrototypeOf(o,p){control_editor_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return control_editor_setPrototypeOf(o,p)}function control_editor_createSuper(Derived){var hasNativeReflectConstruct=control_editor_isNativeReflectConstruct();return function _createSuperInternal(){var Super=control_editor_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=control_editor_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return control_editor_possibleConstructorReturn(this,result)}}function control_editor_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return control_editor_assertThisInitialized(self)}function control_editor_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function control_editor_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function control_editor_getPrototypeOf(o){control_editor_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return control_editor_getPrototypeOf(o)}function control_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var control_editor_ControlEditorUi=function(_PureComponent){control_editor_inherits(ControlEditorUi,_PureComponent);var _super=control_editor_createSuper(ControlEditorUi);function ControlEditorUi(){var _this;control_editor_classCallCheck(this,ControlEditorUi);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));control_editor_defineProperty(control_editor_assertThisInitialized(_this),"changeLabel",(function(event){_this.props.handleLabelChange(_this.props.controlIndex,event.target.value)}));control_editor_defineProperty(control_editor_assertThisInitialized(_this),"removeControl",(function(){_this.props.handleRemoveControl(_this.props.controlIndex)}));control_editor_defineProperty(control_editor_assertThisInitialized(_this),"moveUpControl",(function(){_this.props.moveControl(_this.props.controlIndex,-1)}));control_editor_defineProperty(control_editor_assertThisInitialized(_this),"moveDownControl",(function(){_this.props.moveControl(_this.props.controlIndex,1)}));control_editor_defineProperty(control_editor_assertThisInitialized(_this),"changeIndexPattern",(function(indexPatternId){_this.props.handleIndexPatternChange(_this.props.controlIndex,indexPatternId)}));control_editor_defineProperty(control_editor_assertThisInitialized(_this),"changeFieldName",(function(fieldName){_this.props.handleFieldNameChange(_this.props.controlIndex,fieldName)}));return _this}control_editor_createClass(ControlEditorUi,[{key:"renderEditor",value:function renderEditor(){var controlEditor=null;switch(this.props.controlParams.type){case CONTROL_TYPES.LIST:controlEditor=external_kbnSharedDeps_React_default.a.createElement(list_control_editor_ListControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPattern:this.props.getIndexPattern,handleOptionsChange:this.props.handleOptionsChange,parentCandidates:this.props.parentCandidates,handleParentChange:this.props.handleParentChange,deps:this.props.deps});break;case CONTROL_TYPES.RANGE:controlEditor=external_kbnSharedDeps_React_default.a.createElement(range_control_editor_RangeControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPattern:this.props.getIndexPattern,handleOptionsChange:this.props.handleOptionsChange,deps:this.props.deps});break;default:throw new Error("Unhandled control editor type ".concat(this.props.controlParams.type))}var labelId="controlLabel".concat(this.props.controlIndex);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:labelId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.controlEditor.controlLabel",defaultMessage:"Control Label"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:this.props.controlParams.label,onChange:this.changeLabel})),controlEditor)}},{key:"renderEditorButtons",value:function renderEditorButtons(){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.moveControlUpAriaLabel",defaultMessage:"Move control up"}),color:"primary",onClick:this.moveUpControl,iconType:"sortUp","data-test-subj":"inputControlEditorMoveUpControl".concat(this.props.controlIndex)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.moveControlDownAriaLabel",defaultMessage:"Move control down"}),color:"primary",onClick:this.moveDownControl,iconType:"sortDown","data-test-subj":"inputControlEditorMoveDownControl".concat(this.props.controlIndex)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.removeControlAriaLabel",defaultMessage:"Remove control"}),color:"danger",onClick:this.removeControl,iconType:"cross","data-test-subj":"inputControlEditorRemoveControl".concat(this.props.controlIndex)}))}},{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{grow:false,className:"icvControlEditor__panel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"controlEditorAccordion",buttonContent:getTitle(this.props.controlParams,this.props.controlIndex),extraAction:this.renderEditorButtons(),initialIsOpen:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),this.renderEditor()))}}]);return ControlEditorUi}(external_kbnSharedDeps_React_["PureComponent"]);var ControlEditor=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(control_editor_ControlEditorUi);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){controls_tab_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function controls_tab_slicedToArray(arr,i){return controls_tab_arrayWithHoles(arr)||controls_tab_iterableToArrayLimit(arr,i)||controls_tab_unsupportedIterableToArray(arr,i)||controls_tab_nonIterableRest()}function controls_tab_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function controls_tab_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return controls_tab_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return controls_tab_arrayLikeToArray(o,minLen)}function controls_tab_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function controls_tab_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function controls_tab_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function controls_tab_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function controls_tab_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){controls_tab_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){controls_tab_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function controls_tab_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function controls_tab_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function controls_tab_createClass(Constructor,protoProps,staticProps){if(protoProps)controls_tab_defineProperties(Constructor.prototype,protoProps);if(staticProps)controls_tab_defineProperties(Constructor,staticProps);return Constructor}function controls_tab_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)controls_tab_setPrototypeOf(subClass,superClass)}function controls_tab_setPrototypeOf(o,p){controls_tab_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return controls_tab_setPrototypeOf(o,p)}function controls_tab_createSuper(Derived){var hasNativeReflectConstruct=controls_tab_isNativeReflectConstruct();return function _createSuperInternal(){var Super=controls_tab_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=controls_tab_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return controls_tab_possibleConstructorReturn(this,result)}}function controls_tab_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return controls_tab_assertThisInitialized(self)}function controls_tab_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function controls_tab_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function controls_tab_getPrototypeOf(o){controls_tab_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return controls_tab_getPrototypeOf(o)}function controls_tab_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var controls_tab_ControlsTabUi=function(_PureComponent){controls_tab_inherits(ControlsTabUi,_PureComponent);var _super=controls_tab_createSuper(ControlsTabUi);function ControlsTabUi(){var _this;controls_tab_classCallCheck(this,ControlsTabUi);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"state",{type:CONTROL_TYPES.LIST});controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"getIndexPattern",function(){var _ref=controls_tab_asyncToGenerator(regeneratorRuntime.mark((function _callee(indexPatternId){var _yield$_this$props$de,_yield$_this$props$de2,startDeps;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.deps.core.getStartServices();case 2:_yield$_this$props$de=_context.sent;_yield$_this$props$de2=controls_tab_slicedToArray(_yield$_this$props$de,2);startDeps=_yield$_this$props$de2[1];_context.next=7;return startDeps.data.indexPatterns.get(indexPatternId);case 7:return _context.abrupt("return",_context.sent);case 8:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"onChange",(function(value){return _this.props.setValue("controls",value)}));controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"handleLabelChange",(function(controlIndex,label){var updatedControl=_objectSpread(_objectSpread({},_this.props.stateParams.controls[controlIndex]),{},{label:label});_this.onChange(setControl(_this.props.stateParams.controls,controlIndex,updatedControl))}));controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"handleIndexPatternChange",(function(controlIndex,indexPattern){var updatedControl=_objectSpread(_objectSpread({},_this.props.stateParams.controls[controlIndex]),{},{indexPattern:indexPattern,fieldName:""});_this.onChange(setControl(_this.props.stateParams.controls,controlIndex,updatedControl))}));controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"handleFieldNameChange",(function(controlIndex,fieldName){var updatedControl=_objectSpread(_objectSpread({},_this.props.stateParams.controls[controlIndex]),{},{fieldName:fieldName});_this.onChange(setControl(_this.props.stateParams.controls,controlIndex,updatedControl))}));controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"handleOptionsChange",(function(controlIndex,optionName,value){var control=_this.props.stateParams.controls[controlIndex];var updatedControl=_objectSpread(_objectSpread({},control),{},{options:_objectSpread(_objectSpread({},control.options),{},{[optionName]:value})});_this.onChange(setControl(_this.props.stateParams.controls,controlIndex,updatedControl))}));controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"handleRemoveControl",(function(controlIndex){_this.onChange(removeControl(_this.props.stateParams.controls,controlIndex))}));controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"moveControl",(function(controlIndex,direction){_this.onChange(moveControl(_this.props.stateParams.controls,controlIndex,direction))}));controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"handleAddControl",(function(){_this.onChange(addControl(_this.props.stateParams.controls,newControl(_this.state.type)))}));controls_tab_defineProperty(controls_tab_assertThisInitialized(_this),"handleParentChange",(function(controlIndex,parent){var updatedControl=_objectSpread(_objectSpread({},_this.props.stateParams.controls[controlIndex]),{},{parent:parent});_this.onChange(setControl(_this.props.stateParams.controls,controlIndex,updatedControl))}));return _this}controls_tab_createClass(ControlsTabUi,[{key:"renderControls",value:function renderControls(){var _this2=this;var lineageMap=getLineageMap(this.props.stateParams.controls);return this.props.stateParams.controls.map((function(controlParams,controlIndex){var parentCandidates=getParentCandidates(_this2.props.stateParams.controls,controlParams.id,lineageMap);return external_kbnSharedDeps_React_default.a.createElement(ControlEditor,{key:controlParams.id,controlIndex:controlIndex,controlParams:controlParams,handleLabelChange:_this2.handleLabelChange,moveControl:_this2.moveControl,handleRemoveControl:_this2.handleRemoveControl,handleIndexPatternChange:_this2.handleIndexPatternChange,handleFieldNameChange:_this2.handleFieldNameChange,getIndexPattern:_this2.getIndexPattern,handleOptionsChange:_this2.handleOptionsChange,parentCandidates:parentCandidates,handleParentChange:_this2.handleParentChange,deps:_this2.props.deps})}))}},{key:"render",value:function render(){var _this3=this;var intl=this.props.intl;return external_kbnSharedDeps_React_default.a.createElement("div",null,this.renderControls(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"selectControlType"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{"data-test-subj":"selectControlType",options:[{value:CONTROL_TYPES.RANGE,text:intl.formatMessage({id:"inputControl.editor.controlsTab.select.rangeDropDownOptionLabel",defaultMessage:"Range slider"})},{value:CONTROL_TYPES.LIST,text:intl.formatMessage({id:"inputControl.editor.controlsTab.select.listDropDownOptionLabel",defaultMessage:"Options list"})}],value:this.state.type,onChange:function onChange(event){return _this3.setState({type:event.target.value})},"aria-label":intl.formatMessage({id:"inputControl.editor.controlsTab.select.controlTypeAriaLabel",defaultMessage:"Select control type"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"addControl"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:this.handleAddControl,iconType:"plusInCircle","data-test-subj":"inputControlEditorAddBtn","aria-label":intl.formatMessage({id:"inputControl.editor.controlsTab.select.addControlAriaLabel",defaultMessage:"Add control"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.controlsTab.addButtonLabel",defaultMessage:"Add"})))))))}}]);return ControlsTabUi}(external_kbnSharedDeps_React_["PureComponent"]);var controls_tab_ControlsTab=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(controls_tab_ControlsTabUi);var controls_tab_getControlsTab=function getControlsTab(deps){return function(props){return external_kbnSharedDeps_React_default.a.createElement(controls_tab_ControlsTab,_extends({},props,{deps:deps}))}};function options_tab_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function options_tab_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function options_tab_createClass(Constructor,protoProps,staticProps){if(protoProps)options_tab_defineProperties(Constructor.prototype,protoProps);if(staticProps)options_tab_defineProperties(Constructor,staticProps);return Constructor}function options_tab_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)options_tab_setPrototypeOf(subClass,superClass)}function options_tab_setPrototypeOf(o,p){options_tab_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return options_tab_setPrototypeOf(o,p)}function options_tab_createSuper(Derived){var hasNativeReflectConstruct=options_tab_isNativeReflectConstruct();return function _createSuperInternal(){var Super=options_tab_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=options_tab_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return options_tab_possibleConstructorReturn(this,result)}}function options_tab_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return options_tab_assertThisInitialized(self)}function options_tab_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function options_tab_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function options_tab_getPrototypeOf(o){options_tab_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return options_tab_getPrototypeOf(o)}function options_tab_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var options_tab_OptionsTab=function(_PureComponent){options_tab_inherits(OptionsTab,_PureComponent);var _super=options_tab_createSuper(OptionsTab);function OptionsTab(){var _this;options_tab_classCallCheck(this,OptionsTab);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));options_tab_defineProperty(options_tab_assertThisInitialized(_this),"handleUpdateFiltersChange",(function(event){_this.props.setValue("updateFiltersOnChange",event.target.checked)}));options_tab_defineProperty(options_tab_assertThisInitialized(_this),"handleUseTimeFilter",(function(event){_this.props.setValue("useTimeFilter",event.target.checked)}));options_tab_defineProperty(options_tab_assertThisInitialized(_this),"handlePinFilters",(function(event){_this.props.setValue("pinFilters",event.target.checked)}));return _this}options_tab_createClass(OptionsTab,[{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"updateFiltersOnChange"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.optionsTab.updateFilterLabel",defaultMessage:"Update Kibana filters on each change"}),checked:this.props.stateParams.updateFiltersOnChange,onChange:this.handleUpdateFiltersChange,"data-test-subj":"inputControlEditorUpdateFiltersOnChangeCheckbox"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"useTimeFilter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.optionsTab.useTimeFilterLabel",defaultMessage:"Use time filter"}),checked:this.props.stateParams.useTimeFilter,onChange:this.handleUseTimeFilter,"data-test-subj":"inputControlEditorUseTimeFilterCheckbox"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"pinFilters"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.optionsTab.pinFiltersLabel",defaultMessage:"Pin filters for all applications"}),checked:this.props.stateParams.pinFilters,onChange:this.handlePinFilters,"data-test-subj":"inputControlEditorPinFiltersCheckbox"})))}}]);return OptionsTab}(external_kbnSharedDeps_React_["PureComponent"]);function createInputControlVisTypeDefinition(deps){var InputControlVisController=vis_controller_createInputControlVisController(deps);var ControlsTab=controls_tab_getControlsTab(deps);return{name:"input_control_vis",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.register.controlsTitle",{defaultMessage:"Controls"}),icon:"controlsHorizontal",description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.register.controlsDescription",{defaultMessage:"Create interactive controls for easy dashboard manipulation."}),stage:"experimental",visualization:InputControlVisController,visConfig:{defaults:{controls:[],updateFiltersOnChange:false,useTimeFilter:false,pinFilters:false}},editorConfig:{optionTabs:[{name:"controls",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.register.tabs.controlsTitle",{defaultMessage:"Controls"}),editor:ControlsTab},{name:"options",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.register.tabs.optionsTitle",{defaultMessage:"Options"}),editor:options_tab_OptionsTab}]},inspectorAdapters:{},requestHandler:"none",responseHandler:"none"}}function plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function plugin_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function plugin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function plugin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function plugin_createClass(Constructor,protoProps,staticProps){if(protoProps)plugin_defineProperties(Constructor.prototype,protoProps);if(staticProps)plugin_defineProperties(Constructor,staticProps);return Constructor}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var plugin_InputControlVisPlugin=function(){function InputControlVisPlugin(initializerContext){plugin_classCallCheck(this,InputControlVisPlugin);this.initializerContext=initializerContext;plugin_defineProperty(this,"cachedSettings",undefined)}plugin_createClass(InputControlVisPlugin,[{key:"setup",value:function setup(core,_ref){var _this=this;var expressions=_ref.expressions,visualizations=_ref.visualizations,data=_ref.data;var visualizationDependencies={core:core,data:data,getSettings:function(){var _getSettings=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.cachedSettings){_context.next=4;break}_context.next=3;return core.http.get("/api/input_control_vis/settings");case 3:_this.cachedSettings=_context.sent;case 4:return _context.abrupt("return",_this.cachedSettings);case 5:case"end":return _context.stop()}}}),_callee)})));function getSettings(){return _getSettings.apply(this,arguments)}return getSettings}()};expressions.registerFunction(input_control_fn_createInputControlVisFn);visualizations.createBaseVisualization(createInputControlVisTypeDefinition(visualizationDependencies))}},{key:"start",value:function start(core,deps){}}]);return InputControlVisPlugin}();function public_plugin(initializerContext){return new plugin_InputControlVisPlugin(initializerContext)}}]);