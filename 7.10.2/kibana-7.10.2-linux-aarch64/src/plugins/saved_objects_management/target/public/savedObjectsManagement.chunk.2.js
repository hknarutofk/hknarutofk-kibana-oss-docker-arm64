(window["savedObjectsManagement_bundle_jsonpfunction"]=window["savedObjectsManagement_bundle_jsonpfunction"]||[]).push([[2],{22:function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},23:function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},84:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var saveAs=saveAs||function(view){"use strict";if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=new MouseEvent("click");node.dispatchEvent(event)},webkit_req_fs=view.webkitRequestFileSystem,req_fs=view.requestFileSystem||webkit_req_fs||view.mozRequestFileSystem,throw_outside=function(ex){(view.setImmediate||view.setTimeout)((function(){throw ex}),0)},force_saveable_type="application/octet-stream",fs_min_size=0,arbitrary_revoke_timeout=500,revoke=function(file){var revoker=function(){if(typeof file==="string"){get_URL().revokeObjectURL(file)}else{file.remove()}};if(view.chrome){revoker()}else{setTimeout(revoker,arbitrary_revoke_timeout)}},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);var i=event_types.length;while(i--){var listener=filesaver["on"+event_types[i]];if(typeof listener==="function"){try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}}},auto_bom=function(blob){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)){return new Blob(["\ufeff",blob],{type:blob.type})}return blob},FileSaver=function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}var filesaver=this,type=blob.type,blob_changed=false,object_url,target_view,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))},fs_error=function(){if(blob_changed||!object_url){object_url=get_URL().createObjectURL(blob)}if(target_view){target_view.location.href=object_url}else{var new_tab=view.open(object_url,"_blank");if(new_tab==undefined&&typeof safari!=="undefined"){view.location.href=object_url}}filesaver.readyState=filesaver.DONE;dispatch_all();revoke(object_url)},abortable=function(func){return function(){if(filesaver.readyState!==filesaver.DONE){return func.apply(this,arguments)}}},create_if_not_found={create:true,exclusive:false},slice;filesaver.readyState=filesaver.INIT;if(!name){name="download"}if(can_use_save_link){object_url=get_URL().createObjectURL(blob);save_link.href=object_url;save_link.download=name;setTimeout((function(){click(save_link);dispatch_all();revoke(object_url);filesaver.readyState=filesaver.DONE}));return}if(view.chrome&&type&&type!==force_saveable_type){slice=blob.slice||blob.webkitSlice;blob=slice.call(blob,0,blob.size,force_saveable_type);blob_changed=true}if(webkit_req_fs&&name!=="download"){name+=".download"}if(type===force_saveable_type||webkit_req_fs){target_view=view}if(!req_fs){fs_error();return}fs_min_size+=blob.size;req_fs(view.TEMPORARY,fs_min_size,abortable((function(fs){fs.root.getDirectory("saved",create_if_not_found,abortable((function(dir){var save=function(){dir.getFile(name,create_if_not_found,abortable((function(file){file.createWriter(abortable((function(writer){writer.onwriteend=function(event){target_view.location.href=file.toURL();filesaver.readyState=filesaver.DONE;dispatch(filesaver,"writeend",event);revoke(file)};writer.onerror=function(){var error=writer.error;if(error.code!==error.ABORT_ERR){fs_error()}};"writestart progress write abort".split(" ").forEach((function(event){writer["on"+event]=filesaver["on"+event]}));writer.write(blob);filesaver.abort=function(){writer.abort();filesaver.readyState=filesaver.DONE};filesaver.readyState=filesaver.WRITING})),fs_error)})),fs_error)};dir.getFile(name,{create:false},abortable((function(file){file.remove();save()})),abortable((function(ex){if(ex.code===ex.NOT_FOUND_ERR){save()}else{fs_error()}})))})),fs_error)})),fs_error)},FS_proto=FileSaver.prototype,saveAs=function(blob,name,no_auto_bom){return new FileSaver(blob,name,no_auto_bom)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}return navigator.msSaveOrOpenBlob(blob,name||"download")}}FS_proto.abort=function(){var filesaver=this;filesaver.readyState=filesaver.DONE;dispatch(filesaver,"abort")};FS_proto.readyState=FS_proto.INIT=0;FS_proto.WRITING=1;FS_proto.DONE=2;FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null;return saveAs}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(true&&module.exports){module.exports.saveAs=saveAs}else if(true&&__webpack_require__(85)!==null&&__webpack_require__(86)!=null){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return saveAs}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}},85:function(module,exports){module.exports=function(){throw new Error("define cannot be used indirect")}},86:function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__}).call(this,{})},87:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(88);case"v7light":return __webpack_require__(90);case"v8dark":return __webpack_require__(92);case"v8light":return __webpack_require__(94)}},88:function(module,exports,__webpack_require__){var api=__webpack_require__(22);var content=__webpack_require__(89);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},89:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(23);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".savedObjectsManagementImportSummary__row {\n  margin-bottom: 4px; }\n\n.savedObjectsManagementImportSummary__title {\n  min-width: 0; }\n\n.savedObjectsManagementImportSummary__createdCount {\n  color: #7DE2D1; }\n\n.savedObjectsManagementImportSummary__errorCount {\n  color: #ff7575; }\n\n.savedObjectsManagementImportSummary__icon {\n  margin-left: 4px; }\n",""]);module.exports=exports},90:function(module,exports,__webpack_require__){var api=__webpack_require__(22);var content=__webpack_require__(91);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},91:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(23);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".savedObjectsManagementImportSummary__row {\n  margin-bottom: 4px; }\n\n.savedObjectsManagementImportSummary__title {\n  min-width: 0; }\n\n.savedObjectsManagementImportSummary__createdCount {\n  color: #017D73; }\n\n.savedObjectsManagementImportSummary__errorCount {\n  color: #BD271E; }\n\n.savedObjectsManagementImportSummary__icon {\n  margin-left: 4px; }\n",""]);module.exports=exports},92:function(module,exports,__webpack_require__){var api=__webpack_require__(22);var content=__webpack_require__(93);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},93:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(23);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".savedObjectsManagementImportSummary__row {\n  margin-bottom: 4px; }\n\n.savedObjectsManagementImportSummary__title {\n  min-width: 0; }\n\n.savedObjectsManagementImportSummary__createdCount {\n  color: #7DE2D1; }\n\n.savedObjectsManagementImportSummary__errorCount {\n  color: #ff7575; }\n\n.savedObjectsManagementImportSummary__icon {\n  margin-left: 4px; }\n",""]);module.exports=exports},94:function(module,exports,__webpack_require__){var api=__webpack_require__(22);var content=__webpack_require__(95);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},95:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(23);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".savedObjectsManagementImportSummary__row {\n  margin-bottom: 4px; }\n\n.savedObjectsManagementImportSummary__title {\n  min-width: 0; }\n\n.savedObjectsManagementImportSummary__createdCount {\n  color: #017D73; }\n\n.savedObjectsManagementImportSummary__errorCount {\n  color: #BD271E; }\n\n.savedObjectsManagementImportSummary__icon {\n  margin-left: 4px; }\n",""]);module.exports=exports},96:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return saved_objects_table_page_SavedObjectsTablePage}));var external_kbnSharedDeps_React_=__webpack_require__(12);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_Lodash_=__webpack_require__(0);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var file_saver=__webpack_require__(84);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(13);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(14);var public_=__webpack_require__(17);var lib=__webpack_require__(4);var header_Header=function Header(_ref){var onExportAll=_ref.onExportAll,onImport=_ref.onImport,onRefresh=_ref.onRefresh,filteredCount=_ref.filteredCount;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"baseline"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.header.savedObjectsTitle",defaultMessage:"Saved Objects"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"baseline",gutterSize:"m",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",iconType:"exportAction","data-test-subj":"exportAllObjects",onClick:onExportAll},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.header.exportButtonLabel",defaultMessage:"Export {filteredCount, plural, one{# object} other {# objects}}",values:{filteredCount:filteredCount}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",iconType:"importAction","data-test-subj":"importObjects",onClick:onImport},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.header.importButtonLabel",defaultMessage:"Import"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",iconType:"refresh",onClick:onRefresh},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.header.refreshButtonLabel",defaultMessage:"Refresh"})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.howToDeleteSavedObjectsDescription",defaultMessage:"Manage and share your saved objects. To edit the underlying data of an object, go to its associated application."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var table_Table=function(_PureComponent){_inherits(Table,_PureComponent);var _super=_createSuper(Table);function Table(props){var _this;_classCallCheck(this,Table);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"state",{isSearchTextValid:true,parseErrorMessage:null,isExportPopoverOpen:false,isIncludeReferencesDeepChecked:true,activeAction:undefined,isColumnDataLoaded:false});_defineProperty(_assertThisInitialized(_this),"loadColumnData",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all(_this.props.columnRegistry.getAll().map((function(column){return column.loadData()})));case 2:_this.setState({isColumnDataLoaded:true});case 3:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"onChange",(function(_ref2){var query=_ref2.query,error=_ref2.error;if(error){_this.setState({isSearchTextValid:false,parseErrorMessage:error.message});return}_this.setState({isSearchTextValid:true,parseErrorMessage:null});_this.props.onQueryChange({query:query})}));_defineProperty(_assertThisInitialized(_this),"closeExportPopover",(function(){_this.setState({isExportPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"toggleExportPopoverVisibility",(function(){_this.setState((function(state){return{isExportPopoverOpen:!state.isExportPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"toggleIsIncludeReferencesDeepChecked",(function(){_this.setState((function(state){return{isIncludeReferencesDeepChecked:!state.isIncludeReferencesDeepChecked}}))}));_defineProperty(_assertThisInitialized(_this),"onExportClick",(function(){var onExport=_this.props.onExport;var isIncludeReferencesDeepChecked=_this.state.isIncludeReferencesDeepChecked;onExport(isIncludeReferencesDeepChecked);_this.setState({isExportPopoverOpen:false})}));return _this}_createClass(Table,[{key:"componentDidMount",value:function componentDidMount(){this.loadColumnData()}},{key:"render",value:function render(){var _this2=this,_this$state$activeAct,_this$state$activeAct2;var _this$props=this.props,pageIndex=_this$props.pageIndex,pageSize=_this$props.pageSize,itemId=_this$props.itemId,items=_this$props.items,totalItemCount=_this$props.totalItemCount,isSearching=_this$props.isSearching,filterOptions=_this$props.filterOptions,selection=_this$props.selectionConfig,onDelete=_this$props.onDelete,onActionRefresh=_this$props.onActionRefresh,selectedSavedObjects=_this$props.selectedSavedObjects,onTableChange=_this$props.onTableChange,goInspectObject=_this$props.goInspectObject,onShowRelationships=_this$props.onShowRelationships,basePath=_this$props.basePath,actionRegistry=_this$props.actionRegistry,columnRegistry=_this$props.columnRegistry;var pagination={pageIndex:pageIndex,pageSize:pageSize,totalItemCount:totalItemCount,pageSizeOptions:[5,10,20,50]};var filters=[{type:"field_value_selection",field:"type",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.typeFilterName",{defaultMessage:"Type"}),multiSelect:"or",options:filterOptions}];var columns=[{field:"type",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnTypeName",{defaultMessage:"Type"}),width:"50px",align:"center",description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnTypeDescription",{defaultMessage:"Type of the saved object"}),sortable:false,"data-test-subj":"savedObjectsTableRowType",render:function render(type,object){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:Object(lib["getSavedObjectLabel"])(type)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{"aria-label":Object(lib["getSavedObjectLabel"])(type),type:object.meta.icon||"apps",size:"s","data-test-subj":"objectType"}))}},{field:"meta.title",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnTitleName",{defaultMessage:"Title"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnTitleDescription",{defaultMessage:"Title of the saved object"}),dataType:"string",sortable:false,"data-test-subj":"savedObjectsTableRowTitle",render:function render(title,object){var _ref3=object.meta.inAppUrl||{},_ref3$path=_ref3.path,path=_ref3$path===void 0?"":_ref3$path;var canGoInApp=_this2.props.canGoInApp(object);if(!canGoInApp){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},title||Object(lib["getDefaultTitle"])(object))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:basePath.prepend(path)},title||Object(lib["getDefaultTitle"])(object))}}].concat(_toConsumableArray(columnRegistry.getAll().map((function(column){return _objectSpread(_objectSpread({},column.euiColumn),{},{sortable:false,"data-test-subj":"savedObjectsTableColumn-".concat(column.id)})}))),[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnActionsName",{defaultMessage:"Actions"}),width:"80px",actions:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnActions.inspectActionName",{defaultMessage:"Inspect"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnActions.inspectActionDescription",{defaultMessage:"Inspect this saved object"}),type:"icon",icon:"inspect",onClick:function onClick(object){return goInspectObject(object)},available:function available(object){return!!object.meta.editUrl},"data-test-subj":"savedObjectsTableAction-inspect"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnActions.viewRelationshipsActionName",{defaultMessage:"Relationships"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnActions.viewRelationshipsActionDescription",{defaultMessage:"View the relationships this saved object has to other saved objects"}),type:"icon",icon:"kqlSelector",onClick:function onClick(object){return onShowRelationships(object)},"data-test-subj":"savedObjectsTableAction-relationships"}].concat(_toConsumableArray(actionRegistry.getAll().map((function(action){return _objectSpread(_objectSpread({},action.euiAction),{},{"data-test-subj":"savedObjectsTableAction-".concat(action.id),onClick:function onClick(object){_this2.setState({activeAction:action});action.registerOnFinishCallback((function(){_this2.setState({activeAction:undefined});var _action$refreshOnFini=action.refreshOnFinish,refreshOnFinish=_action$refreshOnFini===void 0?function(){return false}:_action$refreshOnFini;if(refreshOnFinish()){onActionRefresh(object)}}));if(action.euiAction.onClick){action.euiAction.onClick(object)}}})}))))}]);var queryParseError;if(!this.state.isSearchTextValid){var parseErrorMsg=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.searchBar.unableToParseQueryErrorMessage",{defaultMessage:"Unable to parse query"});queryParseError=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormErrorText"],null,"".concat(parseErrorMsg,". ").concat(this.state.parseErrorMessage))}var button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{iconType:"arrowDown",iconSide:"right",onClick:this.toggleExportPopoverVisibility,isDisabled:selectedSavedObjects.length===0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.table.exportPopoverButtonLabel",defaultMessage:"Export"}));var activeActionContents=(_this$state$activeAct=(_this$state$activeAct2=this.state.activeAction)===null||_this$state$activeAct2===void 0?void 0:_this$state$activeAct2.render())!==null&&_this$state$activeAct!==void 0?_this$state$activeAct:null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,activeActionContents,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSearchBar"],{box:{"data-test-subj":"savedObjectSearchBar"},filters:filters,onChange:this.onChange,toolsRight:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{key:"deleteSO",iconType:"trash",color:"danger",onClick:onDelete,isDisabled:selectedSavedObjects.length===0||!this.props.canDelete,title:this.props.canDelete?undefined:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.deleteButtonTitle",{defaultMessage:"Unable to delete saved objects"}),"data-test-subj":"savedObjectsManagementDelete"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.table.deleteButtonLabel",defaultMessage:"Delete"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{key:"exportSOOptions",button:button,isOpen:this.state.isExportPopoverOpen,closePopover:this.closeExportPopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModal.exportOptionsLabel",defaultMessage:"Options"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{name:"includeReferencesDeep",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModal.includeReferencesDeepLabel",defaultMessage:"Include related objects"}),checked:this.state.isIncludeReferencesDeepChecked,onChange:this.toggleIsIncludeReferencesDeepChecked})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{key:"exportSO",iconType:"exportAction",onClick:this.onExportClick,fill:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.table.exportButtonLabel",defaultMessage:"Export"}))))]}),queryParseError,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"savedObjectsTable"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{loading:isSearching,itemId:itemId,items:items,columns:columns,pagination:pagination,selection:selection,onChange:onTableChange,rowProps:function rowProps(item){return{"data-test-subj":"savedObjectsTableRow row-".concat(item.id)}}})))}}]);return Table}(external_kbnSharedDeps_React_["PureComponent"]);var resolve_saved_objects=__webpack_require__(2);var external_kbnSharedDeps_Moment_=__webpack_require__(18);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||overwrite_modal_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function overwrite_modal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return overwrite_modal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return overwrite_modal_arrayLikeToArray(o,minLen)}function overwrite_modal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var overwrite_modal_OverwriteModal=function OverwriteModal(_ref){var conflict=_ref.conflict,onFinish=_ref.onFinish;var obj=conflict.obj,error=conflict.error;var initialDestinationId;var selectControl=null;if(error.type==="conflict"){initialDestinationId=error.destinationId}else{initialDestinationId=error.destinations[0].id}var _useState=Object(external_kbnSharedDeps_React_["useState"])(initialDestinationId),_useState2=_slicedToArray(_useState,2),destinationId=_useState2[0],setDestinationId=_useState2[1];if(error.type==="ambiguous_conflict"){var selectProps={options:error.destinations.map((function(destination){var _destination$title;var header=(_destination$title=destination.title)!==null&&_destination$title!==void 0?_destination$title:"".concat(type," [id=").concat(destination.id,"]");var lastUpdated=destination.updatedAt?external_kbnSharedDeps_Moment_default()(destination.updatedAt).fromNow():"never";var idText="ID: ".concat(destination.id);var lastUpdatedText="Last updated: ".concat(lastUpdated);return{value:destination.id,inputDisplay:destination.id,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("strong",null,header),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},idText,external_kbnSharedDeps_React_default.a.createElement("br",null),lastUpdatedText)))}})),onChange:function onChange(value){setDestinationId(value)}};selectControl=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{options:selectProps.options,valueOfSelected:destinationId,onChange:selectProps.onChange,prepend:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.selectControlLabel",{defaultMessage:"Object ID"}),hasDividers:true,fullWidth:true,compressed:true})}var type=obj.type,meta=obj.meta;var title=meta.title||Object(lib["getDefaultTitle"])(obj);var bodyText=error.type==="conflict"?external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.body.conflict",{defaultMessage:'"{title}" conflicts with an existing object. Overwrite it?',values:{title:title}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.body.ambiguousConflict",{defaultMessage:'"{title}" conflicts with multiple existing objects. Overwrite one?',values:{title:title}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.title",{defaultMessage:"Overwrite {type}?",values:{type:type}}),cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.cancelButtonText",{defaultMessage:"Skip"}),confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.overwriteButtonText",{defaultMessage:"Overwrite"}),buttonColor:"danger",onCancel:function onCancel(){return onFinish(false)},onConfirm:function onConfirm(){return onFinish(true,destinationId)},defaultFocusedButton:external_kbnSharedDeps_ElasticEui_["EUI_MODAL_CONFIRM_BUTTON"],maxWidth:"500px"},external_kbnSharedDeps_React_default.a.createElement("p",null,bodyText),selectControl))};function import_mode_control_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function import_mode_control_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){import_mode_control_ownKeys(Object(source),true).forEach((function(key){import_mode_control_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{import_mode_control_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function import_mode_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function import_mode_control_slicedToArray(arr,i){return import_mode_control_arrayWithHoles(arr)||import_mode_control_iterableToArrayLimit(arr,i)||import_mode_control_unsupportedIterableToArray(arr,i)||import_mode_control_nonIterableRest()}function import_mode_control_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function import_mode_control_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return import_mode_control_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return import_mode_control_arrayLikeToArray(o,minLen)}function import_mode_control_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function import_mode_control_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function import_mode_control_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var createNewCopiesDisabled={id:"createNewCopiesDisabled",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.createNewCopies.disabledTitle",{defaultMessage:"Check for existing objects"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.createNewCopies.disabledText",{defaultMessage:"Check if objects were previously copied or imported."})};var createNewCopiesEnabled={id:"createNewCopiesEnabled",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.createNewCopies.enabledTitle",{defaultMessage:"Create new objects with random IDs"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.createNewCopies.enabledText",{defaultMessage:"Use this option to create one or more copies of the object."})};var overwriteEnabled={id:"overwriteEnabled",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.overwrite.enabledLabel",{defaultMessage:"Automatically overwrite conflicts"})};var overwriteDisabled={id:"overwriteDisabled",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.overwrite.disabledLabel",{defaultMessage:"Request action on conflict"})};var importOptionsTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.importOptionsTitle",{defaultMessage:"Import options"});var import_mode_control_createLabel=function createLabel(_ref){var text=_ref.text,tooltip=_ref.tooltip;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,text)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:tooltip,position:"left",type:"iInCircle"})))};var import_mode_control_ImportModeControl=function ImportModeControl(_ref2){var initialValues=_ref2.initialValues,isLegacyFile=_ref2.isLegacyFile,updateSelection=_ref2.updateSelection;var _useState=Object(external_kbnSharedDeps_React_["useState"])(initialValues.createNewCopies),_useState2=import_mode_control_slicedToArray(_useState,2),createNewCopies=_useState2[0],setCreateNewCopies=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(initialValues.overwrite),_useState4=import_mode_control_slicedToArray(_useState3,2),overwrite=_useState4[0],setOverwrite=_useState4[1];var _onChange=function onChange(partial){if(partial.createNewCopies!==undefined){setCreateNewCopies(partial.createNewCopies)}else if(partial.overwrite!==undefined){setOverwrite(partial.overwrite)}updateSelection(import_mode_control_objectSpread({createNewCopies:createNewCopies,overwrite:overwrite},partial))};var overwriteRadio=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadioGroup"],{options:[overwriteEnabled,overwriteDisabled],idSelected:overwrite?overwriteEnabled.id:overwriteDisabled.id,onChange:function onChange(id){return _onChange({overwrite:id===overwriteEnabled.id})},disabled:createNewCopies,"data-test-subj":"savedObjectsManagement-importModeControl-overwriteRadioGroup"});if(isLegacyFile){return overwriteRadio}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormFieldset"],{legend:{children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,importOptionsTitle))}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:createNewCopiesDisabled.id,label:import_mode_control_createLabel(createNewCopiesDisabled),checked:!createNewCopies,onChange:function onChange(){return _onChange({createNewCopies:false})}},overwriteRadio),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:createNewCopiesEnabled.id,label:import_mode_control_createLabel(createNewCopiesEnabled),checked:createNewCopies,onChange:function onChange(){return _onChange({createNewCopies:true})}}))};var import_summary=__webpack_require__(87);function import_summary_toConsumableArray(arr){return import_summary_arrayWithoutHoles(arr)||import_summary_iterableToArray(arr)||import_summary_unsupportedIterableToArray(arr)||import_summary_nonIterableSpread()}function import_summary_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function import_summary_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return import_summary_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return import_summary_arrayLikeToArray(o,minLen)}function import_summary_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function import_summary_arrayWithoutHoles(arr){if(Array.isArray(arr))return import_summary_arrayLikeToArray(arr)}function import_summary_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var DEFAULT_ICON="apps";var unsupportedTypeErrorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importSummary.unsupportedTypeError",{defaultMessage:"Unsupported object type"});var import_summary_getErrorMessage=function getErrorMessage(_ref){var error=_ref.error;if(error.type==="unknown"){return error.message}else if(error.type==="unsupported_type"){return unsupportedTypeErrorMessage}};var import_summary_mapFailedImport=function mapFailedImport(failure){var obj=failure.obj;var type=obj.type,id=obj.id,meta=obj.meta;var title=meta.title||Object(lib["getDefaultTitle"])(obj);var icon=meta.icon||DEFAULT_ICON;var errorMessage=import_summary_getErrorMessage(failure);return{type:type,id:id,title:title,icon:icon,outcome:"error",errorMessage:errorMessage}};var import_summary_mapImportSuccess=function mapImportSuccess(obj){var type=obj.type,id=obj.id,meta=obj.meta,overwrite=obj.overwrite;var title=meta.title||Object(lib["getDefaultTitle"])(obj);var icon=meta.icon||DEFAULT_ICON;var outcome=overwrite?"overwritten":"created";return{type:type,id:id,title:title,icon:icon,outcome:outcome}};var import_summary_getCountIndicators=function getCountIndicators(importItems){if(!importItems.length){return null}var outcomeCounts=importItems.reduce((function(acc,_ref2){var _acc$get;var outcome=_ref2.outcome;return acc.set(outcome,((_acc$get=acc.get(outcome))!==null&&_acc$get!==void 0?_acc$get:0)+1)}),new Map);var createdCount=outcomeCounts.get("created");var overwrittenCount=outcomeCounts.get("overwritten");var errorCount=outcomeCounts.get("error");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,createdCount&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",{className:"savedObjectsManagementImportSummary__createdCount"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.importSummary.createdCountHeader",defaultMessage:"{createdCount} new",values:{createdCount:createdCount}})))),overwrittenCount&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",{className:"savedObjectsManagementImportSummary__overwrittenCount"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.importSummary.overwrittenCountHeader",defaultMessage:"{overwrittenCount} overwritten",values:{overwrittenCount:overwrittenCount}})))),errorCount&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",{className:"savedObjectsManagementImportSummary__errorCount"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.importSummary.errorCountHeader",defaultMessage:"{errorCount} error",values:{errorCount:errorCount}})))))};var import_summary_getStatusIndicator=function getStatusIndicator(_ref3){var outcome=_ref3.outcome,_ref3$errorMessage=_ref3.errorMessage,errorMessage=_ref3$errorMessage===void 0?"Error":_ref3$errorMessage;switch(outcome){case"created":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"checkInCircleFilled",color:"success",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.importSummary.createdOutcomeLabel",{defaultMessage:"Created"})});case"overwritten":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"check",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.importSummary.overwrittenOutcomeLabel",{defaultMessage:"Overwritten"})});case"error":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"danger",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.importSummary.errorOutcomeLabel",{defaultMessage:"{errorMessage}",values:{errorMessage:errorMessage}})})}};var import_summary_ImportSummary=function ImportSummary(_ref4){var failedImports=_ref4.failedImports,successfulImports=_ref4.successfulImports;var importItems=external_kbnSharedDeps_Lodash_default.a.sortBy([].concat(import_summary_toConsumableArray(failedImports.map((function(x){return import_summary_mapFailedImport(x)}))),import_summary_toConsumableArray(successfulImports.map((function(x){return import_summary_mapImportSuccess(x)})))),["type","title"]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s","data-test-subj":importItems.length?"importSavedObjectsSuccess":"importSavedObjectsSuccessNoneImported"},external_kbnSharedDeps_React_default.a.createElement("h3",null,importItems.length===1?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.importSummary.headerLabelSingular",defaultMessage:"1 object imported"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.importSummary.headerLabelPlural",defaultMessage:"{importCount} objects imported",values:{importCount:importItems.length}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),import_summary_getCountIndicators(importItems),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),importItems.map((function(item,index){var type=item.type,title=item.title,icon=item.icon;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,key:index,alignItems:"center",gutterSize:"s",className:"savedObjectsManagementImportSummary__row"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:Object(lib["getSavedObjectLabel"])(type)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{"aria-label":Object(lib["getSavedObjectLabel"])(type),type:icon,size:"s"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"savedObjectsManagementImportSummary__title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"eui-textTruncate",title:title},title))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("div",{className:"eui-textRight"},import_summary_getStatusIndicator(item))))})))};function flyout_toConsumableArray(arr){return flyout_arrayWithoutHoles(arr)||flyout_iterableToArray(arr)||flyout_unsupportedIterableToArray(arr)||flyout_nonIterableSpread()}function flyout_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function flyout_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function flyout_arrayWithoutHoles(arr){if(Array.isArray(arr))return flyout_arrayLikeToArray(arr)}function flyout_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function flyout_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){flyout_ownKeys(Object(source),true).forEach((function(key){flyout_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{flyout_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function flyout_slicedToArray(arr,i){return flyout_arrayWithHoles(arr)||flyout_iterableToArrayLimit(arr,i)||flyout_unsupportedIterableToArray(arr,i)||flyout_nonIterableRest()}function flyout_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function flyout_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function flyout_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=flyout_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e3){didErr=true;err=_e3},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function flyout_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return flyout_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return flyout_arrayLikeToArray(o,minLen)}function flyout_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function flyout_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function flyout_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function flyout_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function flyout_createClass(Constructor,protoProps,staticProps){if(protoProps)flyout_defineProperties(Constructor.prototype,protoProps);if(staticProps)flyout_defineProperties(Constructor,staticProps);return Constructor}function flyout_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)flyout_setPrototypeOf(subClass,superClass)}function flyout_setPrototypeOf(o,p){flyout_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return flyout_setPrototypeOf(o,p)}function flyout_createSuper(Derived){var hasNativeReflectConstruct=flyout_isNativeReflectConstruct();return function _createSuperInternal(){var Super=flyout_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=flyout_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return flyout_possibleConstructorReturn(this,result)}}function flyout_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return flyout_assertThisInitialized(self)}function flyout_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function flyout_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function flyout_getPrototypeOf(o){flyout_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return flyout_getPrototypeOf(o)}function flyout_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CREATE_NEW_COPIES_DEFAULT=false;var OVERWRITE_ALL_DEFAULT=true;var flyout_getErrorMessage=function getErrorMessage(e){var _e$body,_e$body2;var errorMessage=((_e$body=e.body)===null||_e$body===void 0?void 0:_e$body.error)&&((_e$body2=e.body)===null||_e$body2===void 0?void 0:_e$body2.message)?"".concat(e.body.error,": ").concat(e.body.message):e.message;return external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.importFileErrorMessage",{defaultMessage:'The file could not be processed due to error: "{error}"',values:{error:errorMessage}})};var flyout_Flyout=function(_Component){flyout_inherits(Flyout,_Component);var _super=flyout_createSuper(Flyout);function Flyout(props){var _this;flyout_classCallCheck(this,Flyout);_this=_super.call(this,props);flyout_defineProperty(flyout_assertThisInitialized(_this),"fetchIndexPatterns",flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$_this$props$in;var indexPatterns;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.indexPatterns.getCache();case 2:_context.t1=_yield$_this$props$in=_context.sent;_context.t0=_context.t1===null;if(_context.t0){_context.next=6;break}_context.t0=_yield$_this$props$in===void 0;case 6:if(!_context.t0){_context.next=10;break}_context.t2=void 0;_context.next=11;break;case 10:_context.t2=_yield$_this$props$in.map((function(savedObject){return{id:savedObject.id,title:savedObject.attributes.title}}));case 11:indexPatterns=_context.t2;_this.setState({indexPatterns:indexPatterns});case 13:case"end":return _context.stop()}}}),_callee)}))));flyout_defineProperty(flyout_assertThisInitialized(_this),"changeImportMode",(function(importMode){_this.setState((function(){return{importMode:importMode}}))}));flyout_defineProperty(flyout_assertThisInitialized(_this),"setImportFile",(function(files){if(!files||!files[0]){_this.setState({file:undefined,isLegacyFile:false});return}var file=files[0];_this.setState({file:file,isLegacyFile:/\.json$/i.test(file.name)||file.type==="application/json"})}));flyout_defineProperty(flyout_assertThisInitialized(_this),"import",flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var http,_this$state,file,importMode,response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:http=_this.props.http;_this$state=_this.state,file=_this$state.file,importMode=_this$state.importMode;_this.setState({status:"loading",error:undefined});_context2.prev=3;_context2.next=6;return Object(lib["importFile"])(http,file,importMode);case 6:response=_context2.sent;_this.setState(Object(lib["processImportResponse"])(response),(function(){var _this$state$unmatched;if(((_this$state$unmatched=_this.state.unmatchedReferences)===null||_this$state$unmatched===void 0?void 0:_this$state$unmatched.length)===0){_this.resolveImportErrors()}}));_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](3);_this.setState({status:"error",error:flyout_getErrorMessage(_context2.t0)});return _context2.abrupt("return");case 14:case"end":return _context2.stop()}}}),_callee2,null,[[3,10]])}))));flyout_defineProperty(flyout_assertThisInitialized(_this),"getConflictResolutions",function(){var _ref3=flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee3(failures){var resolutions,_iterator,_step,_loop;return regeneratorRuntime.wrap((function _callee3$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:resolutions={};_iterator=_createForOfIteratorHelper(failures);_context4.prev=2;_loop=regeneratorRuntime.mark((function _loop(){var conflict,_yield$Promise,_yield$Promise2,overwrite,destinationId,_conflict$obj,type,id;return regeneratorRuntime.wrap((function _loop$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:conflict=_step.value;_context3.next=3;return new Promise((function(done){_this.setState({conflictingRecord:{conflict:conflict,done:done}})}));case 3:_yield$Promise=_context3.sent;_yield$Promise2=flyout_slicedToArray(_yield$Promise,2);overwrite=_yield$Promise2[0];destinationId=_yield$Promise2[1];if(overwrite){_conflict$obj=conflict.obj,type=_conflict$obj.type,id=_conflict$obj.id;resolutions["".concat(type,":").concat(id)]={retry:true,options:flyout_objectSpread({overwrite:true},destinationId&&{destinationId:destinationId})}}_this.setState({conflictingRecord:undefined});case 9:case"end":return _context3.stop()}}}),_loop)}));_iterator.s();case 5:if((_step=_iterator.n()).done){_context4.next=9;break}return _context4.delegateYield(_loop(),"t0",7);case 7:_context4.next=5;break;case 9:_context4.next=14;break;case 11:_context4.prev=11;_context4.t1=_context4["catch"](2);_iterator.e(_context4.t1);case 14:_context4.prev=14;_iterator.f();return _context4.finish(14);case 17:return _context4.abrupt("return",resolutions);case 18:case"end":return _context4.stop()}}}),_callee3,null,[[2,11,14,17]])})));return function(_x){return _ref3.apply(this,arguments)}}());flyout_defineProperty(flyout_assertThisInitialized(_this),"resolveImportErrors",flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var updatedState;return regeneratorRuntime.wrap((function _callee4$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this.setState({error:undefined,status:"loading",loadingMessage:undefined});_context5.prev=1;_context5.next=4;return Object(lib["resolveImportErrors"])({http:_this.props.http,state:_this.state,getConflictResolutions:_this.getConflictResolutions});case 4:updatedState=_context5.sent;_this.setState(updatedState);_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5["catch"](1);_this.setState({status:"error",error:flyout_getErrorMessage(_context5.t0)});case 11:case"end":return _context5.stop()}}}),_callee4,null,[[1,8]])}))));flyout_defineProperty(flyout_assertThisInitialized(_this),"legacyImport",flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var _this$props,serviceRegistry,indexPatterns,overlays,http,allowedTypes,_this$state2,file,importMode,contents,_yield$resolveSavedOb,conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs,importedObjectCount,failedImports,byId,unmatchedReferences;return regeneratorRuntime.wrap((function _callee5$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this$props=_this.props,serviceRegistry=_this$props.serviceRegistry,indexPatterns=_this$props.indexPatterns,overlays=_this$props.overlays,http=_this$props.http,allowedTypes=_this$props.allowedTypes;_this$state2=_this.state,file=_this$state2.file,importMode=_this$state2.importMode;_this.setState({status:"loading",error:undefined});Object(lib["logLegacyImport"])(http);_context6.prev=4;_context6.next=7;return Object(lib["importLegacyFile"])(file);case 7:contents=_context6.sent;_context6.next=14;break;case 10:_context6.prev=10;_context6.t0=_context6["catch"](4);_this.setState({status:"error",error:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.importLegacyFileErrorMessage",{defaultMessage:"The file could not be processed."})});return _context6.abrupt("return");case 14:if(Array.isArray(contents)){_context6.next=17;break}_this.setState({status:"error",error:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.invalidFormatOfImportedFileErrorMessage",{defaultMessage:"Saved objects file format is invalid and cannot be imported."})});return _context6.abrupt("return");case 17:contents=contents.filter((function(content){return allowedTypes.includes(content._type)})).map((function(doc){return flyout_objectSpread(flyout_objectSpread({},doc),{},{_migrationVersion:doc._migrationVersion||{}})}));_context6.next=20;return Object(resolve_saved_objects["b"])(contents,importMode.overwrite,serviceRegistry.all().map((function(e){return e.service})),indexPatterns,overlays.openConfirm);case 20:_yield$resolveSavedOb=_context6.sent;conflictedIndexPatterns=_yield$resolveSavedOb.conflictedIndexPatterns;conflictedSavedObjectsLinkedToSavedSearches=_yield$resolveSavedOb.conflictedSavedObjectsLinkedToSavedSearches;conflictedSearchDocs=_yield$resolveSavedOb.conflictedSearchDocs;importedObjectCount=_yield$resolveSavedOb.importedObjectCount;failedImports=_yield$resolveSavedOb.failedImports;byId={};conflictedIndexPatterns.map((function(_ref6){var doc=_ref6.doc,obj=_ref6.obj;return{doc:doc,obj:obj._serialize()}})).forEach((function(_ref7){var doc=_ref7.doc,obj=_ref7.obj;return obj.references.forEach((function(ref){byId[ref.id]=byId[ref.id]!=null?byId[ref.id].concat({doc:doc,obj:obj}):[{doc:doc,obj:obj}]}))}));unmatchedReferences=Object.entries(byId).reduce((function(accum,_ref8){var _ref9=flyout_slicedToArray(_ref8,2),existingIndexPatternId=_ref9[0],list=_ref9[1];accum.push({existingIndexPatternId:existingIndexPatternId,newIndexPatternId:undefined,list:list.map((function(_ref10){var doc=_ref10.doc;return{id:existingIndexPatternId,type:doc._type,title:doc._source.title}}))});return accum}),[]);_this.setState({conflictedIndexPatterns:conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,failedImports:failedImports,unmatchedReferences:unmatchedReferences,importCount:importedObjectCount,status:unmatchedReferences.length===0?"success":"idle"});case 30:case"end":return _context6.stop()}}}),_callee5,null,[[4,10]])}))));flyout_defineProperty(flyout_assertThisInitialized(_this),"confirmLegacyImport",flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var _this$state3,conflictedIndexPatterns,importMode,conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs,failedImports,_this$props2,serviceRegistry,indexPatterns,search,importCount,resolutions;return regeneratorRuntime.wrap((function _callee6$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_this$state3=_this.state,conflictedIndexPatterns=_this$state3.conflictedIndexPatterns,importMode=_this$state3.importMode,conflictedSavedObjectsLinkedToSavedSearches=_this$state3.conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs=_this$state3.conflictedSearchDocs,failedImports=_this$state3.failedImports;_this$props2=_this.props,serviceRegistry=_this$props2.serviceRegistry,indexPatterns=_this$props2.indexPatterns,search=_this$props2.search;_this.setState({error:undefined,status:"loading",loadingMessage:undefined});importCount=_this.state.importCount;if(!_this.hasUnmatchedReferences){_context7.next=34;break}_context7.prev=5;resolutions=_this.resolutions;_this.setState({loadingMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.confirmLegacyImport.resolvingConflictsLoadingMessage",{defaultMessage:"Resolving conflicts…"})});if(!resolutions.length){_context7.next=13;break}_context7.t0=importCount;_context7.next=12;return Object(resolve_saved_objects["a"])(resolutions,conflictedIndexPatterns,importMode.overwrite,{indexPatterns:indexPatterns,search:search});case 12:importCount=_context7.t0+=_context7.sent;case 13:_this.setState({loadingMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.confirmLegacyImport.savingConflictsLoadingMessage",{defaultMessage:"Saving conflicts…"})});_context7.t1=importCount;_context7.next=17;return Object(resolve_saved_objects["e"])(conflictedSavedObjectsLinkedToSavedSearches,importMode.overwrite);case 17:importCount=_context7.t1+=_context7.sent;_this.setState({loadingMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.confirmLegacyImport.savedSearchAreLinkedProperlyLoadingMessage",{defaultMessage:"Ensure saved searches are linked properly…"})});_context7.t2=importCount;_context7.next=22;return Object(resolve_saved_objects["c"])(conflictedSearchDocs,serviceRegistry.all().map((function(e){return e.service})),indexPatterns,importMode.overwrite);case 22:importCount=_context7.t2+=_context7.sent;_this.setState({loadingMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.confirmLegacyImport.retryingFailedObjectsLoadingMessage",{defaultMessage:"Retrying failed objects…"})});_context7.t3=importCount;_context7.next=27;return Object(resolve_saved_objects["e"])(failedImports.map((function(_ref12){var obj=_ref12.obj;return obj})),importMode.overwrite);case 27:importCount=_context7.t3+=_context7.sent;_context7.next=34;break;case 30:_context7.prev=30;_context7.t4=_context7["catch"](5);_this.setState({status:"error",error:flyout_getErrorMessage(_context7.t4),loadingMessage:undefined});return _context7.abrupt("return");case 34:_this.setState({status:"success",importCount:importCount});case 35:case"end":return _context7.stop()}}}),_callee6,null,[[5,30]])}))));flyout_defineProperty(flyout_assertThisInitialized(_this),"onIndexChanged",(function(id,e){var value=e.target.value;_this.setState((function(state){var _state$unmatchedRefer;var conflictIndex=(_state$unmatchedRefer=state.unmatchedReferences)===null||_state$unmatchedRefer===void 0?void 0:_state$unmatchedRefer.findIndex((function(conflict){return conflict.existingIndexPatternId===id}));if(conflictIndex===undefined||conflictIndex===-1){return state}return{unmatchedReferences:[].concat(flyout_toConsumableArray(state.unmatchedReferences.slice(0,conflictIndex)),[flyout_objectSpread(flyout_objectSpread({},state.unmatchedReferences[conflictIndex]),{},{newIndexPatternId:value})],flyout_toConsumableArray(state.unmatchedReferences.slice(conflictIndex+1)))}}))}));_this.state={conflictedIndexPatterns:undefined,conflictedSavedObjectsLinkedToSavedSearches:undefined,conflictedSearchDocs:undefined,unmatchedReferences:undefined,conflictingRecord:undefined,error:undefined,file:undefined,importCount:0,indexPatterns:undefined,importMode:{createNewCopies:CREATE_NEW_COPIES_DEFAULT,overwrite:OVERWRITE_ALL_DEFAULT},loadingMessage:undefined,isLegacyFile:false,status:"idle"};return _this}flyout_createClass(Flyout,[{key:"componentDidMount",value:function componentDidMount(){this.fetchIndexPatterns()}},{key:"renderUnmatchedReferences",value:function renderUnmatchedReferences(){var _this2=this;var unmatchedReferences=this.state.unmatchedReferences;if(!unmatchedReferences){return null}var columns=[{field:"existingIndexPatternId",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnIdName",{defaultMessage:"ID"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnIdDescription",{defaultMessage:"ID of the index pattern"}),sortable:true},{field:"list",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnCountName",{defaultMessage:"Count"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnCountDescription",{defaultMessage:"How many affected objects"}),render:function render(list){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,list.length)}},{field:"list",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnSampleOfAffectedObjectsName",{defaultMessage:"Sample of affected objects"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnSampleOfAffectedObjectsDescription",{defaultMessage:"Sample of affected objects"}),render:function render(list){return external_kbnSharedDeps_React_default.a.createElement("ul",{style:{listStyle:"none"}},Object(external_kbnSharedDeps_Lodash_["take"])(list,3).map((function(obj,key){return external_kbnSharedDeps_React_default.a.createElement("li",{key:key},obj.title)})))}},{field:"existingIndexPatternId",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnNewIndexPatternName",{defaultMessage:"New index pattern"}),render:function render(id){var options=_this2.state.indexPatterns.map((function(indexPattern){return{text:indexPattern.title,value:indexPattern.id,"data-test-subj":"indexPatternOption-".concat(indexPattern.title)}}));options.unshift({text:"-- Skip Import --",value:""});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{"data-test-subj":"managementChangeIndexSelection-".concat(id),onChange:function onChange(e){return _this2.onIndexChanged(id,e)},options:options})}}];var pagination={pageSizeOptions:[5,10,25]};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:unmatchedReferences,columns:columns,pagination:pagination})}},{key:"renderError",value:function renderError(){var _this$state4=this.state,error=_this$state4.error,status=_this$state4.status;if(status!=="error"){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.errorCalloutTitle",defaultMessage:"Sorry, there was an error"}),color:"danger"},external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"importSavedObjectsErrorText"},error)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}},{key:"renderBody",value:function renderBody(){var _this3=this;var _this$state5=this.state,status=_this$state5.status,loadingMessage=_this$state5.loadingMessage,importCount=_this$state5.importCount,_this$state5$failedIm=_this$state5.failedImports,failedImports=_this$state5$failedIm===void 0?[]:_this$state5$failedIm,_this$state5$successf=_this$state5.successfulImports,successfulImports=_this$state5$successf===void 0?[]:_this$state5$successf,isLegacyFile=_this$state5.isLegacyFile,importMode=_this$state5.importMode;if(status==="loading"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceAround"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingElastic"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,loadingMessage))))}if(isLegacyFile===false&&status==="success"){return external_kbnSharedDeps_React_default.a.createElement(import_summary_ImportSummary,{failedImports:failedImports,successfulImports:successfulImports})}if(failedImports.length&&!this.hasUnmatchedReferences){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"importSavedObjectsFailedWarning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importFailedTitle",defaultMessage:"Import failed"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importFailedDescription",defaultMessage:"Failed to import {failedImportCount} of {totalImportCount} objects. Import failed",values:{failedImportCount:failedImports.length,totalImportCount:importCount+failedImports.length}})),external_kbnSharedDeps_React_default.a.createElement("p",null,failedImports.map((function(_ref13){var _message;var error=_ref13.error,obj=_ref13.obj;if(error.type==="missing_references"){return error.references.map((function(reference){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.importFailedMissingReference",{defaultMessage:"{type} [id={id}] could not locate {refType} [id={refId}]",values:{id:obj.id,type:obj.type,refId:reference.id,refType:reference.type}})}))}else if(error.type==="unsupported_type"){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.importFailedUnsupportedType",{defaultMessage:"{type} [id={id}] unsupported type",values:{id:obj.id,type:obj.type}})}return Object(external_kbnSharedDeps_Lodash_["get"])(error,"body.message",(_message=error.message)!==null&&_message!==void 0?_message:"")})).join(" ")))}if(status==="success"){if(importCount===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"importSavedObjectsSuccessNoneImported",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSuccessfulCallout.noObjectsImportedTitle",defaultMessage:"No objects imported"}),color:"primary"})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"importSavedObjectsSuccess",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSuccessfulTitle",defaultMessage:"Import successful"}),color:"success",iconType:"check"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSuccessfulDescription",defaultMessage:"Successfully imported {importCount} objects.",values:{importCount:importCount}})))}if(this.hasUnmatchedReferences){return this.renderUnmatchedReferences()}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.selectFileToImportFormRowLabel",defaultMessage:"Select a file to import"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilePicker"],{accept:".ndjson, .json",fullWidth:true,initialPromptText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importPromptText",defaultMessage:"Import"}),onChange:this.setImportFile})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(import_mode_control_ImportModeControl,{initialValues:importMode,isLegacyFile:isLegacyFile,updateSelection:function updateSelection(newValues){return _this3.changeImportMode(newValues)}})))}},{key:"renderFooter",value:function renderFooter(){var _this$state6=this.state,isLegacyFile=_this$state6.isLegacyFile,status=_this$state6.status;var _this$props3=this.props,done=_this$props3.done,close=_this$props3.close;var confirmButton;if(status==="success"){confirmButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:done,size:"s",fill:true,"data-test-subj":"importSavedObjectsDoneBtn"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSuccessful.confirmButtonLabel",defaultMessage:"Done"}))}else if(this.hasUnmatchedReferences){confirmButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:isLegacyFile?this.confirmLegacyImport:this.resolveImportErrors,size:"s",fill:true,isLoading:status==="loading","data-test-subj":"importSavedObjectsConfirmBtn"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSuccessful.confirmAllChangesButtonLabel",defaultMessage:"Confirm all changes"}))}else{confirmButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:isLegacyFile?this.legacyImport:this.import,size:"s",fill:true,isLoading:status==="loading","data-test-subj":"importSavedObjectsImportBtn"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.import.confirmButtonLabel",defaultMessage:"Import"}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:close,size:"s",disabled:status==="loading"||isLegacyFile===false&&status==="success","data-test-subj":"importSavedObjectsCancelBtn"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.import.cancelButtonLabel",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},confirmButton))}},{key:"renderSubheader",value:function renderSubheader(){if(this.state.status==="loading"||this.state.status==="success"){return null}var legacyFileWarning;if(this.state.isLegacyFile){legacyFileWarning=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"importSavedObjectsLegacyWarning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.legacyFileUsedTitle",defaultMessage:"Support for JSON files is going away"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.legacyFileUsedBody",defaultMessage:"Use our updated export to generate NDJSON files, and you'll be all set."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}var indexPatternConflictsWarning;if(this.hasUnmatchedReferences){indexPatternConflictsWarning=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"importSavedObjectsConflictsWarning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.indexPatternConflictsTitle",defaultMessage:"Index Pattern Conflicts"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.indexPatternConflictsDescription",defaultMessage:"The following saved objects use index patterns that do not exist. Please select the index patterns you'd like re-associated with them. You can {indexPatternLink} if necessary.",values:{indexPatternLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:this.props.newIndexPatternUrl},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.indexPatternConflictsCalloutLinkText",defaultMessage:"create a new index pattern"}))}})))}if(!legacyFileWarning&&!indexPatternConflictsWarning){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,legacyFileWarning&&external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),legacyFileWarning),indexPatternConflictsWarning&&external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),indexPatternConflictsWarning))}},{key:"render",value:function render(){var close=this.props.close;var confirmOverwriteModal;var conflictingRecord=this.state.conflictingRecord;if(conflictingRecord){var conflict=conflictingRecord.conflict;var onFinish=function onFinish(overwrite,destinationId){return conflictingRecord.done([overwrite,destinationId])};confirmOverwriteModal=external_kbnSharedDeps_React_default.a.createElement(overwrite_modal_OverwriteModal,{conflict:conflict,onFinish:onFinish})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:close,size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSavedObjectTitle",defaultMessage:"Import saved objects"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,this.renderSubheader(),this.renderError(),this.renderBody()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,this.renderFooter()),confirmOverwriteModal)}},{key:"hasUnmatchedReferences",get:function get(){return this.state.unmatchedReferences&&this.state.unmatchedReferences.length>0}},{key:"resolutions",get:function get(){return this.state.unmatchedReferences.reduce((function(accum,_ref14){var existingIndexPatternId=_ref14.existingIndexPatternId,newIndexPatternId=_ref14.newIndexPatternId;if(newIndexPatternId){accum.push({oldId:existingIndexPatternId,newId:newIndexPatternId})}return accum}),[])}}]);return Flyout}(external_kbnSharedDeps_React_["Component"]);function relationships_toConsumableArray(arr){return relationships_arrayWithoutHoles(arr)||relationships_iterableToArray(arr)||relationships_unsupportedIterableToArray(arr)||relationships_nonIterableSpread()}function relationships_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function relationships_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return relationships_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return relationships_arrayLikeToArray(o,minLen)}function relationships_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function relationships_arrayWithoutHoles(arr){if(Array.isArray(arr))return relationships_arrayLikeToArray(arr)}function relationships_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function relationships_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function relationships_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){relationships_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){relationships_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function relationships_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function relationships_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function relationships_createClass(Constructor,protoProps,staticProps){if(protoProps)relationships_defineProperties(Constructor.prototype,protoProps);if(staticProps)relationships_defineProperties(Constructor,staticProps);return Constructor}function relationships_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)relationships_setPrototypeOf(subClass,superClass)}function relationships_setPrototypeOf(o,p){relationships_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return relationships_setPrototypeOf(o,p)}function relationships_createSuper(Derived){var hasNativeReflectConstruct=relationships_isNativeReflectConstruct();return function _createSuperInternal(){var Super=relationships_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=relationships_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return relationships_possibleConstructorReturn(this,result)}}function relationships_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return relationships_assertThisInitialized(self)}function relationships_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function relationships_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function relationships_getPrototypeOf(o){relationships_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return relationships_getPrototypeOf(o)}var relationships_Relationships=function(_Component){relationships_inherits(Relationships,_Component);var _super=relationships_createSuper(Relationships);function Relationships(props){var _this;relationships_classCallCheck(this,Relationships);_this=_super.call(this,props);_this.state={relationships:[],isLoading:false,error:undefined};return _this}relationships_createClass(Relationships,[{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){this.getRelationshipData()}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.savedObject.id!==this.props.savedObject.id){this.getRelationshipData()}}},{key:"getRelationshipData",value:function(){var _getRelationshipData=relationships_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,savedObject,getRelationships,relationships;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=this.props,savedObject=_this$props.savedObject,getRelationships=_this$props.getRelationships;this.setState({isLoading:true});_context.prev=2;_context.next=5;return getRelationships(savedObject.type,savedObject.id);case 5:relationships=_context.sent;this.setState({relationships:relationships,isLoading:false,error:undefined});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](2);this.setState({error:_context.t0.message,isLoading:false});case 12:case"end":return _context.stop()}}}),_callee,this,[[2,9]])})));function getRelationshipData(){return _getRelationshipData.apply(this,arguments)}return getRelationshipData}()},{key:"renderError",value:function renderError(){var error=this.state.error;if(!error){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.relationships.renderErrorMessage",defaultMessage:"Error"}),color:"danger"},error)}},{key:"renderRelationships",value:function renderRelationships(){var _this2=this;var _this$props2=this.props,goInspectObject=_this$props2.goInspectObject,savedObject=_this$props2.savedObject,basePath=_this$props2.basePath;var _this$state=this.state,relationships=_this$state.relationships,isLoading=_this$state.isLoading,error=_this$state.error;if(error){return this.renderError()}if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingElastic"],{size:"xl"})}var columns=[{field:"type",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnTypeName",{defaultMessage:"Type"}),width:"50px",align:"center",description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnTypeDescription",{defaultMessage:"Type of the saved object"}),sortable:false,render:function render(type,object){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:Object(lib["getSavedObjectLabel"])(type)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{"aria-label":Object(lib["getSavedObjectLabel"])(type),type:object.meta.icon||"apps",size:"s","data-test-subj":"relationshipsObjectType"}))}},{field:"relationship",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnRelationshipName",{defaultMessage:"Direct relationship"}),dataType:"string",sortable:false,width:"125px","data-test-subj":"directRelationship",render:function render(relationship){if(relationship==="parent"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.relationships.columnRelationship.parentAsValue",defaultMessage:"Parent"}))}if(relationship==="child"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.relationships.columnRelationship.childAsValue",defaultMessage:"Child"}))}}},{field:"meta.title",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnTitleName",{defaultMessage:"Title"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnTitleDescription",{defaultMessage:"Title of the saved object"}),dataType:"string",sortable:false,render:function render(title,object){var _ref=object.meta.inAppUrl||{},_ref$path=_ref.path,path=_ref$path===void 0?"":_ref$path;var canGoInApp=_this2.props.canGoInApp(object);if(!canGoInApp){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s","data-test-subj":"relationshipsTitle"},title||Object(lib["getDefaultTitle"])(object))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:basePath.prepend(path),"data-test-subj":"relationshipsTitle"},title||Object(lib["getDefaultTitle"])(object))}},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnActionsName",{defaultMessage:"Actions"}),actions:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnActions.inspectActionName",{defaultMessage:"Inspect"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnActions.inspectActionDescription",{defaultMessage:"Inspect this saved object"}),type:"icon",icon:"inspect","data-test-subj":"relationshipsTableAction-inspect",onClick:function onClick(object){return goInspectObject(object)},available:function available(object){return!!object.meta.editUrl}}]}];var filterTypesMap=new Map(relationships.map((function(relationship){return[relationship.type,{value:relationship.type,name:relationship.type,view:relationship.type}]})));var search={filters:[{type:"field_value_selection",field:"relationship",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.search.filters.relationship.name",{defaultMessage:"Direct relationship"}),multiSelect:"or",options:[{value:"parent",name:"parent",view:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.search.filters.relationship.parentAsValue.view",{defaultMessage:"Parent"})},{value:"child",name:"child",view:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.search.filters.relationship.childAsValue.view",{defaultMessage:"Child"})}]},{type:"field_value_selection",field:"type",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.search.filters.type.name",{defaultMessage:"Type"}),multiSelect:"or",options:relationships_toConsumableArray(filterTypesMap.values())}]};return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.relationshipsTitle",{defaultMessage:"Here are the saved objects related to {title}. "+"Deleting this {type} affects its parent objects, but not its children.",values:{type:savedObject.type,title:savedObject.meta.title||Object(lib["getDefaultTitle"])(savedObject)}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:relationships,columns:columns,pagination:true,search:search,rowProps:function rowProps(){return{"data-test-subj":"relationshipsTableRow"}}}))}},{key:"render",value:function render(){var _this$props3=this.props,close=_this$props3.close,savedObject=_this$props3.savedObject;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:Object(lib["getSavedObjectLabel"])(savedObject.type)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{"aria-label":Object(lib["getSavedObjectLabel"])(savedObject.type),size:"m",type:savedObject.meta.icon||"apps"})),"  ",savedObject.meta.title||Object(lib["getDefaultTitle"])(savedObject)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,this.renderRelationships()))}}]);return Relationships}(external_kbnSharedDeps_React_["Component"]);function saved_objects_table_slicedToArray(arr,i){return saved_objects_table_arrayWithHoles(arr)||saved_objects_table_iterableToArrayLimit(arr,i)||saved_objects_table_unsupportedIterableToArray(arr,i)||saved_objects_table_nonIterableRest()}function saved_objects_table_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function saved_objects_table_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return saved_objects_table_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return saved_objects_table_arrayLikeToArray(o,minLen)}function saved_objects_table_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function saved_objects_table_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function saved_objects_table_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function saved_objects_table_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function saved_objects_table_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){saved_objects_table_ownKeys(Object(source),true).forEach((function(key){saved_objects_table_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{saved_objects_table_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function saved_objects_table_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function saved_objects_table_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){saved_objects_table_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){saved_objects_table_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saved_objects_table_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function saved_objects_table_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function saved_objects_table_createClass(Constructor,protoProps,staticProps){if(protoProps)saved_objects_table_defineProperties(Constructor.prototype,protoProps);if(staticProps)saved_objects_table_defineProperties(Constructor,staticProps);return Constructor}function saved_objects_table_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)saved_objects_table_setPrototypeOf(subClass,superClass)}function saved_objects_table_setPrototypeOf(o,p){saved_objects_table_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return saved_objects_table_setPrototypeOf(o,p)}function saved_objects_table_createSuper(Derived){var hasNativeReflectConstruct=saved_objects_table_isNativeReflectConstruct();return function _createSuperInternal(){var Super=saved_objects_table_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=saved_objects_table_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return saved_objects_table_possibleConstructorReturn(this,result)}}function saved_objects_table_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return saved_objects_table_assertThisInitialized(self)}function saved_objects_table_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function saved_objects_table_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function saved_objects_table_getPrototypeOf(o){saved_objects_table_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return saved_objects_table_getPrototypeOf(o)}function saved_objects_table_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var saved_objects_table_SavedObjectsTable=function(_Component){saved_objects_table_inherits(SavedObjectsTable,_Component);var _super=saved_objects_table_createSuper(SavedObjectsTable);function SavedObjectsTable(props){var _this;saved_objects_table_classCallCheck(this,SavedObjectsTable);_this=_super.call(this,props);saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"_isMounted",false);saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"fetchCounts",saved_objects_table_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var allowedTypes,_parseQuery,queryText,visibleTypes,filteredTypes,filteredSavedObjectCounts,exportAllOptions,exportAllSelectedOptions,savedObjectCounts;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:allowedTypes=_this.props.allowedTypes;_parseQuery=Object(lib["parseQuery"])(_this.state.activeQuery),queryText=_parseQuery.queryText,visibleTypes=_parseQuery.visibleTypes;filteredTypes=allowedTypes.filter((function(type){return!visibleTypes||visibleTypes.includes(type)}));_context.next=5;return Object(lib["getSavedObjectCounts"])(_this.props.http,filteredTypes,queryText);case 5:filteredSavedObjectCounts=_context.sent;exportAllOptions=[];exportAllSelectedOptions={};Object.keys(filteredSavedObjectCounts).forEach((function(id){exportAllOptions.push({id:id,label:"".concat(id," (").concat(filteredSavedObjectCounts[id]||0,")")});exportAllSelectedOptions[id]=true}));_context.next=11;return Object(lib["getSavedObjectCounts"])(_this.props.http,allowedTypes,queryText);case 11:savedObjectCounts=_context.sent;_this.setState((function(state){return saved_objects_table_objectSpread(saved_objects_table_objectSpread({},state),{},{savedObjectCounts:savedObjectCounts,exportAllOptions:exportAllOptions,exportAllSelectedOptions:exportAllSelectedOptions})}));case 13:case"end":return _context.stop()}}}),_callee)}))));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"fetchSavedObjects",(function(){_this.setState({isSearching:true},_this.debouncedFetchObjects)}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"fetchSavedObject",(function(type,id){_this.setState({isSearching:true},(function(){return _this.debouncedFetchObject(type,id)}))}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"debouncedFetchObjects",Object(external_kbnSharedDeps_Lodash_["debounce"])(saved_objects_table_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this$state,query,page,perPage,_this$props,notifications,http,allowedTypes,_parseQuery2,queryText,visibleTypes,findOptions,resp;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state=_this.state,query=_this$state.activeQuery,page=_this$state.page,perPage=_this$state.perPage;_this$props=_this.props,notifications=_this$props.notifications,http=_this$props.http,allowedTypes=_this$props.allowedTypes;_parseQuery2=Object(lib["parseQuery"])(query),queryText=_parseQuery2.queryText,visibleTypes=_parseQuery2.visibleTypes;findOptions={search:queryText?"".concat(queryText,"*"):undefined,perPage:perPage,page:page+1,fields:["id"],type:allowedTypes.filter((function(type){return!visibleTypes||visibleTypes.includes(type)}))};if(findOptions.type.length>1){findOptions.sortField="type"}_context2.prev=5;_context2.next=8;return Object(lib["findObjects"])(http,findOptions);case 8:resp=_context2.sent;if(_this._isMounted){_context2.next=11;break}return _context2.abrupt("return");case 11:_this.setState((function(_ref3){var activeQuery=_ref3.activeQuery;if(activeQuery.text!==query.text){return null}return{savedObjects:resp.savedObjects,filteredItemCount:resp.total,isSearching:false}}));_context2.next=18;break;case 14:_context2.prev=14;_context2.t0=_context2["catch"](5);if(_this._isMounted){_this.setState({isSearching:false})}notifications.toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.unableFindSavedObjectsNotificationMessage",{defaultMessage:"Unable find saved objects"}),text:"".concat(_context2.t0)});case 18:case"end":return _context2.stop()}}}),_callee2,null,[[5,14]])}))),300));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"debouncedFetchObject",Object(external_kbnSharedDeps_Lodash_["debounce"])(function(){var _ref4=saved_objects_table_asyncToGenerator(regeneratorRuntime.mark((function _callee3(type,id){var _this$props2,notifications,http,resp;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props2=_this.props,notifications=_this$props2.notifications,http=_this$props2.http;_context3.prev=1;_context3.next=4;return Object(lib["findObject"])(http,type,id);case 4:resp=_context3.sent;if(_this._isMounted){_context3.next=7;break}return _context3.abrupt("return");case 7:_this.setState((function(_ref5){var savedObjects=_ref5.savedObjects,filteredItemCount=_ref5.filteredItemCount;var refreshedSavedObjects=savedObjects.map((function(object){return object.type===type&&object.id===id?resp:object}));return{savedObjects:refreshedSavedObjects,filteredItemCount:filteredItemCount,isSearching:false}}));_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3["catch"](1);if(_this._isMounted){_this.setState({isSearching:false})}notifications.toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.unableFindSavedObjectNotificationMessage",{defaultMessage:"Unable to find saved object"}),text:"".concat(_context3.t0)});case 14:case"end":return _context3.stop()}}}),_callee3,null,[[1,10]])})));return function(_x,_x2){return _ref4.apply(this,arguments)}}(),300));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"refreshObjects",saved_objects_table_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Promise.all([_this.fetchSavedObjects(),_this.fetchCounts()]);case 2:case"end":return _context4.stop()}}}),_callee4)}))));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"refreshObject",function(){var _ref8=saved_objects_table_asyncToGenerator(regeneratorRuntime.mark((function _callee5(_ref7){var type,id;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:type=_ref7.type,id=_ref7.id;_context5.next=3;return _this.fetchSavedObject(type,id);case 3:case"end":return _context5.stop()}}}),_callee5)})));return function(_x3){return _ref8.apply(this,arguments)}}());saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"onSelectionChanged",(function(selection){_this.setState({selectedSavedObjects:selection})}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"onQueryChange",(function(_ref9){var query=_ref9.query;_this.setState({activeQuery:query,page:0,selectedSavedObjects:[]},(function(){_this.fetchSavedObjects();_this.fetchCounts()}))}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"onTableChange",function(){var _ref10=saved_objects_table_asyncToGenerator(regeneratorRuntime.mark((function _callee6(table){var _ref11,page,perPage;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_ref11=table.page||{},page=_ref11.index,perPage=_ref11.size;_this.setState({page:page,perPage:perPage,selectedSavedObjects:[]},_this.fetchSavedObjects);case 2:case"end":return _context6.stop()}}}),_callee6)})));return function(_x4){return _ref10.apply(this,arguments)}}());saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"onShowRelationships",(function(object){_this.setState({isShowingRelationships:true,relationshipObject:object})}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"onHideRelationships",(function(){_this.setState({isShowingRelationships:false,relationshipObject:undefined})}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"onExport",function(){var _ref12=saved_objects_table_asyncToGenerator(regeneratorRuntime.mark((function _callee7(includeReferencesDeep){var selectedSavedObjects,_this$props3,notifications,http,objectsToExport,blob,exportDetails;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:selectedSavedObjects=_this.state.selectedSavedObjects;_this$props3=_this.props,notifications=_this$props3.notifications,http=_this$props3.http;objectsToExport=selectedSavedObjects.map((function(obj){return{id:obj.id,type:obj.type}}));_context7.prev=3;_context7.next=6;return Object(lib["fetchExportObjects"])(http,objectsToExport,includeReferencesDeep);case 6:blob=_context7.sent;_context7.next=13;break;case 9:_context7.prev=9;_context7.t0=_context7["catch"](3);notifications.toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.export.dangerNotification",{defaultMessage:"Unable to generate export"})});throw _context7.t0;case 13:Object(file_saver["saveAs"])(blob,"export.ndjson");_context7.next=16;return Object(lib["extractExportDetails"])(blob);case 16:exportDetails=_context7.sent;_this.showExportSuccessMessage(exportDetails);case 18:case"end":return _context7.stop()}}}),_callee7,null,[[3,9]])})));return function(_x5){return _ref12.apply(this,arguments)}}());saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"onExportAll",saved_objects_table_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var _this$state2,exportAllSelectedOptions,isIncludeReferencesDeepChecked,activeQuery,_this$props4,notifications,http,_parseQuery3,queryText,exportTypes,blob,exportDetails;return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_this$state2=_this.state,exportAllSelectedOptions=_this$state2.exportAllSelectedOptions,isIncludeReferencesDeepChecked=_this$state2.isIncludeReferencesDeepChecked,activeQuery=_this$state2.activeQuery;_this$props4=_this.props,notifications=_this$props4.notifications,http=_this$props4.http;_parseQuery3=Object(lib["parseQuery"])(activeQuery),queryText=_parseQuery3.queryText;exportTypes=Object.entries(exportAllSelectedOptions).reduce((function(accum,_ref14){var _ref15=saved_objects_table_slicedToArray(_ref14,2),id=_ref15[0],selected=_ref15[1];if(selected){accum.push(id)}return accum}),[]);_context8.prev=4;_context8.next=7;return Object(lib["fetchExportByTypeAndSearch"])(http,exportTypes,queryText?"".concat(queryText,"*"):undefined,isIncludeReferencesDeepChecked);case 7:blob=_context8.sent;_context8.next=14;break;case 10:_context8.prev=10;_context8.t0=_context8["catch"](4);notifications.toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.export.dangerNotification",{defaultMessage:"Unable to generate export"})});throw _context8.t0;case 14:Object(file_saver["saveAs"])(blob,"export.ndjson");_context8.next=17;return Object(lib["extractExportDetails"])(blob);case 17:exportDetails=_context8.sent;_this.showExportSuccessMessage(exportDetails);_this.setState({isShowingExportAllOptionsModal:false});case 20:case"end":return _context8.stop()}}}),_callee8,null,[[4,10]])}))));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"showExportSuccessMessage",(function(exportDetails){var notifications=_this.props.notifications;if(exportDetails&&exportDetails.missingReferences.length>0){notifications.toasts.addWarning({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.export.successWithMissingRefsNotification",{defaultMessage:"Your file is downloading in the background. "+"Some related objects could not be found. "+"Please see the last line in the exported file for a list of missing objects."})})}else{notifications.toasts.addSuccess({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.export.successNotification",{defaultMessage:"Your file is downloading in the background"})})}}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"finishImport",(function(){_this.hideImportFlyout();_this.fetchSavedObjects();_this.fetchCounts()}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"showImportFlyout",(function(){_this.setState({isShowingImportFlyout:true})}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"hideImportFlyout",(function(){_this.setState({isShowingImportFlyout:false})}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"onDelete",(function(){_this.setState({isShowingDeleteConfirmModal:true})}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"delete",saved_objects_table_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var savedObjectsClient,_this$state3,selectedSavedObjects,isDeleting,indexPatterns,objects,deletes;return regeneratorRuntime.wrap((function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:savedObjectsClient=_this.props.savedObjectsClient;_this$state3=_this.state,selectedSavedObjects=_this$state3.selectedSavedObjects,isDeleting=_this$state3.isDeleting;if(!isDeleting){_context9.next=4;break}return _context9.abrupt("return");case 4:_this.setState({isDeleting:true});indexPatterns=selectedSavedObjects.filter((function(object){return object.type==="index-pattern"}));if(!indexPatterns.length){_context9.next=9;break}_context9.next=9;return _this.props.indexPatterns.clearCache();case 9:_context9.next=11;return savedObjectsClient.bulkGet(selectedSavedObjects);case 11:objects=_context9.sent;deletes=objects.savedObjects.map((function(object){return savedObjectsClient.delete(object.type,object.id,{force:true})}));_context9.next=15;return Promise.all(deletes);case 15:_this.setState({selectedSavedObjects:[]});_context9.next=18;return _this.fetchSavedObjects();case 18:_context9.next=20;return _this.fetchCounts();case 20:_this.setState({isShowingDeleteConfirmModal:false,isDeleting:false});case 21:case"end":return _context9.stop()}}}),_callee9)}))));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"getRelationships",function(){var _ref17=saved_objects_table_asyncToGenerator(regeneratorRuntime.mark((function _callee10(type,id){var _this$props5,allowedTypes,http;return regeneratorRuntime.wrap((function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_this$props5=_this.props,allowedTypes=_this$props5.allowedTypes,http=_this$props5.http;_context10.next=3;return Object(lib["getRelationships"])(http,type,id,allowedTypes);case 3:return _context10.abrupt("return",_context10.sent);case 4:case"end":return _context10.stop()}}}),_callee10)})));return function(_x6,_x7){return _ref17.apply(this,arguments)}}());saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"changeIncludeReferencesDeep",(function(){_this.setState((function(state){return{isIncludeReferencesDeepChecked:!state.isIncludeReferencesDeepChecked}}))}));saved_objects_table_defineProperty(saved_objects_table_assertThisInitialized(_this),"closeExportAllModal",(function(){_this.setState({isShowingExportAllOptionsModal:false})}));_this.state={totalCount:0,page:0,perPage:props.perPageConfig||50,savedObjects:[],savedObjectCounts:props.allowedTypes.reduce((function(typeToCountMap,type){typeToCountMap[type]=0;return typeToCountMap}),{}),activeQuery:external_kbnSharedDeps_ElasticEui_["Query"].parse(""),selectedSavedObjects:[],isShowingImportFlyout:false,isSearching:false,filteredItemCount:0,isShowingRelationships:false,relationshipObject:undefined,isShowingDeleteConfirmModal:false,isShowingExportAllOptionsModal:false,isDeleting:false,exportAllOptions:[],exportAllSelectedOptions:{},isIncludeReferencesDeepChecked:true};return _this}saved_objects_table_createClass(SavedObjectsTable,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.fetchSavedObjects();this.fetchCounts()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.debouncedFetchObjects.cancel()}},{key:"renderFlyout",value:function renderFlyout(){if(!this.state.isShowingImportFlyout){return null}var applications=this.props.applications;var newIndexPatternUrl=applications.getUrlForApp("management",{path:"kibana/indexPatterns"});return external_kbnSharedDeps_React_default.a.createElement(flyout_Flyout,{close:this.hideImportFlyout,done:this.finishImport,http:this.props.http,serviceRegistry:this.props.serviceRegistry,indexPatterns:this.props.indexPatterns,newIndexPatternUrl:newIndexPatternUrl,allowedTypes:this.props.allowedTypes,overlays:this.props.overlays,search:this.props.search})}},{key:"renderRelationships",value:function renderRelationships(){if(!this.state.isShowingRelationships){return null}return external_kbnSharedDeps_React_default.a.createElement(relationships_Relationships,{basePath:this.props.http.basePath,savedObject:this.state.relationshipObject,getRelationships:this.getRelationships,close:this.onHideRelationships,goInspectObject:this.props.goInspectObject,canGoInApp:this.props.canGoInApp})}},{key:"renderDeleteConfirmModal",value:function renderDeleteConfirmModal(){var _this2=this;var _this$state4=this.state,isShowingDeleteConfirmModal=_this$state4.isShowingDeleteConfirmModal,isDeleting=_this$state4.isDeleting,selectedSavedObjects=_this$state4.selectedSavedObjects;if(!isShowingDeleteConfirmModal){return null}var modal;if(isDeleting){modal=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingElastic"],{size:"xl"})}else{var onCancel=function onCancel(){_this2.setState({isShowingDeleteConfirmModal:false})};var onConfirm=function onConfirm(){_this2.delete()};modal=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModalTitle",defaultMessage:"Delete saved objects"}),onCancel:onCancel,onConfirm:onConfirm,buttonColor:"danger",cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:isDeleting?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.deleteProcessButtonLabel",defaultMessage:"Deleting…"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.deleteButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:external_kbnSharedDeps_ElasticEui_["EUI_MODAL_CONFIRM_BUTTON"]},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.deleteSavedObjectsConfirmModalDescription",defaultMessage:"This action will delete the following saved objects:"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:selectedSavedObjects,columns:[{field:"type",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.typeColumnName",{defaultMessage:"Type"}),width:"50px",render:function render(type,object){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:Object(lib["getSavedObjectLabel"])(type)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:object.meta.icon||"apps"}))}},{field:"id",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.idColumnName",{defaultMessage:"Id"})},{field:"meta.title",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.titleColumnName",{defaultMessage:"Title"})}],pagination:true,sorting:false}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,modal)}},{key:"renderExportAllOptionsModal",value:function renderExportAllOptionsModal(){var _this3=this;var _this$state5=this.state,isShowingExportAllOptionsModal=_this$state5.isShowingExportAllOptionsModal,filteredItemCount=_this$state5.filteredItemCount,exportAllOptions=_this$state5.exportAllOptions,exportAllSelectedOptions=_this$state5.exportAllSelectedOptions,isIncludeReferencesDeepChecked=_this$state5.isIncludeReferencesDeepChecked;if(!isShowingExportAllOptionsModal){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:this.closeExportAllModal},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModalTitle",defaultMessage:"Export {filteredItemCount, plural, one{# object} other {# objects}}",values:{filteredItemCount:filteredItemCount}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModalDescription",defaultMessage:"Select which types to export"}),labelType:"legend"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckboxGroup"],{options:exportAllOptions,idToSelectedMap:exportAllSelectedOptions,onChange:function onChange(optionId){var newExportAllSelectedOptions=saved_objects_table_objectSpread(saved_objects_table_objectSpread({},exportAllSelectedOptions),{[optionId]:!exportAllSelectedOptions[optionId]});_this3.setState({exportAllSelectedOptions:newExportAllSelectedOptions})}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{name:"includeReferencesDeep",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModal.includeReferencesDeepLabel",defaultMessage:"Include related objects"}),checked:isIncludeReferencesDeepChecked,onChange:this.changeIncludeReferencesDeep})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this.closeExportAllModal},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:this.onExportAll},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModal.exportAllButtonLabel",defaultMessage:"Export all"})))))))))}},{key:"render",value:function render(){var _this4=this;var _this$state6=this.state,selectedSavedObjects=_this$state6.selectedSavedObjects,page=_this$state6.page,perPage=_this$state6.perPage,savedObjects=_this$state6.savedObjects,filteredItemCount=_this$state6.filteredItemCount,isSearching=_this$state6.isSearching,savedObjectCounts=_this$state6.savedObjectCounts;var _this$props6=this.props,http=_this$props6.http,allowedTypes=_this$props6.allowedTypes,applications=_this$props6.applications;var selectionConfig={onSelectionChange:this.onSelectionChanged};var filterOptions=allowedTypes.map((function(type){return{value:type,name:type,view:"".concat(type," (").concat(savedObjectCounts[type]||0,")")}}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{horizontalPosition:"center"},this.renderFlyout(),this.renderRelationships(),this.renderDeleteConfirmModal(),this.renderExportAllOptionsModal(),external_kbnSharedDeps_React_default.a.createElement(header_Header,{onExportAll:function onExportAll(){return _this4.setState({isShowingExportAllOptionsModal:true})},onImport:this.showImportFlyout,onRefresh:this.refreshObjects,filteredCount:filteredItemCount}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(public_["RedirectAppLinks"],{application:applications},external_kbnSharedDeps_React_default.a.createElement(table_Table,{basePath:http.basePath,itemId:"id",actionRegistry:this.props.actionRegistry,columnRegistry:this.props.columnRegistry,selectionConfig:selectionConfig,selectedSavedObjects:selectedSavedObjects,onQueryChange:this.onQueryChange,onTableChange:this.onTableChange,filterOptions:filterOptions,onExport:this.onExport,canDelete:applications.capabilities.savedObjectsManagement.delete,onDelete:this.onDelete,onActionRefresh:this.refreshObject,goInspectObject:this.props.goInspectObject,pageIndex:page,pageSize:perPage,items:savedObjects,totalItemCount:filteredItemCount,isSearching:isSearching,onShowRelationships:this.onShowRelationships,canGoInApp:this.props.canGoInApp})))}}]);return SavedObjectsTable}(external_kbnSharedDeps_React_["Component"]);var saved_objects_table_page_SavedObjectsTablePage=function SavedObjectsTablePage(_ref){var coreStart=_ref.coreStart,dataStart=_ref.dataStart,allowedTypes=_ref.allowedTypes,serviceRegistry=_ref.serviceRegistry,actionRegistry=_ref.actionRegistry,columnRegistry=_ref.columnRegistry,setBreadcrumbs=_ref.setBreadcrumbs;var capabilities=coreStart.application.capabilities;var itemsPerPage=coreStart.uiSettings.get("savedObjects:perPage",50);Object(external_kbnSharedDeps_React_["useEffect"])((function(){setBreadcrumbs([{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.breadcrumb.index",{defaultMessage:"Saved objects"}),href:"/"}])}),[setBreadcrumbs]);return external_kbnSharedDeps_React_default.a.createElement(saved_objects_table_SavedObjectsTable,{allowedTypes:allowedTypes,serviceRegistry:serviceRegistry,actionRegistry:actionRegistry,columnRegistry:columnRegistry,savedObjectsClient:coreStart.savedObjects.client,indexPatterns:dataStart.indexPatterns,search:dataStart.search,http:coreStart.http,overlays:coreStart.overlays,notifications:coreStart.notifications,applications:coreStart.application,perPageConfig:itemsPerPage,goInspectObject:function goInspectObject(savedObject){var editUrl=savedObject.meta.editUrl;if(editUrl){return coreStart.application.navigateToUrl(coreStart.http.basePath.prepend("/app".concat(editUrl)))}},canGoInApp:function canGoInApp(savedObject){var inAppUrl=savedObject.meta.inAppUrl;return inAppUrl?Boolean(Object(external_kbnSharedDeps_Lodash_["get"])(capabilities,inAppUrl.uiCapabilitiesPath)):false}})}}}]);