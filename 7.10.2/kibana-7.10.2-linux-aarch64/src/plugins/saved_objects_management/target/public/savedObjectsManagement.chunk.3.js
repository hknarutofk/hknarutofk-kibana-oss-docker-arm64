(window["savedObjectsManagement_bundle_jsonpfunction"]=window["savedObjectsManagement_bundle_jsonpfunction"]||[]).push([[3],{30:function(module,exports,__webpack_require__){var assignValue=__webpack_require__(40),castPath=__webpack_require__(52),isFunction=__webpack_require__(31),isIndex=__webpack_require__(81),isObject=__webpack_require__(27),toKey=__webpack_require__(82);function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(key=="prototype"&&isFunction(nested)){throw new Error("Illegal access of function prototype")}if(index!=lastIndex){var objValue=hasOwnProperty.call(nested,key)?nested[key]:undefined;newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},38:function(module,exports,__webpack_require__){exports.set=__webpack_require__(39);exports.setWith=__webpack_require__(83)},39:function(module,exports,__webpack_require__){var baseSet=__webpack_require__(30);function set(object,path,value){return object==null?object:baseSet(object,path,value)}module.exports=set},83:function(module,exports,__webpack_require__){var baseSet=__webpack_require__(30);function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}module.exports=setWith},97:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return saved_objects_edition_page_SavedObjectsEditionPage}));var external_kbnSharedDeps_React_=__webpack_require__(12);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(15);var query_string=__webpack_require__(34);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(13);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(14);var header_Header=function Header(_ref){var canEdit=_ref.canEdit,canDelete=_ref.canDelete,canViewInApp=_ref.canViewInApp,type=_ref.type,viewUrl=_ref.viewUrl,onDeleteClick=_ref.onDeleteClick;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,canEdit?external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.editItemTitle",defaultMessage:"Edit {title}",values:{title:type}})):external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.viewItemTitle",defaultMessage:"View {title}",values:{title:type}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},canViewInApp&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",href:viewUrl,iconType:"eye","data-test-subj":"savedObjectEditViewInApp"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.viewItemButtonLabel",defaultMessage:"View {title}",values:{title:type}}))),canDelete&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"danger",size:"s",iconType:"trash",onClick:function onClick(){return onDeleteClick()},"data-test-subj":"savedObjectEditDelete"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.deleteItemButtonLabel",defaultMessage:"Delete {title}",values:{title:type}}))))))};var not_found_errors_NotFoundErrors=function NotFoundErrors(_ref){var type=_ref.type;var getMessage=function getMessage(){switch(type){case"search":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.savedSearchDoesNotExistErrorMessage",defaultMessage:"The saved search associated with this object no longer exists."});case"index-pattern":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.indexPatternDoesNotExistErrorMessage",defaultMessage:"The index pattern associated with this object no longer exists."});case"index-pattern-field":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.fieldDoesNotExistErrorMessage",defaultMessage:"A field associated with this object no longer exists in the index pattern."});default:return null}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.savedObjectProblemErrorMessage",defaultMessage:"There is a problem with this saved object"}),iconType:"alert",color:"danger"},external_kbnSharedDeps_React_default.a.createElement("div",null,getMessage()),external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.howToFixErrorDescription",defaultMessage:"If you know what this error means, go ahead and fix it — otherwise click the delete button above."})))};var intro_Intro=function Intro(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.howToModifyObjectTitle",defaultMessage:"Proceed with caution!"}),iconType:"alert",color:"warning"},external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.howToModifyObjectDescription",defaultMessage:"Modifying objects is for advanced users only. Object properties are not validated and invalid objects could cause errors, data loss, or worse. Unless someone with intimate knowledge of the code told you to be in here, you probably shouldn’t be."})))};var elastic_safer_lodash_set=__webpack_require__(38);var external_kbnSharedDeps_Lodash_=__webpack_require__(0);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var field_Field=function(_PureComponent){_inherits(Field,_PureComponent);var _super=_createSuper(Field);function Field(){_classCallCheck(this,Field);return _super.apply(this,arguments)}_createClass(Field,[{key:"render",value:function render(){var name=this.props.name;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:name},this.renderField())}},{key:"onCodeEditorChange",value:function onCodeEditorChange(targetValue){var _this$props=this.props,name=_this$props.name,onChange=_this$props.onChange;var invalid=false;try{JSON.parse(targetValue)}catch(e){invalid=true}onChange(name,{value:targetValue,invalid:invalid})}},{key:"onFieldChange",value:function onFieldChange(targetValue){var _this$props2=this.props,name=_this$props2.name,type=_this$props2.type,onChange=_this$props2.onChange;var newParsedValue=targetValue;var invalid=false;if(type==="number"){try{newParsedValue=Number(newParsedValue)}catch(e){invalid=true}}onChange(name,{value:newParsedValue,invalid:invalid})}},{key:"renderField",value:function renderField(){var _state$value,_this=this;var _this$props3=this.props,type=_this$props3.type,name=_this$props3.name,state=_this$props3.state,disabled=_this$props3.disabled;var currentValue=(_state$value=state===null||state===void 0?void 0:state.value)!==null&&_state$value!==void 0?_state$value:this.props.value;switch(type){case"number":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{name:name,id:this.fieldId,value:currentValue,onChange:function onChange(e){return _this.onFieldChange(e.target.value)},disabled:disabled,"data-test-subj":"savedObjects-editField-".concat(name)});case"boolean":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{name:name,id:this.fieldId,label:!!currentValue?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.field.onLabel",defaultMessage:"On"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.field.offLabel",defaultMessage:"Off"}),checked:!!currentValue,onChange:function onChange(e){return _this.onFieldChange(e.target.checked)},disabled:disabled,"data-test-subj":"savedObjects-editField-".concat(name)});case"json":case"array":return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"savedObjects-editField-".concat(name)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeEditor"],{name:"savedObjects-editField-".concat(name,"-aceEditor"),mode:"json",theme:"textmate",value:currentValue,onChange:function onChange(value){return _this.onCodeEditorChange(value)},width:"100%",height:"auto",minLines:6,maxLines:30,isReadOnly:disabled,setOptions:{showLineNumbers:true,tabSize:2,useSoftTabs:true},editorProps:{$blockScrolling:Infinity},showGutter:true}));default:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{id:this.fieldId,name:name,value:currentValue,onChange:function onChange(e){return _this.onFieldChange(e.target.value)},disabled:disabled,"data-test-subj":"savedObjects-editField-".concat(name)})}}},{key:"fieldId",get:function get(){var name=this.props.name;return"savedObjects-editField-".concat(name)}}]);return Field}(external_kbnSharedDeps_React_["PureComponent"]);var lib=__webpack_require__(4);function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function form_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function form_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function form_createClass(Constructor,protoProps,staticProps){if(protoProps)form_defineProperties(Constructor.prototype,protoProps);if(staticProps)form_defineProperties(Constructor,staticProps);return Constructor}function form_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)form_setPrototypeOf(subClass,superClass)}function form_setPrototypeOf(o,p){form_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return form_setPrototypeOf(o,p)}function form_createSuper(Derived){var hasNativeReflectConstruct=form_isNativeReflectConstruct();return function _createSuperInternal(){var Super=form_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=form_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return form_possibleConstructorReturn(this,result)}}function form_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return form_assertThisInitialized(self)}function form_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function form_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function form_getPrototypeOf(o){form_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return form_getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var form_Form=function(_Component){form_inherits(Form,_Component);var _super=form_createSuper(Form);function Form(props){var _this;form_classCallCheck(this,Form);_this=_super.call(this,props);_defineProperty(form_assertThisInitialized(_this),"handleFieldChange",(function(name,newState){_this.setState({fieldStates:_objectSpread(_objectSpread({},_this.state.fieldStates),{},{[name]:newState})})}));_defineProperty(form_assertThisInitialized(_this),"onCancel",(function(){window.history.back()}));_defineProperty(form_assertThisInitialized(_this),"onSubmit",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,object,onSave,_this$state,fields,fieldStates,source,references,attributes;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,object=_this$props.object,onSave=_this$props.onSave;_this$state=_this.state,fields=_this$state.fields,fieldStates=_this$state.fieldStates;if(_this.isFormValid()){_context.next=4;break}return _context.abrupt("return");case 4:_this.setState({submitting:true});source=Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(object.attributes);fields.forEach((function(field){var _fieldStates$field$na,_fieldStates$field$na2;var value=(_fieldStates$field$na=(_fieldStates$field$na2=fieldStates[field.name])===null||_fieldStates$field$na2===void 0?void 0:_fieldStates$field$na2.value)!==null&&_fieldStates$field$na!==void 0?_fieldStates$field$na:field.value;if(field.type==="array"&&typeof value==="string"){value=JSON.parse(value)}Object(elastic_safer_lodash_set["set"])(source,field.name,value)}));references=source.references,attributes=_objectWithoutProperties(source,["references"]);_context.next=10;return onSave({attributes:attributes,references:references});case 10:_this.setState({submitting:false});case 11:case"end":return _context.stop()}}}),_callee)}))));_this.state={fields:[],fieldStates:{},submitting:false};return _this}form_createClass(Form,[{key:"componentDidMount",value:function componentDidMount(){var _this$props2=this.props,object=_this$props2.object,service=_this$props2.service;var fields=Object(lib["createFieldList"])(object,service);this.setState({fields:fields})}},{key:"render",value:function render(){var _this2=this;var _this$props3=this.props,editionEnabled=_this$props3.editionEnabled,service=_this$props3.service;var _this$state2=this.state,fields=_this$state2.fields,fieldStates=_this$state2.fieldStates,submitting=_this$state2.submitting;var isValid=this.isFormValid();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{"data-test-subj":"savedObjectEditForm",role:"form"},fields.map((function(field){return external_kbnSharedDeps_React_default.a.createElement(field_Field,{key:"".concat(field.type,"-").concat(field.name),type:field.type,name:field.name,value:field.value,state:fieldStates[field.name],disabled:!editionEnabled,onChange:_this2.handleFieldChange})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,gutterSize:"m"},editionEnabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.view.saveButtonAriaLabel",{defaultMessage:"Save { title } object",values:{title:service.type}}),onClick:this.onSubmit,disabled:!isValid||submitting,"data-test-subj":"savedObjectEditSave"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.saveButtonLabel",defaultMessage:"Save { title } object",values:{title:service.type}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.view.cancelButtonAriaLabel",{defaultMessage:"Cancel"}),onClick:this.onCancel,"data-test-subj":"savedObjectEditCancel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.view.cancelButtonLabel",defaultMessage:"Cancel"})))))}},{key:"isFormValid",value:function isFormValid(){var fieldStates=this.state.fieldStates;return!Object.values(fieldStates).some((function(state){return state.invalid===true}))}}]);return Form}(external_kbnSharedDeps_React_["Component"]);function saved_object_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function saved_object_view_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){saved_object_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){saved_object_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saved_object_view_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function saved_object_view_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function saved_object_view_createClass(Constructor,protoProps,staticProps){if(protoProps)saved_object_view_defineProperties(Constructor.prototype,protoProps);if(staticProps)saved_object_view_defineProperties(Constructor,staticProps);return Constructor}function saved_object_view_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)saved_object_view_setPrototypeOf(subClass,superClass)}function saved_object_view_setPrototypeOf(o,p){saved_object_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return saved_object_view_setPrototypeOf(o,p)}function saved_object_view_createSuper(Derived){var hasNativeReflectConstruct=saved_object_view_isNativeReflectConstruct();return function _createSuperInternal(){var Super=saved_object_view_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=saved_object_view_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return saved_object_view_possibleConstructorReturn(this,result)}}function saved_object_view_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return saved_object_view_assertThisInitialized(self)}function saved_object_view_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function saved_object_view_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function saved_object_view_getPrototypeOf(o){saved_object_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return saved_object_view_getPrototypeOf(o)}function saved_object_view_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var saved_object_view_SavedObjectEdition=function(_Component){saved_object_view_inherits(SavedObjectEdition,_Component);var _super=saved_object_view_createSuper(SavedObjectEdition);function SavedObjectEdition(props){var _this;saved_object_view_classCallCheck(this,SavedObjectEdition);_this=_super.call(this,props);saved_object_view_defineProperty(saved_object_view_assertThisInitialized(_this),"saveChanges",function(){var _ref2=saved_object_view_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var attributes,references,_this$props,savedObjectsClient,notifications,_this$state,object,type;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:attributes=_ref.attributes,references=_ref.references;_this$props=_this.props,savedObjectsClient=_this$props.savedObjectsClient,notifications=_this$props.notifications;_this$state=_this.state,object=_this$state.object,type=_this$state.type;_context.next=5;return savedObjectsClient.update(object.type,object.id,attributes,{references:references});case 5:notifications.toasts.addSuccess("Updated '".concat(attributes.title,"' ").concat(type," object"));_this.redirectToListing();case 7:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}());var serviceRegistry=props.serviceRegistry,serviceName=props.serviceName;var _type=serviceRegistry.get(serviceName).service.type;_this.state={object:undefined,type:_type};return _this}saved_object_view_createClass(SavedObjectEdition,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;var _this$props2=this.props,id=_this$props2.id,savedObjectsClient=_this$props2.savedObjectsClient;var type=this.state.type;savedObjectsClient.get(type,id).then((function(object){_this2.setState({object:object})}))}},{key:"render",value:function render(){var _this3=this;var _this$props3=this.props,capabilities=_this$props3.capabilities,notFoundType=_this$props3.notFoundType,serviceRegistry=_this$props3.serviceRegistry,id=_this$props3.id,serviceName=_this$props3.serviceName,savedObjectsClient=_this$props3.savedObjectsClient;var type=this.state.type;var object=this.state.object;var _ref3=capabilities.savedObjectsManagement,canEdit=_ref3.edit,canDelete=_ref3.delete;var canView=Object(lib["canViewInApp"])(capabilities,type);var service=serviceRegistry.get(serviceName).service;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{horizontalPosition:"center","data-test-subj":"savedObjectsEdit"},external_kbnSharedDeps_React_default.a.createElement(header_Header,{canEdit:canEdit,canDelete:canDelete,canViewInApp:canView,type:type,onDeleteClick:function onDeleteClick(){return _this3.delete()},viewUrl:service.urlFor(id)}),notFoundType&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(not_found_errors_NotFoundErrors,{type:notFoundType})),canEdit&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(intro_Intro,null)),object&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(form_Form,{object:object,savedObjectsClient:savedObjectsClient,service:service,editionEnabled:canEdit,onSave:this.saveChanges})))}},{key:"delete",value:function(){var _delete2=saved_object_view_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _object$attributes;var _this$props4,id,savedObjectsClient,overlays,notifications,_this$state2,type,object,confirmed;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props4=this.props,id=_this$props4.id,savedObjectsClient=_this$props4.savedObjectsClient,overlays=_this$props4.overlays,notifications=_this$props4.notifications;_this$state2=this.state,type=_this$state2.type,object=_this$state2.object;_context2.next=4;return overlays.openConfirm(external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.deleteConfirm.modalDescription",{defaultMessage:"This action permanently removes the object from Kibana."}),{confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.deleteConfirm.modalDeleteButtonLabel",{defaultMessage:"Delete"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.deleteConfirm.modalTitle",{defaultMessage:"Delete '{title}'?",values:{title:(object===null||object===void 0?void 0:(_object$attributes=object.attributes)===null||_object$attributes===void 0?void 0:_object$attributes.title)||"saved Kibana object"}}),buttonColor:"danger"});case 4:confirmed=_context2.sent;if(!confirmed){_context2.next=10;break}_context2.next=8;return savedObjectsClient.delete(type,id);case 8:notifications.toasts.addSuccess("Deleted '".concat(object.attributes.title,"' ").concat(type," object"));this.redirectToListing();case 10:case"end":return _context2.stop()}}}),_callee2,this)})));function _delete(){return _delete2.apply(this,arguments)}return _delete}()},{key:"redirectToListing",value:function redirectToListing(){this.props.history.push("/")}}]);return SavedObjectEdition}(external_kbnSharedDeps_React_["Component"]);var saved_objects_edition_page_SavedObjectsEditionPage=function SavedObjectsEditionPage(_ref){var coreStart=_ref.coreStart,serviceRegistry=_ref.serviceRegistry,setBreadcrumbs=_ref.setBreadcrumbs,history=_ref.history;var _useParams=Object(external_kbnSharedDeps_ReactRouterDom_["useParams"])(),serviceName=_useParams.service,id=_useParams.id;var capabilities=coreStart.application.capabilities;var _useLocation=Object(external_kbnSharedDeps_ReactRouterDom_["useLocation"])(),search=_useLocation.search;var query=Object(query_string["parse"])(search);var service=serviceRegistry.get(serviceName);Object(external_kbnSharedDeps_React_["useEffect"])((function(){var _service$service$type;setBreadcrumbs([{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.breadcrumb.index",{defaultMessage:"Saved objects"}),href:"/"},{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjectsManagement.breadcrumb.edit",{defaultMessage:"Edit {savedObjectType}",values:{savedObjectType:(_service$service$type=service===null||service===void 0?void 0:service.service.type)!==null&&_service$service$type!==void 0?_service$service$type:"object"}})}])}),[setBreadcrumbs,service]);return external_kbnSharedDeps_React_default.a.createElement(saved_object_view_SavedObjectEdition,{id:id,serviceName:serviceName,serviceRegistry:serviceRegistry,savedObjectsClient:coreStart.savedObjects.client,overlays:coreStart.overlays,notifications:coreStart.notifications,capabilities:capabilities,notFoundType:query.notFound,history:history})}}}]);