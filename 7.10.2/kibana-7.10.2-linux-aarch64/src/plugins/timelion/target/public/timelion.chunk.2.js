(window["timelion_bundle_jsonpfunction"]=window["timelion_bundle_jsonpfunction"]||[]).push([[2],{31:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(32);case"v7light":return __webpack_require__(34);case"v8dark":return __webpack_require__(36);case"v8light":return __webpack_require__(38)}},32:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(33);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},33:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/* Timelion plugin styles */\n.timApp {\n  position: relative;\n  background: #1D1E24; }\n  .timApp [ng-click] {\n    cursor: pointer; }\n\n.timApp__container {\n  margin: 12px; }\n\n.timApp__menus {\n  margin: 12px; }\n\n.timApp__stats {\n  font-weight: 400;\n  color: #535966; }\n\n.ng-invalid.ng-dirty, .ng-invalid.ng-touched {\n  border-color: #F66; }\n\ninput[type='radio'][disabled],\nfieldset[disabled] input[type='radio'],\ninput[type='checkbox'][disabled],\nfieldset[disabled]\ninput[type='checkbox'],\n.radio[disabled],\nfieldset[disabled]\n.radio,\n.checkbox[disabled],\nfieldset[disabled]\n.checkbox {\n  cursor: default;\n  opacity: .8; }\n\n/**\n * 1. Anchor suggestions beneath input.\n * 2. Allow for option of positioning suggestions absolutely.\n */\n.timExpressionInput__container {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  /* 1 */\n  position: relative;\n  /* 2 */ }\n\n.timExpressionInput {\n  min-height: 70px; }\n\n.timCell {\n  display: inline-block;\n  cursor: pointer;\n  position: relative;\n  box-sizing: border-box;\n  border: 2px dashed transparent;\n  padding-left: 0 !important;\n  padding-right: 0 !important;\n  margin-bottom: 12px; }\n  .timCell.active {\n    border-color: #343741; }\n\n.timCell.running {\n  opacity: .5; }\n\n.timCell__actions {\n  position: absolute;\n  bottom: 4px;\n  left: 4px; }\n  .timCell__actions > .timCell__action,\n  .timCell__actions > .timCell__id {\n    font-size: 12px;\n    font-size: 0.75rem;\n    line-height: 1.5;\n    font-weight: 700;\n    color: #535966;\n    display: inline-block;\n    text-align: center;\n    width: 24px;\n    height: 24px;\n    line-height: 24px;\n    border-radius: 12px;\n    border: 1px solid #343741;\n    background-color: #25262E;\n    z-index: 1000; }\n  .timCell__actions > .timCell__action {\n    opacity: 0; }\n    .timCell__actions > .timCell__action:focus {\n      opacity: 1; }\n    .timCell__actions > .timCell__action:hover, .timCell__actions > .timCell__action:focus {\n      color: #DFE5EF;\n      border-color: #535966;\n      background-color: #343741; }\n\n.timCell:hover .timCell__action {\n  opacity: 1; }\n\n.timSuggestions {\n  box-shadow: 0 6px 12px -1px rgba(0, 0, 0, 0.2), 0 4px 4px -1px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2);\n  background-color: #25262E;\n  color: #DFE5EF;\n  border: 1px solid #343741;\n  border-radius: 0 0 4px 4px !important;\n  z-index: 9000;\n  max-height: 320px;\n  overflow-y: auto; }\n  .timSuggestions.timSuggestions-isPopover {\n    position: absolute;\n    top: 100%; }\n\n.timSuggestions__item {\n  border-bottom: 1px solid #343741;\n  padding: 4px 24px; }\n  .timSuggestions__item:hover, .timSuggestions__item.active {\n    background-color: #343741; }\n\n.timSuggestions__details {\n  background-color: #25262E;\n  padding: 12px;\n  border-radius: 4px; }\n  .timSuggestions__details > table {\n    margin-bottom: 0; }\n\n.timHelp code {\n  background-color: rgba(223, 229, 239, 0.1); }\n\n.timHelp__buttons {\n  display: flex;\n  justify-content: space-between; }\n\n.timHelp__functions {\n  height: 320px;\n  overflow-y: auto; }\n\n/**\n * 1. Override bootstrap .table styles.\n */\n.timHelp__functionsTableRow:hover,\n.timHelp__functionDetailsTable {\n  background-color: #25262E !important;\n  /* 1 */ }\n\ntimelion-interval {\n  display: flex; }\n\n.timInterval__input {\n  width: 64px; }\n\n.timInterval__input--compact {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0; }\n\n.timInterval__presets {\n  width: 96px; }\n\n.timInterval__presets--compact {\n  width: 32px;\n  padding-left: 0;\n  border-left: none;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0; }\n\n.list-group-menu.select-mode a {\n  outline: none;\n  color: #1898dd; }\n\n.list-group-menu .list-group-menu-item {\n  list-style: none;\n  color: #1898dd; }\n  .list-group-menu .list-group-menu-item.active {\n    font-weight: bold;\n    background-color: #343741; }\n  .list-group-menu .list-group-menu-item:hover {\n    background-color: #031119; }\n  .list-group-menu .list-group-menu-item li {\n    list-style: none;\n    color: #1898dd; }\n\nsaved-object-finder .list-sort-button {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border: none;\n  padding: 8px 16px;\n  font-weight: 400;\n  background-color: #25262E; }\n\nsaved-object-finder .li-striped li {\n  border: none; }\n\nsaved-object-finder .li-striped li:nth-child(even) {\n  background-color: #25262E; }\n\nsaved-object-finder .li-striped li:nth-child(odd) {\n  background-color: #1D1E24; }\n\nsaved-object-finder .li-striped .paginate-heading {\n  font-weight: 400;\n  color: #D4DAE5; }\n\nsaved-object-finder .li-striped .list-group-item {\n  padding: 8px 16px; }\n  saved-object-finder .li-striped .list-group-item ul {\n    padding: 0;\n    display: flex;\n    flex-direction: row; }\n    saved-object-finder .li-striped .list-group-item ul .finder-type {\n      margin-right: 8px; }\n  saved-object-finder .li-striped .list-group-item a {\n    display: block;\n    color: #1BA9F5; }\n    saved-object-finder .li-striped .list-group-item a i {\n      color: #1898dd;\n      margin-right: 8px; }\n  saved-object-finder .li-striped .list-group-item:first-child {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0; }\n  saved-object-finder .li-striped .list-group-item.list-group-no-results p {\n    margin-bottom: 0; }\n\nsaved-object-finder paginate paginate-controls {\n  margin: 16px; }\n\n.form-control {\n  font-size: 14px;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  display: block;\n  width: 100%;\n  height: 32px;\n  padding: 4px 12px;\n  border: 1px solid #343741;\n  background-color: #16171c;\n  color: #DFE5EF;\n  border-radius: 4px;\n  cursor: pointer; }\n  .form-control:not([type='range']) {\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none; }\n  .form-control:focus {\n    border-color: #1BA9F5;\n    outline: none;\n    box-shadow: none; }\n\nselect.form-control {\n  background-image: url('data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"%3E%3Cpath fill=\"rgb%28223, 229, 239%29\" d=\"M13.0688508,5.15725038 L8.38423975,9.76827428 C8.17054415,9.97861308 7.82999214,9.97914095 7.61576025,9.76827428 L2.93114915,5.15725038 C2.7181359,4.94758321 2.37277319,4.94758321 2.15975994,5.15725038 C1.94674669,5.36691756 1.94674669,5.70685522 2.15975994,5.9165224 L6.84437104,10.5275463 C7.48517424,11.1582836 8.51644979,11.1566851 9.15562896,10.5275463 L13.8402401,5.9165224 C14.0532533,5.70685522 14.0532533,5.36691756 13.8402401,5.15725038 C13.6272268,4.94758321 13.2818641,4.94758321 13.0688508,5.15725038 Z\"/%3E%3C/svg%3E');\n  background-size: 16px;\n  background-repeat: no-repeat;\n  background-position: calc(100% - 8px);\n  padding-right: 32px; }\n\n.fullWidth {\n  width: 100%; }\n\n.timChart {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column; }\n  .timChart .chart-top-title {\n    font-size: 12px;\n    font-size: 0.75rem;\n    line-height: 1.5;\n    flex: 0;\n    text-align: center;\n    font-weight: 700; }\n  .timChart .chart-canvas {\n    min-width: 100%;\n    flex: 1;\n    overflow: hidden; }\n  .timChart .legendLabel {\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow-x: hidden;\n    line-height: normal; }\n  .timChart .legendColorBox {\n    vertical-align: middle; }\n  .timChart .ngLegendValue {\n    color: #DFE5EF;\n    cursor: pointer; }\n    .timChart .ngLegendValue:focus, .timChart .ngLegendValue:hover {\n      text-decoration: underline; }\n  .timChart .ngLegendValueNumber {\n    margin-left: 4px;\n    margin-right: 4px;\n    font-weight: 700; }\n  .timChart .flot-tick-label {\n    font-size: 12px;\n    color: #98A2B3; }\n\n.timChart__legendCaption {\n  color: #DFE5EF;\n  white-space: nowrap;\n  font-weight: 700; }\n",""]);module.exports=exports},34:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(35);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},35:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/* Timelion plugin styles */\n.timApp {\n  position: relative;\n  background: #FFF; }\n  .timApp [ng-click] {\n    cursor: pointer; }\n\n.timApp__container {\n  margin: 12px; }\n\n.timApp__menus {\n  margin: 12px; }\n\n.timApp__stats {\n  font-weight: 400;\n  color: #98A2B3; }\n\n.ng-invalid.ng-dirty, .ng-invalid.ng-touched {\n  border-color: #BD271E; }\n\ninput[type='radio'][disabled],\nfieldset[disabled] input[type='radio'],\ninput[type='checkbox'][disabled],\nfieldset[disabled]\ninput[type='checkbox'],\n.radio[disabled],\nfieldset[disabled]\n.radio,\n.checkbox[disabled],\nfieldset[disabled]\n.checkbox {\n  cursor: default;\n  opacity: .8; }\n\n/**\n * 1. Anchor suggestions beneath input.\n * 2. Allow for option of positioning suggestions absolutely.\n */\n.timExpressionInput__container {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  /* 1 */\n  position: relative;\n  /* 2 */ }\n\n.timExpressionInput {\n  min-height: 70px; }\n\n.timCell {\n  display: inline-block;\n  cursor: pointer;\n  position: relative;\n  box-sizing: border-box;\n  border: 2px dashed transparent;\n  padding-left: 0 !important;\n  padding-right: 0 !important;\n  margin-bottom: 12px; }\n  .timCell.active {\n    border-color: #D3DAE6; }\n\n.timCell.running {\n  opacity: .5; }\n\n.timCell__actions {\n  position: absolute;\n  bottom: 4px;\n  left: 4px; }\n  .timCell__actions > .timCell__action,\n  .timCell__actions > .timCell__id {\n    font-size: 12px;\n    font-size: 0.75rem;\n    line-height: 1.5;\n    font-weight: 700;\n    color: #98A2B3;\n    display: inline-block;\n    text-align: center;\n    width: 24px;\n    height: 24px;\n    line-height: 24px;\n    border-radius: 12px;\n    border: 1px solid #D3DAE6;\n    background-color: #F5F7FA;\n    z-index: 1000; }\n  .timCell__actions > .timCell__action {\n    opacity: 0; }\n    .timCell__actions > .timCell__action:focus {\n      opacity: 1; }\n    .timCell__actions > .timCell__action:hover, .timCell__actions > .timCell__action:focus {\n      color: #343741;\n      border-color: #98A2B3;\n      background-color: #D3DAE6; }\n\n.timCell:hover .timCell__action {\n  opacity: 1; }\n\n.timSuggestions {\n  box-shadow: 0 6px 12px -1px rgba(152, 162, 179, 0.2), 0 4px 4px -1px rgba(152, 162, 179, 0.2), 0 2px 2px 0 rgba(152, 162, 179, 0.2);\n  background-color: #F5F7FA;\n  color: #343741;\n  border: 1px solid #D3DAE6;\n  border-radius: 0 0 4px 4px !important;\n  z-index: 9000;\n  max-height: 320px;\n  overflow-y: auto; }\n  .timSuggestions.timSuggestions-isPopover {\n    position: absolute;\n    top: 100%; }\n\n.timSuggestions__item {\n  border-bottom: 1px solid #D3DAE6;\n  padding: 4px 24px; }\n  .timSuggestions__item:hover, .timSuggestions__item.active {\n    background-color: #D3DAE6; }\n\n.timSuggestions__details {\n  background-color: #F5F7FA;\n  padding: 12px;\n  border-radius: 4px; }\n  .timSuggestions__details > table {\n    margin-bottom: 0; }\n\n.timHelp code {\n  background-color: rgba(52, 55, 65, 0.1); }\n\n.timHelp__buttons {\n  display: flex;\n  justify-content: space-between; }\n\n.timHelp__functions {\n  height: 320px;\n  overflow-y: auto; }\n\n/**\n * 1. Override bootstrap .table styles.\n */\n.timHelp__functionsTableRow:hover,\n.timHelp__functionDetailsTable {\n  background-color: #F5F7FA !important;\n  /* 1 */ }\n\ntimelion-interval {\n  display: flex; }\n\n.timInterval__input {\n  width: 64px; }\n\n.timInterval__input--compact {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0; }\n\n.timInterval__presets {\n  width: 96px; }\n\n.timInterval__presets--compact {\n  width: 32px;\n  padding-left: 0;\n  border-left: none;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0; }\n\n.list-group-menu.select-mode a {\n  outline: none;\n  color: #1a7abc; }\n\n.list-group-menu .list-group-menu-item {\n  list-style: none;\n  color: #1a7abc; }\n  .list-group-menu .list-group-menu-item.active {\n    font-weight: bold;\n    background-color: #D3DAE6; }\n  .list-group-menu .list-group-menu-item:hover {\n    background-color: #e6f0f8; }\n  .list-group-menu .list-group-menu-item li {\n    list-style: none;\n    color: #1a7abc; }\n\nsaved-object-finder .list-sort-button {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border: none;\n  padding: 8px 16px;\n  font-weight: 400;\n  background-color: #F5F7FA; }\n\nsaved-object-finder .li-striped li {\n  border: none; }\n\nsaved-object-finder .li-striped li:nth-child(even) {\n  background-color: #F5F7FA; }\n\nsaved-object-finder .li-striped li:nth-child(odd) {\n  background-color: #FFF; }\n\nsaved-object-finder .li-striped .paginate-heading {\n  font-weight: 400;\n  color: #343741; }\n\nsaved-object-finder .li-striped .list-group-item {\n  padding: 8px 16px; }\n  saved-object-finder .li-striped .list-group-item ul {\n    padding: 0;\n    display: flex;\n    flex-direction: row; }\n    saved-object-finder .li-striped .list-group-item ul .finder-type {\n      margin-right: 8px; }\n  saved-object-finder .li-striped .list-group-item a {\n    display: block;\n    color: #006BB4; }\n    saved-object-finder .li-striped .list-group-item a i {\n      color: #0060a2;\n      margin-right: 8px; }\n  saved-object-finder .li-striped .list-group-item:first-child {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0; }\n  saved-object-finder .li-striped .list-group-item.list-group-no-results p {\n    margin-bottom: 0; }\n\nsaved-object-finder paginate paginate-controls {\n  margin: 16px; }\n\n.form-control {\n  font-size: 14px;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  display: block;\n  width: 100%;\n  height: 32px;\n  padding: 4px 12px;\n  border: 1px solid #D3DAE6;\n  background-color: #fbfcfd;\n  color: #343741;\n  border-radius: 4px;\n  cursor: pointer; }\n  .form-control:not([type='range']) {\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none; }\n  .form-control:focus {\n    border-color: #006BB4;\n    outline: none;\n    box-shadow: none; }\n\nselect.form-control {\n  background-image: url('data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"%3E%3Cpath fill=\"rgb%2852, 55, 65%29\" d=\"M13.0688508,5.15725038 L8.38423975,9.76827428 C8.17054415,9.97861308 7.82999214,9.97914095 7.61576025,9.76827428 L2.93114915,5.15725038 C2.7181359,4.94758321 2.37277319,4.94758321 2.15975994,5.15725038 C1.94674669,5.36691756 1.94674669,5.70685522 2.15975994,5.9165224 L6.84437104,10.5275463 C7.48517424,11.1582836 8.51644979,11.1566851 9.15562896,10.5275463 L13.8402401,5.9165224 C14.0532533,5.70685522 14.0532533,5.36691756 13.8402401,5.15725038 C13.6272268,4.94758321 13.2818641,4.94758321 13.0688508,5.15725038 Z\"/%3E%3C/svg%3E');\n  background-size: 16px;\n  background-repeat: no-repeat;\n  background-position: calc(100% - 8px);\n  padding-right: 32px; }\n\n.fullWidth {\n  width: 100%; }\n\n.timChart {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column; }\n  .timChart .chart-top-title {\n    font-size: 12px;\n    font-size: 0.75rem;\n    line-height: 1.5;\n    flex: 0;\n    text-align: center;\n    font-weight: 700; }\n  .timChart .chart-canvas {\n    min-width: 100%;\n    flex: 1;\n    overflow: hidden; }\n  .timChart .legendLabel {\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow-x: hidden;\n    line-height: normal; }\n  .timChart .legendColorBox {\n    vertical-align: middle; }\n  .timChart .ngLegendValue {\n    color: #343741;\n    cursor: pointer; }\n    .timChart .ngLegendValue:focus, .timChart .ngLegendValue:hover {\n      text-decoration: underline; }\n  .timChart .ngLegendValueNumber {\n    margin-left: 4px;\n    margin-right: 4px;\n    font-weight: 700; }\n  .timChart .flot-tick-label {\n    font-size: 12px;\n    color: #69707D; }\n\n.timChart__legendCaption {\n  color: #343741;\n  white-space: nowrap;\n  font-weight: 700; }\n",""]);module.exports=exports},36:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(37);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},37:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/* Timelion plugin styles */\n.timApp {\n  position: relative;\n  background: #1D1E24; }\n  .timApp [ng-click] {\n    cursor: pointer; }\n\n.timApp__container {\n  margin: 12px; }\n\n.timApp__menus {\n  margin: 12px; }\n\n.timApp__stats {\n  font-weight: 400;\n  color: #535966; }\n\n.ng-invalid.ng-dirty, .ng-invalid.ng-touched {\n  border-color: #F66; }\n\ninput[type='radio'][disabled],\nfieldset[disabled] input[type='radio'],\ninput[type='checkbox'][disabled],\nfieldset[disabled]\ninput[type='checkbox'],\n.radio[disabled],\nfieldset[disabled]\n.radio,\n.checkbox[disabled],\nfieldset[disabled]\n.checkbox {\n  cursor: default;\n  opacity: .8; }\n\n/**\n * 1. Anchor suggestions beneath input.\n * 2. Allow for option of positioning suggestions absolutely.\n */\n.timExpressionInput__container {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  /* 1 */\n  position: relative;\n  /* 2 */ }\n\n.timExpressionInput {\n  min-height: 70px; }\n\n.timCell {\n  display: inline-block;\n  cursor: pointer;\n  position: relative;\n  box-sizing: border-box;\n  border: 2px dashed transparent;\n  padding-left: 0 !important;\n  padding-right: 0 !important;\n  margin-bottom: 12px; }\n  .timCell.active {\n    border-color: #343741; }\n\n.timCell.running {\n  opacity: .5; }\n\n.timCell__actions {\n  position: absolute;\n  bottom: 4px;\n  left: 4px; }\n  .timCell__actions > .timCell__action,\n  .timCell__actions > .timCell__id {\n    font-size: 12px;\n    font-size: 0.85714rem;\n    line-height: 1.5;\n    font-weight: 700;\n    color: #535966;\n    display: inline-block;\n    text-align: center;\n    width: 24px;\n    height: 24px;\n    line-height: 24px;\n    border-radius: 12px;\n    border: 1px solid #343741;\n    background-color: #25262E;\n    z-index: 1000; }\n  .timCell__actions > .timCell__action {\n    opacity: 0; }\n    .timCell__actions > .timCell__action:focus {\n      opacity: 1; }\n    .timCell__actions > .timCell__action:hover, .timCell__actions > .timCell__action:focus {\n      color: #DFE5EF;\n      border-color: #535966;\n      background-color: #343741; }\n\n.timCell:hover .timCell__action {\n  opacity: 1; }\n\n.timSuggestions {\n  box-shadow: 0 0.9px 4px -1px rgba(0, 0, 0, 0.2), 0 2.6px 8px -1px rgba(0, 0, 0, 0.15), 0 5.7px 12px -1px rgba(0, 0, 0, 0.125), 0 15px 15px -1px rgba(0, 0, 0, 0.1);\n  background-color: #25262E;\n  color: #DFE5EF;\n  border: 1px solid #343741;\n  border-radius: 0 0 6px 6px !important;\n  z-index: 9000;\n  max-height: 320px;\n  overflow-y: auto; }\n  .timSuggestions.timSuggestions-isPopover {\n    position: absolute;\n    top: 100%; }\n\n.timSuggestions__item {\n  border-bottom: 1px solid #343741;\n  padding: 4px 24px; }\n  .timSuggestions__item:hover, .timSuggestions__item.active {\n    background-color: #343741; }\n\n.timSuggestions__details {\n  background-color: #25262E;\n  padding: 12px;\n  border-radius: 6px; }\n  .timSuggestions__details > table {\n    margin-bottom: 0; }\n\n.timHelp code {\n  background-color: rgba(223, 229, 239, 0.1); }\n\n.timHelp__buttons {\n  display: flex;\n  justify-content: space-between; }\n\n.timHelp__functions {\n  height: 320px;\n  overflow-y: auto; }\n\n/**\n * 1. Override bootstrap .table styles.\n */\n.timHelp__functionsTableRow:hover,\n.timHelp__functionDetailsTable {\n  background-color: #25262E !important;\n  /* 1 */ }\n\ntimelion-interval {\n  display: flex; }\n\n.timInterval__input {\n  width: 64px; }\n\n.timInterval__input--compact {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0; }\n\n.timInterval__presets {\n  width: 96px; }\n\n.timInterval__presets--compact {\n  width: 32px;\n  padding-left: 0;\n  border-left: none;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0; }\n\n.list-group-menu.select-mode a {\n  outline: none;\n  color: #207ee6; }\n\n.list-group-menu .list-group-menu-item {\n  list-style: none;\n  color: #207ee6; }\n  .list-group-menu .list-group-menu-item.active {\n    font-weight: bold;\n    background-color: #343741; }\n  .list-group-menu .list-group-menu-item:hover {\n    background-color: #040e1a; }\n  .list-group-menu .list-group-menu-item li {\n    list-style: none;\n    color: #207ee6; }\n\nsaved-object-finder .list-sort-button {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border: none;\n  padding: 8px 16px;\n  font-weight: 400;\n  background-color: #25262E; }\n\nsaved-object-finder .li-striped li {\n  border: none; }\n\nsaved-object-finder .li-striped li:nth-child(even) {\n  background-color: #25262E; }\n\nsaved-object-finder .li-striped li:nth-child(odd) {\n  background-color: #1D1E24; }\n\nsaved-object-finder .li-striped .paginate-heading {\n  font-weight: 400;\n  color: #D4DAE5; }\n\nsaved-object-finder .li-striped .list-group-item {\n  padding: 8px 16px; }\n  saved-object-finder .li-striped .list-group-item ul {\n    padding: 0;\n    display: flex;\n    flex-direction: row; }\n    saved-object-finder .li-striped .list-group-item ul .finder-type {\n      margin-right: 8px; }\n  saved-object-finder .li-striped .list-group-item a {\n    display: block;\n    color: #238CFF; }\n    saved-object-finder .li-striped .list-group-item a i {\n      color: #207ee6;\n      margin-right: 8px; }\n  saved-object-finder .li-striped .list-group-item:first-child {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0; }\n  saved-object-finder .li-striped .list-group-item.list-group-no-results p {\n    margin-bottom: 0; }\n\nsaved-object-finder paginate paginate-controls {\n  margin: 16px; }\n\n.form-control {\n  font-size: 14px;\n  font-size: 1rem;\n  line-height: 1.5;\n  display: block;\n  width: 100%;\n  height: 32px;\n  padding: 4px 12px;\n  border: 1px solid #343741;\n  background-color: #16171c;\n  color: #DFE5EF;\n  border-radius: 6px;\n  cursor: pointer; }\n  .form-control:not([type='range']) {\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none; }\n  .form-control:focus {\n    border-color: #238CFF;\n    outline: none;\n    box-shadow: none; }\n\nselect.form-control {\n  background-image: url('data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"%3E%3Cpath fill=\"rgb%28223, 229, 239%29\" d=\"M13.0688508,5.15725038 L8.38423975,9.76827428 C8.17054415,9.97861308 7.82999214,9.97914095 7.61576025,9.76827428 L2.93114915,5.15725038 C2.7181359,4.94758321 2.37277319,4.94758321 2.15975994,5.15725038 C1.94674669,5.36691756 1.94674669,5.70685522 2.15975994,5.9165224 L6.84437104,10.5275463 C7.48517424,11.1582836 8.51644979,11.1566851 9.15562896,10.5275463 L13.8402401,5.9165224 C14.0532533,5.70685522 14.0532533,5.36691756 13.8402401,5.15725038 C13.6272268,4.94758321 13.2818641,4.94758321 13.0688508,5.15725038 Z\"/%3E%3C/svg%3E');\n  background-size: 16px;\n  background-repeat: no-repeat;\n  background-position: calc(100% - 8px);\n  padding-right: 32px; }\n\n.fullWidth {\n  width: 100%; }\n\n.timChart {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column; }\n  .timChart .chart-top-title {\n    font-size: 12px;\n    font-size: 0.85714rem;\n    line-height: 1.5;\n    flex: 0;\n    text-align: center;\n    font-weight: 700; }\n  .timChart .chart-canvas {\n    min-width: 100%;\n    flex: 1;\n    overflow: hidden; }\n  .timChart .legendLabel {\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow-x: hidden;\n    line-height: normal; }\n  .timChart .legendColorBox {\n    vertical-align: middle; }\n  .timChart .ngLegendValue {\n    color: #DFE5EF;\n    cursor: pointer; }\n    .timChart .ngLegendValue:focus, .timChart .ngLegendValue:hover {\n      text-decoration: underline; }\n  .timChart .ngLegendValueNumber {\n    margin-left: 4px;\n    margin-right: 4px;\n    font-weight: 700; }\n  .timChart .flot-tick-label {\n    font-size: 12px;\n    color: #98A2B3; }\n\n.timChart__legendCaption {\n  color: #DFE5EF;\n  white-space: nowrap;\n  font-weight: 700; }\n",""]);module.exports=exports},38:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(39);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},39:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/* Timelion plugin styles */\n.timApp {\n  position: relative;\n  background: #FFF; }\n  .timApp [ng-click] {\n    cursor: pointer; }\n\n.timApp__container {\n  margin: 12px; }\n\n.timApp__menus {\n  margin: 12px; }\n\n.timApp__stats {\n  font-weight: 400;\n  color: #98A2B3; }\n\n.ng-invalid.ng-dirty, .ng-invalid.ng-touched {\n  border-color: #BD271E; }\n\ninput[type='radio'][disabled],\nfieldset[disabled] input[type='radio'],\ninput[type='checkbox'][disabled],\nfieldset[disabled]\ninput[type='checkbox'],\n.radio[disabled],\nfieldset[disabled]\n.radio,\n.checkbox[disabled],\nfieldset[disabled]\n.checkbox {\n  cursor: default;\n  opacity: .8; }\n\n/**\n * 1. Anchor suggestions beneath input.\n * 2. Allow for option of positioning suggestions absolutely.\n */\n.timExpressionInput__container {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  /* 1 */\n  position: relative;\n  /* 2 */ }\n\n.timExpressionInput {\n  min-height: 70px; }\n\n.timCell {\n  display: inline-block;\n  cursor: pointer;\n  position: relative;\n  box-sizing: border-box;\n  border: 2px dashed transparent;\n  padding-left: 0 !important;\n  padding-right: 0 !important;\n  margin-bottom: 12px; }\n  .timCell.active {\n    border-color: #D3DAE6; }\n\n.timCell.running {\n  opacity: .5; }\n\n.timCell__actions {\n  position: absolute;\n  bottom: 4px;\n  left: 4px; }\n  .timCell__actions > .timCell__action,\n  .timCell__actions > .timCell__id {\n    font-size: 12px;\n    font-size: 0.85714rem;\n    line-height: 1.5;\n    font-weight: 700;\n    color: #98A2B3;\n    display: inline-block;\n    text-align: center;\n    width: 24px;\n    height: 24px;\n    line-height: 24px;\n    border-radius: 12px;\n    border: 1px solid #D3DAE6;\n    background-color: #F5F7FA;\n    z-index: 1000; }\n  .timCell__actions > .timCell__action {\n    opacity: 0; }\n    .timCell__actions > .timCell__action:focus {\n      opacity: 1; }\n    .timCell__actions > .timCell__action:hover, .timCell__actions > .timCell__action:focus {\n      color: #343741;\n      border-color: #98A2B3;\n      background-color: #D3DAE6; }\n\n.timCell:hover .timCell__action {\n  opacity: 1; }\n\n.timSuggestions {\n  box-shadow: 0 0.9px 4px -1px rgba(0, 0, 0, 0.08), 0 2.6px 8px -1px rgba(0, 0, 0, 0.06), 0 5.7px 12px -1px rgba(0, 0, 0, 0.05), 0 15px 15px -1px rgba(0, 0, 0, 0.04);\n  background-color: #F5F7FA;\n  color: #343741;\n  border: 1px solid #D3DAE6;\n  border-radius: 0 0 6px 6px !important;\n  z-index: 9000;\n  max-height: 320px;\n  overflow-y: auto; }\n  .timSuggestions.timSuggestions-isPopover {\n    position: absolute;\n    top: 100%; }\n\n.timSuggestions__item {\n  border-bottom: 1px solid #D3DAE6;\n  padding: 4px 24px; }\n  .timSuggestions__item:hover, .timSuggestions__item.active {\n    background-color: #D3DAE6; }\n\n.timSuggestions__details {\n  background-color: #F5F7FA;\n  padding: 12px;\n  border-radius: 6px; }\n  .timSuggestions__details > table {\n    margin-bottom: 0; }\n\n.timHelp code {\n  background-color: rgba(52, 55, 65, 0.1); }\n\n.timHelp__buttons {\n  display: flex;\n  justify-content: space-between; }\n\n.timHelp__functions {\n  height: 320px;\n  overflow-y: auto; }\n\n/**\n * 1. Override bootstrap .table styles.\n */\n.timHelp__functionsTableRow:hover,\n.timHelp__functionDetailsTable {\n  background-color: #F5F7FA !important;\n  /* 1 */ }\n\ntimelion-interval {\n  display: flex; }\n\n.timInterval__input {\n  width: 64px; }\n\n.timInterval__input--compact {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0; }\n\n.timInterval__presets {\n  width: 96px; }\n\n.timInterval__presets--compact {\n  width: 32px;\n  padding-left: 0;\n  border-left: none;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0; }\n\n.list-group-menu.select-mode a {\n  outline: none;\n  color: #1a7ce7; }\n\n.list-group-menu .list-group-menu-item {\n  list-style: none;\n  color: #1a7ce7; }\n  .list-group-menu .list-group-menu-item.active {\n    font-weight: bold;\n    background-color: #D3DAE6; }\n  .list-group-menu .list-group-menu-item:hover {\n    background-color: #e6f0fc; }\n  .list-group-menu .list-group-menu-item li {\n    list-style: none;\n    color: #1a7ce7; }\n\nsaved-object-finder .list-sort-button {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border: none;\n  padding: 8px 16px;\n  font-weight: 400;\n  background-color: #F5F7FA; }\n\nsaved-object-finder .li-striped li {\n  border: none; }\n\nsaved-object-finder .li-striped li:nth-child(even) {\n  background-color: #F5F7FA; }\n\nsaved-object-finder .li-striped li:nth-child(odd) {\n  background-color: #FFF; }\n\nsaved-object-finder .li-striped .paginate-heading {\n  font-weight: 400;\n  color: #343741; }\n\nsaved-object-finder .li-striped .list-group-item {\n  padding: 8px 16px; }\n  saved-object-finder .li-striped .list-group-item ul {\n    padding: 0;\n    display: flex;\n    flex-direction: row; }\n    saved-object-finder .li-striped .list-group-item ul .finder-type {\n      margin-right: 8px; }\n  saved-object-finder .li-striped .list-group-item a {\n    display: block;\n    color: #006DE4; }\n    saved-object-finder .li-striped .list-group-item a i {\n      color: #0062cd;\n      margin-right: 8px; }\n  saved-object-finder .li-striped .list-group-item:first-child {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0; }\n  saved-object-finder .li-striped .list-group-item.list-group-no-results p {\n    margin-bottom: 0; }\n\nsaved-object-finder paginate paginate-controls {\n  margin: 16px; }\n\n.form-control {\n  font-size: 14px;\n  font-size: 1rem;\n  line-height: 1.5;\n  display: block;\n  width: 100%;\n  height: 32px;\n  padding: 4px 12px;\n  border: 1px solid #D3DAE6;\n  background-color: #fbfcfd;\n  color: #343741;\n  border-radius: 6px;\n  cursor: pointer; }\n  .form-control:not([type='range']) {\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none; }\n  .form-control:focus {\n    border-color: #006DE4;\n    outline: none;\n    box-shadow: none; }\n\nselect.form-control {\n  background-image: url('data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"%3E%3Cpath fill=\"rgb%2852, 55, 65%29\" d=\"M13.0688508,5.15725038 L8.38423975,9.76827428 C8.17054415,9.97861308 7.82999214,9.97914095 7.61576025,9.76827428 L2.93114915,5.15725038 C2.7181359,4.94758321 2.37277319,4.94758321 2.15975994,5.15725038 C1.94674669,5.36691756 1.94674669,5.70685522 2.15975994,5.9165224 L6.84437104,10.5275463 C7.48517424,11.1582836 8.51644979,11.1566851 9.15562896,10.5275463 L13.8402401,5.9165224 C14.0532533,5.70685522 14.0532533,5.36691756 13.8402401,5.15725038 C13.6272268,4.94758321 13.2818641,4.94758321 13.0688508,5.15725038 Z\"/%3E%3C/svg%3E');\n  background-size: 16px;\n  background-repeat: no-repeat;\n  background-position: calc(100% - 8px);\n  padding-right: 32px; }\n\n.fullWidth {\n  width: 100%; }\n\n.timChart {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column; }\n  .timChart .chart-top-title {\n    font-size: 12px;\n    font-size: 0.85714rem;\n    line-height: 1.5;\n    flex: 0;\n    text-align: center;\n    font-weight: 700; }\n  .timChart .chart-canvas {\n    min-width: 100%;\n    flex: 1;\n    overflow: hidden; }\n  .timChart .legendLabel {\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow-x: hidden;\n    line-height: normal; }\n  .timChart .legendColorBox {\n    vertical-align: middle; }\n  .timChart .ngLegendValue {\n    color: #343741;\n    cursor: pointer; }\n    .timChart .ngLegendValue:focus, .timChart .ngLegendValue:hover {\n      text-decoration: underline; }\n  .timChart .ngLegendValueNumber {\n    margin-left: 4px;\n    margin-right: 4px;\n    font-weight: 700; }\n  .timChart .flot-tick-label {\n    font-size: 12px;\n    color: #69707D; }\n\n.timChart__legendCaption {\n  color: #343741;\n  white-space: nowrap;\n  font-weight: 700; }\n",""]);module.exports=exports},64:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return application_renderApp}));var public_0=__webpack_require__(31);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(12);var external_kbnSharedDeps_Angular_=__webpack_require__(17);var external_kbnSharedDeps_Angular_default=__webpack_require__.n(external_kbnSharedDeps_Angular_);var angular_sanitize=__webpack_require__(40);var angular_route=__webpack_require__(42);var angular_sortable_view=__webpack_require__(44);var external_kbnSharedDeps_KbnI18nAngular_=__webpack_require__(18);var external_kbnSharedDeps_Lodash_=__webpack_require__(9);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_Jquery_=__webpack_require__(10);var external_kbnSharedDeps_Jquery_default=__webpack_require__.n(external_kbnSharedDeps_Jquery_);var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(19);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);var observe_resize=function($elem,fn,frequency){frequency=frequency||500;var currentHeight=$elem.height();var currentWidth=$elem.width();var timeout;function checkLoop(){timeout=setTimeout((function(){if(currentHeight!==$elem.height()||currentWidth!==$elem.width()){currentHeight=$elem.height();currentWidth=$elem.width();if(currentWidth>0&&currentWidth>0)fn()}checkLoop()}),frequency)}checkLoop();return function(){clearTimeout(timeout)}};var public_=__webpack_require__(15);var DEBOUNCE_DELAY=50;function timechartFn(dependencies){var $rootScope=dependencies.$rootScope,$compile=dependencies.$compile,uiSettings=dependencies.uiSettings,timefilter=dependencies.data.query.timefilter;return function(){return{help:"Draw a timeseries chart",render($scope,$elem){var template='<div class="chart-top-title"></div><div class="chart-canvas"></div>';var formatters=Object(public_["tickFormatters"])();var getxAxisFormatter=Object(public_["xaxisFormatterProvider"])(uiSettings);var generateTicks=Object(public_["generateTicksProvider"])();external_kbnSharedDeps_MomentTimezone_default.a.tz.setDefault(uiSettings.get("dateFormat:tz"));var render=$scope.seriesList.render||{};$scope.chart=$scope.seriesList.list;$scope.interval=$scope.interval;$scope.search=$scope.search||external_kbnSharedDeps_Lodash_default.a.noop;var legendValueNumbers;var legendCaption;var debouncedSetLegendNumbers=external_kbnSharedDeps_Lodash_default.a.debounce(setLegendNumbers,DEBOUNCE_DELAY,{maxWait:DEBOUNCE_DELAY,leading:true,trailing:false});var emptyCaption="<br>";var defaultOptions={xaxis:{mode:"time",tickLength:5,timezone:"browser"},selection:{mode:"x",color:"#ccc"},crosshair:{mode:"x",color:"#C66",lineWidth:2},grid:{show:render.grid,borderWidth:0,borderColor:null,margin:10,hoverable:true,autoHighlight:false},legend:{backgroundColor:"rgb(255,255,255,0)",position:"nw",labelBoxBorderColor:"rgb(255,255,255,0)",labelFormatter(label,series){var wrapperSpan=document.createElement("span");var labelSpan=document.createElement("span");var numberSpan=document.createElement("span");wrapperSpan.setAttribute("class","ngLegendValue");wrapperSpan.setAttribute("kbn-accessible-click","");wrapperSpan.setAttribute("ng-click","toggleSeries(".concat(series._id,")"));wrapperSpan.setAttribute("ng-focus","focusSeries(".concat(series._id,")"));wrapperSpan.setAttribute("ng-mouseover","highlightSeries(".concat(series._id,")"));labelSpan.setAttribute("ng-non-bindable","");labelSpan.appendChild(document.createTextNode(label));numberSpan.setAttribute("class","ngLegendValueNumber");wrapperSpan.appendChild(labelSpan);wrapperSpan.appendChild(numberSpan);return wrapperSpan.outerHTML}},colors:["#01A4A4","#C66","#D0D102","#616161","#00A1CB","#32742C","#F18D05","#113F8C","#61AE24","#D70060"]};var originalColorMap=new Map;$scope.chart.forEach((function(series,seriesIndex){if(!series.color){var colorIndex=seriesIndex%defaultOptions.colors.length;series.color=defaultOptions.colors[colorIndex]}originalColorMap.set(series,series.color)}));var highlightedSeries;var focusedSeries;function unhighlightSeries(){if(highlightedSeries===null){return}highlightedSeries=null;focusedSeries=null;$scope.chart.forEach((function(series){series.color=originalColorMap.get(series)}));drawPlot($scope.chart)}$scope.highlightSeries=external_kbnSharedDeps_Lodash_default.a.debounce((function(id){if(highlightedSeries===id){return}highlightedSeries=id;$scope.chart.forEach((function(series,seriesIndex){if(seriesIndex!==id){series.color="rgba(128,128,128,0.1)"}else{series.color=originalColorMap.get(series)}}));drawPlot($scope.chart)}),DEBOUNCE_DELAY);$scope.focusSeries=function(id){focusedSeries=id;$scope.highlightSeries(id)};$scope.toggleSeries=function(id){var series=$scope.chart[id];series._hide=!series._hide;drawPlot($scope.chart)};var cancelResize=observe_resize($elem,(function(){drawPlot($scope.chart)}));$scope.$on("$destroy",(function(){cancelResize();$elem.off("plothover");$elem.off("plotselected");$elem.off("mouseleave")}));$elem.on("plothover",(function(event,pos,item){$rootScope.$broadcast("timelionPlotHover",event,pos,item)}));$elem.on("plotselected",(function(event,ranges){timefilter.timefilter.setTime({from:external_kbnSharedDeps_MomentTimezone_default()(ranges.xaxis.from),to:external_kbnSharedDeps_MomentTimezone_default()(ranges.xaxis.to)})}));$elem.on("mouseleave",(function(){$rootScope.$broadcast("timelionPlotLeave")}));$scope.$on("timelionPlotHover",(function(angularEvent,flotEvent,pos){if(!$scope.plot)return;$scope.plot.setCrosshair(pos);debouncedSetLegendNumbers(pos)}));$scope.$on("timelionPlotLeave",(function(){if(!$scope.plot)return;$scope.plot.clearCrosshair();clearLegendNumbers()}));function setLegendNumbers(pos){unhighlightSeries();var plot=$scope.plot;var axes=plot.getAxes();if(pos.x<axes.xaxis.min||pos.x>axes.xaxis.max){return}var i;var dataset=plot.getData();if(legendCaption){legendCaption.text(external_kbnSharedDeps_MomentTimezone_default()(pos.x).format(external_kbnSharedDeps_Lodash_default.a.get(dataset,"[0]._global.legend.timeFormat",public_["DEFAULT_TIME_FORMAT"])))}var _loop=function _loop(){var series=dataset[i];var useNearestPoint=series.lines.show&&!series.lines.steps;var precision=external_kbnSharedDeps_Lodash_default.a.get(series,"_meta.precision",2);if(series._hide)return"continue";var currentPoint=series.data.find((function(point,index){if(index+1===series.data.length){return true}if(useNearestPoint){return pos.x-point[0]<series.data[index+1][0]-pos.x}else{return pos.x<series.data[index+1][0]}}));var y=currentPoint[1];if(y!=null){var label=y.toFixed(precision);if(series.yaxis.tickFormatter){label=series.yaxis.tickFormatter(label,series.yaxis)}legendValueNumbers.eq(i).text("(".concat(label,")"))}else{legendValueNumbers.eq(i).empty()}};for(i=0;i<dataset.length;++i){var _ret=_loop();if(_ret==="continue")continue}}function clearLegendNumbers(){if(legendCaption){legendCaption.html(emptyCaption)}external_kbnSharedDeps_Lodash_default.a.each(legendValueNumbers,(function(num){external_kbnSharedDeps_Jquery_default()(num).empty()}))}var legendScope=$scope.$new();function drawPlot(plotConfig){if(!external_kbnSharedDeps_Jquery_default()(".chart-canvas",$elem).length)$elem.html(template);var canvasElem=external_kbnSharedDeps_Jquery_default()(".chart-canvas",$elem);if(canvasElem.height()===0||canvasElem.width()===0){return}var title=external_kbnSharedDeps_Lodash_default()(plotConfig).map("_title").compact().last();external_kbnSharedDeps_Jquery_default()(".chart-top-title",$elem).text(title==null?"":title);var options=external_kbnSharedDeps_Lodash_default.a.cloneDeep(defaultOptions);var time=timefilter.timefilter.getBounds();var interval=Object(public_["calculateInterval"])(time.min.valueOf(),time.max.valueOf(),uiSettings.get("timelion:target_buckets")||200,$scope.interval,uiSettings.get("timelion:min_interval")||"1ms");var format=getxAxisFormatter(interval);options.xaxis.tickFormatter=function(val){return external_kbnSharedDeps_MomentTimezone_default()(val).format(format)};var tickLetterWidth=7;var tickPadding=45;options.xaxis.ticks=Math.floor($elem.width()/(format.length*tickLetterWidth+tickPadding));var series=external_kbnSharedDeps_Lodash_default.a.map(plotConfig,(function(serie,index){serie=external_kbnSharedDeps_Lodash_default.a.cloneDeep(external_kbnSharedDeps_Lodash_default.a.defaults(serie,{shadowSize:0,lines:{lineWidth:3}}));serie._id=index;if(serie.color){var span=document.createElement("span");span.style.color=serie.color;serie.color=span.style.color}if(serie._hide){serie.data=[];serie.stack=false;serie.label="(hidden) "+serie.label}if(serie._global){external_kbnSharedDeps_Lodash_default.a.mergeWith(options,serie._global,(function(objVal,srcVal){if(objVal==null)return srcVal;if(srcVal==null)return objVal}))}return serie}));if(options.yaxes){options.yaxes.forEach((function(yaxis){if(yaxis&&yaxis.units){yaxis.tickFormatter=formatters[yaxis.units.type];var byteModes=["bytes","bytes/s"];if(byteModes.includes(yaxis.units.type)){yaxis.tickGenerator=generateTicks}}}))}$scope.plot=external_kbnSharedDeps_Jquery_default.a.plot(canvasElem,external_kbnSharedDeps_Lodash_default.a.compact(series),options);if($scope.plot){$scope.$emit("timelionChartRendered")}legendScope.$destroy();legendScope=$scope.$new();legendValueNumbers=canvasElem.find(".ngLegendValueNumber");external_kbnSharedDeps_Lodash_default.a.each(canvasElem.find(".ngLegendValue"),(function(elem){$compile(elem)(legendScope)}));if(external_kbnSharedDeps_Lodash_default.a.get($scope.plot.getData(),"[0]._global.legend.showTime",true)){legendCaption=external_kbnSharedDeps_Jquery_default()('<caption class="timChart__legendCaption"></caption>');legendCaption.html(emptyCaption);canvasElem.find("div.legend table").append(legendCaption);if(focusedSeries||focusedSeries===0){var $legendLabels=canvasElem.find("div.legend table .legendLabel>span");$legendLabels.get(focusedSeries).focus()}}}$scope.$watch("chart",drawPlot)}}}}var external_kbnSharedDeps_KbnI18n_=__webpack_require__(11);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var panel_Panel=function Panel(name,config){_classCallCheck(this,Panel);_defineProperty(this,"name",void 0);_defineProperty(this,"help",void 0);_defineProperty(this,"render",void 0);this.name=name;this.help=config.help||"";this.render=config.render;if(!config.render){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.panels.noRenderFunctionErrorMessage",{defaultMessage:"Panel must have a rendering function"}))}};function getTimeChart(dependencies){return new panel_Panel("timechart",timechartFn(dependencies)())}var kibanaLegacy_public_=__webpack_require__(2);var node_modules_history=__webpack_require__(58);var kibanaUtils_public_=__webpack_require__(3);var data_public_=__webpack_require__(4);var ROOT_BREADCRUMB={text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.breadcrumbs.root",{defaultMessage:"Timelion"}),href:"#"};function getCreateBreadcrumbs(){return[ROOT_BREADCRUMB,{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.breadcrumbs.create",{defaultMessage:"Create"})}]}function getSavedSheetBreadcrumbs($route){var savedSheet=$route.current.locals.savedSheet;return[ROOT_BREADCRUMB,{text:savedSheet.title}]}function move(objs,obj,below,qualifier){var origI=external_kbnSharedDeps_Lodash_default.a.isNumber(obj)?obj:objs.indexOf(obj);if(origI===-1){return objs}if(external_kbnSharedDeps_Lodash_default.a.isNumber(below)){objs.splice(below,0,objs.splice(origI,1)[0]);return objs}below=!!below;qualifier=qualifier&&external_kbnSharedDeps_Lodash_default.a.iteratee(qualifier);var above=!below;var finder=below?external_kbnSharedDeps_Lodash_default.a.findIndex:external_kbnSharedDeps_Lodash_default.a.findLastIndex;var targetI=finder(objs,(function(otherAgg,otherI){if(below&&otherI<=origI){return}if(above&&otherI>=origI){return}return Boolean(external_kbnSharedDeps_Lodash_default.a.isFunction(qualifier)&&qualifier(otherAgg,otherI))}));if(targetI===-1){return objs}objs.splice(targetI,0,objs.splice(origI,1)[0]);return objs}function initTimelionGridDirective(app){app.directive("timelionGrid",(function(){return{restrict:"A",scope:{timelionGridRows:"=",timelionGridColumns:"="},link:function link($scope,$elem){function init(){setDimensions()}$scope.$on("$destroy",(function(){external_kbnSharedDeps_Jquery_default()(window).off("resize")}));external_kbnSharedDeps_Jquery_default()(window).resize((function(){setDimensions()}));$scope.$watchMulti(["timelionGridColumns","timelionGridRows"],(function(){setDimensions()}));function setDimensions(){var borderSize=2;var headerSize=45+35+28+20*2;var verticalPadding=10;if($scope.timelionGridColumns!=null){$elem.width($elem.parent().width()/$scope.timelionGridColumns-borderSize*2)}if($scope.timelionGridRows!=null){$elem.height((external_kbnSharedDeps_Jquery_default()(window).height()-headerSize)/$scope.timelionGridRows-(verticalPadding+borderSize*2))}}init()}}}))}var cells='<div sv-root\n  sv-part="state.sheet"\n  sv-on-sort="dropCell($item, $partFrom, $partTo, $indexFrom, $indexTo)"\n  >\n\n  <div sv-element\n    ng-repeat="cell in state.sheet track by $index"\n    class="timCell col-md-{{12 / state.columns}} col-sm-12 col-xs-12"\n    timelion-grid timelion-grid-rows="state.rows"\n    ng-click="onSelect($index)"\n    ng-class="{active: $index === state.selected}"\n    kbn-accessible-click\n    aria-label="Timelion chart {{$index + 1}}"\n    aria-current="{{$index === state.selected}}"\n    >\n\n    <div chart="sheet[$index]" class="timChart" search="onSearch" interval="state.interval"></div>\n    <div class="timCell__actions">\n      <div class="timCell__id"><span>{{$index + 1}}</span></div>\n\n      <button\n        class="timCell__action"\n        ng-click="removeCell($index)"\n        tooltip="{{ ::\'timelion.cells.actions.removeTooltip\' | i18n: { defaultMessage: \'Remove\' } }}"\n        tooltip-append-to-body="1"\n        aria-label="{{ ::\'timelion.cells.actions.removeAriaLabel\' | i18n: { defaultMessage: \'Remove chart\' } }}"\n      >\n        <span class="fa fa-remove"></span>\n      </button>\n      <button\n        class="timCell__action"\n        tooltip="{{ ::\'timelion.cells.actions.reorderTooltip\' | i18n: { defaultMessage: \'Drag to reorder\' } }}"\n        tooltip-append-to-body="1"\n        sv-handle\n        aria-label="{{ ::\'timelion.cells.actions.reorderAriaLabel\' | i18n: { defaultMessage: \'Drag to reorder\' } }}"\n        tabindex="-1"\n      >\n        <span class="fa fa-arrows"></span>\n      </button>\n      <button\n        class="timCell__action"\n        ng-click="transient.fullscreen = true"\n        tooltip="{{ ::\'timelion.cells.actions.fullscreenTooltip\' | i18n: { defaultMessage: \'Full screen\' } }}"\n        tooltip-append-to-body="1"\n        aria-label="{{ ::\'timelion.cells.actions.fullscreenAriaLabel\' | i18n: { defaultMessage: \'Full screen chart\' } }}"\n      >\n        <span class="fa fa-expand"></span>\n      </button>\n    </div>\n  </div>\n\n</div>\n';function initCellsDirective(app){initTimelionGridDirective(app);app.directive("timelionCells",(function(){return{restrict:"E",scope:{sheet:"=",state:"=",transient:"=",onSearch:"=",onSelect:"=",onRemoveSheet:"="},template:cells,link:function link($scope){$scope.removeCell=function(index){$scope.onRemoveSheet(index)};$scope.dropCell=function(item,partFrom,partTo,indexFrom,indexTo){move($scope.sheet,indexFrom,indexTo);$scope.onSelect(indexTo)}}}}))}var fullscreen='<div class="timCell col-md-12 col-sm-12 col-xs-12" timelion-grid timelion-grid-rows="1">\n  <div chart="series" class="timChart" search="onSearch" interval="state.interval"></div>\n  <div class="timCell__actions">\n    <button\n      class="timCell__action"\n      ng-click="transient.fullscreen = false"\n      tooltip="{{ ::\'timelion.fullscreen.exitTooltip\' | i18n: { defaultMessage: \'Exit full screen\' } }}"\n      tooltip-append-to-body="1"\n      aria-label="{{ ::\'timelion.fullscreen.exitAriaLabel\' | i18n: { defaultMessage: \'Exit full screen\' } }}"\n    >\n      <span class="fa fa-compress"></span>\n    </button>\n  </div>\n</div>\n';function initFullscreenDirective(app){app.directive("timelionFullscreen",(function(){return{restrict:"E",scope:{expression:"=",series:"=",state:"=",transient:"=",onSearch:"="},template:fullscreen}}))}function initFixedElementDirective(app){app.directive("fixedElementRoot",(function(){return{restrict:"A",link:function link($elem){var fixedAt;external_kbnSharedDeps_Jquery_default()(window).bind("scroll",(function(){var fixed=external_kbnSharedDeps_Jquery_default()("[fixed-element]",$elem);var body=external_kbnSharedDeps_Jquery_default()("[fixed-element-body]",$elem);var top=fixed.offset().top;if(external_kbnSharedDeps_Jquery_default()(window).scrollTop()>top){fixedAt=external_kbnSharedDeps_Jquery_default()(window).scrollTop();fixed.addClass(fixed.attr("fixed-element"));body.addClass(fixed.attr("fixed-element-body"));body.css({top:fixed.height()})}if(external_kbnSharedDeps_Jquery_default()(window).scrollTop()<fixedAt){fixed.removeClass(fixed.attr("fixed-element"));body.removeClass(fixed.attr("fixed-element-body"));body.removeAttr("style")}}))}}}))}var load_sheet='<form role="form" ng-submit="fetch()">\n  <h2\n    class="kuiLocalDropdownTitle"\n    i18n-id="timelion.topNavMenu.openSheetTitle"\n    i18n-default-message="Open Sheet"\n  ></h2>\n\n  <saved-object-finder\n    type="timelion-sheet"\n    use-local-management="true"\n  ></saved-object-finder>\n</form>\n';function initTimelionLoadSheetDirective(app){app.directive("timelionLoad",(function(){return{replace:true,restrict:"E",template:load_sheet}}))}var timelion_help='<div class="euiText timHelp">\n  <div ng-show="page === 1">\n    <div>\n      <h1\n        i18n-id="timelion.help.welcomeTitle"\n        i18n-default-message="Welcome to {strongTimelionLabel}!"\n        i18n-values="{ html_strongTimelionLabel: \'<strong>Timelion</strong>\' }"\n      ></h1>\n      <p\n        i18n-id="timelion.help.welcome.content.paragraph1"\n        i18n-default-message="Timelion is the clawing, gnashing, zebra killing, pluggable time\n                              series interface for {emphasizedEverything}. If your datastore can\n                              produce a time series, then you have all of the awesome power of\n                              Timelion at your disposal. Timelion lets you compare, combine, and\n                              combobulate datasets across multiple datasources with one\n                              easy-to-master expression syntax. This tutorial focuses on\n                              Elasticsearch, but you\'ll quickly discover that what you learn here\n                              applies to any datasource Timelion supports."\n        i18n-values="{ html_emphasizedEverything: \'<em>\' + translations.emphasizedEverythingText + \'</em>\' }"\n      ></p>\n      <p>\n        <span\n          i18n-id="timelion.help.welcome.content.paragraph2"\n          i18n-default-message="Ready to get started? Click {strongNext}. Want to skip the tutorial and view the docs?"\n          i18n-values="{\n            html_strongNext: \'<strong>\' + translations.strongNextText + \'</strong>\',\n          }"\n        ></span>\n        <a\n          ng-click="setPage(0)"\n          i18n-id="timelion.help.welcome.content.functionReferenceLinkText"\n          i18n-default-message="Jump to the function reference"\n        ></a>.\n      </p>\n    </div>\n    <div class="timHelp__buttons">\n\n      <button\n        ng-click="opts.dontShowHelp()"\n        class="kuiButton kuiButton--hollow"\n      >\n        {{translations.dontShowHelpButtonLabel}}\n      </button>\n\n\n      <button\n        ng-click="setPage(page+1)"\n        class="kuiButton kuiButton--primary"\n      >\n        {{translations.nextButtonLabel}}\n      </button>\n\n    </div>\n  </div>\n  <div ng-show="page === 2">\n    <div ng-show="!es.valid">\n      <div>\n        <h2\n          i18n-id="timelion.help.configuration.notValidTitle"\n          i18n-default-message="First time configuration"\n        ></h2>\n        <p\n          i18n-id="timelion.help.configuration.notValid.paragraph1"\n          i18n-default-message="If you\'re using Logstash, you don\'t need to configure anything to\n                                start exploring your log data with Timelion. To search other\n                                indices, go to {advancedSettingsPath} and configure the {esDefaultIndex}\n                                and {esTimefield} settings to match your indices."\n          i18n-values="{\n            html_advancedSettingsPath: \'<strong>\' + translations.notValidAdvancedSettingsPath + \'</strong>\',\n            html_esDefaultIndex: \'<code>timelion:es.default_index</code>\',\n            html_esTimefield: \'<code>timelion:es.timefield</code>\',\n          }"\n        ></p>\n        <p\n          i18n-id="timelion.help.configuration.notValid.paragraph2"\n          i18n-default-message="You\'ll also see some other Timelion settings. For now, you don\'t need\n                                to worry about them. Later, you\'ll see that you can set most of\n                                them on the fly if you need to."\n        ></p>\n      </div>\n      <div class="timHelp__buttons">\n\n        <button\n          ng-click="setPage(page-1)"\n          class="kuiButton kuiButton--primary"\n        >\n          {{translations.previousButtonLabel}}\n        </button>\n\n        <span\n          ng-show="es.invalidCount > 0 && !es.valid"\n          i18n-id="timelion.help.configuration.notValid.notValidSettingsErrorMessage"\n          i18n-default-message="Could not validate Elasticsearch settings: {reason}.\n                                Check your Advanced Settings and try again. ({count})"\n          i18n-values="{\n            html_reason: \'<strong>\' + es.invalidReason + \'</strong>\',\n            count: es.invalidCount,\n          }"\n        ></span>\n\n        <button\n          ng-click="recheckElasticsearch()"\n          class="kuiButton kuiButton--primary"\n          i18n-id="timelion.help.configuration.notValid.validateButtonLabel"\n          i18n-default-message="Validate Config"\n        ></button>\n\n      </div>\n    </div>\n    <div ng-show="es.valid">\n      <div>\n        <h2\n          i18n-id="timelion.help.configuration.validTitle"\n          i18n-default-message="Good news, Elasticsearch is configured correctly!"\n        ></h2>\n        <p>\n          <span\n            i18n-id="timelion.help.configuration.valid.paragraph1Part1"\n            i18n-default-message="We validated your default index and your timefield and everything\n                                  looks ok. We found data from {statsMin} to {statsMax}.\n                                  You\'re probably all set. If this doesn\'t look right, see"\n            i18n-values="{\n              html_statsMin: \'<strong>\' + es.stats.min + \'</strong>\',\n              html_statsMax: \'<strong>\' + es.stats.max + \'</strong>\',\n            }"\n            i18n-description="Part of composite text timelion.help.configuration.valid.paragraph1Part1 +\n                              timelion.help.configuration.firstTimeConfigurationLinkText +\n                              timelion.help.configuration.valid.paragraph1Part2"\n          ></span>\n          <a\n            ng-click="es.valid = false"\n            i18n-id="timelion.help.configuration.firstTimeConfigurationLinkText"\n            i18n-default-message="First time configuration"\n            i18n-description="Part of composite text timelion.help.configuration.valid.paragraph1Part1 +\n                              timelion.help.configuration.firstTimeConfigurationLinkText +\n                              timelion.help.configuration.valid.paragraph1Part2"\n          ></a>\n          <span\n            i18n-id="timelion.help.configuration.valid.paragraph1Part2"\n            i18n-default-message="for information about configuring the Elasticsearch datasource."\n            i18n-description="Part of composite text timelion.help.configuration.valid.paragraph1Part1 +\n                              timelion.help.configuration.firstTimeConfigurationLinkText +\n                              timelion.help.configuration.valid.paragraph1Part2"\n          ></span>\n        </p>\n        <p\n          i18n-id="timelion.help.configuration.valid.paragraph2"\n          i18n-default-message="You should already see one chart, but you might need to make a\n                                couple adjustments before you see any interesting data:"\n        ></p>\n        <ul>\n          <li>\n            <strong\n              i18n-id="timelion.help.configuration.valid.intervalsTitle"\n              i18n-default-message="Intervals"\n            ></strong>\n            <p>\n              <span\n                i18n-id="timelion.help.configuration.valid.intervalsTextPart1"\n                i18n-default-message="The interval selector at the right of the input bar lets you\n                                      control the sampling frequency. It\'s currently set to {interval}."\n                i18n-values="{ html_interval: \'<code>\' + state.interval + \'</code>\' }"\n                i18n-description="Part of composite text\n                                  timelion.help.configuration.valid.intervalsTextPart1 +\n                                  (timelion.help.configuration.valid.intervalIsAutoText ||\n                                  timelion.help.configuration.valid.intervals.content.intervalIsNotAutoText) +\n                                  timelion.help.configuration.valid.intervalsTextPart2"\n              ></span>\n              <span ng-show="state.interval == \'auto\'">\n                <strong\n                  i18n-id="timelion.help.configuration.valid.intervalIsAutoText"\n                  i18n-default-message="You\'re all set!"\n                  i18n-description="Part of composite text\n                                    timelion.help.configuration.valid.intervalsTextPart1 +\n                                    (timelion.help.configuration.valid.intervalIsAutoText ||\n                                    timelion.help.configuration.valid.intervals.content.intervalIsNotAutoText) +\n                                    timelion.help.configuration.valid.intervalsTextPart2"\n                ></strong>\n              </span>\n              <span\n                ng-show="state.interval != \'auto\'"\n                i18n-id="timelion.help.configuration.valid.intervals.content.intervalIsNotAutoText"\n                i18n-default-message="Set it to {auto} to let Timelion choose an appropriate interval."\n                i18n-description="Part of composite text\n                                  timelion.help.configuration.valid.intervalsTextPart1 +\n                                  (timelion.help.configuration.valid.intervalIsAutoText ||\n                                  timelion.help.configuration.valid.intervals.content.intervalIsNotAutoText) +\n                                  timelion.help.configuration.valid.intervalsTextPart2"\n                i18n-values="{ html_auto: \'<code>auto</code>\' }"\n              ></span>\n              <span\n                i18n-id="timelion.help.configuration.valid.intervalsTextPart2"\n                i18n-default-message="If Timelion thinks your combination of time range and interval\n                                      will produce too many data points, it throws an error.\n                                      You can adjust that limit by configuring {maxBuckets} in {advancedSettingsPath}."\n                i18n-values="{\n                  html_maxBuckets: \'<code>timelion:max_buckets</code>\',\n                  html_advancedSettingsPath: \'<strong>\' + translations.validAdvancedSettingsPath + \'</strong>\',\n                }"\n              ></span>\n            </p>\n          </li>\n          <li>\n            <strong\n              i18n-id="timelion.help.configuration.valid.timeRangeTitle"\n              i18n-default-message="Time range"\n            ></strong>\n            <p\n              i18n-id="timelion.help.configuration.valid.timeRangeText"\n              i18n-default-message="Use the timepicker in the Kibana toolbar to select the time period\n                                    that contains the data you want to visualize. Make sure you select\n                                    a time period that includes all or part of the time range shown above."\n            ></p>\n          </li>\n        </ul>\n        <p\n          i18n-id="timelion.help.configuration.valid.paragraph3"\n          i18n-default-message="Now, you should see a line chart that displays a count of your data points over time."\n        ></p>\n      </div>\n      <div class="timHelp__buttons">\n\n        <button\n          ng-click="setPage(page-1)"\n          class="kuiButton kuiButton--primary"\n        >\n          {{translations.previousButtonLabel}}\n        </button>\n\n\n        <button\n          ng-click="setPage(page+1)"\n          class="kuiButton kuiButton--primary"\n        >\n          {{translations.nextButtonLabel}}\n        </button>\n\n      </div>\n    </div>\n  </div>\n  <div ng-show="page === 3">\n    <div>\n      <h2\n        i18n-id="timelion.help.queryingTitle"\n        i18n-default-message="Querying the Elasticsearch datasource"\n      ></h2>\n      <p\n        i18n-id="timelion.help.querying.paragraph1"\n        i18n-default-message="Now that we\'ve validated that you have a working Elasticsearch\n                              datasource, you can start submitting queries. For starters,\n                              enter {esPattern} in the input bar and hit enter."\n        i18n-values="{\n          html_esPattern: \'<code>.es(*)</code>\',\n        }"\n      ></p>\n      <p>\n        <span\n          i18n-id="timelion.help.querying.paragraph2Part1"\n          i18n-default-message="This says {esAsteriskQueryDescription}. If you want to find a subset, you could enter something\n                                like {htmlQuery} to count events that match {html}, or {bobQuery}\n                                to find events that contain {bob} in the {user} field and have a {bytes}\n                                field that is greater than 100. Note that this query is enclosed in single\n                                quotes&mdash;that\'s because it contains spaces. You can enter any"\n          i18n-values="{\n            html_esAsteriskQueryDescription: \'<em>\' + translations.esAsteriskQueryDescription + \'</em>\',\n            html_html: \'<em>html</em>\',\n            html_htmlQuery: \'<code>.es(html)</code>\',\n            html_bobQuery: \'<code>.es(\\\'user:bob AND bytes:>100\\\')</code>\',\n            html_bob: \'<em>bob</em>\',\n            html_user: \'<code>user</code>\',\n            html_bytes: \'<code>bytes</code>\',\n          }"\n          i18n-description="Part of composite text\n                            timelion.help.querying.paragraph2Part1 +\n                            timelion.help.querying.luceneQueryLinkText +\n                            timelion.help.querying.paragraph2Part2"\n        ></span>\n        <a\n          href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax"\n          target="_blank"\n          rel="noopener noreferrer"\n          i18n-id="timelion.help.querying.luceneQueryLinkText"\n          i18n-default-message="Lucene query string"\n          i18n-description="Part of composite text\n                            timelion.help.querying.paragraph2Part1 +\n                            timelion.help.querying.luceneQueryLinkText +\n                            timelion.help.querying.paragraph2Part2"\n        ></a>\n        <span\n          i18n-id="timelion.help.querying.paragraph2Part2"\n          i18n-default-message="as the first argument to the {esQuery} function."\n          i18n-values="{\n            html_esQuery: \'<code>.es()</code>\',\n          }"\n          i18n-description="Part of composite text\n                            timelion.help.querying.paragraph2Part1 +\n                            timelion.help.querying.luceneQueryLinkText +\n                            timelion.help.querying.paragraph2Part2"\n        ></span>\n      </p>\n      <h4\n        i18n-id="timelion.help.querying.passingArgumentsTitle"\n        i18n-default-message="Passing arguments"\n      ></h4>\n      <p\n        i18n-id="timelion.help.querying.passingArgumentsText"\n        i18n-default-message="Timelion has a number of shortcuts that make it easy to do common things.\n                              One is that for simple arguments that don\'t contain spaces or special\n                              characters, you don\'t need to use quotes. Many functions also have defaults.\n                              For example, {esEmptyQuery} and {esStarQuery} do the same thing.\n                              Arguments also have names, so you don\'t have to specify them in a specific order.\n                              For example, you can enter {esLogstashQuery} to tell the Elasticsearch datasource\n                              {esIndexQueryDescription}."\n        i18n-values="{\n          html_esEmptyQuery: \'<code>.es()</code>\',\n          html_esStarQuery: \'<code>.es(*)</code>\',\n          html_esLogstashQuery: \'<code>.es(index=\\\'logstash-*\\\', q=\\\'*\\\')</code>\',\n          html_esIndexQueryDescription: \'<em>\' + translations.esIndexQueryDescription + \'</em>\',\n        }"\n      ></p>\n      <h4\n        i18n-id="timelion.help.querying.countTitle"\n        i18n-default-message="Beyond count"\n      ></h4>\n      <p>\n        <span\n          i18n-id="timelion.help.querying.countTextPart1"\n          i18n-default-message="Counting events is all well and good, but the Elasticsearch datasource also supports any"\n          i18n-description="Part of composite text\n                            timelion.help.querying.countTextPart1 +\n                            timelion.help.querying.countMetricAggregationLinkText +\n                            timelion.help.querying.countTextPart2"\n        ></span>\n        <a\n          href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics.html"\n          target="_blank"\n          rel="noopener noreferrer"\n          i18n-id="timelion.help.querying.countMetricAggregationLinkText"\n          i18n-default-message="Elasticsearch metric aggregation"\n          i18n-description="Part of composite text\n                            timelion.help.querying.countTextPart1 +\n                            timelion.help.querying.countMetricAggregationLinkText +\n                            timelion.help.querying.countTextPart2"\n        ></a>\n        <span\n          i18n-id="timelion.help.querying.countTextPart2"\n          i18n-default-message="that returns a single value. Some of the most useful are\n                                {min}, {max}, {avg}, {sum}, and {cardinality}.\n                                Let\'s say you want a unique count of the {srcIp} field.\n                                Simply use the {cardinality} metric: {esCardinalityQuery}. To get the\n                                average of the {bytes} field, you can use the {avg} metric: {esAvgQuery}."\n          i18n-values="{\n            html_min: \'<code>min</code>\',\n            html_max: \'<code>max</code>\',\n            html_avg: \'<code>avg</code>\',\n            html_sum: \'<code>sum</code>\',\n            html_cardinality: \'<code>cardinality</code>\',\n            html_bytes: \'<code>bytes</code>\',\n            html_srcIp: \'<code>src_ip</code>\',\n            html_esCardinalityQuery: \'<code>.es(*, metric=\\\'cardinality:src_ip\\\')</code>\',\n            html_esAvgQuery: \'<code>.es(metric=\\\'avg:bytes\\\')</code>\',\n          }"\n          i18n-description="Part of composite text\n                            timelion.help.querying.countTextPart1 +\n                            timelion.help.querying.countMetricAggregationLinkText +\n                            timelion.help.querying.countTextPart2"\n        ></span>\n      </p>\n    </div>\n    <div class="timHelp__buttons">\n\n      <button\n        ng-click="setPage(page-1)"\n        class="kuiButton kuiButton--primary"\n      >\n        {{translations.previousButtonLabel}}\n      </button>\n\n\n      <button\n        ng-click="setPage(page+1)"\n        class="kuiButton kuiButton--primary"\n      >\n        {{translations.nextButtonLabel}}\n      </button>\n\n    </div>\n  </div>\n\n  <div ng-show="page === 4">\n    <div>\n      <h2\n        i18n-id="timelion.help.expressionsTitle"\n        i18n-default-message="Expressing yourself with expressions"\n      ></h2>\n      <p\n        i18n-id="timelion.help.expressions.paragraph1"\n        i18n-default-message="Every expression starts with a datasource function. From there, you\n                              can append new functions to the datasource to transform and augment it."\n      ></p>\n      <p\n        i18n-id="timelion.help.expressions.paragraph2"\n        i18n-default-message="By the way, from here on out you probably know more about your data\n                              than we do. Feel free to replace the sample queries with something\n                              more meaningful!"\n      ></p>\n      <p\n        i18n-id="timelion.help.expressions.paragraph3"\n        i18n-default-message="We\'re going to experiment, so click {strongAdd} in the Kibana toolbar\n                              to add another chart or three. Then, select a chart,\n                              copy one of the following expressions, paste it into the input bar,\n                              and hit enter. Rinse, repeat to try out the other expressions."\n        i18n-values="{ html_strongAdd: \'<strong>\' + translations.strongAddText + \'</strong>\' }"\n      ></p>\n      <table class="table table-condensed table-striped">\n        <tr>\n          <td><code>.es(*), .es(US)</code></td>\n          <td\n            i18n-id="timelion.help.expressions.examples.twoExpressionsDescription"\n            i18n-default-message="{descriptionTitle} Two expressions on the same chart."\n            i18n-values="{\n              html_descriptionTitle: \'<strong>\' + translations.twoExpressionsDescriptionTitle + \'</strong>\',\n            }"\n          ></td>\n        </tr>\n        <tr>\n          <td><code>.es(*).color(#f66), .es(US).bars(1)</code></td>\n          <td\n            i18n-id="timelion.help.expressions.examples.customStylingDescription"\n            i18n-default-message="{descriptionTitle} Colorizes the first series red and\n                                  uses 1 pixel wide bars for the second series."\n            i18n-values="{\n              html_descriptionTitle: \'<strong>\' + translations.customStylingDescriptionTitle + \'</strong>\',\n            }"\n          ></td>\n        </tr>\n        <tr>\n          <td>\n            <code>.es(*).color(#f66).lines(fill=3),\n            .es(US).bars(1).points(radius=3, weight=1)</code>\n          </td>\n          <td\n            i18n-id="timelion.help.expressions.examples.namedArgumentsDescription"\n            i18n-default-message="{descriptionTitle} Forget trying to remember what order you need\n                                  to specify arguments in, use named arguments to make\n                                  the expressions easier to read and write."\n            i18n-values="{\n              html_descriptionTitle: \'<strong>\' + translations.namedArgumentsDescriptionTitle + \'</strong>\',\n            }"\n          ></td>\n        </tr>\n        <tr>\n          <td><code>(.es(*), .es(GB)).points()</code></td>\n          <td\n            i18n-id="timelion.help.expressions.examples.groupedExpressionsDescription"\n            i18n-default-message="{descriptionTitle} You can also chain groups of expressions to\n                                  functions. Here, both series are shown as points instead of lines."\n            i18n-values="{\n              html_descriptionTitle: \'<strong>\' + translations.groupedExpressionsDescriptionTitle + \'</strong>\',\n            }"\n          ></td>\n        </tr>\n      </table>\n      <p>\n        <span\n          i18n-id="timelion.help.expressions.paragraph4"\n          i18n-default-message="Timelion provides additional view transformation functions you can use\n                                to customize the appearance of your charts. For the complete list, see the"\n          i18n-description="Part of composite text\n                            timelion.help.expressions.paragraph4 +\n                            timelion.help.expressions.functionReferenceLinkText"\n        ></span>\n        <a\n          ng-click="setPage(0)"\n          i18n-id="timelion.help.expressions.functionReferenceLinkText"\n          i18n-default-message="Function reference"\n          i18n-description="Part of composite text\n                            timelion.help.expressions.paragraph4 +\n                            timelion.help.expressions.functionReferenceLinkText"\n        ></a>.\n      </p>\n    </div>\n    <div class="timHelp__buttons">\n\n      <button\n        ng-click="setPage(page-1)"\n        class="kuiButton kuiButton--primary"\n      >\n        {{translations.previousButtonLabel}}\n      </button>\n\n\n      <button\n        ng-click="setPage(page+1)"\n        class="kuiButton kuiButton--primary"\n      >\n        {{translations.nextButtonLabel}}\n      </button>\n\n    </div>\n  </div>\n  <div ng-show="page === 5">\n    <div>\n      <h2\n        i18n-id="timelion.help.dataTransformingTitle"\n        i18n-default-message="Transforming your data: the real fun begins!"\n      ></h2>\n      <p\n        i18n-id="timelion.help.dataTransforming.paragraph1"\n        i18n-default-message="Now that you\'ve mastered the basics, it\'s time to unleash the power of\n                              Timelion. Let\'s figure out what percentage some subset of our data\n                              represents of the whole, over time. For example, what percentage of\n                              our web traffic comes from the US?"\n      ></p>\n      <p\n        i18n-id="timelion.help.dataTransforming.paragraph2"\n        i18n-default-message="First, we need to find all events that contain US: {esUsQuery}."\n        i18n-values="{ html_esUsQuery: \'<code>.es(\\\'US\\\')</code>\' }"\n      ></p>\n      <p\n        i18n-id="timelion.help.dataTransforming.paragraph3"\n        i18n-default-message="Next, we want to calculate the ratio of US events to the whole.\n                              To divide {us} by everything, we can use the {divide} function:\n                              {divideDataQuery}."\n        i18n-values="{\n          html_us: \'<code>\\\'US\\\'</code>\',\n          html_divide: \'<code>divide</code>\',\n          html_divideDataQuery: \'<code>.es(\\\'US\\\').divide(.es())</code>\',\n        }"\n      ></p>\n      <p\n        i18n-id="timelion.help.dataTransforming.paragraph4"\n        i18n-default-message="Not bad, but this gives us a number between 0 and 1. To convert it\n                              to a percentage, simply multiply by 100: {multiplyDataQuery}."\n        i18n-values="{ html_multiplyDataQuery: \'<code>.es(\\\'US\\\').divide(.es()).multiply(100)</code>\' }"\n      ></p>\n      <p\n        i18n-id="timelion.help.dataTransforming.paragraph5"\n        i18n-default-message="Now we know what percentage of our traffic comes from the US, and\n                              can see how it has changed over time! Timelion has a number of\n                              built-in arithmetic functions, such as {sum}, {subtract}, {multiply},\n                              and {divide}. Many of these can take a series or a number. There are\n                              also other useful data transformation functions, such as\n                              {movingaverage}, {abs}, and {derivative}."\n        i18n-values="{\n          html_sum: \'<code>sum</code>\',\n          html_subtract: \'<code>subtract</code>\',\n          html_multiply: \'<code>multiply</code>\',\n          html_divide: \'<code>divide</code>\',\n          html_movingaverage: \'<code>movingaverage</code>\',\n          html_abs: \'<code>abs</code>\',\n          html_derivative: \'<code>derivative</code>\',\n        }"\n      ></p>\n      <p>\n        <span\n          i18n-id="timelion.help.dataTransforming.paragraph6Part1"\n          i18n-default-message="Now that you\'re familiar with the syntax, refer to the"\n          i18n-description="Part of composite text\n                            timelion.help.dataTransforming.paragraph6Part1 +\n                            timelion.help.dataTransforming.functionReferenceLinkText +\n                            timelion.help.dataTransforming.paragraph6Part2"\n        ></span>\n        <a\n          ng-click="setPage(0)"\n          i18n-id="timelion.help.dataTransforming.functionReferenceLinkText"\n          i18n-default-message="Function reference"\n          i18n-description="Part of composite text\n                            timelion.help.dataTransforming.paragraph6Part1 +\n                            timelion.help.dataTransforming.functionReferenceLinkText +\n                            timelion.help.dataTransforming.paragraph6Part2"\n        ></a>\n        <span\n          i18n-id="timelion.help.dataTransforming.paragraph6Part2"\n          i18n-default-message="to see how to use all of the available Timelion functions.\n                                You can view the reference at any time by clicking \\{Docs\\}\n                                in the Kibana toolbar. To get back to this tutorial, click the\n                                \\{Tutorial\\} link at the top of the reference."\n          i18n-description="Part of composite text\n                            timelion.help.dataTransforming.paragraph6Part1 +\n                            timelion.help.dataTransforming.functionReferenceLinkText +\n                            timelion.help.dataTransforming.paragraph6Part2"\n        ></span>\n      </p>\n    </div>\n    <div class="timHelp__buttons">\n\n      <button\n        ng-click="setPage(page-1)"\n        class="kuiButton kuiButton--primary"\n      >\n        {{translations.previousButtonLabel}}\n      </button>\n\n\n\n      <button\n        ng-click="opts.dontShowHelp()"\n        class="kuiButton kuiButton--hollow"\n      >\n        {{translations.dontShowHelpButtonLabel}}\n      </button>\n\n    </div>\n  </div>\n</div>\n<div ng-show="page === 0">\n  <h2\n    class="kuiLocalDropdownTitle"\n    i18n-id="timelion.help.mainPageTitle"\n    i18n-default-message="Help"\n  ></h2>\n\n  <timelion-help-tabs\n    activate-tab="activateTab"\n    active-tab="activeTab"\n  >\n  </timelion-help-tabs>\n\n  <div ng-show="activeTab == \'funcref\'" class="list-group-item list-group-item--noBorder">\n    <div class="kuiLocalDropdownHelpText">\n      <span\n        i18n-id="timelion.help.mainPage.functionReference.gettingStartedText"\n        i18n-default-message="Click any function for more information. Just getting started?"\n      ></span>\n      <a\n        i18n-id="timelion.help.mainPage.functionReference.welcomePageLinkText"\n        i18n-default-message="Check out the tutorial"\n        class="kuiLink"\n        ng-click="setPage(1)"\n        kbn-accessible-click\n      ></a>.\n    </div>\n\n    <div class="timHelp__functions">\n      <table class="table table-condensed table-bordered">\n        <tr\n          class="timHelp__functionsTableRow"\n          ng-repeat-start="function in functions.list"\n          ng-class="{active: functions.details === function.name}"\n          ng-click="functions.details =\n                    (functions.details === function.name ?\n                      null : function.name)"\n          kbn-accessible-click\n        >\n          <td><strong>.{{function.name}}()</strong></td>\n          <td>{{function.help}}</td>\n        </tr>\n        <tr ng-if="functions.details === function.name" ng-repeat-end>\n          <td colspan=2>\n            <div class="suggestion-details" >\n              <table\n                class="table table-condensed table-bordered\n                        timHelp__functionDetailsTable"\n                ng-show="function.args.length > (function.chainable ? 1: 0)"\n              >\n                <thead>\n                  <th\n                    scope="col"\n                    i18n-id="timelion.help.mainPage.functionReference.detailsTable.argumentNameColumnLabel"\n                    i18n-default-message="Argument Name"\n                  ></th>\n                  <th\n                    scope="col"\n                    i18n-id="timelion.help.mainPage.functionReference.detailsTable.acceptedTypesColumnLabel"\n                    i18n-default-message="Accepted Types"\n                  ></th>\n                  <th\n                    scope="col"\n                    i18n-id="timelion.help.mainPage.functionReference.detailsTable.informationColumnLabel"\n                    i18n-default-message="Information"\n                  ></th>\n                </thead>\n                <tr\n                  ng-repeat="arg in function.args"\n                  ng-hide="$index < 1 && function.chainable"\n                >\n                  <td>{{arg.name}}</td>\n                  <td><em>{{arg.types.join(\', \')}}</em></td>\n                  <td>{{arg.help}}</td>\n                </tr>\n              </table>\n              <div ng-hide="function.args.length > (function.chainable ? 1: 0)">\n                <em\n                  i18n-id="timelion.help.mainPage.functionReference.noArgumentsFunctionErrorMessage"\n                  i18n-default-message="This function does not accept any arguments. Well that\'s simple, isn\'t it?"\n                ></em>\n              </div>\n            </div>\n          </td>\n        </tr>\n      </table>\n    </div>\n  </div>\n\n  <div ng-show="activeTab == \'keyboardtips\'" class="list-group-item list-group-item--noBorder">\n    \x3c!-- General editing tips --\x3e\n    <dl class="dl-horizontal">\n      <dd>\n        <strong\n          i18n-id="timelion.help.mainPage.keyboardTips.generalEditingTitle"\n          i18n-default-message="General editing"\n        ></strong></dd>\n      <dt></dt>\n      <dt>Ctrl/Cmd + Enter</dt>\n      <dd\n        i18n-id="timelion.help.mainPage.keyboardTips.generalEditing.submitRequestText"\n        i18n-default-message="Submit request"\n      ></dd>\n    </dl>\n\n    \x3c!-- Auto complete tips --\x3e\n    <dl class="dl-horizontal">\n      <dt></dt>\n      <dd>\n        <strong\n          i18n-id="timelion.help.mainPage.keyboardTips.autoCompleteTitle"\n          i18n-default-message="When auto-complete is visible"\n        ></strong>\n      </dd>\n      <dt\n        i18n-id="timelion.help.mainPage.keyboardTips.autoComplete.downArrowLabel"\n        i18n-default-message="Down arrow"\n      ></dt>\n      <dd\n        i18n-id="timelion.help.mainPage.keyboardTips.autoComplete.downArrowDescription"\n        i18n-default-message="Switch focus to auto-complete menu. Use arrows to further select a term"\n      ></dd>\n      <dt>Enter/Tab</dt>\n      <dd\n        i18n-id="timelion.help.mainPage.keyboardTips.autoComplete.enterTabDescription"\n        i18n-default-message="Select the currently selected or the top most term in auto-complete menu"\n      ></dd>\n      <dt>Esc</dt>\n      <dd\n        i18n-id="timelion.help.mainPage.keyboardTips.autoComplete.escDescription"\n        i18n-default-message="Close auto-complete menu"\n      ></dd>\n    </dl>\n  </div>\n</div>\n';var external_kbnSharedDeps_Moment_=__webpack_require__(20);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function initTimelionHelpDirective(app){app.directive("timelionHelp",(function($http){return{restrict:"E",template:timelion_help,controller:function controller($scope){$scope.functions={list:[],details:null};$scope.activeTab="funcref";$scope.activateTab=function(tabName){$scope.activeTab=tabName};function init(){$scope.es={invalidCount:0};$scope.translations={nextButtonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.nextPageButtonLabel",{defaultMessage:"Next"}),previousButtonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.previousPageButtonLabel",{defaultMessage:"Previous"}),dontShowHelpButtonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.dontShowHelpButtonLabel",{defaultMessage:"Don't show this again"}),strongNextText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.welcome.content.strongNextText",{defaultMessage:"Next"}),emphasizedEverythingText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.welcome.content.emphasizedEverythingText",{defaultMessage:"everything"}),notValidAdvancedSettingsPath:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.configuration.notValid.advancedSettingsPathText",{defaultMessage:"Management / Kibana / Advanced Settings"}),validAdvancedSettingsPath:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.configuration.valid.advancedSettingsPathText",{defaultMessage:"Management/Kibana/Advanced Settings"}),esAsteriskQueryDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.querying.esAsteriskQueryDescriptionText",{defaultMessage:"hey Elasticsearch, find everything in my default index"}),esIndexQueryDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.querying.esIndexQueryDescriptionText",{defaultMessage:"use * as the q (query) for the logstash-* index"}),strongAddText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.expressions.strongAddText",{defaultMessage:"Add"}),twoExpressionsDescriptionTitle:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.expressions.examples.twoExpressionsDescriptionTitle",{defaultMessage:"Double the fun."}),customStylingDescriptionTitle:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.expressions.examples.customStylingDescriptionTitle",{defaultMessage:"Custom styling."}),namedArgumentsDescriptionTitle:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.expressions.examples.namedArgumentsDescriptionTitle",{defaultMessage:"Named arguments."}),groupedExpressionsDescriptionTitle:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.expressions.examples.groupedExpressionsDescriptionTitle",{defaultMessage:"Grouped expressions."})};getFunctions();checkElasticsearch()}function getFunctions(){return $http.get("../api/timelion/functions").then((function(resp){$scope.functions.list=resp.data}))}$scope.recheckElasticsearch=function(){$scope.es.valid=null;checkElasticsearch().then((function(valid){if(!valid)$scope.es.invalidCount++}))};function checkElasticsearch(){return $http.get("../api/timelion/validate/es").then((function(resp){if(resp.data.ok){$scope.es.valid=true;$scope.es.stats={min:external_kbnSharedDeps_Moment_default()(resp.data.min).format("LLL"),max:external_kbnSharedDeps_Moment_default()(resp.data.max).format("LLL"),field:resp.data.field}}else{$scope.es.valid=false;$scope.es.invalidReason=function(){try{var esResp=JSON.parse(resp.data.resp.response);return external_kbnSharedDeps_Lodash_default.a.get(esResp,"error.root_cause[0].reason")}catch(e){if(external_kbnSharedDeps_Lodash_default.a.get(resp,"data.resp.message"))return external_kbnSharedDeps_Lodash_default.a.get(resp,"data.resp.message");if(external_kbnSharedDeps_Lodash_default.a.get(resp,"data.resp.output.payload.message"))return external_kbnSharedDeps_Lodash_default.a.get(resp,"data.resp.output.payload.message");return external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.help.unknownErrorMessage",{defaultMessage:"Unknown error"})}}()}return $scope.es.valid}))}init()}}}))}var save_sheet='<div class="list-group">\n  <button class="list-group-item" ng-click="section = \'sheet\'" type="button" data-test-subj="timelionSaveAsSheetButton">\n    <h4\n      class="list-group-item-heading"\n      i18n-id="timelion.topNavMenu.save.saveEntireSheetTitle"\n      i18n-default-message="Save entire Timelion sheet"\n    ></h4>\n    <p\n      class="list-group-item-text"\n      i18n-id="timelion.topNavMenu.save.saveEntireSheetDescription"\n      i18n-default-message="You want this option if you mostly use Timelion expressions from within\n                            the Timelion app and don\'t need to add Timelion charts to Kibana\n                            dashboards. You may also want this if you make use of references to\n                            other panels."\n    ></p>\n  </button>\n\n  <div class="list-group-item" ng-show="section == \'sheet\'">\n    <form role="form" class="container-fluid" ng-submit="opts.saveSheet()">\n      <label\n        for="savedSheet"\n        class="kuiLabel kuiVerticalRhythmSmall"\n        i18n-id="timelion.topNavMenu.save.saveEntireSheetLabel"\n        i18n-default-message="Save sheet as"\n      ></label>\n\n      <input\n        id="savedSheet"\n        ng-model="opts.savedSheet.title"\n        input-focus="select"\n        class="form-control kuiVerticalRhythmSmall"\n        placeholder="{{ ::\'timelion.topNavMenu.save.saveEntireSheet.inputPlaceholder\' | i18n: { defaultMessage: \'Name this sheet...\' } }}"\n        aria-label="{{ ::\'timelion.topNavMenu.save.saveEntireSheet.inputAriaLabel\' | i18n: { defaultMessage: \'Name\' } }}"\n      >\n\n      <saved-object-save-as-check-box\n        class="kuiVerticalRhythmSmall"\n        saved-object="opts.savedSheet"\n      ></saved-object-save-as-check-box>\n\n      <button\n        ng-disabled="!opts.savedSheet.title"\n        type="submit"\n        class="kuiButton kuiButton--primary kuiVerticalRhythmSmall"\n        i18n-id="timelion.topNavMenu.save.saveEntireSheet.submitButtonLabel"\n        i18n-default-message="Save"\n        data-test-subj="timelionFinishSaveButton"\n      ></button>\n    </form>\n  </div>\n\n  <button class="list-group-item" ng-click="section = \'expression\'" type="button">\n    <h4\n      class="list-group-item-heading"\n      i18n-id="timelion.topNavMenu.save.saveAsDashboardPanelTitle"\n      i18n-default-message="Save current expression as Kibana dashboard panel"\n    ></h4>\n    <p\n      class="list-group-item-text"\n      i18n-id="timelion.topNavMenu.save.saveAsDashboardPanelDescription"\n      i18n-default-message="Need to add a chart to a Kibana dashboard? We can do that! This option\n                            will save your currently selected expression as a panel that can be\n                            added to Kibana dashboards as you would add anything else. Note, if you\n                            use references to other panels you will need to remove the refences by\n                            copying the referenced expression directly into the expression you are\n                            saving. Click a chart to select a different expression to save."\n    ></p>\n  </button>\n\n  <div class="list-group-item" ng-show="section == \'expression\'">\n    <form role="form" class="container-fluid" ng-submit="opts.saveExpression(panelTitle)">\n      <div class="form-group">\n        <label\n          class="control-label"\n          i18n-id="timelion.topNavMenu.save.saveAsDashboardPanel.selectedExpressionLabel"\n          i18n-default-message="Currently selected expression"\n        ></label>\n        <code>{{opts.state.sheet[opts.state.selected]}}</code>\n      </div>\n      <div class="form-group">\n        <label\n          for="savedExpression"\n          class="control-label"\n          i18n-id="timelion.topNavMenu.save.saveAsDashboardPanelLabel"\n          i18n-default-message="Save expression as"\n        ></label>\n        <input\n          id="savedExpression"\n          ng-model="panelTitle"\n          input-focus="select"\n          class="form-control"\n          placeholder="{{ ::\'timelion.topNavMenu.save.saveAsDashboardPanel.inputPlaceholder\' | i18n: { defaultMessage: \'Name this panel\' } }}"\n        >\n      </div>\n      <div class="form-group">\n        <button\n          ng-disabled="!panelTitle"\n          type="submit"\n          class="kuiButton kuiButton--primary"\n          i18n-id="timelion.topNavMenu.save.saveAsDashboardPanel.submitButtonLabel"\n          i18n-default-message="Save"\n        ></button>\n      </div>\n    </form>\n  </div>\n</div>\n';function initTimelionSaveSheetDirective(app){app.directive("timelionSave",(function(){return{replace:true,restrict:"E",template:save_sheet}}))}var sheet_options='<form role="form">\n  <h2\n    class="kuiLocalDropdownTitle"\n    i18n-id="timelion.topNavMenu.sheetOptionsTitle"\n    i18n-default-message="Sheet options"\n  ></h2>\n\n  <div class="clearfix">\n    <div class="form-group col-md-6">\n      <label\n        for="timelionColCount"\n        i18n-id="timelion.topNavMenu.options.columnsCountLabel"\n        i18n-default-message="Columns (Column count must divide evenly into 12)"\n      ></label>\n      <select class="form-control"\n        id="timelionColCount"\n        ng-change="opts.search()"\n        ng-options="column for column in [1, 2, 3, 4, 6, 12]"\n        ng-model="opts.state.columns">\n      </select>\n    </div>\n    <div class="form-group col-md-6">\n      <label\n        for="timelionRowCount"\n        i18n-id="timelion.topNavMenu.options.rowsCountLabel"\n        i18n-default-message="Rows (This is a target based on the current window height)"\n      ></label>\n      <select class="form-control"\n        id="timelionRowCount"\n        ng-change="opts.search()"\n        ng-options="row for row in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]"\n        ng-model="opts.state.rows">\n      </select>\n    </div>\n  </div>\n</form>\n';function initTimelionOptionsSheetDirective(app){app.directive("timelionOptions",(function(){return{replace:true,restrict:"E",template:sheet_options}}))}var saved_object_save_as_checkbox='<div ng-hide="!savedObject.id || savedObject.isSaving">\n  <div\n    ng-hide="!savedObject.isTitleChanged() || savedObject.copyOnSave"\n    class="kuiLocalDropdownWarning kuiVerticalRhythmSmall"\n    i18n-id="timelion.savedObjects.howToSaveAsNewDescription"\n    i18n-default-message="In previous versions of Kibana, changing the name of a {savedObjectName} would make a copy with the new name. Use the \'Save as a new {savedObjectName}\' checkbox to do this now."\n    i18n-values="{ savedObjectName: savedObject.getDisplayName() }"\n    i18n-description="\'Save as a new {savedObjectName}\' refers to timelion.savedObjects.saveAsNewLabel and should be the same text."\n  ></div>\n\n  <label class="kuiCheckBoxLabel kuiVerticalRhythmSmall">\n    <input\n      class="kuiCheckBox"\n      type="checkbox"\n      data-test-subj="saveAsNewCheckbox"\n      ng-model="savedObject.copyOnSave"\n      ng-checked="savedObject.copyOnSave"\n    >\n\n    <span\n      class="kuiCheckBoxLabel__text"\n      i18n-id="timelion.savedObjects.saveAsNewLabel"\n      i18n-default-message="Save as a new {savedObjectName}"\n      i18n-values="{ savedObjectName: savedObject.getDisplayName() }"\n    ></span>\n  </label>\n</div>\n\n';function initSavedObjectSaveAsCheckBoxDirective(app){app.directive("savedObjectSaveAsCheckBox",(function(){return{restrict:"E",template:saved_object_save_as_checkbox,replace:true,scope:{savedObject:"="}}}))}var rison=__webpack_require__(45);var rison_default=__webpack_require__.n(rison);var saved_object_finder='<form\n  role="form"\n  class="kuiVerticalRhythm"\n>\n  <div class="kuiBar">\n    <div class="kuiBarSection">\n      <div class="kuiSearchInput fullWidth">\n        <div class="kuiSearchInput__icon kuiIcon fa-search"></div>\n        <input\n          class="kuiSearchInput__input"\n          input-focus\n          disable-input-focus="disableAutoFocus"\n          ng-model="filter"\n          ng-attr-placeholder="{{ finder.getLabel() }} Filter..."\n          ng-keydown="finder.filterKeyDown($event)"\n          name="filter"\n          type="text"\n          autocomplete="off"\n          data-test-subj="savedObjectFinderSearchInput"\n        >\n      </div>\n    </div>\n\n    <div class="kuiBarSection">\n      <p class="kuiText kuiSubduedText"\n        i18n-id="timelion.savedObjectFinder.pageItemsFromHitCountDescription"\n        i18n-default-message="{pageFirstItem}-{pageLastItem} of {hitCount}"\n        i18n-values="{pageFirstItem, pageLastItem, hitCount: finder.hitCount}"\n      ></p>\n      <div class="kuiButtonGroup">\n        <button\n          class="kuiButton kuiButton--primary"\n          ng-if="onAddNew"\n          ng-click="onAddNew()"\n          data-test-subj="addNewSavedObjectLink"\n          i18n-id="timelion.savedObjectFinder.addNewItemButtonLabel"\n          i18n-default-message="Add new {item}"\n          i18n-values="{item: finder.properties.noun}"\n          i18n-description="{item} can be a type of object in Kibana, like \'visualization\', \'dashboard\', etc"\n        ></button>\n\n        <button\n          class="kuiButton kuiButton--secondary"\n          ng-if="!useLocalManagement"\n          ng-click="finder.manageObjects(finder.properties.name)"\n          i18n-id="timelion.savedObjectFinder.manageItemsButtonLabel"\n          i18n-default-message="Manage {items}"\n          i18n-values="{items: finder.properties.nouns}"\n          i18n-description="{items} can be a type of object in Kibana, like \'visualizations\', \'dashboards\', etc"\n        ></button>\n      </div>\n    </div>\n  </div>\n</form>\n\n<paginate\n  list="finder.hits"\n  per-page="20"\n  class="kuiVerticalRhythm"\n>\n  <button\n    class="paginate-heading list-group-item list-sort-button"\n    ng-click="finder.sortHits(finder.hits)"\n    aria-live="assertive"\n  >\n    <span class="euiScreenReaderOnly"\n      i18n-id="timelion.savedObjectFinder.sortByButtonLabelScreenReaderOnly"\n      i18n-default-message="Sort by"\n    ></span>\n    <span\n      i18n-id="timelion.savedObjectFinder.sortByButtonLabel"\n      i18n-default-message="Name"\n    ></span>\n    <span\n      class="fa"\n      ng-class="finder.isAscending ? \'fa-caret-up\' : \'fa-caret-down\'"\n    >\n      <span class="euiScreenReaderOnly"\n        ng-if="finder.isAscending"\n        i18n-id="timelion.savedObjectFinder.sortByButtonLabeAscendingScreenReaderOnly"\n        i18n-default-message="ascending"\n      ></span>\n      <span class="euiScreenReaderOnly"\n        ng-if="!finder.isAscending"\n        i18n-id="timelion.savedObjectFinder.sortByButtonLabeDescendingScreenReaderOnly"\n        i18n-default-message="descending"\n      ></span>\n    </span>\n  </button>\n  <ul class="li-striped list-group list-group-menu" ng-class="{\'select-mode\': finder.selector.enabled}">\n    <li\n      class="list-group-item list-group-menu-item"\n      ng-class="{\'active\': finder.selector.index === $index && finder.selector.enabled}"\n      ng-repeat="hit in page"\n      ng-keydown="finder.hitKeyDown($event, page, paginate)"\n      ng-click="finder.onChoose(hit, $event)">\n\n      <a ng-href="{{finder.makeUrl(hit)}}"\n          ng-blur="finder.hitBlur($event)"\n          ng-click="finder.preventClick($event)">\n          <span aria-hidden="true" class="finder-type fa" ng-if="hit.icon" ng-class="hit.icon"></span>\n          <div class="kuiIcon fa-flask ng-scope" ng-if="hit.type.shouldMarkAsExperimentalInUI()"></div>\n          <span>{{hit.title}}</span>\n          <p ng-if="hit.description" ng-bind="hit.description"></p>\n      </a>\n    </li>\n    <li\n      class="list-group-item list-group-no-results"\n      ng-if="finder.hits.length === 0"\n    >\n      <p i18n-id="timelion.savedObjectFinder.noMatchesFoundDescription"\n        i18n-default-message="No matching {items} found."\n        i18n-values="{items: finder.properties.nouns}"\n        i18n-description="{items} can be a type of object in Kibana, like \'visualizations\', \'dashboards\', etc"\n      ></p>\n    </li>\n  </ul>\n</paginate>\n';var keyMap={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capsLock",27:"escape",32:"space",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"leftWindowKey",92:"rightWindowKey",93:"selectKey",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"multiply",107:"add",109:"subtract",110:"period",111:"divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numLock",145:"scrollLock",186:"semiColon",187:"equalSign",188:"comma",189:"dash",190:"period",191:"forwardSlash",192:"graveAccent",219:"openBracket",220:"backSlash",221:"closeBracket",222:"singleQuote",224:"meta"};var savedObjects_public_=__webpack_require__(14);var visualizations_public_=__webpack_require__(21);function initSavedObjectFinderDirective(app,savedSheetLoader,uiSettings){app.directive("paginate",kibanaLegacy_public_["PaginateDirectiveProvider"]).directive("paginateControls",kibanaLegacy_public_["PaginateControlsDirectiveProvider"]).directive("savedObjectFinder",(function(){return{restrict:"E",scope:{type:"@",userMakeUrl:"=?makeUrl",userOnChoose:"=?onChoose",useLocalManagement:"=?useLocalManagement",onAddNew:"=",disableAutoFocus:"="},template:saved_object_finder,controllerAs:"finder",controller:function controller($scope,$element,$location,history){var self=this;var $input=$element.find("input[ng-model=filter]");$scope.perPage=uiSettings.get(savedObjects_public_["PER_PAGE_SETTING"]);var $list=$element.find("ul");var currentFilter=$scope.filter;var prevSearch;self.hits=[];self.service=savedSheetLoader;self.properties=self.service.loaderProperties;filterResults();self.isAscending=true;self.sortHits=function(hits){self.isAscending=!self.isAscending;self.hits=self.isAscending?external_kbnSharedDeps_Lodash_default.a.sortBy(hits,["title"]):external_kbnSharedDeps_Lodash_default.a.sortBy(hits,["title"]).reverse()};self.makeUrl=function(hit){if($scope.userMakeUrl){return $scope.userMakeUrl(hit)}if(!$scope.userOnChoose){return hit.url}return"#"};self.preventClick=function($event){$event.preventDefault()};self.onChoose=function(hit,$event){if($scope.userOnChoose){$scope.userOnChoose(hit,$event)}var url=self.makeUrl(hit);if(!url||url==="#"||url.charAt(0)!=="#")return;$event.preventDefault();history.push(url.substr(1))};$scope.$watch("filter",(function(newFilter){currentFilter=newFilter||"";filterResults()}));$scope.pageFirstItem=0;$scope.pageLastItem=0;$scope.onPageChanged=function(page){$scope.pageFirstItem=page.firstItem;$scope.pageLastItem=page.lastItem};self.selector={enabled:false,index:-1};self.getLabel=function(){return external_kbnSharedDeps_Lodash_default.a.words(self.properties.nouns).map(external_kbnSharedDeps_Lodash_default.a.capitalize).join(" ")};self.filterKeyDown=function($event){switch(keyMap[$event.keyCode]){case"enter":if(self.hitCount!==1)return;var hit=self.hits[0];if(!hit)return;self.onChoose(hit,$event);$event.preventDefault();break}};self.hitKeyDown=function($event,page,paginate){switch(keyMap[$event.keyCode]){case"tab":if(!self.selector.enabled)break;self.selector.index=-1;self.selector.enabled=false;if($event.shiftKey){$input.focus()}else{$list.find("li.active a").focus()}$event.preventDefault();break;case"down":if(!self.selector.enabled)break;if(self.selector.index+1<page.length){self.selector.index+=1}$event.preventDefault();break;case"up":if(!self.selector.enabled)break;if(self.selector.index>0){self.selector.index-=1}$event.preventDefault();break;case"right":if(!self.selector.enabled)break;if(page.number<page.count){paginate.goToPage(page.number+1);self.selector.index=0;selectTopHit()}$event.preventDefault();break;case"left":if(!self.selector.enabled)break;if(page.number>1){paginate.goToPage(page.number-1);self.selector.index=0;selectTopHit()}$event.preventDefault();break;case"escape":if(!self.selector.enabled)break;$input.focus();$event.preventDefault();break;case"enter":if(!self.selector.enabled)break;var hitIndex=(page.number-1)*paginate.perPage+self.selector.index;var hit=self.hits[hitIndex];if(!hit)break;self.onChoose(hit,$event);$event.preventDefault();break;case"shift":break;default:$input.focus();break}};self.hitBlur=function(){self.selector.index=-1;self.selector.enabled=false};self.manageObjects=function(type){$location.url("/management/kibana/objects?_a="+rison_default.a.encode({tab:type}))};self.hitCountNoun=function(){return(self.hitCount===1?self.properties.noun:self.properties.nouns).toLowerCase()};function selectTopHit(){setTimeout((function(){$list.find("a:first").focus()}),0)}function filterResults(){if(!self.service)return;if(!self.properties)return;var filter=currentFilter;if(prevSearch===filter)return;prevSearch=filter;var isLabsEnabled=uiSettings.get(visualizations_public_["VISUALIZE_ENABLE_LABS_SETTING"]);self.service.find(filter).then((function(hits){hits.hits=hits.hits.filter((function(hit){return isLabsEnabled||external_kbnSharedDeps_Lodash_default.a.get(hit,"type.stage")!=="experimental"}));hits.total=hits.hits.length;if(currentFilter===filter){self.hitCount=hits.total;self.hits=external_kbnSharedDeps_Lodash_default.a.sortBy(hits.hits,["title"])}}))}}}}))}var external_kbnSharedDeps_React_=__webpack_require__(13);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(16);function handleClick(activateTab,tabName){activateTab(tabName)}function TimelionHelpTabs(props){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabs"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{isSelected:props.activeTab==="funcref",onClick:function onClick(){return handleClick(props.activateTab,"funcref")}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"timelion.help.mainPage.functionReferenceTitle",defaultMessage:"Function reference"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{isSelected:props.activeTab==="keyboardtips",onClick:function onClick(){return handleClick(props.activateTab,"keyboardtips")}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"timelion.help.mainPage.keyboardTipsTitle",defaultMessage:"Keyboard tips"})))}function initTimelionTabsDirective(app,deps){app.directive("timelionHelpTabs",(function(reactDirective){return reactDirective((function(props){return external_kbnSharedDeps_React_default.a.createElement(deps.core.i18n.Context,null,external_kbnSharedDeps_React_default.a.createElement(TimelionHelpTabs,props))}),[["activeTab"],["activateTab",{watchDepth:"reference"}]],{restrict:"E",scope:{activeTab:"=",activateTab:"="}})}))}var timelion_deprecation_TimelionDeprecation=function TimelionDeprecation(_ref){var links=_ref.links;var timelionDeprecationLink=links.visualize.timelionDeprecation;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"timelion.deprecation.message",defaultMessage:"Deprecated since 7.0, the Timelion app will be removed in 8.0. To continue using your Timelion worksheets, {timeLionDeprecationLink}.",values:{timeLionDeprecationLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:timelionDeprecationLink,target:"_blank",external:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"timelion.deprecation.here",defaultMessage:"migrate them to a dashboard."}))}}),color:"warning",iconType:"alert",size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))};function initTimelionTDeprecationDirective(app,deps){app.directive("timelionDeprecation",(function(reactDirective){return reactDirective((function(){return external_kbnSharedDeps_React_default.a.createElement(deps.core.i18n.Context,null,external_kbnSharedDeps_React_default.a.createElement(timelion_deprecation_TimelionDeprecation,{links:deps.core.docLinks.links}))}),[],{restrict:"E",scope:{docLinks:"="}})}))}function initInputFocusDirective(app){app.directive("inputFocus",(function($parse,$timeout){return{restrict:"A",link:function link($scope,$elem,attrs){var isDisabled=attrs.disableInputFocus&&$parse(attrs.disableInputFocus)($scope);if(!isDisabled){$timeout((function(){$elem.focus();if(attrs.inputFocus==="select")$elem.select()}))}}}}))}function Chart(timelionPanels){return{restrict:"A",scope:{seriesList:"=chart",search:"=",interval:"=",rerenderTrigger:"="},link:function link($scope,$elem){var panelScope=$scope.$new(true);function render(){panelScope.$destroy();if(!$scope.seriesList)return;$scope.seriesList.render=$scope.seriesList.render||{type:"timechart"};var panelSchema=timelionPanels.get($scope.seriesList.render.type);if(!panelSchema){$elem.text(external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.chart.seriesList.noSchemaWarning",{defaultMessage:"No such panel type: {renderType}",values:{renderType:$scope.seriesList.render.type}}));return}panelScope=$scope.$new(true);panelScope.seriesList=$scope.seriesList;panelScope.interval=$scope.interval;panelScope.search=$scope.search;panelSchema.render(panelScope,$elem)}$scope.$watchGroup(["seriesList","rerenderTrigger"],render)}}}var timelion_interval='<input\n  input-focus\n  aria-label="{{ ::\'timelion.intervals.customIntervalAriaLabel\' | i18n: { defaultMessage: \'Custom interval\' } }}"\n  class="kuiTextInput timInterval__input"\n  ng-show="interval === \'other\'"\n  ng-class="{ \'timInterval__input--compact\': interval === \'other\' }"\n  ng-model="otherInterval"\n><select\n  id="timelionInterval"\n  aria-label="{{ ::\'timelion.intervals.selectIntervalAriaLabel\' | i18n: { defaultMessage: \'Select interval\' } }}"\n  class="form-control timInterval__presets"\n  ng-class="{ \'timInterval__presets--compact\': interval === \'other\'}"\n  ng-model="interval"\n>\n  <option\n    ng-repeat="intervalOption in intervalOptions"\n    aria-label="{{::intervalLabels[intervalOption]}}"\n    value="{{::intervalOption}}"\n  >\n      {{::intervalOption}}\n  </option>\n</select>\n';function TimelionInterval($timeout){return{restrict:"E",scope:{model:"=",changeInterval:"="},template:timelion_interval,link:function link($scope,$elem){$scope.intervalOptions=["auto","1s","1m","1h","1d","1w","1M","1y","other"];$scope.intervalLabels={auto:"auto","1s":"1 second","1m":"1 minute","1h":"1 hour","1d":"1 day","1w":"1 week","1M":"1 month","1y":"1 year",other:"other"};$scope.$watch("model",(function(newVal,oldVal){if(newVal!==oldVal||oldVal==null)return;if(external_kbnSharedDeps_Lodash_default.a.includes($scope.intervalOptions,newVal)){$scope.interval=newVal}else{$scope.interval="other"}if(newVal!=="other"){$scope.otherInterval=newVal}}));$scope.$watch("interval",(function(newVal,oldVal){if(newVal===oldVal||$scope.model===newVal)return;if(newVal==="other"){$scope.otherInterval=oldVal;$scope.changeInterval($scope.otherInterval);$timeout((function(){external_kbnSharedDeps_Jquery_default()("input",$elem).select()}),0)}else{$scope.otherInterval=$scope.interval;$scope.changeInterval($scope.interval)}}));$scope.$watch("otherInterval",(function(newVal,oldVal){if(newVal===oldVal||$scope.model===newVal)return;$scope.changeInterval(newVal)}))}}}var peg=__webpack_require__(46);var peg_default=__webpack_require__.n(peg);var chain="/*\n * Timelion syntax parser\n */\n\n{\n function ltoo (literal) {\n  return {type: 'literal', value: literal}\n }\n\n function simpleLocation (location) {\n  // Returns an object representing the position of the function within the expression,\n  // demarcated by the position of its first character and last character. We calculate these values\n  // using the offset because the expression could span multiple lines, and we don't want to deal\n  // with column and line values.\n  return {\n   min: location.start.offset,\n   max: location.end.offset\n  }\n }\n\n var currentFunction;\n var currentArgs = [];\n\n var functions = [];\n var args = [];\n var variables = {};\n\n}\n\nstart\n = space? tree:series {\n  return {\n    tree: tree.filter(function (o) {return o != null}),\n    functions: functions,\n    args: args,\n    variables: variables\n  }\n }\n\narg_list\n = first:argument rest:(space? ',' space? arg:argument {return arg})* space? ','? {\n  return [first].concat(rest);\n }\n\nargument\n = name:argument_name space? '=' space? value:arg_type {\n  var arg = {\n   type: 'namedArg',\n   name: name,\n   value: value,\n   location: simpleLocation(location()),\n   text: text()\n  };\n  currentArgs.push(arg);\n  return arg;\n }\n / space? '=' space? value:arg_type? {\n  var exception = {\n   type: 'incompleteArgument',\n   currentArgs: currentArgs,\n   currentFunction: currentFunction,\n   location: simpleLocation(location()),\n   text: text()\n  }\n  error(JSON.stringify(exception));\n }\n / name:argument_name space? '=' {\n  var exception = {\n   type: 'incompleteArgumentValue',\n   currentArgs: currentArgs,\n   currentFunction: currentFunction,\n   name: name,\n   location: simpleLocation(location()),\n   text: text()\n  }\n  error(JSON.stringify(exception));\n }\n / element:arg_type {return element}\n\narg_type\n = variable_get\n / series_type\n / literal:literal {\n  var result = ltoo(literal);\n  result.location = simpleLocation(location()),\n  result.text = text();\n  return result;\n }\n\nvariable_get\n = '$' name:argument_name {\n  if (variables[name]) {\n   return variables[name];\n  } else {\n   error('$' + name + ' is not defined')\n  }\n }\n\nvariable_set\n = '$' name:argument_name space? '=' space? value:arg_type {\n  variables[name] = value;\n }\n\nseries_type\n = variable_set\n / variable_get\n / group\n / chain\n / reference\n\nseries\n = first:series_type rest:(space? ',' space? series:series_type {return series})* ','? {\n  return [first].concat(rest)\n }\n\nfunction_name\n = first:[a-zA-Z]+ rest:[.a-zA-Z0-9_-]* {\n  currentFunction = first.join('') + rest.join('');\n  currentArgs = [];\n  return currentFunction;\n}\n\nargument_name\n = first:[a-zA-Z]+ rest:[.a-zA-Z0-9_-]* { return first.join('') + rest.join('') }\n\nfunction \"function\"\n = space? '.' name:function_name space? '(' space? arg_list:arg_list? space? ')' space? {\n  var result = {\n    type: 'function',\n    function: name,\n    arguments: arg_list || [],\n    location: simpleLocation(location()),\n    text: text()\n  }\n\n  result.arguments.forEach(function (arg) {\n   arg.function = name;\n   args.push(arg);\n  })\n\n  functions.push(result)\n  return result;\n }\n / '.' func:function_name? {\n  var exception = {\n   type: 'incompleteFunction',\n   function: func,\n   location: simpleLocation(location()),\n   text: text()\n  }\n  error(JSON.stringify(exception));\n }\n\nreference\n = '@' plot:integer ':' series:integer {\n  return {\n   type: 'reference',\n   plot: plot,\n   series: series\n  }\n }\n / '@' plot:integer {\n  return {\n   type: 'reference',\n   plot: plot\n  }\n }\n\n\nchain\n = func:function space? rest:function* {return {type: 'chain', chain: [func].concat(rest)}}\n\ngroup\n = '(' space? grouped:series space? ')' functions:function* {\n  var first = {\n    type: 'chainList',\n    list: grouped\n  }\n  first.label = text();\n\n  return {type: \"chain\", chain: [first].concat(functions)};\n }\n\n /* ----- Core types ----- */\n\nliteral \"literal\"\n  =  '\"' chars:dq_char* '\"' { return chars.join(''); } // double quoted string\n  / \"'\" chars:sq_char* \"'\" { return chars.join(''); } // single quoted string\n  / 'true'  { return true; } // unquoted literals from here down\n  / 'false' { return false; }\n  / 'null'  { return null; }\n  / string:[^()\"',=\\ \\t]+ { // this also matches numbers via Number()\n   var result = string.join('');\n   // Sort of hacky, but PEG doesn't have backtracking so\n   // a number rule is hard to read, and performs worse\n   if (isNaN(Number(result))) return result;\n   return Number(result)\n  }\n\nspace\n = [\\ \\t\\r\\n]+\n\ndq_char\n  = \"\\\\\" sequence:('\"' / \"\\\\\") { return sequence; }\n  / [^\"] // everything except \"\n\nsq_char\n  = \"\\\\\" sequence:(\"'\" / \"\\\\\") { return sequence; }\n  / [^'] // everything except '\n\ninteger\n = digits:[0-9]+ {return parseInt(digits.join(''))}\n";var timelion_expression_input='<div\n  class="timExpressionInput__container"\n  role="combobox"\n  aria-expanded="{{suggestions.isVisible}}"\n  aria-owns="timelionSuggestionList"\n  aria-haspopup="true"\n>\n  \x3c!-- The `role=textbox` is required by VoiceOver to properly detect the autocompletion.\n       For some reasons it doesn\'t work without it (even though the default role of\n       the element is textbox anyway). --\x3e\n  <textarea\n    data-expression-input\n    role="textbox"\n    rows="{{ rows }}"\n    class="timExpressionInput kuiTextArea fullWidth"\n    placeholder="{{ ::\'timelion.expressionInputPlaceholder\' | i18n: { defaultMessage: \'Try a query with {esQuery}\', values: { esQuery: \'.es(*)\' } } }}"\n    ng-model="sheet"\n    ng-focus="onFocusInput()"\n    ng-keydown="onKeyDownInput($event)"\n    ng-keyup="onKeyUpInput($event)"\n    ng-blur="onBlurInput()"\n    ng-mousedown="onMouseDownInput()"\n    ng-mouseup="onMouseUpInput()"\n    ng-click="onClickExpression()"\n    aria-label="{{ ::\'timelion.expressionInputAriaLabel\' | i18n: { defaultMessage: \'Timelion expression\' } }}"\n    aria-multiline="false"\n    aria-autocomplete="list"\n    aria-controls="timelionSuggestionList"\n    aria-activedescendant="{{ getActiveSuggestionId() }}"\n    data-test-subj="timelionExpressionTextArea"\n  ></textarea>\n\n  <timelion-expression-suggestions\n    ng-show="suggestions.isVisible"\n    suggestions="suggestions.list"\n    suggestions-type="suggestions.type"\n    selected-index="suggestions.index"\n    on-click-suggestion="onClickSuggestion(suggestionIndex)"\n    should-popover="shouldPopoverSuggestions"\n  ></timelion-expression-suggestions>\n</div>\n';function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function timelion_expression_input_helpers_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SUGGESTION_TYPE={ARGUMENTS:"arguments",ARGUMENT_VALUE:"argument_value",FUNCTIONS:"functions"};var Suggestions=function(){function Suggestions(){timelion_expression_input_helpers_classCallCheck(this,Suggestions);this.reset()}_createClass(Suggestions,[{key:"reset",value:function reset(){this.index=-1;this.list=[];this.type=null;this.isVisible=false}},{key:"setList",value:function setList(list,type){this.list=list.sort((function(a,b){if(a.name<b.name){return-1}if(a.name>b.name){return 1}return 0}));this.type=type;if(this.index>-1){this.index=Math.max(0,Math.min(this.index,this.list.length-1))}}},{key:"getCount",value:function getCount(){return this.list.length}},{key:"isEmpty",value:function isEmpty(){return this.list.length===0}},{key:"show",value:function show(){this.isVisible=true}},{key:"hide",value:function hide(){this.isVisible=false}},{key:"stepForward",value:function stepForward(){if(this.index>0){this.index-=1}}},{key:"stepBackward",value:function stepBackward(){if(this.index<this.list.length-1){this.index+=1}}}]);return Suggestions}();function inLocation(cursorPosition,location){return cursorPosition>=location.min&&cursorPosition<=location.max}function getArgumentsHelp(functionHelp){var functionArgs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(!functionHelp){return[]}var argsHelp=functionHelp.chainable?functionHelp.args.slice(1):functionHelp.args.slice(0);var functionArgNames=functionArgs.map((function(arg){return arg.name}));return argsHelp.filter((function(arg){return!functionArgNames.includes(arg.name)}))}function extractSuggestionsFromParsedResult(_x,_x2,_x3,_x4){return _extractSuggestionsFromParsedResult.apply(this,arguments)}function _extractSuggestionsFromParsedResult(){_extractSuggestionsFromParsedResult=_asyncToGenerator(regeneratorRuntime.mark((function _callee(result,cursorPosition,functionList,argValueSuggestions){var activeFunc,functionHelp,openParen,activeArg,functionName,functionArgs,argName,partialInput,valueSuggestions,_functionHelp$args$fi,staticSuggestions,argsHelp,argumentSuggestions,location;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:activeFunc=result.functions.find((function(func){return cursorPosition>=func.location.min&&cursorPosition<func.location.max}));if(activeFunc){_context.next=3;break}return _context.abrupt("return");case 3:functionHelp=functionList.find((function(func){return func.name===activeFunc.function}));openParen=activeFunc.location.min+activeFunc.function.length+2;if(!(cursorPosition<openParen)){_context.next=7;break}return _context.abrupt("return",{list:[functionHelp],location:activeFunc.location,type:SUGGESTION_TYPE.FUNCTIONS});case 7:activeArg=activeFunc.arguments.find((function(argument){return inLocation(cursorPosition,argument.location)}));if(!(activeArg&&activeArg.type==="namedArg"&&inLocation(cursorPosition,activeArg.value.location))){_context.next=20;break}functionName=activeFunc.function,functionArgs=activeFunc.arguments;argName=activeArg.name,partialInput=activeArg.value.text;if(!argValueSuggestions.hasDynamicSuggestionsForArgument(functionName,argName)){_context.next=17;break}_context.next=14;return argValueSuggestions.getDynamicSuggestionsForArgument(functionName,argName,functionArgs,partialInput);case 14:valueSuggestions=_context.sent;_context.next=19;break;case 17:_functionHelp$args$fi=functionHelp.args.find((function(arg){return arg.name===activeArg.name})),staticSuggestions=_functionHelp$args$fi.suggestions;valueSuggestions=argValueSuggestions.getStaticSuggestionsForInput(partialInput,staticSuggestions);case 19:return _context.abrupt("return",{list:valueSuggestions,location:activeArg.value.location,type:SUGGESTION_TYPE.ARGUMENT_VALUE});case 20:argsHelp=getArgumentsHelp(functionHelp,activeFunc.arguments);argumentSuggestions=argsHelp.filter((function(arg){if(external_kbnSharedDeps_Lodash_default.a.get(activeArg,"type")==="namedArg"){return external_kbnSharedDeps_Lodash_default.a.startsWith(arg.name,activeArg.name)}else if(activeArg){return external_kbnSharedDeps_Lodash_default.a.startsWith(arg.name,activeArg.text)}return true}));location=activeArg?activeArg.location:{min:cursorPosition,max:cursorPosition};return _context.abrupt("return",{list:argumentSuggestions,location:location,type:SUGGESTION_TYPE.ARGUMENTS});case 24:case"end":return _context.stop()}}}),_callee)})));return _extractSuggestionsFromParsedResult.apply(this,arguments)}function suggest(_x5,_x6,_x7,_x8,_x9){return _suggest.apply(this,arguments)}function _suggest(){_suggest=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(expression,functionList,Parser,cursorPosition,argValueSuggestions){var result,message,list,_message,functionName,functionArgs,functionHelp,_message2,argName,_functionName,_functionArgs,valueSuggestions,_functionHelp,argHelp;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Parser.parse(expression);case 3:result=_context2.sent;_context2.next=6;return extractSuggestionsFromParsedResult(result,cursorPosition,functionList,argValueSuggestions);case 6:return _context2.abrupt("return",_context2.sent);case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);_context2.prev=11;message=JSON.parse(_context2.t0.message);_context2.next=18;break;case 15:_context2.prev=15;_context2.t1=_context2["catch"](11);return _context2.abrupt("return");case 18:_context2.t2=message.type;_context2.next=_context2.t2==="incompleteFunction"?21:_context2.t2==="incompleteArgument"?23:_context2.t2==="incompleteArgumentValue"?26:37;break;case 21:if(message.function){list=functionList.filter((function(func){return external_kbnSharedDeps_Lodash_default.a.startsWith(func.name,message.function)}))}else{list=functionList}return _context2.abrupt("return",{list:list,location:message.location,type:SUGGESTION_TYPE.FUNCTIONS});case 23:_message=message,functionName=_message.currentFunction,functionArgs=_message.currentArgs;functionHelp=functionList.find((function(func){return func.name===functionName}));return _context2.abrupt("return",{list:getArgumentsHelp(functionHelp,functionArgs),location:message.location,type:SUGGESTION_TYPE.ARGUMENTS});case 26:_message2=message,argName=_message2.name,_functionName=_message2.currentFunction,_functionArgs=_message2.currentArgs;valueSuggestions=[];if(!argValueSuggestions.hasDynamicSuggestionsForArgument(_functionName,argName)){_context2.next=34;break}_context2.next=31;return argValueSuggestions.getDynamicSuggestionsForArgument(_functionName,argName,_functionArgs);case 31:valueSuggestions=_context2.sent;_context2.next=36;break;case 34:_functionHelp=functionList.find((function(func){return func.name===_functionName}));if(_functionHelp){argHelp=_functionHelp.args.find((function(arg){return arg.name===argName}));if(argHelp&&argHelp.suggestions){valueSuggestions=argHelp.suggestions}}case 36:return _context2.abrupt("return",{list:valueSuggestions,location:{min:cursorPosition,max:cursorPosition},type:SUGGESTION_TYPE.ARGUMENT_VALUE});case 37:case"end":return _context2.stop()}}}),_callee2,null,[[0,9],[11,15]])})));return _suggest.apply(this,arguments)}function insertAtLocation(valueToInsert,destination,replacementRangeStart,replacementRangeEnd){var prefix=destination.slice(0,replacementRangeStart);var suffix=destination.slice(replacementRangeEnd,destination.length);var result="".concat(prefix).concat(valueToInsert).concat(suffix);return result}function timelion_expression_input_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function timelion_expression_input_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){timelion_expression_input_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){timelion_expression_input_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var timelion_expression_input_Parser=peg_default.a.generate(chain);function timelionExpInput(deps){return function($http,$timeout){return{restrict:"E",scope:{rows:"=",sheet:"=",updateChart:"&",shouldPopoverSuggestions:"@"},replace:true,template:timelion_expression_input,link:function link(scope,elem){var argValueSuggestions=deps.plugins.visTypeTimelion.getArgValueSuggestions();var expressionInput=elem.find("[data-expression-input]");var functionReference={};var suggestibleFunctionLocation={};scope.suggestions=new Suggestions;function init(){$http.get("../api/timelion/functions").then((function(resp){Object.assign(functionReference,{byName:external_kbnSharedDeps_Lodash_default.a.keyBy(resp.data,"name"),list:resp.data})}))}function setCaretOffset(caretOffset){$timeout((function(){expressionInput.focus();expressionInput[0].selectionStart=expressionInput[0].selectionEnd=caretOffset;scope.$apply()}),0)}function insertSuggestionIntoExpression(suggestionIndex){if(scope.suggestions.isEmpty()){return}var _suggestibleFunctionL=suggestibleFunctionLocation,min=_suggestibleFunctionL.min,max=_suggestibleFunctionL.max;var insertedValue;var insertPositionMinOffset=0;switch(scope.suggestions.type){case SUGGESTION_TYPE.FUNCTIONS:{insertedValue="".concat(scope.suggestions.list[suggestionIndex].name,"()");insertPositionMinOffset=1;break}case SUGGESTION_TYPE.ARGUMENTS:{insertedValue="".concat(scope.suggestions.list[suggestionIndex].name,"=");break}case SUGGESTION_TYPE.ARGUMENT_VALUE:{insertedValue="".concat(scope.suggestions.list[suggestionIndex].name);break}}var updatedExpression=insertAtLocation(insertedValue,scope.sheet,min+insertPositionMinOffset,max);scope.sheet=updatedExpression;var newCaretOffset=min+insertedValue.length;setCaretOffset(newCaretOffset)}function scrollToSuggestionAt(index){var suggestionsList=external_kbnSharedDeps_Jquery_default()("[data-suggestions-list]");var suggestionListItem=external_kbnSharedDeps_Jquery_default()("[data-suggestion-list-item]")[index];suggestionsList.scrollTop(suggestionListItem.offsetTop-suggestionsList[0].offsetTop)}function getCursorPosition(){if(expressionInput.length){return expressionInput[0].selectionStart}return null}function getSuggestions(){return _getSuggestions.apply(this,arguments)}function _getSuggestions(){_getSuggestions=timelion_expression_input_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var suggestions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return suggest(scope.sheet,functionReference.list,timelion_expression_input_Parser,getCursorPosition(),argValueSuggestions);case 2:suggestions=_context.sent;scope.$apply((function(){if(suggestions){scope.suggestions.setList(suggestions.list,suggestions.type);scope.suggestions.show();suggestibleFunctionLocation=suggestions.location;$timeout((function(){var suggestionsList=external_kbnSharedDeps_Jquery_default()("[data-suggestions-list]");suggestionsList.scrollTop(0)}),0);return}suggestibleFunctionLocation=undefined;scope.suggestions.reset()}));case 4:case"end":return _context.stop()}}}),_callee)})));return _getSuggestions.apply(this,arguments)}function isNavigationalKey(keyCode){var keyCodes=external_kbnSharedDeps_Lodash_default.a.values(external_kbnSharedDeps_ElasticEui_["comboBoxKeyCodes"]);return keyCodes.includes(keyCode)}scope.onFocusInput=function(){$timeout(getSuggestions,0)};scope.onBlurInput=function(){scope.suggestions.hide()};scope.onKeyDownInput=function(e){if(!isNavigationalKey(e.keyCode)){return}switch(e.keyCode){case external_kbnSharedDeps_ElasticEui_["comboBoxKeyCodes"].UP:if(scope.suggestions.isVisible){e.preventDefault();scope.suggestions.stepForward();scrollToSuggestionAt(scope.suggestions.index)}break;case external_kbnSharedDeps_ElasticEui_["comboBoxKeyCodes"].DOWN:if(scope.suggestions.isVisible){e.preventDefault();scope.suggestions.stepBackward();scrollToSuggestionAt(scope.suggestions.index)}break;case external_kbnSharedDeps_ElasticEui_["comboBoxKeyCodes"].TAB:if(scope.suggestions.isEmpty()||scope.suggestions.index<0){scope.suggestions.hide();return}e.preventDefault();insertSuggestionIntoExpression(scope.suggestions.index);break;case external_kbnSharedDeps_ElasticEui_["comboBoxKeyCodes"].ENTER:if(e.metaKey||e.ctrlKey){e.preventDefault();scope.updateChart()}else if(!scope.suggestions.isEmpty()){e.preventDefault();insertSuggestionIntoExpression(scope.suggestions.index)}break;case external_kbnSharedDeps_ElasticEui_["comboBoxKeyCodes"].ESCAPE:e.preventDefault();scope.suggestions.hide();break}};scope.onKeyUpInput=function(e){if(!isNavigationalKey(e.keyCode)){getSuggestions()}};scope.onClickExpression=function(){getSuggestions()};scope.onClickSuggestion=function(index){insertSuggestionIntoExpression(index)};scope.getActiveSuggestionId=function(){if(scope.suggestions.isVisible&&scope.suggestions.index>-1){return"timelionSuggestion".concat(scope.suggestions.index)}return""};init()}}}}var timelion_expression_suggestions='<div\n  id="timelionSuggestionList"\n  class="timSuggestions"\n  role="listbox"\n  ng-class="{ \'timSuggestions-isPopover\': shouldPopover === \'true\' }"\n  data-suggestions-list\n>\n  <div\n    class="timSuggestions__item"\n    id="timelionSuggestion{{$index}}"\n    role="option"\n    tabindex="0"\n    data-suggestion-list-item\n    ng-class="{active: $index === selectedIndex}"\n    ng-repeat="suggestion in suggestions track by suggestion.name"\n    ng-mousedown="onMouseDown($event)"\n    ng-click="onClickSuggestion({ suggestionIndex: $index })"\n    aria-label="{{suggestion.name}}"\n    aria-describedby="timelionSuggestionDescription{{$index}}"\n    data-test-subj="timelionSuggestionListItem"\n  >\n\n    <div ng-switch on="suggestionsType">\n\n      <div ng-switch-when="functions">\n        <h4>\n          <strong>.{{suggestion.name}}()</strong>\n          <small id="timelionSuggestionDescription{{$index}}">\n            <span\n              ng-if="suggestion.chainable"\n              i18n-id="timelion.expressionSuggestions.func.description.chainableText"\n              i18n-default-message="{help} (Chainable)"\n              i18n-values="{ help: suggestion.help }"\n            ></span>\n            <span\n              ng-if="!suggestion.chainable"\n              i18n-id="timelion.expressionSuggestions.func.description.dataSourceText"\n              i18n-default-message="{help} (Data Source)"\n              i18n-values="{ help: suggestion.help }"\n            ></span>\n          </small>\n        </h4>\n\n        <div ng-show="suggestion.args.length > (suggestion.chainable ? 1: 0)">\n          <div ng-show="suggestions.length > 1">\n            <strong\n              i18n-id="timelion.expressionSuggestions.arg.listTitle"\n              i18n-default-message="Arguments:"\n            ></strong>\n            <span ng-repeat="arg in suggestion.args" ng-hide="$index < 1 && suggestion.chainable">\n              <strong>{{arg.name}}</strong>=(<em>{{arg.types.join(\' | \')}}</em>)\n              <em ng-show="!$last">,</em>\n            </span>\n          </div>\n\n          <div class="timSuggestions__details" ng-show="suggestions.length === 1">\n            <table class="table table-striped table-condensed table-bordered">\n            <thead>\n              <th\n                scope="col"\n                i18n-id="timelion.expressionSuggestions.arg.nameTitle"\n                i18n-default-message="Argument Name"\n              ></th>\n              <th\n                scope="col"\n                i18n-id="timelion.expressionSuggestions.arg.typesTitle"\n                i18n-default-message="Accepted Types"\n              ></th>\n              <th\n                scope="col"\n                i18n-id="timelion.expressionSuggestions.arg.infoTitle"\n                i18n-default-message="Information"\n              ></th>\n            </thead>\n            <tr ng-repeat="arg in suggestion.args" ng-hide="$index < 1 && suggestion.chainable">\n              <td>{{arg.name}}</td>\n              <td><em>{{arg.types.join(\', \')}}</em></td>\n              <td>{{arg.help}}</td>\n            </tr>\n            </table>\n          </div>\n        </div>\n      </div>\n\n      <div ng-switch-when="arguments">\n        <h4>\n          <strong>{{suggestion.name}}=</strong>\n          <small id="timelionSuggestionDescription{{$index}}">\n            {{suggestion.help}}\n          </small>\n        </h4>\n        <div>\n          <strong>Accepts:</strong>\n          <em>{{suggestion.types.join(\', \')}}</em>\n        </div>\n      </div>\n\n      <div ng-switch-when="argument_value">\n        <h4>\n          <strong>{{suggestion.name}}</strong>\n          <small id="timelionSuggestionDescription{{$index}}">\n            {{suggestion.help}}\n          </small>\n        </h4>\n      </div>\n\n    </div>\n  </div>\n</div>\n';function TimelionExpressionSuggestions(){return{restrict:"E",scope:{suggestions:"=",suggestionsType:"=",selectedIndex:"=",onClickSuggestion:"&",shouldPopover:"="},replace:true,template:timelion_expression_suggestions,link:function link(scope){scope.onMouseDown=function(e){return e.preventDefault()}}}}function _saved_sheet_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _saved_sheet_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createSavedSheetClass(services,config){var SavedObjectClass=Object(savedObjects_public_["createSavedObjectClass"])(services);var SavedSheet=function(_SavedObjectClass){_inherits(SavedSheet,_SavedObjectClass);var _super=_createSuper(SavedSheet);function SavedSheet(id){var _this;_saved_sheet_classCallCheck(this,SavedSheet);_this=_super.call(this,{type:SavedSheet.type,mapping:SavedSheet.mapping,id:id,defaults:{title:"New TimeLion Sheet",hits:0,description:"",timelion_sheet:[".es(*)"],timelion_interval:"auto",timelion_chart_height:275,timelion_columns:config.get("timelion:default_columns")||2,timelion_rows:config.get("timelion:default_rows")||2,version:1}});_this.showInRecentlyAccessed=true;_this.getFullPath=function(){return"/app/timelion#/".concat(_this.id)};return _this}return SavedSheet}(SavedObjectClass);_saved_sheet_defineProperty(SavedSheet,"type","timelion-sheet");_saved_sheet_defineProperty(SavedSheet,"mapping",{title:"text",hits:"integer",description:"text",timelion_sheet:"text",timelion_interval:"keyword",timelion_other_interval:"keyword",timelion_chart_height:"integer",timelion_columns:"integer",timelion_rows:"integer",version:"integer"});_saved_sheet_defineProperty(SavedSheet,"fieldOrder",["title","description"]);return SavedSheet}function initSavedSheetService(app,deps){var savedObjectsClient=deps.core.savedObjects.client;var services={savedObjectsClient:savedObjectsClient,indexPatterns:deps.plugins.data.indexPatterns,search:deps.plugins.data.search,chrome:deps.core.chrome,overlays:deps.core.overlays};var SavedSheet=createSavedSheetClass(services,deps.core.uiSettings);var savedSheetLoader=new savedObjects_public_["SavedObjectLoader"](SavedSheet,savedObjectsClient);savedSheetLoader.urlFor=function(id){return"#/".concat(encodeURIComponent(id))};savedSheetLoader.loaderProperties={name:"timelion-sheet",noun:"Saved Sheets",nouns:"saved sheets"};app.service("savedSheets",(function(){return savedSheetLoader}));return savedSheetLoader}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){timelion_app_state_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function timelion_app_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var STATE_STORAGE_KEY="_a";function initTimelionAppState(_ref){var stateDefaults=_ref.stateDefaults,kbnUrlStateStorage=_ref.kbnUrlStateStorage;var urlState=kbnUrlStateStorage.get(STATE_STORAGE_KEY);var initialState=_objectSpread(_objectSpread({},stateDefaults),urlState);kbnUrlStateStorage.set(STATE_STORAGE_KEY,initialState,{replace:true});var stateContainer=Object(kibanaUtils_public_["createStateContainer"])(initialState,{set:function set(state){return function(prop,value){return _objectSpread(_objectSpread({},state),{},{[prop]:value})}},updateState:function updateState(state){return function(newValues){return _objectSpread(_objectSpread({},state),newValues)}}});var _syncState=Object(kibanaUtils_public_["syncState"])({storageKey:STATE_STORAGE_KEY,stateContainer:_objectSpread(_objectSpread({},stateContainer),{},{set:function set(state){if(state){stateContainer.set(state)}}}),stateStorage:kbnUrlStateStorage}),startStateSync=_syncState.start,stopStateSync=_syncState.stop;startStateSync();return{stateContainer:stateContainer,stopStateSync:stopStateSync}}var public_1='<timelion-app class="timApp app-container">\n  <span class="kuiLocalTitle">\n    <span class="timApp__stats" ng-show="stats">\n      <span\n        i18n-id="timelion.topNavMenu.statsDescription"\n        i18n-default-message="Query Time {queryTime}ms / Processing Time {processingTime}ms"\n        i18n-values="{\n          queryTime: stats.queryTime - stats.invokeTime,\n          processingTime: stats.sheetTime - stats.queryTime,\n        }"></span>\n    </span>\n  </span>\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav \n    app-name="\'timelion\'"\n    config="topNavMenu"\n    show-search-bar="true"\n    show-search-bar-inline="true"\n    show-filter-bar="false"\n    show-query-input="false"\n    date-range-from="model.timeRange.from"\n    date-range-to="model.timeRange.to"\n    is-refresh-paused="model.refreshInterval.pause"\n    refresh-interval="model.refreshInterval.value"\n    on-refresh-change="onRefreshChange"\n    on-query-submit="onTimeUpdate">\n  </kbn-top-nav>\n\n\n  <div class="timApp__menus">\n    <timelion-deprecation></timelion-deprecation>\n    <timelion-help ng-show="menus.showHelp"></timelion-help>\n    <timelion-save ng-show="menus.showSave"></timelion-save>\n    <timelion-load ng-show="menus.showLoad"></timelion-load>\n    <timelion-options ng-show="menus.showOptions"></timelion-options>\n  </div>\n\n  <div class="timApp__container">\n    <div>\n      \x3c!-- Search. --\x3e\n      <form\n        role="form"\n        ng-submit="updateChart()"\n        class="kuiFieldGroup kuiFieldGroup--alignTop kuiVerticalRhythm"\n      >\n        <div class="kuiFieldGroupSection kuiFieldGroupSection--wide">\n          <timelion-expression-input\n            sheet="expression"\n            rows="1"\n            update-chart="updateChart()"\n            should-popover-suggestions="true"\n          ></timelion-expression-input>\n        </div>\n\n        <div class="kuiFieldGroupSection">\n          <timelion-interval\n            class="kuiVerticalRhythmSmall"\n            model="state.interval"\n            change-interval="changeInterval"\n          ></timelion-interval>\n\n          <button\n            type="submit"\n            aria-label="{{ ::\'timelion.search.submitAriaLabel\' | i18n: { defaultMessage: \'Search\' } }}"\n            class="kuiButton kuiButton--primary fullWidth kuiVerticalRhythmSmall"\n          >\n            <span aria-hidden="true" class="kuiButton__icon kuiIcon fa-play"></span>\n          </button>\n        </div>\n      </form>\n\n      <div class="kuiVerticalRhythm">\n        <timelion-fullscreen\n          ng-show="transient.fullscreen"\n          transient="transient"\n          state="state"\n          series="sheet[state.selected]"\n          expression="state.sheet[state.selected]"\n          on-search="search"\n        ></timelion-fullscreen>\n\n        <timelion-cells\n          ng-show="!transient.fullscreen"\n          transient="transient"\n          state="state"\n          sheet="sheet"\n          on-search="search"\n          on-select="setActiveCell"\n          on-remove-sheet="removeSheet"\n        ></timelion-cells>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';function app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function app_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function app_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){app_ownKeys(Object(source),true).forEach((function(key){app_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{app_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function app_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function initTimelionApp(app,deps){app.run(kibanaLegacy_public_["registerListenEventListener"]);var savedSheetLoader=initSavedSheetService(app,deps);app.factory("history",(function(){return Object(node_modules_history["createHashHistory"])()}));app.factory("kbnUrlStateStorage",(function(history){return Object(kibanaUtils_public_["createKbnUrlStateStorage"])(app_objectSpread({history:history,useHash:deps.core.uiSettings.get("state:storeInSessionStorage")},Object(kibanaUtils_public_["withNotifyOnErrors"])(deps.core.notifications.toasts)))}));app.config(kibanaLegacy_public_["watchMultiDecorator"]);app.controller("TimelionVisController",(function($scope){$scope.$on("timelionChartRendered",(function(event){event.stopPropagation();$scope.renderComplete()}))})).constant("timelionPanels",deps.timelionPanels).directive("chart",Chart).directive("timelionInterval",TimelionInterval).directive("timelionExpressionSuggestions",TimelionExpressionSuggestions).directive("timelionExpressionInput",timelionExpInput(deps));initTimelionHelpDirective(app);initInputFocusDirective(app);initTimelionTabsDirective(app,deps);initTimelionTDeprecationDirective(app,deps);initSavedObjectFinderDirective(app,savedSheetLoader,deps.core.uiSettings);initSavedObjectSaveAsCheckBoxDirective(app);initCellsDirective(app);initFixedElementDirective(app);initFullscreenDirective(app);initTimelionSaveSheetDirective(app);initTimelionLoadSheetDirective(app);initTimelionOptionsSheetDirective(app);var location="Timelion";app.directive("timelionApp",(function(){return{restrict:"E",controllerAs:"timelionApp",controller:timelionController}}));function timelionController($http,$route,$routeParams,$scope,$timeout,history,kbnUrlStateStorage){$scope.page=deps.core.uiSettings.get("timelion:showTutorial",true)?1:0;$scope.setPage=function(page){return $scope.page=page};var timefilter=deps.plugins.data.query.timefilter.timefilter;timefilter.enableAutoRefreshSelector();timefilter.enableTimeRangeSelector();deps.core.chrome.docTitle.change("Timelion - Kibana");var _syncQueryStateWithUr=Object(data_public_["syncQueryStateWithUrl"])(deps.plugins.data.query,kbnUrlStateStorage),stopSyncingQueryServiceStateWithUrl=_syncQueryStateWithUr.stop;var savedSheet=$route.current.locals.savedSheet;function getStateDefaults(){return{sheet:savedSheet.timelion_sheet,selected:0,columns:savedSheet.timelion_columns,rows:savedSheet.timelion_rows,interval:savedSheet.timelion_interval}}var _initTimelionAppState=initTimelionAppState({stateDefaults:getStateDefaults(),kbnUrlStateStorage:kbnUrlStateStorage}),stateContainer=_initTimelionAppState.stateContainer,stopStateSync=_initTimelionAppState.stopStateSync;$scope.state=external_kbnSharedDeps_Lodash_default.a.cloneDeep(stateContainer.getState());$scope.expression=external_kbnSharedDeps_Lodash_default.a.clone($scope.state.sheet[$scope.state.selected]);$scope.updatedSheets=[];var savedVisualizations=deps.plugins.visualizations.savedVisualizationsLoader;var timezone=Object(public_["getTimezone"])(deps.core.uiSettings);var defaultExpression=".es(*)";$scope.topNavMenu=getTopNavMenu();$timeout((function(){if(deps.core.uiSettings.get("timelion:showTutorial",true)){$scope.toggleMenu("showHelp")}}),0);$scope.transient={};function getTopNavMenu(){var newSheetAction={id:"new",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.newSheetButtonLabel",{defaultMessage:"New"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.newSheetButtonAriaLabel",{defaultMessage:"New Sheet"}),run:function run(){history.push("/");$route.reload()},testId:"timelionNewButton"};var addSheetAction={id:"add",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.addChartButtonLabel",{defaultMessage:"Add"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.addChartButtonAriaLabel",{defaultMessage:"Add a chart"}),run:function run(){$scope.$evalAsync((function(){return $scope.newCell()}))},testId:"timelionAddChartButton"};var saveSheetAction={id:"save",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.saveSheetButtonLabel",{defaultMessage:"Save"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.saveSheetButtonAriaLabel",{defaultMessage:"Save Sheet"}),run:function run(){$scope.$evalAsync((function(){return $scope.toggleMenu("showSave")}))},testId:"timelionSaveButton"};var deleteSheetAction={id:"delete",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.deleteSheetButtonLabel",{defaultMessage:"Delete"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.deleteSheetButtonAriaLabel",{defaultMessage:"Delete current sheet"}),disableButton:function disableButton(){return!savedSheet.id},run:function run(){var title=savedSheet.title;function doDelete(){savedSheet.delete().then((function(){deps.core.notifications.toasts.addSuccess(external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.delete.modal.successNotificationText",{defaultMessage:"Deleted '{title}'",values:{title:title}}));history.push("/")})).catch((function(error){return Object(kibanaLegacy_public_["addFatalError"])(deps.core.fatalErrors,error,location)}))}var confirmModalOptions={confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.delete.modal.confirmButtonLabel",{defaultMessage:"Delete"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.delete.modalTitle",{defaultMessage:"Delete Timelion sheet '{title}'?",values:{title:title}})};$scope.$evalAsync((function(){deps.core.overlays.openConfirm(external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.delete.modal.warningText",{defaultMessage:"You can't recover deleted sheets."}),confirmModalOptions).then((function(isConfirmed){if(isConfirmed){doDelete()}}))}))},testId:"timelionDeleteButton"};var openSheetAction={id:"open",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.openSheetButtonLabel",{defaultMessage:"Open"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.openSheetButtonAriaLabel",{defaultMessage:"Open Sheet"}),run:function run(){$scope.$evalAsync((function(){return $scope.toggleMenu("showLoad")}))},testId:"timelionOpenButton"};var optionsAction={id:"options",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.optionsButtonLabel",{defaultMessage:"Options"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.optionsButtonAriaLabel",{defaultMessage:"Options"}),run:function run(){$scope.$evalAsync((function(){return $scope.toggleMenu("showOptions")}))},testId:"timelionOptionsButton"};var helpAction={id:"help",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.helpButtonLabel",{defaultMessage:"Help"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.topNavMenu.helpButtonAriaLabel",{defaultMessage:"Help"}),run:function run(){$scope.$evalAsync((function(){return $scope.toggleMenu("showHelp")}))},testId:"timelionDocsButton"};if(deps.core.application.capabilities.timelion.save){return[newSheetAction,addSheetAction,saveSheetAction,deleteSheetAction,openSheetAction,optionsAction,helpAction]}return[newSheetAction,addSheetAction,openSheetAction,optionsAction,helpAction]}var refresher;var setRefreshData=function setRefreshData(){if(refresher)$timeout.cancel(refresher);var interval=timefilter.getRefreshInterval();if(interval.value>0&&!interval.pause){function startRefresh(){refresher=$timeout((function(){if(!$scope.running)$scope.search();startRefresh()}),interval.value)}startRefresh()}};var init=function init(){$scope.running=false;$scope.search();setRefreshData();$scope.model={timeRange:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval()};var unsubscribeStateUpdates=stateContainer.subscribe((function(state){var clonedState=external_kbnSharedDeps_Lodash_default.a.cloneDeep(state);$scope.updatedSheets.forEach((function(updatedSheet){clonedState.sheet[updatedSheet.id]=updatedSheet.expression}));$scope.state=clonedState;$scope.opts.state=clonedState;$scope.expression=external_kbnSharedDeps_Lodash_default.a.clone($scope.state.sheet[$scope.state.selected]);$scope.search()}));timefilter.getFetch$().subscribe($scope.search);$scope.opts={saveExpression:saveExpression,saveSheet:saveSheet,savedSheet:savedSheet,state:external_kbnSharedDeps_Lodash_default.a.cloneDeep(stateContainer.getState()),search:$scope.search,dontShowHelp:function dontShowHelp(){deps.core.uiSettings.set("timelion:showTutorial",false);$scope.setPage(0);$scope.closeMenus()}};$scope.$watch("opts.state.rows",(function(newRow){var state=stateContainer.getState();if(state.rows!==newRow){stateContainer.transitions.set("rows",newRow)}}));$scope.$watch("opts.state.columns",(function(newColumn){var state=stateContainer.getState();if(state.columns!==newColumn){stateContainer.transitions.set("columns",newColumn)}}));$scope.menus={showHelp:false,showSave:false,showLoad:false,showOptions:false};$scope.toggleMenu=function(menuName){var curState=$scope.menus[menuName];$scope.closeMenus();$scope.menus[menuName]=!curState};$scope.closeMenus=function(){external_kbnSharedDeps_Lodash_default.a.forOwn($scope.menus,(function(value,key){$scope.menus[key]=false}))};$scope.$on("$destroy",(function(){stopSyncingQueryServiceStateWithUrl();unsubscribeStateUpdates();stopStateSync()}))};$scope.onTimeUpdate=function(_ref){var dateRange=_ref.dateRange;$scope.model.timeRange=app_objectSpread({},dateRange);timefilter.setTime(dateRange);if(!$scope.running)$scope.search()};$scope.onRefreshChange=function(_ref2){var isPaused=_ref2.isPaused,refreshInterval=_ref2.refreshInterval;$scope.model.refreshInterval={pause:isPaused,value:refreshInterval};timefilter.setRefreshInterval({pause:isPaused,value:refreshInterval?refreshInterval:$scope.refreshInterval.value});setRefreshData()};$scope.$watch((function(){return savedSheet.lastSavedTitle}),(function(newTitle){if(savedSheet.id&&newTitle){deps.core.chrome.docTitle.change(newTitle)}}));$scope.$watch("expression",(function(newExpression){var state=stateContainer.getState();if(state.sheet[state.selected]!==newExpression){var updatedSheet=$scope.updatedSheets.find((function(updatedSheet){return updatedSheet.id===state.selected}));if(updatedSheet){updatedSheet.expression=newExpression}else{$scope.updatedSheets.push({id:state.selected,expression:newExpression})}}}));$scope.toggle=function(property){$scope[property]=!$scope[property]};$scope.changeInterval=function(interval){$scope.currentInterval=interval};$scope.updateChart=function(){var state=stateContainer.getState();var newSheet=external_kbnSharedDeps_Lodash_default.a.clone(state.sheet);if($scope.updatedSheets.length){$scope.updatedSheets.forEach((function(updatedSheet){newSheet[updatedSheet.id]=updatedSheet.expression}));$scope.updatedSheets=[]}stateContainer.transitions.updateState({interval:$scope.currentInterval?$scope.currentInterval:state.interval,sheet:newSheet})};$scope.newSheet=function(){history.push("/")};$scope.removeSheet=function(removedIndex){var state=stateContainer.getState();var newSheet=state.sheet.filter((function(el,index){return index!==removedIndex}));$scope.updatedSheets=$scope.updatedSheets.filter((function(el){return el.id!==removedIndex}));stateContainer.transitions.updateState({sheet:newSheet,selected:removedIndex?removedIndex-1:removedIndex})};$scope.newCell=function(){var state=stateContainer.getState();var newSheet=[].concat(_toConsumableArray(state.sheet),[defaultExpression]);stateContainer.transitions.updateState({sheet:newSheet,selected:newSheet.length-1})};$scope.setActiveCell=function(cell){var state=stateContainer.getState();if(state.selected!==cell){stateContainer.transitions.updateState({sheet:$scope.state.sheet,selected:cell})}};$scope.search=function(){$scope.running=true;var state=stateContainer.getState();var timeRangeBounds=timefilter.getBounds();var httpResult=$http.post("../api/timelion/run",{sheet:state.sheet,time:external_kbnSharedDeps_Lodash_default.a.assignIn({from:timeRangeBounds.min,to:timeRangeBounds.max},{interval:state.interval,timezone:timezone})}).then((function(resp){return resp.data})).catch((function(resp){throw resp.data}));httpResult.then((function(resp){$scope.stats=resp.stats;$scope.sheet=resp.sheet;external_kbnSharedDeps_Lodash_default.a.forEach(resp.sheet,(function(cell){if(cell.exception&&cell.plot!==state.selected){stateContainer.transitions.set("selected",cell.plot)}}));$scope.running=false})).catch((function(resp){$scope.sheet=[];$scope.running=false;var err=new Error(resp.message);err.stack=resp.stack;deps.core.notifications.toasts.addError(err,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.searchErrorTitle",{defaultMessage:"Timelion request error"})})}))};$scope.safeSearch=external_kbnSharedDeps_Lodash_default.a.debounce($scope.search,500);function saveSheet(){var state=stateContainer.getState();savedSheet.timelion_sheet=state.sheet;savedSheet.timelion_interval=state.interval;savedSheet.timelion_columns=state.columns;savedSheet.timelion_rows=state.rows;savedSheet.save().then((function(id){if(id){deps.core.notifications.toasts.addSuccess({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.saveSheet.successNotificationText",{defaultMessage:"Saved sheet '{title}'",values:{title:savedSheet.title}}),"data-test-subj":"timelionSaveSuccessToast"});if(savedSheet.id!==$routeParams.id){history.push("/".concat(savedSheet.id))}}}))}function saveExpression(_x){return _saveExpression.apply(this,arguments)}function _saveExpression(){_saveExpression=app_asyncToGenerator(regeneratorRuntime.mark((function _callee(title){var vis,state,visSavedObject,id;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return deps.plugins.visualizations.createVis("timelion",{title:title,params:{expression:$scope.state.sheet[$scope.state.selected],interval:$scope.state.interval}});case 2:vis=_context.sent;state=deps.plugins.visualizations.convertFromSerializedVis(vis.serialize());_context.next=6;return savedVisualizations.get();case 6:visSavedObject=_context.sent;Object.assign(visSavedObject,state);_context.next=10;return visSavedObject.save();case 10:id=_context.sent;if(id){deps.core.notifications.toasts.addSuccess(external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.saveExpression.successNotificationText",{defaultMessage:"Saved expression '{title}'",values:{title:state.title}}))}case 12:case"end":return _context.stop()}}}),_callee)})));return _saveExpression.apply(this,arguments)}init()}app.config((function($routeProvider){$routeProvider.when("/:id?",{template:public_1,reloadOnSearch:false,k7Breadcrumbs:function k7Breadcrumbs($injector,$route){return $injector.invoke($route.current.params.id?getSavedSheetBreadcrumbs:getCreateBreadcrumbs)},badge:function badge(){if(deps.core.application.capabilities.timelion.save){return undefined}return{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("timelion.badge.readOnly.tooltip",{defaultMessage:"Unable to save Timelion sheets"}),iconType:"glasses"}},resolve:{savedSheet:function savedSheet(savedSheets,$route){return savedSheets.get($route.current.params.id).then((function(savedSheet){if($route.current.params.id){deps.core.chrome.recentlyAccessed.add(savedSheet.getFullPath(),savedSheet.title,savedSheet.id)}return savedSheet})).catch()}}}).otherwise("/")}))}var angularModuleInstance=null;var application_renderApp=function renderApp(deps){if(!angularModuleInstance){angularModuleInstance=createLocalAngularModule(deps);Object(kibanaLegacy_public_["configureAppAngularModule"])(angularModuleInstance,{core:deps.core,env:deps.pluginInitializerContext.env},true);initTimelionApp(angularModuleInstance,deps)}var $injector=mountTimelionApp(deps.mountParams.appBasePath,deps.mountParams.element,deps);return function(){$injector.get("$rootScope").$destroy()}};function registerPanels(dependencies){var timeChartPanel=getTimeChart(dependencies);dependencies.timelionPanels.set(timeChartPanel.name,timeChartPanel)}var mainTemplate=function mainTemplate(basePath){return'<div ng-view class="timelionAppContainer">\n  <base href="'.concat(basePath,'" />\n</div>')};var moduleName="app/timelion";var thirdPartyAngularDependencies=["ngSanitize","ngRoute","react","angular-sortable-view"];function mountTimelionApp(appBasePath,element,deps){var mountpoint=document.createElement("div");mountpoint.setAttribute("class","timelionAppContainer");mountpoint.innerHTML=mainTemplate(appBasePath);var $injector=external_kbnSharedDeps_Angular_default.a.bootstrap(mountpoint,[moduleName]);registerPanels({uiSettings:deps.core.uiSettings,timelionPanels:deps.timelionPanels,data:deps.plugins.data,$rootScope:$injector.get("$rootScope"),$compile:$injector.get("$compile")});element.appendChild(mountpoint);return $injector}function createLocalAngularModule(deps){createLocalI18nModule();createLocalIconModule();createLocalTopNavModule(deps.plugins.navigation);var dashboardAngularModule=external_kbnSharedDeps_Angular_default.a.module(moduleName,[].concat(thirdPartyAngularDependencies,["app/timelion/TopNav","app/timelion/I18n","app/timelion/icon"]));return dashboardAngularModule}function createLocalIconModule(){external_kbnSharedDeps_Angular_default.a.module("app/timelion/icon",["react"]).directive("icon",(function(reactDirective){return reactDirective(external_kbnSharedDeps_ElasticEui_["EuiIcon"])}))}function createLocalTopNavModule(navigation){external_kbnSharedDeps_Angular_default.a.module("app/timelion/TopNav",["react"]).directive("kbnTopNav",kibanaLegacy_public_["createTopNavDirective"]).directive("kbnTopNavHelper",Object(kibanaLegacy_public_["createTopNavHelper"])(navigation.ui))}function createLocalI18nModule(){external_kbnSharedDeps_Angular_default.a.module("app/timelion/I18n",[]).provider("i18n",external_kbnSharedDeps_KbnI18nAngular_["I18nProvider"]).filter("i18n",external_kbnSharedDeps_KbnI18nAngular_["i18nFilter"]).directive("i18nId",external_kbnSharedDeps_KbnI18nAngular_["i18nDirective"])}}}]);