(window["console_bundle_jsonpfunction"]=window["console_bundle_jsonpfunction"]||[]).push([[2],{30:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.installXJsonMode=exports.XJsonMode=exports.addXJsonToRules=exports.XJsonHighlightRules=exports.ScriptHighlightRules=exports.ElasticsearchSqlHighlightRules=void 0;var modes_1=__webpack_require__(35);Object.defineProperty(exports,"ElasticsearchSqlHighlightRules",{enumerable:true,get:function get(){return modes_1.ElasticsearchSqlHighlightRules}});Object.defineProperty(exports,"ScriptHighlightRules",{enumerable:true,get:function get(){return modes_1.ScriptHighlightRules}});Object.defineProperty(exports,"XJsonHighlightRules",{enumerable:true,get:function get(){return modes_1.XJsonHighlightRules}});Object.defineProperty(exports,"addXJsonToRules",{enumerable:true,get:function get(){return modes_1.addXJsonToRules}});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return modes_1.XJsonMode}});Object.defineProperty(exports,"installXJsonMode",{enumerable:true,get:function get(){return modes_1.installXJsonMode}})},35:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.XJsonMode=exports.installXJsonMode=exports.addXJsonToRules=exports.XJsonHighlightRules=exports.ScriptHighlightRules=exports.ElasticsearchSqlHighlightRules=void 0;var lexer_rules_1=__webpack_require__(43);Object.defineProperty(exports,"ElasticsearchSqlHighlightRules",{enumerable:true,get:function get(){return lexer_rules_1.ElasticsearchSqlHighlightRules}});Object.defineProperty(exports,"ScriptHighlightRules",{enumerable:true,get:function get(){return lexer_rules_1.ScriptHighlightRules}});Object.defineProperty(exports,"XJsonHighlightRules",{enumerable:true,get:function get(){return lexer_rules_1.XJsonHighlightRules}});Object.defineProperty(exports,"addXJsonToRules",{enumerable:true,get:function get(){return lexer_rules_1.addXJsonToRules}});var x_json_1=__webpack_require__(46);Object.defineProperty(exports,"installXJsonMode",{enumerable:true,get:function get(){return x_json_1.installXJsonMode}});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return x_json_1.XJsonMode}})},36:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElasticsearchSqlHighlightRules=void 0;var tslib_1=__webpack_require__(20);var brace_1=tslib_1.__importDefault(__webpack_require__(29));var _brace_1$default$aceq=brace_1.default.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_brace_1$default$aceq.TextHighlightRules;var oop=brace_1.default.acequire("ace/lib/oop");exports.ElasticsearchSqlHighlightRules=function(){var keywords="describe|between|in|like|not|and|or|desc|select|from|where|having|group|by|order"+"asc|desc|pivot|for|in|as|show|columns|include|frozen|tables|escape|limit|rlike|all|distinct|is";var builtinConstants="true|false";var builtinFunctions="avg|count|first|first_value|last|last_value|max|min|sum|kurtosis|mad|percentile|percentile_rank|skewness"+"|stddev_pop|sum_of_squares|var_pop|histogram|case|coalesce|greatest|ifnull|iif|isnull|least|nullif|nvl"+"|curdate|current_date|current_time|current_timestamp|curtime|dateadd|datediff|datepart|datetrunc|date_add"+"|date_diff|date_part|date_trunc|day|dayname|dayofmonth|dayofweek|dayofyear|day_name|day_of_month|day_of_week"+"|day_of_year|dom|dow|doy|hour|hour_of_day|idow|isodayofweek|isodow|isoweek|isoweekofyear|iso_day_of_week|iso_week_of_year"+"|iw|iwoy|minute|minute_of_day|minute_of_hour|month|monthname|month_name|month_of_year|now|quarter|second|second_of_minute"+"|timestampadd|timestampdiff|timestamp_add|timestamp_diff|today|week|week_of_year|year|abs|acos|asin|atan|atan2|cbrt"+"|ceil|ceiling|cos|cosh|cot|degrees|e|exp|expm1|floor|log|log10|mod|pi|power|radians|rand|random|round|sign|signum|sin"+"|sinh|sqrt|tan|truncate|ascii|bit_length|char|character_length|char_length|concat|insert|lcase|left|length|locate"+"|ltrim|octet_length|position|repeat|replace|right|rtrim|space|substring|ucase|cast|convert|database|user|st_astext|st_aswkt"+"|st_distance|st_geometrytype|st_geomfromtext|st_wkttosql|st_x|st_y|st_z|score";var dataTypes="null|boolean|byte|short|integer|long|double|float|half_float|scaled_float|keyword|text|binary|date|ip|object|nested|time"+"|interval_year|interval_month|interval_day|interval_hour|interval_minute|interval_second|interval_year_to_month"+"inteval_day_to_hour|interval_day_to_minute|interval_day_to_second|interval_hour_to_minute|interval_hour_to_second"+"interval_minute_to_second|geo_point|geo_shape|shape";var keywordMapper=this.createKeywordMapper({keyword:[keywords,builtinFunctions,builtinConstants,dataTypes].join("|")},"identifier",true);this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"string",regex:'".*?"'},{token:"constant",regex:"'.*?'"},{token:"string",regex:"`.*?`"},{token:"entity.name.function",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:keywordMapper,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"⇐|<⇒|\\*|\\.|\\:\\:|\\+|\\-|\\/|\\/\\/|%|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]};this.normalizeRules()};oop.inherits(exports.ElasticsearchSqlHighlightRules,TextHighlightRules)},37:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptHighlightRules=void 0;var tslib_1=__webpack_require__(20);var brace_1=tslib_1.__importDefault(__webpack_require__(29));var oop=brace_1.default.acequire("ace/lib/oop");var _brace_1$default$aceq=brace_1.default.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_brace_1$default$aceq.TextHighlightRules;var painlessKeywords="def|int|long|byte|String|float|double|char|null|if|else|while|do|for|continue|break|new|try|catch|throw|this|instanceof|return|ctx";function ScriptHighlightRules(){this.name="ScriptHighlightRules";this.$rules={start:[{token:"script.comment",regex:"\\/\\/.*$"},{token:"script.string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"script.string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"script.constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"script.constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"script.constant.language.boolean",regex:"(?:true|false)\\b"},{token:"script.keyword",regex:painlessKeywords},{token:"script.text",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"script.keyword.operator",regex:"\\?\\.|\\*\\.|=~|==~|!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|->|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|typeof|void)"},{token:"script.lparen",regex:"[[({]"},{token:"script.rparen",regex:"[\\])}]"},{token:"script.text",regex:"\\s+"}]}}exports.ScriptHighlightRules=ScriptHighlightRules;oop.inherits(ScriptHighlightRules,TextHighlightRules)},41:function(module,exports){},43:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addXJsonToRules=exports.XJsonHighlightRules=exports.ScriptHighlightRules=exports.ElasticsearchSqlHighlightRules=void 0;var elasticsearch_sql_highlight_rules_1=__webpack_require__(36);Object.defineProperty(exports,"ElasticsearchSqlHighlightRules",{enumerable:true,get:function get(){return elasticsearch_sql_highlight_rules_1.ElasticsearchSqlHighlightRules}});var script_highlight_rules_1=__webpack_require__(37);Object.defineProperty(exports,"ScriptHighlightRules",{enumerable:true,get:function get(){return script_highlight_rules_1.ScriptHighlightRules}});var x_json_highlight_rules_1=__webpack_require__(44);Object.defineProperty(exports,"XJsonHighlightRules",{enumerable:true,get:function get(){return x_json_highlight_rules_1.XJsonHighlightRules}});Object.defineProperty(exports,"addXJsonToRules",{enumerable:true,get:function get(){return x_json_highlight_rules_1.addToRules}})},44:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.addToRules=exports.XJsonHighlightRules=void 0;var tslib_1=__webpack_require__(20);var lodash_1=__webpack_require__(16);var brace_1=tslib_1.__importDefault(__webpack_require__(29));__webpack_require__(31);var elasticsearch_sql_highlight_rules_1=__webpack_require__(36);var script_highlight_rules_1=__webpack_require__(37);var _brace_1$default$aceq=brace_1.default.acequire("ace/mode/json_highlight_rules"),JsonHighlightRules=_brace_1$default$aceq.JsonHighlightRules;var oop=brace_1.default.acequire("ace/lib/oop");var jsonRules=function jsonRules(root){root=root?root:"json";var rules={};var xJsonRules=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("(?:[^"]*_)?script"|"inline"|"source")(\\s*?)(:)(\\s*?)(""")',next:"script-start",merge:false,push:true},{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"punctuation.start_triple_quote",regex:'"""',next:"string_literal",merge:false,push:true},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",merge:false,regex:"{",next:root,push:true},{token:"paren.lparen",merge:false,regex:"[[(]"},{token:"paren.rparen",merge:false,regex:"[\\])]"},{token:"paren.rparen",regex:"}",merge:false,next:"pop"},{token:"punctuation.comma",regex:","},{token:"punctuation.colon",regex:":"},{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}];rules[root]=xJsonRules;rules[root+"-sql"]=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("query")(\\s*?)(:)(\\s*?)(""")',next:"sql-start",merge:false,push:true}].concat(xJsonRules);rules.string_literal=[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"},{token:"multi_string",regex:"."}];return rules};function XJsonHighlightRules(){this.$rules=_objectSpread({},jsonRules("start"));this.embedRules(script_highlight_rules_1.ScriptHighlightRules,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}]);this.embedRules(elasticsearch_sql_highlight_rules_1.ElasticsearchSqlHighlightRules,"sql-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}exports.XJsonHighlightRules=XJsonHighlightRules;oop.inherits(XJsonHighlightRules,JsonHighlightRules);function addToRules(otherRules,embedUnder){otherRules.$rules=lodash_1.defaultsDeep(otherRules.$rules,jsonRules(embedUnder));otherRules.embedRules(script_highlight_rules_1.ScriptHighlightRules,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}]);otherRules.embedRules(elasticsearch_sql_highlight_rules_1.ElasticsearchSqlHighlightRules,"sql-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}exports.addToRules=addToRules},46:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.XJsonMode=exports.installXJsonMode=void 0;var x_json_1=__webpack_require__(47);Object.defineProperty(exports,"installXJsonMode",{enumerable:true,get:function get(){return x_json_1.installXJsonMode}});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return x_json_1.XJsonMode}})},47:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.installXJsonMode=exports.XJsonMode=void 0;var tslib_1=__webpack_require__(20);var brace_1=tslib_1.__importDefault(__webpack_require__(29));var index_1=__webpack_require__(35);var worker_1=__webpack_require__(48);var _brace_1$default$aceq=brace_1.default.acequire("ace/worker/worker_client"),WorkerClient=_brace_1$default$aceq.WorkerClient;var oop=brace_1.default.acequire("ace/lib/oop");var _brace_1$default$aceq2=brace_1.default.acequire("ace/mode/json"),JSONMode=_brace_1$default$aceq2.Mode;var _brace_1$default$aceq3=brace_1.default.acequire("ace/tokenizer"),AceTokenizer=_brace_1$default$aceq3.Tokenizer;var _brace_1$default$aceq4=brace_1.default.acequire("ace/mode/matching_brace_outdent"),MatchingBraceOutdent=_brace_1$default$aceq4.MatchingBraceOutdent;var _brace_1$default$aceq5=brace_1.default.acequire("ace/mode/behaviour/cstyle"),CstyleBehaviour=_brace_1$default$aceq5.CstyleBehaviour;var _brace_1$default$aceq6=brace_1.default.acequire("ace/mode/folding/cstyle"),CStyleFoldMode=_brace_1$default$aceq6.FoldMode;var XJsonMode=function XJsonMode(){var ruleset=new index_1.XJsonHighlightRules;ruleset.normalizeRules();this.$tokenizer=new AceTokenizer(ruleset.getRules());this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode};exports.XJsonMode=XJsonMode;oop.inherits(XJsonMode,JSONMode);XJsonMode.prototype.createWorker=function(session){var xJsonWorker=new WorkerClient(["ace"],worker_1.workerModule,"JsonWorker");xJsonWorker.attachToDocument(session.getDocument());xJsonWorker.on("annotate",(function(e){session.setAnnotations(e.data)}));xJsonWorker.on("terminate",(function(){session.clearAnnotations()}));return xJsonWorker};function installXJsonMode(editor){var session=editor.getSession();session.setMode(new XJsonMode)}exports.installXJsonMode=installXJsonMode},48:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.workerModule=void 0;var tslib_1=__webpack_require__(20);var x_json_ace_worker_js_1=tslib_1.__importDefault(__webpack_require__(49));exports.workerModule={id:"ace/mode/json_worker",src:x_json_ace_worker_js_1.default}},49:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the "License"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* @notice\n *\n * This product includes code that is based on Ace editor, which was available\n * under a "BSD" license.\n *\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable */\n/*\n  This file is loaded up as a blob by Brace to hand to Ace to load as Jsonp\n  (hence the redefining of everything).  It is based on the json\n  mode from the brace distro.\n\n  It is very likely that this file will be removed in future but for now it enables\n  extended JSON parsing, like e.g. """{}""" (triple quotes)\n*/\n"no use strict";\n! function(window) {\n  function resolveModuleId(id, paths) {\n    for (var testPath = id, tail = ""; testPath;) {\n      var alias = paths[testPath];\n      if ("string" == typeof alias) return alias + tail;\n      if (alias) return alias.location.replace(/\\/*$/, "/") + (tail || alias.main || alias.name);\n      if (alias === !1) return "";\n      var i = testPath.lastIndexOf("/");\n      if (-1 === i) break;\n      tail = testPath.substr(i) + tail, testPath = testPath.slice(0, i)\n    }\n    return id\n  }\n  if (!(void 0 !== window.window && window.document || window.acequire && window.define)) {\n    window.console || (window.console = function() {\n      var msgs = Array.prototype.slice.call(arguments, 0);\n      postMessage({\n        type: "log",\n        data: msgs\n      })\n    }, window.console.error = window.console.warn = window.console.log = window.console.trace = window.console), window.window = window, window.ace = window, window.onerror = function(message, file, line, col, err) {\n      postMessage({\n        type: "error",\n        data: {\n          message: message,\n          data: err.data,\n          file: file,\n          line: line,\n          col: col,\n          stack: err.stack\n        }\n      })\n    }, window.normalizeModule = function(parentId, moduleName) {\n      if (-1 !== moduleName.indexOf("!")) {\n        var chunks = moduleName.split("!");\n        return window.normalizeModule(parentId, chunks[0]) + "!" + window.normalizeModule(parentId, chunks[1])\n      }\n      if ("." == moduleName.charAt(0)) {\n        var base = parentId.split("/").slice(0, -1).join("/");\n        for (moduleName = (base ? base + "/" : "") + moduleName; - 1 !== moduleName.indexOf(".") && previous != moduleName;) {\n          var previous = moduleName;\n          moduleName = moduleName.replace(/^\\.\\//, "").replace(/\\/\\.\\//, "/").replace(/[^\\/]+\\/\\.\\.\\//, "")\n        }\n      }\n      return moduleName\n    }, window.acequire = function acequire(parentId, id) {\n      if (id || (id = parentId, parentId = null), !id.charAt) throw Error("worker.js acequire() accepts only (parentId, id) as arguments");\n      id = window.normalizeModule(parentId, id);\n      var module = window.acequire.modules[id];\n      if (module) return module.initialized || (module.initialized = !0, module.exports = module.factory().exports), module.exports;\n      if (!window.acequire.tlns) return console.log("unable to load " + id);\n      var path = resolveModuleId(id, window.acequire.tlns);\n      return ".js" != path.slice(-3) && (path += ".js"), window.acequire.id = id, window.acequire.modules[id] = {}, importScripts(path), window.acequire(parentId, id)\n    }, window.acequire.modules = {}, window.acequire.tlns = {}, window.define = function(id, deps, factory) {\n      if (2 == arguments.length ? (factory = deps, "string" != typeof id && (deps = id, id = window.acequire.id)) : 1 == arguments.length && (factory = id, deps = [], id = window.acequire.id), "function" != typeof factory) return window.acequire.modules[id] = {\n        exports: factory,\n        initialized: !0\n      }, void 0;\n      deps.length || (deps = ["require", "exports", "module"]);\n      var req = function(childId) {\n        return window.acequire(id, childId)\n      };\n      window.acequire.modules[id] = {\n        exports: {},\n        factory: function() {\n          var module = this,\n            returnExports = factory.apply(this, deps.map(function(dep) {\n              switch (dep) {\n                case "require":\n                  return req;\n                case "exports":\n                  return module.exports;\n                case "module":\n                  return module;\n                default:\n                  return req(dep)\n              }\n            }));\n          return returnExports && (module.exports = returnExports), module\n        }\n      }\n    }, window.define.amd = {}, acequire.tlns = {}, window.initBaseUrls = function(topLevelNamespaces) {\n      for (var i in topLevelNamespaces) acequire.tlns[i] = topLevelNamespaces[i]\n    }, window.initSender = function() {\n      var EventEmitter = window.acequire("ace/lib/event_emitter").EventEmitter,\n        oop = window.acequire("ace/lib/oop"),\n        Sender = function() {};\n      return function() {\n        oop.implement(this, EventEmitter), this.callback = function(data, callbackId) {\n          postMessage({\n            type: "call",\n            id: callbackId,\n            data: data\n          })\n        }, this.emit = function(name, data) {\n          postMessage({\n            type: "event",\n            name: name,\n            data: data\n          })\n        }\n      }.call(Sender.prototype), new Sender\n    };\n    var main = window.main = null,\n      sender = window.sender = null;\n    window.onmessage = function(e) {\n      var msg = e.data;\n      if (msg.event && sender) sender._signal(msg.event, msg.data);\n      else if (msg.command)\n        if (main[msg.command]) main[msg.command].apply(main, msg.args);\n        else {\n          if (!window[msg.command]) throw Error("Unknown command:" + msg.command);\n          window[msg.command].apply(window, msg.args)\n        }\n      else if (msg.init) {\n        window.initBaseUrls(msg.tlns), acequire("ace/lib/es5-shim"), sender = window.sender = window.initSender();\n        var clazz = acequire(msg.module)[msg.classname];\n        main = window.main = new clazz(sender)\n      }\n    }\n  }\n}(this), ace.define("ace/lib/oop", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.inherits = function(ctor, superCtor) {\n    ctor.super_ = superCtor, ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    })\n  }, exports.mixin = function(obj, mixin) {\n    for (var key in mixin) obj[key] = mixin[key];\n    return obj\n  }, exports.implement = function(proto, mixin) {\n    exports.mixin(proto, mixin)\n  }\n}), ace.define("ace/range", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  var comparePoints = function(p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column\n    },\n    Range = function(startRow, startColumn, endRow, endColumn) {\n      this.start = {\n        row: startRow,\n        column: startColumn\n      }, this.end = {\n        row: endRow,\n        column: endColumn\n      }\n    };\n  (function() {\n    this.isEqual = function(range) {\n      return this.start.row === range.start.row && this.end.row === range.end.row && this.start.column === range.start.column && this.end.column === range.end.column\n    }, this.toString = function() {\n      return "Range: [" + this.start.row + "/" + this.start.column + "] -> [" + this.end.row + "/" + this.end.column + "]"\n    }, this.contains = function(row, column) {\n      return 0 == this.compare(row, column)\n    }, this.compareRange = function(range) {\n      var cmp, end = range.end,\n        start = range.start;\n      return cmp = this.compare(end.row, end.column), 1 == cmp ? (cmp = this.compare(start.row, start.column), 1 == cmp ? 2 : 0 == cmp ? 1 : 0) : -1 == cmp ? -2 : (cmp = this.compare(start.row, start.column), -1 == cmp ? -1 : 1 == cmp ? 42 : 0)\n    }, this.comparePoint = function(p) {\n      return this.compare(p.row, p.column)\n    }, this.containsRange = function(range) {\n      return 0 == this.comparePoint(range.start) && 0 == this.comparePoint(range.end)\n    }, this.intersects = function(range) {\n      var cmp = this.compareRange(range);\n      return -1 == cmp || 0 == cmp || 1 == cmp\n    }, this.isEnd = function(row, column) {\n      return this.end.row == row && this.end.column == column\n    }, this.isStart = function(row, column) {\n      return this.start.row == row && this.start.column == column\n    }, this.setStart = function(row, column) {\n      "object" == typeof row ? (this.start.column = row.column, this.start.row = row.row) : (this.start.row = row, this.start.column = column)\n    }, this.setEnd = function(row, column) {\n      "object" == typeof row ? (this.end.column = row.column, this.end.row = row.row) : (this.end.row = row, this.end.column = column)\n    }, this.inside = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isEnd(row, column) || this.isStart(row, column) ? !1 : !0 : !1\n    }, this.insideStart = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isEnd(row, column) ? !1 : !0 : !1\n    }, this.insideEnd = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isStart(row, column) ? !1 : !0 : !1\n    }, this.compare = function(row, column) {\n      return this.isMultiLine() || row !== this.start.row ? this.start.row > row ? -1 : row > this.end.row ? 1 : this.start.row === row ? column >= this.start.column ? 0 : -1 : this.end.row === row ? this.end.column >= column ? 0 : 1 : 0 : this.start.column > column ? -1 : column > this.end.column ? 1 : 0\n    }, this.compareStart = function(row, column) {\n      return this.start.row == row && this.start.column == column ? -1 : this.compare(row, column)\n    }, this.compareEnd = function(row, column) {\n      return this.end.row == row && this.end.column == column ? 1 : this.compare(row, column)\n    }, this.compareInside = function(row, column) {\n      return this.end.row == row && this.end.column == column ? 1 : this.start.row == row && this.start.column == column ? -1 : this.compare(row, column)\n    }, this.clipRows = function(firstRow, lastRow) {\n      if (this.end.row > lastRow) var end = {\n        row: lastRow + 1,\n        column: 0\n      };\n      else if (firstRow > this.end.row) var end = {\n        row: firstRow,\n        column: 0\n      };\n      if (this.start.row > lastRow) var start = {\n        row: lastRow + 1,\n        column: 0\n      };\n      else if (firstRow > this.start.row) var start = {\n        row: firstRow,\n        column: 0\n      };\n      return Range.fromPoints(start || this.start, end || this.end)\n    }, this.extend = function(row, column) {\n      var cmp = this.compare(row, column);\n      if (0 == cmp) return this;\n      if (-1 == cmp) var start = {\n        row: row,\n        column: column\n      };\n      else var end = {\n        row: row,\n        column: column\n      };\n      return Range.fromPoints(start || this.start, end || this.end)\n    }, this.isEmpty = function() {\n      return this.start.row === this.end.row && this.start.column === this.end.column\n    }, this.isMultiLine = function() {\n      return this.start.row !== this.end.row\n    }, this.clone = function() {\n      return Range.fromPoints(this.start, this.end)\n    }, this.collapseRows = function() {\n      return 0 == this.end.column ? new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0) : new Range(this.start.row, 0, this.end.row, 0)\n    }, this.toScreenRange = function(session) {\n      var screenPosStart = session.documentToScreenPosition(this.start),\n        screenPosEnd = session.documentToScreenPosition(this.end);\n      return new Range(screenPosStart.row, screenPosStart.column, screenPosEnd.row, screenPosEnd.column)\n    }, this.moveBy = function(row, column) {\n      this.start.row += row, this.start.column += column, this.end.row += row, this.end.column += column\n    }\n  }).call(Range.prototype), Range.fromPoints = function(start, end) {\n    return new Range(start.row, start.column, end.row, end.column)\n  }, Range.comparePoints = comparePoints, Range.comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column\n  }, exports.Range = Range\n}), ace.define("ace/apply_delta", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.applyDelta = function(docLines, delta) {\n    var row = delta.start.row,\n      startColumn = delta.start.column,\n      line = docLines[row] || "";\n    switch (delta.action) {\n      case "insert":\n        var lines = delta.lines;\n        if (1 === lines.length) docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n        else {\n          var args = [row, 1].concat(delta.lines);\n          docLines.splice.apply(docLines, args), docLines[row] = line.substring(0, startColumn) + docLines[row], docLines[row + delta.lines.length - 1] += line.substring(startColumn)\n        }\n        break;\n      case "remove":\n        var endColumn = delta.end.column,\n          endRow = delta.end.row;\n        row === endRow ? docLines[row] = line.substring(0, startColumn) + line.substring(endColumn) : docLines.splice(row, endRow - row + 1, line.substring(0, startColumn) + docLines[endRow].substring(endColumn))\n    }\n  }\n}), ace.define("ace/lib/event_emitter", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  var EventEmitter = {},\n    stopPropagation = function() {\n      this.propagationStopped = !0\n    },\n    preventDefault = function() {\n      this.defaultPrevented = !0\n    };\n  EventEmitter._emit = EventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {}), this._defaultHandlers || (this._defaultHandlers = {});\n    var listeners = this._eventRegistry[eventName] || [],\n      defaultHandler = this._defaultHandlers[eventName];\n    if (listeners.length || defaultHandler) {\n      "object" == typeof e && e || (e = {}), e.type || (e.type = eventName), e.stopPropagation || (e.stopPropagation = stopPropagation), e.preventDefault || (e.preventDefault = preventDefault), listeners = listeners.slice();\n      for (var i = 0; listeners.length > i && (listeners[i](e, this), !e.propagationStopped); i++);\n      return defaultHandler && !e.defaultPrevented ? defaultHandler(e, this) : void 0\n    }\n  }, EventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (listeners) {\n      listeners = listeners.slice();\n      for (var i = 0; listeners.length > i; i++) listeners[i](e, this)\n    }\n  }, EventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    callback && this.addEventListener(eventName, function newCallback() {\n      _self.removeEventListener(eventName, newCallback), callback.apply(null, arguments)\n    })\n  }, EventEmitter.setDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (handlers || (handlers = this._defaultHandlers = {\n        _disabled_: {}\n      }), handlers[eventName]) {\n      var old = handlers[eventName],\n        disabled = handlers._disabled_[eventName];\n      disabled || (handlers._disabled_[eventName] = disabled = []), disabled.push(old);\n      var i = disabled.indexOf(callback); - 1 != i && disabled.splice(i, 1)\n    }\n    handlers[eventName] = callback\n  }, EventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (handlers) {\n      var disabled = handlers._disabled_[eventName];\n      if (handlers[eventName] == callback) handlers[eventName], disabled && this.setDefaultHandler(eventName, disabled.pop());\n      else if (disabled) {\n        var i = disabled.indexOf(callback); - 1 != i && disabled.splice(i, 1)\n      }\n    }\n  }, EventEmitter.on = EventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    return listeners || (listeners = this._eventRegistry[eventName] = []), -1 == listeners.indexOf(callback) && listeners[capturing ? "unshift" : "push"](callback), callback\n  }, EventEmitter.off = EventEmitter.removeListener = EventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    if (listeners) {\n      var index = listeners.indexOf(callback); - 1 !== index && listeners.splice(index, 1)\n    }\n  }, EventEmitter.removeAllListeners = function(eventName) {\n    this._eventRegistry && (this._eventRegistry[eventName] = [])\n  }, exports.EventEmitter = EventEmitter\n}), ace.define("ace/anchor", ["require", "exports", "module", "ace/lib/oop", "ace/lib/event_emitter"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("./lib/oop"),\n    EventEmitter = acequire("./lib/event_emitter").EventEmitter,\n    Anchor = exports.Anchor = function(doc, row, column) {\n      this.$onChange = this.onChange.bind(this), this.attach(doc), column === void 0 ? this.setPosition(row.row, row.column) : this.setPosition(row, column)\n    };\n  (function() {\n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n      var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n      return point1.row < point2.row || point1.row == point2.row && bColIsAfter\n    }\n\n    function $getTransformedPoint(delta, point, moveIfEqual) {\n      var deltaIsInsert = "insert" == delta.action,\n        deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row),\n        deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column),\n        deltaStart = delta.start,\n        deltaEnd = deltaIsInsert ? deltaStart : delta.end;\n      return $pointsInOrder(point, deltaStart, moveIfEqual) ? {\n        row: point.row,\n        column: point.column\n      } : $pointsInOrder(deltaEnd, point, !moveIfEqual) ? {\n        row: point.row + deltaRowShift,\n        column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n      } : {\n        row: deltaStart.row,\n        column: deltaStart.column\n      }\n    }\n    oop.implement(this, EventEmitter), this.getPosition = function() {\n      return this.$clipPositionToDocument(this.row, this.column)\n    }, this.getDocument = function() {\n      return this.document\n    }, this.$insertRight = !1, this.onChange = function(delta) {\n      if (!(delta.start.row == delta.end.row && delta.start.row != this.row || delta.start.row > this.row)) {\n        var point = $getTransformedPoint(delta, {\n          row: this.row,\n          column: this.column\n        }, this.$insertRight);\n        this.setPosition(point.row, point.column, !0)\n      }\n    }, this.setPosition = function(row, column, noClip) {\n      var pos;\n      if (pos = noClip ? {\n          row: row,\n          column: column\n        } : this.$clipPositionToDocument(row, column), this.row != pos.row || this.column != pos.column) {\n        var old = {\n          row: this.row,\n          column: this.column\n        };\n        this.row = pos.row, this.column = pos.column, this._signal("change", {\n          old: old,\n          value: pos\n        })\n      }\n    }, this.detach = function() {\n      this.document.removeEventListener("change", this.$onChange)\n    }, this.attach = function(doc) {\n      this.document = doc || this.document, this.document.on("change", this.$onChange)\n    }, this.$clipPositionToDocument = function(row, column) {\n      var pos = {};\n      return row >= this.document.getLength() ? (pos.row = Math.max(0, this.document.getLength() - 1), pos.column = this.document.getLine(pos.row).length) : 0 > row ? (pos.row = 0, pos.column = 0) : (pos.row = row, pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column))), 0 > column && (pos.column = 0), pos\n    }\n  }).call(Anchor.prototype)\n}), ace.define("ace/document", ["require", "exports", "module", "ace/lib/oop", "ace/apply_delta", "ace/lib/event_emitter", "ace/range", "ace/anchor"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("./lib/oop"),\n    applyDelta = acequire("./apply_delta").applyDelta,\n    EventEmitter = acequire("./lib/event_emitter").EventEmitter,\n    Range = acequire("./range").Range,\n    Anchor = acequire("./anchor").Anchor,\n    Document = function(textOrLines) {\n      this.$lines = [""], 0 === textOrLines.length ? this.$lines = [""] : Array.isArray(textOrLines) ? this.insertMergedLines({\n        row: 0,\n        column: 0\n      }, textOrLines) : this.insert({\n        row: 0,\n        column: 0\n      }, textOrLines)\n    };\n  (function() {\n    oop.implement(this, EventEmitter), this.setValue = function(text) {\n      var len = this.getLength() - 1;\n      this.remove(new Range(0, 0, len, this.getLine(len).length)), this.insert({\n        row: 0,\n        column: 0\n      }, text)\n    }, this.getValue = function() {\n      return this.getAllLines().join(this.getNewLineCharacter())\n    }, this.createAnchor = function(row, column) {\n      return new Anchor(this, row, column)\n    }, this.$split = 0 === "aaa".split(/a/).length ? function(text) {\n      return text.replace(/\\r\\n|\\r/g, "\\n").split("\\n")\n    } : function(text) {\n      return text.split(/\\r\\n|\\r|\\n/)\n    }, this.$detectNewLine = function(text) {\n      var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n      this.$autoNewLine = match ? match[1] : "\\n", this._signal("changeNewLineMode")\n    }, this.getNewLineCharacter = function() {\n      switch (this.$newLineMode) {\n        case "windows":\n          return "\\r\\n";\n        case "unix":\n          return "\\n";\n        default:\n          return this.$autoNewLine || "\\n"\n      }\n    }, this.$autoNewLine = "", this.$newLineMode = "auto", this.setNewLineMode = function(newLineMode) {\n      this.$newLineMode !== newLineMode && (this.$newLineMode = newLineMode, this._signal("changeNewLineMode"))\n    }, this.getNewLineMode = function() {\n      return this.$newLineMode\n    }, this.isNewLine = function(text) {\n      return "\\r\\n" == text || "\\r" == text || "\\n" == text\n    }, this.getLine = function(row) {\n      return this.$lines[row] || ""\n    }, this.getLines = function(firstRow, lastRow) {\n      return this.$lines.slice(firstRow, lastRow + 1)\n    }, this.getAllLines = function() {\n      return this.getLines(0, this.getLength())\n    }, this.getLength = function() {\n      return this.$lines.length\n    }, this.getTextRange = function(range) {\n      return this.getLinesForRange(range).join(this.getNewLineCharacter())\n    }, this.getLinesForRange = function(range) {\n      var lines;\n      if (range.start.row === range.end.row) lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n      else {\n        lines = this.getLines(range.start.row, range.end.row), lines[0] = (lines[0] || "").substring(range.start.column);\n        var l = lines.length - 1;\n        range.end.row - range.start.row == l && (lines[l] = lines[l].substring(0, range.end.column))\n      }\n      return lines\n    }, this.insertLines = function(row, lines) {\n      return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."), this.insertFullLines(row, lines)\n    }, this.removeLines = function(firstRow, lastRow) {\n      return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."), this.removeFullLines(firstRow, lastRow)\n    }, this.insertNewLine = function(position) {\n      return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."), this.insertMergedLines(position, ["", ""])\n    }, this.insert = function(position, text) {\n      return 1 >= this.getLength() && this.$detectNewLine(text), this.insertMergedLines(position, this.$split(text))\n    }, this.insertInLine = function(position, text) {\n      var start = this.clippedPos(position.row, position.column),\n        end = this.pos(position.row, position.column + text.length);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "insert",\n        lines: [text]\n      }, !0), this.clonePos(end)\n    }, this.clippedPos = function(row, column) {\n      var length = this.getLength();\n      void 0 === row ? row = length : 0 > row ? row = 0 : row >= length && (row = length - 1, column = void 0);\n      var line = this.getLine(row);\n      return void 0 == column && (column = line.length), column = Math.min(Math.max(column, 0), line.length), {\n        row: row,\n        column: column\n      }\n    }, this.clonePos = function(pos) {\n      return {\n        row: pos.row,\n        column: pos.column\n      }\n    }, this.pos = function(row, column) {\n      return {\n        row: row,\n        column: column\n      }\n    }, this.$clipPosition = function(position) {\n      var length = this.getLength();\n      return position.row >= length ? (position.row = Math.max(0, length - 1), position.column = this.getLine(length - 1).length) : (position.row = Math.max(0, position.row), position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length)), position\n    }, this.insertFullLines = function(row, lines) {\n      row = Math.min(Math.max(row, 0), this.getLength());\n      var column = 0;\n      this.getLength() > row ? (lines = lines.concat([""]), column = 0) : (lines = [""].concat(lines), row--, column = this.$lines[row].length), this.insertMergedLines({\n        row: row,\n        column: column\n      }, lines)\n    }, this.insertMergedLines = function(position, lines) {\n      var start = this.clippedPos(position.row, position.column),\n        end = {\n          row: start.row + lines.length - 1,\n          column: (1 == lines.length ? start.column : 0) + lines[lines.length - 1].length\n        };\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "insert",\n        lines: lines\n      }), this.clonePos(end)\n    }, this.remove = function(range) {\n      var start = this.clippedPos(range.start.row, range.start.column),\n        end = this.clippedPos(range.end.row, range.end.column);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "remove",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }), this.clonePos(start)\n    }, this.removeInLine = function(row, startColumn, endColumn) {\n      var start = this.clippedPos(row, startColumn),\n        end = this.clippedPos(row, endColumn);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "remove",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }, !0), this.clonePos(start)\n    }, this.removeFullLines = function(firstRow, lastRow) {\n      firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1), lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1);\n      var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0,\n        deleteLastNewLine = this.getLength() - 1 > lastRow,\n        startRow = deleteFirstNewLine ? firstRow - 1 : firstRow,\n        startCol = deleteFirstNewLine ? this.getLine(startRow).length : 0,\n        endRow = deleteLastNewLine ? lastRow + 1 : lastRow,\n        endCol = deleteLastNewLine ? 0 : this.getLine(endRow).length,\n        range = new Range(startRow, startCol, endRow, endCol),\n        deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n      return this.applyDelta({\n        start: range.start,\n        end: range.end,\n        action: "remove",\n        lines: this.getLinesForRange(range)\n      }), deletedLines\n    }, this.removeNewLine = function(row) {\n      this.getLength() - 1 > row && row >= 0 && this.applyDelta({\n        start: this.pos(row, this.getLine(row).length),\n        end: this.pos(row + 1, 0),\n        action: "remove",\n        lines: ["", ""]\n      })\n    }, this.replace = function(range, text) {\n      if (range instanceof Range || (range = Range.fromPoints(range.start, range.end)), 0 === text.length && range.isEmpty()) return range.start;\n      if (text == this.getTextRange(range)) return range.end;\n      this.remove(range);\n      var end;\n      return end = text ? this.insert(range.start, text) : range.start\n    }, this.applyDeltas = function(deltas) {\n      for (var i = 0; deltas.length > i; i++) this.applyDelta(deltas[i])\n    }, this.revertDeltas = function(deltas) {\n      for (var i = deltas.length - 1; i >= 0; i--) this.revertDelta(deltas[i])\n    }, this.applyDelta = function(delta, doNotValidate) {\n      var isInsert = "insert" == delta.action;\n      (isInsert ? 1 >= delta.lines.length && !delta.lines[0] : !Range.comparePoints(delta.start, delta.end)) || (isInsert && delta.lines.length > 2e4 && this.$splitAndapplyLargeDelta(delta, 2e4), applyDelta(this.$lines, delta, doNotValidate), this._signal("change", delta))\n    }, this.$splitAndapplyLargeDelta = function(delta, MAX) {\n      for (var lines = delta.lines, l = lines.length, row = delta.start.row, column = delta.start.column, from = 0, to = 0;;) {\n        from = to, to += MAX - 1;\n        var chunk = lines.slice(from, to);\n        if (to > l) {\n          delta.lines = chunk, delta.start.row = row + from, delta.start.column = column;\n          break\n        }\n        chunk.push(""), this.applyDelta({\n          start: this.pos(row + from, column),\n          end: this.pos(row + to, column = 0),\n          action: delta.action,\n          lines: chunk\n        }, !0)\n      }\n    }, this.revertDelta = function(delta) {\n      this.applyDelta({\n        start: this.clonePos(delta.start),\n        end: this.clonePos(delta.end),\n        action: "insert" == delta.action ? "remove" : "insert",\n        lines: delta.lines.slice()\n      })\n    }, this.indexToPosition = function(index, startRow) {\n      for (var lines = this.$lines || this.getAllLines(), newlineLength = this.getNewLineCharacter().length, i = startRow || 0, l = lines.length; l > i; i++)\n        if (index -= lines[i].length + newlineLength, 0 > index) return {\n          row: i,\n          column: index + lines[i].length + newlineLength\n        };\n      return {\n        row: l - 1,\n        column: lines[l - 1].length\n      }\n    }, this.positionToIndex = function(pos, startRow) {\n      for (var lines = this.$lines || this.getAllLines(), newlineLength = this.getNewLineCharacter().length, index = 0, row = Math.min(pos.row, lines.length), i = startRow || 0; row > i; ++i) index += lines[i].length + newlineLength;\n      return index + pos.column\n    }\n  }).call(Document.prototype), exports.Document = Document\n}), ace.define("ace/lib/lang", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.last = function(a) {\n    return a[a.length - 1]\n  }, exports.stringReverse = function(string) {\n    return string.split("").reverse().join("")\n  }, exports.stringRepeat = function(string, count) {\n    for (var result = ""; count > 0;) 1 & count && (result += string), (count >>= 1) && (string += string);\n    return result\n  };\n  var trimBeginRegexp = /^\\s\\s*/,\n    trimEndRegexp = /\\s\\s*$/;\n  exports.stringTrimLeft = function(string) {\n    return string.replace(trimBeginRegexp, "")\n  }, exports.stringTrimRight = function(string) {\n    return string.replace(trimEndRegexp, "")\n  }, exports.copyObject = function(obj) {\n    var copy = {};\n    for (var key in obj) copy[key] = obj[key];\n    return copy\n  }, exports.copyArray = function(array) {\n    for (var copy = [], i = 0, l = array.length; l > i; i++) copy[i] = array[i] && "object" == typeof array[i] ? this.copyObject(array[i]) : array[i];\n    return copy\n  }, exports.deepCopy = function deepCopy(obj) {\n    if ("object" != typeof obj || !obj) return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n      copy = [];\n      for (var key = 0; obj.length > key; key++) copy[key] = deepCopy(obj[key]);\n      return copy\n    }\n    if ("[object Object]" !== Object.prototype.toString.call(obj)) return obj;\n    copy = {};\n    for (var key in obj) copy[key] = deepCopy(obj[key]);\n    return copy\n  }, exports.arrayToMap = function(arr) {\n    for (var map = {}, i = 0; arr.length > i; i++) map[arr[i]] = 1;\n    return map\n  }, exports.createMap = function(props) {\n    var map = Object.create(null);\n    for (var i in props) map[i] = props[i];\n    return map\n  }, exports.arrayRemove = function(array, value) {\n    for (var i = 0; array.length >= i; i++) value === array[i] && array.splice(i, 1)\n  }, exports.escapeRegExp = function(str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, "\\\\$1")\n  }, exports.escapeHTML = function(str) {\n    return str.replace(/&/g, "&#38;").replace(/"/g, "&#34;").replace(/\'/g, "&#39;").replace(/</g, "&#60;")\n  }, exports.getMatchOffsets = function(string, regExp) {\n    var matches = [];\n    return string.replace(regExp, function(str) {\n      matches.push({\n        offset: arguments[arguments.length - 2],\n        length: str.length\n      })\n    }), matches\n  }, exports.deferredCall = function(fcn) {\n    var timer = null,\n      callback = function() {\n        timer = null, fcn()\n      },\n      deferred = function(timeout) {\n        return deferred.cancel(), timer = setTimeout(callback, timeout || 0), deferred\n      };\n    return deferred.schedule = deferred, deferred.call = function() {\n      return this.cancel(), fcn(), deferred\n    }, deferred.cancel = function() {\n      return clearTimeout(timer), timer = null, deferred\n    }, deferred.isPending = function() {\n      return timer\n    }, deferred\n  }, exports.delayedCall = function(fcn, defaultTimeout) {\n    var timer = null,\n      callback = function() {\n        timer = null, fcn()\n      },\n      _self = function(timeout) {\n        null == timer && (timer = setTimeout(callback, timeout || defaultTimeout))\n      };\n    return _self.delay = function(timeout) {\n      timer && clearTimeout(timer), timer = setTimeout(callback, timeout || defaultTimeout)\n    }, _self.schedule = _self, _self.call = function() {\n      this.cancel(), fcn()\n    }, _self.cancel = function() {\n      timer && clearTimeout(timer), timer = null\n    }, _self.isPending = function() {\n      return timer\n    }, _self\n  }\n}), ace.define("ace/worker/mirror", ["require", "exports", "module", "ace/range", "ace/document", "ace/lib/lang"], function(acequire, exports) {\n  "use strict";\n  acequire("../range").Range;\n  var Document = acequire("../document").Document,\n    lang = acequire("../lib/lang"),\n    Mirror = exports.Mirror = function(sender) {\n      this.sender = sender;\n      var doc = this.doc = new Document(""),\n        deferredUpdate = this.deferredUpdate = lang.delayedCall(this.onUpdate.bind(this)),\n        _self = this;\n      sender.on("change", function(e) {\n        var data = e.data;\n        if (data[0].start) doc.applyDeltas(data);\n        else\n          for (var i = 0; data.length > i; i += 2) {\n            if (Array.isArray(data[i + 1])) var d = {\n              action: "insert",\n              start: data[i],\n              lines: data[i + 1]\n            };\n            else var d = {\n              action: "remove",\n              start: data[i],\n              end: data[i + 1]\n            };\n            doc.applyDelta(d, !0)\n          }\n        return _self.$timeout ? deferredUpdate.schedule(_self.$timeout) : (_self.onUpdate(), void 0)\n      })\n    };\n  (function() {\n    this.$timeout = 500, this.setTimeout = function(timeout) {\n      this.$timeout = timeout\n    }, this.setValue = function(value) {\n      this.doc.setValue(value), this.deferredUpdate.schedule(this.$timeout)\n    }, this.getValue = function(callbackId) {\n      this.sender.callback(this.doc.getValue(), callbackId)\n    }, this.onUpdate = function() {}, this.isPending = function() {\n      return this.deferredUpdate.isPending()\n    }\n  }).call(Mirror.prototype)\n}), ace.define("ace/mode/json/json_parse", ["require", "exports", "module"], function() {\n  "use strict";\n  var at, ch, text, value, escapee = {\n      \'"\': \'"\',\n      "\\\\": "\\\\",\n      "/": "/",\n      b: "\\b",\n      f: "\\f",\n      n: "\\n",\n      r: "\\r",\n      t: "\t"\n    },\n    error = function(m) {\n      throw {\n        name: "SyntaxError",\n        message: m,\n        at: at,\n        text: text\n      }\n    },\n    reset = function (newAt) {\n      ch = text.charAt(newAt);\n      at = newAt + 1;\n    },\n    next = function(c) {\n      return c && c !== ch && error("Expected \'" + c + "\' instead of \'" + ch + "\'"), ch = text.charAt(at), at += 1, ch\n    },\n    nextUpTo = function (upTo, errorMessage) {\n      let currentAt = at,\n        i = text.indexOf(upTo, currentAt);\n      if (i < 0) {\n        error(errorMessage || \'Expected \\\'\' + upTo + \'\\\'\');\n      }\n      reset(i + upTo.length);\n      return text.substring(currentAt, i);\n    },\n    peek = function (c) {\n      return text.substr(at, c.length) === c; // nocommit - double check\n    },\n    number = function() {\n      var number, string = "";\n      for ("-" === ch && (string = "-", next("-")); ch >= "0" && "9" >= ch;) string += ch, next();\n      if ("." === ch)\n        for (string += "."; next() && ch >= "0" && "9" >= ch;) string += ch;\n      if ("e" === ch || "E" === ch)\n        for (string += ch, next(), ("-" === ch || "+" === ch) && (string += ch, next()); ch >= "0" && "9" >= ch;) string += ch, next();\n      return number = +string, isNaN(number) ? (error("Bad number"), void 0) : number\n    },\n    string = function() {\n      var hex, i, uffff, string = "";\n      if (\'"\' === ch) {\n        if (peek(\'""\')) {\n          // literal\n          next(\'"\');\n          next(\'"\');\n          return nextUpTo(\'"""\', \'failed to find closing \\\'"""\\\'\');\n        } else {\n          for (; next();) {\n            if (\'"\' === ch) return next(), string;\n            if ("\\\\" === ch)\n              if (next(), "u" === ch) {\n                for (uffff = 0, i = 0; 4 > i && (hex = parseInt(next(), 16), isFinite(hex)); i += 1) uffff = 16 * uffff + hex;\n                string += String.fromCharCode(uffff)\n              } else {\n                if ("string" != typeof escapee[ch]) break;\n                string += escapee[ch]\n              }\n            else string += ch\n          }\n        }\n      }\n      error("Bad string")\n    },\n    white = function() {\n      for (; ch && " " >= ch;) next()\n    },\n    word = function() {\n      switch (ch) {\n        case "t":\n          return next("t"), next("r"), next("u"), next("e"), !0;\n        case "f":\n          return next("f"), next("a"), next("l"), next("s"), next("e"), !1;\n        case "n":\n          return next("n"), next("u"), next("l"), next("l"), null\n      }\n      error("Unexpected \'" + ch + "\'")\n    },\n    array = function() {\n      var array = [];\n      if ("[" === ch) {\n        if (next("["), white(), "]" === ch) return next("]"), array;\n        for (; ch;) {\n          if (array.push(value()), white(), "]" === ch) return next("]"), array;\n          next(","), white()\n        }\n      }\n      error("Bad array")\n    },\n    object = function() {\n      var key, object = {};\n      if ("{" === ch) {\n        if (next("{"), white(), "}" === ch) return next("}"), object;\n        for (; ch;) {\n          if (key = string(), white(), next(":"), Object.hasOwnProperty.call(object, key) && error(\'Duplicate key "\' + key + \'"\'), object[key] = value(), white(), "}" === ch) return next("}"), object;\n          next(","), white()\n        }\n      }\n      error("Bad object")\n    };\n  return value = function() {\n      switch (white(), ch) {\n        case "{":\n          return object();\n        case "[":\n          return array();\n        case \'"\':\n          return string();\n        case "-":\n          return number();\n        default:\n          return ch >= "0" && "9" >= ch ? number() : word()\n      }\n    },\n    function(source, reviver) {\n      var result;\n      return text = source, at = 0, ch = " ", result = value(), white(), ch && error("Syntax error"), "function" == typeof reviver ? function walk(holder, key) {\n        var k, v, value = holder[key];\n        if (value && "object" == typeof value)\n          for (k in value) Object.hasOwnProperty.call(value, k) && (v = walk(value, k), void 0 !== v ? value[k] = v : delete value[k]);\n        return reviver.call(holder, key, value)\n      }({\n        "": result\n      }, "") : result\n    }\n}), ace.define("ace/mode/json_worker", ["require", "exports", "module", "ace/lib/oop", "ace/worker/mirror", "ace/mode/json/json_parse"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("../lib/oop"),\n    Mirror = acequire("../worker/mirror").Mirror,\n    parse = acequire("./json/json_parse"),\n    JsonWorker = exports.JsonWorker = function(sender) {\n      Mirror.call(this, sender), this.setTimeout(200)\n    };\n  oop.inherits(JsonWorker, Mirror),\n    function() {\n      this.onUpdate = function() {\n        var value = this.doc.getValue(),\n          errors = [];\n        try {\n          value && parse(value)\n        } catch (e) {\n          var pos = this.doc.indexToPosition(e.at - 1);\n          errors.push({\n            row: pos.row,\n            column: pos.column,\n            text: e.message,\n            type: "error"\n          })\n        }\n        this.sender.emit("annotate", errors)\n      }\n    }.call(JsonWorker.prototype)\n}), ace.define("ace/lib/es5-shim", ["require", "exports", "module"], function() {\n  function Empty() {}\n\n  function doesDefinePropertyWork(object) {\n    try {\n      return Object.defineProperty(object, "sentinel", {}), "sentinel" in object\n    } catch (exception) {}\n  }\n\n  function toInteger(n) {\n    return n = +n, n !== n ? n = 0 : 0 !== n && n !== 1 / 0 && n !== -(1 / 0) && (n = (n > 0 || -1) * Math.floor(Math.abs(n))), n\n  }\n  Function.prototype.bind || (Function.prototype.bind = function(that) {\n    var target = this;\n    if ("function" != typeof target) throw new TypeError("Function.prototype.bind called on incompatible " + target);\n    var args = slice.call(arguments, 1),\n      bound = function() {\n        if (this instanceof bound) {\n          var result = target.apply(this, args.concat(slice.call(arguments)));\n          return Object(result) === result ? result : this\n        }\n        return target.apply(that, args.concat(slice.call(arguments)))\n      };\n    return target.prototype && (Empty.prototype = target.prototype, bound.prototype = new Empty, Empty.prototype = null), bound\n  });\n  var defineGetter, defineSetter, lookupGetter, lookupSetter, supportsAccessors, call = Function.prototype.call,\n    prototypeOfArray = Array.prototype,\n    prototypeOfObject = Object.prototype,\n    slice = prototypeOfArray.slice,\n    _toString = call.bind(prototypeOfObject.toString),\n    owns = call.bind(prototypeOfObject.hasOwnProperty);\n  if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__")) && (defineGetter = call.bind(prototypeOfObject.__defineGetter__), defineSetter = call.bind(prototypeOfObject.__defineSetter__), lookupGetter = call.bind(prototypeOfObject.__lookupGetter__), lookupSetter = call.bind(prototypeOfObject.__lookupSetter__)), 2 != [1, 2].splice(0).length)\n    if (function() {\n        function makeArray(l) {\n          var a = Array(l + 2);\n          return a[0] = a[1] = 0, a\n        }\n        var lengthBefore, array = [];\n        return array.splice.apply(array, makeArray(20)), array.splice.apply(array, makeArray(26)), lengthBefore = array.length, array.splice(5, 0, "XXX"), lengthBefore + 1 == array.length, lengthBefore + 1 == array.length ? !0 : void 0\n      }()) {\n      var array_splice = Array.prototype.splice;\n      Array.prototype.splice = function(start, deleteCount) {\n        return arguments.length ? array_splice.apply(this, [void 0 === start ? 0 : start, void 0 === deleteCount ? this.length - start : deleteCount].concat(slice.call(arguments, 2))) : []\n      }\n    } else Array.prototype.splice = function(pos, removeCount) {\n      var length = this.length;\n      pos > 0 ? pos > length && (pos = length) : void 0 == pos ? pos = 0 : 0 > pos && (pos = Math.max(length + pos, 0)), length > pos + removeCount || (removeCount = length - pos);\n      var removed = this.slice(pos, pos + removeCount),\n        insert = slice.call(arguments, 2),\n        add = insert.length;\n      if (pos === length) add && this.push.apply(this, insert);\n      else {\n        var remove = Math.min(removeCount, length - pos),\n          tailOldPos = pos + remove,\n          tailNewPos = tailOldPos + add - remove,\n          tailCount = length - tailOldPos,\n          lengthAfterRemove = length - remove;\n        if (tailOldPos > tailNewPos)\n          for (var i = 0; tailCount > i; ++i) this[tailNewPos + i] = this[tailOldPos + i];\n        else if (tailNewPos > tailOldPos)\n          for (i = tailCount; i--;) this[tailNewPos + i] = this[tailOldPos + i];\n        if (add && pos === lengthAfterRemove) this.length = lengthAfterRemove, this.push.apply(this, insert);\n        else\n          for (this.length = lengthAfterRemove + add, i = 0; add > i; ++i) this[pos + i] = insert[i]\n      }\n      return removed\n    };\n  Array.isArray || (Array.isArray = function(obj) {\n    return "[object Array]" == _toString(obj)\n  });\n  var boxedString = Object("a"),\n    splitString = "a" != boxedString[0] || !(0 in boxedString);\n  if (Array.prototype.forEach || (Array.prototype.forEach = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        thisp = arguments[1],\n        i = -1,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError;\n      for (; length > ++i;) i in self && fun.call(thisp, self[i], i, object)\n    }), Array.prototype.map || (Array.prototype.map = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        result = Array(length),\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++) i in self && (result[i] = fun.call(thisp, self[i], i, object));\n      return result\n    }), Array.prototype.filter || (Array.prototype.filter = function(fun) {\n      var value, object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        result = [],\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++) i in self && (value = self[i], fun.call(thisp, value, i, object) && result.push(value));\n      return result\n    }), Array.prototype.every || (Array.prototype.every = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++)\n        if (i in self && !fun.call(thisp, self[i], i, object)) return !1;\n      return !0\n    }), Array.prototype.some || (Array.prototype.some = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++)\n        if (i in self && fun.call(thisp, self[i], i, object)) return !0;\n      return !1\n    }), Array.prototype.reduce || (Array.prototype.reduce = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      if (!length && 1 == arguments.length) throw new TypeError("reduce of empty array with no initial value");\n      var result, i = 0;\n      if (arguments.length >= 2) result = arguments[1];\n      else\n        for (;;) {\n          if (i in self) {\n            result = self[i++];\n            break\n          }\n          if (++i >= length) throw new TypeError("reduce of empty array with no initial value")\n        }\n      for (; length > i; i++) i in self && (result = fun.call(void 0, result, self[i], i, object));\n      return result\n    }), Array.prototype.reduceRight || (Array.prototype.reduceRight = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      if (!length && 1 == arguments.length) throw new TypeError("reduceRight of empty array with no initial value");\n      var result, i = length - 1;\n      if (arguments.length >= 2) result = arguments[1];\n      else\n        for (;;) {\n          if (i in self) {\n            result = self[i--];\n            break\n          }\n          if (0 > --i) throw new TypeError("reduceRight of empty array with no initial value")\n        }\n      do i in this && (result = fun.call(void 0, result, self[i], i, object)); while (i--);\n      return result\n    }), Array.prototype.indexOf && -1 == [0, 1].indexOf(1, 2) || (Array.prototype.indexOf = function(sought) {\n      var self = splitString && "[object String]" == _toString(this) ? this.split("") : toObject(this),\n        length = self.length >>> 0;\n      if (!length) return -1;\n      var i = 0;\n      for (arguments.length > 1 && (i = toInteger(arguments[1])), i = i >= 0 ? i : Math.max(0, length + i); length > i; i++)\n        if (i in self && self[i] === sought) return i;\n      return -1\n    }), Array.prototype.lastIndexOf && -1 == [0, 1].lastIndexOf(0, -3) || (Array.prototype.lastIndexOf = function(sought) {\n      var self = splitString && "[object String]" == _toString(this) ? this.split("") : toObject(this),\n        length = self.length >>> 0;\n      if (!length) return -1;\n      var i = length - 1;\n      for (arguments.length > 1 && (i = Math.min(i, toInteger(arguments[1]))), i = i >= 0 ? i : length - Math.abs(i); i >= 0; i--)\n        if (i in self && sought === self[i]) return i;\n      return -1\n    }), Object.getPrototypeOf || (Object.getPrototypeOf = function(object) {\n      return object.__proto__ || (object.constructor ? object.constructor.prototype : prototypeOfObject)\n    }), !Object.getOwnPropertyDescriptor) {\n    var ERR_NON_OBJECT = "Object.getOwnPropertyDescriptor called on a non-object: ";\n    Object.getOwnPropertyDescriptor = function(object, property) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError(ERR_NON_OBJECT + object);\n      if (owns(object, property)) {\n        var descriptor, getter, setter;\n        if (descriptor = {\n            enumerable: !0,\n            configurable: !0\n          }, supportsAccessors) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject;\n          var getter = lookupGetter(object, property),\n            setter = lookupSetter(object, property);\n          if (object.__proto__ = prototype, getter || setter) return getter && (descriptor.get = getter), setter && (descriptor.set = setter), descriptor\n        }\n        return descriptor.value = object[property], descriptor\n      }\n    }\n  }\n  if (Object.getOwnPropertyNames || (Object.getOwnPropertyNames = function(object) {\n      return Object.keys(object)\n    }), !Object.create) {\n    var createEmpty;\n    createEmpty = null === Object.prototype.__proto__ ? function() {\n      return {\n        __proto__: null\n      }\n    } : function() {\n      var empty = {};\n      for (var i in empty) empty[i] = null;\n      return empty.constructor = empty.hasOwnProperty = empty.propertyIsEnumerable = empty.isPrototypeOf = empty.toLocaleString = empty.toString = empty.valueOf = empty.__proto__ = null, empty\n    }, Object.create = function(prototype, properties) {\n      var object;\n      if (null === prototype) object = createEmpty();\n      else {\n        if ("object" != typeof prototype) throw new TypeError("typeof prototype[" + typeof prototype + "] != \'object\'");\n        var Type = function() {};\n        Type.prototype = prototype, object = new Type, object.__proto__ = prototype\n      }\n      return void 0 !== properties && Object.defineProperties(object, properties), object\n    }\n  }\n  if (Object.defineProperty) {\n    var definePropertyWorksOnObject = doesDefinePropertyWork({}),\n      definePropertyWorksOnDom = "undefined" == typeof document || doesDefinePropertyWork(document.createElement("div"));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) var definePropertyFallback = Object.defineProperty\n  }\n  if (!Object.defineProperty || definePropertyFallback) {\n    var ERR_NON_OBJECT_DESCRIPTOR = "Property description must be an object: ",\n      ERR_NON_OBJECT_TARGET = "Object.defineProperty called on non-object: ",\n      ERR_ACCESSORS_NOT_SUPPORTED = "getters & setters can not be defined on this javascript engine";\n    Object.defineProperty = function(object, property, descriptor) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError(ERR_NON_OBJECT_TARGET + object);\n      if ("object" != typeof descriptor && "function" != typeof descriptor || null === descriptor) throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);\n      if (definePropertyFallback) try {\n        return definePropertyFallback.call(Object, object, property, descriptor)\n      } catch (exception) {}\n      if (owns(descriptor, "value"))\n        if (supportsAccessors && (lookupGetter(object, property) || lookupSetter(object, property))) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject, delete object[property], object[property] = descriptor.value, object.__proto__ = prototype\n        } else object[property] = descriptor.value;\n      else {\n        if (!supportsAccessors) throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);\n        owns(descriptor, "get") && defineGetter(object, property, descriptor.get), owns(descriptor, "set") && defineSetter(object, property, descriptor.set)\n      }\n      return object\n    }\n  }\n  Object.defineProperties || (Object.defineProperties = function(object, properties) {\n    for (var property in properties) owns(properties, property) && Object.defineProperty(object, property, properties[property]);\n    return object\n  }), Object.seal || (Object.seal = function(object) {\n    return object\n  }), Object.freeze || (Object.freeze = function(object) {\n    return object\n  });\n  try {\n    Object.freeze(function() {})\n  } catch (exception) {\n    Object.freeze = function(freezeObject) {\n      return function(object) {\n        return "function" == typeof object ? object : freezeObject(object)\n      }\n    }(Object.freeze)\n  }\n  if (Object.preventExtensions || (Object.preventExtensions = function(object) {\n      return object\n    }), Object.isSealed || (Object.isSealed = function() {\n      return !1\n    }), Object.isFrozen || (Object.isFrozen = function() {\n      return !1\n    }), Object.isExtensible || (Object.isExtensible = function(object) {\n      if (Object(object) === object) throw new TypeError;\n      for (var name = ""; owns(object, name);) name += "?";\n      object[name] = !0;\n      var returnValue = owns(object, name);\n      return delete object[name], returnValue\n    }), !Object.keys) {\n    var hasDontEnumBug = !0,\n      dontEnums = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],\n      dontEnumsLength = dontEnums.length;\n    for (var key in {\n        toString: null\n      }) hasDontEnumBug = !1;\n    Object.keys = function(object) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError("Object.keys called on a non-object");\n      var keys = [];\n      for (var name in object) owns(object, name) && keys.push(name);\n      if (hasDontEnumBug)\n        for (var i = 0, ii = dontEnumsLength; ii > i; i++) {\n          var dontEnum = dontEnums[i];\n          owns(object, dontEnum) && keys.push(dontEnum)\n        }\n      return keys\n    }\n  }\n  Date.now || (Date.now = function() {\n    return (new Date).getTime()\n  });\n  var ws = "\t\\n\v\\f\\r   ᠎             　\\u2028\\u2029\ufeff";\n  if (!String.prototype.trim || ws.trim()) {\n    ws = "[" + ws + "]";\n    var trimBeginRegexp = RegExp("^" + ws + ws + "*"),\n      trimEndRegexp = RegExp(ws + ws + "*$");\n    String.prototype.trim = function() {\n      return (this + "").replace(trimBeginRegexp, "").replace(trimEndRegexp, "")\n    }\n  }\n  var toObject = function(o) {\n    if (null == o) throw new TypeError("can\'t convert " + o + " to object");\n    return Object(o)\n  }\n});\n'},59:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));var external_kbnSharedDeps_React_=__webpack_require__(17);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(24);var ServicesContext=Object(external_kbnSharedDeps_React_["createContext"])(null);function ServicesContextProvider(_ref){var children=_ref.children,value=_ref.value;Object(external_kbnSharedDeps_React_["useEffect"])((function(){value.services.esHostService.init()}),[value.services.esHostService]);return external_kbnSharedDeps_React_default.a.createElement(ServicesContext.Provider,{value:value},children)}var services_context_useServicesContext=function useServicesContext(){var context=Object(external_kbnSharedDeps_React_["useContext"])(ServicesContext);if(context===undefined){throw new Error("useServicesContext must be used inside the ServicesContextProvider.")}return context};var create_use_context_createUseContext=function createUseContext(Ctx,name){return function(){var ctx=Object(external_kbnSharedDeps_React_["useContext"])(Ctx);if(!ctx){throw new Error("".concat(name," should be used inside of ").concat(name,"Provider!"))}return ctx}};var immer=__webpack_require__(32);var lib_function=__webpack_require__(33);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var initialResultValue={data:null,type:"unknown"};var initialValue=Object(immer["produce"])({requestInFlight:false,lastResult:initialResultValue},lib_function["identity"]);var request_reducer=function reducer(state,action){return Object(immer["produce"])(state,(function(draft){if(action.type==="sendRequest"){draft.requestInFlight=true;draft.lastResult=initialResultValue;return}if(action.type==="requestSuccess"){draft.requestInFlight=false;draft.lastResult=action.payload;return}if(action.type==="requestFail"){draft.requestInFlight=false;draft.lastResult=_objectSpread(_objectSpread({},initialResultValue),{},{error:action.payload});return}}))};function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var RequestReadContext=Object(external_kbnSharedDeps_React_["createContext"])(null);var RequestActionContext=Object(external_kbnSharedDeps_React_["createContext"])(null);function RequestContextProvider(_ref){var children=_ref.children;var _useReducer=Object(external_kbnSharedDeps_React_["useReducer"])(request_reducer,initialValue),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return external_kbnSharedDeps_React_default.a.createElement(RequestReadContext.Provider,{value:state},external_kbnSharedDeps_React_default.a.createElement(RequestActionContext.Provider,{value:dispatch},children))}var useRequestReadContext=create_use_context_createUseContext(RequestReadContext,"RequestReadContext");var useRequestActionContext=create_use_context_createUseContext(RequestActionContext,"RequestActionContext");var editor_initialValue=Object(immer["produce"])({ready:false,settings:null,currentTextObject:null},lib_function["identity"]);var editor_reducer=function reducer(state,action){return Object(immer["produce"])(state,(function(draft){if(action.type==="setInputEditor"){if(action.payload){draft.ready=true}return}if(action.type==="updateSettings"){draft.settings=action.payload;return}if(action.type==="setCurrentTextObject"){draft.currentTextObject=action.payload;return}return draft}))};function editor_context_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function editor_context_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){editor_context_ownKeys(Object(source),true).forEach((function(key){editor_context_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{editor_context_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function editor_context_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function editor_context_slicedToArray(arr,i){return editor_context_arrayWithHoles(arr)||editor_context_iterableToArrayLimit(arr,i)||editor_context_unsupportedIterableToArray(arr,i)||editor_context_nonIterableRest()}function editor_context_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function editor_context_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return editor_context_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return editor_context_arrayLikeToArray(o,minLen)}function editor_context_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function editor_context_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function editor_context_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var EditorReadContext=Object(external_kbnSharedDeps_React_["createContext"])(null);var EditorActionContext=Object(external_kbnSharedDeps_React_["createContext"])(null);function EditorContextProvider(_ref){var children=_ref.children,settings=_ref.settings;var _useReducer=Object(external_kbnSharedDeps_React_["useReducer"])(editor_reducer,editor_initialValue,(function(value){return editor_context_objectSpread(editor_context_objectSpread({},value),{},{settings:settings})})),_useReducer2=editor_context_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return external_kbnSharedDeps_React_default.a.createElement(EditorReadContext.Provider,{value:state},external_kbnSharedDeps_React_default.a.createElement(EditorActionContext.Provider,{value:dispatch},children))}var useEditorReadContext=create_use_context_createUseContext(EditorReadContext,"EditorReadContext");var useEditorActionContext=create_use_context_createUseContext(EditorActionContext,"EditorActionContext");var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(18);var external_kbnSharedDeps_Lodash_=__webpack_require__(16);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_Moment_=__webpack_require__(25);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var public_=__webpack_require__(26);function subscribeResizeChecker(el){for(var _len=arguments.length,editors=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){editors[_key-1]=arguments[_key]}var checker=new public_["ResizeChecker"](el);checker.on("resize",(function(){return editors.forEach((function(e){if(e.getCoreEditor){e.getCoreEditor().resize()}else{e.resize()}if(e.updateActionsBar){e.updateActionsBar()}}))}));return function(){return checker.destroy()}}var brace=__webpack_require__(29);var brace_default=__webpack_require__.n(brace);var worker_worker="/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* @notice\n *\n * This product includes code that is based on Ace editor, which was available\n * under a \"BSD\" license.\n *\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable */\n/*\n  This file is loaded up as a blob by Brace to hand to Ace to load as Jsonp\n  (hence the redefining of everything).  It is based on the javascript\n  mode from the brace distro.\n*/\n\n(function (window) {\n  function resolveModuleId(id, paths) {\n    for (let testPath = id, tail = ''; testPath;) {\n      let alias = paths[testPath];\n      if ('string' === typeof alias) return alias + tail;\n      if (alias)\n        {return (\n          alias.location.replace(/\\/*$/, '/') +\n          (tail || alias.main || alias.name)\n        );}\n      if (alias === !1) return '';\n      let i = testPath.lastIndexOf('/');\n      if (-1 === i) break;\n      (tail = testPath.substr(i) + tail), (testPath = testPath.slice(0, i));\n    }\n    return id;\n  }\n  if (\n    !(\n      (void 0 !== window.window && window.document) ||\n      (window.acequire && window.define)\n    )\n  ) {\n    window.console ||\n      ((window.console = function () {\n        let msgs = Array.prototype.slice.call(arguments, 0);\n        postMessage({ type: 'log', data: msgs });\n      }),\n        (window.console.error = window.console.warn = window.console.log = window.console.trace =\n        window.console)),\n    (window.window = window),\n    (window.ace = window),\n    (window.onerror = function (message, file, line, col, err) {\n      postMessage({\n        type: 'error',\n        data: {\n          message: message,\n          data: err.data,\n          file: file,\n          line: line,\n          col: col,\n          stack: err.stack,\n        },\n      });\n    }),\n    (window.normalizeModule = function (parentId, moduleName) {\n      if (-1 !== moduleName.indexOf('!')) {\n        let chunks = moduleName.split('!');\n        return (\n          window.normalizeModule(parentId, chunks[0]) +\n            '!' +\n            window.normalizeModule(parentId, chunks[1])\n        );\n      }\n      if ('.' == moduleName.charAt(0)) {\n        let base = parentId\n          .split('/')\n          .slice(0, -1)\n          .join('/');\n        for (\n          moduleName = (base ? base + '/' : '') + moduleName;\n          -1 !== moduleName.indexOf('.') && previous != moduleName;\n\n        ) {\n          var previous = moduleName;\n          moduleName = moduleName\n            .replace(/^\\.\\//, '')\n            .replace(/\\/\\.\\//, '/')\n            .replace(/[^\\/]+\\/\\.\\.\\//, '');\n        }\n      }\n      return moduleName;\n    }),\n    (window.acequire = function acequire(parentId, id) {\n      if ((id || ((id = parentId), (parentId = null)), !id.charAt))\n        {throw Error(\n            'worker.js acequire() accepts only (parentId, id) as arguments'\n          );}\n      id = window.normalizeModule(parentId, id);\n      let module = window.acequire.modules[id];\n      if (module)\n        {return (\n            module.initialized ||\n              ((module.initialized = !0),\n              (module.exports = module.factory().exports)),\n            module.exports\n          );}\n      if (!window.acequire.tlns) return console.log('unable to load ' + id);\n      let path = resolveModuleId(id, window.acequire.tlns);\n      return (\n        '.js' != path.slice(-3) && (path += '.js'),\n        (window.acequire.id = id),\n        (window.acequire.modules[id] = {}),\n        importScripts(path),\n        window.acequire(parentId, id)\n      );\n    }),\n    (window.acequire.modules = {}),\n    (window.acequire.tlns = {}),\n    (window.define = function (id, deps, factory) {\n      if (\n        (2 == arguments.length\n          ? ((factory = deps),\n            'string' !== typeof id && ((deps = id), (id = window.acequire.id)))\n          : 1 == arguments.length &&\n              ((factory = id), (deps = []), (id = window.acequire.id)),\n          'function' !== typeof factory)\n      )\n        {return (\n            (window.acequire.modules[id] = {\n              exports: factory,\n              initialized: !0,\n            }),\n            void 0\n          );}\n      deps.length || (deps = ['require', 'exports', 'module']);\n      let req = function (childId) {\n        return window.acequire(id, childId);\n      };\n      window.acequire.modules[id] = {\n        exports: {},\n        factory: function () {\n          let module = this,\n            returnExports = factory.apply(\n              this,\n              deps.map(function (dep) {\n                switch (dep) {\n                  case 'require':\n                    return req;\n                  case 'exports':\n                    return module.exports;\n                  case 'module':\n                    return module;\n                  default:\n                    return req(dep);\n                }\n              })\n            );\n          return returnExports && (module.exports = returnExports), module;\n        },\n      };\n    }),\n    (window.define.amd = {}),\n    (acequire.tlns = {}),\n    (window.initBaseUrls = function (topLevelNamespaces) {\n      for (let i in topLevelNamespaces)\n        {acequire.tlns[i] = topLevelNamespaces[i];}\n    }),\n    (window.initSender = function () {\n      let EventEmitter = window.acequire('ace/lib/event_emitter')\n          .EventEmitter,\n        oop = window.acequire('ace/lib/oop'),\n        Sender = function () {};\n      return (\n        function () {\n          oop.implement(this, EventEmitter),\n          (this.callback = function (data, callbackId) {\n            postMessage({ type: 'call', id: callbackId, data: data });\n          }),\n          (this.emit = function (name, data) {\n            postMessage({ type: 'event', name: name, data: data });\n          });\n        }.call(Sender.prototype),\n        new Sender()\n      );\n    });\n    let main = (window.main = null),\n      sender = (window.sender = null);\n    window.onmessage = function (e) {\n      let msg = e.data;\n      if (msg.event && sender) sender._signal(msg.event, msg.data);\n      else if (msg.command)\n        {if (main[msg.command]) main[msg.command].apply(main, msg.args);\n        else {\n          if (!window[msg.command])\n            throw Error('Unknown command:' + msg.command);\n          window[msg.command].apply(window, msg.args);\n        }}\n      else if (msg.init) {\n        window.initBaseUrls(msg.tlns),\n        acequire('ace/lib/es5-shim'),\n        (sender = window.sender = window.initSender());\n        let clazz = acequire(msg.module)[msg.classname];\n        main = window.main = new clazz(sender);\n      }\n    };\n  }\n}(this)),\nace.define('ace/lib/oop', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  (exports.inherits = function (ctor, superCtor) {\n    (ctor.super_ = superCtor),\n    (ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0,\n      },\n    }));\n  }),\n  (exports.mixin = function (obj, mixin) {\n    for (let key in mixin) obj[key] = mixin[key];\n    return obj;\n  }),\n  (exports.implement = function (proto, mixin) {\n    exports.mixin(proto, mixin);\n  });\n}),\nace.define('ace/range', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  let comparePoints = function (p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column;\n    },\n    Range = function (startRow, startColumn, endRow, endColumn) {\n      (this.start = { row: startRow, column: startColumn }),\n      (this.end = { row: endRow, column: endColumn });\n    };\n  (function () {\n    (this.isEqual = function (range) {\n      return (\n        this.start.row === range.start.row &&\n          this.end.row === range.end.row &&\n          this.start.column === range.start.column &&\n          this.end.column === range.end.column\n      );\n    }),\n    (this.toString = function () {\n      return (\n        'Range: [' +\n            this.start.row +\n            '/' +\n            this.start.column +\n            '] -> [' +\n            this.end.row +\n            '/' +\n            this.end.column +\n            ']'\n      );\n    }),\n    (this.contains = function (row, column) {\n      return 0 == this.compare(row, column);\n    }),\n    (this.compareRange = function (range) {\n      let cmp,\n        end = range.end,\n        start = range.start;\n      return (\n        (cmp = this.compare(end.row, end.column)),\n        1 == cmp\n          ? ((cmp = this.compare(start.row, start.column)),\n            1 == cmp ? 2 : 0 == cmp ? 1 : 0)\n          : -1 == cmp\n            ? -2\n            : ((cmp = this.compare(start.row, start.column)),\n              -1 == cmp ? -1 : 1 == cmp ? 42 : 0)\n      );\n    }),\n    (this.comparePoint = function (p) {\n      return this.compare(p.row, p.column);\n    }),\n    (this.containsRange = function (range) {\n      return (\n        0 == this.comparePoint(range.start) &&\n            0 == this.comparePoint(range.end)\n      );\n    }),\n    (this.intersects = function (range) {\n      let cmp = this.compareRange(range);\n      return -1 == cmp || 0 == cmp || 1 == cmp;\n    }),\n    (this.isEnd = function (row, column) {\n      return this.end.row == row && this.end.column == column;\n    }),\n    (this.isStart = function (row, column) {\n      return this.start.row == row && this.start.column == column;\n    }),\n    (this.setStart = function (row, column) {\n      'object' === typeof row\n        ? ((this.start.column = row.column), (this.start.row = row.row))\n        : ((this.start.row = row), (this.start.column = column));\n    }),\n    (this.setEnd = function (row, column) {\n      'object' === typeof row\n        ? ((this.end.column = row.column), (this.end.row = row.row))\n        : ((this.end.row = row), (this.end.column = column));\n    }),\n    (this.inside = function (row, column) {\n      return 0 == this.compare(row, column)\n        ? this.isEnd(row, column) || this.isStart(row, column)\n          ? !1\n          : !0\n        : !1;\n    }),\n    (this.insideStart = function (row, column) {\n      return 0 == this.compare(row, column)\n        ? this.isEnd(row, column)\n          ? !1\n          : !0\n        : !1;\n    }),\n    (this.insideEnd = function (row, column) {\n      return 0 == this.compare(row, column)\n        ? this.isStart(row, column)\n          ? !1\n          : !0\n        : !1;\n    }),\n    (this.compare = function (row, column) {\n      return this.isMultiLine() || row !== this.start.row\n        ? this.start.row > row\n          ? -1\n          : row > this.end.row\n            ? 1\n            : this.start.row === row\n              ? column >= this.start.column\n                ? 0\n                : -1\n              : this.end.row === row\n                ? this.end.column >= column\n                  ? 0\n                  : 1\n                : 0\n        : this.start.column > column\n          ? -1\n          : column > this.end.column\n            ? 1\n            : 0;\n    }),\n    (this.compareStart = function (row, column) {\n      return this.start.row == row && this.start.column == column\n        ? -1\n        : this.compare(row, column);\n    }),\n    (this.compareEnd = function (row, column) {\n      return this.end.row == row && this.end.column == column\n        ? 1\n        : this.compare(row, column);\n    }),\n    (this.compareInside = function (row, column) {\n      return this.end.row == row && this.end.column == column\n        ? 1\n        : this.start.row == row && this.start.column == column\n          ? -1\n          : this.compare(row, column);\n    }),\n    (this.clipRows = function (firstRow, lastRow) {\n      if (this.end.row > lastRow) var end = { row: lastRow + 1, column: 0 };\n      else if (firstRow > this.end.row)\n        {var end = { row: firstRow, column: 0 };}\n      if (this.start.row > lastRow)\n        {var start = { row: lastRow + 1, column: 0 };}\n      else if (firstRow > this.start.row)\n        {var start = { row: firstRow, column: 0 };}\n      return Range.fromPoints(start || this.start, end || this.end);\n    }),\n    (this.extend = function (row, column) {\n      let cmp = this.compare(row, column);\n      if (0 == cmp) return this;\n      if (-1 == cmp) var start = { row: row, column: column };\n      else var end = { row: row, column: column };\n      return Range.fromPoints(start || this.start, end || this.end);\n    }),\n    (this.isEmpty = function () {\n      return (\n        this.start.row === this.end.row &&\n            this.start.column === this.end.column\n      );\n    }),\n    (this.isMultiLine = function () {\n      return this.start.row !== this.end.row;\n    }),\n    (this.clone = function () {\n      return Range.fromPoints(this.start, this.end);\n    }),\n    (this.collapseRows = function () {\n      return 0 == this.end.column\n        ? new Range(\n          this.start.row,\n          0,\n          Math.max(this.start.row, this.end.row - 1),\n          0\n        )\n        : new Range(this.start.row, 0, this.end.row, 0);\n    }),\n    (this.toScreenRange = function (session) {\n      let screenPosStart = session.documentToScreenPosition(this.start),\n        screenPosEnd = session.documentToScreenPosition(this.end);\n      return new Range(\n        screenPosStart.row,\n        screenPosStart.column,\n        screenPosEnd.row,\n        screenPosEnd.column\n      );\n    }),\n    (this.moveBy = function (row, column) {\n      (this.start.row += row),\n      (this.start.column += column),\n      (this.end.row += row),\n      (this.end.column += column);\n    });\n  }.call(Range.prototype),\n    (Range.fromPoints = function (start, end) {\n      return new Range(start.row, start.column, end.row, end.column);\n    }),\n    (Range.comparePoints = comparePoints),\n    (Range.comparePoints = function (p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column;\n    }),\n    (exports.Range = Range));\n}),\nace.define('ace/apply_delta', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  exports.applyDelta = function (docLines, delta) {\n    let row = delta.start.row,\n      startColumn = delta.start.column,\n      line = docLines[row] || '';\n    switch (delta.action) {\n      case 'insert':\n        var lines = delta.lines;\n        if (1 === lines.length)\n          {docLines[row] =\n              line.substring(0, startColumn) +\n              delta.lines[0] +\n              line.substring(startColumn);}\n        else {\n          let args = [row, 1].concat(delta.lines);\n          docLines.splice.apply(docLines, args),\n          (docLines[row] = line.substring(0, startColumn) + docLines[row]),\n          (docLines[row + delta.lines.length - 1] += line.substring(\n            startColumn\n          ));\n        }\n        break;\n      case 'remove':\n        var endColumn = delta.end.column,\n          endRow = delta.end.row;\n        row === endRow\n          ? (docLines[row] =\n                line.substring(0, startColumn) + line.substring(endColumn))\n          : docLines.splice(\n            row,\n            endRow - row + 1,\n            line.substring(0, startColumn) +\n                  docLines[endRow].substring(endColumn)\n          );\n    }\n  };\n}),\nace.define(\n  'ace/lib/event_emitter',\n  ['require', 'exports', 'module'],\n  function (acequire, exports) {\n    let EventEmitter = {},\n      stopPropagation = function () {\n        this.propagationStopped = !0;\n      },\n      preventDefault = function () {\n        this.defaultPrevented = !0;\n      };\n    (EventEmitter._emit = EventEmitter._dispatchEvent = function (\n      eventName,\n      e\n    ) {\n      this._eventRegistry || (this._eventRegistry = {}),\n      this._defaultHandlers || (this._defaultHandlers = {});\n      let listeners = this._eventRegistry[eventName] || [],\n        defaultHandler = this._defaultHandlers[eventName];\n      if (listeners.length || defaultHandler) {\n        ('object' === typeof e && e) || (e = {}),\n        e.type || (e.type = eventName),\n        e.stopPropagation || (e.stopPropagation = stopPropagation),\n        e.preventDefault || (e.preventDefault = preventDefault),\n        (listeners = listeners.slice());\n        for (\n          let i = 0;\n          listeners.length > i &&\n            (listeners[i](e, this), !e.propagationStopped);\n          i++\n        );\n        return defaultHandler && !e.defaultPrevented\n          ? defaultHandler(e, this)\n          : void 0;\n      }\n    }),\n    (EventEmitter._signal = function (eventName, e) {\n      let listeners = (this._eventRegistry || {})[eventName];\n      if (listeners) {\n        listeners = listeners.slice();\n        for (let i = 0; listeners.length > i; i++) listeners[i](e, this);\n      }\n    }),\n    (EventEmitter.once = function (eventName, callback) {\n      let _self = this;\n      callback &&\n            this.addEventListener(eventName, function newCallback() {\n              _self.removeEventListener(eventName, newCallback),\n              callback.apply(null, arguments);\n            });\n    }),\n    (EventEmitter.setDefaultHandler = function (eventName, callback) {\n      let handlers = this._defaultHandlers;\n      if (\n        (handlers ||\n              (handlers = this._defaultHandlers = { _disabled_: {} }),\n          handlers[eventName])\n      ) {\n        let old = handlers[eventName],\n          disabled = handlers._disabled_[eventName];\n        disabled || (handlers._disabled_[eventName] = disabled = []),\n        disabled.push(old);\n        let i = disabled.indexOf(callback);\n        -1 != i && disabled.splice(i, 1);\n      }\n      handlers[eventName] = callback;\n    }),\n    (EventEmitter.removeDefaultHandler = function (eventName, callback) {\n      let handlers = this._defaultHandlers;\n      if (handlers) {\n        let disabled = handlers._disabled_[eventName];\n        if (handlers[eventName] == callback)\n          {handlers[eventName],\n                disabled && this.setDefaultHandler(eventName, disabled.pop());}\n        else if (disabled) {\n          let i = disabled.indexOf(callback);\n          -1 != i && disabled.splice(i, 1);\n        }\n      }\n    }),\n    (EventEmitter.on = EventEmitter.addEventListener = function (\n      eventName,\n      callback,\n      capturing\n    ) {\n      this._eventRegistry = this._eventRegistry || {};\n      let listeners = this._eventRegistry[eventName];\n      return (\n        listeners || (listeners = this._eventRegistry[eventName] = []),\n        -1 == listeners.indexOf(callback) &&\n              listeners[capturing ? 'unshift' : 'push'](callback),\n        callback\n      );\n    }),\n    (EventEmitter.off = EventEmitter.removeListener = EventEmitter.removeEventListener = function (\n      eventName,\n      callback\n    ) {\n      this._eventRegistry = this._eventRegistry || {};\n      let listeners = this._eventRegistry[eventName];\n      if (listeners) {\n        let index = listeners.indexOf(callback);\n        -1 !== index && listeners.splice(index, 1);\n      }\n    }),\n    (EventEmitter.removeAllListeners = function (eventName) {\n      this._eventRegistry && (this._eventRegistry[eventName] = []);\n    }),\n    (exports.EventEmitter = EventEmitter);\n  }\n),\nace.define(\n  'ace/anchor',\n  ['require', 'exports', 'module', 'ace/lib/oop', 'ace/lib/event_emitter'],\n  function (acequire, exports) {\n    let oop = acequire('./lib/oop'),\n      EventEmitter = acequire('./lib/event_emitter').EventEmitter,\n      Anchor = (exports.Anchor = function (doc, row, column) {\n        (this.$onChange = this.onChange.bind(this)),\n        this.attach(doc),\n        column === void 0\n          ? this.setPosition(row.row, row.column)\n          : this.setPosition(row, column);\n      });\n    (function () {\n      function $pointsInOrder(point1, point2, equalPointsInOrder) {\n        let bColIsAfter = equalPointsInOrder\n          ? point1.column <= point2.column\n          : point1.column < point2.column;\n        return (\n          point1.row < point2.row || (point1.row == point2.row && bColIsAfter)\n        );\n      }\n      function $getTransformedPoint(delta, point, moveIfEqual) {\n        let deltaIsInsert = 'insert' == delta.action,\n          deltaRowShift =\n              (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row),\n          deltaColShift =\n              (deltaIsInsert ? 1 : -1) *\n              (delta.end.column - delta.start.column),\n          deltaStart = delta.start,\n          deltaEnd = deltaIsInsert ? deltaStart : delta.end;\n        return $pointsInOrder(point, deltaStart, moveIfEqual)\n          ? { row: point.row, column: point.column }\n          : $pointsInOrder(deltaEnd, point, !moveIfEqual)\n            ? {\n              row: point.row + deltaRowShift,\n              column:\n                    point.column +\n                    (point.row == deltaEnd.row ? deltaColShift : 0),\n            }\n            : { row: deltaStart.row, column: deltaStart.column };\n      }\n      oop.implement(this, EventEmitter),\n      (this.getPosition = function () {\n        return this.$clipPositionToDocument(this.row, this.column);\n      }),\n      (this.getDocument = function () {\n        return this.document;\n      }),\n      (this.$insertRight = !1),\n      (this.onChange = function (delta) {\n        if (\n          !(\n            (delta.start.row == delta.end.row &&\n                  delta.start.row != this.row) ||\n                delta.start.row > this.row\n          )\n        ) {\n          let point = $getTransformedPoint(\n            delta,\n            { row: this.row, column: this.column },\n            this.$insertRight\n          );\n          this.setPosition(point.row, point.column, !0);\n        }\n      }),\n      (this.setPosition = function (row, column, noClip) {\n        let pos;\n        if (\n          ((pos = noClip\n            ? { row: row, column: column }\n            : this.$clipPositionToDocument(row, column)),\n            this.row != pos.row || this.column != pos.column)\n        ) {\n          let old = { row: this.row, column: this.column };\n          (this.row = pos.row),\n          (this.column = pos.column),\n          this._signal('change', { old: old, value: pos });\n        }\n      }),\n      (this.detach = function () {\n        this.document.removeEventListener('change', this.$onChange);\n      }),\n      (this.attach = function (doc) {\n        (this.document = doc || this.document),\n        this.document.on('change', this.$onChange);\n      }),\n      (this.$clipPositionToDocument = function (row, column) {\n        let pos = {};\n        return (\n          row >= this.document.getLength()\n            ? ((pos.row = Math.max(0, this.document.getLength() - 1)),\n              (pos.column = this.document.getLine(pos.row).length))\n            : 0 > row\n              ? ((pos.row = 0), (pos.column = 0))\n              : ((pos.row = row),\n                (pos.column = Math.min(\n                  this.document.getLine(pos.row).length,\n                  Math.max(0, column)\n                ))),\n          0 > column && (pos.column = 0),\n          pos\n        );\n      });\n    }.call(Anchor.prototype));\n  }\n),\nace.define(\n  'ace/document',\n  [\n    'require',\n    'exports',\n    'module',\n    'ace/lib/oop',\n    'ace/apply_delta',\n    'ace/lib/event_emitter',\n    'ace/range',\n    'ace/anchor',\n  ],\n  function (acequire, exports) {\n    let oop = acequire('./lib/oop'),\n      applyDelta = acequire('./apply_delta').applyDelta,\n      EventEmitter = acequire('./lib/event_emitter').EventEmitter,\n      Range = acequire('./range').Range,\n      Anchor = acequire('./anchor').Anchor,\n      Document = function (textOrLines) {\n        (this.$lines = ['']),\n        0 === textOrLines.length\n          ? (this.$lines = [''])\n          : Array.isArray(textOrLines)\n            ? this.insertMergedLines({ row: 0, column: 0 }, textOrLines)\n            : this.insert({ row: 0, column: 0 }, textOrLines);\n      };\n    (function () {\n      oop.implement(this, EventEmitter),\n      (this.setValue = function (text) {\n        let len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length)),\n        this.insert({ row: 0, column: 0 }, text);\n      }),\n      (this.getValue = function () {\n        return this.getAllLines().join(this.getNewLineCharacter());\n      }),\n      (this.createAnchor = function (row, column) {\n        return new Anchor(this, row, column);\n      }),\n      (this.$split =\n            0 === 'aaa'.split(/a/).length\n              ? function (text) {\n                return text.replace(/\\r\\n|\\r/g, '\\n').split('\\n');\n              }\n              : function (text) {\n                return text.split(/\\r\\n|\\r|\\n/);\n              }),\n      (this.$detectNewLine = function (text) {\n        let match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        (this.$autoNewLine = match ? match[1] : '\\n'),\n        this._signal('changeNewLineMode');\n      }),\n      (this.getNewLineCharacter = function () {\n        switch (this.$newLineMode) {\n          case 'windows':\n            return '\\r\\n';\n          case 'unix':\n            return '\\n';\n          default:\n            return this.$autoNewLine || '\\n';\n        }\n      }),\n      (this.$autoNewLine = ''),\n      (this.$newLineMode = 'auto'),\n      (this.setNewLineMode = function (newLineMode) {\n        this.$newLineMode !== newLineMode &&\n              ((this.$newLineMode = newLineMode),\n                this._signal('changeNewLineMode'));\n      }),\n      (this.getNewLineMode = function () {\n        return this.$newLineMode;\n      }),\n      (this.isNewLine = function (text) {\n        return '\\r\\n' == text || '\\r' == text || '\\n' == text;\n      }),\n      (this.getLine = function (row) {\n        return this.$lines[row] || '';\n      }),\n      (this.getLines = function (firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n      }),\n      (this.getAllLines = function () {\n        return this.getLines(0, this.getLength());\n      }),\n      (this.getLength = function () {\n        return this.$lines.length;\n      }),\n      (this.getTextRange = function (range) {\n        return this.getLinesForRange(range).join(\n          this.getNewLineCharacter()\n        );\n      }),\n      (this.getLinesForRange = function (range) {\n        let lines;\n        if (range.start.row === range.end.row)\n          {lines = [\n                this.getLine(range.start.row).substring(\n                  range.start.column,\n                  range.end.column\n                ),\n              ];}\n        else {\n          (lines = this.getLines(range.start.row, range.end.row)),\n          (lines[0] = (lines[0] || '').substring(range.start.column));\n          let l = lines.length - 1;\n          range.end.row - range.start.row == l &&\n                (lines[l] = lines[l].substring(0, range.end.column));\n        }\n        return lines;\n      }),\n      (this.insertLines = function (row, lines) {\n        return (\n          console.warn(\n            'Use of document.insertLines is deprecated. Use the insertFullLines method instead.'\n          ),\n          this.insertFullLines(row, lines)\n        );\n      }),\n      (this.removeLines = function (firstRow, lastRow) {\n        return (\n          console.warn(\n            'Use of document.removeLines is deprecated. Use the removeFullLines method instead.'\n          ),\n          this.removeFullLines(firstRow, lastRow)\n        );\n      }),\n      (this.insertNewLine = function (position) {\n        return (\n          console.warn(\n            'Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\\'\\', \\'\\']) instead.'\n          ),\n          this.insertMergedLines(position, ['', ''])\n        );\n      }),\n      (this.insert = function (position, text) {\n        return (\n          1 >= this.getLength() && this.$detectNewLine(text),\n          this.insertMergedLines(position, this.$split(text))\n        );\n      }),\n      (this.insertInLine = function (position, text) {\n        let start = this.clippedPos(position.row, position.column),\n          end = this.pos(position.row, position.column + text.length);\n        return (\n          this.applyDelta(\n            { start: start, end: end, action: 'insert', lines: [text] },\n            !0\n          ),\n          this.clonePos(end)\n        );\n      }),\n      (this.clippedPos = function (row, column) {\n        let length = this.getLength();\n        void 0 === row\n          ? (row = length)\n          : 0 > row\n            ? (row = 0)\n            : row >= length && ((row = length - 1), (column = void 0));\n        let line = this.getLine(row);\n        return (\n          void 0 == column && (column = line.length),\n          (column = Math.min(Math.max(column, 0), line.length)),\n          { row: row, column: column }\n        );\n      }),\n      (this.clonePos = function (pos) {\n        return { row: pos.row, column: pos.column };\n      }),\n      (this.pos = function (row, column) {\n        return { row: row, column: column };\n      }),\n      (this.$clipPosition = function (position) {\n        let length = this.getLength();\n        return (\n          position.row >= length\n            ? ((position.row = Math.max(0, length - 1)),\n              (position.column = this.getLine(length - 1).length))\n            : ((position.row = Math.max(0, position.row)),\n              (position.column = Math.min(\n                Math.max(position.column, 0),\n                this.getLine(position.row).length\n              ))),\n          position\n        );\n      }),\n      (this.insertFullLines = function (row, lines) {\n        row = Math.min(Math.max(row, 0), this.getLength());\n        let column = 0;\n        this.getLength() > row\n          ? ((lines = lines.concat([''])), (column = 0))\n          : ((lines = [''].concat(lines)),\n            row--,\n            (column = this.$lines[row].length)),\n        this.insertMergedLines({ row: row, column: column }, lines);\n      }),\n      (this.insertMergedLines = function (position, lines) {\n        let start = this.clippedPos(position.row, position.column),\n          end = {\n            row: start.row + lines.length - 1,\n            column:\n                  (1 == lines.length ? start.column : 0) +\n                  lines[lines.length - 1].length,\n          };\n        return (\n          this.applyDelta({\n            start: start,\n            end: end,\n            action: 'insert',\n            lines: lines,\n          }),\n          this.clonePos(end)\n        );\n      }),\n      (this.remove = function (range) {\n        let start = this.clippedPos(range.start.row, range.start.column),\n          end = this.clippedPos(range.end.row, range.end.column);\n        return (\n          this.applyDelta({\n            start: start,\n            end: end,\n            action: 'remove',\n            lines: this.getLinesForRange({ start: start, end: end }),\n          }),\n          this.clonePos(start)\n        );\n      }),\n      (this.removeInLine = function (row, startColumn, endColumn) {\n        let start = this.clippedPos(row, startColumn),\n          end = this.clippedPos(row, endColumn);\n        return (\n          this.applyDelta(\n            {\n              start: start,\n              end: end,\n              action: 'remove',\n              lines: this.getLinesForRange({ start: start, end: end }),\n            },\n            !0\n          ),\n          this.clonePos(start)\n        );\n      }),\n      (this.removeFullLines = function (firstRow, lastRow) {\n        (firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1)),\n        (lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1));\n        let deleteFirstNewLine =\n                lastRow == this.getLength() - 1 && firstRow > 0,\n          deleteLastNewLine = this.getLength() - 1 > lastRow,\n          startRow = deleteFirstNewLine ? firstRow - 1 : firstRow,\n          startCol = deleteFirstNewLine ? this.getLine(startRow).length : 0,\n          endRow = deleteLastNewLine ? lastRow + 1 : lastRow,\n          endCol = deleteLastNewLine ? 0 : this.getLine(endRow).length,\n          range = new Range(startRow, startCol, endRow, endCol),\n          deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n        return (\n          this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: 'remove',\n            lines: this.getLinesForRange(range),\n          }),\n          deletedLines\n        );\n      }),\n      (this.removeNewLine = function (row) {\n        this.getLength() - 1 > row &&\n              row >= 0 &&\n              this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: 'remove',\n                lines: ['', ''],\n              });\n      }),\n      (this.replace = function (range, text) {\n        if (\n          (range instanceof Range ||\n                (range = Range.fromPoints(range.start, range.end)),\n            0 === text.length && range.isEmpty())\n        )\n          {return range.start;}\n        if (text == this.getTextRange(range)) return range.end;\n        this.remove(range);\n        let end;\n        return (end = text ? this.insert(range.start, text) : range.start);\n      }),\n      (this.applyDeltas = function (deltas) {\n        for (let i = 0; deltas.length > i; i++) this.applyDelta(deltas[i]);\n      }),\n      (this.revertDeltas = function (deltas) {\n        for (let i = deltas.length - 1; i >= 0; i--)\n          {this.revertDelta(deltas[i]);}\n      }),\n      (this.applyDelta = function (delta, doNotValidate) {\n        let isInsert = 'insert' == delta.action;\n        (isInsert\n          ? 1 >= delta.lines.length && !delta.lines[0]\n          : !Range.comparePoints(delta.start, delta.end)) ||\n              (isInsert &&\n                delta.lines.length > 2e4 &&\n                this.$splitAndapplyLargeDelta(delta, 2e4),\n                applyDelta(this.$lines, delta, doNotValidate),\n                this._signal('change', delta));\n      }),\n      (this.$splitAndapplyLargeDelta = function (delta, MAX) {\n        for (\n          let lines = delta.lines,\n            l = lines.length,\n            row = delta.start.row,\n            column = delta.start.column,\n            from = 0,\n            to = 0;\n          ;\n\n        ) {\n          (from = to), (to += MAX - 1);\n          let chunk = lines.slice(from, to);\n          if (to > l) {\n            (delta.lines = chunk),\n            (delta.start.row = row + from),\n            (delta.start.column = column);\n            break;\n          }\n          chunk.push(''),\n          this.applyDelta(\n            {\n              start: this.pos(row + from, column),\n              end: this.pos(row + to, (column = 0)),\n              action: delta.action,\n              lines: chunk,\n            },\n            !0\n          );\n        }\n      }),\n      (this.revertDelta = function (delta) {\n        this.applyDelta({\n          start: this.clonePos(delta.start),\n          end: this.clonePos(delta.end),\n          action: 'insert' == delta.action ? 'remove' : 'insert',\n          lines: delta.lines.slice(),\n        });\n      }),\n      (this.indexToPosition = function (index, startRow) {\n        for (\n          var lines = this.$lines || this.getAllLines(),\n            newlineLength = this.getNewLineCharacter().length,\n            i = startRow || 0,\n            l = lines.length;\n          l > i;\n          i++\n        )\n          {if (((index -= lines[i].length + newlineLength), 0 > index))\n                return {\n                  row: i,\n                  column: index + lines[i].length + newlineLength,\n                };}\n        return { row: l - 1, column: lines[l - 1].length };\n      }),\n      (this.positionToIndex = function (pos, startRow) {\n        for (\n          var lines = this.$lines || this.getAllLines(),\n            newlineLength = this.getNewLineCharacter().length,\n            index = 0,\n            row = Math.min(pos.row, lines.length),\n            i = startRow || 0;\n          row > i;\n          ++i\n        )\n          {index += lines[i].length + newlineLength;}\n        return index + pos.column;\n      });\n    }.call(Document.prototype),\n      (exports.Document = Document));\n  }\n),\nace.define('ace/lib/lang', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  (exports.last = function (a) {\n    return a[a.length - 1];\n  }),\n  (exports.stringReverse = function (string) {\n    return string\n      .split('')\n      .reverse()\n      .join('');\n  }),\n  (exports.stringRepeat = function (string, count) {\n    for (var result = ''; count > 0;)\n      {1 & count && (result += string), (count >>= 1) && (string += string);}\n    return result;\n  });\n  let trimBeginRegexp = /^\\s\\s*/,\n    trimEndRegexp = /\\s\\s*$/;\n  (exports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n  }),\n  (exports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n  }),\n  (exports.copyObject = function (obj) {\n    let copy = {};\n    for (let key in obj) copy[key] = obj[key];\n    return copy;\n  }),\n  (exports.copyArray = function (array) {\n    for (var copy = [], i = 0, l = array.length; l > i; i++)\n      {copy[i] =\n            array[i] && 'object' == typeof array[i]\n              ? this.copyObject(array[i])\n              : array[i];}\n    return copy;\n  }),\n  (exports.deepCopy = function deepCopy(obj) {\n    if ('object' !== typeof obj || !obj) return obj;\n    let copy;\n    if (Array.isArray(obj)) {\n      copy = [];\n      for (var key = 0; obj.length > key; key++)\n        {copy[key] = deepCopy(obj[key]);}\n      return copy;\n    }\n    if ('[object Object]' !== Object.prototype.toString.call(obj))\n      {return obj;}\n    copy = {};\n    for (var key in obj) copy[key] = deepCopy(obj[key]);\n    return copy;\n  }),\n  (exports.arrayToMap = function (arr) {\n    for (var map = {}, i = 0; arr.length > i; i++) map[arr[i]] = 1;\n    return map;\n  }),\n  (exports.createMap = function (props) {\n    let map = Object.create(null);\n    for (let i in props) map[i] = props[i];\n    return map;\n  }),\n  (exports.arrayRemove = function (array, value) {\n    for (let i = 0; array.length >= i; i++)\n      {value === array[i] && array.splice(i, 1);}\n  }),\n  (exports.escapeRegExp = function (str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n  }),\n  (exports.escapeHTML = function (str) {\n    return str\n      .replace(/&/g, '&#38;')\n      .replace(/\"/g, '&#34;')\n      .replace(/'/g, '&#39;')\n      .replace(/</g, '&#60;');\n  }),\n  (exports.getMatchOffsets = function (string, regExp) {\n    let matches = [];\n    return (\n      string.replace(regExp, function (str) {\n        matches.push({\n          offset: arguments[arguments.length - 2],\n          length: str.length,\n        });\n      }),\n      matches\n    );\n  }),\n  (exports.deferredCall = function (fcn) {\n    var timer = null,\n      callback = function () {\n        (timer = null), fcn();\n      },\n      deferred = function (timeout) {\n        return (\n          deferred.cancel(),\n          (timer = setTimeout(callback, timeout || 0)),\n          deferred\n        );\n      };\n    return (\n      (deferred.schedule = deferred),\n      (deferred.call = function () {\n        return this.cancel(), fcn(), deferred;\n      }),\n      (deferred.cancel = function () {\n        return clearTimeout(timer), (timer = null), deferred;\n      }),\n      (deferred.isPending = function () {\n        return timer;\n      }),\n      deferred\n    );\n  }),\n  (exports.delayedCall = function (fcn, defaultTimeout) {\n    let timer = null,\n      callback = function () {\n        (timer = null), fcn();\n      },\n      _self = function (timeout) {\n        null == timer &&\n              (timer = setTimeout(callback, timeout || defaultTimeout));\n      };\n    return (\n      (_self.delay = function (timeout) {\n        timer && clearTimeout(timer),\n        (timer = setTimeout(callback, timeout || defaultTimeout));\n      }),\n      (_self.schedule = _self),\n      (_self.call = function () {\n        this.cancel(), fcn();\n      }),\n      (_self.cancel = function () {\n        timer && clearTimeout(timer), (timer = null);\n      }),\n      (_self.isPending = function () {\n        return timer;\n      }),\n      _self\n    );\n  });\n}),\nace.define(\n  'ace/worker/mirror',\n  [\n    'require',\n    'exports',\n    'module',\n    'ace/range',\n    'ace/document',\n    'ace/lib/lang',\n  ],\n  function (acequire, exports) {\n    acequire('../range').Range;\n    let Document = acequire('../document').Document,\n      lang = acequire('../lib/lang'),\n      Mirror = (exports.Mirror = function (sender) {\n        this.sender = sender;\n        let doc = (this.doc = new Document('')),\n          deferredUpdate = (this.deferredUpdate = lang.delayedCall(\n            this.onUpdate.bind(this)\n          )),\n          _self = this;\n        sender.on('change', function (e) {\n          let data = e.data;\n          if (data[0].start) doc.applyDeltas(data);\n          else\n            {for (var i = 0; data.length > i; i += 2) {\n                if (Array.isArray(data[i + 1]))\n                  var d = {\n                    action: 'insert',\n                    start: data[i],\n                    lines: data[i + 1],\n                  };\n                else\n                  var d = {\n                    action: 'remove',\n                    start: data[i],\n                    end: data[i + 1],\n                  };\n                doc.applyDelta(d, !0);\n              }}\n          return _self.$timeout\n            ? deferredUpdate.schedule(_self.$timeout)\n            : (_self.onUpdate(), void 0);\n        });\n      });\n    (function () {\n      (this.$timeout = 500),\n      (this.setTimeout = function (timeout) {\n        this.$timeout = timeout;\n      }),\n      (this.setValue = function (value) {\n        this.doc.setValue(value),\n        this.deferredUpdate.schedule(this.$timeout);\n      }),\n      (this.getValue = function (callbackId) {\n        this.sender.callback(this.doc.getValue(), callbackId);\n      }),\n      (this.onUpdate = function () {}),\n      (this.isPending = function () {\n        return this.deferredUpdate.isPending();\n      });\n    }.call(Mirror.prototype));\n  }\n),\nace.define('ace/lib/es5-shim', ['require', 'exports', 'module'], function () {\n  function Empty() {}\n  function doesDefinePropertyWork(object) {\n    try {\n      return (\n        Object.defineProperty(object, 'sentinel', {}), 'sentinel' in object\n      );\n    } catch (exception) {}\n  }\n  function toInteger(n) {\n    return (\n      (n = +n),\n      n !== n\n        ? (n = 0)\n        : 0 !== n &&\n            n !== 1 / 0 &&\n            n !== -(1 / 0) &&\n            (n = (n > 0 || -1) * Math.floor(Math.abs(n))),\n      n\n    );\n  }\n  Function.prototype.bind ||\n      (Function.prototype.bind = function (that) {\n        let target = this;\n        if ('function' !== typeof target)\n          {throw new TypeError(\n            'Function.prototype.bind called on incompatible ' + target\n          );}\n        var args = slice.call(arguments, 1),\n          bound = function () {\n            if (this instanceof bound) {\n              let result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n              );\n              return Object(result) === result ? result : this;\n            }\n            return target.apply(that, args.concat(slice.call(arguments)));\n          };\n        return (\n          target.prototype &&\n            ((Empty.prototype = target.prototype),\n              (bound.prototype = new Empty()),\n              (Empty.prototype = null)),\n          bound\n        );\n      });\n  var defineGetter,\n    defineSetter,\n    lookupGetter,\n    lookupSetter,\n    supportsAccessors,\n    call = Function.prototype.call,\n    prototypeOfArray = Array.prototype,\n    prototypeOfObject = Object.prototype,\n    slice = prototypeOfArray.slice,\n    _toString = call.bind(prototypeOfObject.toString),\n    owns = call.bind(prototypeOfObject.hasOwnProperty);\n  if (\n    ((supportsAccessors = owns(prototypeOfObject, '__defineGetter__')) &&\n        ((defineGetter = call.bind(prototypeOfObject.__defineGetter__)),\n          (defineSetter = call.bind(prototypeOfObject.__defineSetter__)),\n          (lookupGetter = call.bind(prototypeOfObject.__lookupGetter__)),\n          (lookupSetter = call.bind(prototypeOfObject.__lookupSetter__))),\n      2 != [1, 2].splice(0).length)\n  )\n    {if (\n        (function() {\n          function makeArray(l) {\n            var a = Array(l + 2);\n            return (a[0] = a[1] = 0), a;\n          }\n          var lengthBefore,\n            array = [];\n          return (\n            array.splice.apply(array, makeArray(20)),\n            array.splice.apply(array, makeArray(26)),\n            (lengthBefore = array.length),\n            array.splice(5, 0, 'XXX'),\n            lengthBefore + 1 == array.length,\n            lengthBefore + 1 == array.length ? !0 : void 0\n          );\n        })()\n      ) {\n        var array_splice = Array.prototype.splice;\n        Array.prototype.splice = function(start, deleteCount) {\n          return arguments.length\n            ? array_splice.apply(\n                this,\n                [\n                  void 0 === start ? 0 : start,\n                  void 0 === deleteCount ? this.length - start : deleteCount,\n                ].concat(slice.call(arguments, 2))\n              )\n            : [];\n        };\n      } else\n        Array.prototype.splice = function(pos, removeCount) {\n          var length = this.length;\n          pos > 0\n            ? pos > length && (pos = length)\n            : void 0 == pos\n              ? (pos = 0)\n              : 0 > pos && (pos = Math.max(length + pos, 0)),\n            length > pos + removeCount || (removeCount = length - pos);\n          var removed = this.slice(pos, pos + removeCount),\n            insert = slice.call(arguments, 2),\n            add = insert.length;\n          if (pos === length) add && this.push.apply(this, insert);\n          else {\n            var remove = Math.min(removeCount, length - pos),\n              tailOldPos = pos + remove,\n              tailNewPos = tailOldPos + add - remove,\n              tailCount = length - tailOldPos,\n              lengthAfterRemove = length - remove;\n            if (tailOldPos > tailNewPos)\n              for (var i = 0; tailCount > i; ++i)\n                this[tailNewPos + i] = this[tailOldPos + i];\n            else if (tailNewPos > tailOldPos)\n              for (i = tailCount; i--; )\n                this[tailNewPos + i] = this[tailOldPos + i];\n            if (add && pos === lengthAfterRemove)\n              (this.length = lengthAfterRemove), this.push.apply(this, insert);\n            else\n              for (this.length = lengthAfterRemove + add, i = 0; add > i; ++i)\n                this[pos + i] = insert[i];\n          }\n          return removed;\n        };}\n  Array.isArray ||\n      (Array.isArray = function (obj) {\n        return '[object Array]' == _toString(obj);\n      });\n  let boxedString = Object('a'),\n    splitString = 'a' != boxedString[0] || !(0 in boxedString);\n  if (\n    (Array.prototype.forEach ||\n        (Array.prototype.forEach = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            thisp = arguments[1],\n            i = -1,\n            length = self.length >>> 0;\n          if ('[object Function]' != _toString(fun)) throw new TypeError();\n          for (; length > ++i;)\n            {i in self && fun.call(thisp, self[i], i, object);}\n        }),\n      Array.prototype.map ||\n        (Array.prototype.map = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            result = Array(length),\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {i in self && (result[i] = fun.call(thisp, self[i], i, object));}\n          return result;\n        }),\n      Array.prototype.filter ||\n        (Array.prototype.filter = function (fun) {\n          let value,\n            object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            result = [],\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {i in self &&\n              ((value = self[i]),\n              fun.call(thisp, value, i, object) && result.push(value));}\n          return result;\n        }),\n      Array.prototype.every ||\n        (Array.prototype.every = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {if (i in self && !fun.call(thisp, self[i], i, object)) return !1;}\n          return !0;\n        }),\n      Array.prototype.some ||\n        (Array.prototype.some = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {if (i in self && fun.call(thisp, self[i], i, object)) return !0;}\n          return !1;\n        }),\n      Array.prototype.reduce ||\n        (Array.prototype.reduce = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0;\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          if (!length && 1 == arguments.length)\n            {throw new TypeError('reduce of empty array with no initial value');}\n          let result,\n            i = 0;\n          if (arguments.length >= 2) result = arguments[1];\n          else\n            {for (;;) {\n              if (i in self) {\n                result = self[i++];\n                break;\n              }\n              if (++i >= length)\n                throw new TypeError(\n                  'reduce of empty array with no initial value'\n                );\n            }}\n          for (; length > i; i++)\n            {i in self &&\n              (result = fun.call(void 0, result, self[i], i, object));}\n          return result;\n        }),\n      Array.prototype.reduceRight ||\n        (Array.prototype.reduceRight = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0;\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          if (!length && 1 == arguments.length)\n            {throw new TypeError(\n              'reduceRight of empty array with no initial value'\n            );}\n          let result,\n            i = length - 1;\n          if (arguments.length >= 2) result = arguments[1];\n          else\n            {for (;;) {\n              if (i in self) {\n                result = self[i--];\n                break;\n              }\n              if (0 > --i)\n                throw new TypeError(\n                  'reduceRight of empty array with no initial value'\n                );\n            }}\n          do\n            {i in this &&\n              (result = fun.call(void 0, result, self[i], i, object));}\n          while (i--);\n          return result;\n        }),\n      (Array.prototype.indexOf && -1 == [0, 1].indexOf(1, 2)) ||\n        (Array.prototype.indexOf = function (sought) {\n          let self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : toObject(this),\n            length = self.length >>> 0;\n          if (!length) return -1;\n          let i = 0;\n          for (\n            arguments.length > 1 && (i = toInteger(arguments[1])),\n            i = i >= 0 ? i : Math.max(0, length + i);\n            length > i;\n            i++\n          )\n            {if (i in self && self[i] === sought) return i;}\n          return -1;\n        }),\n      (Array.prototype.lastIndexOf && -1 == [0, 1].lastIndexOf(0, -3)) ||\n        (Array.prototype.lastIndexOf = function (sought) {\n          let self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : toObject(this),\n            length = self.length >>> 0;\n          if (!length) return -1;\n          let i = length - 1;\n          for (\n            arguments.length > 1 && (i = Math.min(i, toInteger(arguments[1]))),\n            i = i >= 0 ? i : length - Math.abs(i);\n            i >= 0;\n            i--\n          )\n            {if (i in self && sought === self[i]) return i;}\n          return -1;\n        }),\n      Object.getPrototypeOf ||\n        (Object.getPrototypeOf = function (object) {\n          return (\n            object.__proto__ ||\n            (object.constructor\n              ? object.constructor.prototype\n              : prototypeOfObject)\n          );\n        }),\n      !Object.getOwnPropertyDescriptor)\n  ) {\n    let ERR_NON_OBJECT =\n        'Object.getOwnPropertyDescriptor called on a non-object: ';\n    Object.getOwnPropertyDescriptor = function (object, property) {\n      if (\n        ('object' !== typeof object && 'function' !== typeof object) ||\n          null === object\n      )\n        {throw new TypeError(ERR_NON_OBJECT + object);}\n      if (owns(object, property)) {\n        var descriptor, getter, setter;\n        if (\n          ((descriptor = { enumerable: !0, configurable: !0 }),\n            supportsAccessors)\n        ) {\n          let prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject;\n          var getter = lookupGetter(object, property),\n            setter = lookupSetter(object, property);\n          if (((object.__proto__ = prototype), getter || setter))\n            {return (\n                getter && (descriptor.get = getter),\n                setter && (descriptor.set = setter),\n                descriptor\n              );}\n        }\n        return (descriptor.value = object[property]), descriptor;\n      }\n    };\n  }\n  if (\n    (Object.getOwnPropertyNames ||\n        (Object.getOwnPropertyNames = function (object) {\n          return Object.keys(object);\n        }),\n      !Object.create)\n  ) {\n    let createEmpty;\n    (createEmpty =\n        null === Object.prototype.__proto__\n          ? function () {\n            return { __proto__: null };\n          }\n          : function () {\n            let empty = {};\n            for (let i in empty) empty[i] = null;\n            return (\n              (empty.constructor = empty.hasOwnProperty = empty.propertyIsEnumerable = empty.isPrototypeOf = empty.toLocaleString = empty.toString = empty.valueOf = empty.__proto__ = null),\n              empty\n            );\n          }),\n    (Object.create = function (prototype, properties) {\n      let object;\n      if (null === prototype) object = createEmpty();\n      else {\n        if ('object' !== typeof prototype)\n          {throw new TypeError(\n                'typeof prototype[' + typeof prototype + \"] != 'object'\"\n              );}\n        let Type = function () {};\n        (Type.prototype = prototype),\n        (object = new Type()),\n        (object.__proto__ = prototype);\n      }\n      return (\n        void 0 !== properties &&\n              Object.defineProperties(object, properties),\n        object\n      );\n    });\n  }\n  if (Object.defineProperty) {\n    let definePropertyWorksOnObject = doesDefinePropertyWork({}),\n      definePropertyWorksOnDom =\n          'undefined' === typeof document ||\n          doesDefinePropertyWork(document.createElement('div'));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom)\n      {var definePropertyFallback = Object.defineProperty;}\n  }\n  if (!Object.defineProperty || definePropertyFallback) {\n    let ERR_NON_OBJECT_DESCRIPTOR =\n          'Property description must be an object: ',\n      ERR_NON_OBJECT_TARGET = 'Object.defineProperty called on non-object: ',\n      ERR_ACCESSORS_NOT_SUPPORTED =\n          'getters & setters can not be defined on this javascript engine';\n    Object.defineProperty = function (object, property, descriptor) {\n      if (\n        ('object' !== typeof object && 'function' !== typeof object) ||\n          null === object\n      )\n        {throw new TypeError(ERR_NON_OBJECT_TARGET + object);}\n      if (\n        ('object' !== typeof descriptor && 'function' !== typeof descriptor) ||\n          null === descriptor\n      )\n        {throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);}\n      if (definePropertyFallback)\n        {try {\n            return definePropertyFallback.call(\n              Object,\n              object,\n              property,\n              descriptor\n            );\n          } catch (exception) {}}\n      if (owns(descriptor, 'value'))\n        {if (\n            supportsAccessors &&\n            (lookupGetter(object, property) || lookupSetter(object, property))\n          ) {\n            var prototype = object.__proto__;\n            (object.__proto__ = prototypeOfObject),\n              delete object[property],\n              (object[property] = descriptor.value),\n              (object.__proto__ = prototype);\n          } else object[property] = descriptor.value;}\n      else {\n        if (!supportsAccessors)\n          {throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);}\n        owns(descriptor, 'get') &&\n            defineGetter(object, property, descriptor.get),\n        owns(descriptor, 'set') &&\n              defineSetter(object, property, descriptor.set);\n      }\n      return object;\n    };\n  }\n  Object.defineProperties ||\n      (Object.defineProperties = function (object, properties) {\n        for (let property in properties)\n          {owns(properties, property) &&\n            Object.defineProperty(object, property, properties[property]);}\n        return object;\n      }),\n  Object.seal ||\n        (Object.seal = function (object) {\n          return object;\n        }),\n  Object.freeze ||\n        (Object.freeze = function (object) {\n          return object;\n        });\n  try {\n    Object.freeze(function () {});\n  } catch (exception) {\n    Object.freeze = (function (freezeObject) {\n      return function (object) {\n        return 'function' === typeof object ? object : freezeObject(object);\n      };\n    }(Object.freeze));\n  }\n  if (\n    (Object.preventExtensions ||\n        (Object.preventExtensions = function (object) {\n          return object;\n        }),\n      Object.isSealed ||\n        (Object.isSealed = function () {\n          return !1;\n        }),\n      Object.isFrozen ||\n        (Object.isFrozen = function () {\n          return !1;\n        }),\n      Object.isExtensible ||\n        (Object.isExtensible = function (object) {\n          if (Object(object) === object) throw new TypeError();\n          for (var name = ''; owns(object, name);) name += '?';\n          object[name] = !0;\n          let returnValue = owns(object, name);\n          return delete object[name], returnValue;\n        }),\n      !Object.keys)\n  ) {\n    let hasDontEnumBug = !0,\n      dontEnums = [\n        'toString',\n        'toLocaleString',\n        'valueOf',\n        'hasOwnProperty',\n        'isPrototypeOf',\n        'propertyIsEnumerable',\n        'constructor',\n      ],\n      dontEnumsLength = dontEnums.length;\n    for (let key in { toString: null }) hasDontEnumBug = !1;\n    Object.keys = function (object) {\n      if (\n        ('object' !== typeof object && 'function' !== typeof object) ||\n          null === object\n      )\n        {throw new TypeError('Object.keys called on a non-object');}\n      let keys = [];\n      for (let name in object) owns(object, name) && keys.push(name);\n      if (hasDontEnumBug)\n        {for (var i = 0, ii = dontEnumsLength; ii > i; i++) {\n            var dontEnum = dontEnums[i];\n            owns(object, dontEnum) && keys.push(dontEnum);\n          }}\n      return keys;\n    };\n  }\n  Date.now ||\n      (Date.now = function () {\n        return new Date().getTime();\n      });\n  let ws = '\t\\nv\\f\\r   ᠎             　\\u2028\\u2029\ufeff';\n  if (!String.prototype.trim || ws.trim()) {\n    ws = '[' + ws + ']';\n    let trimBeginRegexp = RegExp('^' + ws + ws + '*'),\n      trimEndRegexp = RegExp(ws + ws + '*$');\n    String.prototype.trim = function () {\n      return (this + '')\n        .replace(trimBeginRegexp, '')\n        .replace(trimEndRegexp, '');\n    };\n  }\n  var toObject = function (o) {\n    if (null == o) throw new TypeError('can\\'t convert ' + o + ' to object');\n    return Object(o);\n  };\n});\nace.define(\n  'sense_editor/mode/worker_parser',\n  ['require', 'exports', 'module'],\n  function () {\n    let at, // The index of the current character\n      ch, // The current character\n      annos, // annotations\n      escapee = {\n        '\"': '\"',\n        '\\\\': '\\\\',\n        '/': '/',\n        b: '\\b',\n        f: '\\f',\n        n: '\\n',\n        r: '\\r',\n        t: '\\t',\n      },\n      text,\n      annotate = function (type, text) {\n        annos.push({ type: type, text: text, at: at });\n      },\n      error = function (m) {\n        throw {\n          name: 'SyntaxError',\n          message: m,\n          at: at,\n          text: text,\n        };\n      },\n      reset = function (newAt) {\n        ch = text.charAt(newAt);\n        at = newAt + 1;\n      },\n      next = function (c) {\n        if (c && c !== ch) {\n          error('Expected \\'' + c + '\\' instead of \\'' + ch + '\\'');\n        }\n\n        ch = text.charAt(at);\n        at += 1;\n        return ch;\n      },\n      nextUpTo = function (upTo, errorMessage) {\n        let currentAt = at,\n          i = text.indexOf(upTo, currentAt);\n        if (i < 0) {\n          error(errorMessage || 'Expected \\'' + upTo + '\\'');\n        }\n        reset(i + upTo.length);\n        return text.substring(currentAt, i);\n      },\n      peek = function (c) {\n        return text.substr(at, c.length) === c; // nocommit - double check\n      },\n      number = function () {\n        let number,\n          string = '';\n\n        if (ch === '-') {\n          string = '-';\n          next('-');\n        }\n        while (ch >= '0' && ch <= '9') {\n          string += ch;\n          next();\n        }\n        if (ch === '.') {\n          string += '.';\n          while (next() && ch >= '0' && ch <= '9') {\n            string += ch;\n          }\n        }\n        if (ch === 'e' || ch === 'E') {\n          string += ch;\n          next();\n          if (ch === '-' || ch === '+') {\n            string += ch;\n            next();\n          }\n          while (ch >= '0' && ch <= '9') {\n            string += ch;\n            next();\n          }\n        }\n        number = +string;\n        if (isNaN(number)) {\n          error('Bad number');\n        } else {\n          return number;\n        }\n      },\n      string = function () {\n        let hex,\n          i,\n          string = '',\n          uffff;\n\n        if (ch === '\"') {\n          if (peek('\"\"')) {\n            // literal\n            next('\"');\n            next('\"');\n            return nextUpTo('\"\"\"', 'failed to find closing \\'\"\"\"\\'');\n          } else {\n            while (next()) {\n              if (ch === '\"') {\n                next();\n                return string;\n              } else if (ch === '\\\\') {\n                next();\n                if (ch === 'u') {\n                  uffff = 0;\n                  for (i = 0; i < 4; i += 1) {\n                    hex = parseInt(next(), 16);\n                    if (!isFinite(hex)) {\n                      break;\n                    }\n                    uffff = uffff * 16 + hex;\n                  }\n                  string += String.fromCharCode(uffff);\n                } else if (typeof escapee[ch] === 'string') {\n                  string += escapee[ch];\n                } else {\n                  break;\n                }\n              } else {\n                string += ch;\n              }\n            }\n          }\n        }\n        error('Bad string');\n      },\n      white = function () {\n        while (ch && ch <= ' ') {\n          next();\n        }\n      },\n      strictWhite = function () {\n        while (ch && (ch == ' ' || ch == '\\t')) {\n          next();\n        }\n      },\n      newLine = function () {\n        if (ch == '\\n') next();\n      },\n      word = function () {\n        switch (ch) {\n          case 't':\n            next('t');\n            next('r');\n            next('u');\n            next('e');\n            return true;\n          case 'f':\n            next('f');\n            next('a');\n            next('l');\n            next('s');\n            next('e');\n            return false;\n          case 'n':\n            next('n');\n            next('u');\n            next('l');\n            next('l');\n            return null;\n        }\n        error('Unexpected \\'' + ch + '\\'');\n      },\n      // parses and returns the method\n      method = function () {\n        switch (ch) {\n          case 'G':\n            next('G');\n            next('E');\n            next('T');\n            return 'GET';\n          case 'H':\n            next('H');\n            next('E');\n            next('A');\n            next('D');\n            return 'HEAD';\n          case 'D':\n            next('D');\n            next('E');\n            next('L');\n            next('E');\n            next('T');\n            next('E');\n            return 'DELETE';\n          case 'P':\n            next('P');\n            switch (ch) {\n              case 'U':\n                next('U');\n                next('T');\n                return 'PUT';\n              case 'O':\n                next('O');\n                next('S');\n                next('T');\n                return 'POST';\n              default:\n                error('Unexpected \\'' + ch + '\\'');\n            }\n            break;\n          default:\n            error('Expected one of GET/POST/PUT/DELETE/HEAD');\n        }\n      },\n      value, // Place holder for the value function.\n      array = function () {\n        const array = [];\n\n        if (ch === '[') {\n          next('[');\n          white();\n          if (ch === ']') {\n            next(']');\n            return array; // empty array\n          }\n          while (ch) {\n            array.push(value());\n            white();\n            if (ch === ']') {\n              next(']');\n              return array;\n            }\n            next(',');\n            white();\n          }\n        }\n        error('Bad array');\n      },\n      object = function () {\n        let key,\n          object = {};\n\n        if (ch === '{') {\n          next('{');\n          white();\n          if (ch === '}') {\n            next('}');\n            return object; // empty object\n          }\n          while (ch) {\n            key = string();\n            white();\n            next(':');\n            if (Object.hasOwnProperty.call(object, key)) {\n              error('Duplicate key \"' + key + '\"');\n            }\n            object[key] = value();\n            white();\n            if (ch === '}') {\n              next('}');\n              return object;\n            }\n            next(',');\n            white();\n          }\n        }\n        error('Bad object');\n      };\n\n    value = function () {\n      white();\n      switch (ch) {\n        case '{':\n          return object();\n        case '[':\n          return array();\n        case '\"':\n          return string();\n        case '-':\n          return number();\n        default:\n          return ch >= '0' && ch <= '9' ? number() : word();\n      }\n    };\n\n    let url = function () {\n        let url = '';\n        while (ch && ch != '\\n') {\n          url += ch;\n          next();\n        }\n        if (url == '') {\n          error('Missing url');\n        }\n        return url;\n      },\n      request = function () {\n        white();\n        method();\n        strictWhite();\n        url();\n        strictWhite(); // advance to one new line\n        newLine();\n        strictWhite();\n        if (ch == '{') {\n          object();\n        }\n        // multi doc request\n        strictWhite(); // advance to one new line\n        newLine();\n        strictWhite();\n        while (ch == '{') {\n          // another object\n          object();\n          strictWhite();\n          newLine();\n          strictWhite();\n        }\n      },\n      comment = function () {\n        while (ch == '#') {\n          while (ch && ch !== '\\n') {\n            next();\n          }\n          white();\n        }\n      },\n      multi_request = function () {\n        while (ch && ch != '') {\n          white();\n          if (!ch) {\n            continue;\n          }\n          try {\n            comment();\n            white();\n            if (!ch) {\n              continue;\n            }\n            request();\n            white();\n          } catch (e) {\n            annotate('error', e.message);\n            // snap\n            const substring = text.substr(at);\n            const nextMatch = substring.search(/^POST|HEAD|GET|PUT|DELETE/m);\n            if (nextMatch < 1) return;\n            reset(at + nextMatch);\n          }\n        }\n      };\n\n    return function (source, reviver) {\n      let result;\n\n      text = source;\n      at = 0;\n      annos = [];\n      next();\n      multi_request();\n      white();\n      if (ch) {\n        annotate('error', 'Syntax error');\n      }\n\n      result = { annotations: annos };\n\n      return typeof reviver === 'function'\n        ? (function walk(holder, key) {\n          let k,\n            v,\n            value = holder[key];\n          if (value && typeof value === 'object') {\n            for (k in value) {\n              if (Object.hasOwnProperty.call(value, k)) {\n                v = walk(value, k);\n                if (v !== undefined) {\n                  value[k] = v;\n                } else {\n                  delete value[k];\n                }\n              }\n            }\n          }\n          return reviver.call(holder, key, value);\n        }({ '': result }, ''))\n        : result;\n    };\n  }\n);\n\nace.define(\n  'sense_editor/mode/worker',\n  [\n    'require',\n    'exports',\n    'module',\n    'ace/lib/oop',\n    'ace/worker/mirror',\n    'sense_editor/mode/worker_parser',\n  ],\n  function (require, exports) {\n    const oop = require('ace/lib/oop');\n    const Mirror = require('ace/worker/mirror').Mirror;\n    const parse = require('sense_editor/mode/worker_parser');\n\n    const SenseWorker = (exports.SenseWorker = function (sender) {\n      Mirror.call(this, sender);\n      this.setTimeout(200);\n    });\n\n    oop.inherits(SenseWorker, Mirror);\n\n    (function () {\n      this.id = 'senseWorker';\n      this.onUpdate = function () {\n        const value = this.doc.getValue();\n        let pos, result;\n        try {\n          result = parse(value);\n        } catch (e) {\n          pos = this.charToDocumentPosition(e.at - 1);\n          this.sender.emit('error', {\n            row: pos.row,\n            column: pos.column,\n            text: e.message,\n            type: 'error',\n          });\n          return;\n        }\n        for (let i = 0; i < result.annotations.length; i++) {\n          pos = this.charToDocumentPosition(result.annotations[i].at - 1);\n          result.annotations[i].row = pos.row;\n          result.annotations[i].column = pos.column;\n        }\n        this.sender.emit('ok', result.annotations);\n      };\n\n      this.charToDocumentPosition = function (charPos) {\n        let i = 0;\n        const len = this.doc.getLength();\n        const nl = this.doc.getNewLineCharacter().length;\n\n        if (!len) {\n          return { row: 0, column: 0 };\n        }\n\n        let lineStart = 0,\n          line;\n        while (i < len) {\n          line = this.doc.getLine(i);\n          const lineLength = line.length + nl;\n          if (lineStart + lineLength > charPos) {\n            return {\n              row: i,\n              column: charPos - lineStart,\n            };\n          }\n\n          lineStart += lineLength;\n          i += 1;\n        }\n\n        return {\n          row: i - 1,\n          column: line.length,\n        };\n      };\n    }.call(SenseWorker.prototype));\n  }\n);\n";var workerModule={id:"sense_editor/mode/worker",src:worker_worker};var target=__webpack_require__(30);var oop=brace_default.a.acequire("ace/lib/oop");var TextMode=brace_default.a.acequire("ace/mode/text").Mode;var MatchingBraceOutdent=brace_default.a.acequire("ace/mode/matching_brace_outdent").MatchingBraceOutdent;var CstyleBehaviour=brace_default.a.acequire("ace/mode/behaviour/cstyle").CstyleBehaviour;var CStyleFoldMode=brace_default.a.acequire("ace/mode/folding/cstyle").FoldMode;brace_default.a.acequire("ace/tokenizer");function ScriptMode(){this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode}oop.inherits(ScriptMode,TextMode);(function(){this.HighlightRules=target["ScriptHighlightRules"];this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line);var match=line.match(/^.*[\{\[]\s*$/);if(match){indent+=tab}return indent};this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)};this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)}}).call(ScriptMode.prototype);function addEOL(tokens,reg,nextIfEOL,normalNext){if(typeof reg==="object"){reg=reg.source}return[{token:tokens.concat(["whitespace"]),regex:reg+"(\\s*)$",next:nextIfEOL},{token:tokens,regex:reg,next:normalNext}]}function mergeTokens(){return[].concat.apply([],arguments)}var input_highlight_rules_oop=brace_default.a.acequire("ace/lib/oop");var _ace$acequire=brace_default.a.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_ace$acequire.TextHighlightRules;function InputHighlightRules(){this.$rules={"start-sql":[{token:"whitespace",regex:"\\s+"},{token:"paren.lparen",regex:"{",next:"json-sql",push:true},{regex:"",next:"start"}],start:mergeTokens([{token:"warning",regex:"#!.*$"},{token:"comment",regex:/^#.*$/},{token:"paren.lparen",regex:"{",next:"json",push:true}],addEOL(["method"],/([a-zA-Z]+)/,"start","method_sep"),[{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}]),method_sep:mergeTokens(addEOL(["whitespace","url.protocol_host","url.slash"],/(\s+)(https?:\/\/[^?\/,]+)(\/)/,"start","url"),addEOL(["whitespace","url.protocol_host"],/(\s+)(https?:\/\/[^?\/,]+)/,"start","url"),addEOL(["whitespace","url.slash"],/(\s+)(\/)/,"start","url"),addEOL(["whitespace"],/(\s+)/,"start","url")),url:mergeTokens(addEOL(["url.part"],/(_sql)/,"start-sql","url-sql"),addEOL(["url.part"],/([^?\/,\s]+)/,"start"),addEOL(["url.comma"],/(,)/,"start"),addEOL(["url.slash"],/(\/)/,"start"),addEOL(["url.questionmark"],/(\?)/,"start","urlParams")),urlParams:mergeTokens(addEOL(["url.param","url.equal","url.value"],/([^&=]+)(=)([^&]*)/,"start"),addEOL(["url.param"],/([^&=]+)/,"start"),addEOL(["url.amp"],/(&)/,"start")),"url-sql":mergeTokens(addEOL(["url.part"],/([^?\/,\s]+)/,"start-sql"),addEOL(["url.comma"],/(,)/,"start-sql"),addEOL(["url.slash"],/(\/)/,"start-sql"),addEOL(["url.questionmark"],/(\?)/,"start-sql","urlParams-sql")),"urlParams-sql":mergeTokens(addEOL(["url.param","url.equal","url.value"],/([^&=]+)(=)([^&]*)/,"start-sql"),addEOL(["url.param"],/([^&=]+)/,"start-sql"),addEOL(["url.amp"],/(&)/,"start-sql"))};Object(target["addXJsonToRules"])(this);if(this.constructor===InputHighlightRules){this.normalizeRules()}}input_highlight_rules_oop.inherits(InputHighlightRules,TextHighlightRules);var input_oop=brace_default.a.acequire("ace/lib/oop");var input_TextMode=brace_default.a.acequire("ace/mode/text").Mode;var input_MatchingBraceOutdent=brace_default.a.acequire("ace/mode/matching_brace_outdent").MatchingBraceOutdent;var input_CstyleBehaviour=brace_default.a.acequire("ace/mode/behaviour/cstyle").CstyleBehaviour;var input_CStyleFoldMode=brace_default.a.acequire("ace/mode/folding/cstyle").FoldMode;var WorkerClient=brace_default.a.acequire("ace/worker/worker_client").WorkerClient;var AceTokenizer=brace_default.a.acequire("ace/tokenizer").Tokenizer;function Mode(){this.$tokenizer=new AceTokenizer((new InputHighlightRules).getRules());this.$outdent=new input_MatchingBraceOutdent;this.$behaviour=new input_CstyleBehaviour;this.foldingRules=new input_CStyleFoldMode;this.createModeDelegates({"script-":ScriptMode})}input_oop.inherits(Mode,input_TextMode);(function(){this.getCompletions=function(){return[]};this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line);if(state!=="string_literal"){var match=line.match(/^.*[\{\(\[]\s*$/);if(match){indent+=tab}}return indent};this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)};this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)};this.createWorker=function(session){var worker=new WorkerClient(["ace","sense_editor"],workerModule,"SenseWorker");worker.attachToDocument(session.getDocument());worker.on("error",(function(e){session.setAnnotations([e.data])}));worker.on("ok",(function(anno){session.setAnnotations(anno.data)}));return worker}}).call(Mode.prototype);var language_tools=__webpack_require__(50);var searchbox=__webpack_require__(51);var mode_json=__webpack_require__(31);var mode_text=__webpack_require__(52);var external_kbnSharedDeps_Jquery_=__webpack_require__(22);var external_kbnSharedDeps_Jquery_default=__webpack_require__.n(external_kbnSharedDeps_Jquery_);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=token_provider_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function token_provider_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return token_provider_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return token_provider_arrayLikeToArray(o,minLen)}function token_provider_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var toToken=function toToken(lineNumber,column,token){return{type:token.type,value:token.value,position:{lineNumber:lineNumber,column:column}}};var toTokens=function toTokens(lineNumber,tokens){var acc="";return tokens.map((function(token){var column=acc.length+1;acc+=token.value;return toToken(lineNumber,column,token)}))};var extractTokenFromAceTokenRow=function extractTokenFromAceTokenRow(lineNumber,column,aceTokens){var acc="";var _iterator=_createForOfIteratorHelper(aceTokens),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var token=_step.value;var start=acc.length+1;acc+=token.value;var end=acc.length;if(column<start)continue;if(column>end+1)continue;return toToken(lineNumber,start,token)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return null};var AceTokensProvider=function(){function AceTokensProvider(session){_classCallCheck(this,AceTokensProvider);this.session=session}_createClass(AceTokensProvider,[{key:"getTokens",value:function getTokens(lineNumber){if(lineNumber<1)return null;var lineCount=this.session.getLength();if(lineNumber>lineCount){return null}var tokens=this.session.getTokens(lineNumber-1);if(!tokens||!tokens.length){return[]}return toTokens(lineNumber,tokens)}},{key:"getTokenAt",value:function getTokenAt(pos){var tokens=this.session.getTokens(pos.lineNumber-1);if(tokens){return extractTokenFromAceTokenRow(pos.lineNumber,pos.column,tokens)}return null}}]);return AceTokensProvider}();function curl_createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=curl_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function curl_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return curl_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return curl_arrayLikeToArray(o,minLen)}function curl_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function detectCURLinLine(line){return line.match(/^\s*?curl\s+(-X[A-Z]+)?\s*['"]?.*?['"]?(\s*$|\s+?-d\s*?['"])/)}function detectCURL(text){if(!text)return false;var _iterator=curl_createForOfIteratorHelper(text.split("\n")),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var line=_step.value;if(detectCURLinLine(line)){return true}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return false}function parseCURL(text){var state="NONE";var out=[];var body=[];var line="";var lines=text.trim().split("\n");var matches;var EmptyLine=/^\s*$/;var Comment=/^\s*(?:#|\/{2,})(.*)\n?$/;var ExecutionComment=/^\s*#!/;var ClosingSingleQuote=/^([^']*)'/;var ClosingDoubleQuote=/^((?:[^\\"]|\\.)*)"/;var EscapedQuotes=/^((?:[^\\"']|\\.)+)/;var LooksLikeCurl=/^\s*curl\s+/;var CurlVerb=/-X ?(GET|HEAD|POST|PUT|DELETE)/;var HasProtocol=/[\s"']https?:\/\//;var CurlRequestWithProto=/[\s"']https?:\/\/[^\/ ]+\/+([^\s"']+)/;var CurlRequestWithoutProto=/[\s"'][^\/ ]+\/+([^\s"']+)/;var CurlData=/^.+\s(--data|-d)\s*/;var SenseLine=/^\s*(GET|HEAD|POST|PUT|DELETE)\s+\/?(.+)/;if(lines.length>0&&ExecutionComment.test(lines[0])){lines.shift()}function nextLine(){if(line.length>0){return true}if(lines.length===0){return false}line=lines.shift().replace(/[\r\n]+/g,"\n")+"\n";return true}function unescapeLastBodyEl(){var str=body.pop().replace(/\\([\\"'])/g,"$1");body.push(str)}function detectQuote(){if(line.substr(0,1)==="'"){line=line.substr(1);state="SINGLE_QUOTE"}else if(line.substr(0,1)==='"'){line=line.substr(1);state="DOUBLE_QUOTE"}else{state="UNQUOTED"}}function addBodyToOut(){if(body.length>0){out.push(body.join(""));body=[]}state="LF";out.push("\n")}function consumeMatching(pattern){var result=line.match(pattern);if(result){body.push(result[1]);line=line.substr(result[0].length);detectQuote()}else{body.push(line);line=""}}function parseCurlLine(){var verb="GET";var request="";var result;if(result=line.match(CurlVerb)){verb=result[1]}var pattern=HasProtocol.test(line)?CurlRequestWithProto:CurlRequestWithoutProto;if(result=line.match(pattern)){request=result[1]}out.push(verb+" /"+request+"\n");if(result=line.match(CurlData)){line=line.substr(result[0].length);detectQuote();if(EmptyLine.test(line)){line=""}}else{state="NONE";line="";out.push("")}}while(nextLine()){if(state==="SINGLE_QUOTE"){consumeMatching(ClosingSingleQuote)}else if(state==="DOUBLE_QUOTE"){consumeMatching(ClosingDoubleQuote);unescapeLastBodyEl()}else if(state==="UNQUOTED"){consumeMatching(EscapedQuotes);if(body.length){unescapeLastBodyEl()}if(state==="UNQUOTED"){addBodyToOut();line=""}}else if(state==="BODY"){if(Comment.test(line)||EmptyLine.test(line)){addBodyToOut()}else{body.push(line);line=""}}else if(EmptyLine.test(line)){if(state!=="LF"){out.push("\n");state="LF"}line=""}else if(matches=line.match(Comment)){out.push("#"+matches[1]+"\n");state="NONE";line=""}else if(LooksLikeCurl.test(line)){parseCurlLine()}else if(matches=line.match(SenseLine)){out.push(matches[1]+" /"+matches[2]+"\n");line="";state="BODY"}else{out.push("### "+line);line=""}}addBodyToOut();return out.join("").trim()}var smart_resize=function(editor){var resize=editor.resize;var throttledResize=Object(external_kbnSharedDeps_Lodash_["throttle"])((function(){resize.call(editor,false);var userRow=Object(external_kbnSharedDeps_Lodash_["get"])(throttledResize,"topRow",0);if(userRow!==0){editor.renderer.scrollToLine(userRow,false,false,(function(){}))}}),35);return throttledResize};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function legacy_core_editor_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function legacy_core_editor_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function legacy_core_editor_createClass(Constructor,protoProps,staticProps){if(protoProps)legacy_core_editor_defineProperties(Constructor.prototype,protoProps);if(staticProps)legacy_core_editor_defineProperties(Constructor,staticProps);return Constructor}function legacy_core_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var _AceRange=brace_default.a.acequire("ace/range").Range;var rangeToAceRange=function rangeToAceRange(_ref){var start=_ref.start,end=_ref.end;return new _AceRange(start.lineNumber-1,start.column-1,end.lineNumber-1,end.column-1)};var legacy_core_editor_LegacyCoreEditor=function(){function LegacyCoreEditor(editor,actions){var _this=this;legacy_core_editor_classCallCheck(this,LegacyCoreEditor);this.editor=editor;legacy_core_editor_defineProperty(this,"_aceOnPaste",void 0);legacy_core_editor_defineProperty(this,"$actions",void 0);legacy_core_editor_defineProperty(this,"resize",void 0);legacy_core_editor_defineProperty(this,"setActionsBar",(function(value){var topOrBottom=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"top";if(value===null){_this.$actions.css("visibility","hidden")}else{if(topOrBottom==="top"){_this.$actions.css({bottom:"auto",top:value,visibility:"visible"})}else{_this.$actions.css({top:"auto",bottom:value,visibility:"visible"})}}}));legacy_core_editor_defineProperty(this,"hideActionsBar",(function(){_this.setActionsBar()}));this.$actions=external_kbnSharedDeps_Jquery_default()(actions);this.editor.setShowPrintMargin(false);var session=this.editor.getSession();session.setMode(new Mode);session.setFoldStyle("markbeginend");session.setTabSize(2);session.setUseWrapMode(true);this.resize=smart_resize(this.editor);this._aceOnPaste=this.editor.onPaste;this.editor.onPaste=this.DO_NOT_USE_onPaste.bind(this);this.editor.setOptions({enableBasicAutocompletion:true});this.editor.$blockScrolling=Infinity;this.hideActionsBar();this.editor.focus()}legacy_core_editor_createClass(LegacyCoreEditor,[{key:"waitForLatestTokens",value:function waitForLatestTokens(){var _this2=this;return new Promise((function(resolve){var session=_this2.editor.getSession();var checkInterval=25;var check=function check(){if(session.bgTokenizer){if(session.bgTokenizer.running){setTimeout(check,checkInterval)}else{resolve()}}};setTimeout(check,0)}))}},{key:"getLineState",value:function getLineState(lineNumber){var session=this.editor.getSession();return session.getState(lineNumber-1)}},{key:"getValueInRange",value:function getValueInRange(range){return this.editor.getSession().getTextRange(rangeToAceRange(range))}},{key:"getTokenProvider",value:function getTokenProvider(){return new AceTokensProvider(this.editor.getSession())}},{key:"getValue",value:function getValue(){return this.editor.getValue()}},{key:"setValue",value:function(){var _setValue=_asyncToGenerator(regeneratorRuntime.mark((function _callee(text,forceRetokenize){var session;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:session=this.editor.getSession();session.setValue(text);if(!forceRetokenize){_context.next=5;break}_context.next=5;return this.forceRetokenize();case 5:case"end":return _context.stop()}}}),_callee,this)})));function setValue(_x,_x2){return _setValue.apply(this,arguments)}return setValue}()},{key:"getLineValue",value:function getLineValue(lineNumber){var session=this.editor.getSession();return session.getLine(lineNumber-1)}},{key:"getCurrentPosition",value:function getCurrentPosition(){var cursorPosition=this.editor.getCursorPosition();return{lineNumber:cursorPosition.row+1,column:cursorPosition.column+1}}},{key:"clearSelection",value:function clearSelection(){this.editor.clearSelection()}},{key:"getTokenAt",value:function getTokenAt(pos){var provider=this.getTokenProvider();return provider.getTokenAt(pos)}},{key:"insert",value:function insert(valueOrPos,value){if(typeof valueOrPos==="string"){this.editor.insert(valueOrPos);return}var document=this.editor.getSession().getDocument();document.insert({column:valueOrPos.column-1,row:valueOrPos.lineNumber-1},value||"")}},{key:"moveCursorToPosition",value:function moveCursorToPosition(pos){this.editor.moveCursorToPosition({row:pos.lineNumber-1,column:pos.column-1})}},{key:"replace",value:function replace(range,value){var session=this.editor.getSession();session.replace(rangeToAceRange(range),value)}},{key:"getLines",value:function getLines(startLine,endLine){var session=this.editor.getSession();return session.getLines(startLine-1,endLine-1)}},{key:"replaceRange",value:function replaceRange(range,value){var pos=this.editor.getCursorPosition();this.editor.getSession().replace(rangeToAceRange(range),value);var maxRow=Math.max(range.start.lineNumber-1+value.split("\n").length-1,1);pos.row=Math.min(pos.row,maxRow);this.editor.moveCursorToPosition(pos);this.editor.clearSelection()}},{key:"getSelectionRange",value:function getSelectionRange(){var result=this.editor.getSelectionRange();return{start:{lineNumber:result.start.row+1,column:result.start.column+1},end:{lineNumber:result.end.row+1,column:result.end.column+1}}}},{key:"getLineCount",value:function getLineCount(){return this.editor.getSession().getLength()}},{key:"addMarker",value:function addMarker(range){return this.editor.getSession().addMarker(rangeToAceRange(range),"ace_snippet-marker","fullLine",false)}},{key:"removeMarker",value:function removeMarker(ref){this.editor.getSession().removeMarker(ref)}},{key:"getWrapLimit",value:function getWrapLimit(){return this.editor.getSession().getWrapLimit()}},{key:"on",value:function on(event,listener){if(event==="changeCursor"){this.editor.getSession().selection.on(event,listener)}else if(event==="changeSelection"){this.editor.on(event,listener)}else{this.editor.getSession().on(event,listener)}}},{key:"off",value:function off(event,listener){if(event==="changeSelection"){this.editor.off(event,listener)}}},{key:"isCompleterActive",value:function isCompleterActive(){return Boolean(this.editor.completer&&this.editor.completer.activated)}},{key:"forceRetokenize",value:function forceRetokenize(){var session=this.editor.getSession();return new Promise((function(resolve){setTimeout((function(){var i;for(i=0;i<session.getLength();i++){session.getTokens(i)}resolve()}))}))}},{key:"DO_NOT_USE_onPaste",value:function DO_NOT_USE_onPaste(text){if(text&&detectCURL(text)){var curlInput=parseCURL(text);this.editor.insert(curlInput);return}this._aceOnPaste.call(this.editor,text)}},{key:"execCommand",value:function execCommand(cmd){this.editor.execCommand(cmd)}},{key:"getContainer",value:function getContainer(){return this.editor.container}},{key:"setStyles",value:function setStyles(styles){this.editor.getSession().setUseWrapMode(styles.wrapLines);this.editor.container.style.fontSize=styles.fontSize}},{key:"registerKeyboardShortcut",value:function registerKeyboardShortcut(opts){this.editor.commands.addCommand({exec:opts.fn,name:opts.name,bindKey:opts.keys})}},{key:"legacyUpdateUI",value:function legacyUpdateUI(range){var _this3=this;if(!this.$actions){return}if(range){var offsetFromPage=external_kbnSharedDeps_Jquery_default()(this.editor.container).offset().top;var startLine=range.start.lineNumber;var startColumn=range.start.column;var firstLine=this.getLineValue(startLine);var maxLineLength=this.getWrapLimit()-5;var isWrapping=firstLine.length>maxLineLength;var totalOffset=offsetFromPage-(window.pageYOffset||0);var getScreenCoords=function getScreenCoords(line){return _this3.editor.renderer.textToScreenCoordinates(line-1,startColumn).pageY-totalOffset};var topOfReq=getScreenCoords(startLine);if(topOfReq>=0){var _this$editor$containe=this.editor.container.getBoundingClientRect(),maxBottom=_this$editor$containe.bottom;if(topOfReq>maxBottom-totalOffset){this.setActionsBar(0,"bottom");return}var offset=0;if(isWrapping){var textArea=external_kbnSharedDeps_Jquery_default()(this.editor.container.querySelector("textArea"));var hasRoomOnNextLine=this.getLineValue(startLine).length<maxLineLength;if(textArea&&hasRoomOnNextLine){offset+=this.getLineValue(startLine).length*textArea.height()}else{if(startLine>1){this.setActionsBar(getScreenCoords(startLine-1));return}this.setActionsBar(getScreenCoords(startLine+1));return}}this.setActionsBar(topOfReq+offset);return}var bottomOfReq=this.editor.renderer.textToScreenCoordinates(range.end.lineNumber,range.end.column).pageY-offsetFromPage;if(bottomOfReq>=0){this.setActionsBar(0);return}}}},{key:"registerAutocompleter",value:function registerAutocompleter(autocompleter){brace_default.a.define("ace/autocomplete/text_completer",["require","exports","module"],(function(require,exports){exports.getCompletions=function(innerEditor,session,pos,prefix,callback){callback(null,[])}}));var langTools=brace_default.a.acequire("ace/ext/language_tools");langTools.setCompleters([{identifierRegexps:[/[a-zA-Z_0-9\.\$\-\u00A2-\uFFFF]/],getCompletions:function getCompletions(DO_NOT_USE_1,DO_NOT_USE_2,pos,prefix,callback){var position={lineNumber:pos.row+1,column:pos.column+1};autocompleter(position,prefix,callback)}}])}},{key:"destroy",value:function destroy(){this.editor.destroy()}}]);return LegacyCoreEditor}();var output_highlight_rules_oop=brace_default.a.acequire("ace/lib/oop");var JsonHighlightRules=brace_default.a.acequire("ace/mode/json_highlight_rules").JsonHighlightRules;function OutputJsonHighlightRules(){this.$rules={};Object(target["addXJsonToRules"])(this,"start");this.$rules.start.unshift({token:"warning",regex:"#!.*$"},{token:"comment",regex:"#.*$"});if(this.constructor===OutputJsonHighlightRules){this.normalizeRules()}}output_highlight_rules_oop.inherits(OutputJsonHighlightRules,JsonHighlightRules);var output_oop=brace_default.a.acequire("ace/lib/oop");var JSONMode=brace_default.a.acequire("ace/mode/json").Mode;var output_MatchingBraceOutdent=brace_default.a.acequire("ace/mode/matching_brace_outdent").MatchingBraceOutdent;var output_CstyleBehaviour=brace_default.a.acequire("ace/mode/behaviour/cstyle").CstyleBehaviour;var output_CStyleFoldMode=brace_default.a.acequire("ace/mode/folding/cstyle").FoldMode;brace_default.a.acequire("ace/worker/worker_client");var output_AceTokenizer=brace_default.a.acequire("ace/tokenizer").Tokenizer;function output_Mode(){this.$tokenizer=new output_AceTokenizer((new OutputJsonHighlightRules).getRules());this.$outdent=new output_MatchingBraceOutdent;this.$behaviour=new output_CstyleBehaviour;this.foldingRules=new output_CStyleFoldMode}output_oop.inherits(output_Mode,JSONMode);(function(){this.createWorker=function(){return null};this.$id="sense/mode/input"}).call(output_Mode.prototype);function createReadOnlyAceEditor(element){var output=brace_default.a.acequire("ace/ace").edit(element);var outputMode=new output_Mode;output.$blockScrolling=Infinity;output.resize=smart_resize(output);output.update=function(val,mode,cb){if(typeof mode==="function"){cb=mode;mode=void 0}var session=output.getSession();session.setMode(val?mode||outputMode:"ace/mode/text");session.setValue(val);if(typeof cb==="function"){setTimeout(cb)}};output.append=function(val,foldPrevious,cb){if(typeof foldPrevious==="function"){cb=foldPrevious;foldPrevious=true}if(external_kbnSharedDeps_Lodash_default.a.isUndefined(foldPrevious)){foldPrevious=true}var session=output.getSession();var lastLine=session.getLength();if(foldPrevious){output.moveCursorTo(Math.max(0,lastLine-1),0)}session.insert({row:lastLine,column:0},"\n"+val);output.moveCursorTo(lastLine+1,0);if(typeof cb==="function"){setTimeout(cb)}};(function setupSession(session){session.setMode("ace/mode/text");session.setFoldStyle("markbeginend");session.setTabSize(2);session.setUseWrapMode(true)})(output.getSession());output.setShowPrintMargin(false);output.setReadOnly(true);return output}var create_create=function create(el){var actions=document.querySelector("#ConAppEditorActions");if(!actions){throw new Error("Could not find ConAppEditorActions element!")}var aceEditor=brace_default.a.edit(el);return new legacy_core_editor_LegacyCoreEditor(aceEditor,actions)};function applyCurrentSettings(editor,settings){if(editor.setStyles){editor.setStyles({wrapLines:settings.wrapMode,fontSize:settings.fontSize+"px"})}else{editor.getSession().setUseWrapMode(settings.wrapMode);editor.container.style.fontSize=settings.fontSize+"px"}}var inputMode=new Mode;function HistoryViewer(_ref){var settings=_ref.settings,req=_ref.req;var divRef=Object(external_kbnSharedDeps_React_["useRef"])(null);var viewerRef=Object(external_kbnSharedDeps_React_["useRef"])(null);Object(external_kbnSharedDeps_React_["useEffect"])((function(){var viewer=createReadOnlyAceEditor(divRef.current);viewerRef.current=viewer;var unsubscribe=subscribeResizeChecker(divRef.current,viewer);return function(){return unsubscribe()}}),[]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){applyCurrentSettings(viewerRef.current,settings)}),[settings]);if(viewerRef.current){var viewer=viewerRef.current;if(req){var s=req.method+" "+req.endpoint+"\n"+(req.data||"");viewer.update(s,inputMode);viewer.clearSelection()}else{viewer.update(external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.historyPage.noHistoryTextMessage",{defaultMessage:"No history available"}),inputMode)}}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"conHistory__viewer",ref:divRef})}function editor_registry_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function editor_registry_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function editor_registry_createClass(Constructor,protoProps,staticProps){if(protoProps)editor_registry_defineProperties(Constructor.prototype,protoProps);if(staticProps)editor_registry_defineProperties(Constructor,staticProps);return Constructor}function editor_registry_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EditorRegistry=function(){function EditorRegistry(){editor_registry_classCallCheck(this,EditorRegistry);editor_registry_defineProperty(this,"inputEditor",void 0)}editor_registry_createClass(EditorRegistry,[{key:"setInputEditor",value:function setInputEditor(inputEditor){this.inputEditor=inputEditor}},{key:"getInputEditor",value:function getInputEditor(){return this.inputEditor}}]);return EditorRegistry}();var instance=new EditorRegistry;var use_set_input_editor_useSetInputEditor=function useSetInputEditor(){var dispatch=useEditorActionContext();return Object(external_kbnSharedDeps_React_["useCallback"])((function(editor){dispatch({type:"setInputEditor",payload:editor});instance.setInputEditor(editor)}),[dispatch])};function row_parser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function row_parser_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function row_parser_createClass(Constructor,protoProps,staticProps){if(protoProps)row_parser_defineProperties(Constructor.prototype,protoProps);if(staticProps)row_parser_defineProperties(Constructor,staticProps);return Constructor}function row_parser_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MODE={REQUEST_START:2,IN_REQUEST:4,MULTI_DOC_CUR_DOC_END:8,REQUEST_END:16,BETWEEN_REQUESTS:32};var RowParser=function(){function RowParser(editor){row_parser_classCallCheck(this,RowParser);this.editor=editor;row_parser_defineProperty(this,"MODE",MODE)}row_parser_createClass(RowParser,[{key:"getRowParseMode",value:function getRowParseMode(){var lineNumber=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.editor.getCurrentPosition().lineNumber;var linesCount=this.editor.getLineCount();if(lineNumber>linesCount||lineNumber<1){return MODE.BETWEEN_REQUESTS}var mode=this.editor.getLineState(lineNumber);if(!mode){return MODE.BETWEEN_REQUESTS}if(mode!=="start"&&mode!=="start-sql"){return MODE.IN_REQUEST}var line=(this.editor.getLineValue(lineNumber)||"").trim();if(!line||line[0]==="#"){return MODE.BETWEEN_REQUESTS}if(line.indexOf("}",line.length-1)>=0){lineNumber++;if(lineNumber<linesCount+1){line=(this.editor.getLineValue(lineNumber)||"").trim();if(line.indexOf("{")===0){return MODE.MULTI_DOC_CUR_DOC_END|MODE.IN_REQUEST}}return MODE.REQUEST_END|MODE.MULTI_DOC_CUR_DOC_END}lineNumber++;if(lineNumber>=linesCount+1){return MODE.REQUEST_START|MODE.REQUEST_END}line=(this.editor.getLineValue(lineNumber)||"").trim();if(line.indexOf("{")!==0){return MODE.REQUEST_START|MODE.REQUEST_END}return MODE.REQUEST_START}},{key:"rowPredicate",value:function rowPredicate(lineNumber,editor,value){var mode=this.getRowParseMode(lineNumber);return(mode&value)>0}},{key:"isEndRequestRow",value:function isEndRequestRow(row,_e){var editor=_e||this.editor;return this.rowPredicate(row,editor,MODE.REQUEST_END)}},{key:"isRequestEdge",value:function isRequestEdge(row,_e){var editor=_e||this.editor;return this.rowPredicate(row,editor,MODE.REQUEST_END|MODE.REQUEST_START)}},{key:"isStartRequestRow",value:function isStartRequestRow(row,_e){var editor=_e||this.editor;return this.rowPredicate(row,editor,MODE.REQUEST_START)}},{key:"isInBetweenRequestsRow",value:function isInBetweenRequestsRow(row,_e){var editor=_e||this.editor;return this.rowPredicate(row,editor,MODE.BETWEEN_REQUESTS)}},{key:"isInRequestsRow",value:function isInRequestsRow(row,_e){var editor=_e||this.editor;return this.rowPredicate(row,editor,MODE.IN_REQUEST)}},{key:"isMultiDocDocEndRow",value:function isMultiDocDocEndRow(row,_e){var editor=_e||this.editor;return this.rowPredicate(row,editor,MODE.MULTI_DOC_CUR_DOC_END)}},{key:"isEmptyToken",value:function isEmptyToken(tokenOrTokenIter){var token=tokenOrTokenIter&&tokenOrTokenIter.getCurrentToken?tokenOrTokenIter.getCurrentToken():tokenOrTokenIter;return!token||token.type==="whitespace"}},{key:"isUrlOrMethodToken",value:function isUrlOrMethodToken(tokenOrTokenIter){var _getCurrentToken;var t=(_getCurrentToken=tokenOrTokenIter===null||tokenOrTokenIter===void 0?void 0:tokenOrTokenIter.getCurrentToken())!==null&&_getCurrentToken!==void 0?_getCurrentToken:tokenOrTokenIter;return t&&t.type&&(t.type==="method"||t.type.indexOf("url")===0)}},{key:"nextNonEmptyToken",value:function nextNonEmptyToken(tokenIter){var t=tokenIter.stepForward();while(t&&this.isEmptyToken(t)){t=tokenIter.stepForward()}return t}},{key:"prevNonEmptyToken",value:function prevNonEmptyToken(tokenIter){var t=tokenIter.stepBackward();while((t||tokenIter.getCurrentPosition().lineNumber>1)&&this.isEmptyToken(t)){t=tokenIter.stepBackward()}return t}}]);return RowParser}();function restore_request_from_history_restoreRequestFromHistory(editor,req){var coreEditor=editor.getCoreEditor();var pos=coreEditor.getCurrentPosition();var prefix="";var suffix="\n";var parser=new RowParser(coreEditor);if(parser.isStartRequestRow(pos.lineNumber)){pos.column=1;suffix+="\n"}else if(parser.isEndRequestRow(pos.lineNumber)){var line=coreEditor.getLineValue(pos.lineNumber);pos.column=line.length+1;prefix="\n\n"}else if(parser.isInBetweenRequestsRow(pos.lineNumber)){pos.column=1}else{pos=editor.nextRequestEnd(pos);prefix="\n\n"}var s=prefix+req.method+" "+req.endpoint;if(req.data){s+="\n"+req.data}s+=suffix;coreEditor.insert(pos,s);coreEditor.moveCursorToPosition({lineNumber:pos.lineNumber+prefix.length,column:1});coreEditor.clearSelection();coreEditor.getContainer().focus()}var use_restore_request_from_history_useRestoreRequestFromHistory=function useRestoreRequestFromHistory(){return Object(external_kbnSharedDeps_React_["useCallback"])((function(req){var editor=instance.getInputEditor();restore_request_from_history_restoreRequestFromHistory(editor,req)}),[])};var esUiShared_public_=__webpack_require__(19);var collapseLiteralStrings=esUiShared_public_["XJson"].collapseLiteralStrings,expandLiteralStrings=esUiShared_public_["XJson"].expandLiteralStrings;function textFromRequest(request){var data=request.data;if(typeof data!=="string"){data=data.join("\n")}return request.method+" "+request.url+"\n"+data}function jsonToString(data,indent){return JSON.stringify(data,null,indent?2:0)}function formatRequestBodyDoc(data,indent){var changed=false;var formattedData=[];for(var i=0;i<data.length;i++){var curDoc=data[i];try{var newDoc=jsonToString(JSON.parse(collapseLiteralStrings(curDoc)),indent);if(indent){newDoc=expandLiteralStrings(newDoc)}changed=changed||newDoc!==curDoc;formattedData.push(newDoc)}catch(e){console.log(e);formattedData.push(curDoc)}}return{changed:changed,data:formattedData}}function extractDeprecationMessages(warnings){var re=/\d{3} [0-9a-zA-Z!#$%&'*+-.^_`|~]+ \"((?:\t| |!|[\x23-\x5b]|[\x5d-\x7e]|[\x80-\xff]|\\\\|\\")*)\"(?: \"[^"]*\")?/;return external_kbnSharedDeps_Lodash_default.a.map(splitOnUnquotedCommaSpace(warnings),(function(warning){var match=re.exec(warning);return"#! Deprecation: "+(match!==null?utils_unescape(match[1]):warning)}))}function utils_unescape(s){return s.replace(/\\\\/g,"\\").replace(/\\"/g,'"')}function splitOnUnquotedCommaSpace(s){var quoted=false;var arr=[];var buffer="";var i=0;while(i<s.length){var token=s.charAt(i++);if(token==="\\"&&i<s.length){token+=s.charAt(i++)}else if(token===","&&i<s.length&&s.charAt(i)===" "){token+=s.charAt(i++)}if(token==='"'){quoted=!quoted}else if(!quoted&&token===", "){arr.push(buffer);buffer="";continue}buffer+=token}arr.push(buffer);return arr}var query_string=__webpack_require__(38);var esVersion=[];function getVersion(){return esVersion}function getContentType(body){if(!body)return;return"application/json"}function send(method,path,data){var wrappedDfd=external_kbnSharedDeps_Jquery_default.a.Deferred();var options={url:"../api/console/proxy?"+Object(query_string["stringify"])({path:path,method:method},{sort:false}),headers:{"kbn-xsrf":"kibana"},data:data,contentType:getContentType(data),cache:false,crossDomain:true,type:"POST",dataType:"text"};external_kbnSharedDeps_Jquery_default.a.ajax(options).then((function(responseData,textStatus,jqXHR){wrappedDfd.resolveWith({},[responseData,textStatus,jqXHR])}),(function(jqXHR,textStatus,errorThrown){if(jqXHR.status===0){jqXHR.responseText="\n\nFailed to connect to Console's backend.\nPlease check the Kibana server is up and running"}wrappedDfd.rejectWith({},[jqXHR,textStatus,errorThrown])}));return wrappedDfd}function constructESUrl(baseUri,path){baseUri=baseUri.replace(/\/+$/,"");path=path.replace(/^\/+/,"");return baseUri+"/"+path}var send_request_to_es_collapseLiteralStrings=esUiShared_public_["XJson"].collapseLiteralStrings;var CURRENT_REQ_ID=0;function sendRequestToES(args){var requests=args.requests.slice();return new Promise((function(resolve,reject){var reqId=++CURRENT_REQ_ID;var results=[];if(reqId!==CURRENT_REQ_ID){return}if(requests.length===0){return}var isMultiRequest=requests.length>1;var sendNextRequest=function sendNextRequest(){if(reqId!==CURRENT_REQ_ID){resolve(results);return}if(requests.length===0){resolve(results);return}var req=requests.shift();var esPath=req.url;var esMethod=req.method;var esData=send_request_to_es_collapseLiteralStrings(req.data.join("\n"));if(esData){esData+="\n"}var startTime=Date.now();send(esMethod,esPath,esData).always((function(dataOrjqXHR,textStatus,jqXhrORerrorThrown){if(reqId!==CURRENT_REQ_ID){return}var xhr=dataOrjqXHR.promise?dataOrjqXHR:jqXhrORerrorThrown;var isSuccess=typeof xhr.status==="number"&&(xhr.status>=200&&xhr.status<300||xhr.status===404);if(isSuccess){var value=xhr.responseText;var warnings=xhr.getResponseHeader("warning");if(warnings){var deprecationMessages=extractDeprecationMessages(warnings);value=deprecationMessages.join("\n")+"\n"+value}if(isMultiRequest){value="# "+req.method+" "+req.url+"\n"+value}results.push({response:{timeMs:Date.now()-startTime,statusCode:xhr.status,statusText:xhr.statusText,contentType:xhr.getResponseHeader("Content-Type"),value:value},request:{data:esData,method:esMethod,path:esPath}});sendNextRequest()}else{var _value;var contentType;if(xhr.responseText){_value=xhr.responseText;contentType=xhr.getResponseHeader("Content-Type")}else{_value="Request failed to get to the server (status code: "+xhr.status+")";contentType="text/plain"}if(isMultiRequest){_value="# "+req.method+" "+req.url+"\n"+_value}reject({response:{value:_value,contentType:contentType,timeMs:Date.now()-startTime,statusCode:xhr.status,statusText:xhr.statusText},request:{data:esData,method:esMethod,path:esPath}})}}))};sendNextRequest()}))}function autocomplete_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function autocomplete_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function autocomplete_component_createClass(Constructor,protoProps,staticProps){if(protoProps)autocomplete_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)autocomplete_component_defineProperties(Constructor,staticProps);return Constructor}var AutocompleteComponent=function(){function AutocompleteComponent(name){autocomplete_component_classCallCheck(this,AutocompleteComponent);this.name=name}autocomplete_component_createClass(AutocompleteComponent,[{key:"getTerms",value:function getTerms(){return[]}},{key:"match",value:function match(){return{next:this.next}}}]);return AutocompleteComponent}();function shared_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function shared_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function shared_component_createClass(Constructor,protoProps,staticProps){if(protoProps)shared_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)shared_component_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var shared_component_SharedComponent=function(_AutocompleteComponen){_inherits(SharedComponent,_AutocompleteComponen);var _super=_createSuper(SharedComponent);function SharedComponent(name,parent){var _this;shared_component_classCallCheck(this,SharedComponent);_this=_super.call(this,name);_this._nextDict={};if(parent){parent.addComponent(_assertThisInitialized(_this))}_this._parent=parent;return _this}shared_component_createClass(SharedComponent,[{key:"getComponent",value:function getComponent(name){return(this._nextDict[name]||[undefined])[0]}},{key:"addComponent",value:function addComponent(component){var current=this._nextDict[component.name]||[];current.push(component);this._nextDict[component.name]=current;this.next=[].concat.apply([],external_kbnSharedDeps_Lodash_default.a.values(this._nextDict))}}]);return SharedComponent}(AutocompleteComponent);function constant_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function constant_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function constant_component_createClass(Constructor,protoProps,staticProps){if(protoProps)constant_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)constant_component_defineProperties(Constructor,staticProps);return Constructor}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=constant_component_getPrototypeOf(object);if(object===null)break}return object}function constant_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)constant_component_setPrototypeOf(subClass,superClass)}function constant_component_setPrototypeOf(o,p){constant_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return constant_component_setPrototypeOf(o,p)}function constant_component_createSuper(Derived){var hasNativeReflectConstruct=constant_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=constant_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=constant_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return constant_component_possibleConstructorReturn(this,result)}}function constant_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return constant_component_assertThisInitialized(self)}function constant_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function constant_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function constant_component_getPrototypeOf(o){constant_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return constant_component_getPrototypeOf(o)}var constant_component_ConstantComponent=function(_SharedComponent){constant_component_inherits(ConstantComponent,_SharedComponent);var _super=constant_component_createSuper(ConstantComponent);function ConstantComponent(name,parent,options){var _this;constant_component_classCallCheck(this,ConstantComponent);_this=_super.call(this,name,parent);if(external_kbnSharedDeps_Lodash_default.a.isString(options)){options=[options]}_this.options=options||[name];return _this}constant_component_createClass(ConstantComponent,[{key:"getTerms",value:function getTerms(){return this.options}},{key:"addOption",value:function addOption(options){if(!Array.isArray(options)){options=[options]}[].push.apply(this.options,options);this.options=external_kbnSharedDeps_Lodash_default.a.uniq(this.options)}},{key:"match",value:function match(token,context,editor){if(token!==this.name){return null}return _get(constant_component_getPrototypeOf(ConstantComponent.prototype),"match",this).call(this,token,context,editor)}}]);return ConstantComponent}(shared_component_SharedComponent);function list_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function list_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function list_component_createClass(Constructor,protoProps,staticProps){if(protoProps)list_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)list_component_defineProperties(Constructor,staticProps);return Constructor}function list_component_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){list_component_get=Reflect.get}else{list_component_get=function _get(target,property,receiver){var base=list_component_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return list_component_get(target,property,receiver||target)}function list_component_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=list_component_getPrototypeOf(object);if(object===null)break}return object}function list_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)list_component_setPrototypeOf(subClass,superClass)}function list_component_setPrototypeOf(o,p){list_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return list_component_setPrototypeOf(o,p)}function list_component_createSuper(Derived){var hasNativeReflectConstruct=list_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=list_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=list_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return list_component_possibleConstructorReturn(this,result)}}function list_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return list_component_assertThisInitialized(self)}function list_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function list_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function list_component_getPrototypeOf(o){list_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return list_component_getPrototypeOf(o)}var list_component_ListComponent=function(_SharedComponent){list_component_inherits(ListComponent,_SharedComponent);var _super=list_component_createSuper(ListComponent);function ListComponent(name,list,parent,multiValued,allowNonValidValues){var _this;list_component_classCallCheck(this,ListComponent);_this=_super.call(this,name,parent);_this.listGenerator=Array.isArray(list)?function(){return list}:list;_this.multiValued=external_kbnSharedDeps_Lodash_default.a.isUndefined(multiValued)?true:multiValued;_this.allowNonValidValues=external_kbnSharedDeps_Lodash_default.a.isUndefined(allowNonValidValues)?false:allowNonValidValues;return _this}list_component_createClass(ListComponent,[{key:"getTerms",value:function getTerms(context,editor){if(!this.multiValued&&context.otherTokenValues){return[]}var alreadySet=context.otherTokenValues||[];if(external_kbnSharedDeps_Lodash_default.a.isString(alreadySet)){alreadySet=[alreadySet]}var ret=external_kbnSharedDeps_Lodash_default.a.difference(this.listGenerator(context,editor),alreadySet);if(this.getDefaultTermMeta()){var meta=this.getDefaultTermMeta();ret=external_kbnSharedDeps_Lodash_default.a.map(ret,(function(term){if(external_kbnSharedDeps_Lodash_default.a.isString(term)){term={name:term}}return external_kbnSharedDeps_Lodash_default.a.defaults(term,{meta:meta})}))}return ret}},{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}var list=this.listGenerator();var notFound=external_kbnSharedDeps_Lodash_default.a.some(tokens,(function(token){return list.indexOf(token)===-1}));if(notFound){return false}return true}},{key:"getContextKey",value:function getContextKey(){return this.name}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return this.name}},{key:"match",value:function match(token,context,editor){if(!Array.isArray(token)){token=[token]}if(!this.allowNonValidValues&&!this.validateTokens(token,context,editor)){return null}var result=list_component_get(list_component_getPrototypeOf(ListComponent.prototype),"match",this).call(this,token,context,editor);result.context_values=result.context_values||{};result.context_values[this.getContextKey()]=token;return result}}]);return ListComponent}(shared_component_SharedComponent);function simple_param_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function simple_param_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function simple_param_component_createClass(Constructor,protoProps,staticProps){if(protoProps)simple_param_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)simple_param_component_defineProperties(Constructor,staticProps);return Constructor}function simple_param_component_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){simple_param_component_get=Reflect.get}else{simple_param_component_get=function _get(target,property,receiver){var base=simple_param_component_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return simple_param_component_get(target,property,receiver||target)}function simple_param_component_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=simple_param_component_getPrototypeOf(object);if(object===null)break}return object}function simple_param_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)simple_param_component_setPrototypeOf(subClass,superClass)}function simple_param_component_setPrototypeOf(o,p){simple_param_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return simple_param_component_setPrototypeOf(o,p)}function simple_param_component_createSuper(Derived){var hasNativeReflectConstruct=simple_param_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=simple_param_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=simple_param_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return simple_param_component_possibleConstructorReturn(this,result)}}function simple_param_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return simple_param_component_assertThisInitialized(self)}function simple_param_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function simple_param_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function simple_param_component_getPrototypeOf(o){simple_param_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return simple_param_component_getPrototypeOf(o)}var SimpleParamComponent=function(_SharedComponent){simple_param_component_inherits(SimpleParamComponent,_SharedComponent);var _super=simple_param_component_createSuper(SimpleParamComponent);function SimpleParamComponent(name,parent){simple_param_component_classCallCheck(this,SimpleParamComponent);return _super.call(this,name,parent)}simple_param_component_createClass(SimpleParamComponent,[{key:"match",value:function match(token,context,editor){var result=simple_param_component_get(simple_param_component_getPrototypeOf(SimpleParamComponent.prototype),"match",this).call(this,token,context,editor);result.context_values=result.context_values||{};result.context_values[this.name]=token;return result}}]);return SimpleParamComponent}(shared_component_SharedComponent);function conditional_proxy_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function conditional_proxy_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function conditional_proxy_createClass(Constructor,protoProps,staticProps){if(protoProps)conditional_proxy_defineProperties(Constructor.prototype,protoProps);if(staticProps)conditional_proxy_defineProperties(Constructor,staticProps);return Constructor}function conditional_proxy_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)conditional_proxy_setPrototypeOf(subClass,superClass)}function conditional_proxy_setPrototypeOf(o,p){conditional_proxy_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return conditional_proxy_setPrototypeOf(o,p)}function conditional_proxy_createSuper(Derived){var hasNativeReflectConstruct=conditional_proxy_isNativeReflectConstruct();return function _createSuperInternal(){var Super=conditional_proxy_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=conditional_proxy_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return conditional_proxy_possibleConstructorReturn(this,result)}}function conditional_proxy_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return conditional_proxy_assertThisInitialized(self)}function conditional_proxy_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function conditional_proxy_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function conditional_proxy_getPrototypeOf(o){conditional_proxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return conditional_proxy_getPrototypeOf(o)}var ConditionalProxy=function(_SharedComponent){conditional_proxy_inherits(ConditionalProxy,_SharedComponent);var _super=conditional_proxy_createSuper(ConditionalProxy);function ConditionalProxy(predicate,delegate){var _this;conditional_proxy_classCallCheck(this,ConditionalProxy);_this=_super.call(this,"__condition");_this.predicate=predicate;_this.delegate=delegate;return _this}conditional_proxy_createClass(ConditionalProxy,[{key:"getTerms",value:function getTerms(context,editor){if(this.predicate(context,editor)){return this.delegate.getTerms(context,editor)}else{return null}}},{key:"match",value:function match(token,context,editor){if(this.predicate(context,editor)){return this.delegate.match(token,context,editor)}else{return false}}}]);return ConditionalProxy}(shared_component_SharedComponent);function global_only_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function global_only_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function global_only_component_createClass(Constructor,protoProps,staticProps){if(protoProps)global_only_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)global_only_component_defineProperties(Constructor,staticProps);return Constructor}function global_only_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)global_only_component_setPrototypeOf(subClass,superClass)}function global_only_component_setPrototypeOf(o,p){global_only_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return global_only_component_setPrototypeOf(o,p)}function global_only_component_createSuper(Derived){var hasNativeReflectConstruct=global_only_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=global_only_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=global_only_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return global_only_component_possibleConstructorReturn(this,result)}}function global_only_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return global_only_component_assertThisInitialized(self)}function global_only_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function global_only_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function global_only_component_getPrototypeOf(o){global_only_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return global_only_component_getPrototypeOf(o)}var GlobalOnlyComponent=function(_SharedComponent){global_only_component_inherits(GlobalOnlyComponent,_SharedComponent);var _super=global_only_component_createSuper(GlobalOnlyComponent);function GlobalOnlyComponent(){global_only_component_classCallCheck(this,GlobalOnlyComponent);return _super.apply(this,arguments)}global_only_component_createClass(GlobalOnlyComponent,[{key:"getTerms",value:function getTerms(){return null}},{key:"match",value:function match(token,context){var result={next:[]};var globalRules=context.globalComponentResolver(token,false);if(globalRules){result.next.push.apply(result.next,globalRules)}if(result.next.length){return result}result.next=[this];return result}}]);return GlobalOnlyComponent}(shared_component_SharedComponent);function object_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function object_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function object_component_createClass(Constructor,protoProps,staticProps){if(protoProps)object_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)object_component_defineProperties(Constructor,staticProps);return Constructor}function object_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)object_component_setPrototypeOf(subClass,superClass)}function object_component_setPrototypeOf(o,p){object_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return object_component_setPrototypeOf(o,p)}function object_component_createSuper(Derived){var hasNativeReflectConstruct=object_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=object_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=object_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return object_component_possibleConstructorReturn(this,result)}}function object_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return object_component_assertThisInitialized(self)}function object_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function object_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function object_component_getPrototypeOf(o){object_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return object_component_getPrototypeOf(o)}var object_component_ObjectComponent=function(_SharedComponent){object_component_inherits(ObjectComponent,_SharedComponent);var _super=object_component_createSuper(ObjectComponent);function ObjectComponent(name,constants,patternsAndWildCards){var _this;object_component_classCallCheck(this,ObjectComponent);_this=_super.call(this,name);_this.constants=constants;_this.patternsAndWildCards=patternsAndWildCards;return _this}object_component_createClass(ObjectComponent,[{key:"getTerms",value:function getTerms(context,editor){var options=[];external_kbnSharedDeps_Lodash_default.a.each(this.constants,(function(component){options.push.apply(options,component.getTerms(context,editor))}));external_kbnSharedDeps_Lodash_default.a.each(this.patternsAndWildCards,(function(component){options.push.apply(options,component.getTerms(context,editor))}));return options}},{key:"match",value:function match(token,context,editor){var result={next:[]};external_kbnSharedDeps_Lodash_default.a.each(this.constants,(function(component){var componentResult=component.match(token,context,editor);if(componentResult&&componentResult.next){result.next.push.apply(result.next,componentResult.next)}}));var globalRules=context.globalComponentResolver(token,false);if(globalRules){result.next.push.apply(result.next,globalRules)}if(result.next.length){return result}external_kbnSharedDeps_Lodash_default.a.each(this.patternsAndWildCards,(function(component){var componentResult=component.match(token,context,editor);if(componentResult&&componentResult.next){result.next.push.apply(result.next,componentResult.next)}}));return result}}]);return ObjectComponent}(shared_component_SharedComponent);function accept_endpoint_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function accept_endpoint_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function accept_endpoint_component_createClass(Constructor,protoProps,staticProps){if(protoProps)accept_endpoint_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)accept_endpoint_component_defineProperties(Constructor,staticProps);return Constructor}function accept_endpoint_component_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){accept_endpoint_component_get=Reflect.get}else{accept_endpoint_component_get=function _get(target,property,receiver){var base=accept_endpoint_component_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return accept_endpoint_component_get(target,property,receiver||target)}function accept_endpoint_component_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=accept_endpoint_component_getPrototypeOf(object);if(object===null)break}return object}function accept_endpoint_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)accept_endpoint_component_setPrototypeOf(subClass,superClass)}function accept_endpoint_component_setPrototypeOf(o,p){accept_endpoint_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return accept_endpoint_component_setPrototypeOf(o,p)}function accept_endpoint_component_createSuper(Derived){var hasNativeReflectConstruct=accept_endpoint_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=accept_endpoint_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=accept_endpoint_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return accept_endpoint_component_possibleConstructorReturn(this,result)}}function accept_endpoint_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return accept_endpoint_component_assertThisInitialized(self)}function accept_endpoint_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function accept_endpoint_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function accept_endpoint_component_getPrototypeOf(o){accept_endpoint_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return accept_endpoint_component_getPrototypeOf(o)}var URL_PATH_END_MARKER="__url_path_end__";var accept_endpoint_component_AcceptEndpointComponent=function(_SharedComponent){accept_endpoint_component_inherits(AcceptEndpointComponent,_SharedComponent);var _super=accept_endpoint_component_createSuper(AcceptEndpointComponent);function AcceptEndpointComponent(endpoint,parent){var _this;accept_endpoint_component_classCallCheck(this,AcceptEndpointComponent);_this=_super.call(this,endpoint.id,parent);_this.endpoint=endpoint;return _this}accept_endpoint_component_createClass(AcceptEndpointComponent,[{key:"match",value:function match(token,context,editor){if(token!==URL_PATH_END_MARKER){return null}if(this.endpoint.methods&&-1===external_kbnSharedDeps_Lodash_default.a.indexOf(this.endpoint.methods,context.method)){return null}var r=accept_endpoint_component_get(accept_endpoint_component_getPrototypeOf(AcceptEndpointComponent.prototype),"match",this).call(this,token,context,editor);r.context_values=r.context_values||{};r.context_values.endpoint=this.endpoint;if(external_kbnSharedDeps_Lodash_default.a.isNumber(this.endpoint.priority)){r.priority=this.endpoint.priority}return r}}]);return AcceptEndpointComponent}(shared_component_SharedComponent);function full_request_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function full_request_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function full_request_component_createClass(Constructor,protoProps,staticProps){if(protoProps)full_request_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)full_request_component_defineProperties(Constructor,staticProps);return Constructor}function full_request_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)full_request_component_setPrototypeOf(subClass,superClass)}function full_request_component_setPrototypeOf(o,p){full_request_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return full_request_component_setPrototypeOf(o,p)}function full_request_component_createSuper(Derived){var hasNativeReflectConstruct=full_request_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=full_request_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=full_request_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return full_request_component_possibleConstructorReturn(this,result)}}function full_request_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return full_request_component_assertThisInitialized(self)}function full_request_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function full_request_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function full_request_component_getPrototypeOf(o){full_request_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return full_request_component_getPrototypeOf(o)}function full_request_component_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FullRequestComponent=function(_ConstantComponent){full_request_component_inherits(FullRequestComponent,_ConstantComponent);var _super=full_request_component_createSuper(FullRequestComponent);function FullRequestComponent(name,parent,template){var _this;full_request_component_classCallCheck(this,FullRequestComponent);_this=_super.call(this,name,parent);_this.template=template;full_request_component_defineProperty(full_request_component_assertThisInitialized(_this),"name",void 0);_this.name=name;return _this}full_request_component_createClass(FullRequestComponent,[{key:"getTerms",value:function getTerms(){return[{name:this.name,snippet:this.template}]}}]);return FullRequestComponent}(constant_component_ConstantComponent);function url_pattern_matcher_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function url_pattern_matcher_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function url_pattern_matcher_createClass(Constructor,protoProps,staticProps){if(protoProps)url_pattern_matcher_defineProperties(Constructor.prototype,protoProps);if(staticProps)url_pattern_matcher_defineProperties(Constructor,staticProps);return Constructor}function url_pattern_matcher_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var url_pattern_matcher_UrlPatternMatcher=function(){function UrlPatternMatcher(parametrizedComponentFactories){var _this=this;url_pattern_matcher_classCallCheck(this,UrlPatternMatcher);url_pattern_matcher_defineProperty(this,"getTopLevelComponents",(function(method){var methodRoot=this[method];if(!methodRoot){return[]}return methodRoot.rootComponent.next}));["HEAD","GET","PUT","POST","DELETE"].forEach((function(method){_this[method]={rootComponent:new shared_component_SharedComponent("ROOT"),parametrizedComponentFactories:parametrizedComponentFactories||{getComponent:function getComponent(){}}}}))}url_pattern_matcher_createClass(UrlPatternMatcher,[{key:"addEndpoint",value:function addEndpoint(pattern,endpoint){var _this2=this;endpoint.methods.forEach((function(method){var c;var activeComponent=_this2[method].rootComponent;if(endpoint.template){new FullRequestComponent(pattern+"[body]",activeComponent,endpoint.template)}var endpointComponents=endpoint.url_components||{};var partList=pattern.split("/");external_kbnSharedDeps_Lodash_default.a.each(partList,(function(part,partIndex){if(part.search(/^{.+}$/)>=0){part=part.substr(1,part.length-2);if(activeComponent.getComponent(part)){activeComponent=activeComponent.getComponent(part);return}if(c=endpointComponents[part]){if(Array.isArray(c)){c=new list_component_ListComponent(part,c,activeComponent)}else if(external_kbnSharedDeps_Lodash_default.a.isObject(c)&&c.type==="list"){c=new list_component_ListComponent(part,c.list,activeComponent,c.multiValued,c.allow_non_valid)}else{console.warn("incorrectly configured url component ",part," in endpoint",endpoint);c=new shared_component_SharedComponent(part)}}else if(c=_this2[method].parametrizedComponentFactories.getComponent(part)){c=c(part,activeComponent)}else{c=new SimpleParamComponent(part,activeComponent)}activeComponent=c}else{var lookAhead=part;var s;for(partIndex++;partIndex<partList.length;partIndex++){s=partList[partIndex];if(s.indexOf("{")>=0){break}lookAhead+="/"+s}if(activeComponent.getComponent(part)){activeComponent=activeComponent.getComponent(part);activeComponent.addOption(lookAhead)}else{c=new constant_component_ConstantComponent(part,activeComponent,lookAhead);activeComponent=c}}}));new accept_endpoint_component_AcceptEndpointComponent(endpoint,activeComponent)}))}}]);return UrlPatternMatcher}();function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||mappings_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mappings_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return mappings_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mappings_arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return mappings_arrayLikeToArray(arr)}function mappings_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var POLL_INTERVAL=6e4;var pollTimeoutId;var perIndexTypes={};var perAliasIndexes=[];var mappings_templates=[];var mappingObj={};function expandAliases(indicesOrAliases){if(!indicesOrAliases){return indicesOrAliases}if(typeof indicesOrAliases==="string"){indicesOrAliases=[indicesOrAliases]}indicesOrAliases=external_kbnSharedDeps_Jquery_default.a.map(indicesOrAliases,(function(iOrA){if(perAliasIndexes[iOrA]){return perAliasIndexes[iOrA]}return[iOrA]}));var ret=[].concat.apply([],indicesOrAliases);ret.sort();var last;ret=external_kbnSharedDeps_Jquery_default.a.map(ret,(function(v){var r=last===v?null:v;last=v;return r}));return ret.length>1?ret:ret[0]}function getTemplates(){return _toConsumableArray(mappings_templates)}function getFields(indices,types){var ret=[];indices=expandAliases(indices);if(typeof indices==="string"){var typeDict=perIndexTypes[indices];if(!typeDict){return[]}if(typeof types==="string"){var f=typeDict[types];ret=f?f:[]}else{external_kbnSharedDeps_Jquery_default.a.each(typeDict,(function(type,fields){if(!types||types.length===0||external_kbnSharedDeps_Jquery_default.a.inArray(type,types)!==-1){ret.push(fields)}}));ret=[].concat.apply([],ret)}}else{external_kbnSharedDeps_Jquery_default.a.each(perIndexTypes,(function(index){if(!indices||indices.length===0||external_kbnSharedDeps_Jquery_default.a.inArray(index,indices)!==-1){ret.push(getFields(index,types))}}));ret=[].concat.apply([],ret)}return external_kbnSharedDeps_Lodash_default.a.uniqBy(ret,(function(f){return f.name+":"+f.type}))}function getTypes(indices){var ret=[];indices=expandAliases(indices);if(typeof indices==="string"){var typeDict=perIndexTypes[indices];if(!typeDict){return[]}external_kbnSharedDeps_Jquery_default.a.each(typeDict,(function(type){ret.push(type)}))}else{external_kbnSharedDeps_Jquery_default.a.each(perIndexTypes,(function(index){if(!indices||external_kbnSharedDeps_Jquery_default.a.inArray(index,indices)!==-1){ret.push(getTypes(index))}}));ret=[].concat.apply([],ret)}return external_kbnSharedDeps_Lodash_default.a.uniq(ret)}function getIndices(includeAliases){var ret=[];external_kbnSharedDeps_Jquery_default.a.each(perIndexTypes,(function(index){ret.push(index)}));if(typeof includeAliases==="undefined"?true:includeAliases){external_kbnSharedDeps_Jquery_default.a.each(perAliasIndexes,(function(alias){ret.push(alias)}))}return ret}function getFieldNamesFromFieldMapping(fieldName,fieldMapping){if(fieldMapping.enabled===false){return[]}var nestedFields;function applyPathSettings(nestedFieldNames){var pathType=fieldMapping.path||"full";if(pathType==="full"){return external_kbnSharedDeps_Jquery_default.a.map(nestedFieldNames,(function(f){f.name=fieldName+"."+f.name;return f}))}return nestedFieldNames}if(fieldMapping.properties){nestedFields=getFieldNamesFromProperties(fieldMapping.properties);return applyPathSettings(nestedFields)}var fieldType=fieldMapping.type;var ret={name:fieldName,type:fieldType};if(fieldMapping.index_name){ret.name=fieldMapping.index_name}if(fieldMapping.fields){nestedFields=external_kbnSharedDeps_Jquery_default.a.map(fieldMapping.fields,(function(fieldMapping,fieldName){return getFieldNamesFromFieldMapping(fieldName,fieldMapping)}));nestedFields=applyPathSettings(nestedFields);nestedFields.unshift(ret);return nestedFields}return[ret]}function getFieldNamesFromProperties(){var properties=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var fieldList=external_kbnSharedDeps_Jquery_default.a.map(properties,(function(fieldMapping,fieldName){return getFieldNamesFromFieldMapping(fieldName,fieldMapping)}));return external_kbnSharedDeps_Lodash_default.a.uniqBy(fieldList,(function(f){return f.name+":"+f.type}))}function loadTemplates(){var templatesObject=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};mappings_templates=Object.keys(templatesObject)}function loadMappings(mappings){perIndexTypes={};external_kbnSharedDeps_Jquery_default.a.each(mappings,(function(index,indexMapping){var normalizedIndexMappings={};if(indexMapping.mappings&&external_kbnSharedDeps_Lodash_default.a.keys(indexMapping).length===1){indexMapping=indexMapping.mappings}external_kbnSharedDeps_Jquery_default.a.each(indexMapping,(function(typeName,typeMapping){if(typeName==="properties"){var fieldList=getFieldNamesFromProperties(typeMapping);normalizedIndexMappings[typeName]=fieldList}else{normalizedIndexMappings[typeName]=[]}}));perIndexTypes[index]=normalizedIndexMappings}))}function loadAliases(aliases){perAliasIndexes={};external_kbnSharedDeps_Jquery_default.a.each(aliases||{},(function(index,omdexAliases){perIndexTypes[index]=perIndexTypes[index]||{};external_kbnSharedDeps_Jquery_default.a.each(omdexAliases.aliases||{},(function(alias){if(alias===index){return}var curAliases=perAliasIndexes[alias];if(!curAliases){curAliases=[];perAliasIndexes[alias]=curAliases}curAliases.push(index)}))}));perAliasIndexes._all=getIndices(false)}function mappings_clear(){perIndexTypes={};perAliasIndexes={};mappings_templates=[]}function retrieveSettings(settingsKey,settingsToRetrieve){var settingKeyToPathMap={fields:"_mapping",indices:"_aliases",templates:"_template"};if(settingsToRetrieve[settingsKey]===true){return send("GET",settingKeyToPathMap[settingsKey],null)}else{var settingsPromise=new external_kbnSharedDeps_Jquery_default.a.Deferred;if(settingsToRetrieve[settingsKey]===false){return settingsPromise.resolveWith(this,[[JSON.stringify({})]])}else{return settingsPromise.resolve()}}}function clearSubscriptions(){if(pollTimeoutId){clearTimeout(pollTimeoutId)}}function retrieveAutoCompleteInfo(settings,settingsToRetrieve){clearSubscriptions();var mappingPromise=retrieveSettings("fields",settingsToRetrieve);var aliasesPromise=retrieveSettings("indices",settingsToRetrieve);var templatesPromise=retrieveSettings("templates",settingsToRetrieve);external_kbnSharedDeps_Jquery_default.a.when(mappingPromise,aliasesPromise,templatesPromise).done((function(mappings,aliases,templates){var mappingsResponse;if(mappings){var maxMappingSize=mappings[0].length>10*1024*1024;if(maxMappingSize){console.warn("Mapping size is larger than 10MB (".concat(mappings[0].length/1024/1024," MB). Ignoring..."));mappingsResponse="[{}]"}else{mappingsResponse=mappings[0]}loadMappings(JSON.parse(mappingsResponse))}if(aliases){loadAliases(JSON.parse(aliases[0]))}if(templates){loadTemplates(JSON.parse(templates[0]))}if(mappings&&aliases){external_kbnSharedDeps_Jquery_default()(mappingObj).trigger("update",[mappingsResponse,aliases[0]])}pollTimeoutId=setTimeout((function(){if(settings.getPolling()){retrieveAutoCompleteInfo(settings,settings.getAutocomplete())}}),POLL_INTERVAL)}))}function index_autocomplete_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function index_autocomplete_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function index_autocomplete_component_createClass(Constructor,protoProps,staticProps){if(protoProps)index_autocomplete_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)index_autocomplete_component_defineProperties(Constructor,staticProps);return Constructor}function index_autocomplete_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)index_autocomplete_component_setPrototypeOf(subClass,superClass)}function index_autocomplete_component_setPrototypeOf(o,p){index_autocomplete_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return index_autocomplete_component_setPrototypeOf(o,p)}function index_autocomplete_component_createSuper(Derived){var hasNativeReflectConstruct=index_autocomplete_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=index_autocomplete_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=index_autocomplete_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return index_autocomplete_component_possibleConstructorReturn(this,result)}}function index_autocomplete_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return index_autocomplete_component_assertThisInitialized(self)}function index_autocomplete_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function index_autocomplete_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function index_autocomplete_component_getPrototypeOf(o){index_autocomplete_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return index_autocomplete_component_getPrototypeOf(o)}function nonValidIndexType(token){return!(token==="_all"||token[0]!=="_")}var index_autocomplete_component_IndexAutocompleteComponent=function(_ListComponent){index_autocomplete_component_inherits(IndexAutocompleteComponent,_ListComponent);var _super=index_autocomplete_component_createSuper(IndexAutocompleteComponent);function IndexAutocompleteComponent(name,parent,multiValued){index_autocomplete_component_classCallCheck(this,IndexAutocompleteComponent);return _super.call(this,name,getIndices,parent,multiValued)}index_autocomplete_component_createClass(IndexAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!external_kbnSharedDeps_Lodash_default.a.find(tokens,nonValidIndexType)}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"index"}},{key:"getContextKey",value:function getContextKey(){return"indices"}}]);return IndexAutocompleteComponent}(list_component_ListComponent);function field_autocomplete_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function field_autocomplete_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function field_autocomplete_component_createClass(Constructor,protoProps,staticProps){if(protoProps)field_autocomplete_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)field_autocomplete_component_defineProperties(Constructor,staticProps);return Constructor}function field_autocomplete_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)field_autocomplete_component_setPrototypeOf(subClass,superClass)}function field_autocomplete_component_setPrototypeOf(o,p){field_autocomplete_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return field_autocomplete_component_setPrototypeOf(o,p)}function field_autocomplete_component_createSuper(Derived){var hasNativeReflectConstruct=field_autocomplete_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=field_autocomplete_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=field_autocomplete_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return field_autocomplete_component_possibleConstructorReturn(this,result)}}function field_autocomplete_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return field_autocomplete_component_assertThisInitialized(self)}function field_autocomplete_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function field_autocomplete_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function field_autocomplete_component_getPrototypeOf(o){field_autocomplete_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return field_autocomplete_component_getPrototypeOf(o)}function FieldGenerator(context){return external_kbnSharedDeps_Lodash_default.a.map(getFields(context.indices,context.types),(function(field){return{name:field.name,meta:field.type}}))}var field_autocomplete_component_FieldAutocompleteComponent=function(_ListComponent){field_autocomplete_component_inherits(FieldAutocompleteComponent,_ListComponent);var _super=field_autocomplete_component_createSuper(FieldAutocompleteComponent);function FieldAutocompleteComponent(name,parent,multiValued){field_autocomplete_component_classCallCheck(this,FieldAutocompleteComponent);return _super.call(this,name,FieldGenerator,parent,multiValued)}field_autocomplete_component_createClass(FieldAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!external_kbnSharedDeps_Lodash_default.a.find(tokens,(function(token){return token.match(/[^\w.?*]/)}))}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"field"}},{key:"getContextKey",value:function getContextKey(){return"fields"}}]);return FieldAutocompleteComponent}(list_component_ListComponent);function type_autocomplete_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function type_autocomplete_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function type_autocomplete_component_createClass(Constructor,protoProps,staticProps){if(protoProps)type_autocomplete_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)type_autocomplete_component_defineProperties(Constructor,staticProps);return Constructor}function type_autocomplete_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)type_autocomplete_component_setPrototypeOf(subClass,superClass)}function type_autocomplete_component_setPrototypeOf(o,p){type_autocomplete_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return type_autocomplete_component_setPrototypeOf(o,p)}function type_autocomplete_component_createSuper(Derived){var hasNativeReflectConstruct=type_autocomplete_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=type_autocomplete_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=type_autocomplete_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return type_autocomplete_component_possibleConstructorReturn(this,result)}}function type_autocomplete_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return type_autocomplete_component_assertThisInitialized(self)}function type_autocomplete_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function type_autocomplete_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function type_autocomplete_component_getPrototypeOf(o){type_autocomplete_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return type_autocomplete_component_getPrototypeOf(o)}function TypeGenerator(context){return getTypes(context.indices)}function type_autocomplete_component_nonValidIndexType(token){return!(token==="_all"||token[0]!=="_")}var type_autocomplete_component_TypeAutocompleteComponent=function(_ListComponent){type_autocomplete_component_inherits(TypeAutocompleteComponent,_ListComponent);var _super=type_autocomplete_component_createSuper(TypeAutocompleteComponent);function TypeAutocompleteComponent(name,parent,multiValued){type_autocomplete_component_classCallCheck(this,TypeAutocompleteComponent);return _super.call(this,name,TypeGenerator,parent,multiValued)}type_autocomplete_component_createClass(TypeAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!external_kbnSharedDeps_Lodash_default.a.find(tokens,type_autocomplete_component_nonValidIndexType)}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"type"}},{key:"getContextKey",value:function getContextKey(){return"types"}}]);return TypeAutocompleteComponent}(list_component_ListComponent);function id_autocomplete_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function id_autocomplete_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function id_autocomplete_component_createClass(Constructor,protoProps,staticProps){if(protoProps)id_autocomplete_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)id_autocomplete_component_defineProperties(Constructor,staticProps);return Constructor}function id_autocomplete_component_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){id_autocomplete_component_get=Reflect.get}else{id_autocomplete_component_get=function _get(target,property,receiver){var base=id_autocomplete_component_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return id_autocomplete_component_get(target,property,receiver||target)}function id_autocomplete_component_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=id_autocomplete_component_getPrototypeOf(object);if(object===null)break}return object}function id_autocomplete_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)id_autocomplete_component_setPrototypeOf(subClass,superClass)}function id_autocomplete_component_setPrototypeOf(o,p){id_autocomplete_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return id_autocomplete_component_setPrototypeOf(o,p)}function id_autocomplete_component_createSuper(Derived){var hasNativeReflectConstruct=id_autocomplete_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=id_autocomplete_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=id_autocomplete_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return id_autocomplete_component_possibleConstructorReturn(this,result)}}function id_autocomplete_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return id_autocomplete_component_assertThisInitialized(self)}function id_autocomplete_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function id_autocomplete_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function id_autocomplete_component_getPrototypeOf(o){id_autocomplete_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return id_autocomplete_component_getPrototypeOf(o)}var id_autocomplete_component_IdAutocompleteComponent=function(_SharedComponent){id_autocomplete_component_inherits(IdAutocompleteComponent,_SharedComponent);var _super=id_autocomplete_component_createSuper(IdAutocompleteComponent);function IdAutocompleteComponent(name,parent,multi){var _this;id_autocomplete_component_classCallCheck(this,IdAutocompleteComponent);_this=_super.call(this,name,parent);_this.multi_match=multi;return _this}id_autocomplete_component_createClass(IdAutocompleteComponent,[{key:"match",value:function match(token,context,editor){if(!token){return null}if(!this.multi_match&&Array.isArray(token)){return null}token=Array.isArray(token)?token:[token];if(external_kbnSharedDeps_Lodash_default.a.find(token,(function(t){return t.match(/[\/,]/)}))){return null}var r=id_autocomplete_component_get(id_autocomplete_component_getPrototypeOf(IdAutocompleteComponent.prototype),"match",this).call(this,token,context,editor);r.context_values=r.context_values||{};r.context_values.id=token;return r}}]);return IdAutocompleteComponent}(shared_component_SharedComponent);function template_autocomplete_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function template_autocomplete_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function template_autocomplete_component_createClass(Constructor,protoProps,staticProps){if(protoProps)template_autocomplete_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)template_autocomplete_component_defineProperties(Constructor,staticProps);return Constructor}function template_autocomplete_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)template_autocomplete_component_setPrototypeOf(subClass,superClass)}function template_autocomplete_component_setPrototypeOf(o,p){template_autocomplete_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return template_autocomplete_component_setPrototypeOf(o,p)}function template_autocomplete_component_createSuper(Derived){var hasNativeReflectConstruct=template_autocomplete_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=template_autocomplete_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=template_autocomplete_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return template_autocomplete_component_possibleConstructorReturn(this,result)}}function template_autocomplete_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return template_autocomplete_component_assertThisInitialized(self)}function template_autocomplete_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function template_autocomplete_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function template_autocomplete_component_getPrototypeOf(o){template_autocomplete_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return template_autocomplete_component_getPrototypeOf(o)}var template_autocomplete_component_TemplateAutocompleteComponent=function(_ListComponent){template_autocomplete_component_inherits(TemplateAutocompleteComponent,_ListComponent);var _super=template_autocomplete_component_createSuper(TemplateAutocompleteComponent);function TemplateAutocompleteComponent(name,parent){template_autocomplete_component_classCallCheck(this,TemplateAutocompleteComponent);return _super.call(this,name,getTemplates,parent,true,true)}template_autocomplete_component_createClass(TemplateAutocompleteComponent,[{key:"getContextKey",value:function getContextKey(){return"template"}}]);return TemplateAutocompleteComponent}(list_component_ListComponent);function username_autocomplete_component_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function username_autocomplete_component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function username_autocomplete_component_createClass(Constructor,protoProps,staticProps){if(protoProps)username_autocomplete_component_defineProperties(Constructor.prototype,protoProps);if(staticProps)username_autocomplete_component_defineProperties(Constructor,staticProps);return Constructor}function username_autocomplete_component_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)username_autocomplete_component_setPrototypeOf(subClass,superClass)}function username_autocomplete_component_setPrototypeOf(o,p){username_autocomplete_component_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return username_autocomplete_component_setPrototypeOf(o,p)}function username_autocomplete_component_createSuper(Derived){var hasNativeReflectConstruct=username_autocomplete_component_isNativeReflectConstruct();return function _createSuperInternal(){var Super=username_autocomplete_component_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=username_autocomplete_component_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return username_autocomplete_component_possibleConstructorReturn(this,result)}}function username_autocomplete_component_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return username_autocomplete_component_assertThisInitialized(self)}function username_autocomplete_component_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function username_autocomplete_component_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function username_autocomplete_component_getPrototypeOf(o){username_autocomplete_component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return username_autocomplete_component_getPrototypeOf(o)}function nonValidUsernameType(token){return token[0]==="_"}var username_autocomplete_component_UsernameAutocompleteComponent=function(_ListComponent){username_autocomplete_component_inherits(UsernameAutocompleteComponent,_ListComponent);var _super=username_autocomplete_component_createSuper(UsernameAutocompleteComponent);function UsernameAutocompleteComponent(name,parent,multiValued){username_autocomplete_component_classCallCheck(this,UsernameAutocompleteComponent);return _super.call(this,name,getIndices,parent,multiValued)}username_autocomplete_component_createClass(UsernameAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!external_kbnSharedDeps_Lodash_default.a.find(tokens,nonValidUsernameType)}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"username"}},{key:"getContextKey",value:function getContextKey(){return"username"}}]);return UsernameAutocompleteComponent}(list_component_ListComponent);function url_params_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function url_params_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function url_params_createClass(Constructor,protoProps,staticProps){if(protoProps)url_params_defineProperties(Constructor.prototype,protoProps);if(staticProps)url_params_defineProperties(Constructor,staticProps);return Constructor}function url_params_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)url_params_setPrototypeOf(subClass,superClass)}function url_params_setPrototypeOf(o,p){url_params_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return url_params_setPrototypeOf(o,p)}function url_params_createSuper(Derived){var hasNativeReflectConstruct=url_params_isNativeReflectConstruct();return function _createSuperInternal(){var Super=url_params_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=url_params_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return url_params_possibleConstructorReturn(this,result)}}function url_params_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return url_params_assertThisInitialized(self)}function url_params_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function url_params_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function url_params_getPrototypeOf(o){url_params_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return url_params_getPrototypeOf(o)}var ParamComponent=function(_ConstantComponent){url_params_inherits(ParamComponent,_ConstantComponent);var _super=url_params_createSuper(ParamComponent);function ParamComponent(name,parent,description){var _this;url_params_classCallCheck(this,ParamComponent);_this=_super.call(this,name,parent);_this.description=description;return _this}url_params_createClass(ParamComponent,[{key:"getTerms",value:function getTerms(){var t={name:this.name};if(this.description==="__flag__"){t.meta="flag"}else{t.meta="param";t.insertValue=this.name+"="}return[t]}}]);return ParamComponent}(constant_component_ConstantComponent);var url_params_UrlParams=function(){function UrlParams(description,defaults){var _this2=this;url_params_classCallCheck(this,UrlParams);this.rootComponent=new shared_component_SharedComponent("ROOT");if(external_kbnSharedDeps_Lodash_default.a.isUndefined(defaults)){defaults={pretty:"__flag__",format:["json","yaml"],filter_path:""}}description=external_kbnSharedDeps_Lodash_default.a.clone(description||{});external_kbnSharedDeps_Lodash_default.a.defaults(description,defaults);external_kbnSharedDeps_Lodash_default.a.each(description,(function(pDescription,param){var component=new ParamComponent(param,_this2.rootComponent,pDescription);if(Array.isArray(pDescription)){new list_component_ListComponent(param,pDescription,component)}else if(pDescription==="__flag__"){new list_component_ListComponent(param,["true","false"],component)}}))}url_params_createClass(UrlParams,[{key:"getTopLevelComponents",value:function getTopLevelComponents(){return this.rootComponent.next}}]);return UrlParams}();function wrapComponentWithDefaults(component,defaults){var originalGetTerms=component.getTerms;component.getTerms=function(context,editor){var result=originalGetTerms.call(component,context,editor);if(!result){return result}result=external_kbnSharedDeps_Lodash_default.a.map(result,(function(term){if(!external_kbnSharedDeps_Lodash_default.a.isObject(term)){term={name:term}}return external_kbnSharedDeps_Lodash_default.a.defaults(term,defaults)}));return result};return component}var tracer=function tracer(){if(window.engine_trace){var _console$log;(_console$log=console.log).call.apply(_console$log,[console].concat(Array.prototype.slice.call(arguments)))}};function passThroughContext(context,extensionList){function PTC(){}PTC.prototype=context;var result=new PTC;if(extensionList){extensionList.unshift(result);external_kbnSharedDeps_Lodash_default.a.assign.apply(external_kbnSharedDeps_Lodash_default.a,extensionList);extensionList.shift()}return result}function WalkingState(parentName,components,contextExtensionList,depth,priority){this.parentName=parentName;this.components=components;this.contextExtensionList=contextExtensionList;this.depth=depth||0;this.priority=priority}function walkTokenPath(tokenPath,walkingStates,context,editor){if(!tokenPath||tokenPath.length===0){return walkingStates}var token=tokenPath[0];var nextWalkingStates=[];tracer("starting token evaluation ["+token+"]");external_kbnSharedDeps_Lodash_default.a.each(walkingStates,(function(ws){var contextForState=passThroughContext(context,ws.contextExtensionList);external_kbnSharedDeps_Lodash_default.a.each(ws.components,(function(component){tracer("evaluating ["+token+"] with ["+component.name+"]",component);var result=component.match(token,contextForState,editor);if(result&&!external_kbnSharedDeps_Lodash_default.a.isEmpty(result)){tracer("matched ["+token+"] with:",result);var next;var extensionList;if(result.next&&!Array.isArray(result.next)){next=[result.next]}else{next=result.next}if(result.context_values){extensionList=[];[].push.apply(extensionList,ws.contextExtensionList);extensionList.push(result.context_values)}else{extensionList=ws.contextExtensionList}var priority=ws.priority;if(external_kbnSharedDeps_Lodash_default.a.isNumber(result.priority)){if(external_kbnSharedDeps_Lodash_default.a.isNumber(priority)){priority=Math.min(priority,result.priority)}else{priority=result.priority}}nextWalkingStates.push(new WalkingState(component.name,next,extensionList,ws.depth+1,priority))}}))}));if(nextWalkingStates.length===0){return external_kbnSharedDeps_Lodash_default.a.map(walkingStates,(function(ws){return new WalkingState(ws.name,[],ws.contextExtensionList)}))}return walkTokenPath(tokenPath.slice(1),nextWalkingStates,context,editor)}function populateContext(tokenPath,context,editor,includeAutoComplete,components){var walkStates=walkTokenPath(tokenPath,[new WalkingState("ROOT",components,[])],context,editor);if(includeAutoComplete){var autoCompleteSet=[];external_kbnSharedDeps_Lodash_default.a.each(walkStates,(function(ws){var contextForState=passThroughContext(context,ws.contextExtensionList);external_kbnSharedDeps_Lodash_default.a.each(ws.components,(function(component){external_kbnSharedDeps_Lodash_default.a.each(component.getTerms(contextForState,editor),(function(term){if(!external_kbnSharedDeps_Lodash_default.a.isObject(term)){term={name:term}}autoCompleteSet.push(term)}))}))}));autoCompleteSet=external_kbnSharedDeps_Lodash_default.a.uniq(autoCompleteSet);context.autoCompleteSet=autoCompleteSet}if(walkStates.length!==0){var wsToUse;walkStates=external_kbnSharedDeps_Lodash_default.a.sortBy(walkStates,(function(ws){return external_kbnSharedDeps_Lodash_default.a.isNumber(ws.priority)?ws.priority:Number.MAX_VALUE}));wsToUse=external_kbnSharedDeps_Lodash_default.a.find(walkStates,(function(ws){return external_kbnSharedDeps_Lodash_default.a.isEmpty(ws.components)}));if(!wsToUse&&walkStates.length>1&&!includeAutoComplete){console.info("more then one context active for current path, but autocomplete isn't requested",walkStates)}if(!wsToUse){wsToUse=walkStates[0]}external_kbnSharedDeps_Lodash_default.a.each(wsToUse.contextExtensionList,(function(extension){external_kbnSharedDeps_Lodash_default.a.assign(context,extension)}))}}function body_completer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function body_completer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function body_completer_createClass(Constructor,protoProps,staticProps){if(protoProps)body_completer_defineProperties(Constructor.prototype,protoProps);if(staticProps)body_completer_defineProperties(Constructor,staticProps);return Constructor}function body_completer_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)body_completer_setPrototypeOf(subClass,superClass)}function body_completer_setPrototypeOf(o,p){body_completer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return body_completer_setPrototypeOf(o,p)}function body_completer_createSuper(Derived){var hasNativeReflectConstruct=body_completer_isNativeReflectConstruct();return function _createSuperInternal(){var Super=body_completer_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=body_completer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return body_completer_possibleConstructorReturn(this,result)}}function body_completer_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return body_completer_assertThisInitialized(self)}function body_completer_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function body_completer_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function body_completer_getPrototypeOf(o){body_completer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return body_completer_getPrototypeOf(o)}function CompilingContext(endpointId,parametrizedComponentFactories){this.parametrizedComponentFactories=parametrizedComponentFactories;this.endpointId=endpointId}function resolvePathToComponents(tokenPath,context,editor,components){var walkStates=walkTokenPath(tokenPath,[new WalkingState("ROOT",components,[])],context,editor);var result=[].concat.apply([],external_kbnSharedDeps_Lodash_default.a.map(walkStates,"components"));return result}var body_completer_ScopeResolver=function(_SharedComponent){body_completer_inherits(ScopeResolver,_SharedComponent);var _super=body_completer_createSuper(ScopeResolver);function ScopeResolver(link,compilingContext){var _this;body_completer_classCallCheck(this,ScopeResolver);_this=_super.call(this,"__scope_link");if(external_kbnSharedDeps_Lodash_default.a.isString(link)&&link[0]==="."){if(link==="."){link=compilingContext.endpointId}else{link=compilingContext.endpointId+link}}_this.link=link;_this.compilingContext=compilingContext;return _this}body_completer_createClass(ScopeResolver,[{key:"resolveLinkToComponents",value:function resolveLinkToComponents(context,editor){if(external_kbnSharedDeps_Lodash_default.a.isFunction(this.link)){var desc=this.link(context,editor);return compileDescription(desc,this.compilingContext)}if(!external_kbnSharedDeps_Lodash_default.a.isString(this.link)){throw new Error("unsupported link format",this.link)}var path=this.link.replace(/\./g,"{").split(/(\{)/);var endpoint=path[0];var components;try{if(endpoint==="GLOBAL"){if(path.length<3){throw new Error("missing term in global link: "+this.link)}var term=path[2];components=context.globalComponentResolver(term);path=path.slice(3)}else{path=path.slice(1);components=context.endpointComponentResolver(endpoint)}}catch(e){throw new Error("failed to resolve link ["+this.link+"]: "+e)}return resolvePathToComponents(path,context,editor,components)}},{key:"getTerms",value:function getTerms(context,editor){var options=[];var components=this.resolveLinkToComponents(context,editor);external_kbnSharedDeps_Lodash_default.a.each(components,(function(component){options.push.apply(options,component.getTerms(context,editor))}));return options}},{key:"match",value:function match(token,context,editor){var result={next:[]};var components=this.resolveLinkToComponents(context,editor);external_kbnSharedDeps_Lodash_default.a.each(components,(function(component){var componentResult=component.match(token,context,editor);if(componentResult&&componentResult.next){result.next.push.apply(result.next,componentResult.next)}}));return result}}]);return ScopeResolver}(shared_component_SharedComponent);function getTemplate(description){if(description.__template){if(description.__raw&&external_kbnSharedDeps_Lodash_default.a.isString(description.__template)){return{__raw:true,value:description.__template}}return description.__template}else if(description.__one_of){return getTemplate(description.__one_of[0])}else if(description.__any_of){return[]}else if(description.__scope_link){return{}}else if(Array.isArray(description)){if(description.length===1){if(external_kbnSharedDeps_Lodash_default.a.isObject(description[0])){var innerTemplate=getTemplate(description[0]);return innerTemplate!=null?[innerTemplate]:[]}}return[]}else if(external_kbnSharedDeps_Lodash_default.a.isObject(description)){return{}}else if(external_kbnSharedDeps_Lodash_default.a.isString(description)&&!/^\{.*\}$/.test(description)){return description}else{return description}}function getOptions(description){var options={};var template=getTemplate(description);if(!external_kbnSharedDeps_Lodash_default.a.isUndefined(template)){options.template=template}return options}function compileDescription(description,compilingContext){if(Array.isArray(description)){return[compileList(description,compilingContext)]}else if(external_kbnSharedDeps_Lodash_default.a.isObject(description)){if(description.__scope_link){return[new body_completer_ScopeResolver(description.__scope_link,compilingContext)]}if(description.__any_of){return[compileList(description.__any_of,compilingContext)]}if(description.__one_of){return external_kbnSharedDeps_Lodash_default.a.flatten(external_kbnSharedDeps_Lodash_default.a.map(description.__one_of,(function(d){return compileDescription(d,compilingContext)})))}var obj=compileObject(description,compilingContext);if(description.__condition){return[compileCondition(description.__condition,obj,compilingContext)]}else{return[obj]}}else if(external_kbnSharedDeps_Lodash_default.a.isString(description)&&/^\{.*\}$/.test(description)){return[compileParametrizedValue(description,compilingContext)]}else{return[new constant_component_ConstantComponent(description)]}}function compileParametrizedValue(value,compilingContext,template){value=value.substr(1,value.length-2).toLowerCase();var component=compilingContext.parametrizedComponentFactories.getComponent(value,true);if(!component){throw new Error("no factory found for '"+value+"'")}component=component(value,null,template);if(!external_kbnSharedDeps_Lodash_default.a.isUndefined(template)){component=wrapComponentWithDefaults(component,{template:template})}return component}function compileObject(objDescription,compilingContext){var objectC=new constant_component_ConstantComponent("{");var constants=[];var patterns=[];external_kbnSharedDeps_Lodash_default.a.each(objDescription,(function(desc,key){if(key.indexOf("__")===0){return}var options=getOptions(desc);var component;if(/^\{.*\}$/.test(key)){component=compileParametrizedValue(key,compilingContext,options.template);patterns.push(component)}else if(key==="*"){component=new shared_component_SharedComponent(key);patterns.push(component)}else{options.name=key;component=new constant_component_ConstantComponent(key,null,[options]);constants.push(component)}external_kbnSharedDeps_Lodash_default.a.map(compileDescription(desc,compilingContext),(function(subComponent){component.addComponent(subComponent)}))}));objectC.addComponent(new object_component_ObjectComponent("inner",constants,patterns));return objectC}function compileList(listRule,compilingContext){var listC=new constant_component_ConstantComponent("[");external_kbnSharedDeps_Lodash_default.a.each(listRule,(function(desc){external_kbnSharedDeps_Lodash_default.a.each(compileDescription(desc,compilingContext),(function(component){listC.addComponent(component)}))}));return listC}function compileCondition(description,compiledObject){if(description.lines_regex){return new ConditionalProxy((function(context,editor){var lines=editor.getLines(context.requestStartRow,editor.getCurrentPosition().lineNumber).join("\n");return new RegExp(description.lines_regex,"m").test(lines)}),compiledObject)}else{throw"unknown condition type - got: "+JSON.stringify(description)}}function globalsOnlyAutocompleteComponents(){return[new GlobalOnlyComponent("__global__")]}function compileBodyDescription(endpointId,description,parametrizedComponentFactories){return compileDescription(description,new CompilingContext(endpointId,parametrizedComponentFactories))}function Api(urlParametrizedComponentFactories,bodyParametrizedComponentFactories){this.globalRules=Object.create(null);this.endpoints=Object.create(null);this.urlPatternMatcher=new url_pattern_matcher_UrlPatternMatcher(urlParametrizedComponentFactories);this.globalBodyComponentFactories=bodyParametrizedComponentFactories;this.name=""}(function(cls){cls.addGlobalAutocompleteRules=function(parentNode,rules){this.globalRules[parentNode]=compileBodyDescription("GLOBAL."+parentNode,rules,this.globalBodyComponentFactories)};cls.getGlobalAutocompleteComponents=function(term,throwOnMissing){var result=this.globalRules[term];if(external_kbnSharedDeps_Lodash_default.a.isUndefined(result)&&(throwOnMissing||external_kbnSharedDeps_Lodash_default.a.isUndefined(throwOnMissing))){throw new Error("failed to resolve global components for  ['"+term+"']")}return result};cls.addEndpointDescription=function(endpoint,description){var _this=this;var copiedDescription={};external_kbnSharedDeps_Lodash_default.a.assign(copiedDescription,description||{});external_kbnSharedDeps_Lodash_default.a.defaults(copiedDescription,{id:endpoint,patterns:[endpoint],methods:["GET"]});external_kbnSharedDeps_Lodash_default.a.each(copiedDescription.patterns,(function(p){_this.urlPatternMatcher.addEndpoint(p,copiedDescription)}));copiedDescription.paramsAutocomplete=new url_params_UrlParams(copiedDescription.url_params);copiedDescription.bodyAutocompleteRootComponents=compileBodyDescription(copiedDescription.id,copiedDescription.data_autocomplete_rules,this.globalBodyComponentFactories);this.endpoints[endpoint]=copiedDescription};cls.getEndpointDescriptionByEndpoint=function(endpoint){return this.endpoints[endpoint]};cls.getTopLevelUrlCompleteComponents=function(method){return this.urlPatternMatcher.getTopLevelComponents(method)};cls.getUnmatchedEndpointComponents=function(){return globalsOnlyAutocompleteComponents()};cls.clear=function(){this.endpoints={};this.globalRules={}}})(Api.prototype);var kb_api=Api;var ACTIVE_API=new kb_api;var isNotAnIndexName=function isNotAnIndexName(name){return name[0]==="_"&&name!=="_all"};var kb_idAutocompleteComponentFactory=function idAutocompleteComponentFactory(name,parent){return new id_autocomplete_component_IdAutocompleteComponent(name,parent)};var kb_parametrizedComponentFactories={getComponent:function getComponent(name,parent,provideDefault){if(this[name]){return this[name]}else if(provideDefault){return kb_idAutocompleteComponentFactory}},index:function index(name,parent){if(isNotAnIndexName(name))return;return new index_autocomplete_component_IndexAutocompleteComponent(name,parent,false)},indices:function indices(name,parent){if(isNotAnIndexName(name))return;return new index_autocomplete_component_IndexAutocompleteComponent(name,parent,true)},type:function type(name,parent){return new type_autocomplete_component_TypeAutocompleteComponent(name,parent,false)},types:function types(name,parent){return new type_autocomplete_component_TypeAutocompleteComponent(name,parent,true)},id:function id(name,parent){return kb_idAutocompleteComponentFactory(name,parent)},transform_id:function transform_id(name,parent){return kb_idAutocompleteComponentFactory(name,parent)},username:function username(name,parent){return new username_autocomplete_component_UsernameAutocompleteComponent(name,parent)},user:function user(name,parent){return new username_autocomplete_component_UsernameAutocompleteComponent(name,parent)},template:function template(name,parent){return new template_autocomplete_component_TemplateAutocompleteComponent(name,parent)},task_id:function task_id(name,parent){return kb_idAutocompleteComponentFactory(name,parent)},ids:function ids(name,parent){return kb_idAutocompleteComponentFactory(name,parent,true)},fields:function fields(name,parent){return new field_autocomplete_component_FieldAutocompleteComponent(name,parent,true)},field:function field(name,parent){return new field_autocomplete_component_FieldAutocompleteComponent(name,parent,false)},nodes:function nodes(name,parent){return new list_component_ListComponent(name,["_local","_master","data:true","data:false","master:true","master:false"],parent)},node:function node(name,parent){return new list_component_ListComponent(name,[],parent,false)}};function getUnmatchedEndpointComponents(){return ACTIVE_API.getUnmatchedEndpointComponents()}function getEndpointDescriptionByEndpoint(endpoint){return ACTIVE_API.getEndpointDescriptionByEndpoint(endpoint)}function getEndpointBodyCompleteComponents(endpoint){var desc=getEndpointDescriptionByEndpoint(endpoint);if(!desc){throw new Error("failed to resolve endpoint ['"+endpoint+"']")}return desc.bodyAutocompleteRootComponents}function getTopLevelUrlCompleteComponents(method){return ACTIVE_API.getTopLevelUrlCompleteComponents(method)}function getGlobalAutocompleteComponents(term,throwOnMissing){return ACTIVE_API.getGlobalAutocompleteComponents(term,throwOnMissing)}function loadApisFromJson(json,urlParametrizedComponentFactories,bodyParametrizedComponentFactories){urlParametrizedComponentFactories=urlParametrizedComponentFactories||kb_parametrizedComponentFactories;bodyParametrizedComponentFactories=bodyParametrizedComponentFactories||urlParametrizedComponentFactories;var api=new kb_api(urlParametrizedComponentFactories,bodyParametrizedComponentFactories);var names=[];external_kbnSharedDeps_Lodash_default.a.each(json,(function(apiJson,name){names.unshift(name);external_kbnSharedDeps_Lodash_default.a.each(apiJson.globals||{},(function(globalJson,globalName){api.addGlobalAutocompleteRules(globalName,globalJson)}));external_kbnSharedDeps_Lodash_default.a.each(apiJson.endpoints||{},(function(endpointJson,endpointName){api.addEndpointDescription(endpointName,endpointJson)}))}));api.name=names.join(",");return api}function setActiveApi(api){if(!api){external_kbnSharedDeps_Jquery_default.a.ajax({url:"../api/console/api_server",dataType:"json",headers:{"kbn-xsrf":"kibana"}}).then((function(data){setActiveApi(loadApisFromJson(data))}),(function(jqXHR){console.log("failed to load API '"+api+"': "+jqXHR.responseText)}));return}ACTIVE_API=api}setActiveApi();var _test={loadApisFromJson:loadApisFromJson};function token_iterator_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function token_iterator_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){token_iterator_ownKeys(Object(source),true).forEach((function(key){token_iterator_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{token_iterator_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function token_iterator_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function token_iterator_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function token_iterator_createClass(Constructor,protoProps,staticProps){if(protoProps)token_iterator_defineProperties(Constructor.prototype,protoProps);if(staticProps)token_iterator_defineProperties(Constructor,staticProps);return Constructor}function token_iterator_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isColumnInTokenRange(column,token){if(column<token.position.column){return false}return column<=token.position.column+token.value.length}var TokenIterator=function(){function TokenIterator(provider,startPosition){token_iterator_classCallCheck(this,TokenIterator);this.provider=provider;token_iterator_defineProperty(this,"currentTokenIdx",-1);token_iterator_defineProperty(this,"currentPosition",{lineNumber:-1,column:-1});token_iterator_defineProperty(this,"tokensLineCache",void 0);this.tokensLineCache=this.provider.getTokens(startPosition.lineNumber)||[];var tokenIdx=this.tokensLineCache.findIndex((function(token){return isColumnInTokenRange(startPosition.column,token)}));if(tokenIdx>-1){this.updatePosition({tokenIdx:tokenIdx,position:this.tokensLineCache[tokenIdx].position})}else{this.updatePosition({tokenIdx:-1,position:startPosition})}}token_iterator_createClass(TokenIterator,[{key:"updateLineTokens",value:function updateLineTokens(tokens){this.tokensLineCache=tokens}},{key:"updatePosition",value:function updatePosition(info){this.currentTokenIdx=info.tokenIdx;this.currentPosition=token_iterator_objectSpread({},info.position)}},{key:"step",value:function step(direction){var nextIdx=this.currentTokenIdx+direction;var nextToken=this.tokensLineCache[nextIdx];if(nextToken){this.updatePosition({tokenIdx:nextIdx,position:nextToken.position});return nextToken}var nextLineNumber=this.currentPosition.lineNumber+direction;var nextLineTokens=this.provider.getTokens(nextLineNumber);if(nextLineTokens){this.updateLineTokens(nextLineTokens);var idx;if(direction>0){nextToken=nextLineTokens[0];idx=0}else{nextToken=nextLineTokens[nextLineTokens.length-1];idx=nextToken?nextLineTokens.length-1:0}var nextPosition=nextToken?nextToken.position:{column:1,lineNumber:nextLineNumber};this.updatePosition({tokenIdx:idx,position:nextPosition});return nextToken||null}return null}},{key:"getCurrentToken",value:function getCurrentToken(){return this.tokensLineCache[this.currentTokenIdx]||null}},{key:"getCurrentPosition",value:function getCurrentPosition(){return this.currentPosition}},{key:"stepBackward",value:function stepBackward(){return this.step(-1)}},{key:"stepForward",value:function stepForward(){return this.step(1)}},{key:"getCurrentTokenLineNumber",value:function getCurrentTokenLineNumber(){var currentToken=this.getCurrentToken();if(currentToken){return currentToken.position.lineNumber}return null}},{key:"getCurrentTokenColumn",value:function getCurrentTokenColumn(){var currentToken=this.getCurrentToken();if(currentToken){return currentToken.position.column}return null}}]);return TokenIterator}();function createTokenIterator(_ref){var editor=_ref.editor,position=_ref.position;var provider=editor.getTokenProvider();return new TokenIterator(provider,position)}function autocomplete_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function autocomplete_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){autocomplete_ownKeys(Object(source),true).forEach((function(key){autocomplete_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{autocomplete_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function autocomplete_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var lastEvaluatedToken=null;function isUrlParamsToken(token){switch((token||{}).type){case"url.param":case"url.equal":case"url.value":case"url.questionmark":case"url.amp":return true;default:return false}}function getCurrentMethodAndTokenPaths(editor,pos,parser,forceEndOfUrl){var tokenIter=createTokenIterator({editor:editor,position:pos});var startPos=pos;var bodyTokenPath=[];var ret={};var STATES={looking_for_key:0,looking_for_scope_start:1,start:3};var state=STATES.start;var t=tokenIter.getCurrentToken();if(t){if(startPos.column===1){t=tokenIter.stepBackward();state=STATES.looking_for_scope_start}}else{if(startPos.column===1){t=tokenIter.stepBackward();state=STATES.start}}var walkedSomeBody=false;for(;t&&t.type.indexOf("url")===-1&&t.type!=="method";t=tokenIter.stepBackward()){if(t.type!=="whitespace"){walkedSomeBody=true}switch(t.type){case"variable":if(state===STATES.looking_for_key){bodyTokenPath.unshift(t.value.trim().replace(/"/g,""))}state=STATES.looking_for_scope_start;break;case"paren.lparen":bodyTokenPath.unshift(t.value);if(state===STATES.looking_for_scope_start){state=STATES.looking_for_key}break;case"paren.rparen":state=STATES.looking_for_scope_start;var parenCount=1;t=tokenIter.stepBackward();while(t&&parenCount>0){switch(t.type){case"paren.lparen":parenCount--;break;case"paren.rparen":parenCount++;break}if(parenCount>0){t=tokenIter.stepBackward()}}if(!t){return{}}continue;case"punctuation.end_triple_quote":state=STATES.looking_for_scope_start;for(t=tokenIter.stepBackward();t;t=tokenIter.stepBackward()){if(t.type==="punctuation.start_triple_quote"){t=tokenIter.stepBackward();break}}if(!t){return{}}continue;case"punctuation.start_triple_quote":if(state===STATES.start){state=STATES.looking_for_key}else if(state===STATES.looking_for_key){state=STATES.looking_for_scope_start}bodyTokenPath.unshift('"""');continue;case"string":case"constant.numeric":case"constant.language.boolean":case"text":if(state===STATES.start){state=STATES.looking_for_key}else if(state===STATES.looking_for_key){state=STATES.looking_for_scope_start}break;case"punctuation.comma":if(state===STATES.start){state=STATES.looking_for_scope_start}break;case"punctuation.colon":case"whitespace":if(state===STATES.start){state=STATES.looking_for_key}break}}if(walkedSomeBody&&(!bodyTokenPath||bodyTokenPath.length===0)&&!forceEndOfUrl){return{}}ret.urlTokenPath=[];if(tokenIter.getCurrentPosition().lineNumber===startPos.lineNumber){if(t&&(t.type==="url.part"||t.type==="url.param"||t.type==="url.value")){if(forceEndOfUrl&&t.type==="url.part"){ret.urlTokenPath.push(t.value);ret.urlTokenPath.push(URL_PATH_END_MARKER)}t=tokenIter.stepBackward();while(t.type==="whitespace"){t=tokenIter.stepBackward()}}bodyTokenPath=null}ret.bodyTokenPath=bodyTokenPath;ret.urlParamsTokenPath=null;ret.requestStartRow=tokenIter.getCurrentPosition().lineNumber;var curUrlPart;while(t&&isUrlParamsToken(t)){switch(t.type){case"url.value":if(Array.isArray(curUrlPart)){curUrlPart.unshift(t.value)}else if(curUrlPart){curUrlPart=[t.value,curUrlPart]}else{curUrlPart=t.value}break;case"url.comma":if(!curUrlPart){curUrlPart=[]}else if(!Array.isArray(curUrlPart)){curUrlPart=[curUrlPart]}break;case"url.param":var v=curUrlPart;curUrlPart={};curUrlPart[t.value]=v;break;case"url.amp":case"url.questionmark":if(!ret.urlParamsTokenPath){ret.urlParamsTokenPath=[]}ret.urlParamsTokenPath.unshift(curUrlPart||{});curUrlPart=null;break}t=tokenIter.stepBackward()}curUrlPart=null;while(t&&t.type.indexOf("url")!==-1){switch(t.type){case"url.part":if(Array.isArray(curUrlPart)){curUrlPart.unshift(t.value)}else if(curUrlPart){curUrlPart=[t.value,curUrlPart]}else{curUrlPart=t.value}break;case"url.comma":if(!curUrlPart){curUrlPart=[]}else if(!Array.isArray(curUrlPart)){curUrlPart=[curUrlPart]}break;case"url.slash":if(curUrlPart){ret.urlTokenPath.unshift(curUrlPart);curUrlPart=null}break}t=parser.prevNonEmptyToken(tokenIter)}if(curUrlPart){ret.urlTokenPath.unshift(curUrlPart)}if(!ret.bodyTokenPath&&!ret.urlParamsTokenPath){if(ret.urlTokenPath.length>0){ret.otherTokenValues=ret.urlTokenPath[0]}}else{ret.urlTokenPath.push(URL_PATH_END_MARKER)}if(t&&t.type==="method"){ret.method=t.value}return ret}var autocomplete=function(_ref){var editor=_ref.coreEditor,parser=_ref.parser;function isUrlPathToken(token){switch((token||{}).type){case"url.slash":case"url.comma":case"url.part":return true;default:return false}}function addMetaToTermsList(list,meta,template){return external_kbnSharedDeps_Lodash_default.a.map(list,(function(t){if(typeof t!=="object"){t={name:t}}return external_kbnSharedDeps_Lodash_default.a.defaults(t,{meta:meta,template:template})}))}function applyTerm(term){var context=term.context;addReplacementInfoToContext(context,editor.getCurrentPosition(),term.insertValue);var termAsString;if(context.autoCompleteType==="body"){termAsString=typeof term.insertValue==="string"?'"'+term.insertValue+'"':term.insertValue+"";if(term.insertValue==="["||term.insertValue==="{"){termAsString=""}}else{termAsString=term.insertValue+""}var valueToInsert=termAsString;var templateInserted=false;if(context.addTemplate&&!external_kbnSharedDeps_Lodash_default.a.isUndefined(term.template)&&!external_kbnSharedDeps_Lodash_default.a.isNull(term.template)){var indentedTemplateLines;if(term.template.__raw&&term.template.value){indentedTemplateLines=term.template.value.split("\n")}else{indentedTemplateLines=jsonToString(term.template,true).split("\n")}var currentIndentation=editor.getLineValue(context.rangeToReplace.start.lineNumber);currentIndentation=currentIndentation.match(/^\s*/)[0];for(var i=1;i<indentedTemplateLines.length;i++){indentedTemplateLines[i]=currentIndentation+indentedTemplateLines[i]}valueToInsert+=": "+indentedTemplateLines.join("\n");templateInserted=true}else{templateInserted=true;if(term.value==="["){valueToInsert+="[]"}else if(term.value==="{"){valueToInsert+="{}"}else{templateInserted=false}}valueToInsert=context.prefixToAdd+valueToInsert+context.suffixToAdd;editor.off("changeSelection",editorChangeListener);if(context.rangeToReplace.start.column!==context.rangeToReplace.end.column){editor.replace(context.rangeToReplace,valueToInsert)}else{editor.insert(valueToInsert)}editor.clearSelection();var newPos={lineNumber:context.rangeToReplace.start.lineNumber,column:context.rangeToReplace.start.column+termAsString.length+context.prefixToAdd.length+(templateInserted?0:context.suffixToAdd.length)};var tokenIter=createTokenIterator({editor:editor,position:newPos});if(context.autoCompleteType==="body"){var nonEmptyToken=parser.nextNonEmptyToken(tokenIter);switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"paren.rparen":newPos=tokenIter.getCurrentPosition();break;case"punctuation.colon":nonEmptyToken=parser.nextNonEmptyToken(tokenIter);if((nonEmptyToken||{}).type==="paren.lparen"){nonEmptyToken=parser.nextNonEmptyToken(tokenIter);newPos=tokenIter.getCurrentPosition();if(nonEmptyToken&&nonEmptyToken.value.indexOf('"')===0){newPos.column++}}break;case"paren.lparen":case"punctuation.comma":tokenIter.stepForward();newPos=tokenIter.getCurrentPosition();break}editor.moveCursorToPosition(newPos)}editor.on("changeSelection",editorChangeListener)}function getAutoCompleteContext(ctxEditor,pos){var context={autoCompleteSet:null,endpoint:null,urlPath:null,method:null,activeScheme:null,editor:ctxEditor};context.autoCompleteType=getAutoCompleteType(pos);switch(context.autoCompleteType){case"path":addPathAutoCompleteSetToContext(context,pos);break;case"url_params":addUrlParamsAutoCompleteSetToContext(context,pos);break;case"method":addMethodAutoCompleteSetToContext(context);break;case"body":addBodyAutoCompleteSetToContext(context,pos);break;default:return null}if(!context.autoCompleteSet){return null}addReplacementInfoToContext(context,pos);context.createdWithToken=external_kbnSharedDeps_Lodash_default.a.clone(context.updatedForToken);return context}function getAutoCompleteType(pos){var rowMode=parser.getRowParseMode();if(rowMode&parser.MODE.IN_REQUEST){return"body"}if(rowMode&parser.MODE.REQUEST_START){var tokenIter=createTokenIterator({editor:editor,position:pos});var t=tokenIter.getCurrentToken();while(t.type==="url.comma"){t=tokenIter.stepBackward()}switch(t.type){case"method":return"method";case"whitespace":t=parser.prevNonEmptyToken(tokenIter);switch((t||{}).type){case"method":return"path";break;default:if(isUrlPathToken(t)){return"path"}if(isUrlParamsToken(t)){return"url_params"}return null}break;default:if(isUrlPathToken(t)){return"path"}if(isUrlParamsToken(t)){return"url_params"}return null}}if(rowMode&parser.MODE.REQUEST_END){return"body"}if(editor.getLineValue(pos.lineNumber).trim()===""){rowMode=parser.getRowParseMode(pos.lineNumber-1);if(rowMode&parser.MODE.REQUEST_START&&rowMode&parser.MODE.REQUEST_END){return"body"}return"method"}return null}function addReplacementInfoToContext(context,pos,replacingTerm){context.updatedForToken=external_kbnSharedDeps_Lodash_default.a.clone(editor.getTokenAt({lineNumber:pos.lineNumber,column:pos.column}));if(!context.updatedForToken){context.updatedForToken={value:"",type:"",position:{column:pos.column,lineNumber:pos.lineNumber}}}var anchorToken=context.createdWithToken;if(!anchorToken){anchorToken=context.updatedForToken}switch(context.updatedForToken.type){case"variable":case"string":case"text":case"constant.numeric":case"constant.language.boolean":case"method":case"url.index":case"url.type":case"url.id":case"url.method":case"url.endpoint":case"url.part":case"url.param":case"url.value":context.rangeToReplace={start:{lineNumber:pos.lineNumber,column:anchorToken.position.column},end:{lineNumber:pos.lineNumber,column:context.updatedForToken.position.column+context.updatedForToken.value.length}};context.replacingToken=true;break;default:if(replacingTerm&&context.updatedForToken.value===replacingTerm){context.rangeToReplace={start:{lineNumber:pos.lineNumber,column:anchorToken.column},end:{lineNumber:pos.lineNumber,column:context.updatedForToken.position.column+context.updatedForToken.value.length}};context.replacingToken=true}else{context.rangeToReplace={start:{lineNumber:pos.lineNumber,column:pos.column},end:{lineNumber:pos.lineNumber,column:pos.column}};context.replacingToken=false}break}context.textBoxPosition={lineNumber:context.rangeToReplace.start.lineNumber,column:context.rangeToReplace.start.column};switch(context.autoCompleteType){case"path":addPathPrefixSuffixToContext(context);break;case"url_params":addUrlParamsPrefixSuffixToContext(context);break;case"method":addMethodPrefixSuffixToContext(context);break;case"body":addBodyPrefixSuffixToContext(context);break}}function addBodyPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd="";var tokenIter=createTokenIterator({editor:editor,position:editor.getCurrentPosition()});var nonEmptyToken=parser.nextNonEmptyToken(tokenIter);switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"NOTOKEN":case"paren.lparen":case"paren.rparen":case"punctuation.comma":context.addTemplate=true;break;case"punctuation.colon":context.addTemplate=false;nonEmptyToken=parser.nextNonEmptyToken(tokenIter);if(!(nonEmptyToken&&nonEmptyToken.value==="{")){break}nonEmptyToken=parser.nextNonEmptyToken(tokenIter);if(!(nonEmptyToken&&nonEmptyToken.value==="}")){break}context.addTemplate=true;context.rangeToReplace.end.lineNumber=tokenIter.getCurrentTokenLineNumber();context.rangeToReplace.end.column=tokenIter.getCurrentTokenColumn()+nonEmptyToken.value.length;nonEmptyToken=parser.nextNonEmptyToken(tokenIter);switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"NOTOKEN":case"paren.rparen":case"punctuation.comma":case"punctuation.colon":break;default:context.suffixToAdd=", "}break;default:context.addTemplate=true;context.suffixToAdd=", ";break}tokenIter=createTokenIterator({editor:editor,position:editor.getCurrentPosition()});nonEmptyToken=tokenIter.getCurrentToken();var insertingRelativeToToken;if(context.replacingToken){insertingRelativeToToken=0}else{var pos=editor.getCurrentPosition();if(pos.column===context.updatedForToken.position.column){insertingRelativeToToken=-1}else if(pos.column<context.updatedForToken.position.column+context.updatedForToken.value.length){insertingRelativeToToken=0}else{insertingRelativeToToken=1}}if(parser.isEmptyToken(nonEmptyToken)||insertingRelativeToToken<=0){nonEmptyToken=parser.prevNonEmptyToken(tokenIter)}switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"NOTOKEN":case"paren.lparen":case"punctuation.comma":case"punctuation.colon":case"method":break;default:if(nonEmptyToken&&nonEmptyToken.type.indexOf("url")<0){context.prefixToAdd=", "}}return context}function addUrlParamsPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd=""}function addMethodPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd="";var tokenIter=createTokenIterator({editor:editor,position:editor.getCurrentPosition()});var lineNumber=tokenIter.getCurrentPosition().lineNumber;var t=parser.nextNonEmptyToken(tokenIter);if(tokenIter.getCurrentPosition().lineNumber!==lineNumber||!t){context.suffixToAdd=" "}}function addPathPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd=""}function addMethodAutoCompleteSetToContext(context){context.autoCompleteSet=["GET","PUT","POST","DELETE","HEAD"].map((function(m,i){return{name:m,score:-i,meta:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.autocomplete.addMethodMetaText",{defaultMessage:"method"})}}))}function addPathAutoCompleteSetToContext(context,pos){var ret=getCurrentMethodAndTokenPaths(editor,pos,parser);context.method=ret.method;context.token=ret.token;context.otherTokenValues=ret.otherTokenValues;context.urlTokenPath=ret.urlTokenPath;var components=getTopLevelUrlCompleteComponents(context.method);populateContext(ret.urlTokenPath,context,editor,true,components);context.autoCompleteSet=addMetaToTermsList(context.autoCompleteSet,"endpoint")}function addUrlParamsAutoCompleteSetToContext(context,pos){var ret=getCurrentMethodAndTokenPaths(editor,pos,parser);context.method=ret.method;context.otherTokenValues=ret.otherTokenValues;context.urlTokenPath=ret.urlTokenPath;if(!ret.urlTokenPath){return context}populateContext(ret.urlTokenPath,context,editor,false,getTopLevelUrlCompleteComponents(context.method));if(!context.endpoint){return context}if(!ret.urlParamsTokenPath){return context}var tokenPath=[];var currentParam=ret.urlParamsTokenPath.pop();if(currentParam){tokenPath=Object.keys(currentParam);context.otherTokenValues=currentParam[tokenPath[0]]}populateContext(tokenPath,context,editor,true,context.endpoint.paramsAutocomplete.getTopLevelComponents(context.method));return context}function addBodyAutoCompleteSetToContext(context,pos){var ret=getCurrentMethodAndTokenPaths(editor,pos,parser);context.method=ret.method;context.otherTokenValues=ret.otherTokenValues;context.urlTokenPath=ret.urlTokenPath;context.requestStartRow=ret.requestStartRow;if(!ret.urlTokenPath){return context}populateContext(ret.urlTokenPath,context,editor,false,getTopLevelUrlCompleteComponents(context.method));context.bodyTokenPath=ret.bodyTokenPath;if(!ret.bodyTokenPath){return context}context.endpointComponentResolver=getEndpointBodyCompleteComponents;context.globalComponentResolver=getGlobalAutocompleteComponents;var components;if(context.endpoint){components=context.endpoint.bodyAutocompleteRootComponents}else{components=getUnmatchedEndpointComponents()}populateContext(ret.bodyTokenPath,context,editor,true,components);return context}var evaluateCurrentTokenAfterAChange=external_kbnSharedDeps_Lodash_default.a.debounce((function evaluateCurrentTokenAfterAChange(pos){var currentToken=editor.getTokenAt(pos);if(!currentToken){if(pos.lineNumber===1){lastEvaluatedToken=null;return}currentToken={position:{column:0,lineNumber:0},value:"",type:""}}currentToken.position.lineNumber=pos.lineNumber;if(parser.isEmptyToken(currentToken)){var nextToken=editor.getTokenAt(autocomplete_objectSpread(autocomplete_objectSpread({},pos),{},{column:pos.column+1}));if(parser.isEmptyToken(nextToken)){currentToken.position.column=pos.column;lastEvaluatedToken=currentToken}else{nextToken.position.lineNumber=pos.lineNumber;lastEvaluatedToken=nextToken}return}if(!lastEvaluatedToken){lastEvaluatedToken=currentToken;return}if(lastEvaluatedToken.position.column!==currentToken.position.column||lastEvaluatedToken.position.lineNumber!==currentToken.position.lineNumber||lastEvaluatedToken.value===currentToken.value){lastEvaluatedToken=currentToken;return}switch(currentToken.type||"UNKNOWN"){case"paren.lparen":case"paren.rparen":case"punctuation.colon":case"punctuation.comma":case"UNKNOWN":return}lastEvaluatedToken=currentToken;editor.execCommand("startAutocomplete")}),100);function editorChangeListener(){var position=editor.getCurrentPosition();if(position&&!editor.isCompleterActive()){evaluateCurrentTokenAfterAChange(position)}}function _getCompletions(position,prefix,callback){try{var context=getAutoCompleteContext(editor,position);if(!context){callback(null,[])}else{var terms=external_kbnSharedDeps_Lodash_default.a.map(context.autoCompleteSet.filter((function(term){return Boolean(term)&&term.name!=null})),(function(term){if(typeof term!=="object"){term={name:term}}else{term=external_kbnSharedDeps_Lodash_default.a.clone(term)}var defaults={value:term.name,meta:"API",score:0,context:context};if(context.autoCompleteType==="body"){defaults.completer={insertMatch(){return applyTerm(term)}}}return external_kbnSharedDeps_Lodash_default.a.defaults(term,defaults)}));terms.sort((function(t1,t2){if(t1.score>t2.score){return-1}if(t1.score<t2.score){return 1}if(t1.name<t2.name){return-1}if(t1.name===t2.name){return 0}return 1}));callback(null,external_kbnSharedDeps_Lodash_default.a.map(terms,(function(t,i){t.insertValue=t.insertValue||t.value;t.value=""+t.value;t.score=-i;return t})))}}catch(e){console.error(e);callback(e,null)}}editor.on("changeSelection",editorChangeListener);return{getCompletions:_getCompletions,_test:{getCompletions:function getCompletions(_editor,_editSession,pos,prefix,callback){return _getCompletions(pos,prefix,callback)},addReplacementInfoToContext:addReplacementInfoToContext,addChangeListener:function addChangeListener(){return editor.on("changeSelection",editorChangeListener)},removeChangeListener:function removeChangeListener(){return editor.off("changeSelection",editorChangeListener)}}}};function get_endpoint_from_position_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function get_endpoint_from_position_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){get_endpoint_from_position_ownKeys(Object(source),true).forEach((function(key){get_endpoint_from_position_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{get_endpoint_from_position_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function get_endpoint_from_position_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getEndpointFromPosition(editor,pos,parser){var lineValue=editor.getLineValue(pos.lineNumber);var context=get_endpoint_from_position_objectSpread({},getCurrentMethodAndTokenPaths(editor,{column:lineValue.length+1,lineNumber:pos.lineNumber},parser,true));var components=getTopLevelUrlCompleteComponents(context.method);populateContext(context.urlTokenPath,context,editor,true,components);return context.endpoint}var track_track=function track(requests,editor,trackUiMetric){var coreEditor=editor.getCoreEditor();var endpointDescription=getEndpointFromPosition(coreEditor,coreEditor.getCurrentPosition(),editor.parser);if(requests[0]&&endpointDescription){var _endpointDescription$;var eventName="".concat(requests[0].method,"_").concat((_endpointDescription$=endpointDescription.id)!==null&&_endpointDescription$!==void 0?_endpointDescription$:"unknown");trackUiMetric.count(eventName)}};function use_send_current_request_to_es_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_send_current_request_to_es_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_send_current_request_to_es_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_send_current_request_to_es_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var use_send_current_request_to_es_useSendCurrentRequestToES=function useSendCurrentRequestToES(){var _useServicesContext=services_context_useServicesContext(),_useServicesContext$s=_useServicesContext.services,history=_useServicesContext$s.history,settings=_useServicesContext$s.settings,notifications=_useServicesContext$s.notifications,trackUiMetric=_useServicesContext$s.trackUiMetric;var dispatch=useRequestActionContext();return Object(external_kbnSharedDeps_React_["useCallback"])(use_send_current_request_to_es_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var editor,requests,results,_settings$toJSON,polling;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;editor=instance.getInputEditor();_context.next=4;return editor.getRequestsInRange();case 4:requests=_context.sent;if(requests.length){_context.next=8;break}notifications.toasts.add(external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.notification.error.noRequestSelectedTitle",{defaultMessage:"No request selected. Select a request by placing the cursor inside it."}));return _context.abrupt("return");case 8:dispatch({type:"sendRequest",payload:undefined});setTimeout((function(){return track_track(requests,editor,trackUiMetric)}),0);_context.next=12;return sendRequestToES({requests:requests});case 12:results=_context.sent;results.forEach((function(_ref2){var _ref2$request=_ref2.request,path=_ref2$request.path,method=_ref2$request.method,data=_ref2$request.data;try{history.addToHistory(path,method,data)}catch(e){notifications.toasts.addError(e,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.notification.error.couldNotSaveRequestTitle",{defaultMessage:"Could not save request to history."})})}}));_settings$toJSON=settings.toJSON(),polling=_settings$toJSON.polling;if(polling){retrieveAutoCompleteInfo(settings,settings.getAutocomplete())}dispatch({type:"requestSuccess",payload:{data:results}});_context.next=22;break;case 19:_context.prev=19;_context.t0=_context["catch"](0);if(_context.t0===null||_context.t0===void 0?void 0:_context.t0.response){dispatch({type:"requestFail",payload:_context.t0})}else{dispatch({type:"requestFail",payload:undefined});notifications.toasts.addError(_context.t0,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.notification.error.unknownErrorTitle",{defaultMessage:"Unknown Request Error"})})}case 22:case"end":return _context.stop()}}}),_callee,null,[[0,19]])}))),[dispatch,settings,history,notifications,trackUiMetric])};function use_save_current_text_object_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function use_save_current_text_object_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){use_save_current_text_object_ownKeys(Object(source),true).forEach((function(key){use_save_current_text_object_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{use_save_current_text_object_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function use_save_current_text_object_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var WAIT_MS=500;var use_save_current_text_object_useSaveCurrentTextObject=function useSaveCurrentTextObject(){var promiseChainRef=Object(external_kbnSharedDeps_React_["useRef"])(Promise.resolve());var _useServicesContext=services_context_useServicesContext(),objectStorageClient=_useServicesContext.services.objectStorageClient;var _useEditorReadContext=useEditorReadContext(),currentTextObject=_useEditorReadContext.currentTextObject;return Object(external_kbnSharedDeps_React_["useCallback"])(Object(external_kbnSharedDeps_Lodash_["throttle"])((function(text){var promise=promiseChainRef.current;if(!currentTextObject)return;promise.finally((function(){return objectStorageClient.text.update(use_save_current_text_object_objectSpread(use_save_current_text_object_objectSpread({},currentTextObject),{},{text:text,updatedAt:Date.now()}))}))}),WAIT_MS,{trailing:true}),[objectStorageClient,currentTextObject])};function data_migration_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function data_migration_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){data_migration_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){data_migration_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function migrateToTextObjects(_x){return _migrateToTextObjects.apply(this,arguments)}function _migrateToTextObjects(){_migrateToTextObjects=data_migration_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var history,objectStorageClient,legacyTextContent;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:history=_ref.history,objectStorageClient=_ref.objectStorageClient;legacyTextContent=history.getLegacySavedEditorState();if(legacyTextContent){_context.next=4;break}return _context.abrupt("return");case 4:_context.next=6;return objectStorageClient.text.create({createdAt:Date.now(),updatedAt:Date.now(),text:legacyTextContent.content});case 6:history.deleteLegacySavedEditorState();case 7:case"end":return _context.stop()}}}),_callee)})));return _migrateToTextObjects.apply(this,arguments)}function use_data_init_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_data_init_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_data_init_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_data_init_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_data_init_slicedToArray(arr,i){return use_data_init_arrayWithHoles(arr)||use_data_init_iterableToArrayLimit(arr,i)||use_data_init_unsupportedIterableToArray(arr,i)||use_data_init_nonIterableRest()}function use_data_init_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_data_init_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_data_init_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_data_init_arrayLikeToArray(o,minLen)}function use_data_init_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function use_data_init_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_data_init_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var use_data_init_useDataInit=function useDataInit(){var _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=use_data_init_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=use_data_init_slicedToArray(_useState3,2),done=_useState4[0],setDone=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])({}),_useState6=use_data_init_slicedToArray(_useState5,2),retryToken=_useState6[0],setRetryToken=_useState6[1];var retry=Object(external_kbnSharedDeps_React_["useCallback"])((function(){setRetryToken({});setDone(false);setError(null)}),[]);var _useServicesContext=services_context_useServicesContext(),_useServicesContext$s=_useServicesContext.services,objectStorageClient=_useServicesContext$s.objectStorageClient,history=_useServicesContext$s.history;var dispatch=useEditorActionContext();Object(external_kbnSharedDeps_React_["useEffect"])((function(){var load=function(){var _ref=use_data_init_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var results,newObject;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return migrateToTextObjects({history:history,objectStorageClient:objectStorageClient});case 3:_context.next=5;return objectStorageClient.text.findAll();case 5:results=_context.sent;if(results.length){_context.next=13;break}_context.next=9;return objectStorageClient.text.create({createdAt:Date.now(),updatedAt:Date.now(),text:""});case 9:newObject=_context.sent;dispatch({type:"setCurrentTextObject",payload:newObject});_context.next=14;break;case 13:dispatch({type:"setCurrentTextObject",payload:results.sort((function(a,b){return a.createdAt-b.createdAt}))[0]});case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context["catch"](0);setError(_context.t0);case 19:_context.prev=19;setDone(true);return _context.finish(19);case 22:case"end":return _context.stop()}}}),_callee,null,[[0,16,19,22]])})));return function load(){return _ref.apply(this,arguments)}}();load()}),[dispatch,objectStorageClient,history,retryToken]);return{error:error,done:done,retry:retry}};function console_history_slicedToArray(arr,i){return console_history_arrayWithHoles(arr)||console_history_iterableToArrayLimit(arr,i)||console_history_unsupportedIterableToArray(arr,i)||console_history_nonIterableRest()}function console_history_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function console_history_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return console_history_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return console_history_arrayLikeToArray(o,minLen)}function console_history_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function console_history_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function console_history_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var CHILD_ELEMENT_PREFIX="historyReq";function ConsoleHistory(_ref){var close=_ref.close;var _useServicesContext=services_context_useServicesContext(),history=_useServicesContext.services.history;var _useEditorReadContext=useEditorReadContext(),readOnlySettings=_useEditorReadContext.settings;var _useState=Object(external_kbnSharedDeps_React_["useState"])(history.getHistory()),_useState2=console_history_slicedToArray(_useState,2),requests=_useState2[0],setPastRequests=_useState2[1];var clearHistory=Object(external_kbnSharedDeps_React_["useCallback"])((function(){history.clearHistory();setPastRequests(history.getHistory())}),[history]);var listRef=Object(external_kbnSharedDeps_React_["useRef"])(null);var _useState3=Object(external_kbnSharedDeps_React_["useState"])(null),_useState4=console_history_slicedToArray(_useState3,2),viewingReq=_useState4[0],setViewingReq=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])(0),_useState6=console_history_slicedToArray(_useState5,2),selectedIndex=_useState6[0],setSelectedIndex=_useState6[1];var selectedReq=Object(external_kbnSharedDeps_React_["useRef"])(null);var describeReq=Object(external_kbnSharedDeps_React_["useMemo"])((function(){var _describeReq=function _describeReq(req){var endpoint=req.endpoint;var date=external_kbnSharedDeps_Moment_default()(req.time);var formattedDate=date.format("MMM D");if(date.diff(external_kbnSharedDeps_Moment_default()(),"days")>-7){formattedDate=date.fromNow()}return"".concat(endpoint," (").concat(formattedDate,")")};_describeReq.cache=new WeakMap;return Object(external_kbnSharedDeps_Lodash_["memoize"])(_describeReq)}),[]);var scrollIntoView=Object(external_kbnSharedDeps_React_["useCallback"])((function(idx){var activeDescendant=listRef.current.querySelector("#".concat(CHILD_ELEMENT_PREFIX).concat(idx));if(activeDescendant){activeDescendant.scrollIntoView()}}),[]);var initialize=Object(external_kbnSharedDeps_React_["useCallback"])((function(){var nextSelectedIndex=0;describeReq.cache=new WeakMap;setViewingReq(requests[nextSelectedIndex]);selectedReq.current=requests[nextSelectedIndex];setSelectedIndex(nextSelectedIndex);scrollIntoView(nextSelectedIndex)}),[describeReq,requests,scrollIntoView]);var clear=function clear(){clearHistory();initialize()};var restoreRequestFromHistory=use_restore_request_from_history_useRestoreRequestFromHistory();Object(external_kbnSharedDeps_React_["useEffect"])((function(){initialize()}),[initialize]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){var done=history.change(setPastRequests);return function(){return done()}}),[history]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"conHistory"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.historyPage.pageTitle",{defaultMessage:"History"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"conHistory__body"},external_kbnSharedDeps_React_default.a.createElement("ul",{ref:listRef,onKeyDown:function onKeyDown(ev){if(ev.key===external_kbnSharedDeps_ElasticEui_["keys"].ENTER){restoreRequestFromHistory(selectedReq.current);return}var currentIdx=selectedIndex;if(ev.key===external_kbnSharedDeps_ElasticEui_["keys"].ARROW_UP){ev.preventDefault();--currentIdx}else if(ev.key===external_kbnSharedDeps_ElasticEui_["keys"].ARROW_DOWN){ev.preventDefault();++currentIdx}var nextSelectedIndex=Math.min(Math.max(0,currentIdx),requests.length-1);setViewingReq(requests[nextSelectedIndex]);selectedReq.current=requests[nextSelectedIndex];setSelectedIndex(nextSelectedIndex);scrollIntoView(nextSelectedIndex)},role:"listbox",className:"list-group conHistory__reqs",tabIndex:0,"aria-activedescendant":"".concat(CHILD_ELEMENT_PREFIX).concat(selectedIndex),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.historyPage.requestListAriaLabel",{defaultMessage:"History of sent requests"})},requests.map((function(req,idx){var reqDescription=describeReq(req);var isSelected=viewingReq===req;return external_kbnSharedDeps_React_default.a.createElement("li",{key:idx,id:"".concat(CHILD_ELEMENT_PREFIX).concat(idx),className:"list-group-item conHistory__req ".concat(isSelected?"conHistory__req-selected":""),onClick:function onClick(){setViewingReq(req);selectedReq.current=req;setSelectedIndex(idx)},role:"option",onMouseEnter:function onMouseEnter(){return setViewingReq(req)},onMouseLeave:function onMouseLeave(){return setViewingReq(selectedReq.current)},onDoubleClick:function onDoubleClick(){return restoreRequestFromHistory(selectedReq.current)},"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.historyPage.itemOfRequestListAriaLabel",{defaultMessage:"Request: {historyItem}",values:{historyItem:reqDescription}}),"aria-selected":isSelected},reqDescription,external_kbnSharedDeps_React_default.a.createElement("span",{className:"conHistory__reqIcon"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"arrowRight"})))}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"conHistory__body__spacer"}),external_kbnSharedDeps_React_default.a.createElement(HistoryViewer,{settings:readOnlySettings,req:viewingReq})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"danger",onClick:function onClick(){return clear()}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.historyPage.clearHistoryButtonLabel",{defaultMessage:"Clear"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"primary",onClick:function onClick(){return close()}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.historyPage.closehistoryButtonLabel",{defaultMessage:"Close"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"primary",disabled:!selectedReq,onClick:function onClick(){return restoreRequestFromHistory(selectedReq.current)}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.historyPage.applyHistoryButtonLabel",{defaultMessage:"Apply"}))))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}var mapStatusCodeToBadgeColor=function mapStatusCodeToBadgeColor(statusCode){if(statusCode<=199){return"default"}if(statusCode<=299){return"secondary"}if(statusCode<=399){return"primary"}if(statusCode<=499){return"warning"}return"danger"};var network_request_status_bar_NetworkRequestStatusBar=function NetworkRequestStatusBar(_ref){var requestInProgress=_ref.requestInProgress,requestResult=_ref.requestResult;var content=null;if(requestInProgress){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.requestInProgressBadgeText",{defaultMessage:"Request in progress"})))}else if(requestResult){var endpoint=requestResult.endpoint,method=requestResult.method,statusCode=requestResult.statusCode,statusText=requestResult.statusText,timeElapsedMs=requestResult.timeElapsedMs;content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},"".concat(method," ").concat(endpoint.startsWith("/")?endpoint:"/"+endpoint))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:mapStatusCodeToBadgeColor(statusCode)},statusCode," - ",statusText))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.requestTimeElapasedBadgeTooltipContent",{defaultMessage:"Time Elapsed"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"default"},timeElapsedMs," ","ms")))))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd",alignItems:"center",direction:"row",gutterSize:"s",responsive:false},content)};var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(21);var something_went_wrong_callout_SomethingWentWrongCallout=function SomethingWentWrongCallout(_ref){var error=_ref.error,onButtonClick=_ref.onButtonClick;Object(external_kbnSharedDeps_React_["useEffect"])((function(){console.error(error)}),[error]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{iconType:"alert",color:"danger",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.loadingError.title",{defaultMessage:"Cannot load Console"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.loadingError.message",defaultMessage:"Try reloading to get the latest data."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"danger",onClick:function onClick(){return onButtonClick()}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.loadingError.buttonLabel",defaultMessage:"Reload Console"})))};var top_nav_menu_TopNavMenu=function TopNavMenu(_ref){var items=_ref.items,disabled=_ref.disabled;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabs"],{size:"s"},items.map((function(item,idx){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{key:idx,disabled:disabled,onClick:item.onClick,title:item.label,"data-test-subj":item.testId},item.label)})))};function console_menu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function console_menu_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){console_menu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){console_menu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function console_menu_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function console_menu_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function console_menu_createClass(Constructor,protoProps,staticProps){if(protoProps)console_menu_defineProperties(Constructor.prototype,protoProps);if(staticProps)console_menu_defineProperties(Constructor,staticProps);return Constructor}function console_menu_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)console_menu_setPrototypeOf(subClass,superClass)}function console_menu_setPrototypeOf(o,p){console_menu_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return console_menu_setPrototypeOf(o,p)}function console_menu_createSuper(Derived){var hasNativeReflectConstruct=console_menu_isNativeReflectConstruct();return function _createSuperInternal(){var Super=console_menu_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=console_menu_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return console_menu_possibleConstructorReturn(this,result)}}function console_menu_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return console_menu_assertThisInitialized(self)}function console_menu_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function console_menu_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function console_menu_getPrototypeOf(o){console_menu_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return console_menu_getPrototypeOf(o)}function console_menu_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var console_menu_ConsoleMenu=function(_Component){console_menu_inherits(ConsoleMenu,_Component);var _super=console_menu_createSuper(ConsoleMenu);function ConsoleMenu(props){var _this;console_menu_classCallCheck(this,ConsoleMenu);_this=_super.call(this,props);console_menu_defineProperty(console_menu_assertThisInitialized(_this),"mouseEnter",(function(){if(_this.state.isPopoverOpen)return;_this.props.getCurl().then((function(text){_this.setState({curlCode:text})}))}));console_menu_defineProperty(console_menu_assertThisInitialized(_this),"onButtonClick",(function(){_this.setState((function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}}))}));console_menu_defineProperty(console_menu_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));console_menu_defineProperty(console_menu_assertThisInitialized(_this),"openDocs",console_menu_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var documentation;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.closePopover();_context.next=3;return _this.props.getDocumentation();case 3:documentation=_context.sent;if(documentation){_context.next=6;break}return _context.abrupt("return");case 6:window.open(documentation,"_blank");case 7:case"end":return _context.stop()}}}),_callee)}))));console_menu_defineProperty(console_menu_assertThisInitialized(_this),"autoIndent",(function(event){_this.closePopover();_this.props.autoIndent(event)}));_this.state={curlCode:"",isPopoverOpen:false};return _this}console_menu_createClass(ConsoleMenu,[{key:"copyAsCurl",value:function copyAsCurl(){this.copyText(this.state.curlCode);var addNotification=this.props.addNotification;if(addNotification){addNotification({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.consoleMenu.copyAsCurlMessage",{defaultMessage:"Request copied as cURL"})})}}},{key:"copyText",value:function copyText(text){var textField=document.createElement("textarea");textField.innerText=text;document.body.appendChild(textField);textField.select();document.execCommand("copy");textField.remove()}},{key:"render",value:function render(){var _this2=this;var button=external_kbnSharedDeps_React_default.a.createElement("button",{className:"euiButtonIcon--primary",onClick:this.onButtonClick,"data-test-subj":"toggleConsoleMenu","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.requestOptionsButtonAriaLabel",{defaultMessage:"Request options"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"wrench"}));var items=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"Copy as cURL",id:"ConCopyAsCurl",disabled:!document.queryCommandSupported("copy"),onClick:function onClick(){_this2.closePopover();_this2.copyAsCurl()}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.requestOptions.copyAsUrlButtonLabel",defaultMessage:"Copy as cURL"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"Open documentation","data-test-subj":"consoleMenuOpenDocs",onClick:function onClick(){_this2.openDocs()}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.requestOptions.openDocumentationButtonLabel",defaultMessage:"Open documentation"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{"data-test-subj":"consoleMenuAutoIndent",key:"Auto indent",onClick:this.autoIndent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.requestOptions.autoIndentButtonLabel",defaultMessage:"Auto indent"}))];return external_kbnSharedDeps_React_default.a.createElement("span",{onMouseEnter:this.mouseEnter},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"contextMenu",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{items:items})))}}]);return ConsoleMenu}(external_kbnSharedDeps_React_["Component"]);var exampleText='\n# index a doc\nPUT index/_doc/1\n{\n  "body": "here"\n}\n\n# and get it ...\nGET index/_doc/1\n';function EditorExample(props){var elemId="help-example-".concat(props.panel);var inputId="help-example-".concat(props.panel,"-input");Object(external_kbnSharedDeps_React_["useEffect"])((function(){var el=document.getElementById(elemId);el.textContent=exampleText.trim();var editor=createReadOnlyAceEditor(el);var textarea=el.querySelector("textarea");textarea.setAttribute("id",inputId);textarea.setAttribute("readonly","true");return function(){editor.destroy()}}),[elemId,inputId]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_kbnSharedDeps_React_default.a.createElement("label",{htmlFor:inputId},external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.exampleOutputTextarea",{defaultMessage:"Dev Tools Console editor example"}))),external_kbnSharedDeps_React_default.a.createElement("div",{id:elemId,className:"conHelp__example"}))}function WelcomePanel(props){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:props.onDismiss,"data-test-subj":"welcomePanel",size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.pageTitle",defaultMessage:"Welcome to Console"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.quickIntroTitle",defaultMessage:"Quick intro to the UI"})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.quickIntroDescription",defaultMessage:"The Console UI is split into two panes: an editor pane (left) and a response pane (right). Use the editor to type requests and submit them to Elasticsearch. The results will be displayed in the response pane on the right side."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.supportedRequestFormatTitle",defaultMessage:"Console understands requests in a compact format, similar to cURL:"})),external_kbnSharedDeps_React_default.a.createElement(EditorExample,{panel:"welcome"}),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.supportedRequestFormatDescription",defaultMessage:"While typing a request, Console will make suggestions which you can then accept by hitting Enter/Tab. These suggestions are made based on the request structure as well as your indices and types."})),external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.quickTipsTitle",defaultMessage:"A few quick tips, while I have your attention"})),external_kbnSharedDeps_React_default.a.createElement("ul",null,external_kbnSharedDeps_React_default.a.createElement("li",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.quickTips.submitRequestDescription",defaultMessage:"Submit requests to ES using the green triangle button."})),external_kbnSharedDeps_React_default.a.createElement("li",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.quickTips.useWrenchMenuDescription",defaultMessage:"Use the wrench menu for other useful things."})),external_kbnSharedDeps_React_default.a.createElement("li",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.quickTips.cUrlFormatForRequestsDescription",defaultMessage:"You can paste requests in cURL format and they will be translated to the Console syntax."})),external_kbnSharedDeps_React_default.a.createElement("li",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.quickTips.resizeEditorDescription",defaultMessage:"You can resize the editor and output panes by dragging the separator between them."})),external_kbnSharedDeps_React_default.a.createElement("li",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.quickTips.keyboardShortcutsDescription",defaultMessage:"Study the keyboard shortcuts under the Help button. Good stuff in there!"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,fullWidth:false,"data-test-subj":"help-close-button",onClick:props.onDismiss},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.welcomePage.closeButtonLabel",defaultMessage:"Dismiss"}))))}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function settings_modal_slicedToArray(arr,i){return settings_modal_arrayWithHoles(arr)||settings_modal_iterableToArrayLimit(arr,i)||settings_modal_unsupportedIterableToArray(arr,i)||settings_modal_nonIterableRest()}function settings_modal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function settings_modal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return settings_modal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return settings_modal_arrayLikeToArray(o,minLen)}function settings_modal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function settings_modal_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function settings_modal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function DevToolsSettingsModal(props){var _useState=Object(external_kbnSharedDeps_React_["useState"])(props.settings.fontSize),_useState2=settings_modal_slicedToArray(_useState,2),fontSize=_useState2[0],setFontSize=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(props.settings.wrapMode),_useState4=settings_modal_slicedToArray(_useState3,2),wrapMode=_useState4[0],setWrapMode=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])(props.settings.autocomplete.fields),_useState6=settings_modal_slicedToArray(_useState5,2),fields=_useState6[0],setFields=_useState6[1];var _useState7=Object(external_kbnSharedDeps_React_["useState"])(props.settings.autocomplete.indices),_useState8=settings_modal_slicedToArray(_useState7,2),indices=_useState8[0],setIndices=_useState8[1];var _useState9=Object(external_kbnSharedDeps_React_["useState"])(props.settings.autocomplete.templates),_useState10=settings_modal_slicedToArray(_useState9,2),templates=_useState10[0],setTemplates=_useState10[1];var _useState11=Object(external_kbnSharedDeps_React_["useState"])(props.settings.polling),_useState12=settings_modal_slicedToArray(_useState11,2),polling=_useState12[0],setPolling=_useState12[1];var _useState13=Object(external_kbnSharedDeps_React_["useState"])(props.settings.tripleQuotes),_useState14=settings_modal_slicedToArray(_useState13,2),tripleQuotes=_useState14[0],setTripleQuotes=_useState14[1];var autoCompleteCheckboxes=[{id:"fields",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.settingsPage.fieldsLabelText",{defaultMessage:"Fields"}),stateSetter:setFields},{id:"indices",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.settingsPage.indicesAndAliasesLabelText",{defaultMessage:"Indices & Aliases"}),stateSetter:setIndices},{id:"templates",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.settingsPage.templatesLabelText",{defaultMessage:"Templates"}),stateSetter:setTemplates}];var checkboxIdToSelectedMap={fields:fields,indices:indices,templates:templates};var onAutocompleteChange=function onAutocompleteChange(optionId){var option=external_kbnSharedDeps_Lodash_default.a.find(autoCompleteCheckboxes,(function(item){return item.id===optionId}));if(option){option.stateSetter(!checkboxIdToSelectedMap[optionId])}};function saveSettings(){props.onSaveSettings({fontSize:fontSize,wrapMode:wrapMode,autocomplete:{fields:fields,indices:indices,templates:templates},polling:polling,tripleQuotes:tripleQuotes})}var pollingFields=fields||indices||templates?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.settingsPage.refreshingDataLabel",defaultMessage:"Refreshing autocomplete suggestions"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.settingsPage.refreshingDataDescription",defaultMessage:"Console refreshes autocomplete suggestions by querying Elasticsearch. Automatic refreshes may be an issue if you have a large cluster or if you have network limitations."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{checked:polling,"data-test-subj":"autocompletePolling",id:"autocompletePolling",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Automatically refresh autocomplete suggestions",id:"console.settingsPage.pollingLabelText"}),onChange:function onChange(e){return setPolling(e.target.checked)}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"autocompletePolling",id:"autocompletePolling",onClick:function onClick(){props.refreshAutocompleteSettings({fields:fields,indices:indices,templates:templates})}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Refresh autocomplete suggestions",id:"console.settingsPage.refreshButtonLabel"}))):undefined;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{"data-test-subj":"devToolsSettingsModal",className:"conApp__settingsModal",onClose:props.onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.settingsPage.pageTitle",defaultMessage:"Console Settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.settingsPage.fontSizeLabel",defaultMessage:"Font Size"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{autoFocus:true,"data-test-subj":"setting-font-size-input",value:fontSize,min:6,max:50,onChange:function onChange(e){var val=parseInt(e.target.value,10);if(!val)return;setFontSize(val)}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{checked:wrapMode,"data-test-subj":"settingsWrapLines",id:"wrapLines",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Wrap long lines",id:"console.settingsPage.wrapLongLinesLabelText"}),onChange:function onChange(e){return setWrapMode(e.target.checked)}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.settingsPage.jsonSyntaxLabel",defaultMessage:"JSON syntax"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{checked:tripleQuotes,"data-test-subj":"tripleQuotes",id:"tripleQuotes",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Use triple quotes in output pane",id:"console.settingsPage.tripleQuotesMessage"}),onChange:function onChange(e){return setTripleQuotes(e.target.checked)}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{labelType:"legend",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.settingsPage.autocompleteLabel",defaultMessage:"Autocomplete"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckboxGroup"],{options:autoCompleteCheckboxes.map((function(opts){var stateSetter=opts.stateSetter,rest=_objectWithoutProperties(opts,["stateSetter"]);return rest})),idToSelectedMap:checkboxIdToSelectedMap,onChange:function onChange(e){onAutocompleteChange(e)}})),pollingFields),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"settingsCancelButton",onClick:props.onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.settingsPage.cancelButtonLabel",defaultMessage:"Cancel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"settings-save-button",onClick:saveSettings},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.settingsPage.saveButtonLabel",defaultMessage:"Save"})))))}function HelpPanel(props){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:props.onClose,"data-test-subj":"helpFlyout",size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.pageTitle",defaultMessage:"Help"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Request format",id:"console.helpPage.requestFormatTitle"})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.requestFormatDescription",defaultMessage:"You can type one or more requests in the white editor. Console understands requests in a compact format:"})),external_kbnSharedDeps_React_default.a.createElement(EditorExample,{panel:"help"}),external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommandsTitle",defaultMessage:"Keyboard commands"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement("dl",null,external_kbnSharedDeps_React_default.a.createElement("dt",null,"Ctrl/Cmd + I"),external_kbnSharedDeps_React_default.a.createElement("dd",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommands.autoIndentDescription",defaultMessage:"Auto indent current request"})),external_kbnSharedDeps_React_default.a.createElement("dt",null,"Ctrl/Cmd + /"),external_kbnSharedDeps_React_default.a.createElement("dd",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommands.openDocumentationDescription",defaultMessage:"Open documentation for current request"})),external_kbnSharedDeps_React_default.a.createElement("dt",null,"Ctrl + Space"),external_kbnSharedDeps_React_default.a.createElement("dd",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommands.openAutoCompleteDescription",defaultMessage:"Open Auto complete (even if not typing)"})),external_kbnSharedDeps_React_default.a.createElement("dt",null,"Ctrl/Cmd + Enter"),external_kbnSharedDeps_React_default.a.createElement("dd",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommands.submitRequestDescription",defaultMessage:"Submit request"})),external_kbnSharedDeps_React_default.a.createElement("dt",null,"Ctrl/Cmd + Up/Down"),external_kbnSharedDeps_React_default.a.createElement("dd",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommands.jumpToPreviousNextRequestDescription",defaultMessage:"Jump to the previous/next request start or end."})),external_kbnSharedDeps_React_default.a.createElement("dt",null,"Ctrl/Cmd + Alt + L"),external_kbnSharedDeps_React_default.a.createElement("dd",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommands.collapseExpandCurrentScopeDescription",defaultMessage:"Collapse/expand current scope."})),external_kbnSharedDeps_React_default.a.createElement("dt",null,"Ctrl/Cmd + Option + 0"),external_kbnSharedDeps_React_default.a.createElement("dd",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommands.collapseAllScopesDescription",defaultMessage:"Collapse all scopes but the current one. Expand by adding a shift."})),external_kbnSharedDeps_React_default.a.createElement("dt",null,"Down arrow"),external_kbnSharedDeps_React_default.a.createElement("dd",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommands.switchFocusToAutoCompleteMenuDescription",defaultMessage:"Switch focus to auto-complete menu. Use arrows to further select a term"})),external_kbnSharedDeps_React_default.a.createElement("dt",null,"Enter/Tab"),external_kbnSharedDeps_React_default.a.createElement("dd",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommands.selectCurrentlySelectedInAutoCompleteMenuDescription",defaultMessage:"Select the currently selected or the top most term in auto-complete menu"})),external_kbnSharedDeps_React_default.a.createElement("dt",null,"Esc"),external_kbnSharedDeps_React_default.a.createElement("dd",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"console.helpPage.keyboardCommands.closeAutoCompleteMenuDescription",defaultMessage:"Close auto-complete menu"}))))))}var editor_content_spinner_EditorContentSpinner=function EditorContentSpinner(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{className:"conApp__editor__spinner"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingContent"],{lines:10}))};function sense_editor_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function sense_editor_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){sense_editor_ownKeys(Object(source),true).forEach((function(key){sense_editor_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{sense_editor_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function sense_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function sense_editor_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){sense_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){sense_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function sense_editor_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function sense_editor_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function sense_editor_createClass(Constructor,protoProps,staticProps){if(protoProps)sense_editor_defineProperties(Constructor.prototype,protoProps);if(staticProps)sense_editor_defineProperties(Constructor,staticProps);return Constructor}function sense_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var sense_editor_collapseLiteralStrings=esUiShared_public_["XJson"].collapseLiteralStrings;var sense_editor_SenseEditor=function(){function SenseEditor(coreEditor){var _this=this;sense_editor_classCallCheck(this,SenseEditor);this.coreEditor=coreEditor;sense_editor_defineProperty(this,"currentReqRange",void 0);sense_editor_defineProperty(this,"parser",void 0);sense_editor_defineProperty(this,"autocomplete",void 0);sense_editor_defineProperty(this,"prevRequestStart",(function(rowOrPos){var curRow;if(rowOrPos==null){curRow=_this.coreEditor.getCurrentPosition().lineNumber}else if(external_kbnSharedDeps_Lodash_default.a.isObject(rowOrPos)){curRow=rowOrPos.lineNumber}else{curRow=rowOrPos}while(curRow>0&&!_this.parser.isStartRequestRow(curRow,_this.coreEditor)){curRow--}return{lineNumber:curRow,column:1}}));sense_editor_defineProperty(this,"nextRequestStart",(function(rowOrPos){var curRow;if(rowOrPos==null){curRow=_this.coreEditor.getCurrentPosition().lineNumber}else if(external_kbnSharedDeps_Lodash_default.a.isObject(rowOrPos)){curRow=rowOrPos.lineNumber}else{curRow=rowOrPos}var maxLines=_this.coreEditor.getLineCount();for(;curRow<maxLines-1;curRow++){if(_this.parser.isStartRequestRow(curRow,_this.coreEditor)){break}}return{row:curRow,column:0}}));sense_editor_defineProperty(this,"autoIndent",external_kbnSharedDeps_Lodash_default.a.debounce(sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var reqRange,parsedReq,indent,formattedData;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.coreEditor.waitForLatestTokens();case 2:_context.next=4;return _this.getRequestRange();case 4:reqRange=_context.sent;if(reqRange){_context.next=7;break}return _context.abrupt("return");case 7:_context.next=9;return _this.getRequest();case 9:parsedReq=_context.sent;if(parsedReq){_context.next=12;break}return _context.abrupt("return");case 12:if(parsedReq.data&&parsedReq.data.length>0){indent=parsedReq.data.length===1;formattedData=formatRequestBodyDoc(parsedReq.data,indent);if(!formattedData.changed){indent=!indent;formattedData=formatRequestBodyDoc(parsedReq.data,indent)}parsedReq.data=formattedData.data;_this.replaceRequestRange(parsedReq,reqRange)}case 13:case"end":return _context.stop()}}}),_callee)}))),25));sense_editor_defineProperty(this,"update",function(){var _ref2=sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee2(data){var reTokenizeAll,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:reTokenizeAll=_args2.length>1&&_args2[1]!==undefined?_args2[1]:false;return _context2.abrupt("return",_this.coreEditor.setValue(data,reTokenizeAll));case 2:case"end":return _context2.stop()}}}),_callee2)})));return function(_x){return _ref2.apply(this,arguments)}}());sense_editor_defineProperty(this,"replaceRequestRange",(function(newRequest,requestRange){var text=textFromRequest(newRequest);if(requestRange){_this.coreEditor.replaceRange(requestRange,text)}else{_this.coreEditor.insert(_this.coreEditor.getCurrentPosition(),text)}}));sense_editor_defineProperty(this,"getRequestRange",function(){var _ref3=sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee3(lineNumber){var reqStart,reqEnd;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.coreEditor.waitForLatestTokens();case 2:if(!_this.parser.isInBetweenRequestsRow(lineNumber)){_context3.next=4;break}return _context3.abrupt("return",null);case 4:reqStart=_this.prevRequestStart(lineNumber);reqEnd=_this.nextRequestEnd(reqStart);return _context3.abrupt("return",{start:sense_editor_objectSpread({},reqStart),end:sense_editor_objectSpread({},reqEnd)});case 7:case"end":return _context3.stop()}}}),_callee3)})));return function(_x2){return _ref3.apply(this,arguments)}}());sense_editor_defineProperty(this,"expandRangeToRequestEdges",sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var range,startLineNumber,endLineNumber,maxLine,endColumn,_args4=arguments;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:range=_args4.length>0&&_args4[0]!==undefined?_args4[0]:_this.coreEditor.getSelectionRange();_context4.next=3;return _this.coreEditor.waitForLatestTokens();case 3:startLineNumber=range.start.lineNumber;endLineNumber=range.end.lineNumber;maxLine=Math.max(1,_this.coreEditor.getLineCount());if(!_this.parser.isInBetweenRequestsRow(startLineNumber)){_context4.next=9;break}_context4.next=15;break;case 9:if(!(startLineNumber>=1)){_context4.next=15;break}if(!_this.parser.isStartRequestRow(startLineNumber)){_context4.next=12;break}return _context4.abrupt("break",15);case 12:startLineNumber--;_context4.next=9;break;case 15:if(!(startLineNumber<1||startLineNumber>endLineNumber)){_context4.next=17;break}return _context4.abrupt("return",null);case 17:if(!_this.parser.isInBetweenRequestsRow(endLineNumber)){_context4.next=26;break}case 18:if(!(endLineNumber>=startLineNumber)){_context4.next=24;break}if(!_this.parser.isEndRequestRow(endLineNumber)){_context4.next=21;break}return _context4.abrupt("break",24);case 21:endLineNumber--;_context4.next=18;break;case 24:_context4.next=32;break;case 26:if(!(endLineNumber<=maxLine)){_context4.next=32;break}if(!_this.parser.isEndRequestRow(endLineNumber)){_context4.next=29;break}return _context4.abrupt("break",32);case 29:endLineNumber++;_context4.next=26;break;case 32:if(!(endLineNumber<startLineNumber||endLineNumber>maxLine)){_context4.next=34;break}return _context4.abrupt("return",null);case 34:endColumn=(_this.coreEditor.getLineValue(endLineNumber)||"").replace(/\s+$/,"").length+1;return _context4.abrupt("return",{start:{lineNumber:startLineNumber,column:1},end:{lineNumber:endLineNumber,column:endColumn}});case 36:case"end":return _context4.stop()}}}),_callee4)}))));sense_editor_defineProperty(this,"getRequestInRange",function(){var _ref5=sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee5(range){var request,pos,tokenIter,t,bodyStartLineNumber,dataEndPos,bodyRange,data;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this.coreEditor.waitForLatestTokens();case 2:if(range){_context5.next=4;break}return _context5.abrupt("return",null);case 4:request={method:"",data:[],url:null,range:range};pos=range.start;tokenIter=createTokenIterator({editor:_this.coreEditor,position:pos});t=tokenIter.getCurrentToken();if(_this.parser.isEmptyToken(t)){t=_this.parser.nextNonEmptyToken(tokenIter)}if(!(t==null)){_context5.next=11;break}return _context5.abrupt("return",null);case 11:request.method=t.value;t=_this.parser.nextNonEmptyToken(tokenIter);if(!(!t||t.type==="method")){_context5.next=15;break}return _context5.abrupt("return",null);case 15:request.url="";while(t&&t.type&&t.type.indexOf("url")===0){request.url+=t.value;t=tokenIter.stepForward()}if(_this.parser.isEmptyToken(t)){t=_this.parser.nextNonEmptyToken(tokenIter)}bodyStartLineNumber=(t?0:1)+tokenIter.getCurrentPosition().lineNumber;while(bodyStartLineNumber<range.end.lineNumber||bodyStartLineNumber===range.end.lineNumber&&1<range.end.column){dataEndPos=_this.nextDataDocEnd({lineNumber:bodyStartLineNumber,column:1});bodyRange={start:{lineNumber:bodyStartLineNumber,column:1},end:dataEndPos};data=_this.coreEditor.getValueInRange(bodyRange);request.data.push(data.trim());bodyStartLineNumber=dataEndPos.lineNumber+1}return _context5.abrupt("return",request);case 21:case"end":return _context5.stop()}}}),_callee5)})));return function(_x3){return _ref5.apply(this,arguments)}}());sense_editor_defineProperty(this,"getRequestsInRange",sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var range,includeNonRequestBlocks,expandedRange,requests,rangeStartCursor,endLineNumber,currentLineNumber,flushNonRequestBlock,request,_args6=arguments;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:range=_args6.length>0&&_args6[0]!==undefined?_args6[0]:_this.coreEditor.getSelectionRange();includeNonRequestBlocks=_args6.length>1&&_args6[1]!==undefined?_args6[1]:false;_context6.next=4;return _this.coreEditor.waitForLatestTokens();case 4:if(range){_context6.next=6;break}return _context6.abrupt("return",[]);case 6:_context6.next=8;return _this.expandRangeToRequestEdges(range);case 8:expandedRange=_context6.sent;if(expandedRange){_context6.next=11;break}return _context6.abrupt("return",[]);case 11:requests=[];rangeStartCursor=expandedRange.start.lineNumber;endLineNumber=expandedRange.end.lineNumber;currentLineNumber=expandedRange.start.lineNumber;flushNonRequestBlock=function flushNonRequestBlock(){if(includeNonRequestBlocks){var nonRequestPrefixBlock=_this.coreEditor.getLines(rangeStartCursor,currentLineNumber-1).join("\n");if(nonRequestPrefixBlock){requests.push(nonRequestPrefixBlock)}}};case 16:if(!(currentLineNumber<=endLineNumber)){_context6.next=33;break}if(!_this.parser.isStartRequestRow(currentLineNumber)){_context6.next=30;break}flushNonRequestBlock();_context6.next=21;return _this.getRequest(currentLineNumber);case 21:request=_context6.sent;if(request){_context6.next=26;break}return _context6.abrupt("return",requests);case 26:requests.push(request);rangeStartCursor=currentLineNumber=request.range.end.lineNumber+1;case 28:_context6.next=31;break;case 30:++currentLineNumber;case 31:_context6.next=16;break;case 33:flushNonRequestBlock();return _context6.abrupt("return",requests);case 35:case"end":return _context6.stop()}}}),_callee6)}))));sense_editor_defineProperty(this,"getRequest",function(){var _ref7=sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee7(row){var range;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this.coreEditor.waitForLatestTokens();case 2:if(!_this.parser.isInBetweenRequestsRow(row)){_context7.next=4;break}return _context7.abrupt("return",null);case 4:_context7.next=6;return _this.getRequestRange(row);case 6:range=_context7.sent;return _context7.abrupt("return",_this.getRequestInRange(range));case 8:case"end":return _context7.stop()}}}),_callee7)})));return function(_x4){return _ref7.apply(this,arguments)}}());sense_editor_defineProperty(this,"moveToPreviousRequestEdge",sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var pos;return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return _this.coreEditor.waitForLatestTokens();case 2:pos=_this.coreEditor.getCurrentPosition();for(pos.lineNumber--;pos.lineNumber>1&&!_this.parser.isRequestEdge(pos.lineNumber);pos.lineNumber--){}_this.coreEditor.moveCursorToPosition({lineNumber:pos.lineNumber,column:1});case 5:case"end":return _context8.stop()}}}),_callee8)}))));sense_editor_defineProperty(this,"moveToNextRequestEdge",function(){var _ref9=sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee9(moveOnlyIfNotOnEdge){var pos,maxRow;return regeneratorRuntime.wrap((function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return _this.coreEditor.waitForLatestTokens();case 2:pos=_this.coreEditor.getCurrentPosition();maxRow=_this.coreEditor.getLineCount();if(!moveOnlyIfNotOnEdge){pos.lineNumber++}for(;pos.lineNumber<maxRow&&!_this.parser.isRequestEdge(pos.lineNumber);pos.lineNumber++){}_this.coreEditor.moveCursorToPosition({lineNumber:pos.lineNumber,column:1});case 7:case"end":return _context9.stop()}}}),_callee9)})));return function(_x5){return _ref9.apply(this,arguments)}}());sense_editor_defineProperty(this,"nextRequestEnd",(function(pos){pos=pos||_this.coreEditor.getCurrentPosition();var maxLines=_this.coreEditor.getLineCount();var curLineNumber=pos.lineNumber;for(;curLineNumber<=maxLines;++curLineNumber){var curRowMode=_this.parser.getRowParseMode(curLineNumber);if((curRowMode&_this.parser.MODE.REQUEST_END)>0){break}if(curLineNumber!==pos.lineNumber&&(curRowMode&_this.parser.MODE.REQUEST_START)>0){break}}var column=(_this.coreEditor.getLineValue(curLineNumber)||"").replace(/\s+$/,"").length+1;return{lineNumber:curLineNumber,column:column}}));sense_editor_defineProperty(this,"nextDataDocEnd",(function(pos){pos=pos||_this.coreEditor.getCurrentPosition();var curLineNumber=pos.lineNumber;var maxLines=_this.coreEditor.getLineCount();for(;curLineNumber<maxLines;curLineNumber++){var curRowMode=_this.parser.getRowParseMode(curLineNumber);if((curRowMode&_this.parser.MODE.REQUEST_END)>0){break}if((curRowMode&_this.parser.MODE.MULTI_DOC_CUR_DOC_END)>0){break}if(curLineNumber!==pos.lineNumber&&(curRowMode&_this.parser.MODE.REQUEST_START)>0){break}}var column=(_this.coreEditor.getLineValue(curLineNumber)||"").length+1;return{lineNumber:curLineNumber,column:column}}));sense_editor_defineProperty(this,"highlightCurrentRequestsAndUpdateActionBar",external_kbnSharedDeps_Lodash_default.a.debounce(sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee10(){var expandedRange,cursorLineNumber;return regeneratorRuntime.wrap((function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return _this.coreEditor.waitForLatestTokens();case 2:_context10.next=4;return _this.expandRangeToRequestEdges();case 4:expandedRange=_context10.sent;if(!(expandedRange===null&&_this.currentReqRange===null)){_context10.next=7;break}return _context10.abrupt("return");case 7:if(!(expandedRange!==null&&_this.currentReqRange!==null&&expandedRange.start.lineNumber===_this.currentReqRange.start.lineNumber&&expandedRange.end.lineNumber===_this.currentReqRange.end.lineNumber)){_context10.next=11;break}cursorLineNumber=_this.coreEditor.getCurrentPosition().lineNumber;if(cursorLineNumber===_this.currentReqRange.start.lineNumber){_this.updateActionsBar()}return _context10.abrupt("return");case 11:if(_this.currentReqRange){_this.coreEditor.removeMarker(_this.currentReqRange.markerRef)}_this.currentReqRange=expandedRange;if(_this.currentReqRange){_this.currentReqRange.markerRef=_this.coreEditor.addMarker(_this.currentReqRange)}_this.updateActionsBar();case 15:case"end":return _context10.stop()}}}),_callee10)}))),25));sense_editor_defineProperty(this,"getRequestsAsCURL",function(){var _ref11=sense_editor_asyncToGenerator(regeneratorRuntime.mark((function _callee11(elasticsearchBaseUrl,range){var requests,result;return regeneratorRuntime.wrap((function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _this.getRequestsInRange(range,true);case 2:requests=_context11.sent;result=external_kbnSharedDeps_Lodash_default.a.map(requests,(function(req){if(typeof req==="string"){return req}var esPath=req.url;var esMethod=req.method;var esData=req.data;var url=constructESUrl(elasticsearchBaseUrl,esPath);var ret="curl -X"+esMethod+' "'+url+'"';if(esData&&esData.length){ret+=" -H 'Content-Type: application/json' -d'\n";var dataAsString=sense_editor_collapseLiteralStrings(esData.join("\n"));ret+=dataAsString.replace(/'/g,"'\\''");if(esData.length>1){ret+="\n"}ret+="'"}return ret}));return _context11.abrupt("return",result.join("\n"));case 5:case"end":return _context11.stop()}}}),_callee11)})));return function(_x6,_x7){return _ref11.apply(this,arguments)}}());sense_editor_defineProperty(this,"updateActionsBar",(function(){return _this.coreEditor.legacyUpdateUI(_this.currentReqRange)}));this.currentReqRange=null;this.parser=new RowParser(this.coreEditor);this.autocomplete=new autocomplete({coreEditor:coreEditor,parser:this.parser});this.coreEditor.registerAutocompleter(this.autocomplete.getCompletions);this.coreEditor.on("tokenizerUpdate",this.highlightCurrentRequestsAndUpdateActionBar.bind(this));this.coreEditor.on("changeCursor",this.highlightCurrentRequestsAndUpdateActionBar.bind(this));this.coreEditor.on("changeScrollTop",this.updateActionsBar.bind(this))}sense_editor_createClass(SenseEditor,[{key:"getCoreEditor",value:function getCoreEditor(){return this.coreEditor}}]);return SenseEditor}();function sense_editor_create_create(element){var coreEditor=create_create(element);var senseEditor=new sense_editor_SenseEditor(coreEditor);senseEditor.highlightCurrentRequestsAndUpdateActionBar();return senseEditor}function console_menu_actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function console_menu_actions_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){console_menu_actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){console_menu_actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function console_menu_actions_autoIndent(_x,_x2){return _autoIndent.apply(this,arguments)}function _autoIndent(){_autoIndent=console_menu_actions_asyncToGenerator(regeneratorRuntime.mark((function _callee(editor,event){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return editor.autoIndent();case 3:editor.getCoreEditor().getContainer().focus();case 4:case"end":return _context.stop()}}}),_callee)})));return _autoIndent.apply(this,arguments)}function console_menu_actions_getDocumentation(editor,docLinkVersion){return editor.getRequestsInRange().then((function(requests){if(!requests||requests.length===0){return null}var position=requests[0].range.end;position.column=position.column-1;var endpoint=getEndpointFromPosition(editor.getCoreEditor(),position,editor.parser);if(endpoint&&endpoint.documentation&&endpoint.documentation.indexOf("http")!==-1){return endpoint.documentation.replace("/master/","/".concat(docLinkVersion,"/")).replace("/current/","/".concat(docLinkVersion,"/"))}else{return null}}))}function registerCommands(_ref){var senseEditor=_ref.senseEditor,sendCurrentRequestToES=_ref.sendCurrentRequestToES,openDocumentation=_ref.openDocumentation;var throttledAutoIndent=Object(external_kbnSharedDeps_Lodash_["throttle"])((function(){return senseEditor.autoIndent()}),500,{leading:true,trailing:true});var coreEditor=senseEditor.getCoreEditor();coreEditor.registerKeyboardShortcut({keys:{win:"Ctrl-Enter",mac:"Command-Enter"},name:"send to Elasticsearch",fn:function fn(){return sendCurrentRequestToES()}});coreEditor.registerKeyboardShortcut({name:"open documentation",keys:{win:"Ctrl-/",mac:"Command-/"},fn:function fn(){openDocumentation()}});coreEditor.registerKeyboardShortcut({name:"auto indent request",keys:{win:"Ctrl-I",mac:"Command-I"},fn:function fn(){throttledAutoIndent()}});coreEditor.registerKeyboardShortcut({name:"move to previous request start or end",keys:{win:"Ctrl-Up",mac:"Command-Up"},fn:function fn(){senseEditor.moveToPreviousRequestEdge()}});coreEditor.registerKeyboardShortcut({name:"move to next request start or end",keys:{win:"Ctrl-Down",mac:"Command-Down"},fn:function fn(){senseEditor.moveToNextRequestEdge(false)}})}function editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function editor_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function editor_slicedToArray(arr,i){return editor_arrayWithHoles(arr)||editor_iterableToArrayLimit(arr,i)||editor_unsupportedIterableToArray(arr,i)||editor_nonIterableRest()}function editor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function editor_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return editor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return editor_arrayLikeToArray(o,minLen)}function editor_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function editor_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function editor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useUIAceKeyboardMode=esUiShared_public_["ace"].useUIAceKeyboardMode;var abs={position:"absolute",top:"0",left:"0",bottom:"0",right:"0"};var DEFAULT_INPUT_VALUE='GET _search\n{\n  "query": {\n    "match_all": {}\n  }\n}';var editor_inputId="ConAppInputTextarea";function EditorUI(_ref){var initialTextValue=_ref.initialTextValue;var _useServicesContext=services_context_useServicesContext(),_useServicesContext$s=_useServicesContext.services,history=_useServicesContext$s.history,notifications=_useServicesContext$s.notifications,settingsService=_useServicesContext$s.settings,esHostService=_useServicesContext$s.esHostService,docLinkVersion=_useServicesContext.docLinkVersion;var _useEditorReadContext=useEditorReadContext(),settings=_useEditorReadContext.settings;var setInputEditor=use_set_input_editor_useSetInputEditor();var sendCurrentRequestToES=use_send_current_request_to_es_useSendCurrentRequestToES();var saveCurrentTextObject=use_save_current_text_object_useSaveCurrentTextObject();var editorRef=Object(external_kbnSharedDeps_React_["useRef"])(null);var editorInstanceRef=Object(external_kbnSharedDeps_React_["useRef"])(null);var _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=editor_slicedToArray(_useState,2),textArea=_useState2[0],setTextArea=_useState2[1];useUIAceKeyboardMode(textArea);var openDocumentation=Object(external_kbnSharedDeps_React_["useCallback"])(editor_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var documentation;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return console_menu_actions_getDocumentation(editorInstanceRef.current,docLinkVersion);case 2:documentation=_context.sent;if(documentation){_context.next=5;break}return _context.abrupt("return");case 5:window.open(documentation,"_blank");case 6:case"end":return _context.stop()}}}),_callee)}))),[docLinkVersion]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){editorInstanceRef.current=sense_editor_create_create(editorRef.current);var editor=editorInstanceRef.current;var textareaElement=editorRef.current.querySelector("textarea");if(textareaElement){textareaElement.setAttribute("id",editor_inputId)}var readQueryParams=function readQueryParams(){var _split=(window.location.hash||"").split("?"),_split2=editor_slicedToArray(_split,2),queryString=_split2[1];return Object(query_string["parse"])(queryString||"",{sort:false})};var loadBufferFromRemote=function loadBufferFromRemote(url){if(/^https?:\/\//.test(url)){var loadFrom={url:url,dataType:"text",kbnXsrfToken:false};if(/https?:\/\/api\.github\.com/.test(url)){loadFrom.headers={Accept:"application/vnd.github.v3.raw"}}$.ajax(loadFrom).done(function(){var _ref3=editor_asyncToGenerator(regeneratorRuntime.mark((function _callee2(data){var coreEditor;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:coreEditor=editor.getCoreEditor();_context2.next=3;return editor.update(data,true);case 3:editor.moveToNextRequestEdge(false);coreEditor.clearSelection();editor.highlightCurrentRequestsAndUpdateActionBar();coreEditor.getContainer().focus();case 7:case"end":return _context2.stop()}}}),_callee2)})));return function(_x){return _ref3.apply(this,arguments)}}())}};var onHashChange=Object(external_kbnSharedDeps_Lodash_["debounce"])((function(){var _readQueryParams=readQueryParams(),url=_readQueryParams.load_from;if(!url){return}loadBufferFromRemote(url)}),200);window.addEventListener("hashchange",onHashChange);var initialQueryParams=readQueryParams();if(initialQueryParams.load_from){loadBufferFromRemote(initialQueryParams.load_from)}else{editor.update(initialTextValue||DEFAULT_INPUT_VALUE)}function setupAutosave(){var timer;var saveDelay=500;editor.getCoreEditor().on("change",(function(){if(timer){clearTimeout(timer)}timer=window.setTimeout(saveCurrentState,saveDelay)}))}function saveCurrentState(){try{var content=editor.getCoreEditor().getValue();saveCurrentTextObject(content)}catch(e){}}setInputEditor(editor);setTextArea(editorRef.current.querySelector("textarea"));retrieveAutoCompleteInfo(settingsService,settingsService.getAutocomplete());var unsubscribeResizer=subscribeResizeChecker(editorRef.current,editor);setupAutosave();return function(){unsubscribeResizer();clearSubscriptions();window.removeEventListener("hashchange",onHashChange);if(editorInstanceRef.current){editorInstanceRef.current.getCoreEditor().destroy()}}}),[saveCurrentTextObject,initialTextValue,history,setInputEditor,settingsService]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){var editor=editorInstanceRef.current;applyCurrentSettings(editor.getCoreEditor(),settings);editor.getCoreEditor().getContainer().focus()}),[settings]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){registerCommands({senseEditor:editorInstanceRef.current,sendCurrentRequestToES:sendCurrentRequestToES,openDocumentation:openDocumentation})}),[sendCurrentRequestToES,openDocumentation]);return external_kbnSharedDeps_React_default.a.createElement("div",{style:abs,className:"conApp"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"conApp__editor"},external_kbnSharedDeps_React_default.a.createElement("ul",{className:"conApp__autoComplete",id:"autocomplete"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"conApp__editorActions",id:"ConAppEditorActions",gutterSize:"none",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.sendRequestButtonTooltip",{defaultMessage:"Click to send request"})},external_kbnSharedDeps_React_default.a.createElement("button",{onClick:sendCurrentRequestToES,"data-test-subj":"sendRequestButton","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.sendRequestButtonTooltip",{defaultMessage:"Click to send request"}),className:"conApp__editorActionButton conApp__editorActionButton--success"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"play"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(console_menu_ConsoleMenu,{getCurl:function getCurl(){return editorInstanceRef.current.getRequestsAsCURL(esHostService.getHost())},getDocumentation:function getDocumentation(){return console_menu_actions_getDocumentation(editorInstanceRef.current,docLinkVersion)},autoIndent:function autoIndent(event){console_menu_actions_autoIndent(editorInstanceRef.current,event)},addNotification:function addNotification(_ref4){var title=_ref4.title;return notifications.toasts.add({title:title})}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_kbnSharedDeps_React_default.a.createElement("label",{htmlFor:editor_inputId},external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.inputTextarea",{defaultMessage:"Dev Tools Console"}))),external_kbnSharedDeps_React_default.a.createElement("div",{ref:editorRef,id:"ConAppEditor",className:"conApp__editorContent","data-test-subj":"request-editor"})))}var Editor=external_kbnSharedDeps_React_default.a.memo(EditorUI);var shared_imports_collapseLiteralStrings=esUiShared_public_["XJson"].collapseLiteralStrings,shared_imports_expandLiteralStrings=esUiShared_public_["XJson"].expandLiteralStrings;function modeForContentType(contentType){if(!contentType){return"ace/mode/text"}if(contentType.indexOf("application/json")>=0){return"ace/mode/json"}else if(contentType.indexOf("application/yaml")>=0){return"ace/mode/yaml"}return"ace/mode/text"}function EditorOutputUI(){var editorRef=Object(external_kbnSharedDeps_React_["useRef"])(null);var editorInstanceRef=Object(external_kbnSharedDeps_React_["useRef"])(null);var _useServicesContext=services_context_useServicesContext(),services=_useServicesContext.services;var _useEditorReadContext=useEditorReadContext(),readOnlySettings=_useEditorReadContext.settings;var _useRequestReadContex=useRequestReadContext(),_useRequestReadContex2=_useRequestReadContex.lastResult,data=_useRequestReadContex2.data,error=_useRequestReadContex2.error;var inputId="ConAppOutputTextarea";Object(external_kbnSharedDeps_React_["useEffect"])((function(){editorInstanceRef.current=createReadOnlyAceEditor(editorRef.current);var unsubscribe=subscribeResizeChecker(editorRef.current,editorInstanceRef.current);var textarea=editorRef.current.querySelector("textarea");textarea.setAttribute("id",inputId);textarea.setAttribute("readonly","true");return function(){unsubscribe();editorInstanceRef.current.destroy()}}),[services.settings]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){var editor=editorInstanceRef.current;if(data){var mode=modeForContentType(data[0].response.contentType);editor.session.setMode(mode);editor.update(data.map((function(d){return d.response.value})).map(readOnlySettings.tripleQuotes?shared_imports_expandLiteralStrings:function(a){return a}).join("\n"))}else if(error){editor.session.setMode(modeForContentType(error.response.contentType));editor.update(error.response.value)}else{editor.update("")}}),[readOnlySettings,data,error]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){applyCurrentSettings(editorInstanceRef.current,readOnlySettings)}),[readOnlySettings]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_kbnSharedDeps_React_default.a.createElement("label",{htmlFor:inputId},external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.outputTextarea",{defaultMessage:"Dev Tools Console output"}))),external_kbnSharedDeps_React_default.a.createElement("div",{ref:editorRef,className:"conApp__output","data-test-subj":"response-editor"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"conApp__outputContent",id:"ConAppOutput"})))}var EditorOutput=external_kbnSharedDeps_React_default.a.memo(EditorOutputUI);var kibanaReact_public_=__webpack_require__(27);var external_kbnSharedDeps_Rxjs_=__webpack_require__(28);function history_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function history_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function history_createClass(Constructor,protoProps,staticProps){if(protoProps)history_defineProperties(Constructor.prototype,protoProps);if(staticProps)history_defineProperties(Constructor,staticProps);return Constructor}function history_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var history_History=function(){function History(storage){history_classCallCheck(this,History);this.storage=storage;history_defineProperty(this,"changeEmitter",new external_kbnSharedDeps_Rxjs_["BehaviorSubject"](this.getHistory()||[]))}history_createClass(History,[{key:"getHistoryKeys",value:function getHistoryKeys(){return this.storage.keys().filter((function(key){return key.indexOf("hist_elem")===0})).sort().reverse()}},{key:"getHistory",value:function getHistory(){var _this=this;return this.getHistoryKeys().map((function(key){return _this.storage.get(key)}))}},{key:"change",value:function change(listener){var subscription=this.changeEmitter.subscribe(listener);return function(){return subscription.unsubscribe()}}},{key:"addToHistory",value:function addToHistory(endpoint,method,data){var _this2=this;var keys=this.getHistoryKeys();keys.splice(0,500);keys.forEach((function(key){_this2.storage.delete(key)}));var timestamp=(new Date).getTime();var k="hist_elem_"+timestamp;this.storage.set(k,{time:timestamp,endpoint:endpoint,method:method,data:data});this.changeEmitter.next(this.getHistory())}},{key:"updateCurrentState",value:function updateCurrentState(content){var timestamp=(new Date).getTime();this.storage.set("editor_state",{time:timestamp,content:content})}},{key:"getLegacySavedEditorState",value:function getLegacySavedEditorState(){var saved=this.storage.get("editor_state");if(!saved)return;var time=saved.time,content=saved.content;return{time:time,content:content}}},{key:"deleteLegacySavedEditorState",value:function deleteLegacySavedEditorState(){this.storage.delete("editor_state")}},{key:"clearHistory",value:function clearHistory(){var _this3=this;this.getHistoryKeys().forEach((function(key){return _this3.storage.delete(key)}))}}]);return History}();function createHistory(deps){return new history_History(deps.storage)}function storage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function storage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function storage_createClass(Constructor,protoProps,staticProps){if(protoProps)storage_defineProperties(Constructor.prototype,protoProps);if(staticProps)storage_defineProperties(Constructor,staticProps);return Constructor}var StorageKeys;(function(StorageKeys){StorageKeys["WIDTH"]="widths"})(StorageKeys||(StorageKeys={}));var storage_Storage=function(){function Storage(engine,prefix){storage_classCallCheck(this,Storage);this.engine=engine;this.prefix=prefix}storage_createClass(Storage,[{key:"encode",value:function encode(val){return JSON.stringify(val)}},{key:"decode",value:function decode(val){if(typeof val==="string"){return JSON.parse(val)}}},{key:"encodeKey",value:function encodeKey(key){return"".concat(this.prefix).concat(key)}},{key:"decodeKey",value:function decodeKey(key){if(Object(external_kbnSharedDeps_Lodash_["startsWith"])(key,this.prefix)){return"".concat(key.slice(this.prefix.length))}}},{key:"set",value:function set(key,val){this.engine.setItem(this.encodeKey(key),this.encode(val));return val}},{key:"has",value:function has(key){return this.engine.getItem(this.encodeKey(key))!=null}},{key:"get",value:function get(key,_default){if(this.has(key)){return this.decode(this.engine.getItem(this.encodeKey(key)))}else{return _default}}},{key:"delete",value:function _delete(key){return this.engine.removeItem(this.encodeKey(key))}},{key:"keys",value:function keys(){var _this=this;return Object(external_kbnSharedDeps_Lodash_["transform"])(Object(external_kbnSharedDeps_Lodash_["keys"])(this.engine),(function(ours,key){var ourKey=_this.decodeKey(key);if(ourKey!=null)ours.push(ourKey)}))}}]);return Storage}();function createStorage(deps){return new storage_Storage(deps.engine,deps.prefix)}function settings_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function settings_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function settings_createClass(Constructor,protoProps,staticProps){if(protoProps)settings_defineProperties(Constructor.prototype,protoProps);if(staticProps)settings_defineProperties(Constructor,staticProps);return Constructor}var Settings=function(){function Settings(storage){settings_classCallCheck(this,Settings);this.storage=storage}settings_createClass(Settings,[{key:"getFontSize",value:function getFontSize(){return this.storage.get("font_size",14)}},{key:"setFontSize",value:function setFontSize(size){this.storage.set("font_size",size);return true}},{key:"getWrapMode",value:function getWrapMode(){return this.storage.get("wrap_mode",true)}},{key:"setWrapMode",value:function setWrapMode(mode){this.storage.set("wrap_mode",mode);return true}},{key:"setTripleQuotes",value:function setTripleQuotes(tripleQuotes){this.storage.set("triple_quotes",tripleQuotes);return true}},{key:"getTripleQuotes",value:function getTripleQuotes(){return this.storage.get("triple_quotes",true)}},{key:"getAutocomplete",value:function getAutocomplete(){return this.storage.get("autocomplete_settings",{fields:true,indices:true,templates:true})}},{key:"setAutocomplete",value:function setAutocomplete(settings){this.storage.set("autocomplete_settings",settings);return true}},{key:"getPolling",value:function getPolling(){return this.storage.get("console_polling",true)}},{key:"setPolling",value:function setPolling(polling){this.storage.set("console_polling",polling);return true}},{key:"toJSON",value:function toJSON(){return{autocomplete:this.getAutocomplete(),wrapMode:this.getWrapMode(),tripleQuotes:this.getTripleQuotes(),fontSize:parseFloat(this.getFontSize()),polling:Boolean(this.getPolling())}}},{key:"updateSettings",value:function updateSettings(_ref){var fontSize=_ref.fontSize,wrapMode=_ref.wrapMode,tripleQuotes=_ref.tripleQuotes,autocomplete=_ref.autocomplete,polling=_ref.polling;this.setFontSize(fontSize);this.setWrapMode(wrapMode);this.setTripleQuotes(tripleQuotes);this.setAutocomplete(autocomplete);this.setPolling(polling)}}]);return Settings}();function createSettings(_ref2){var storage=_ref2.storage;return new Settings(storage)}function editor_editor_slicedToArray(arr,i){return editor_editor_arrayWithHoles(arr)||editor_editor_iterableToArrayLimit(arr,i)||editor_editor_unsupportedIterableToArray(arr,i)||editor_editor_nonIterableRest()}function editor_editor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function editor_editor_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return editor_editor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return editor_editor_arrayLikeToArray(o,minLen)}function editor_editor_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function editor_editor_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function editor_editor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var INITIAL_PANEL_WIDTH=50;var PANEL_MIN_WIDTH="100px";var editor_Editor=Object(external_kbnSharedDeps_React_["memo"])((function(_ref){var loading=_ref.loading;var _useServicesContext=services_context_useServicesContext(),storage=_useServicesContext.services.storage;var _useEditorReadContext=useEditorReadContext(),currentTextObject=_useEditorReadContext.currentTextObject;var _useRequestReadContex=useRequestReadContext(),requestInFlight=_useRequestReadContex.requestInFlight;var _storage$get=storage.get(StorageKeys.WIDTH,[INITIAL_PANEL_WIDTH,INITIAL_PANEL_WIDTH]),_storage$get2=editor_editor_slicedToArray(_storage$get,2),firstPanelWidth=_storage$get2[0],secondPanelWidth=_storage$get2[1];var onPanelWidthChange=Object(external_kbnSharedDeps_React_["useCallback"])(Object(external_kbnSharedDeps_Lodash_["debounce"])((function(widths){storage.set(StorageKeys.WIDTH,widths)}),300),[]);if(!currentTextObject)return null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,requestInFlight?external_kbnSharedDeps_React_default.a.createElement("div",{className:"conApp__requestProgressBarContainer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiProgress"],{size:"xs",color:"accent",position:"absolute"})):null,external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["PanelsContainer"],{onPanelWidthChange:onPanelWidthChange,resizerClassName:"conApp__resizer"},external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["Panel"],{style:{height:"100%",position:"relative",minWidth:PANEL_MIN_WIDTH},initialWidth:firstPanelWidth},loading?external_kbnSharedDeps_React_default.a.createElement(editor_content_spinner_EditorContentSpinner,null):external_kbnSharedDeps_React_default.a.createElement(Editor,{initialTextValue:currentTextObject.text})),external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["Panel"],{style:{height:"100%",position:"relative",minWidth:PANEL_MIN_WIDTH},initialWidth:secondPanelWidth},loading?external_kbnSharedDeps_React_default.a.createElement(editor_content_spinner_EditorContentSpinner,null):external_kbnSharedDeps_React_default.a.createElement(EditorOutput,null))))}));var getAutocompleteDiff=function getAutocompleteDiff(newSettings,prevSettings){return Object.keys(newSettings.autocomplete).filter((function(key){return prevSettings.autocomplete[key]!==newSettings.autocomplete[key]}))};var _refreshAutocompleteSettings=function refreshAutocompleteSettings(settings,selectedSettings){retrieveAutoCompleteInfo(settings,selectedSettings)};var settings_fetchAutocompleteSettingsIfNeeded=function fetchAutocompleteSettingsIfNeeded(settings,newSettings,prevSettings){if(newSettings.polling){var autocompleteDiff=getAutocompleteDiff(newSettings,prevSettings);var isSettingsChanged=autocompleteDiff.length>0;var isPollingChanged=prevSettings.polling!==newSettings.polling;if(isSettingsChanged){var changedSettings=autocompleteDiff.reduce((function(changedSettingsAccum,setting){changedSettingsAccum[setting]=newSettings.autocomplete[setting];return changedSettingsAccum}),{});retrieveAutoCompleteInfo(settings,changedSettings)}else if(isPollingChanged&&newSettings.polling){retrieveAutoCompleteInfo(settings,settings.getAutocomplete())}}};function settings_Settings(_ref){var onClose=_ref.onClose;var _useServicesContext=services_context_useServicesContext(),settings=_useServicesContext.services.settings;var dispatch=useEditorActionContext();var onSaveSettings=function onSaveSettings(newSettings){var prevSettings=settings.toJSON();settings_fetchAutocompleteSettingsIfNeeded(settings,newSettings,prevSettings);settings.updateSettings(newSettings);dispatch({type:"updateSettings",payload:newSettings});onClose()};return external_kbnSharedDeps_React_default.a.createElement(DevToolsSettingsModal,{onClose:onClose,onSaveSettings:onSaveSettings,refreshAutocompleteSettings:function refreshAutocompleteSettings(selectedSettings){return _refreshAutocompleteSettings(settings,selectedSettings)},settings:settings.toJSON()})}function getTopNavConfig(_ref){var onClickHistory=_ref.onClickHistory,onClickSettings=_ref.onClickSettings,onClickHelp=_ref.onClickHelp;return[{id:"history",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.topNav.historyTabLabel",{defaultMessage:"History"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.topNav.historyTabDescription",{defaultMessage:"History"}),onClick:function onClick(){onClickHistory()},testId:"consoleHistoryButton"},{id:"settings",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.topNav.settingsTabLabel",{defaultMessage:"Settings"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.topNav.settingsTabDescription",{defaultMessage:"Settings"}),onClick:function onClick(){onClickSettings()},testId:"consoleSettingsButton"},{id:"help",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.topNav.helpTabLabel",{defaultMessage:"Help"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.topNav.helpTabDescription",{defaultMessage:"Help"}),onClick:function onClick(){onClickHelp()},testId:"consoleHelpButton"}]}function main_slicedToArray(arr,i){return main_arrayWithHoles(arr)||main_iterableToArrayLimit(arr,i)||main_unsupportedIterableToArray(arr,i)||main_nonIterableRest()}function main_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function main_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return main_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return main_arrayLikeToArray(o,minLen)}function main_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function main_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function main_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function Main(){var _requestData;var _useServicesContext=services_context_useServicesContext(),storage=_useServicesContext.services.storage;var _useEditorReadContext=useEditorReadContext(),editorsReady=_useEditorReadContext.ready;var _useRequestReadContex=useRequestReadContext(),requestInProgress=_useRequestReadContex.requestInFlight,_useRequestReadContex2=_useRequestReadContex.lastResult,requestData=_useRequestReadContex2.data,requestError=_useRequestReadContex2.error;var _useState=Object(external_kbnSharedDeps_React_["useState"])((function(){return storage.get("version_welcome_shown")!=="@@SENSE_REVISION"})),_useState2=main_slicedToArray(_useState,2),showWelcome=_useState2[0],setShowWelcomePanel=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=main_slicedToArray(_useState3,2),showingHistory=_useState4[0],setShowHistory=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])(false),_useState6=main_slicedToArray(_useState5,2),showSettings=_useState6[0],setShowSettings=_useState6[1];var _useState7=Object(external_kbnSharedDeps_React_["useState"])(false),_useState8=main_slicedToArray(_useState7,2),showHelp=_useState8[0],setShowHelp=_useState8[1];var renderConsoleHistory=function renderConsoleHistory(){return editorsReady?external_kbnSharedDeps_React_default.a.createElement(ConsoleHistory,{close:function close(){return setShowHistory(false)}}):null};var _useDataInit=use_data_init_useDataInit(),done=_useDataInit.done,error=_useDataInit.error,retry=_useDataInit.retry;if(error){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(something_went_wrong_callout_SomethingWentWrongCallout,{onButtonClick:retry,error:error}))}var lastDatum=(_requestData=requestData===null||requestData===void 0?void 0:requestData[requestData.length-1])!==null&&_requestData!==void 0?_requestData:requestError;return external_kbnSharedDeps_React_default.a.createElement("div",{id:"consoleRoot"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"consoleContainer",gutterSize:"none",direction:"column",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{className:"euiScreenReaderOnly"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("console.pageHeading",{defaultMessage:"Console"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(top_nav_menu_TopNavMenu,{disabled:!done,items:getTopNavConfig({onClickHistory:function onClickHistory(){return setShowHistory(!showingHistory)},onClickSettings:function onClickSettings(){return setShowSettings(true)},onClickHelp:function onClickHelp(){return setShowHelp(!showHelp)}})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"conApp__tabsExtension"},external_kbnSharedDeps_React_default.a.createElement(network_request_status_bar_NetworkRequestStatusBar,{requestInProgress:requestInProgress,requestResult:lastDatum?{method:lastDatum.request.method.toUpperCase(),endpoint:lastDatum.request.path,statusCode:lastDatum.response.statusCode,statusText:lastDatum.response.statusText,timeElapsedMs:lastDatum.response.timeMs}:undefined})))),showingHistory?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},renderConsoleHistory()):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(editor_Editor,{loading:!done}))),done&&showWelcome?external_kbnSharedDeps_React_default.a.createElement(WelcomePanel,{onDismiss:function onDismiss(){storage.set("version_welcome_shown","@@SENSE_REVISION");setShowWelcomePanel(false)}}):null,showSettings?external_kbnSharedDeps_React_default.a.createElement(settings_Settings,{onClose:function onClose(){return setShowSettings(false)}}):null,showHelp?external_kbnSharedDeps_React_default.a.createElement(HelpPanel,{onClose:function onClose(){return setShowHelp(false)}}):null)}var textObjectTypeName="text-object";var uuid=__webpack_require__(56);var uuid_default=__webpack_require__.n(uuid);function local_storage_object_client_createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=local_storage_object_client_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function local_storage_object_client_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return local_storage_object_client_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return local_storage_object_client_arrayLikeToArray(o,minLen)}function local_storage_object_client_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function local_storage_object_client_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function local_storage_object_client_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){local_storage_object_client_ownKeys(Object(source),true).forEach((function(key){local_storage_object_client_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{local_storage_object_client_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function local_storage_object_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function local_storage_object_client_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){local_storage_object_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){local_storage_object_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function local_storage_object_client_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function local_storage_object_client_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function local_storage_object_client_createClass(Constructor,protoProps,staticProps){if(protoProps)local_storage_object_client_defineProperties(Constructor.prototype,protoProps);if(staticProps)local_storage_object_client_defineProperties(Constructor,staticProps);return Constructor}function local_storage_object_client_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var local_storage_object_client_LocalObjectStorage=function(){function LocalObjectStorage(client,type){local_storage_object_client_classCallCheck(this,LocalObjectStorage);this.client=client;local_storage_object_client_defineProperty(this,"prefix",void 0);this.prefix="console_local_".concat(type)}local_storage_object_client_createClass(LocalObjectStorage,[{key:"create",value:function(){var _create=local_storage_object_client_asyncToGenerator(regeneratorRuntime.mark((function _callee(obj){var id,newObj;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=uuid_default.a.v4();newObj=local_storage_object_client_objectSpread({id:id},obj);this.client.set("".concat(this.prefix,"_").concat(id),newObj);return _context.abrupt("return",newObj);case 4:case"end":return _context.stop()}}}),_callee,this)})));function create(_x){return _create.apply(this,arguments)}return create}()},{key:"update",value:function(){var _update=local_storage_object_client_asyncToGenerator(regeneratorRuntime.mark((function _callee2(obj){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.client.set("".concat(this.prefix,"_").concat(obj.id),obj);case 1:case"end":return _context2.stop()}}}),_callee2,this)})));function update(_x2){return _update.apply(this,arguments)}return update}()},{key:"findAll",value:function(){var _findAll=local_storage_object_client_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var _this=this;var allLocalKeys,result,_iterator,_step,key;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:allLocalKeys=this.client.keys().filter((function(key){return key.includes(_this.prefix)}));result=[];_iterator=local_storage_object_client_createForOfIteratorHelper(allLocalKeys);try{for(_iterator.s();!(_step=_iterator.n()).done;){key=_step.value;result.push(this.client.get(key))}}catch(err){_iterator.e(err)}finally{_iterator.f()}return _context3.abrupt("return",result);case 5:case"end":return _context3.stop()}}}),_callee3,this)})));function findAll(){return _findAll.apply(this,arguments)}return findAll}()}]);return LocalObjectStorage}();var local_storage_object_client_create_create=function create(storage){return{text:new local_storage_object_client_LocalObjectStorage(storage,textObjectTypeName)}};function util_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function util_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)util_setPrototypeOf(subClass,superClass)}function util_createSuper(Derived){var hasNativeReflectConstruct=util_isNativeReflectConstruct();return function _createSuperInternal(){var Super=util_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=util_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return util_possibleConstructorReturn(this,result)}}function util_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return util_assertThisInitialized(self)}function util_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,util_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return util_setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function _construct(Parent,args,Class){if(util_isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)util_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function util_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function util_setPrototypeOf(o,p){util_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return util_setPrototypeOf(o,p)}function util_getPrototypeOf(o){util_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return util_getPrototypeOf(o)}function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}var UnreachableCaseError=function(_Error){util_inherits(UnreachableCaseError,_Error);var _super=util_createSuper(UnreachableCaseError);function UnreachableCaseError(val){util_classCallCheck(this,UnreachableCaseError);return _super.call(this,"Unreachable case: ".concat(val))}return UnreachableCaseError}(_wrapNativeSuper(Error));function createUiStatsMetric(_ref){var type=_ref.type,appName=_ref.appName,eventName=_ref.eventName,_ref$count=_ref.count,count=_ref$count===void 0?1:_ref$count;return{type:type,appName:appName,eventName:eventName,count:count}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(23);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function application_usage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function application_usage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function application_usage_createClass(Constructor,protoProps,staticProps){if(protoProps)application_usage_defineProperties(Constructor.prototype,protoProps);if(staticProps)application_usage_defineProperties(Constructor,staticProps);return Constructor}function application_usage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var application_usage_ApplicationUsage=function(){function ApplicationUsage(){application_usage_classCallCheck(this,ApplicationUsage);application_usage_defineProperty(this,"currentUsage",void 0)}application_usage_createClass(ApplicationUsage,[{key:"start",value:function start(){var _this=this;if(window)window.addEventListener("click",(function(){return _this.currentUsage&&_this.currentUsage.numberOfClicks++}))}},{key:"appChanged",value:function appChanged(appId){var currentUsage=this.currentUsage;if(appId){this.currentUsage={type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}else{this.currentUsage=void 0}return currentUsage}}]);return ApplicationUsage}();var stats=__webpack_require__(41);function trackUsageAgent(appName){var userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}var METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function web_storage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function web_storage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function web_storage_createClass(Constructor,protoProps,staticProps){if(protoProps)web_storage_defineProperties(Constructor.prototype,protoProps);if(staticProps)web_storage_defineProperties(Constructor,staticProps);return Constructor}function storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReportStorageManager=function(){function ReportStorageManager(storageKey,storage){web_storage_classCallCheck(this,ReportStorageManager);storage_defineProperty(this,"storageKey",void 0);storage_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}web_storage_createClass(ReportStorageManager,[{key:"get",value:function get(){if(!this.storage)return;return this.storage.get(this.storageKey)}},{key:"store",value:function store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}]);return ReportStorageManager}();function report_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function report_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function report_createClass(Constructor,protoProps,staticProps){if(protoProps)report_defineProperties(Constructor.prototype,protoProps);if(staticProps)report_defineProperties(Constructor,staticProps);return Constructor}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REPORT_VERSION=1;var report_ReportManager=function(){function ReportManager(report){report_classCallCheck(this,ReportManager);report_defineProperty(this,"report",void 0);this.report=report||ReportManager.createReport()}report_createClass(ReportManager,[{key:"clearReport",value:function clearReport(){this.report=ReportManager.createReport()}},{key:"isReportEmpty",value:function isReportEmpty(){var _this$report=this.report,uiStatsMetrics=_this$report.uiStatsMetrics,userAgent=_this$report.userAgent,appUsage=_this$report.application_usage;var noUiStats=!uiStatsMetrics||Object.keys(uiStatsMetrics).length===0;var noUserAgent=!userAgent||Object.keys(userAgent).length===0;var noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiStats&&noUserAgent&&noAppUsage}},{key:"incrementStats",value:function incrementStats(count,stats){var _ref=stats||{},_ref$min=_ref.min,min=_ref$min===void 0?0:_ref$min,_ref$max=_ref.max,max=_ref$max===void 0?0:_ref$max,_ref$sum=_ref.sum,sum=_ref$sum===void 0?0:_ref$sum;var newMin=Math.min(min,count);var newMax=Math.max(max,count);var newAvg=newMin+newMax/2;var newSum=sum+count;return{min:newMin,max:newMax,avg:newAvg,sum:newSum}}},{key:"assignReports",value:function assignReports(newMetrics){var _this=this;wrapArray(newMetrics).forEach((function(newMetric){return _this.assignReport(_this.report,newMetric)}));return{report:this.report}}},{key:"assignReport",value:function assignReport(report,metric){var key=ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{var appName=metric.appName,type=metric.type,userAgent=metric.userAgent;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _appName=metric.appName,_type=metric.type,eventName=metric.eventName,count=metric.count;report.uiStatsMetrics=report.uiStatsMetrics||{};var existingStats=(report.uiStatsMetrics[key]||{}).stats;report.uiStatsMetrics[key]={key:key,appName:_appName,eventName:eventName,type:_type,stats:this.incrementStats(count,existingStats)};return}case METRIC_TYPE.APPLICATION_USAGE:var numberOfClicks=metric.numberOfClicks,startTime=metric.startTime;var minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};var appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0};report.application_usage[key]={minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};break;default:throw new UnreachableCaseError(metric)}}}],[{key:"createReport",value:function createReport(){return{reportVersion:REPORT_VERSION}}},{key:"createMetricKey",value:function createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{var appName=metric.appName,type=metric.type;return"".concat(appName,"-").concat(type)}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _appName2=metric.appName,eventName=metric.eventName,_type2=metric.type;return"".concat(_appName2,"-").concat(_type2,"-").concat(eventName)}case METRIC_TYPE.APPLICATION_USAGE:return metric.appId;default:throw new UnreachableCaseError(metric)}}}]);return ReportManager}();report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function reporter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function reporter_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){reporter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){reporter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function reporter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function reporter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function reporter_createClass(Constructor,protoProps,staticProps){if(protoProps)reporter_defineProperties(Constructor.prototype,protoProps);if(staticProps)reporter_defineProperties(Constructor,staticProps);return Constructor}function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var reporter_Reporter=function(){function Reporter(config){var _this=this;reporter_classCallCheck(this,Reporter);reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"lastAppId",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"applicationUsage",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"started",false);reporter_defineProperty(this,"start",(function(){if(!_this.interval){_this.interval=setTimeout((function(){_this.interval=undefined;_this.sendReports()}),_this.checkInterval)}if(_this.started){return}if(window&&document){window.addEventListener("beforeunload",(function(){return _this.reportApplicationUsage()}));document.addEventListener("visibilitychange",(function(){if(document.visibilityState==="visible"&&_this.lastAppId){_this.reportApplicationUsage(_this.lastAppId)}else if(document.visibilityState==="hidden"){_this.reportApplicationUsage();_this.sendReports()}}))}_this.started=true;_this.applicationUsage.start()}));reporter_defineProperty(this,"reportUiStats",(function(appName,type,eventNames,count){var metrics=wrapArray(eventNames).map((function(eventName){_this.log("".concat(type," Metric -> (").concat(appName,":").concat(eventName,"):"));var report=createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count});_this.log(report);return report}));_this.saveToReport(metrics)}));reporter_defineProperty(this,"reportUserAgent",(function(appName){_this.log("Reporting user-agent.");var report=trackUsageAgent(appName);_this.saveToReport([report])}));reporter_defineProperty(this,"sendReports",reporter_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var versionMismatch;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.reportManager.isReportEmpty()){_context.next=13;break}_context.prev=1;_context.next=4;return _this.http(_this.reportManager.report);case 4:_this.flushReport();_context.next=13;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);_this.log("Error Sending Metrics Report ".concat(_context.t0));_this.retryCount=_this.retryCount+1;versionMismatch=_this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||_this.retryCount>_this.maxRetries){_this.flushReport()}case 13:_this.start();case 14:case"end":return _context.stop()}}}),_callee,null,[[1,7]])}))));var http=config.http,storage=config.storage,debug=config.debug,_config$checkInterval=config.checkInterval,checkInterval=_config$checkInterval===void 0?9e4:_config$checkInterval,_config$storageKey=config.storageKey,storageKey=_config$storageKey===void 0?"analytics":_config$storageKey;this.http=http;this.checkInterval=checkInterval;this.applicationUsage=new application_usage_ApplicationUsage;this.storageManager=new ReportStorageManager(storageKey,storage);var storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}reporter_createClass(Reporter,[{key:"saveToReport",value:function saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}},{key:"flushReport",value:function flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}},{key:"log",value:function log(message){if(this.debug){console.debug(message)}}},{key:"reportApplicationUsage",value:function reportApplicationUsage(appId){this.log("Reporting application changed to ".concat(appId));this.lastAppId=appId||this.lastAppId;var appChangedReport=this.applicationUsage.appChanged(appId);if(appChangedReport)this.saveToReport([appChangedReport])}}]);return Reporter}();var APP_TRACKER_NAME="console";var tracker_createUsageTracker=function createUsageTracker(usageCollection){var track=function track(type,name){return usageCollection===null||usageCollection===void 0?void 0:usageCollection.reportUiStats(APP_TRACKER_NAME,type,name)};return{count:function count(eventName){track(METRIC_TYPE.COUNT,eventName)},load:function load(eventName){track(METRIC_TYPE.LOADED,eventName)}}};var api_createApi=function createApi(_ref){var http=_ref.http;return{getEsConfig:function getEsConfig(){return Object(esUiShared_public_["sendRequest"])(http,{path:"/api/console/es_config",method:"get"})}}};function es_host_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function es_host_service_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){es_host_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){es_host_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function es_host_service_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function es_host_service_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function es_host_service_createClass(Constructor,protoProps,staticProps){if(protoProps)es_host_service_defineProperties(Constructor.prototype,protoProps);if(staticProps)es_host_service_defineProperties(Constructor,staticProps);return Constructor}function es_host_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EsHostService=function(){function EsHostService(api){es_host_service_classCallCheck(this,EsHostService);this.api=api;es_host_service_defineProperty(this,"host","http://localhost:9200")}es_host_service_createClass(EsHostService,[{key:"setHost",value:function setHost(host){this.host=host}},{key:"init",value:function(){var _init=es_host_service_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$this$api$getEs,data;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.api.getEsConfig();case 2:_yield$this$api$getEs=_context.sent;data=_yield$this$api$getEs.data;if(data&&data.host){this.setHost(data.host)}case 5:case"end":return _context.stop()}}}),_callee,this)})));function init(){return _init.apply(this,arguments)}return init}()},{key:"getHost",value:function getHost(){return this.host}}]);return EsHostService}();var createEsHostService=function createEsHostService(_ref){var api=_ref.api;return new EsHostService(api)};function renderApp(_ref){var I18nContext=_ref.I18nContext,notifications=_ref.notifications,docLinkVersion=_ref.docLinkVersion,usageCollection=_ref.usageCollection,element=_ref.element,http=_ref.http;var trackUiMetric=tracker_createUsageTracker(usageCollection);trackUiMetric.load("opened_app");var storage=createStorage({engine:window.localStorage,prefix:"sense:"});var history=createHistory({storage:storage});var settings=createSettings({storage:storage});var objectStorageClient=local_storage_object_client_create_create(storage);var api=api_createApi({http:http});var esHostService=createEsHostService({api:api});Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(ServicesContextProvider,{value:{docLinkVersion:docLinkVersion,services:{esHostService:esHostService,storage:storage,history:history,settings:settings,notifications:notifications,trackUiMetric:trackUiMetric,objectStorageClient:objectStorageClient}}},external_kbnSharedDeps_React_default.a.createElement(RequestContextProvider,null,external_kbnSharedDeps_React_default.a.createElement(EditorContextProvider,{settings:settings.toJSON()},external_kbnSharedDeps_React_default.a.createElement(Main,null))))),element);return function(){return Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)}}}}]);