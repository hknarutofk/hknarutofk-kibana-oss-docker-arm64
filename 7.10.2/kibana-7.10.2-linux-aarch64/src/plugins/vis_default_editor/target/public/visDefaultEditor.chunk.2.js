(window["visDefaultEditor_bundle_jsonpfunction"]=window["visDefaultEditor_bundle_jsonpfunction"]||[]).push([[2],{165:function(module,exports,__webpack_require__){function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var moment=__webpack_require__(20);var unitsMap={ms:{weight:1,type:"fixed",base:1},s:{weight:2,type:"fixed",base:1e3},m:{weight:3,type:"mixed",base:1e3*60},h:{weight:4,type:"mixed",base:1e3*60*60},d:{weight:5,type:"mixed",base:1e3*60*60*24},w:{weight:6,type:"calendar",base:NaN},M:{weight:7,type:"calendar",base:NaN},y:{weight:9,type:"calendar",base:NaN}};var units=Object.keys(unitsMap).sort((function(a,b){return unitsMap[b].weight-unitsMap[a].weight}));var unitsDesc=_toConsumableArray(units);var unitsAsc=_toConsumableArray(units).reverse();var isDate=function isDate(d){return Object.prototype.toString.call(d)==="[object Date]"};var isValidDate=function isValidDate(d){return isDate(d)&&!isNaN(d.valueOf())};function parse(text){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$roundUp=_ref.roundUp,roundUp=_ref$roundUp===void 0?false:_ref$roundUp,_ref$momentInstance=_ref.momentInstance,momentInstance=_ref$momentInstance===void 0?moment:_ref$momentInstance,forceNow=_ref.forceNow;if(!text)return undefined;if(momentInstance.isMoment(text))return text;if(isDate(text))return momentInstance(text);if(forceNow!==undefined&&!isValidDate(forceNow)){throw new Error("forceNow must be a valid Date")}var time;var mathString="";var index;var parseString;if(text.substring(0,3)==="now"){time=momentInstance(forceNow);mathString=text.substring("now".length)}else{index=text.indexOf("||");if(index===-1){parseString=text;mathString=""}else{parseString=text.substring(0,index);mathString=text.substring(index+2)}time=momentInstance(parseString)}if(!mathString.length){return time}return parseDateMath(mathString,time,roundUp)}function parseDateMath(mathString,time,roundUp){var dateTime=time;var len=mathString.length;var i=0;while(i<len){var c=mathString.charAt(i++);var type=void 0;var num=void 0;var unit=void 0;if(c==="/"){type=0}else if(c==="+"){type=1}else if(c==="-"){type=2}else{return}if(isNaN(mathString.charAt(i))){num=1}else if(mathString.length===2){num=mathString.charAt(i)}else{var numFrom=i;while(!isNaN(mathString.charAt(i))){i++;if(i>=len)return}num=parseInt(mathString.substring(numFrom,i),10)}if(type===0){if(num!==1){return}}unit=mathString.charAt(i++);for(var j=i;j<len;j++){var unitChar=mathString.charAt(i);if(/[a-z]/i.test(unitChar)){unit+=unitChar;i++}else{break}}if(units.indexOf(unit)===-1){return}else{if(type===0){if(roundUp)dateTime.endOf(unit);else dateTime.startOf(unit)}else if(type===1){dateTime.add(num,unit)}else if(type===2){dateTime.subtract(num,unit)}}}return dateTime}module.exports={parse:parse,unitsMap:Object.freeze(unitsMap),units:Object.freeze(units),unitsAsc:Object.freeze(unitsAsc),unitsDesc:Object.freeze(unitsDesc)}},21:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return DefaultEditor}));var public_0=__webpack_require__(53);var json=__webpack_require__(37);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var public_=__webpack_require__(18);var kibanaUtils_public_=__webpack_require__(19);var external_kbnSharedDeps_Lodash_=__webpack_require__(3);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);function DefaultEditorNavBar(_ref){var setSelectedTab=_ref.setSelectedTab,optionTabs=_ref.optionTabs;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabs"],{className:"visEditorSidebar__nav",size:"s"},optionTabs.map((function(_ref2){var name=_ref2.name,title=_ref2.title,_ref2$isSelected=_ref2.isSelected,isSelected=_ref2$isSelected===void 0?false:_ref2$isSelected;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{key:name,isSelected:isSelected,"data-test-subj":"visEditorTab__".concat(name),onClick:function onClick(){return setSelectedTab(name)}},title)})))}var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(8);var lib=__webpack_require__(24);var data_public_=__webpack_require__(4);var EditorStateActionTypes;(function(EditorStateActionTypes){EditorStateActionTypes["ADD_NEW_AGG"]="ADD_NEW_AGG";EditorStateActionTypes["DISCARD_CHANGES"]="DISCARD_CHANGES";EditorStateActionTypes["CHANGE_AGG_TYPE"]="CHANGE_AGG_TYPE";EditorStateActionTypes["SET_AGG_PARAM_VALUE"]="SET_AGG_PARAM_VALUE";EditorStateActionTypes["SET_STATE_PARAM_VALUE"]="SET_STATE_PARAM_VALUE";EditorStateActionTypes["TOGGLE_ENABLED_AGG"]="TOGGLE_ENABLED_AGG";EditorStateActionTypes["REMOVE_AGG"]="REMOVE_AGG";EditorStateActionTypes["REORDER_AGGS"]="REORDER_AGGS";EditorStateActionTypes["UPDATE_STATE_PARAMS"]="UPDATE_STATE_PARAMS"})(EditorStateActionTypes||(EditorStateActionTypes={}));var public_schemas=__webpack_require__(5);var agg_group_helper_isAggRemovable=function isAggRemovable(agg,group,schemas){var schema=Object(public_schemas["d"])(schemas,agg.schema);var metricCount=group.reduce((function(count,aggregation){return aggregation.schema===agg.schema?++count:count}),0);return metricCount>schema.min};var getEnabledMetricAggsCount=function getEnabledMetricAggsCount(group){return group.reduce((function(count,aggregation){return aggregation.schema==="metric"&&aggregation.enabled?++count:count}),0)};var agg_group_helper_calcAggIsTooLow=function calcAggIsTooLow(agg,aggIndex,group,schemas){var schema=Object(public_schemas["d"])(schemas,agg.schema);if(!schema.mustBeFirst){return false}var firstDifferentSchema=Object(external_kbnSharedDeps_Lodash_["findIndex"])(group,(function(aggr){return aggr.schema!==agg.schema}));if(firstDifferentSchema===-1){return false}return aggIndex>firstDifferentSchema};function isInvalidAggsTouched(aggsState){var invalidAggs=Object.values(aggsState).filter((function(agg){return!agg.valid}));if(Object(external_kbnSharedDeps_Lodash_["isEmpty"])(invalidAggs)){return false}return invalidAggs.every((function(agg){return agg.touched}))}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function initEditorState(vis){return _objectSpread({},vis.clone())}var reducers_createEditorStateReducer=function createEditorStateReducer(_ref){var createAggConfigs=_ref.aggs.createAggConfigs;return function(state,action){switch(action.type){case EditorStateActionTypes.ADD_NEW_AGG:{var schema=action.payload.schema;var defaultConfig=!state.data.aggs.aggs.find((function(agg){return agg.schema===schema.name}))&&schema.defaults?schema.defaults.slice(0,schema.max):{schema:schema.name};var aggConfig=state.data.aggs.createAggConfig(defaultConfig,{addToAggConfigs:false});aggConfig.brandNew=true;var newAggs=[].concat(_toConsumableArray(state.data.aggs.aggs),[aggConfig]);return _objectSpread(_objectSpread({},state),{},{data:_objectSpread(_objectSpread({},state.data),{},{aggs:createAggConfigs(state.data.indexPattern,newAggs)})})}case EditorStateActionTypes.DISCARD_CHANGES:{return initEditorState(action.payload)}case EditorStateActionTypes.CHANGE_AGG_TYPE:{var _action$payload=action.payload,aggId=_action$payload.aggId,value=_action$payload.value;var _newAggs=state.data.aggs.aggs.map((function(agg){if(agg.id===aggId){agg.type=value;return agg.toJSON()}return agg}));return _objectSpread(_objectSpread({},state),{},{data:_objectSpread(_objectSpread({},state.data),{},{aggs:createAggConfigs(state.data.indexPattern,_newAggs)})})}case EditorStateActionTypes.SET_AGG_PARAM_VALUE:{var _action$payload2=action.payload,_aggId=_action$payload2.aggId,paramName=_action$payload2.paramName,_value=_action$payload2.value;var _newAggs2=state.data.aggs.aggs.map((function(agg){if(agg.id===_aggId){var parsedAgg=agg.toJSON();return _objectSpread(_objectSpread({},parsedAgg),{},{params:_objectSpread(_objectSpread({},parsedAgg.params),{},{[paramName]:_value})})}return agg}));return _objectSpread(_objectSpread({},state),{},{data:_objectSpread(_objectSpread({},state.data),{},{aggs:createAggConfigs(state.data.indexPattern,_newAggs2)})})}case EditorStateActionTypes.SET_STATE_PARAM_VALUE:{var _action$payload3=action.payload,_paramName=_action$payload3.paramName,_value2=_action$payload3.value;return _objectSpread(_objectSpread({},state),{},{params:_objectSpread(_objectSpread({},state.params),{},{[_paramName]:_value2})})}case EditorStateActionTypes.REMOVE_AGG:{var isMetric=false;var _newAggs3=state.data.aggs.aggs.filter((function(_ref2){var id=_ref2.id,schema=_ref2.schema;if(id===action.payload.aggId){var schemaDef=action.payload.schemas.find((function(s){return s.name===schema}));if(schemaDef&&schemaDef.group===data_public_["AggGroupNames"].Metrics){isMetric=true}return false}return true}));if(isMetric&&getEnabledMetricAggsCount(_newAggs3)===0){var aggToEnable=_newAggs3.find((function(agg){return agg.schema==="metric"}));if(aggToEnable){aggToEnable.enabled=true}}return _objectSpread(_objectSpread({},state),{},{data:_objectSpread(_objectSpread({},state.data),{},{aggs:createAggConfigs(state.data.indexPattern,_newAggs3)})})}case EditorStateActionTypes.REORDER_AGGS:{var _action$payload4=action.payload,sourceAgg=_action$payload4.sourceAgg,destinationAgg=_action$payload4.destinationAgg;var destinationIndex=state.data.aggs.aggs.indexOf(destinationAgg);var _newAggs4=_toConsumableArray(state.data.aggs.aggs);_newAggs4.splice(destinationIndex,0,_newAggs4.splice(state.data.aggs.aggs.indexOf(sourceAgg),1)[0]);return _objectSpread(_objectSpread({},state),{},{data:_objectSpread(_objectSpread({},state.data),{},{aggs:createAggConfigs(state.data.indexPattern,_newAggs4)})})}case EditorStateActionTypes.TOGGLE_ENABLED_AGG:{var _action$payload5=action.payload,_aggId2=_action$payload5.aggId,enabled=_action$payload5.enabled;var _newAggs5=state.data.aggs.aggs.map((function(agg){if(agg.id===_aggId2){var parsedAgg=agg.toJSON();return _objectSpread(_objectSpread({},parsedAgg),{},{enabled:enabled})}return agg}));return _objectSpread(_objectSpread({},state),{},{data:_objectSpread(_objectSpread({},state.data),{},{aggs:createAggConfigs(state.data.indexPattern,_newAggs5)})})}case EditorStateActionTypes.UPDATE_STATE_PARAMS:{var params=action.payload.params;return _objectSpread(_objectSpread({},state),{},{params:Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(params)})}}}};function editor_form_state_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function editor_form_state_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){editor_form_state_ownKeys(Object(source),true).forEach((function(key){editor_form_state_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{editor_form_state_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function editor_form_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||editor_form_state_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function editor_form_state_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return editor_form_state_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return editor_form_state_arrayLikeToArray(o,minLen)}function editor_form_state_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var initialFormState={validity:{},touched:false,invalid:false};function useEditorFormState(){var _useState=Object(external_kbnSharedDeps_React_["useState"])(initialFormState),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var setValidity=Object(external_kbnSharedDeps_React_["useCallback"])((function(modelName,value){setFormState((function(model){var validity=editor_form_state_objectSpread(editor_form_state_objectSpread({},model.validity),{},{[modelName]:value});return editor_form_state_objectSpread(editor_form_state_objectSpread({},model),{},{validity:validity,invalid:Object.values(validity).some((function(valid){return!valid}))})}))}),[]);var resetValidity=Object(external_kbnSharedDeps_React_["useCallback"])((function(){setFormState(initialFormState)}),[]);var setTouched=Object(external_kbnSharedDeps_React_["useCallback"])((function(touched){setFormState((function(model){return editor_form_state_objectSpread(editor_form_state_objectSpread({},model),{},{touched:touched})}))}),[]);return{formState:formState,setValidity:setValidity,setTouched:setTouched,resetValidity:resetValidity}}var actions_addNewAgg=function addNewAgg(schema){return{type:EditorStateActionTypes.ADD_NEW_AGG,payload:{schema:schema}}};var actions_discardChanges=function discardChanges(vis){return{type:EditorStateActionTypes.DISCARD_CHANGES,payload:vis}};var actions_changeAggType=function changeAggType(aggId,value){return{type:EditorStateActionTypes.CHANGE_AGG_TYPE,payload:{aggId:aggId,value:value}}};var actions_setAggParamValue=function setAggParamValue(aggId,paramName,value){return{type:EditorStateActionTypes.SET_AGG_PARAM_VALUE,payload:{aggId:aggId,paramName:paramName,value:value}}};var actions_setStateParamValue=function setStateParamValue(paramName,value){return{type:EditorStateActionTypes.SET_STATE_PARAM_VALUE,payload:{paramName:paramName,value:value}}};var actions_removeAgg=function removeAgg(aggId,schemas){return{type:EditorStateActionTypes.REMOVE_AGG,payload:{aggId:aggId,schemas:schemas}}};var actions_reorderAggs=function reorderAggs(sourceAgg,destinationAgg){return{type:EditorStateActionTypes.REORDER_AGGS,payload:{sourceAgg:sourceAgg,destinationAgg:destinationAgg}}};var actions_toggleEnabledAgg=function toggleEnabledAgg(aggId,enabled){return{type:EditorStateActionTypes.TOGGLE_ENABLED_AGG,payload:{aggId:aggId,enabled:enabled}}};var actions_updateStateParams=function updateStateParams(params){return{type:EditorStateActionTypes.UPDATE_STATE_PARAMS,payload:{params:params}}};function state_slicedToArray(arr,i){return state_arrayWithHoles(arr)||state_iterableToArrayLimit(arr,i)||state_unsupportedIterableToArray(arr,i)||state_nonIterableRest()}function state_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function state_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return state_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return state_arrayLikeToArray(o,minLen)}function state_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function state_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function state_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function useEditorReducer(vis,eventEmitter){var _useKibana=Object(public_["useKibana"])(),services=_useKibana.services;var _useReducer=Object(external_kbnSharedDeps_React_["useReducer"])(reducers_createEditorStateReducer(services.data.search),vis,initEditorState),_useReducer2=state_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var wrappedDispatch=Object(external_kbnSharedDeps_React_["useCallback"])((function(action){dispatch(action);eventEmitter.emit("dirtyStateChange",{isDirty:action.type!==EditorStateActionTypes.DISCARD_CHANGES})}),[eventEmitter]);return[state,wrappedDispatch]}function controls_slicedToArray(arr,i){return controls_arrayWithHoles(arr)||controls_iterableToArrayLimit(arr,i)||controls_unsupportedIterableToArray(arr,i)||controls_nonIterableRest()}function controls_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function controls_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return controls_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return controls_arrayLikeToArray(o,minLen)}function controls_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function controls_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function controls_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function DefaultEditorControls(_ref){var applyChanges=_ref.applyChanges,isDirty=_ref.isDirty,isInvalid=_ref.isInvalid,isTouched=_ref.isTouched,dispatch=_ref.dispatch,vis=_ref.vis;var enableAutoApply=vis.type.editorConfig.enableAutoApply;var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=controls_slicedToArray(_useState,2),autoApplyEnabled=_useState2[0],setAutoApplyEnabled=_useState2[1];var toggleAutoApply=Object(external_kbnSharedDeps_React_["useCallback"])((function(e){return setAutoApplyEnabled(e.target.checked)}),[]);var onClickDiscard=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return dispatch(actions_discardChanges(vis))}),[dispatch,vis]);Object(lib["useDebounce"])((function(){if(autoApplyEnabled&&isDirty){applyChanges()}}),300,[isDirty,autoApplyEnabled,applyChanges]);return external_kbnSharedDeps_React_default.a.createElement("div",{className:"visEditorSidebar__controls"},!autoApplyEnabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",gutterSize:"none",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"visualizeEditorResetButton",disabled:!isDirty,iconType:"cross",onClick:onClickDiscard,size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.discardChangesButtonLabel",defaultMessage:"Discard"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},isInvalid&&isTouched?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.errorButtonTooltip",{defaultMessage:"Errors in the highlighted fields need to be resolved."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"danger",iconType:"alert",size:"s",disabled:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.updateChartButtonLabel",defaultMessage:"Update"}))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"visualizeEditorRenderButton",disabled:!isDirty,fill:true,iconType:"play",onClick:applyChanges,size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.updateChartButtonLabel",defaultMessage:"Update"})))),enableAutoApply&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{title:autoApplyEnabled?external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.autoApplyChangesOnLabel",{defaultMessage:"Auto apply is on"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.autoApplyChangesOffLabel",{defaultMessage:"Auto apply is off"}),content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.autoApplyChangesTooltip",{defaultMessage:"Auto updates the visualization on every change."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonToggle"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.autoApplyChangesAriaLabel",{defaultMessage:"Auto apply editor changes"}),className:"visEditorSidebar__autoApplyButton","data-test-subj":"visualizeEditorAutoButton",fill:autoApplyEnabled,iconType:"refresh",isSelected:autoApplyEnabled,onChange:toggleAutoApply,size:"s",isIconOnly:true})))}function sidebar_title_slicedToArray(arr,i){return sidebar_title_arrayWithHoles(arr)||sidebar_title_iterableToArrayLimit(arr,i)||sidebar_title_unsupportedIterableToArray(arr,i)||sidebar_title_nonIterableRest()}function sidebar_title_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sidebar_title_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return sidebar_title_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sidebar_title_arrayLikeToArray(o,minLen)}function sidebar_title_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function sidebar_title_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function sidebar_title_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function LinkedSearch(_ref){var savedSearch=_ref.savedSearch,eventEmitter=_ref.eventEmitter;var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=sidebar_title_slicedToArray(_useState,2),showPopover=_useState2[0],setShowPopover=_useState2[1];var _useKibana=Object(public_["useKibana"])(),application=_useKibana.services.application;var closePopover=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return setShowPopover(false)}),[]);var onClickButtonLink=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return setShowPopover((function(v){return!v}))}),[]);var onClickUnlikFromSavedSearch=Object(external_kbnSharedDeps_React_["useCallback"])((function(){setShowPopover(false);eventEmitter.emit("unlinkFromSavedSearch")}),[eventEmitter]);var onClickViewInDiscover=Object(external_kbnSharedDeps_React_["useCallback"])((function(){application.navigateToApp("discover",{path:"#/view/".concat(savedSearch.id)})}),[application,savedSearch.id]);var linkButtonAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.savedSearch.linkButtonAriaLabel",{defaultMessage:"Link to saved search. Click to learn more or break link."});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",className:"visEditorSidebar__titleContainer visEditorSidebar__linkedSearch",gutterSize:"xs",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"search"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"eui-textTruncate"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs",className:"eui-textTruncate"},external_kbnSharedDeps_React_default.a.createElement("h2",{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.savedSearch.titleAriaLabel",{defaultMessage:"Saved search: {title}",values:{title:savedSearch.title}})},savedSearch.title))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{anchorPosition:"downRight",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:linkButtonAriaLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":linkButtonAriaLabel,"data-test-subj":"showUnlinkSavedSearchPopover",iconType:"link",onClick:onClickButtonLink})),isOpen:showPopover,closePopover:closePopover,panelPaddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.savedSearch.popoverTitle",defaultMessage:"Linked to saved search"})),external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:260}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"viewSavedSearch",flush:"left",onClick:onClickViewInDiscover,size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.savedSearch.goToDiscoverButtonText",defaultMessage:"View this search in Discover"}))),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.savedSearch.popoverHelpText",defaultMessage:"Subsequent modifications to this saved search are reflected in the visualization. To disable automatic updates, remove the link."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"danger","data-test-subj":"unlinkSavedSearch",fullWidth:true,onClick:onClickUnlikFromSavedSearch,size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.savedSearch.unlinkSavedSearchButtonText",defaultMessage:"Remove link to saved search"}))))))))}function SidebarTitle(_ref2){var savedSearch=_ref2.savedSearch,vis=_ref2.vis,isLinkedSearch=_ref2.isLinkedSearch,eventEmitter=_ref2.eventEmitter;return isLinkedSearch&&savedSearch?external_kbnSharedDeps_React_default.a.createElement(LinkedSearch,{savedSearch:savedSearch,eventEmitter:eventEmitter}):vis.type.options.showIndexSelection?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs",className:"visEditorSidebar__titleContainer eui-textTruncate"},external_kbnSharedDeps_React_default.a.createElement("h2",{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.indexPatternAriaLabel",{defaultMessage:"Index pattern: {title}",values:{title:vis.data.indexPattern.title}})},vis.data.indexPattern.title)):external_kbnSharedDeps_React_default.a.createElement("div",{className:"visEditorSidebar__indexPatternPlaceholder"})}var useUnmount=__webpack_require__(30);var useUnmount_default=__webpack_require__.n(useUnmount);function agg_params_state_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function agg_params_state_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){agg_params_state_ownKeys(Object(source),true).forEach((function(key){agg_params_state_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{agg_params_state_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function agg_params_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AGG_TYPE_ACTION_KEYS;(function(AGG_TYPE_ACTION_KEYS){AGG_TYPE_ACTION_KEYS["TOUCHED"]="aggTypeTouched";AGG_TYPE_ACTION_KEYS["VALID"]="aggTypeValid"})(AGG_TYPE_ACTION_KEYS||(AGG_TYPE_ACTION_KEYS={}));function aggTypeReducer(state,action){switch(action.type){case AGG_TYPE_ACTION_KEYS.TOUCHED:return agg_params_state_objectSpread(agg_params_state_objectSpread({},state),{},{touched:action.payload});case AGG_TYPE_ACTION_KEYS.VALID:return agg_params_state_objectSpread(agg_params_state_objectSpread({},state),{},{valid:action.payload});default:throw new Error}}var AGG_PARAMS_ACTION_KEYS;(function(AGG_PARAMS_ACTION_KEYS){AGG_PARAMS_ACTION_KEYS["TOUCHED"]="aggParamsTouched";AGG_PARAMS_ACTION_KEYS["VALID"]="aggParamsValid";AGG_PARAMS_ACTION_KEYS["RESET"]="aggParamsReset"})(AGG_PARAMS_ACTION_KEYS||(AGG_PARAMS_ACTION_KEYS={}));function aggParamsReducer(state,_ref){var type=_ref.type,_ref$paramName=_ref.paramName,paramName=_ref$paramName===void 0?"":_ref$paramName,payload=_ref.payload;var targetParam=state[paramName]||{valid:true,touched:false};switch(type){case AGG_PARAMS_ACTION_KEYS.TOUCHED:return agg_params_state_objectSpread(agg_params_state_objectSpread({},state),{},{[paramName]:agg_params_state_objectSpread(agg_params_state_objectSpread({},targetParam),{},{touched:payload})});case AGG_PARAMS_ACTION_KEYS.VALID:return agg_params_state_objectSpread(agg_params_state_objectSpread({},state),{},{[paramName]:agg_params_state_objectSpread(agg_params_state_objectSpread({},targetParam),{},{valid:payload})});case AGG_PARAMS_ACTION_KEYS.RESET:return{};default:throw new Error}}function initAggParamsState(params){var state=params.reduce((function(stateObj,param){stateObj[param.aggParam.name]={valid:true,touched:false};return stateObj}),{});return state}function agg_select_slicedToArray(arr,i){return agg_select_arrayWithHoles(arr)||agg_select_iterableToArrayLimit(arr,i)||agg_select_unsupportedIterableToArray(arr,i)||agg_select_nonIterableRest()}function agg_select_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function agg_select_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return agg_select_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return agg_select_arrayLikeToArray(o,minLen)}function agg_select_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function agg_select_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function agg_select_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function DefaultEditorAggSelect(_ref){var aggError=_ref.aggError,id=_ref.id,indexPattern=_ref.indexPattern,value=_ref.value,setValue=_ref.setValue,aggTypeOptions=_ref.aggTypeOptions,showValidation=_ref.showValidation,isSubAggregation=_ref.isSubAggregation,onChangeAggType=_ref.onChangeAggType;var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=agg_select_slicedToArray(_useState,2),isDirty=_useState2[0],setIsDirty=_useState2[1];var _useKibana=Object(public_["useKibana"])(),services=_useKibana.services;var selectedOptions=value?[{label:value.title,target:value}]:[];var label=isSubAggregation?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggSelect.subAggregationLabel",defaultMessage:"Sub aggregation"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggSelect.aggregationLabel",defaultMessage:"Aggregation"});var aggHelpLink;if(Object(external_kbnSharedDeps_Lodash_["has"])(value,"name")){aggHelpLink=services.docLinks.links.aggs[value.name]}var helpLink=value&&aggHelpLink&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:aggHelpLink,target:"_blank",rel:"noopener"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggSelect.helpLinkLabel",defaultMessage:"{aggTitle} help",values:{aggTitle:value?value.title:""}})));var errors=aggError?[aggError]:[];if(!aggTypeOptions.length){errors.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.aggSelect.noCompatibleAggsDescription",{defaultMessage:"The index pattern {indexPatternTitle} does not have any aggregatable fields.",values:{indexPatternTitle:indexPattern&&indexPattern.title}}))}var isValid=!!value&&!errors.length&&!isDirty;var onChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(options){var selectedOption=Object(external_kbnSharedDeps_Lodash_["get"])(options,"0.target");if(selectedOption){setValue(selectedOption)}}),[setValue]);var onSearchChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(searchValue){return setIsDirty(Boolean(searchValue))}),[]);var setTouched=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return onChangeAggType({type:AGG_TYPE_ACTION_KEYS.TOUCHED,payload:true})}),[onChangeAggType]);var setValidity=Object(external_kbnSharedDeps_React_["useCallback"])((function(valid){return onChangeAggType({type:AGG_TYPE_ACTION_KEYS.VALID,payload:valid})}),[onChangeAggType]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(isValid)}),[isValid,setValidity]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(errors.length){setTouched()}}),[errors.length,setTouched]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,labelAppend:helpLink,error:errors,isInvalid:showValidation?!isValid:false,fullWidth:true,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.aggSelect.selectAggPlaceholder",{defaultMessage:"Select an aggregation"}),id:"visDefaultEditorAggSelect".concat(id),isDisabled:!aggTypeOptions.length,options:aggTypeOptions,selectedOptions:selectedOptions,singleSelection:{asPlainText:true},onBlur:setTouched,onChange:onChange,onSearchChange:onSearchChange,"data-test-subj":"defaultEditorAggSelect",isClearable:false,isInvalid:showValidation?!isValid:false,fullWidth:true,sortMatchesBy:"startsWith",compressed:true}))}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function DefaultEditorAggParam(props){var agg=props.agg,aggParam=props.aggParam,ParamEditor=props.paramEditor,setAggParamValue=props.setAggParamValue,onChangeParamsState=props.onChangeParamsState,rest=_objectWithoutProperties(props,["agg","aggParam","paramEditor","setAggParamValue","onChangeParamsState"]);var setValidity=Object(external_kbnSharedDeps_React_["useCallback"])((function(valid){onChangeParamsState({type:AGG_PARAMS_ACTION_KEYS.VALID,paramName:aggParam.name,payload:valid})}),[onChangeParamsState,aggParam.name]);var setTouched=Object(external_kbnSharedDeps_React_["useCallback"])((function(){var isTouched=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;onChangeParamsState({type:AGG_PARAMS_ACTION_KEYS.TOUCHED,paramName:aggParam.name,payload:isTouched})}),[onChangeParamsState,aggParam.name]);var setValue=Object(external_kbnSharedDeps_React_["useCallback"])((function(value){if(props.value!==value){setAggParamValue(agg.id,aggParam.name,value)}}),[setAggParamValue,agg.id,aggParam.name,props.value]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(aggParam.shouldShow&&!aggParam.shouldShow(agg)){setValidity(true)}}),[agg,agg.params.field,aggParam,setValidity]);if(aggParam.shouldShow&&!aggParam.shouldShow(agg)){return null}return external_kbnSharedDeps_React_default.a.createElement(ParamEditor,_extends({agg:agg,aggParam:aggParam,setValidity:setValidity,setTouched:setTouched,setValue:setValue},rest))}var propFilter=data_public_["search"].aggs.propFilter;var filterByName=propFilter("name");var agg_type_filters_filters=[function(aggType,indexPattern,aggConfig,aggFilter){var doesSchemaAllowAggType=filterByName([aggType],aggFilter).length!==0;return doesSchemaAllowAggType},function(aggType,indexPattern,aggConfig,aggFilter){var aggRestrictions=indexPattern.getAggregationRestrictions();if(!aggRestrictions){return true}var aggName=aggType.name;return aggName==="count"||!!aggRestrictions&&Object.keys(aggRestrictions).includes(aggName)||false}];function filterAggTypes(aggTypes,indexPattern,aggConfig,aggFilter){var allowedAggTypes=aggTypes.filter((function(aggType){var isAggTypeAllowed=agg_type_filters_filters.every((function(filter){return filter(aggType,indexPattern,aggConfig,aggFilter)}));return isAggTypeAllowed}));return allowedAggTypes}var agg_type_field_filters_filters=[function(field,aggConfig){var indexPattern=aggConfig.getIndexPattern();var aggRestrictions=indexPattern.getAggregationRestrictions();if(!aggRestrictions){return true}var aggName=aggConfig.type&&aggConfig.type.name;var aggFields=aggRestrictions[aggName];return!!aggFields&&!!aggFields[field.name]}];function filterAggTypeFields(fields,aggConfig){var allowedAggTypeFields=fields.filter((function(field){var isAggTypeFieldAllowed=agg_type_field_filters_filters.every((function(filter){return filter(field,aggConfig)}));return isAggTypeFieldAllowed}));return allowedAggTypeFields}var utils=__webpack_require__(11);function AutoPrecisionParamEditor(_ref){var _ref$value=_ref.value,value=_ref$value===void 0?false:_ref$value,setValue=_ref.setValue;var label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.changePrecisionLabel",{defaultMessage:"Change precision on map zoom"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{compressed:true,label:label,checked:value,onChange:function onChange(ev){return setValue(ev.target.checked)}}))}var elastic_datemath=__webpack_require__(165);var elastic_datemath_default=__webpack_require__.n(elastic_datemath);function date_ranges_toConsumableArray(arr){return date_ranges_arrayWithoutHoles(arr)||date_ranges_iterableToArray(arr)||date_ranges_unsupportedIterableToArray(arr)||date_ranges_nonIterableSpread()}function date_ranges_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function date_ranges_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function date_ranges_arrayWithoutHoles(arr){if(Array.isArray(arr))return date_ranges_arrayLikeToArray(arr)}function date_ranges_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function date_ranges_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){date_ranges_ownKeys(Object(source),true).forEach((function(key){date_ranges_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{date_ranges_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function date_ranges_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function date_ranges_slicedToArray(arr,i){return date_ranges_arrayWithHoles(arr)||date_ranges_iterableToArrayLimit(arr,i)||date_ranges_unsupportedIterableToArray(arr,i)||date_ranges_nonIterableRest()}function date_ranges_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function date_ranges_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return date_ranges_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return date_ranges_arrayLikeToArray(o,minLen)}function date_ranges_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function date_ranges_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function date_ranges_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var FROM_PLACEHOLDER="−∞";var TO_PLACEHOLDER="+∞";var generateId=Object(external_kbnSharedDeps_ElasticEui_["htmlIdGenerator"])();var date_ranges_validateDateMath=function validateDateMath(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";if(!value){return true}var moment=elastic_datemath_default.a.parse(value);return moment&&moment.isValid()};function DateRangesParamEditor(_ref){var _ref$value=_ref.value,value=_ref$value===void 0?[]:_ref$value,setValue=_ref.setValue,setValidity=_ref.setValidity;var _useKibana=Object(public_["useKibana"])(),services=_useKibana.services;var _useState=Object(external_kbnSharedDeps_React_["useState"])((function(){return value.map((function(range){return date_ranges_objectSpread(date_ranges_objectSpread({},range),{},{id:generateId()})}))})),_useState2=date_ranges_slicedToArray(_useState,2),ranges=_useState2[0],setRanges=_useState2[1];var hasInvalidRange=value.some((function(_ref2){var from=_ref2.from,to=_ref2.to;return!from&&!to||!date_ranges_validateDateMath(from)||!date_ranges_validateDateMath(to)}));var updateRanges=Object(external_kbnSharedDeps_React_["useCallback"])((function(rangeValues){setValue(rangeValues.map((function(range){return Object(external_kbnSharedDeps_Lodash_["omit"])(range,"id")})));setRanges(rangeValues)}),[setValue]);var onAddRange=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return updateRanges([].concat(date_ranges_toConsumableArray(ranges),[{id:generateId()}]))}),[ranges,updateRanges]);Object(lib["useMount"])((function(){if(!value.length){onAddRange()}}));Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(value.length!==ranges.length||value.some((function(range,index){return!Object(external_kbnSharedDeps_Lodash_["isEqual"])(range,Object(external_kbnSharedDeps_Lodash_["omit"])(ranges[index],"id"))}))){setRanges(value.map((function(range){return date_ranges_objectSpread(date_ranges_objectSpread({},range),{},{id:generateId()})})))}}),[ranges,value]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(!hasInvalidRange)}),[hasInvalidRange,setValidity]);var onRemoveRange=function onRemoveRange(id){return updateRanges(ranges.filter((function(range){return range.id!==id})))};var onChangeRange=function onChangeRange(id,key,newValue){return updateRanges(ranges.map((function(range){return range.id===id?date_ranges_objectSpread(date_ranges_objectSpread({},range),{},{[key]:newValue===""?undefined:newValue}):range})))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{compressed:true,fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:services.docLinks.links.date.dateMath,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.dateRanges.acceptedDateFormatsLinkText",defaultMessage:"Acceptable date formats"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),ranges.map((function(_ref3,index){var from=_ref3.from,to=_ref3.to,id=_ref3.id;var deleteBtnTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.dateRanges.removeRangeButtonAriaLabel",{defaultMessage:"Remove the range of {from} to {to}",values:{from:from||FROM_PLACEHOLDER,to:to||TO_PLACEHOLDER}});var areBothEmpty=!from&&!to;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:id},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.dateRanges.fromColumnLabel",{defaultMessage:"From",description:"Beginning of a date range, e.g. *From* 2018-02-26 To 2018-02-28"}),compressed:true,fullWidth:true,isInvalid:areBothEmpty||!date_ranges_validateDateMath(from),placeholder:FROM_PLACEHOLDER,value:from||"",onChange:function onChange(ev){return onChangeRange(id,"from",ev.target.value)},"data-test-subj":"visEditorDateRange".concat(index,"__from")})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"sortRight",color:"subdued"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.dateRanges.toColumnLabel",{defaultMessage:"To",description:"End of a date range, e.g. From 2018-02-26 *To* 2018-02-28"}),"data-test-subj":"visEditorDateRange".concat(index,"__to"),compressed:true,fullWidth:true,isInvalid:areBothEmpty||!date_ranges_validateDateMath(to),placeholder:TO_PLACEHOLDER,value:to||"",onChange:function onChange(ev){return onChangeRange(id,"to",ev.target.value)}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{title:deleteBtnTitle,"aria-label":deleteBtnTitle,disabled:value.length===1,color:"danger",iconType:"trash",onClick:function onClick(){return onRemoveRange(id)}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}))})),hasInvalidRange&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormErrorText"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.dateRanges.errorMessage",defaultMessage:"Each range should have at least one valid date."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"plusInCircleFilled",onClick:onAddRange,size:"xs","data-test-subj":"visEditorAddDateRange"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.dateRanges.addRangeButtonLabel",defaultMessage:"Add range"})))))}function SwitchParamEditor(_ref){var _ref$value=_ref.value,value=_ref$value===void 0?false:_ref$value,setValue=_ref.setValue,dataTestSubj=_ref.dataTestSubj,displayToolTip=_ref.displayToolTip,displayLabel=_ref.displayLabel,disabled=_ref.disabled;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:displayToolTip,delay:"long",position:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{compressed:true,label:displayLabel,checked:value,disabled:disabled,"data-test-subj":dataTestSubj,onChange:function onChange(ev){return setValue(ev.target.checked)}})))}function drop_partials_extends(){drop_partials_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return drop_partials_extends.apply(this,arguments)}function DropPartialsParamEditor(props){return external_kbnSharedDeps_React_default.a.createElement(SwitchParamEditor,drop_partials_extends({dataTestSubj:"dropPartialBucketsCheckbox",displayLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.dropPartialBucketsLabel",{defaultMessage:"Drop partial buckets"}),displayToolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.dropPartialBucketsTooltip",{defaultMessage:"Remove buckets that span time outside the time range so the histogram doesn't start and end with incomplete buckets."})},props))}var controls_utils=__webpack_require__(9);function extended_bounds_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function extended_bounds_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){extended_bounds_ownKeys(Object(source),true).forEach((function(key){extended_bounds_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{extended_bounds_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function extended_bounds_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function areBoundsValid(_ref){var min=_ref.min,max=_ref.max;if(min===""||max===""){return false}return max>=min}function ExtendedBoundsParamEditor(_ref2){var _ref2$value=_ref2.value,value=_ref2$value===void 0?{}:_ref2$value,setValue=_ref2.setValue,setValidity=_ref2.setValidity,showValidation=_ref2.showValidation,setTouched=_ref2.setTouched;var minLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.extendedBounds.minLabel",{defaultMessage:"Min"});var maxLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.extendedBounds.maxLabel",{defaultMessage:"Max"});var isValid=areBoundsValid(value);var error;if(!isValid){error=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.extendedBounds.errorMessage",{defaultMessage:"Min should be less than or equal to Max."})}Object(controls_utils["g"])(setValidity,isValid);var handleChange=function handleChange(ev,name){setValue(extended_bounds_objectSpread(extended_bounds_objectSpread({},value),{},{[name]:ev.target.value===""?"":parseFloat(ev.target.value)}))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,isInvalid:showValidation?!isValid:false,error:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:Object(external_kbnSharedDeps_Lodash_["isUndefined"])(value.min)?"":value.min,onChange:function onChange(ev){return handleChange(ev,"min")},onBlur:setTouched,fullWidth:true,isInvalid:showValidation?!isValid:false,"aria-label":minLabel,prepend:minLabel,compressed:true})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:Object(external_kbnSharedDeps_Lodash_["isUndefined"])(value.max)?"":value.max,onChange:function onChange(ev){return handleChange(ev,"max")},onBlur:setTouched,fullWidth:true,isInvalid:showValidation?!isValid:false,"aria-label":maxLabel,prepend:maxLabel,compressed:true}))))}function field_slicedToArray(arr,i){return field_arrayWithHoles(arr)||field_iterableToArrayLimit(arr,i)||field_unsupportedIterableToArray(arr,i)||field_nonIterableRest()}function field_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function field_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return field_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return field_arrayLikeToArray(o,minLen)}function field_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function field_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function field_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var field_label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.field.fieldLabel",{defaultMessage:"Field"});function FieldParamEditor(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,customError=_ref.customError,customLabel=_ref.customLabel,_ref$indexedFields=_ref.indexedFields,indexedFields=_ref$indexedFields===void 0?[]:_ref$indexedFields,showValidation=_ref.showValidation,value=_ref.value,setTouched=_ref.setTouched,setValidity=_ref.setValidity,setValue=_ref.setValue;var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=field_slicedToArray(_useState,2),isDirty=_useState2[0],setIsDirty=_useState2[1];var selectedOptions=value?[{label:value.displayName||value.name,target:value}]:[];var onChange=function onChange(options){var selectedOption=Object(external_kbnSharedDeps_Lodash_["get"])(options,"0.target");if(!(aggParam.required&&!selectedOption)){setValue(selectedOption)}if(aggParam.onChange){aggParam.onChange(agg)}};var errors=customError?[customError]:[];if(!indexedFields.length){errors.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.field.noCompatibleFieldsDescription",{defaultMessage:"The index pattern {indexPatternTitle} does not contain any of the following compatible field types: {fieldTypes}",values:{indexPatternTitle:agg.getIndexPattern&&agg.getIndexPattern().title,fieldTypes:getFieldTypesString(agg)}}))}var isValid=!!value&&!errors.length&&!isDirty;var showErrorMessage=(showValidation||!indexedFields.length)&&!isValid;Object(controls_utils["g"])(setValidity,isValid);Object(lib["useMount"])((function(){if(indexedFields.length!==1){return}var indexedField=indexedFields[0];if(!("options"in indexedField)){setValue(indexedField.target)}else if(indexedField.options.length===1){setValue(indexedField.options[0].target)}}));var onSearchChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(searchValue){return setIsDirty(Boolean(searchValue))}),[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:customLabel||field_label,isInvalid:showErrorMessage,fullWidth:true,error:errors,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{compressed:true,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.field.selectFieldPlaceholder",{defaultMessage:"Select a field"}),options:indexedFields,isDisabled:!indexedFields.length,selectedOptions:selectedOptions,singleSelection:{asPlainText:true},isClearable:false,isInvalid:showErrorMessage,onChange:onChange,onBlur:setTouched,onSearchChange:onSearchChange,sortMatchesBy:"startsWith","data-test-subj":"visDefaultEditorField",fullWidth:true}))}function getFieldTypesString(agg){var param=Object(external_kbnSharedDeps_Lodash_["get"])(agg,"type.params",[]).find((function(p){return p.name==="field"}))||{};return Object(controls_utils["a"])(Object(controls_utils["c"])(param.filterFieldTypes),{inclusive:false})}function filter_slicedToArray(arr,i){return filter_arrayWithHoles(arr)||filter_iterableToArrayLimit(arr,i)||filter_unsupportedIterableToArray(arr,i)||filter_nonIterableRest()}function filter_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function filter_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return filter_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return filter_arrayLikeToArray(o,minLen)}function filter_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function filter_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function filter_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function FilterRow(_ref){var id=_ref.id,arrayIndex=_ref.arrayIndex,customLabel=_ref.customLabel,value=_ref.value,autoFocus=_ref.autoFocus,disableRemove=_ref.disableRemove,dataTestSubj=_ref.dataTestSubj,agg=_ref.agg,onChangeValue=_ref.onChangeValue,onRemoveFilter=_ref.onRemoveFilter;var _useKibana=Object(public_["useKibana"])(),services=_useKibana.services;var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=filter_slicedToArray(_useState,2),showCustomLabel=_useState2[0],setShowCustomLabel=_useState2[1];var filterLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.filters.filterLabel",{defaultMessage:"Filter {index}",values:{index:arrayIndex+1}});var onBlur=function onBlur(){if(value.query.length>0){services.data.query.addToQueryLog(services.appName,value)}};var FilterControl=external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"tag","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.filters.toggleFilterButtonAriaLabel",{defaultMessage:"Toggle filter label"}),"aria-expanded":showCustomLabel,"aria-controls":"visEditorFilterLabel".concat(arrayIndex),onClick:function onClick(){return setShowCustomLabel(!showCustomLabel)}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"trash",color:"danger",disabled:disableRemove,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.filters.removeFilterButtonAriaLabel",{defaultMessage:"Remove this filter"}),onClick:function onClick(){return onRemoveFilter(id)}}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:"".concat(filterLabel).concat(customLabel?" - ".concat(customLabel):""),labelAppend:FilterControl,fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(data_public_["QueryStringInput"],{query:value,indexPatterns:[agg.getIndexPattern()],onChange:function onChange(query){return onChangeValue(id,query,customLabel)},onBlur:onBlur,disableAutoFocus:!autoFocus,dataTestSubj:dataTestSubj,bubbleSubmitEvent:true,languageSwitcherPopoverAnchorPosition:"leftDown",size:"s"})),showCustomLabel?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"visEditorFilterLabel".concat(arrayIndex),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.filters.definiteFilterLabel",{defaultMessage:"Filter {index} label",description:"'Filter {index}' represents the name of the filter as a noun, similar to 'label for filter 1'.",values:{index:arrayIndex+1}}),fullWidth:true,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:customLabel,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.filters.labelPlaceholder",{defaultMessage:"Label"}),onChange:function onChange(ev){return onChangeValue(id,value,ev.target.value)},fullWidth:true,compressed:true})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}function filters_toConsumableArray(arr){return filters_arrayWithoutHoles(arr)||filters_iterableToArray(arr)||filters_unsupportedIterableToArray(arr)||filters_nonIterableSpread()}function filters_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function filters_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function filters_arrayWithoutHoles(arr){if(Array.isArray(arr))return filters_arrayLikeToArray(arr)}function filters_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function filters_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){filters_ownKeys(Object(source),true).forEach((function(key){filters_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{filters_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function filters_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function filters_slicedToArray(arr,i){return filters_arrayWithHoles(arr)||filters_iterableToArrayLimit(arr,i)||filters_unsupportedIterableToArray(arr,i)||filters_nonIterableRest()}function filters_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function filters_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return filters_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return filters_arrayLikeToArray(o,minLen)}function filters_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function filters_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function filters_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var filters_generateId=Object(external_kbnSharedDeps_ElasticEui_["htmlIdGenerator"])();function FiltersParamEditor(_ref){var agg=_ref.agg,_ref$value=_ref.value,value=_ref$value===void 0?[]:_ref$value,setValue=_ref.setValue;var _useState=Object(external_kbnSharedDeps_React_["useState"])((function(){return value.map((function(filter){return filters_objectSpread(filters_objectSpread({},filter),{},{id:filters_generateId()})}))})),_useState2=filters_slicedToArray(_useState,2),filters=_useState2[0],setFilters=_useState2[1];Object(lib["useMount"])((function(){setValue(filters.map((function(filter){return Object(external_kbnSharedDeps_Lodash_["omit"])(filters_objectSpread(filters_objectSpread({},filter),{},{input:filter.input}),"id")})))}));Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(value.length!==filters.length||value.some((function(filter,index){return!Object(external_kbnSharedDeps_Lodash_["isEqual"])(filter,Object(external_kbnSharedDeps_Lodash_["omit"])(filters[index],"id"))}))){setFilters(value.map((function(filter){return filters_objectSpread(filters_objectSpread({},filter),{},{id:filters_generateId()})})))}}),[filters,value]);var updateFilters=function updateFilters(updatedFilters){setValue(updatedFilters.map((function(filter){return Object(external_kbnSharedDeps_Lodash_["omit"])(filter,"id")})));setFilters(updatedFilters)};var _useKibana=Object(public_["useKibana"])(),services=_useKibana.services;var onAddFilter=function onAddFilter(){return updateFilters([].concat(filters_toConsumableArray(filters),[{input:services.data.query.queryString.getDefaultQuery(),label:"",id:filters_generateId()}]))};var onRemoveFilter=function onRemoveFilter(id){return updateFilters(filters.filter((function(filter){return filter.id!==id})))};var onChangeValue=function onChangeValue(id,query,label){return updateFilters(filters.map((function(filter){return filter.id===id?filters_objectSpread(filters_objectSpread({},filter),{},{input:query,label:label}):filter})))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),filters.map((function(_ref2,arrayIndex){var input=_ref2.input,label=_ref2.label,id=_ref2.id;return external_kbnSharedDeps_React_default.a.createElement(FilterRow,{key:id,id:id,arrayIndex:arrayIndex,customLabel:label,value:input,autoFocus:arrayIndex===filters.length-1,disableRemove:arrayIndex===0&&filters.length===1,dataTestSubj:"visEditorFilterInput_".concat(agg.id,"_").concat(arrayIndex),agg:agg,onChangeValue:onChangeValue,onRemoveFilter:onRemoveFilter})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{iconType:"plusInCircle",fill:true,fullWidth:true,onClick:onAddFilter,size:"s","data-test-subj":"visEditorAddFilterButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.filters.addFilterButtonLabel",defaultMessage:"Add filter"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}function has_extended_bounds_extends(){has_extended_bounds_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return has_extended_bounds_extends.apply(this,arguments)}var isType=data_public_["search"].aggs.isType;function HasExtendedBoundsParamEditor(props){var agg=props.agg,setValue=props.setValue,value=props.value;var minDocCount=Object(external_kbnSharedDeps_React_["useRef"])(agg.params.min_doc_count);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(minDocCount.current!==agg.params.min_doc_count){minDocCount.current=agg.params.min_doc_count;setValue(value&&agg.params.min_doc_count)}}),[agg.params.min_doc_count,setValue,value]);return external_kbnSharedDeps_React_default.a.createElement(SwitchParamEditor,has_extended_bounds_extends({},props,{displayLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.extendedBoundsLabel",{defaultMessage:"Extend bounds"}),displayToolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.extendedBoundsTooltip",{defaultMessage:"Min and Max do not filter the results, but rather extend the bounds of the result set."}),disabled:!props.agg.params.min_doc_count||!(isType("number")(props.agg)||isType("date")(props.agg))}))}function StringParamEditor(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,showValidation=_ref.showValidation,value=_ref.value,setValidity=_ref.setValidity,setValue=_ref.setValue,setTouched=_ref.setTouched;var isValid=aggParam.required?!!value:true;Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(isValid)}),[isValid,setValidity]);var onChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(ev){return setValue(ev.target.value)}),[setValue]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{className:"visEditorAggParam__string",label:aggParam.displayName||aggParam.name,fullWidth:true,compressed:true,isInvalid:showValidation?!isValid:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:value||"","data-test-subj":"visEditorStringInput".concat(agg.id).concat(aggParam.name),onChange:onChange,fullWidth:true,compressed:true,onBlur:setTouched,isInvalid:showValidation?!isValid:false}))}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var _RE_NUMBER="(\\-?(?:\\d+(?:\\.\\d+)?|Infinity))";var RANGE_RE=new RegExp("^\\s*([\\[|\\(])\\s*"+_RE_NUMBER+"\\s*,\\s*"+_RE_NUMBER+"\\s*([\\]|\\)])\\s*$");var NumberListRange=function(){function NumberListRange(minInclusive,min,max,maxInclusive){_classCallCheck(this,NumberListRange);this.minInclusive=minInclusive;this.min=min;this.max=max;this.maxInclusive=maxInclusive}_createClass(NumberListRange,[{key:"within",value:function within(n){if(this.min===n&&!this.minInclusive||this.min>n)return false;if(this.max===n&&!this.maxInclusive||this.max<n)return false;return true}}]);return NumberListRange}();function parseRange(input){var match=String(input).match(RANGE_RE);if(!match){throw new TypeError("expected input to be in interval notation e.g., (100, 200]")}var args=[match[1]==="[",parseFloat(match[2]),parseFloat(match[3]),match[4]==="]"];if(args[1]>args[2]){args.reverse()}var minInclusive=args[0],min=args[1],max=args[2],maxInclusive=args[3];return new NumberListRange(minInclusive,min,max,maxInclusive)}function utils_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function utils_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){utils_ownKeys(Object(source),true).forEach((function(key){utils_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{utils_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function utils_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EMPTY_STRING="";var defaultRange=parseRange("[0,Infinity)");var utils_generateId=Object(external_kbnSharedDeps_ElasticEui_["htmlIdGenerator"])();var defaultModel={value:0,id:utils_generateId(),isInvalid:false};function parse(value){var parsedValue=parseFloat(value);return isNaN(parsedValue)?EMPTY_STRING:parsedValue}function getRange(range){try{return range?parseRange(range):defaultRange}catch(e){throw new TypeError("Unable to parse range: "+e.message)}}function validateValue(value,numberRange){var result={isInvalid:false};if(value===EMPTY_STRING){result.isInvalid=true;result.error=EMPTY_STRING}else if(!numberRange.within(value)){result.isInvalid=true;result.error=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.numberList.invalidRangeErrorMessage",{defaultMessage:"The value should be in the range of {min} to {max}.",values:{min:numberRange.min,max:numberRange.max}})}return result}function validateValueAscending(inputValue,index,list){var result={isInvalidOrder:false};var previousModel=list[index-1];if(previousModel!==undefined&&inputValue!==undefined&&inputValue<=previousModel){result.isInvalidOrder=true;result.error=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.numberList.invalidAscOrderErrorMessage",{defaultMessage:"Value is not in ascending order."})}return result}function validateValueUnique(inputValue,index,list){var result={isDuplicate:false};if(inputValue!==EMPTY_STRING&&list.indexOf(inputValue)!==index){result.isDuplicate=true;result.error=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.numberList.duplicateValueErrorMessage",{defaultMessage:"Duplicate value."})}return result}function getNextModel(list,range){var lastValue=Object(external_kbnSharedDeps_Lodash_["last"])(list).value;var next=Number(lastValue)?Number(lastValue)+1:1;if(next>=range.max){next=range.max-1}return{id:utils_generateId(),value:next,isInvalid:false}}function getInitModelList(list){return list.length?list.map((function(num){return{value:num===undefined?EMPTY_STRING:num,id:utils_generateId(),isInvalid:false}})):[defaultModel]}function getValidatedModels(numberList,modelList,numberRange){var validateAscendingOrder=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var disallowDuplicates=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;if(!numberList.length){return[defaultModel]}return numberList.map((function(number,index){var model=modelList[index]||{id:utils_generateId()};var newValue=number===undefined?EMPTY_STRING:number;var valueResult=numberRange?validateValue(newValue,numberRange):{isInvalid:false};var ascendingResult=validateAscendingOrder?validateValueAscending(newValue,index,numberList):{isInvalidOrder:false};var duplicationResult=disallowDuplicates?validateValueUnique(newValue,index,numberList):{isDuplicate:false};var allErrors=[valueResult.error,ascendingResult.error,duplicationResult.error].filter(Boolean).join(" ");return utils_objectSpread(utils_objectSpread({},model),{},{value:newValue,isInvalid:valueResult.isInvalid||ascendingResult.isInvalidOrder||duplicationResult.isDuplicate,error:allErrors===EMPTY_STRING?undefined:allErrors})}))}function utils_hasInvalidValues(modelList){return!!modelList.find((function(_ref){var isInvalid=_ref.isInvalid;return isInvalid}))}function NumberRow(_ref){var autoFocus=_ref.autoFocus,disableDelete=_ref.disableDelete,model=_ref.model,isInvalid=_ref.isInvalid,labelledbyId=_ref.labelledbyId,range=_ref.range,onBlur=_ref.onBlur,onDelete=_ref.onDelete,onChange=_ref.onChange;var deleteBtnAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.numberList.removeUnitButtonAriaLabel",{defaultMessage:"Remove the rank value of {value}",values:{value:model.value}});var onValueChanged=Object(external_kbnSharedDeps_React_["useCallback"])((function(event){return onChange({value:event.target.value,id:model.id})}),[onChange,model.id]);var onDeleteFn=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return onDelete(model.id)}),[onDelete,model.id]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{"aria-labelledby":labelledbyId,autoFocus:autoFocus,compressed:true,isInvalid:isInvalid,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.numberList.enterValuePlaceholder",{defaultMessage:"Enter a value"}),onChange:onValueChanged,value:model.value,fullWidth:true,min:range.min,max:range.max,onBlur:onBlur})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":deleteBtnAriaLabel,title:deleteBtnAriaLabel,color:"danger",iconType:"trash",onClick:onDeleteFn,disabled:disableDelete})))}function simple_number_list_toConsumableArray(arr){return simple_number_list_arrayWithoutHoles(arr)||simple_number_list_iterableToArray(arr)||simple_number_list_unsupportedIterableToArray(arr)||simple_number_list_nonIterableSpread()}function simple_number_list_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function simple_number_list_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function simple_number_list_arrayWithoutHoles(arr){if(Array.isArray(arr))return simple_number_list_arrayLikeToArray(arr)}function simple_number_list_slicedToArray(arr,i){return simple_number_list_arrayWithHoles(arr)||simple_number_list_iterableToArrayLimit(arr,i)||simple_number_list_unsupportedIterableToArray(arr,i)||simple_number_list_nonIterableRest()}function simple_number_list_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function simple_number_list_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return simple_number_list_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return simple_number_list_arrayLikeToArray(o,minLen)}function simple_number_list_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function simple_number_list_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function simple_number_list_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var simple_number_list_generateId=Object(external_kbnSharedDeps_ElasticEui_["htmlIdGenerator"])();function SimpleNumberList(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,value=_ref.value,setValue=_ref.setValue,setTouched=_ref.setTouched;var _useState=Object(external_kbnSharedDeps_React_["useState"])(getInitModelList(value&&Object(external_kbnSharedDeps_Lodash_["isArray"])(value)?value:[EMPTY_STRING])),_useState2=simple_number_list_slicedToArray(_useState,2),numbers=_useState2[0],setNumbers=_useState2[1];var numberRange=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return getRange("[-Infinity,Infinity]")}),[]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(Object(external_kbnSharedDeps_Lodash_["isArray"])(value)&&(value.length!==numbers.length||!value.every((function(numberValue,index){return numberValue===numbers[index].value})))){setNumbers(value.map((function(numberValue){return{id:simple_number_list_generateId(),value:numberValue,isInvalid:false}})))}}),[numbers,value]);var onUpdate=Object(external_kbnSharedDeps_React_["useCallback"])((function(numberList){setNumbers(numberList);setValue(numberList.map((function(_ref2){var numberValue=_ref2.value;return numberValue})))}),[setValue]);var onChangeValue=Object(external_kbnSharedDeps_React_["useCallback"])((function(numberField){onUpdate(numbers.map((function(number){return number.id===numberField.id?{id:numberField.id,value:parse(numberField.value),isInvalid:false}:number})))}),[numbers,onUpdate]);var onAdd=Object(external_kbnSharedDeps_React_["useCallback"])((function(){var newArray=[].concat(simple_number_list_toConsumableArray(numbers),[{id:simple_number_list_generateId(),value:EMPTY_STRING,isInvalid:false}]);onUpdate(newArray)}),[numbers,onUpdate]);var onDelete=Object(external_kbnSharedDeps_React_["useCallback"])((function(id){return onUpdate(numbers.filter((function(number){return number.id!==id})))}),[numbers,onUpdate]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"".concat(aggParam.name,"-").concat(agg.id,"}"),label:aggParam.displayName||aggParam.name,fullWidth:true,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,numbers.map((function(number,arrayIndex){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:number.id},external_kbnSharedDeps_React_default.a.createElement(NumberRow,{isInvalid:number.isInvalid,disableDelete:numbers.length===1,model:number,labelledbyId:"".concat(aggParam.name,"-").concat(agg.id,"-legend"),range:numberRange,onDelete:onDelete,onChange:onChangeValue,onBlur:setTouched,autoFocus:numbers.length!==1&&arrayIndex===numbers.length-1}),numbers.length-1!==arrayIndex&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"plusInCircleFilled",onClick:onAdd,size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.includeExclude.addUnitButtonLabel",defaultMessage:"Add value"})))))}function include_exclude_extends(){include_exclude_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return include_exclude_extends.apply(this,arguments)}var isNumberType=data_public_["search"].aggs.isNumberType;function IncludeExcludeParamEditor(props){var agg=props.agg,value=props.value,setValue=props.setValue;var isAggOfNumberType=isNumberType(agg);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(isAggOfNumberType&&!Array.isArray(value)&&value!==undefined){var numberArray=value.split("|").map((function(item){return parseFloat(item)})).filter((function(number){return Number.isFinite(number)}));setValue(numberArray.length?numberArray:[""])}else if(!isAggOfNumberType&&Array.isArray(value)&&value!==undefined){setValue(value.filter((function(item){return item!==""})).join("|"))}}),[isAggOfNumberType,setValue,value]);return isAggOfNumberType?external_kbnSharedDeps_React_default.a.createElement(SimpleNumberList,include_exclude_extends({},props,{value:value})):external_kbnSharedDeps_React_default.a.createElement(StringParamEditor,include_exclude_extends({},props,{value:value}))}function input_list_toConsumableArray(arr){return input_list_arrayWithoutHoles(arr)||input_list_iterableToArray(arr)||input_list_unsupportedIterableToArray(arr)||input_list_nonIterableSpread()}function input_list_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function input_list_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function input_list_arrayWithoutHoles(arr){if(Array.isArray(arr))return input_list_arrayLikeToArray(arr)}function input_list_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function input_list_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){input_list_ownKeys(Object(source),true).forEach((function(key){input_list_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{input_list_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function input_list_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function input_list_slicedToArray(arr,i){return input_list_arrayWithHoles(arr)||input_list_iterableToArrayLimit(arr,i)||input_list_unsupportedIterableToArray(arr,i)||input_list_nonIterableRest()}function input_list_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function input_list_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return input_list_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return input_list_arrayLikeToArray(o,minLen)}function input_list_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function input_list_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function input_list_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var input_list_generateId=Object(external_kbnSharedDeps_ElasticEui_["htmlIdGenerator"])();var input_list_validateValue=function validateValue(inputValue,InputObject){var result={model:inputValue||"",isInvalid:false};if(!inputValue){result.isInvalid=false;return result}try{result.model=new InputObject(inputValue).toString();result.isInvalid=false;return result}catch(e){result.isInvalid=true;return result}};function InputList(_ref){var config=_ref.config,list=_ref.list,onChange=_ref.onChange,setValidity=_ref.setValidity;var defaultValue=config.defaultValue,getModelValue=config.getModelValue,modelNames=config.modelNames,onChangeFn=config.onChangeFn,validateClass=config.validateClass;var _useState=Object(external_kbnSharedDeps_React_["useState"])((function(){return list.map((function(item){return input_list_objectSpread({id:input_list_generateId()},getModelValue(item))}))})),_useState2=input_list_slicedToArray(_useState,2),models=_useState2[0],setModels=_useState2[1];var hasInvalidValues=models.some(config.hasInvalidValuesFn);var updateValues=Object(external_kbnSharedDeps_React_["useCallback"])((function(modelList){setModels(modelList);onChange(modelList.map(onChangeFn))}),[onChangeFn,onChange]);var onChangeValue=Object(external_kbnSharedDeps_React_["useCallback"])((function(index,value,modelName){var _validateValue=input_list_validateValue(value,validateClass),model=_validateValue.model,isInvalid=_validateValue.isInvalid;updateValues(models.map((function(range,arrayIndex){return arrayIndex===index?input_list_objectSpread(input_list_objectSpread({},range),{},{[modelName]:{value:value,model:model,isInvalid:isInvalid}}):range})))}),[models,updateValues,validateClass]);var onDelete=Object(external_kbnSharedDeps_React_["useCallback"])((function(id){return updateValues(models.filter((function(model){return model.id!==id})))}),[models,updateValues]);var onAdd=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return updateValues([].concat(input_list_toConsumableArray(models),[input_list_objectSpread({id:input_list_generateId()},getModelValue())]))}),[getModelValue,models,updateValues]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(!list.length){updateValues([input_list_objectSpread({id:input_list_generateId()},defaultValue)])}}),[defaultValue,list.length,updateValues]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(!hasInvalidValues)}),[hasInvalidValues,setValidity]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(list.length!==models.length||list.some((function(item,index){var model=Object(external_kbnSharedDeps_Lodash_["mapValues"])(Object(external_kbnSharedDeps_Lodash_["pick"])(models[index],modelNames),"model");return!Object(external_kbnSharedDeps_Lodash_["isEqual"])(item,Object(external_kbnSharedDeps_Lodash_["omitBy"])(model,external_kbnSharedDeps_Lodash_["isEmpty"]))}))){setModels(list.map((function(item){return input_list_objectSpread({id:input_list_generateId()},getModelValue(item))})))}}),[getModelValue,list,modelNames,models]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,models.map((function(item,index){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:item.id},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",alignItems:"center",responsive:false},config.renderInputRow(item,index,onChangeValue),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":config.getRemoveBtnAriaLabel(item),title:config.getRemoveBtnAriaLabel(item),disabled:models.length===1,color:"danger",iconType:"trash",onClick:function onClick(){return onDelete(item.id)}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}))})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"plusInCircleFilled",onClick:onAdd,size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.ipRanges.addRangeButtonLabel",defaultMessage:"Add range"}))))}function from_to_list_extends(){from_to_list_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return from_to_list_extends.apply(this,arguments)}function from_to_list_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function from_to_list_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){from_to_list_ownKeys(Object(source),true).forEach((function(key){from_to_list_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{from_to_list_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function from_to_list_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function from_to_list_objectWithoutProperties(source,excluded){if(source==null)return{};var target=from_to_list_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function from_to_list_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var from_to_list_EMPTY_STRING="";var from_to_list_defaultConfig={defaultValue:{from:{value:"0.0.0.0",model:"0.0.0.0",isInvalid:false},to:{value:"255.255.255.255",model:"255.255.255.255",isInvalid:false}},validateClass:data_public_["search"].aggs.Ipv4Address,getModelValue:function getModelValue(){var item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{from:{value:item.from||from_to_list_EMPTY_STRING,model:item.from||from_to_list_EMPTY_STRING,isInvalid:false},to:{value:item.to||from_to_list_EMPTY_STRING,model:item.to||from_to_list_EMPTY_STRING,isInvalid:false}}},getRemoveBtnAriaLabel:function getRemoveBtnAriaLabel(item){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.removeRangeAriaLabel",{defaultMessage:"Remove the range of {from} to {to}",values:{from:item.from.value||"*",to:item.to.value||"*"}})},onChangeFn:function onChangeFn(_ref){var from=_ref.from,to=_ref.to;var result={};if(from.model){result.from=from.model}if(to.model){result.to=to.model}return result},hasInvalidValuesFn:function hasInvalidValuesFn(_ref2){var from=_ref2.from,to=_ref2.to;return from.isInvalid||to.isInvalid},modelNames:["from","to"]};function FromToList(_ref3){var showValidation=_ref3.showValidation,onBlur=_ref3.onBlur,rest=from_to_list_objectWithoutProperties(_ref3,["showValidation","onBlur"]);var renderInputRow=Object(external_kbnSharedDeps_React_["useCallback"])((function(item,index,onChangeValue){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.ipRangeFromAriaLabel",{defaultMessage:"IP range from: {value}",values:{value:item.from.value||"*"}}),compressed:true,isInvalid:showValidation?item.from.isInvalid:false,placeholder:"*",onChange:function onChange(ev){onChangeValue(index,ev.target.value,"from")},value:item.from.value,onBlur:onBlur})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"sortRight",color:"subdued"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.ipRangeToAriaLabel",{defaultMessage:"IP range to: {value}",values:{value:item.to.value||"*"}}),compressed:true,isInvalid:showValidation?item.to.isInvalid:false,placeholder:"*",onChange:function onChange(ev){onChangeValue(index,ev.target.value,"to")},value:item.to.value,onBlur:onBlur})))}),[onBlur,showValidation]);var fromToListConfig=from_to_list_objectSpread(from_to_list_objectSpread({},from_to_list_defaultConfig),{},{renderInputRow:renderInputRow});return external_kbnSharedDeps_React_default.a.createElement(InputList,from_to_list_extends({config:fromToListConfig},rest))}function mask_list_extends(){mask_list_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return mask_list_extends.apply(this,arguments)}function mask_list_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function mask_list_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){mask_list_ownKeys(Object(source),true).forEach((function(key){mask_list_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{mask_list_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function mask_list_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function mask_list_objectWithoutProperties(source,excluded){if(source==null)return{};var target=mask_list_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function mask_list_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var mask_list_EMPTY_STRING="";var mask_list_defaultConfig={defaultValue:{mask:{model:"0.0.0.0/1",value:"0.0.0.0/1",isInvalid:false}},validateClass:data_public_["search"].aggs.CidrMask,getModelValue:function getModelValue(){var item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{mask:{model:item.mask||mask_list_EMPTY_STRING,value:item.mask||mask_list_EMPTY_STRING,isInvalid:false}}},getRemoveBtnAriaLabel:function getRemoveBtnAriaLabel(item){return item.mask.value?external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.removeCidrMaskButtonAriaLabel",{defaultMessage:"Remove the CIDR mask value of {mask}",values:{mask:item.mask.value}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.removeEmptyCidrMaskButtonAriaLabel",{defaultMessage:"Remove the CIDR mask default value"})},onChangeFn:function onChangeFn(_ref){var mask=_ref.mask;if(mask.model){return{mask:mask.model}}return{}},hasInvalidValuesFn:function hasInvalidValuesFn(_ref2){var mask=_ref2.mask;return mask.isInvalid},modelNames:"mask"};function MaskList(_ref3){var showValidation=_ref3.showValidation,onBlur=_ref3.onBlur,rest=mask_list_objectWithoutProperties(_ref3,["showValidation","onBlur"]);var renderInputRow=Object(external_kbnSharedDeps_React_["useCallback"])((function(_ref4,index,onChangeValue){var mask=_ref4.mask;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.cidrMaskAriaLabel",{defaultMessage:"CIDR mask: {mask}",values:{mask:mask.value||"*"}}),compressed:true,fullWidth:true,isInvalid:showValidation?mask.isInvalid:false,placeholder:"*",onChange:function onChange(ev){onChangeValue(index,ev.target.value,"mask")},value:mask.value,onBlur:onBlur}))}),[onBlur,showValidation]);var maskListConfig=mask_list_objectSpread(mask_list_objectSpread({},mask_list_defaultConfig),{},{renderInputRow:renderInputRow});return external_kbnSharedDeps_React_default.a.createElement(InputList,mask_list_extends({config:maskListConfig},rest))}var IpRangeTypes;(function(IpRangeTypes){IpRangeTypes["MASK"]="mask";IpRangeTypes["FROM_TO"]="fromTo"})(IpRangeTypes||(IpRangeTypes={}));function IpRangeTypeParamEditor(_ref){var agg=_ref.agg,value=_ref.value,setValue=_ref.setValue;var options=[{id:"visEditorIpRangeFromToLabel".concat(agg.id),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.fromToButtonLabel",{defaultMessage:"From/to"})},{id:"visEditorIpRangeCidrLabel".concat(agg.id),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.cidrMasksButtonLabel",{defaultMessage:"CIDR masks"})}];var onClick=function onClick(optionId){setValue(optionId===options[0].id?IpRangeTypes.FROM_TO:IpRangeTypes.MASK)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonGroup"],{isFullWidth:true,onChange:onClick,idSelected:value===IpRangeTypes.FROM_TO?options[0].id:options[1].id,options:options,legend:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.ipRangesAriaLabel",{defaultMessage:"IP ranges"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}function ip_ranges_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function ip_ranges_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ip_ranges_ownKeys(Object(source),true).forEach((function(key){ip_ranges_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ip_ranges_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function ip_ranges_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function IpRangesParamEditor(_ref){var agg=_ref.agg,_ref$value=_ref.value,value=_ref$value===void 0?{fromTo:[],mask:[]}:_ref$value,setTouched=_ref.setTouched,setValue=_ref.setValue,setValidity=_ref.setValidity,showValidation=_ref.showValidation;var handleMaskListChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(items){return setValue(ip_ranges_objectSpread(ip_ranges_objectSpread({},value),{},{[IpRangeTypes.MASK]:items}))}),[setValue,value]);var handleFromToListChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(items){return setValue(ip_ranges_objectSpread(ip_ranges_objectSpread({},value),{},{[IpRangeTypes.FROM_TO]:items}))}),[setValue,value]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,id:"visEditorIpRange".concat(agg.id),compressed:true},agg.params.ipRangeType===IpRangeTypes.MASK?external_kbnSharedDeps_React_default.a.createElement(MaskList,{list:value.mask,showValidation:showValidation,onBlur:setTouched,onChange:handleMaskListChange,setValidity:setValidity}):external_kbnSharedDeps_React_default.a.createElement(FromToList,{list:value.fromTo,showValidation:showValidation,onBlur:setTouched,onChange:handleFromToListChange,setValidity:setValidity}))}function is_filtered_by_collar_extends(){is_filtered_by_collar_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return is_filtered_by_collar_extends.apply(this,arguments)}function IsFilteredByCollarParamEditor(props){return external_kbnSharedDeps_React_default.a.createElement(SwitchParamEditor,is_filtered_by_collar_extends({displayLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.onlyRequestDataAroundMapExtentLabel",{defaultMessage:"Only request data around map extent"}),displayToolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.onlyRequestDataAroundMapExtentTooltip",{defaultMessage:"Apply geo_bounding_box filter aggregation to narrow the subject area to the map view box with collar"}),dataTestSubj:"isFilteredByCollarCheckbox"},props))}var metric_agg_aggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev"];var EMPTY_VALUE="EMPTY_VALUE";var DEFAULT_OPTIONS=[{text:"",value:EMPTY_VALUE,hidden:true}];function MetricAggParamEditor(_ref){var agg=_ref.agg,value=_ref.value,showValidation=_ref.showValidation,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched,_ref$metricAggs=_ref.metricAggs,metricAggs=_ref$metricAggs===void 0?[]:_ref$metricAggs;var label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.metricLabel",{defaultMessage:"Metric"});var isValid=!!value;Object(controls_utils["g"])(setValidity,isValid);Object(controls_utils["e"])(setValue,metric_agg_aggFilter,metricAggs,value);var filteredMetrics=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return metricAggs.filter((function(respAgg){return respAgg.type.name!==agg.type.name}))}),[metricAggs,agg.type.name]);var options=Object(controls_utils["d"])(metric_agg_aggFilter,filteredMetrics,DEFAULT_OPTIONS);var onChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(ev){return setValue(ev.target.value)}),[setValue]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,fullWidth:true,isInvalid:showValidation&&!isValid,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{compressed:true,fullWidth:true,options:options,value:value||EMPTY_VALUE,onChange:onChange,isInvalid:showValidation&&!isValid,onBlur:setTouched,"data-test-subj":"visEditorSubAggMetric".concat(agg.id)}))}function min_doc_count_extends(){min_doc_count_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return min_doc_count_extends.apply(this,arguments)}function MinDocCountParamEditor(props){return external_kbnSharedDeps_React_default.a.createElement(SwitchParamEditor,min_doc_count_extends({displayLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.showEmptyBucketsLabel",{defaultMessage:"Show empty buckets"}),displayToolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.showEmptyBucketsTooltip",{defaultMessage:"Show all buckets, not only the buckets with results"})},props))}function missing_bucket_extends(){missing_bucket_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return missing_bucket_extends.apply(this,arguments)}function MissingBucketParamEditor(props){var fieldTypeIsNotString=!data_public_["search"].aggs.isStringType(props.agg);var setValue=props.setValue;Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(fieldTypeIsNotString){setValue(false)}}),[fieldTypeIsNotString,setValue]);return external_kbnSharedDeps_React_default.a.createElement(SwitchParamEditor,missing_bucket_extends({},props,{dataTestSubj:"missingBucketSwitch",displayLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.otherBucket.showMissingValuesLabel",{defaultMessage:"Show missing values"}),displayToolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.otherBucket.showMissingValuesTooltip",{defaultMessage:'Only works for fields of type "string". When enabled, include documents with missing '+"values in the search. If this bucket is in the top N, it appears in the chart. "+'If not in the top N, and you enable "Group other values in separate bucket", '+'Elasticsearch adds the missing values to the "other" bucket.'}),disabled:fieldTypeIsNotString}))}var number_interval_label=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.numberInterval.minimumIntervalLabel",defaultMessage:"Minimum interval"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.numberInterval.minimumIntervalTooltip",defaultMessage:"Interval will be automatically scaled in the event that the provided value creates more buckets than specified by Advanced Setting's {histogramMaxBars}",values:{histogramMaxBars:data_public_["UI_SETTINGS"].HISTOGRAM_MAX_BARS}}),type:"questionInCircle"}));var autoInterval="auto";var isAutoInterval=function isAutoInterval(value){return value===autoInterval};var selectIntervalPlaceholder=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.numberInterval.selectIntervalPlaceholder",{defaultMessage:"Enter an interval"});var autoIntervalIsUsedPlaceholder=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.numberInterval.autoInteralIsUsed",{defaultMessage:"Auto interval is used"});var useAutoIntervalLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.useAutoInterval",{defaultMessage:"Use auto interval"});function NumberIntervalParamEditor(_ref){var agg=_ref.agg,editorConfig=_ref.editorConfig,showValidation=_ref.showValidation,value=_ref.value,setTouched=_ref.setTouched,setValidity=_ref.setValidity,setValue=_ref.setValue;var isAutoChecked=isAutoInterval(value);var base=Object(external_kbnSharedDeps_Lodash_["get"])(editorConfig,"interval.base");var min=base||0;var isValid=value!==""&&value!==undefined&&(isAutoInterval(value)||Number(value)>=min);Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(isValid)}),[isValid,setValidity]);var onChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(_ref2){var target=_ref2.target;return setValue(isNaN(target.valueAsNumber)?"":target.valueAsNumber)}),[setValue]);var onAutoSwitchChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(e){var isAutoSwitchChecked=e.target.checked;setValue(isAutoSwitchChecked?autoInterval:"")}),[setValue]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{compressed:true,label:number_interval_label,fullWidth:true,isInvalid:showValidation&&!isValid,helpText:Object(external_kbnSharedDeps_Lodash_["get"])(editorConfig,"interval.help")},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",responsive:false,direction:"column"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:useAutoIntervalLabel,onChange:onAutoSwitchChange,checked:isAutoChecked,compressed:true,"data-test-subj":"visEditorIntervalSwitch".concat(agg.id)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:!isAutoChecked?value:"",min:min,step:base||"any","data-test-subj":"visEditorInterval".concat(agg.id),isInvalid:showValidation&&!isValid,onChange:onChange,onBlur:setTouched,disabled:isAutoChecked,fullWidth:true,compressed:true,placeholder:isAutoChecked?autoIntervalIsUsedPlaceholder:selectIntervalPlaceholder}))))}var termsAggFilter=data_public_["search"].aggs.termsAggFilter;var DEFAULT_VALUE="_key";var order_by_DEFAULT_OPTIONS=[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.orderAgg.alphabeticalLabel",{defaultMessage:"Alphabetical"}),value:DEFAULT_VALUE}];var isCompatibleAgg=Object(controls_utils["b"])(termsAggFilter);function OrderByParamEditor(_ref){var agg=_ref.agg,value=_ref.value,showValidation=_ref.showValidation,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched,metricAggs=_ref.metricAggs;var label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.orderAgg.orderByLabel",{defaultMessage:"Order by"});var isValid=!!value;Object(controls_utils["g"])(setValidity,isValid);Object(lib["useMount"])((function(){if(!value){var respAgg={id:DEFAULT_VALUE};if(metricAggs){respAgg=metricAggs.filter(isCompatibleAgg)[0]||respAgg}setValue(respAgg.id)}}));Object(controls_utils["e"])(setValue,termsAggFilter,metricAggs,value,DEFAULT_VALUE);var options=Object(controls_utils["d"])(termsAggFilter,metricAggs,order_by_DEFAULT_OPTIONS);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,fullWidth:true,isInvalid:showValidation&&!isValid,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:options,value:value,onChange:function onChange(ev){return setValue(ev.target.value)},fullWidth:true,compressed:true,isInvalid:showValidation&&!isValid,onBlur:setTouched,"data-test-subj":"visEditorOrderBy".concat(agg.id)}))}function other_bucket_extends(){other_bucket_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return other_bucket_extends.apply(this,arguments)}function OtherBucketParamEditor(props){return external_kbnSharedDeps_React_default.a.createElement(SwitchParamEditor,other_bucket_extends({dataTestSubj:"otherBucketSwitch",displayLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.otherBucket.groupValuesLabel",{defaultMessage:"Group other values in separate bucket"}),displayToolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.otherBucket.groupValuesTooltip",{defaultMessage:"Values not in the top N are grouped in this bucket. "+"To include documents with missing values, enable 'Show missing values'."})},props))}function OrderAggParamEditor(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,formIsTouched=_ref.formIsTouched,value=_ref.value,metricAggs=_ref.metricAggs,state=_ref.state,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched,schemas=_ref.schemas;var orderBy=agg.params.orderBy;Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(orderBy==="custom"&&!value){setValue(aggParam.makeAgg(agg))}if(orderBy!=="custom"&&value){setValue(undefined)}}),[agg,aggParam,orderBy,setValue,value]);var _useSubAggParamsHandl=Object(controls_utils["f"])(agg,aggParam,value,setValue),onAggTypeChange=_useSubAggParamsHandl.onAggTypeChange,setAggParamValue=_useSubAggParamsHandl.setAggParamValue;if(!agg.params.orderAgg){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAggParams,{agg:value,allowedAggs:aggParam.allowedAggs,hideCustomLabel:true,groupName:data_public_["AggGroupNames"].Metrics,className:"visEditorAgg__subAgg",formIsTouched:formIsTouched,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,onAggTypeChange:onAggTypeChange,setValidity:setValidity,setTouched:setTouched,schemas:schemas}))}function number_list_toConsumableArray(arr){return number_list_arrayWithoutHoles(arr)||number_list_iterableToArray(arr)||number_list_unsupportedIterableToArray(arr)||number_list_nonIterableSpread()}function number_list_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function number_list_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function number_list_arrayWithoutHoles(arr){if(Array.isArray(arr))return number_list_arrayLikeToArray(arr)}function number_list_slicedToArray(arr,i){return number_list_arrayWithHoles(arr)||number_list_iterableToArrayLimit(arr,i)||number_list_unsupportedIterableToArray(arr,i)||number_list_nonIterableRest()}function number_list_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function number_list_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return number_list_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return number_list_arrayLikeToArray(o,minLen)}function number_list_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function number_list_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function number_list_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function NumberList(_ref){var labelledbyId=_ref.labelledbyId,numberArray=_ref.numberArray,range=_ref.range,showValidation=_ref.showValidation,unitName=_ref.unitName,_ref$validateAscendin=_ref.validateAscendingOrder,validateAscendingOrder=_ref$validateAscendin===void 0?false:_ref$validateAscendin,_ref$disallowDuplicat=_ref.disallowDuplicates,disallowDuplicates=_ref$disallowDuplicat===void 0?false:_ref$disallowDuplicat,onChange=_ref.onChange,setTouched=_ref.setTouched,setValidity=_ref.setValidity;var numberRange=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return getRange(range)}),[range]);var _useState=Object(external_kbnSharedDeps_React_["useState"])(getInitModelList(numberArray)),_useState2=number_list_slicedToArray(_useState,2),models=_useState2[0],setModels=_useState2[1];Object(external_kbnSharedDeps_React_["useEffect"])((function(){setModels((function(state){return getValidatedModels(numberArray,state,numberRange,validateAscendingOrder,disallowDuplicates)}))}),[numberArray,numberRange,validateAscendingOrder,disallowDuplicates]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(!numberArray.length){onChange([models[0].value])}}),[models,numberArray.length,onChange]);var isValid=!utils_hasInvalidValues(models);Object(controls_utils["g"])(setValidity,isValid);var onUpdate=Object(external_kbnSharedDeps_React_["useCallback"])((function(modelList){setModels(modelList);onChange(modelList.map((function(_ref2){var value=_ref2.value;return value===EMPTY_STRING?undefined:value})))}),[onChange]);var onChangeValue=Object(external_kbnSharedDeps_React_["useCallback"])((function(_ref3){var id=_ref3.id,value=_ref3.value;var parsedValue=parse(value);onUpdate(models.map((function(model){if(model.id===id){return{id:id,value:parsedValue,isInvalid:false}}return model})))}),[models,onUpdate]);var onAdd=Object(external_kbnSharedDeps_React_["useCallback"])((function(){var newArray=[].concat(number_list_toConsumableArray(models),[getNextModel(models,numberRange)]);onUpdate(newArray)}),[models,numberRange,onUpdate]);var onDelete=Object(external_kbnSharedDeps_React_["useCallback"])((function(id){var newArray=models.filter((function(model){return model.id!==id}));onUpdate(newArray)}),[models,onUpdate]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,models.map((function(model,arrayIndex){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:model.id},external_kbnSharedDeps_React_default.a.createElement(NumberRow,{isInvalid:showValidation?model.isInvalid:false,disableDelete:models.length===1,model:model,labelledbyId:labelledbyId,range:numberRange,onDelete:onDelete,onChange:onChangeValue,onBlur:setTouched,autoFocus:models.length!==1&&arrayIndex===models.length-1}),showValidation&&model.isInvalid&&model.error&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormErrorText"],null,model.error),models.length-1!==arrayIndex&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"plusInCircleFilled",onClick:onAdd,size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.numberList.addUnitButtonLabel",defaultMessage:"Add {unitName}",values:{unitName:unitName}}))))}function percentiles_slicedToArray(arr,i){return percentiles_arrayWithHoles(arr)||percentiles_iterableToArrayLimit(arr,i)||percentiles_unsupportedIterableToArray(arr,i)||percentiles_nonIterableRest()}function percentiles_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function percentiles_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return percentiles_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return percentiles_arrayLikeToArray(o,minLen)}function percentiles_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function percentiles_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function percentiles_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function PercentilesEditor(_ref){var agg=_ref.agg,showValidation=_ref.showValidation,_ref$value=_ref.value,value=_ref$value===void 0?[]:_ref$value,setTouched=_ref.setTouched,setValidity=_ref.setValidity,setValue=_ref.setValue;var label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.percentiles.percentsLabel",{defaultMessage:"Percents"});var _useState=Object(external_kbnSharedDeps_React_["useState"])(true),_useState2=percentiles_slicedToArray(_useState,2),isValid=_useState2[0],setIsValid=_useState2[1];var setModelValidity=Object(external_kbnSharedDeps_React_["useCallback"])((function(isListValid){setIsValid(isListValid);setValidity(isListValid)}),[setValidity]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,labelType:"legend",fullWidth:true,id:"visEditorPercentileLabel".concat(agg.id),isInvalid:showValidation?!isValid:false,compressed:true},external_kbnSharedDeps_React_default.a.createElement(NumberList,{labelledbyId:"visEditorPercentileLabel".concat(agg.id,"-legend"),numberArray:value,range:"[0,100]",disallowDuplicates:true,unitName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.percentileRanks.percentUnitNameText",{defaultMessage:"percent"}),showValidation:showValidation,onChange:setValue,setTouched:setTouched,setValidity:setModelValidity}))}function percentile_ranks_slicedToArray(arr,i){return percentile_ranks_arrayWithHoles(arr)||percentile_ranks_iterableToArrayLimit(arr,i)||percentile_ranks_unsupportedIterableToArray(arr,i)||percentile_ranks_nonIterableRest()}function percentile_ranks_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function percentile_ranks_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return percentile_ranks_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return percentile_ranks_arrayLikeToArray(o,minLen)}function percentile_ranks_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function percentile_ranks_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function percentile_ranks_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function PercentileRanksEditor(_ref){var agg=_ref.agg,showValidation=_ref.showValidation,_ref$value=_ref.value,value=_ref$value===void 0?[]:_ref$value,setTouched=_ref.setTouched,setValidity=_ref.setValidity,setValue=_ref.setValue;var label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.percentileRanks.valuesLabel",{defaultMessage:"Values"});var _useState=Object(external_kbnSharedDeps_React_["useState"])(true),_useState2=percentile_ranks_slicedToArray(_useState,2),isValid=_useState2[0],setIsValid=_useState2[1];var setModelValidity=Object(external_kbnSharedDeps_React_["useCallback"])((function(isListValid){setIsValid(isListValid);setValidity(isListValid)}),[setValidity]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,labelType:"legend",fullWidth:true,id:"visEditorPercentileRanksLabel".concat(agg.id),isInvalid:showValidation?!isValid:false,compressed:true,"data-test-subj":"visEditorPercentileRanks"},external_kbnSharedDeps_React_default.a.createElement(NumberList,{labelledbyId:"visEditorPercentileRanksLabel".concat(agg.id,"-legend"),numberArray:value,range:"[-Infinity,Infinity]",unitName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.percentileRanks.valueUnitNameText",{defaultMessage:"value"}),validateAscendingOrder:true,showValidation:showValidation,onChange:setValue,setTouched:setTouched,setValidity:setModelValidity}))}function PrecisionParamEditor(_ref){var agg=_ref.agg,value=_ref.value,setValue=_ref.setValue;var _useKibana=Object(public_["useKibana"])(),services=_useKibana.services;var label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.precisionLabel",{defaultMessage:"Precision"});if(agg.params.autoPrecision){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRange"],{min:1,max:services.uiSettings.get("visualization:tileMap:maxPrecision"),value:value||"",onChange:function onChange(ev){return setValue(Number(ev.currentTarget.value))},"data-test-subj":"visEditorMapPrecision".concat(agg.id),showValue:true,compressed:true}))}var controls_ranges=__webpack_require__(6);var range_control_RangesControl=function RangesControl(props){return external_kbnSharedDeps_React_default.a.createElement(controls_ranges["b"],{value:props.value,setValue:props.setValue})};var github=__webpack_require__(166);function raw_json_slicedToArray(arr,i){return raw_json_arrayWithHoles(arr)||raw_json_iterableToArrayLimit(arr,i)||raw_json_unsupportedIterableToArray(arr,i)||raw_json_nonIterableRest()}function raw_json_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function raw_json_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return raw_json_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return raw_json_arrayLikeToArray(o,minLen)}function raw_json_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function raw_json_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function raw_json_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function RawJsonParamEditor(_ref){var showValidation=_ref.showValidation,_ref$value=_ref.value,value=_ref$value===void 0?"":_ref$value,setValidity=_ref.setValidity,setValue=_ref.setValue,setTouched=_ref.setTouched;var _useState=Object(external_kbnSharedDeps_React_["useState"])(true),_useState2=raw_json_slicedToArray(_useState,2),isFieldValid=_useState2[0],setFieldValidity=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=raw_json_slicedToArray(_useState3,2),editorReady=_useState4[0],setEditorReady=_useState4[1];var editorTooltipText=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.jsonInputTooltip",{defaultMessage:"Any JSON formatted properties you add here will be merged with the elasticsearch aggregation definition for this section. For example 'shard_size' on a terms aggregation."})}),[]);var jsonEditorLabelText=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.jsonInputLabel",{defaultMessage:"JSON input"})}),[]);var label=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,jsonEditorLabelText," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",content:editorTooltipText,type:"questionInCircle"}))}),[jsonEditorLabelText,editorTooltipText]);var onEditorValidate=Object(external_kbnSharedDeps_React_["useCallback"])((function(annotations){if(editorReady){var validity=annotations.length===0;setFieldValidity(validity);setValidity(validity)}else{setEditorReady(true)}}),[setValidity,editorReady]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,isInvalid:showValidation?!isFieldValid:false,fullWidth:true,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeEditor"],{mode:"json",theme:"github",width:"100%",height:"250px",value:value,onValidate:onEditorValidate,setOptions:{fontSize:"14px"},onChange:setValue,onBlur:setTouched,"aria-label":jsonEditorLabelText,"aria-describedby":"jsonEditorDescription"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_kbnSharedDeps_React_default.a.createElement("p",{id:"jsonEditorDescription"},editorTooltipText))))}function scale_metrics_extends(){scale_metrics_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return scale_metrics_extends.apply(this,arguments)}function ScaleMetricsParamEditor(props){return external_kbnSharedDeps_React_default.a.createElement(SwitchParamEditor,scale_metrics_extends({dataTestSubj:"scaleMetricsSwitch",displayLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.scaleMetricsLabel",{defaultMessage:"Scale metric values (deprecated)"}),displayToolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.scaleMetricsTooltip",{defaultMessage:"If you select a manual minimum interval and a larger interval will be used, enabling this will "+"cause count and sum metrics to be scaled to the manual selected interval."})},props))}function SizeParamEditor(_ref){var disabled=_ref.disabled,iconTip=_ref.iconTip,value=_ref.value,setValue=_ref.setValue,showValidation=_ref.showValidation,setValidity=_ref.setValidity,setTouched=_ref.setTouched;var label=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.sizeLabel",defaultMessage:"Size"}),iconTip);var isValid=disabled||Number(value)>0;Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(isValid)}),[isValid,setValidity]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:Object(external_kbnSharedDeps_Lodash_["isUndefined"])(value)?"":value,onChange:function onChange(ev){return setValue(ev.target.value===""?"":parseFloat(ev.target.value))},fullWidth:true,compressed:true,isInvalid:showValidation?!isValid:false,onBlur:setTouched,min:1,disabled:disabled,"data-test-subj":"sizeParamEditor"}))}function SubAggParamEditor(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,formIsTouched=_ref.formIsTouched,metricAggs=_ref.metricAggs,state=_ref.state,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched,schemas=_ref.schemas;Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(agg.params.metricAgg!=="custom"){setValue(undefined)}else if(!agg.params.customMetric){setValue(aggParam.makeAgg(agg))}}),[metricAggs,agg,setValue,aggParam]);var _useSubAggParamsHandl=Object(controls_utils["f"])(agg,aggParam,agg.params.customMetric,setValue),onAggTypeChange=_useSubAggParamsHandl.onAggTypeChange,setAggParamValue=_useSubAggParamsHandl.setAggParamValue;if(agg.params.metricAgg!=="custom"||!agg.params.customMetric){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAggParams,{agg:agg.params.customMetric,allowedAggs:aggParam.allowedAggs,groupName:data_public_["AggGroupNames"].Metrics,className:"visEditorAgg__subAgg",formIsTouched:formIsTouched,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,onAggTypeChange:onAggTypeChange,setValidity:setValidity,setTouched:setTouched,schemas:schemas,hideCustomLabel:true}))}function SubMetricParamEditor(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,formIsTouched=_ref.formIsTouched,metricAggs=_ref.metricAggs,state=_ref.state,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched,schemas=_ref.schemas;var metricTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.metrics.metricTitle",{defaultMessage:"Metric"});var bucketTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.metrics.bucketTitle",{defaultMessage:"Bucket"});var type=aggParam.name;var isCustomMetric=type==="customMetric";var aggTitle=isCustomMetric?metricTitle:bucketTitle;var aggGroup=isCustomMetric?data_public_["AggGroupNames"].Metrics:data_public_["AggGroupNames"].Buckets;Object(lib["useMount"])((function(){if(agg.params[type]){setValue(agg.params[type])}else{setValue(aggParam.makeAgg(agg))}}));var _useSubAggParamsHandl=Object(controls_utils["f"])(agg,aggParam,agg.params[type],setValue),onAggTypeChange=_useSubAggParamsHandl.onAggTypeChange,setAggParamValue=_useSubAggParamsHandl.setAggParamValue;if(!agg.params[type]){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormLabel"],null,aggTitle),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAggParams,{agg:agg.params[type],allowedAggs:aggParam.allowedAggs,groupName:aggGroup,className:"visEditorAgg__subAgg",formIsTouched:formIsTouched,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,onAggTypeChange:onAggTypeChange,setValidity:setValidity,setTouched:setTouched,schemas:schemas,hideCustomLabel:!isCustomMetric}))}var _search$aggs=data_public_["search"].aggs,parseEsInterval=_search$aggs.parseEsInterval,InvalidEsCalendarIntervalError=_search$aggs.InvalidEsCalendarIntervalError;function isValidCalendarInterval(interval){if(interval==="0ms"){return{isValidCalendarValue:true}}try{parseEsInterval(interval);return{isValidCalendarValue:true}}catch(e){if(e instanceof InvalidEsCalendarIntervalError){return{isValidCalendarValue:false,error:e.message}}return{isValidCalendarValue:true}}}var errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.timeInterval.invalidFormatErrorMessage",{defaultMessage:"Invalid interval format."});function validateInterval(agg,value,definedOption,timeBase){var _agg$buckets2;if(definedOption){var _agg$buckets;return{isValid:true,interval:(_agg$buckets=agg.buckets)===null||_agg$buckets===void 0?void 0:_agg$buckets.getInterval()}}if(!value){return{isValid:false}}if(!timeBase){var _isValidCalendarInter=isValidCalendarInterval(value),_isValidCalendarValue=_isValidCalendarInter.isValidCalendarValue,_error=_isValidCalendarInter.error;if(!_isValidCalendarValue){return{isValid:false,error:_error}}}var isValid=data_public_["search"].aggs.isValidInterval(value,timeBase);if(!isValid){return{isValid:false,error:errorMessage}}var interval=(_agg$buckets2=agg.buckets)===null||_agg$buckets2===void 0?void 0:_agg$buckets2.getInterval();var _isValidCalendarInter2=isValidCalendarInterval(interval.expression),isValidCalendarValue=_isValidCalendarInter2.isValidCalendarValue,error=_isValidCalendarInter2.error;if(!isValidCalendarValue){return{isValid:false,error:error}}return{isValid:isValid,interval:interval}}function TimeIntervalParamEditor(_ref){var agg=_ref.agg,aggParam=_ref.aggParam,editorConfig=_ref.editorConfig,value=_ref.value,setValue=_ref.setValue,showValidation=_ref.showValidation,setTouched=_ref.setTouched,setValidity=_ref.setValidity;var timeBase=Object(external_kbnSharedDeps_Lodash_["get"])(editorConfig,"interval.timeBase");var options=timeBase?[]:(aggParam.options||[]).reduce((function(filtered,option){if(option.enabled?option.enabled(agg):true){filtered.push({label:option.display,key:option.val})}return filtered}),[]);var selectedOptions=[];var definedOption;if(value){definedOption=Object(external_kbnSharedDeps_Lodash_["find"])(options,{key:value});selectedOptions=definedOption?[definedOption]:[{label:value,key:"custom"}]}var _validateInterval=validateInterval(agg,value,definedOption,timeBase),isValid=_validateInterval.isValid,error=_validateInterval.error,interval=_validateInterval.interval;var scaledHelpText=interval&&interval.scaled?external_kbnSharedDeps_React_default.a.createElement("strong",{"data-test-subj":"currentlyScaledText",className:"eui-displayBlock"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.timeInterval.scaledHelpText",defaultMessage:"Currently scaled to {bucketDescription}",values:{bucketDescription:Object(external_kbnSharedDeps_Lodash_["get"])(interval,"description")||""}})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",type:"questionInCircle",content:interval.scale<=1?tooManyBucketsTooltip:tooLargeBucketsTooltip})):null;var helpText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,scaledHelpText,Object(external_kbnSharedDeps_Lodash_["get"])(editorConfig,"interval.help")||selectOptionHelpText);var onCustomInterval=function onCustomInterval(customValue){return setValue(customValue.trim())};var onChange=function onChange(opts){var selectedOpt=Object(external_kbnSharedDeps_Lodash_["get"])(opts,"0");setValue(selectedOpt?selectedOpt.key:"")};Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(isValid)}),[isValid,setValidity]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{compressed:true,error:error,fullWidth:true,helpText:helpText,isInvalid:showValidation&&!isValid,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.timeInterval.minimumIntervalLabel",{defaultMessage:"Minimum interval"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{compressed:true,fullWidth:true,"data-test-subj":"visEditorInterval",isInvalid:showValidation&&!isValid,noSuggestions:!!timeBase,onChange:onChange,onCreateOption:onCustomInterval,options:options,selectedOptions:selectedOptions,singleSelection:{asPlainText:true},placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.timeInterval.selectIntervalPlaceholder",{defaultMessage:"Select an interval"}),onBlur:setTouched}))}var tooManyBucketsTooltip=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.timeInterval.createsTooManyBucketsTooltip",defaultMessage:"This interval creates too many buckets to show in the selected time range, so it has been scaled up."});var tooLargeBucketsTooltip=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.timeInterval.createsTooLargeBucketsTooltip",defaultMessage:"This interval creates buckets that are too large to show in the selected time range, so it has been scaled down."});var selectOptionHelpText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.timeInterval.selectOptionHelpText",defaultMessage:"Select an option or create a custom value. Examples: 30s, 20m, 24h, 2d, 1w, 1M"});function top_aggregate_toConsumableArray(arr){return top_aggregate_arrayWithoutHoles(arr)||top_aggregate_iterableToArray(arr)||top_aggregate_unsupportedIterableToArray(arr)||top_aggregate_nonIterableSpread()}function top_aggregate_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function top_aggregate_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return top_aggregate_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return top_aggregate_arrayLikeToArray(o,minLen)}function top_aggregate_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function top_aggregate_arrayWithoutHoles(arr){if(Array.isArray(arr))return top_aggregate_arrayLikeToArray(arr)}function top_aggregate_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function getCompatibleAggs(agg){var _ref=agg.getAggParams().find((function(_ref2){var name=_ref2.name;return name==="aggregate"})),_ref$options=_ref.options,options=_ref$options===void 0?[]:_ref$options;return options.filter((function(option){return option.isCompatible(agg)}))}function TopAggregateParamEditor(_ref3){var agg=_ref3.agg,aggParam=_ref3.aggParam,value=_ref3.value,showValidation=_ref3.showValidation,setValue=_ref3.setValue,setValidity=_ref3.setValidity,setTouched=_ref3.setTouched;var isFirstRun=Object(external_kbnSharedDeps_React_["useRef"])(true);var fieldType=agg.params.field&&agg.params.field.type;var emptyValue={text:"",value:"EMPTY_VALUE",disabled:true,hidden:true};var filteredOptions=getCompatibleAggs(agg).map((function(_ref4){var text=_ref4.text,val=_ref4.value;return{text:text,value:val}})).sort((function(a,b){return a.text.toLowerCase().localeCompare(b.text.toLowerCase())}));var options=[emptyValue].concat(top_aggregate_toConsumableArray(filteredOptions));var disabled=fieldType&&!filteredOptions.length;var isValid=disabled||!!value;var label=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.aggregateWithLabel",defaultMessage:"Aggregate with"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",type:"questionInCircle",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.aggregateWithTooltip",{defaultMessage:"Choose a strategy for combining multiple hits or a multi-valued field into a single metric."})}));Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(isValid)}),[isValid,setValidity]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(isFirstRun.current){isFirstRun.current=false;return}if(value){if(aggParam.options.find((function(opt){return opt.value===value.value}))){return}setValue()}if(filteredOptions.length===1){setValue(aggParam.options.find((function(opt){return opt.value===filteredOptions[0].value})))}}),[aggParam.options,fieldType,filteredOptions,setValue,value]);var handleChange=function handleChange(event){if(event.target.value===emptyValue.value){setValue()}else{setValue(aggParam.options.find((function(opt){return opt.value===event.target.value})))}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:options,value:value?value.value:emptyValue.value,onChange:handleChange,fullWidth:true,compressed:true,isInvalid:showValidation?!isValid:false,disabled:disabled,onBlur:setTouched,"data-test-subj":"visDefaultEditorAggregateWith"}))}function top_field_extends(){top_field_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return top_field_extends.apply(this,arguments)}function TopFieldParamEditor(props){var compatibleAggs=getCompatibleAggs(props.agg);var customError;if(props.value&&!compatibleAggs.length){customError=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.aggregateWith.noAggsErrorTooltip",{defaultMessage:"The chosen field has no compatible aggregations."})}return external_kbnSharedDeps_React_default.a.createElement(FieldParamEditor,top_field_extends({},props,{customError:customError}))}function top_size_extends(){top_size_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return top_size_extends.apply(this,arguments)}function TopSizeParamEditor(props){var iconTip=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.sizeTooltip",{defaultMessage:"Request top-K hits. Multiple hits will be combined via 'aggregate with'."}),type:"questionInCircle"}));var fieldType=props.agg.params.field&&props.agg.params.field.type;var disabled=fieldType&&!getCompatibleAggs(props.agg).length;return external_kbnSharedDeps_React_default.a.createElement(SizeParamEditor,top_size_extends({},props,{iconTip:iconTip,disabled:disabled}))}function top_sort_field_extends(){top_sort_field_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return top_sort_field_extends.apply(this,arguments)}function TopSortFieldParamEditor(props){var customLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.sortOnLabel",{defaultMessage:"Sort on"});return external_kbnSharedDeps_React_default.a.createElement(FieldParamEditor,top_sort_field_extends({},props,{customLabel:customLabel}))}function OrderParamEditor(_ref){var aggParam=_ref.aggParam,value=_ref.value,showValidation=_ref.showValidation,setValue=_ref.setValue,setValidity=_ref.setValidity,setTouched=_ref.setTouched;var label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.orderLabel",{defaultMessage:"Order"});var isValid=!!value;Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(isValid)}),[isValid,setValidity]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:aggParam.options,value:value&&value.value,onChange:function onChange(ev){return setValue(aggParam.options.find((function(opt){return opt.value===ev.target.value})))},fullWidth:true,compressed:true,isInvalid:showValidation?!isValid:false,onBlur:setTouched}))}function UseGeocentroidParamEditor(_ref){var _ref$value=_ref.value,value=_ref$value===void 0?false:_ref$value,setValue=_ref.setValue;var label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.placeMarkersOffGridLabel",{defaultMessage:"Place markers off grid (use geocentroid)"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{compressed:true,label:label,checked:value,onChange:function onChange(ev){return setValue(ev.target.checked)}}))}var autoPlaceholder=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.maxBars.autoPlaceholder",{defaultMessage:"Auto"});var max_bars_label=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.maxBars.maxBarsLabel",defaultMessage:"Max bars"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.maxBars.maxBarsHelpText",defaultMessage:"Intervals will be selected automatically based on the available data. The maximum number of bars can never be greater than the Advanced Setting's {histogramMaxBars}",values:{histogramMaxBars:data_public_["UI_SETTINGS"].HISTOGRAM_MAX_BARS}}),type:"questionInCircle"}));function MaxBarsParamEditor(_ref){var _services$uiSettings;var disabled=_ref.disabled,iconTip=_ref.iconTip,value=_ref.value,setValue=_ref.setValue,showValidation=_ref.showValidation,setValidity=_ref.setValidity,setTouched=_ref.setTouched;var _useKibana=Object(public_["useKibana"])(),services=_useKibana.services;var uiSettingMaxBars=(_services$uiSettings=services.uiSettings)===null||_services$uiSettings===void 0?void 0:_services$uiSettings.get(data_public_["UI_SETTINGS"].HISTOGRAM_MAX_BARS);var isValid=disabled||value===undefined||value===""||Number(value)>0||value<uiSettingMaxBars;Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(isValid)}),[isValid,setValidity]);var onChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(ev){return setValue(ev.target.value===""?"":parseFloat(ev.target.value))}),[setValue]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:max_bars_label,fullWidth:true,isInvalid:showValidation?!isValid:false,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:value||"",placeholder:autoPlaceholder,onChange:onChange,min:1,fullWidth:true,compressed:true,max:uiSettingMaxBars,isInvalid:showValidation?!isValid:false,onBlur:setTouched,disabled:disabled,"data-test-subj":"maxBarsParamEditor"}))}var agg_params_map_search$aggs=data_public_["search"].aggs,siblingPipelineType=agg_params_map_search$aggs.siblingPipelineType,parentPipelineType=agg_params_map_search$aggs.parentPipelineType;var buckets={[data_public_["BUCKET_TYPES"].DATE_HISTOGRAM]:{scaleMetricValues:ScaleMetricsParamEditor,interval:TimeIntervalParamEditor,drop_partials:DropPartialsParamEditor},[data_public_["BUCKET_TYPES"].DATE_RANGE]:{ranges:DateRangesParamEditor},[data_public_["BUCKET_TYPES"].FILTERS]:{filters:FiltersParamEditor},[data_public_["BUCKET_TYPES"].GEOHASH_GRID]:{autoPrecision:AutoPrecisionParamEditor,precision:PrecisionParamEditor,useGeocentroid:UseGeocentroidParamEditor,isFilteredByCollar:IsFilteredByCollarParamEditor},[data_public_["BUCKET_TYPES"].HISTOGRAM]:{interval:NumberIntervalParamEditor,maxBars:MaxBarsParamEditor,min_doc_count:MinDocCountParamEditor,has_extended_bounds:HasExtendedBoundsParamEditor,extended_bounds:ExtendedBoundsParamEditor},[data_public_["BUCKET_TYPES"].IP_RANGE]:{ipRangeType:IpRangeTypeParamEditor,ranges:IpRangesParamEditor},[data_public_["BUCKET_TYPES"].RANGE]:{ranges:range_control_RangesControl},[data_public_["BUCKET_TYPES"].SIGNIFICANT_TERMS]:{size:SizeParamEditor},[data_public_["BUCKET_TYPES"].TERMS]:{include:IncludeExcludeParamEditor,exclude:IncludeExcludeParamEditor,orderBy:OrderByParamEditor,orderAgg:OrderAggParamEditor,order:Object(controls_utils["h"])(OrderParamEditor),size:Object(controls_utils["h"])(SizeParamEditor),otherBucket:OtherBucketParamEditor,missingBucket:MissingBucketParamEditor}};var metrics={[data_public_["METRIC_TYPES"].TOP_HITS]:{field:TopFieldParamEditor,aggregate:Object(controls_utils["h"])(TopAggregateParamEditor),size:Object(controls_utils["h"])(TopSizeParamEditor),sortField:TopSortFieldParamEditor,sortOrder:OrderParamEditor},[data_public_["METRIC_TYPES"].PERCENTILES]:{percents:PercentilesEditor},[data_public_["METRIC_TYPES"].PERCENTILE_RANKS]:{values:PercentileRanksEditor}};var aggParamsMap={common:{string:StringParamEditor,json:RawJsonParamEditor,field:FieldParamEditor},[siblingPipelineType]:{customBucket:SubMetricParamEditor,customMetric:SubMetricParamEditor},[parentPipelineType]:{metricAgg:MetricAggParamEditor,customMetric:SubAggParamEditor},[data_public_["AggGroupNames"].Buckets]:buckets,[data_public_["AggGroupNames"].Metrics]:metrics};function getAggParamsToRender(_ref){var agg=_ref.agg,editorConfig=_ref.editorConfig,metricAggs=_ref.metricAggs,state=_ref.state,schemas=_ref.schemas,hideCustomLabel=_ref.hideCustomLabel;var params={basic:[],advanced:[]};var paramsToRender=agg.type&&agg.type.params.filter((function(param){return!Object(external_kbnSharedDeps_Lodash_["get"])(editorConfig,[param.name,"hidden"],false)}))||[];var schema=Object(public_schemas["d"])(schemas,agg.schema);paramsToRender.forEach((function(param,index){var indexedFields=[];var fields;if(hideCustomLabel&&param.name==="customLabel"){return}if(param.type==="field"){var availableFields=param.getAvailableFields(agg);if(agg.type.name==="top_hits"&&param.name==="field"){var allowStrings=Object(external_kbnSharedDeps_Lodash_["get"])(schema,"aggSettings[".concat(agg.type.name,"].allowStrings"),false);if(!allowStrings){availableFields=availableFields.filter((function(field){return field.type==="number"}))}}fields=filterAggTypeFields(availableFields,agg);indexedFields=Object(utils["a"])(fields,"type","name");if(fields&&!indexedFields.length&&index>0){return}}var type=param.advanced?"advanced":"basic";var paramEditor;if(agg.type.subtype&&aggParamsMap[agg.type.subtype]){paramEditor=Object(external_kbnSharedDeps_Lodash_["get"])(aggParamsMap,[agg.type.subtype,param.name])}else{var aggType=agg.type.type;var aggName=agg.type.name;var aggParams=Object(external_kbnSharedDeps_Lodash_["get"])(aggParamsMap,[aggType,aggName],{});paramEditor=Object(external_kbnSharedDeps_Lodash_["get"])(aggParams,param.name)}if(!paramEditor){paramEditor=Object(external_kbnSharedDeps_Lodash_["get"])(aggParamsMap,["common",param.type])}if(paramEditor){params[type].push({agg:agg,aggParam:param,editorConfig:editorConfig,indexedFields:indexedFields,paramEditor:paramEditor,metricAggs:metricAggs,state:state,value:agg.params[param.name],schemas:schemas,hideCustomLabel:hideCustomLabel})}}));return params}function getAggTypeOptions(aggTypes,agg,indexPattern,groupName,allowedAggs){var aggTypeOptions=filterAggTypes(aggTypes[groupName],indexPattern,agg,allowedAggs);return Object(utils["a"])(aggTypeOptions,"subtype","title")}function isInvalidParamsTouched(aggType,aggTypeState,aggParams){if(!aggType){return aggTypeState.touched}var invalidParams=Object.values(aggParams).filter((function(param){return!param.valid}));if(Object(external_kbnSharedDeps_Lodash_["isEmpty"])(invalidParams)){return false}return invalidParams.every((function(param){return param.touched}))}function buildAggDescription(agg){var description="";if(agg.type&&agg.type.makeLabel){try{description=agg.type.makeLabel(agg)}catch(e){}}return description}function getEditorConfig(indexPattern,aggTypeName,fieldName){var aggRestrictions=indexPattern.getAggregationRestrictions();if(!aggRestrictions||!aggTypeName||!fieldName){return{}}if(aggTypeName==="terms"){return{otherBucket:{hidden:true},missingBucket:{hidden:true}}}var fieldAgg=aggRestrictions[aggTypeName]&&aggRestrictions[aggTypeName][fieldName];if(!fieldAgg){return{}}if(aggTypeName==="histogram"){var interval=fieldAgg.interval;return interval?{intervalBase:{fixedValue:interval},interval:{base:interval,help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.editorConfig.histogram.interval.helpText",{defaultMessage:"Must be a multiple of configuration interval: {interval}",values:{interval:interval}})}}:{}}if(aggTypeName==="date_histogram"){var _interval=fieldAgg.calendar_interval||fieldAgg.fixed_interval;return{useNormalizedEsInterval:{fixedValue:false},interval:{default:_interval,timeBase:_interval,help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.editorConfig.dateHistogram.customInterval.helpText",{defaultMessage:"Must be a multiple of configuration interval: {interval}",values:{interval:_interval}})}}}return{}}function agg_params_extends(){agg_params_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return agg_params_extends.apply(this,arguments)}function agg_params_slicedToArray(arr,i){return agg_params_arrayWithHoles(arr)||agg_params_iterableToArrayLimit(arr,i)||agg_params_unsupportedIterableToArray(arr,i)||agg_params_nonIterableRest()}function agg_params_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function agg_params_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function agg_params_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function agg_params_toConsumableArray(arr){return agg_params_arrayWithoutHoles(arr)||agg_params_iterableToArray(arr)||agg_params_unsupportedIterableToArray(arr)||agg_params_nonIterableSpread()}function agg_params_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function agg_params_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return agg_params_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return agg_params_arrayLikeToArray(o,minLen)}function agg_params_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function agg_params_arrayWithoutHoles(arr){if(Array.isArray(arr))return agg_params_arrayLikeToArray(arr)}function agg_params_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var FIXED_VALUE_PROP="fixedValue";var DEFAULT_PROP="default";function DefaultEditorAggParams(_ref){var _agg$type,_agg$params,_agg$params$field;var agg=_ref.agg,aggError=_ref.aggError,_ref$aggIndex=_ref.aggIndex,aggIndex=_ref$aggIndex===void 0?0:_ref$aggIndex,_ref$aggIsTooLow=_ref.aggIsTooLow,aggIsTooLow=_ref$aggIsTooLow===void 0?false:_ref$aggIsTooLow,className=_ref.className,disabledParams=_ref.disabledParams,groupName=_ref.groupName,formIsTouched=_ref.formIsTouched,indexPattern=_ref.indexPattern,metricAggs=_ref.metricAggs,state=_ref.state,setAggParamValue=_ref.setAggParamValue,onAggTypeChange=_ref.onAggTypeChange,setTouched=_ref.setTouched,setValidity=_ref.setValidity,schemas=_ref.schemas,_ref$allowedAggs=_ref.allowedAggs,allowedAggs=_ref$allowedAggs===void 0?[]:_ref$allowedAggs,_ref$hideCustomLabel=_ref.hideCustomLabel,hideCustomLabel=_ref$hideCustomLabel===void 0?false:_ref$hideCustomLabel;var schema=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return Object(public_schemas["d"])(schemas,agg.schema)}),[agg.schema,schemas]);var aggFilter=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return[].concat(agg_params_toConsumableArray(allowedAggs),agg_params_toConsumableArray(schema.aggFilter||[]))}),[allowedAggs,schema.aggFilter]);var _useKibana=Object(public_["useKibana"])(),services=_useKibana.services;var aggTypes=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return services.data.search.aggs.types.getAll()}),[services.data.search.aggs.types]);var groupedAggTypeOptions=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return getAggTypeOptions(aggTypes,agg,indexPattern,groupName,aggFilter)}),[aggTypes,agg,indexPattern,groupName,aggFilter]);var error=aggIsTooLow?external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.aggParams.errors.aggWrongRunOrderErrorMessage",{defaultMessage:'"{schema}" aggs must run before all other buckets!',values:{schema:schema.title}}):"";var aggTypeName=(_agg$type=agg.type)===null||_agg$type===void 0?void 0:_agg$type.name;var fieldName=(_agg$params=agg.params)===null||_agg$params===void 0?void 0:(_agg$params$field=_agg$params.field)===null||_agg$params$field===void 0?void 0:_agg$params$field.name;var editorConfig=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return getEditorConfig(indexPattern,aggTypeName,fieldName)}),[indexPattern,aggTypeName,fieldName]);var params=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return getAggParamsToRender({agg:agg,editorConfig:editorConfig,metricAggs:metricAggs,state:state,schemas:schemas,hideCustomLabel:hideCustomLabel})}),[agg,editorConfig,metricAggs,state,schemas,hideCustomLabel]);var allParams=[].concat(agg_params_toConsumableArray(params.basic),agg_params_toConsumableArray(params.advanced));var _useReducer=Object(external_kbnSharedDeps_React_["useReducer"])(aggParamsReducer,allParams,initAggParamsState),_useReducer2=agg_params_slicedToArray(_useReducer,2),paramsState=_useReducer2[0],onChangeParamsState=_useReducer2[1];var _useReducer3=Object(external_kbnSharedDeps_React_["useReducer"])(aggTypeReducer,{touched:false,valid:true}),_useReducer4=agg_params_slicedToArray(_useReducer3,2),aggType=_useReducer4[0],onChangeAggType=_useReducer4[1];var isFormValid=!error&&aggType.valid&&Object.entries(paramsState).every((function(_ref2){var _ref3=agg_params_slicedToArray(_ref2,2),paramState=_ref3[1];return paramState.valid}));var isAllInvalidParamsTouched=!!error||isInvalidParamsTouched(agg.type,aggType,paramsState);var onAggSelect=Object(external_kbnSharedDeps_React_["useCallback"])((function(value){if(agg.type!==value){onAggTypeChange(agg.id,value);onChangeParamsState({type:AGG_PARAMS_ACTION_KEYS.RESET})}}),[onAggTypeChange,agg]);useUnmount_default()((function(){return setValidity(true)}));Object(external_kbnSharedDeps_React_["useEffect"])((function(){Object.entries(editorConfig).forEach((function(_ref4){var _ref5=agg_params_slicedToArray(_ref4,2),param=_ref5[0],paramConfig=_ref5[1];var paramOptions=agg.type.params.find((function(paramOption){return paramOption.name===param}));var hasFixedValue=paramConfig.hasOwnProperty(FIXED_VALUE_PROP);var hasDefault=paramConfig.hasOwnProperty(DEFAULT_PROP);if(hasFixedValue||hasDefault){var newValue;var property=FIXED_VALUE_PROP;var typedParamConfig=paramConfig;if(hasDefault){property=DEFAULT_PROP;typedParamConfig=paramConfig}if(paramOptions&&paramOptions.deserialize){newValue=paramOptions.deserialize(typedParamConfig[property])}else{newValue=typedParamConfig[property]}if(agg.params[param]!==newValue){setAggParamValue(agg.id,param,newValue)}}}))}),[editorConfig]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){setTouched(false)}),[agg.type,setTouched]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity(isFormValid)}),[isFormValid,agg.type,setValidity]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){setTouched(isAllInvalidParamsTouched)}),[isAllInvalidParamsTouched,setTouched]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{className:className,isInvalid:!!error,error:error,"data-test-subj":"visAggEditorParams"},external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAggSelect,{aggError:aggError,id:agg.id,indexPattern:indexPattern,value:agg.type,aggTypeOptions:groupedAggTypeOptions,isSubAggregation:aggIndex>=1&&groupName===data_public_["AggGroupNames"].Buckets,showValidation:formIsTouched||aggType.touched,setValue:onAggSelect,onChangeAggType:onChangeAggType}),params.basic.map((function(param){var model=paramsState[param.aggParam.name]||{touched:false,valid:true};return external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAggParam,agg_params_extends({key:"".concat(param.aggParam.name).concat(agg.type?agg.type.name:""),disabled:disabledParams&&disabledParams.includes(param.aggParam.name),formIsTouched:formIsTouched,showValidation:formIsTouched||model.touched,setAggParamValue:setAggParamValue,onChangeParamsState:onChangeParamsState},param))})),params.advanced.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"advancedAccordion","data-test-subj":"advancedParams-".concat(agg.id),buttonContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.advancedToggle.advancedLinkLabel",{defaultMessage:"Advanced"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),params.advanced.map((function(param){var model=paramsState[param.aggParam.name]||{touched:false,valid:true};return external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAggParam,agg_params_extends({key:"".concat(param.aggParam.name).concat(agg.type?agg.type.name:""),disabled:disabledParams&&disabledParams.includes(param.aggParam.name),formIsTouched:formIsTouched,showValidation:formIsTouched||model.touched,setAggParamValue:setAggParamValue,onChangeParamsState:onChangeParamsState},param))})))):null)}function agg_group_state_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function agg_group_state_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){agg_group_state_ownKeys(Object(source),true).forEach((function(key){agg_group_state_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{agg_group_state_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function agg_group_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AGGS_ACTION_KEYS;(function(AGGS_ACTION_KEYS){AGGS_ACTION_KEYS["TOUCHED"]="aggsTouched";AGGS_ACTION_KEYS["VALID"]="aggsValid"})(AGGS_ACTION_KEYS||(AGGS_ACTION_KEYS={}));function aggGroupReducer(state,action){var aggState=state[action.aggId]||{touched:false,valid:true};switch(action.type){case AGGS_ACTION_KEYS.TOUCHED:return agg_group_state_objectSpread(agg_group_state_objectSpread({},state),{},{[action.aggId]:agg_group_state_objectSpread(agg_group_state_objectSpread({},aggState),{},{touched:action.payload})});case AGGS_ACTION_KEYS.VALID:return agg_group_state_objectSpread(agg_group_state_objectSpread({},state),{},{[action.aggId]:agg_group_state_objectSpread(agg_group_state_objectSpread({},aggState),{},{valid:action.payload})});default:throw new Error}}function initAggsState(group){return group.reduce((function(state,agg){state[agg.id]={touched:false,valid:true};return state}),{})}var PARAMS={NAME:"row",ROWS:"visEditorSplitBy__true",COLUMNS:"visEditorSplitBy__false"};function RowsOrColumnsControl(_ref){var editorStateParams=_ref.editorStateParams,setStateParamValue=_ref.setStateParamValue;if(editorStateParams.row===undefined){setStateParamValue(PARAMS.NAME,true)}var idSelected="visEditorSplitBy__".concat(editorStateParams.row);var options=[{id:PARAMS.ROWS,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.rowsLabel",{defaultMessage:"Rows"})},{id:PARAMS.COLUMNS,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.columnsLabel",{defaultMessage:"Columns"})}];var onChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(optionId){return setStateParamValue(PARAMS.NAME,optionId===PARAMS.ROWS)}),[setStateParamValue]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{compressed:true,fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonGroup"],{"data-test-subj":"visEditorSplitBy",legend:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.splitByLegend",{defaultMessage:"Split chart by rows or columns."}),options:options,isFullWidth:true,idSelected:idSelected,onChange:onChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}var radius_ratio_option_DEFAULT_VALUE=50;var PARAM_NAME="radiusRatio";function RadiusRatioOptionControl(_ref){var editorStateParams=_ref.editorStateParams,setStateParamValue=_ref.setStateParamValue;var label=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.dotSizeRatioLabel",defaultMessage:"Dot size ratio"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.controls.dotSizeRatioHelpText",{defaultMessage:"Change the ratio of the radius of the smallest point to the largest point."}),position:"right"}));Object(lib["useMount"])((function(){if(!editorStateParams.radiusRatio){setStateParamValue(PARAM_NAME,radius_ratio_option_DEFAULT_VALUE)}}));var onChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(e){return setStateParamValue(PARAM_NAME,parseFloat(e.currentTarget.value))}),[setStateParamValue]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:label,compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRange"],{compressed:true,fullWidth:true,min:1,max:100,value:editorStateParams.radiusRatio||radius_ratio_option_DEFAULT_VALUE,onChange:onChange,showRange:true,showValue:true,valueAppend:"%"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}function agg_slicedToArray(arr,i){return agg_arrayWithHoles(arr)||agg_iterableToArrayLimit(arr,i)||agg_unsupportedIterableToArray(arr,i)||agg_nonIterableRest()}function agg_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function agg_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return agg_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return agg_arrayLikeToArray(o,minLen)}function agg_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function agg_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function agg_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function DefaultEditorAgg(_ref){var _agg$type;var agg=_ref.agg,aggIndex=_ref.aggIndex,aggIsTooLow=_ref.aggIsTooLow,dragHandleProps=_ref.dragHandleProps,formIsTouched=_ref.formIsTouched,groupName=_ref.groupName,isDisabled=_ref.isDisabled,isDraggable=_ref.isDraggable,isLastBucket=_ref.isLastBucket,isRemovable=_ref.isRemovable,metricAggs=_ref.metricAggs,lastParentPipelineAggTitle=_ref.lastParentPipelineAggTitle,state=_ref.state,setAggParamValue=_ref.setAggParamValue,setStateParamValue=_ref.setStateParamValue,onAggTypeChange=_ref.onAggTypeChange,onToggleEnableAgg=_ref.onToggleEnableAgg,removeAgg=_ref.removeAgg,setAggsState=_ref.setAggsState,schemas=_ref.schemas,timeRange=_ref.timeRange;var _useState=Object(external_kbnSharedDeps_React_["useState"])(agg.brandNew),_useState2=agg_slicedToArray(_useState,2),isEditorOpen=_useState2[0],setIsEditorOpen=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(true),_useState4=agg_slicedToArray(_useState3,2),validState=_useState4[0],setValidState=_useState4[1];var showDescription=!isEditorOpen&&validState;var showError=!isEditorOpen&&!validState;var aggName=(_agg$type=agg.type)===null||_agg$type===void 0?void 0:_agg$type.name;var disabledParams;var aggError;var isLastBucketAgg=isLastBucket&&lastParentPipelineAggTitle&&agg.type;var SchemaComponent;if(agg.schema==="split"){SchemaComponent=RowsOrColumnsControl}if(agg.schema==="radius"){SchemaComponent=RadiusRatioOptionControl}if(isLastBucketAgg){if(["date_histogram","histogram"].includes(aggName)){disabledParams=["min_doc_count"]}else{aggError=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.metrics.wrongLastBucketTypeErrorMessage",{defaultMessage:'Last bucket aggregation must be "Date Histogram" or "Histogram" when using "{type}" metric aggregation.',values:{type:lastParentPipelineAggTitle},description:"Date Histogram and Histogram should not be translated"})}}var _useState5=Object(external_kbnSharedDeps_React_["useState"])(buildAggDescription(agg)),_useState6=agg_slicedToArray(_useState5,2),aggDescription=_useState6[0],setAggDescription=_useState6[1];Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(timeRange&&aggName==="date_histogram"){agg.aggConfigs.setTimeRange(timeRange)}setAggDescription(buildAggDescription(agg))}),[agg,aggName,timeRange]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(isLastBucketAgg&&["date_histogram","histogram"].includes(aggName)){setAggParamValue(agg.id,"min_doc_count",aggName==="histogram"?true:0)}}),[aggName,isLastBucketAgg,agg.id,setAggParamValue]);var setTouched=Object(external_kbnSharedDeps_React_["useCallback"])((function(touched){setAggsState({type:AGGS_ACTION_KEYS.TOUCHED,payload:touched,aggId:agg.id})}),[agg.id,setAggsState]);var setValidity=Object(external_kbnSharedDeps_React_["useCallback"])((function(isValid){setAggsState({type:AGGS_ACTION_KEYS.VALID,payload:isValid,aggId:agg.id});setValidState(isValid)}),[agg.id,setAggsState]);var onToggle=Object(external_kbnSharedDeps_React_["useCallback"])((function(isOpen){setIsEditorOpen(isOpen);if(!isOpen){setTouched(true)}}),[setTouched]);var renderAggButtons=function renderAggButtons(){var actionIcons=[];if(showError){actionIcons.push({id:"hasErrors",color:"danger",type:"alert",tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.agg.errorsAriaLabel",{defaultMessage:"Aggregation has errors"}),dataTestSubj:"hasErrorsAggregationIcon"})}if(agg.enabled&&isRemovable){actionIcons.push({id:"disableAggregation",color:"text",disabled:isDisabled,type:"eye",onClick:function onClick(){return onToggleEnableAgg(agg.id,false)},tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.agg.disableAggButtonTooltip",{defaultMessage:"Disable aggregation"}),dataTestSubj:"toggleDisableAggregationBtn disable"})}if(!agg.enabled){actionIcons.push({id:"enableAggregation",color:"text",type:"eyeClosed",onClick:function onClick(){return onToggleEnableAgg(agg.id,true)},tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.agg.enableAggButtonTooltip",{defaultMessage:"Enable aggregation"}),dataTestSubj:"toggleDisableAggregationBtn enable"})}if(isDraggable){actionIcons.push({id:"dragHandle",type:"grab",tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.agg.modifyPriorityButtonTooltip",{defaultMessage:"Modify priority by dragging"}),dataTestSubj:"dragHandleBtn"})}if(isRemovable){actionIcons.push({id:"removeDimension",color:"danger",type:"cross",onClick:function onClick(){return removeAgg(agg.id)},tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.agg.removeDimensionButtonTooltip",{defaultMessage:"Remove dimension"}),dataTestSubj:"removeDimensionBtn"})}return external_kbnSharedDeps_React_default.a.createElement("div",dragHandleProps,actionIcons.map((function(icon){if(icon.id==="dragHandle"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{key:icon.id,type:icon.type,content:icon.tooltip,iconProps:{["aria-label"]:icon.tooltip,["data-test-subj"]:icon.dataTestSubj},position:"bottom"})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{key:icon.id,position:"bottom",content:icon.tooltip},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{disabled:icon.disabled,iconType:icon.type,color:icon.color,onClick:icon.onClick,"aria-label":icon.tooltip,"data-test-subj":icon.dataTestSubj}))})))};var schemaTitle=Object(public_schemas["d"])(schemas,agg.schema).title;var buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,schemaTitle||agg.schema," ",showDescription&&external_kbnSharedDeps_React_default.a.createElement("span",null,aggDescription));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"visEditorAggAccordion".concat(agg.id),initialIsOpen:isEditorOpen,buttonContent:buttonContent,buttonClassName:"eui-textTruncate",buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate",className:"visEditorSidebar__section visEditorSidebar__collapsible visEditorSidebar__collapsible--marginBottom","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.agg.toggleEditorButtonAriaLabel",{defaultMessage:"Toggle {schema} editor",values:{schema:schemaTitle||agg.schema}}),"data-test-subj":"visEditorAggAccordion".concat(agg.id),extraAction:renderAggButtons(),onToggle:onToggle},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),SchemaComponent&&external_kbnSharedDeps_React_default.a.createElement(SchemaComponent,{agg:agg,editorStateParams:state.params,setAggParamValue:setAggParamValue,setStateParamValue:setStateParamValue}),external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAggParams,{agg:agg,aggError:aggError,aggIndex:aggIndex,aggIsTooLow:aggIsTooLow,disabledParams:disabledParams,formIsTouched:formIsTouched,groupName:groupName,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,onAggTypeChange:onAggTypeChange,setTouched:setTouched,setValidity:setValidity,schemas:schemas})))}function agg_add_slicedToArray(arr,i){return agg_add_arrayWithHoles(arr)||agg_add_iterableToArrayLimit(arr,i)||agg_add_unsupportedIterableToArray(arr,i)||agg_add_nonIterableRest()}function agg_add_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function agg_add_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return agg_add_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return agg_add_arrayLikeToArray(o,minLen)}function agg_add_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function agg_add_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function agg_add_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function DefaultEditorAggAdd(_ref){var _ref$group=_ref.group,group=_ref$group===void 0?[]:_ref$group,groupName=_ref.groupName,schemas=_ref.schemas,addSchema=_ref.addSchema,stats=_ref.stats;var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=agg_add_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var onSelectSchema=function onSelectSchema(schema){setIsPopoverOpen(false);addSchema(schema)};var addButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",iconType:"plusInCircleFilled","data-test-subj":"visEditorAdd_".concat(groupName),onClick:function onClick(){return setIsPopoverOpen(!isPopoverOpen)}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggAdd.addButtonLabel",defaultMessage:"Add"}));var groupNameLabel=groupName===data_public_["AggGroupNames"].Buckets?external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.aggAdd.bucketLabel",{defaultMessage:"bucket"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.aggAdd.metricLabel",{defaultMessage:"metric"});var isSchemaDisabled=function isSchemaDisabled(schema){var count=group.filter((function(agg){return agg.schema===schema.name})).length;return count>=schema.max};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"center",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"addGroupButtonPopover_".concat(groupName),button:addButton,isOpen:isPopoverOpen,panelPaddingSize:"none",repositionOnScroll:true,closePopover:function closePopover(){return setIsPopoverOpen(false)}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,(groupName!==data_public_["AggGroupNames"].Buckets||!stats.count)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggAdd.addGroupButtonLabel",defaultMessage:"Add {groupNameLabel}",values:{groupNameLabel:groupNameLabel}}),groupName===data_public_["AggGroupNames"].Buckets&&stats.count>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggAdd.addSubGroupButtonLabel",defaultMessage:"Add sub-{groupNameLabel}",values:{groupNameLabel:groupNameLabel}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{items:schemas.map((function(schema){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"".concat(schema.name,"_").concat(schema.title),"data-test-subj":"visEditorAdd_".concat(groupName,"_").concat(schema.title),disabled:isPopoverOpen&&isSchemaDisabled(schema),onClick:function onClick(){return onSelectSchema(schema)}},schema.title)}))}))))}function agg_group_slicedToArray(arr,i){return agg_group_arrayWithHoles(arr)||agg_group_iterableToArrayLimit(arr,i)||agg_group_unsupportedIterableToArray(arr,i)||agg_group_nonIterableRest()}function agg_group_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function agg_group_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return agg_group_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return agg_group_arrayLikeToArray(o,minLen)}function agg_group_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function agg_group_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function agg_group_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function DefaultEditorAggGroup(_ref){var formIsTouched=_ref.formIsTouched,groupName=_ref.groupName,lastParentPipelineAggTitle=_ref.lastParentPipelineAggTitle,metricAggs=_ref.metricAggs,state=_ref.state,_ref$schemas=_ref.schemas,schemas=_ref$schemas===void 0?[]:_ref$schemas,addSchema=_ref.addSchema,setAggParamValue=_ref.setAggParamValue,setStateParamValue=_ref.setStateParamValue,onAggTypeChange=_ref.onAggTypeChange,onToggleEnableAgg=_ref.onToggleEnableAgg,removeAgg=_ref.removeAgg,reorderAggs=_ref.reorderAggs,setTouched=_ref.setTouched,setValidity=_ref.setValidity,timeRange=_ref.timeRange;var groupNameLabel=data_public_["AggGroupLabels"][groupName];var schemaNames=schemas.map((function(s){return s.name}));var group=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return state.data.aggs.aggs.filter((function(agg){return agg.schema&&schemaNames.includes(agg.schema)}))||[]}),[state.data.aggs,schemaNames]);var stats={max:0,count:group.length};schemas.forEach((function(schema){stats.max+=schema.max}));var _useReducer=Object(external_kbnSharedDeps_React_["useReducer"])(aggGroupReducer,group,initAggsState),_useReducer2=agg_group_slicedToArray(_useReducer,2),aggsState=_useReducer2[0],setAggsState=_useReducer2[1];var bucketsError=lastParentPipelineAggTitle&&groupName===data_public_["AggGroupNames"].Buckets&&!group.length?external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.buckets.mustHaveBucketErrorMessage",{defaultMessage:'Add a bucket with "Date Histogram" or "Histogram" aggregation.',description:"Date Histogram and Histogram should not be translated"}):undefined;var isGroupValid=!bucketsError&&Object.values(aggsState).every((function(item){return item.valid}));var isAllAggsTouched=isInvalidAggsTouched(aggsState);var isMetricAggregationDisabled=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return groupName===data_public_["AggGroupNames"].Metrics&&getEnabledMetricAggsCount(group)===1}),[groupName,group]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){setTouched(isAllAggsTouched)}),[isAllAggsTouched,setTouched]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(formIsTouched&&!isAllAggsTouched){Object.keys(aggsState).map((function(_ref2){var _ref3=agg_group_slicedToArray(_ref2,1),aggId=_ref3[0];setAggsState({type:AGGS_ACTION_KEYS.TOUCHED,payload:true,aggId:aggId})}))}}),[formIsTouched]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){setValidity("aggGroup__".concat(groupName),isGroupValid)}),[groupName,isGroupValid,setValidity]);var onDragEnd=Object(external_kbnSharedDeps_React_["useCallback"])((function(_ref4){var source=_ref4.source,destination=_ref4.destination;if(source&&destination){reorderAggs(group[source.index],group[destination.index])}}),[reorderAggs,group]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDragDropContext"],{onDragEnd:onDragEnd},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{"data-test-subj":"".concat(groupName,"AggGroup"),paddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,groupNameLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),bucketsError&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormErrorText"],{"data-test-subj":"bucketsError"},bucketsError),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDroppable"],{droppableId:"agg_group_dnd_".concat(groupName)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,group.map((function(agg,index){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDraggable"],{key:agg.id,index:index,draggableId:"agg_group_dnd_".concat(groupName,"_").concat(agg.id),customDragHandle:true},(function(provided){return external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAgg,{agg:agg,aggIndex:index,aggIsTooLow:agg_group_helper_calcAggIsTooLow(agg,index,group,schemas),dragHandleProps:provided.dragHandleProps||null,formIsTouched:aggsState[agg.id]?aggsState[agg.id].touched:false,groupName:groupName,isDraggable:stats.count>1,isLastBucket:groupName===data_public_["AggGroupNames"].Buckets&&index===group.length-1,isRemovable:agg_group_helper_isAggRemovable(agg,group,schemas),isDisabled:agg.schema==="metric"&&isMetricAggregationDisabled,lastParentPipelineAggTitle:lastParentPipelineAggTitle,metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,setStateParamValue:setStateParamValue,onAggTypeChange:onAggTypeChange,onToggleEnableAgg:onToggleEnableAgg,removeAgg:removeAgg,setAggsState:setAggsState,schemas:schemas,timeRange:timeRange})}))})))),stats.max>stats.count&&external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAggAdd,{group:group,groupName:groupName,schemas:schemas,stats:stats,addSchema:addSchema})))}function data_tab_extends(){data_tab_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return data_tab_extends.apply(this,arguments)}function DefaultEditorDataTab(_ref){var dispatch=_ref.dispatch,formIsTouched=_ref.formIsTouched,metricAggs=_ref.metricAggs,schemas=_ref.schemas,state=_ref.state,setTouched=_ref.setTouched,setValidity=_ref.setValidity,setStateValue=_ref.setStateValue,timeRange=_ref.timeRange;var lastParentPipelineAgg=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return Object(external_kbnSharedDeps_Lodash_["findLast"])(metricAggs,(function(_ref2){var type=_ref2.type;return type.subtype===data_public_["search"].aggs.parentPipelineType}))}),[metricAggs]);var lastParentPipelineAggTitle=lastParentPipelineAgg&&lastParentPipelineAgg.type.title;var addSchema=Object(external_kbnSharedDeps_React_["useCallback"])((function(schema){return dispatch(actions_addNewAgg(schema))}),[dispatch]);var onAggRemove=Object(external_kbnSharedDeps_React_["useCallback"])((function(aggId){return dispatch(actions_removeAgg(aggId,schemas.all||[]))}),[dispatch,schemas]);var onReorderAggs=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return dispatch(actions_reorderAggs.apply(void 0,arguments))}),[dispatch]);var onAggParamValueChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return dispatch(actions_setAggParamValue.apply(void 0,arguments))}),[dispatch]);var onAggTypeChange=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return dispatch(actions_changeAggType.apply(void 0,arguments))}),[dispatch]);var onToggleEnableAgg=Object(external_kbnSharedDeps_React_["useCallback"])((function(){return dispatch(actions_toggleEnabledAgg.apply(void 0,arguments))}),[dispatch]);var commonProps={addSchema:addSchema,formIsTouched:formIsTouched,lastParentPipelineAggTitle:lastParentPipelineAggTitle,metricAggs:metricAggs,state:state,reorderAggs:onReorderAggs,setAggParamValue:onAggParamValueChange,setStateParamValue:setStateValue,onAggTypeChange:onAggTypeChange,onToggleEnableAgg:onToggleEnableAgg,setValidity:setValidity,setTouched:setTouched,removeAgg:onAggRemove};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAggGroup,data_tab_extends({groupName:data_public_["AggGroupNames"].Metrics,schemas:schemas.metrics},commonProps)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(DefaultEditorAggGroup,data_tab_extends({groupName:data_public_["AggGroupNames"].Buckets,schemas:schemas.buckets,timeRange:timeRange},commonProps)))}function use_option_tabs_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function use_option_tabs_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){use_option_tabs_ownKeys(Object(source),true).forEach((function(key){use_option_tabs_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{use_option_tabs_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function use_option_tabs_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function use_option_tabs_toConsumableArray(arr){return use_option_tabs_arrayWithoutHoles(arr)||use_option_tabs_iterableToArray(arr)||use_option_tabs_unsupportedIterableToArray(arr)||use_option_tabs_nonIterableSpread()}function use_option_tabs_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_option_tabs_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function use_option_tabs_arrayWithoutHoles(arr){if(Array.isArray(arr))return use_option_tabs_arrayLikeToArray(arr)}function use_option_tabs_slicedToArray(arr,i){return use_option_tabs_arrayWithHoles(arr)||use_option_tabs_iterableToArrayLimit(arr,i)||use_option_tabs_unsupportedIterableToArray(arr,i)||use_option_tabs_nonIterableRest()}function use_option_tabs_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_option_tabs_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_option_tabs_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_option_tabs_arrayLikeToArray(o,minLen)}function use_option_tabs_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function use_option_tabs_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_option_tabs_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var use_option_tabs_useOptionTabs=function useOptionTabs(_ref){var visType=_ref.type;var _useState=Object(external_kbnSharedDeps_React_["useState"])((function(){var tabs=[].concat(use_option_tabs_toConsumableArray(visType.schemas.buckets||visType.schemas.metrics?[{name:"data",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.tabs.dataLabel",{defaultMessage:"Data"}),editor:DefaultEditorDataTab}]:[]),use_option_tabs_toConsumableArray(!visType.editorConfig.optionTabs&&visType.editorConfig.optionsTemplate?[{name:"options",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.tabs.optionsLabel",{defaultMessage:"Options"}),editor:visType.editorConfig.optionsTemplate}]:visType.editorConfig.optionTabs));tabs[0].isSelected=true;return tabs})),_useState2=use_option_tabs_slicedToArray(_useState,2),optionTabs=_useState2[0],setOptionTabs=_useState2[1];var setSelectedTab=Object(external_kbnSharedDeps_React_["useCallback"])((function(name){setOptionTabs((function(tabs){return tabs.map((function(tab){return use_option_tabs_objectSpread(use_option_tabs_objectSpread({},tab),{},{isSelected:tab.name===name})}))}))}),[]);return[optionTabs,setSelectedTab]};function sidebar_extends(){sidebar_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return sidebar_extends.apply(this,arguments)}function sidebar_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function sidebar_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){sidebar_ownKeys(Object(source),true).forEach((function(key){sidebar_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{sidebar_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function sidebar_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function sidebar_slicedToArray(arr,i){return sidebar_arrayWithHoles(arr)||sidebar_iterableToArrayLimit(arr,i)||sidebar_unsupportedIterableToArray(arr,i)||sidebar_nonIterableRest()}function sidebar_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sidebar_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return sidebar_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sidebar_arrayLikeToArray(o,minLen)}function sidebar_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function sidebar_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function sidebar_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function DefaultEditorSideBar(_ref){var embeddableHandler=_ref.embeddableHandler,isCollapsed=_ref.isCollapsed,onClickCollapse=_ref.onClickCollapse,uiState=_ref.uiState,vis=_ref.vis,isLinkedSearch=_ref.isLinkedSearch,eventEmitter=_ref.eventEmitter,savedSearch=_ref.savedSearch,timeRange=_ref.timeRange;var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=sidebar_slicedToArray(_useState,2),isDirty=_useState2[0],setDirty=_useState2[1];var _useEditorReducer=useEditorReducer(vis,eventEmitter),_useEditorReducer2=sidebar_slicedToArray(_useEditorReducer,2),state=_useEditorReducer2[0],dispatch=_useEditorReducer2[1];var _useEditorFormState=useEditorFormState(),formState=_useEditorFormState.formState,setTouched=_useEditorFormState.setTouched,setValidity=_useEditorFormState.setValidity,resetValidity=_useEditorFormState.resetValidity;var _useOptionTabs=use_option_tabs_useOptionTabs(vis),_useOptionTabs2=sidebar_slicedToArray(_useOptionTabs,2),optionTabs=_useOptionTabs2[0],setSelectedTab=_useOptionTabs2[1];var responseAggs=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return state.data.aggs?state.data.aggs.getResponseAggs():[]}),[state.data.aggs]);var metricSchemas=(vis.type.schemas.metrics||[]).map((function(s){return s.name}));var metricAggs=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return responseAggs.filter((function(agg){return agg.schema&&metricSchemas.includes(agg.schema)}))}),[responseAggs,metricSchemas]);var hasHistogramAgg=Object(external_kbnSharedDeps_React_["useMemo"])((function(){return responseAggs.some((function(agg){return agg.type.name==="histogram"}))}),[responseAggs]);var setStateValidity=Object(external_kbnSharedDeps_React_["useCallback"])((function(value){setValidity("visOptions",value)}),[setValidity]);var setStateValue=Object(external_kbnSharedDeps_React_["useCallback"])((function(paramName,value){var shouldUpdate=!Object(external_kbnSharedDeps_Lodash_["isEqual"])(state.params[paramName],value);if(shouldUpdate){dispatch(actions_setStateParamValue(paramName,value))}}),[dispatch,state.params]);var applyChanges=Object(external_kbnSharedDeps_React_["useCallback"])((function(){if(formState.invalid||!isDirty){setTouched(true);return}vis.setState(sidebar_objectSpread(sidebar_objectSpread({},vis.serialize()),{},{params:state.params,data:{aggs:state.data.aggs?state.data.aggs.aggs.map((function(agg){return agg.toJSON()})):[]}}));embeddableHandler.reload();eventEmitter.emit("dirtyStateChange",{isDirty:false});setTouched(false)}),[vis,state,formState.invalid,setTouched,isDirty,eventEmitter,embeddableHandler]);var onSubmit=Object(external_kbnSharedDeps_React_["useCallback"])((function(event){if(event.ctrlKey&&event.key===external_kbnSharedDeps_ElasticEui_["keys"].ENTER){event.preventDefault();event.stopPropagation();applyChanges()}}),[applyChanges]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){var changeHandler=function changeHandler(_ref2){var dirty=_ref2.isDirty;setDirty(dirty);if(!dirty){resetValidity()}};eventEmitter.on("dirtyStateChange",changeHandler);return function(){eventEmitter.off("dirtyStateChange",changeHandler)}}),[resetValidity,eventEmitter]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){var resetHandler=function resetHandler(){return dispatch(actions_discardChanges(vis))};eventEmitter.on("updateEditor",resetHandler);return function(){eventEmitter.off("updateEditor",resetHandler)}}),[dispatch,vis,eventEmitter]);var dataTabProps={dispatch:dispatch,formIsTouched:formState.touched,metricAggs:metricAggs,state:state,schemas:vis.type.schemas,setValidity:setValidity,setTouched:setTouched,setStateValue:setStateValue};var optionTabProps={aggs:state.data.aggs,hasHistogramAgg:hasHistogramAgg,stateParams:state.params,vis:vis,uiState:uiState,setValue:setStateValue,setValidity:setStateValidity,setTouched:setTouched};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"visEditorSidebar",direction:"column",justifyContent:"spaceBetween",gutterSize:"none",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"visEditorSidebar__formWrapper"},external_kbnSharedDeps_React_default.a.createElement("form",{className:"visEditorSidebar__form",name:"visualizeEditor",onKeyDownCapture:onSubmit},vis.type.requiresSearch&&external_kbnSharedDeps_React_default.a.createElement(SidebarTitle,{isLinkedSearch:isLinkedSearch,savedSearch:savedSearch,vis:vis,eventEmitter:eventEmitter}),optionTabs.length>1&&external_kbnSharedDeps_React_default.a.createElement(DefaultEditorNavBar,{optionTabs:optionTabs,setSelectedTab:setSelectedTab}),optionTabs.map((function(_ref3){var Editor=_ref3.editor,name=_ref3.name,_ref3$isSelected=_ref3.isSelected,isSelected=_ref3$isSelected===void 0?false:_ref3$isSelected;return external_kbnSharedDeps_React_default.a.createElement("div",{key:name,className:"visEditorSidebar__config ".concat(isSelected?"":"visEditorSidebar__config-isHidden")},external_kbnSharedDeps_React_default.a.createElement(Editor,sidebar_extends({isTabSelected:isSelected},name==="data"?dataTabProps:optionTabProps,{timeRange:timeRange})))})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(DefaultEditorControls,{applyChanges:applyChanges,dispatch:dispatch,isDirty:isDirty,isTouched:formState.touched,isInvalid:formState.invalid,vis:vis}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-expanded":!isCollapsed,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visDefaultEditor.sidebar.collapseButtonAriaLabel",{defaultMessage:"Toggle sidebar"}),className:"visEditor__collapsibleSidebarButton","data-test-subj":"collapseSideBarButton",color:"text",iconType:isCollapsed?"menuLeft":"menuRight",onClick:onClickCollapse}))}var editor_size=__webpack_require__(10);function default_editor_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function default_editor_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){default_editor_ownKeys(Object(source),true).forEach((function(key){default_editor_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{default_editor_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function default_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function default_editor_slicedToArray(arr,i){return default_editor_arrayWithHoles(arr)||default_editor_iterableToArrayLimit(arr,i)||default_editor_unsupportedIterableToArray(arr,i)||default_editor_nonIterableRest()}function default_editor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function default_editor_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return default_editor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return default_editor_arrayLikeToArray(o,minLen)}function default_editor_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function default_editor_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function default_editor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var localStorage=new kibanaUtils_public_["Storage"](window.localStorage);function DefaultEditor(_ref){var core=_ref.core,data=_ref.data,vis=_ref.vis,uiState=_ref.uiState,timeRange=_ref.timeRange,filters=_ref.filters,query=_ref.query,embeddableHandler=_ref.embeddableHandler,eventEmitter=_ref.eventEmitter,linked=_ref.linked,savedSearch=_ref.savedSearch;var visRef=Object(external_kbnSharedDeps_React_["useRef"])(null);var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=default_editor_slicedToArray(_useState,2),isCollapsed=_useState2[0],setIsCollapsed=_useState2[1];var onClickCollapse=Object(external_kbnSharedDeps_React_["useCallback"])((function(){setIsCollapsed((function(value){return!value}))}),[]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){if(!visRef.current){return}embeddableHandler.render(visRef.current);setTimeout((function(){eventEmitter.emit("embeddableRendered")}));return function(){return embeddableHandler.destroy()}}),[embeddableHandler,eventEmitter]);Object(external_kbnSharedDeps_React_["useEffect"])((function(){embeddableHandler.updateInput({timeRange:timeRange,filters:filters,query:query})}),[embeddableHandler,timeRange,filters,query]);var editorInitialWidth=Object(editor_size["b"])(vis.type.editorConfig.defaultSize);return external_kbnSharedDeps_React_default.a.createElement(core.i18n.Context,null,external_kbnSharedDeps_React_default.a.createElement(public_["KibanaContextProvider"],{services:default_editor_objectSpread({appName:"vis_default_editor",storage:localStorage,data:data},core)},external_kbnSharedDeps_React_default.a.createElement(public_["PanelsContainer"],{className:"visEditor--default",resizerClassName:"visEditor__resizer ".concat(isCollapsed?"visEditor__resizer-isHidden":"")},external_kbnSharedDeps_React_default.a.createElement(public_["Panel"],{className:"visEditor__visualization",initialWidth:100-editorInitialWidth},external_kbnSharedDeps_React_default.a.createElement("div",{className:"visEditor__canvas",ref:visRef,"data-shared-items-container":true})),external_kbnSharedDeps_React_default.a.createElement(public_["Panel"],{className:"visEditor__collapsibleSidebar ".concat(isCollapsed?"visEditor__collapsibleSidebar-isClosed":""),initialWidth:editorInitialWidth},external_kbnSharedDeps_React_default.a.createElement(DefaultEditorSideBar,{embeddableHandler:embeddableHandler,isCollapsed:isCollapsed,onClickCollapse:onClickCollapse,vis:vis,uiState:uiState,isLinkedSearch:linked,savedSearch:savedSearch,timeRange:timeRange,eventEmitter:eventEmitter})))))}},53:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(54);case"v7light":return __webpack_require__(56);case"v8dark":return __webpack_require__(58);case"v8light":return __webpack_require__(60)}},54:function(module,exports,__webpack_require__){var api=__webpack_require__(31);var content=__webpack_require__(55);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},55:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(32);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'.visEditor--default {\n  flex: 1 1 auto;\n  display: flex; }\n  @media only screen and (max-width: 574px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor--default {\n      flex-direction: column; } }\n\n/**\n * Collapsible sidebar container\n */\n.visEditor__collapsibleSidebar {\n  background: #25262E;\n  min-width: 350px;\n  max-width: 100%;\n  position: relative;\n  flex-shrink: 0; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n\n.visEditor__collapsibleSidebar-isClosed {\n  min-width: 0;\n  width: 32px !important; }\n  .visEditor__collapsibleSidebar-isClosed .visEditorSidebar {\n    display: none; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n\n.visEditor__collapsibleSidebarButton {\n  position: absolute;\n  right: 4px;\n  top: 8px; }\n\n/**\n * Resizer\n */\n.visEditor__resizer {\n  position: relative;\n  display: flex;\n  flex: 0 0 12px;\n  background-color: #1a1b20;\n  align-items: center;\n  justify-content: center;\n  margin: 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  width: 12px; }\n  .visEditor__resizer:hover {\n    background-color: #0b4462; }\n  .visEditor__resizer:focus, .visEditor__resizer.active {\n    background-color: #1BA9F5;\n    color: #1D1E24; }\n  .visEditor__resizer::after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: ew-resize; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__resizer {\n      display: none; } }\n\n.visEditor__resizer-isHidden {\n  display: none; }\n\n/**\n * Canvas area\n */\n.visEditor__visualization {\n  display: flex;\n  flex: 1 1 auto;\n  overflow: hidden; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n\n.visEditor__canvas {\n  background-color: #1D1E24;\n  display: flex;\n  flex-direction: row;\n  overflow: auto;\n  flex-shrink: 1;\n  flex-basis: 100%; }\n  .visEditor__canvas.embedded {\n    flex-shrink: 1;\n    flex-basis: 100%; }\n  .visEditor__canvas .visualize {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 100%; }\n  .visEditor__canvas .visChart {\n    position: relative; }\n\n.visEditorSidebar {\n  min-width: 350px; }\n  .visEditorSidebar > .visEditorSidebar__formWrapper {\n    flex-basis: auto; }\n\n.visEditorSidebar__form {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  max-width: 100%; }\n  .visEditorSidebar__form > * {\n    flex-shrink: 0; }\n\n.visEditorSidebar__config {\n  padding: 8px; }\n  .visEditorSidebar__config > * {\n    flex-grow: 0; }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(152, 162, 179, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(152, 162, 179, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n\n.visEditorSidebar__config-isHidden {\n  display: none; }\n\n.visEditorSidebar__titleContainer {\n  padding: 8px 32px 8px 8px; }\n\n.visEditorSidebar__indexPatternPlaceholder {\n  min-height: 40px;\n  border-bottom: 1px solid #343741; }\n\n.visEditorSidebar__nav,\n.visEditorSidebar__linkedSearch {\n  flex-grow: 0; }\n\n.visEditorSidebar__section {\n  background-color: #1D1E24;\n  padding: 8px;\n  border-radius: 4px; }\n  .visEditorSidebar__section + .visEditorSidebar__section {\n    margin-top: 8px; }\n\n.visEditorSidebar__collapsible {\n  background-color: #25262E; }\n\n.visEditorSidebar__collapsible--marginBottom {\n  margin-bottom: 12px; }\n\n.visEditorSidebar__formRow {\n  display: flex;\n  align-items: center;\n  margin-top: 12px; }\n\n.visEditorSidebar__formLabel {\n  display: flex;\n  align-items: center;\n  flex: 1 1 40%;\n  padding-right: 4px; }\n\n.visEditorSidebar__formControl {\n  display: flex;\n  align-items: center;\n  flex: 1 1 60%; }\n\n.visEditorSidebar__aggGroupAccordionButtonContent {\n  font-size: 14px; }\n  .visEditorSidebar__aggGroupAccordionButtonContent span {\n    color: #98A2B3; }\n\n.visEditorSidebar__controls {\n  border-top: 1px solid #343741;\n  padding: 8px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center; }\n  .visEditorSidebar__controls .visEditorSidebar__autoApplyButton {\n    margin-left: 12px; }\n\n.visEditorAgg__subAgg {\n  border: 2px solid #343741;\n  border-radius: 4px;\n  background-color: transparent;\n  padding: 8px; }\n\n.visEditorAgg__subAgg + .visEditorAggParam__string {\n  margin-top: 16px; }\n\n.visEditorAggParam--half {\n  margin: 16px 0;\n  display: inline-block;\n  width: calc(50% - 4px); }\n\n.visEditorAggParam--half-size {\n  margin-left: 8px; }\n',""]);module.exports=exports},56:function(module,exports,__webpack_require__){var api=__webpack_require__(31);var content=__webpack_require__(57);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},57:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(32);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'.visEditor--default {\n  flex: 1 1 auto;\n  display: flex; }\n  @media only screen and (max-width: 574px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor--default {\n      flex-direction: column; } }\n\n/**\n * Collapsible sidebar container\n */\n.visEditor__collapsibleSidebar {\n  background: #F5F7FA;\n  min-width: 350px;\n  max-width: 100%;\n  position: relative;\n  flex-shrink: 0; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n\n.visEditor__collapsibleSidebar-isClosed {\n  min-width: 0;\n  width: 32px !important; }\n  .visEditor__collapsibleSidebar-isClosed .visEditorSidebar {\n    display: none; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n\n.visEditor__collapsibleSidebarButton {\n  position: absolute;\n  right: 4px;\n  top: 8px; }\n\n/**\n * Resizer\n */\n.visEditor__resizer {\n  position: relative;\n  display: flex;\n  flex: 0 0 12px;\n  background-color: #fafbfd;\n  align-items: center;\n  justify-content: center;\n  margin: 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  width: 12px; }\n  .visEditor__resizer:hover {\n    background-color: #cce1f0; }\n  .visEditor__resizer:focus, .visEditor__resizer.active {\n    background-color: #006BB4;\n    color: #FFF; }\n  .visEditor__resizer::after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: ew-resize; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__resizer {\n      display: none; } }\n\n.visEditor__resizer-isHidden {\n  display: none; }\n\n/**\n * Canvas area\n */\n.visEditor__visualization {\n  display: flex;\n  flex: 1 1 auto;\n  overflow: hidden; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n\n.visEditor__canvas {\n  background-color: #FFF;\n  display: flex;\n  flex-direction: row;\n  overflow: auto;\n  flex-shrink: 1;\n  flex-basis: 100%; }\n  .visEditor__canvas.embedded {\n    flex-shrink: 1;\n    flex-basis: 100%; }\n  .visEditor__canvas .visualize {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 100%; }\n  .visEditor__canvas .visChart {\n    position: relative; }\n\n.visEditorSidebar {\n  min-width: 350px; }\n  .visEditorSidebar > .visEditorSidebar__formWrapper {\n    flex-basis: auto; }\n\n.visEditorSidebar__form {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  max-width: 100%; }\n  .visEditorSidebar__form > * {\n    flex-shrink: 0; }\n\n.visEditorSidebar__config {\n  padding: 8px; }\n  .visEditorSidebar__config > * {\n    flex-grow: 0; }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(105, 112, 125, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(105, 112, 125, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n\n.visEditorSidebar__config-isHidden {\n  display: none; }\n\n.visEditorSidebar__titleContainer {\n  padding: 8px 32px 8px 8px; }\n\n.visEditorSidebar__indexPatternPlaceholder {\n  min-height: 40px;\n  border-bottom: 1px solid #D3DAE6; }\n\n.visEditorSidebar__nav,\n.visEditorSidebar__linkedSearch {\n  flex-grow: 0; }\n\n.visEditorSidebar__section {\n  background-color: #FFF;\n  padding: 8px;\n  border-radius: 4px; }\n  .visEditorSidebar__section + .visEditorSidebar__section {\n    margin-top: 8px; }\n\n.visEditorSidebar__collapsible {\n  background-color: #fafbfd; }\n\n.visEditorSidebar__collapsible--marginBottom {\n  margin-bottom: 12px; }\n\n.visEditorSidebar__formRow {\n  display: flex;\n  align-items: center;\n  margin-top: 12px; }\n\n.visEditorSidebar__formLabel {\n  display: flex;\n  align-items: center;\n  flex: 1 1 40%;\n  padding-right: 4px; }\n\n.visEditorSidebar__formControl {\n  display: flex;\n  align-items: center;\n  flex: 1 1 60%; }\n\n.visEditorSidebar__aggGroupAccordionButtonContent {\n  font-size: 14px; }\n  .visEditorSidebar__aggGroupAccordionButtonContent span {\n    color: #69707D; }\n\n.visEditorSidebar__controls {\n  border-top: 1px solid #D3DAE6;\n  padding: 8px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center; }\n  .visEditorSidebar__controls .visEditorSidebar__autoApplyButton {\n    margin-left: 12px; }\n\n.visEditorAgg__subAgg {\n  border: 2px solid #D3DAE6;\n  border-radius: 4px;\n  background-color: transparent;\n  padding: 8px; }\n\n.visEditorAgg__subAgg + .visEditorAggParam__string {\n  margin-top: 16px; }\n\n.visEditorAggParam--half {\n  margin: 16px 0;\n  display: inline-block;\n  width: calc(50% - 4px); }\n\n.visEditorAggParam--half-size {\n  margin-left: 8px; }\n',""]);module.exports=exports},58:function(module,exports,__webpack_require__){var api=__webpack_require__(31);var content=__webpack_require__(59);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},59:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(32);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'.visEditor--default {\n  flex: 1 1 auto;\n  display: flex; }\n  @media only screen and (max-width: 574px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor--default {\n      flex-direction: column; } }\n\n/**\n * Collapsible sidebar container\n */\n.visEditor__collapsibleSidebar {\n  background: #25262E;\n  min-width: 350px;\n  max-width: 100%;\n  position: relative;\n  flex-shrink: 0; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n\n.visEditor__collapsibleSidebar-isClosed {\n  min-width: 0;\n  width: 32px !important; }\n  .visEditor__collapsibleSidebar-isClosed .visEditorSidebar {\n    display: none; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n\n.visEditor__collapsibleSidebarButton {\n  position: absolute;\n  right: 4px;\n  top: 8px; }\n\n/**\n * Resizer\n */\n.visEditor__resizer {\n  position: relative;\n  display: flex;\n  flex: 0 0 12px;\n  background-color: #1a1b20;\n  align-items: center;\n  justify-content: center;\n  margin: 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  width: 12px; }\n  .visEditor__resizer:hover {\n    background-color: #0e3866; }\n  .visEditor__resizer:focus, .visEditor__resizer.active {\n    background-color: #238CFF;\n    color: #1D1E24; }\n  .visEditor__resizer::after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: ew-resize; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__resizer {\n      display: none; } }\n\n.visEditor__resizer-isHidden {\n  display: none; }\n\n/**\n * Canvas area\n */\n.visEditor__visualization {\n  display: flex;\n  flex: 1 1 auto;\n  overflow: hidden; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n\n.visEditor__canvas {\n  background-color: #1D1E24;\n  display: flex;\n  flex-direction: row;\n  overflow: auto;\n  flex-shrink: 1;\n  flex-basis: 100%; }\n  .visEditor__canvas.embedded {\n    flex-shrink: 1;\n    flex-basis: 100%; }\n  .visEditor__canvas .visualize {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 100%; }\n  .visEditor__canvas .visChart {\n    position: relative; }\n\n.visEditorSidebar {\n  min-width: 350px; }\n  .visEditorSidebar > .visEditorSidebar__formWrapper {\n    flex-basis: auto; }\n\n.visEditorSidebar__form {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  max-width: 100%; }\n  .visEditorSidebar__form > * {\n    flex-shrink: 0; }\n\n.visEditorSidebar__config {\n  padding: 8px; }\n  .visEditorSidebar__config > * {\n    flex-grow: 0; }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(152, 162, 179, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(152, 162, 179, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n\n.visEditorSidebar__config-isHidden {\n  display: none; }\n\n.visEditorSidebar__titleContainer {\n  padding: 8px 32px 8px 8px; }\n\n.visEditorSidebar__indexPatternPlaceholder {\n  min-height: 40px;\n  border-bottom: 1px solid #343741; }\n\n.visEditorSidebar__nav,\n.visEditorSidebar__linkedSearch {\n  flex-grow: 0; }\n\n.visEditorSidebar__section {\n  background-color: #1D1E24;\n  padding: 8px;\n  border-radius: 6px; }\n  .visEditorSidebar__section + .visEditorSidebar__section {\n    margin-top: 8px; }\n\n.visEditorSidebar__collapsible {\n  background-color: #25262E; }\n\n.visEditorSidebar__collapsible--marginBottom {\n  margin-bottom: 12px; }\n\n.visEditorSidebar__formRow {\n  display: flex;\n  align-items: center;\n  margin-top: 12px; }\n\n.visEditorSidebar__formLabel {\n  display: flex;\n  align-items: center;\n  flex: 1 1 40%;\n  padding-right: 4px; }\n\n.visEditorSidebar__formControl {\n  display: flex;\n  align-items: center;\n  flex: 1 1 60%; }\n\n.visEditorSidebar__aggGroupAccordionButtonContent {\n  font-size: 14px; }\n  .visEditorSidebar__aggGroupAccordionButtonContent span {\n    color: #98A2B3; }\n\n.visEditorSidebar__controls {\n  border-top: 1px solid #343741;\n  padding: 8px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center; }\n  .visEditorSidebar__controls .visEditorSidebar__autoApplyButton {\n    margin-left: 12px; }\n\n.visEditorAgg__subAgg {\n  border: 2px solid #343741;\n  border-radius: 6px;\n  background-color: transparent;\n  padding: 8px; }\n\n.visEditorAgg__subAgg + .visEditorAggParam__string {\n  margin-top: 16px; }\n\n.visEditorAggParam--half {\n  margin: 16px 0;\n  display: inline-block;\n  width: calc(50% - 4px); }\n\n.visEditorAggParam--half-size {\n  margin-left: 8px; }\n',""]);module.exports=exports},60:function(module,exports,__webpack_require__){var api=__webpack_require__(31);var content=__webpack_require__(61);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},61:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(32);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'.visEditor--default {\n  flex: 1 1 auto;\n  display: flex; }\n  @media only screen and (max-width: 574px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor--default {\n      flex-direction: column; } }\n\n/**\n * Collapsible sidebar container\n */\n.visEditor__collapsibleSidebar {\n  background: #F5F7FA;\n  min-width: 350px;\n  max-width: 100%;\n  position: relative;\n  flex-shrink: 0; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n\n.visEditor__collapsibleSidebar-isClosed {\n  min-width: 0;\n  width: 32px !important; }\n  .visEditor__collapsibleSidebar-isClosed .visEditorSidebar {\n    display: none; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n\n.visEditor__collapsibleSidebarButton {\n  position: absolute;\n  right: 4px;\n  top: 8px; }\n\n/**\n * Resizer\n */\n.visEditor__resizer {\n  position: relative;\n  display: flex;\n  flex: 0 0 12px;\n  background-color: #fafbfd;\n  align-items: center;\n  justify-content: center;\n  margin: 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  width: 12px; }\n  .visEditor__resizer:hover {\n    background-color: #cce2fa; }\n  .visEditor__resizer:focus, .visEditor__resizer.active {\n    background-color: #006DE4;\n    color: #FFF; }\n  .visEditor__resizer::after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: ew-resize; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__resizer {\n      display: none; } }\n\n.visEditor__resizer-isHidden {\n  display: none; }\n\n/**\n * Canvas area\n */\n.visEditor__visualization {\n  display: flex;\n  flex: 1 1 auto;\n  overflow: hidden; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n\n.visEditor__canvas {\n  background-color: #FFF;\n  display: flex;\n  flex-direction: row;\n  overflow: auto;\n  flex-shrink: 1;\n  flex-basis: 100%; }\n  .visEditor__canvas.embedded {\n    flex-shrink: 1;\n    flex-basis: 100%; }\n  .visEditor__canvas .visualize {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 100%; }\n  .visEditor__canvas .visChart {\n    position: relative; }\n\n.visEditorSidebar {\n  min-width: 350px; }\n  .visEditorSidebar > .visEditorSidebar__formWrapper {\n    flex-basis: auto; }\n\n.visEditorSidebar__form {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  max-width: 100%; }\n  .visEditorSidebar__form > * {\n    flex-shrink: 0; }\n\n.visEditorSidebar__config {\n  padding: 8px; }\n  .visEditorSidebar__config > * {\n    flex-grow: 0; }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(105, 112, 125, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(105, 112, 125, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n\n.visEditorSidebar__config-isHidden {\n  display: none; }\n\n.visEditorSidebar__titleContainer {\n  padding: 8px 32px 8px 8px; }\n\n.visEditorSidebar__indexPatternPlaceholder {\n  min-height: 40px;\n  border-bottom: 1px solid #D3DAE6; }\n\n.visEditorSidebar__nav,\n.visEditorSidebar__linkedSearch {\n  flex-grow: 0; }\n\n.visEditorSidebar__section {\n  background-color: #FFF;\n  padding: 8px;\n  border-radius: 6px; }\n  .visEditorSidebar__section + .visEditorSidebar__section {\n    margin-top: 8px; }\n\n.visEditorSidebar__collapsible {\n  background-color: #fafbfd; }\n\n.visEditorSidebar__collapsible--marginBottom {\n  margin-bottom: 12px; }\n\n.visEditorSidebar__formRow {\n  display: flex;\n  align-items: center;\n  margin-top: 12px; }\n\n.visEditorSidebar__formLabel {\n  display: flex;\n  align-items: center;\n  flex: 1 1 40%;\n  padding-right: 4px; }\n\n.visEditorSidebar__formControl {\n  display: flex;\n  align-items: center;\n  flex: 1 1 60%; }\n\n.visEditorSidebar__aggGroupAccordionButtonContent {\n  font-size: 14px; }\n  .visEditorSidebar__aggGroupAccordionButtonContent span {\n    color: #69707D; }\n\n.visEditorSidebar__controls {\n  border-top: 1px solid #D3DAE6;\n  padding: 8px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center; }\n  .visEditorSidebar__controls .visEditorSidebar__autoApplyButton {\n    margin-left: 12px; }\n\n.visEditorAgg__subAgg {\n  border: 2px solid #D3DAE6;\n  border-radius: 6px;\n  background-color: transparent;\n  padding: 8px; }\n\n.visEditorAgg__subAgg + .visEditorAggParam__string {\n  margin-top: 16px; }\n\n.visEditorAggParam--half {\n  margin: 16px 0;\n  display: inline-block;\n  width: calc(50% - 4px); }\n\n.visEditorAggParam--half-size {\n  margin-left: 8px; }\n',""]);module.exports=exports}}]);