(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=25)})([function(module,__webpack_exports__,__webpack_require__){"use strict";var _trigger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15);var _trigger__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_trigger__WEBPACK_IMPORTED_MODULE_0__);if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"APPLY_FILTER_TRIGGER"))__webpack_require__.d(__webpack_exports__,"APPLY_FILTER_TRIGGER",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["APPLY_FILTER_TRIGGER"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"SELECT_RANGE_TRIGGER"))__webpack_require__.d(__webpack_exports__,"SELECT_RANGE_TRIGGER",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["SELECT_RANGE_TRIGGER"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"Trigger"))__webpack_require__.d(__webpack_exports__,"Trigger",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["Trigger"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"TriggerContext"))__webpack_require__.d(__webpack_exports__,"TriggerContext",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["TriggerContext"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"VALUE_CLICK_TRIGGER"))__webpack_require__.d(__webpack_exports__,"VALUE_CLICK_TRIGGER",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["VALUE_CLICK_TRIGGER"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"VISUALIZE_FIELD_TRIGGER"))__webpack_require__.d(__webpack_exports__,"VISUALIZE_FIELD_TRIGGER",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["VISUALIZE_FIELD_TRIGGER"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"VISUALIZE_GEO_FIELD_TRIGGER"))__webpack_require__.d(__webpack_exports__,"VISUALIZE_GEO_FIELD_TRIGGER",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["VISUALIZE_GEO_FIELD_TRIGGER"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"applyFilterTrigger"))__webpack_require__.d(__webpack_exports__,"applyFilterTrigger",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["applyFilterTrigger"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"selectRangeTrigger"))__webpack_require__.d(__webpack_exports__,"selectRangeTrigger",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["selectRangeTrigger"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"valueClickTrigger"))__webpack_require__.d(__webpack_exports__,"valueClickTrigger",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["valueClickTrigger"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"visualizeFieldTrigger"))__webpack_require__.d(__webpack_exports__,"visualizeFieldTrigger",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["visualizeFieldTrigger"]}));if(__webpack_require__.o(_trigger__WEBPACK_IMPORTED_MODULE_0__,"visualizeGeoFieldTrigger"))__webpack_require__.d(__webpack_exports__,"visualizeGeoFieldTrigger",(function(){return _trigger__WEBPACK_IMPORTED_MODULE_0__["visualizeGeoFieldTrigger"]}));var _trigger_contract__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5);var _trigger_internal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4);var _select_range_trigger__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(16);__webpack_require__.d(__webpack_exports__,"SELECT_RANGE_TRIGGER",(function(){return _select_range_trigger__WEBPACK_IMPORTED_MODULE_3__["a"]}));__webpack_require__.d(__webpack_exports__,"selectRangeTrigger",(function(){return _select_range_trigger__WEBPACK_IMPORTED_MODULE_3__["b"]}));var _value_click_trigger__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17);__webpack_require__.d(__webpack_exports__,"VALUE_CLICK_TRIGGER",(function(){return _value_click_trigger__WEBPACK_IMPORTED_MODULE_4__["a"]}));__webpack_require__.d(__webpack_exports__,"valueClickTrigger",(function(){return _value_click_trigger__WEBPACK_IMPORTED_MODULE_4__["b"]}));var _apply_filter_trigger__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(18);__webpack_require__.d(__webpack_exports__,"APPLY_FILTER_TRIGGER",(function(){return _apply_filter_trigger__WEBPACK_IMPORTED_MODULE_5__["a"]}));__webpack_require__.d(__webpack_exports__,"applyFilterTrigger",(function(){return _apply_filter_trigger__WEBPACK_IMPORTED_MODULE_5__["b"]}));var _visualize_field_trigger__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(19);__webpack_require__.d(__webpack_exports__,"VISUALIZE_FIELD_TRIGGER",(function(){return _visualize_field_trigger__WEBPACK_IMPORTED_MODULE_6__["a"]}));__webpack_require__.d(__webpack_exports__,"visualizeFieldTrigger",(function(){return _visualize_field_trigger__WEBPACK_IMPORTED_MODULE_6__["b"]}));var _visualize_geo_field_trigger__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(20);__webpack_require__.d(__webpack_exports__,"VISUALIZE_GEO_FIELD_TRIGGER",(function(){return _visualize_geo_field_trigger__WEBPACK_IMPORTED_MODULE_7__["a"]}));__webpack_require__.d(__webpack_exports__,"visualizeGeoFieldTrigger",(function(){return _visualize_geo_field_trigger__WEBPACK_IMPORTED_MODULE_7__["b"]}));var _default_trigger__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(21)},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){"use strict";var _action__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11);var _action__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_action__WEBPACK_IMPORTED_MODULE_0__);if(__webpack_require__.o(_action__WEBPACK_IMPORTED_MODULE_0__,"Action"))__webpack_require__.d(__webpack_exports__,"Action",(function(){return _action__WEBPACK_IMPORTED_MODULE_0__["Action"]}));if(__webpack_require__.o(_action__WEBPACK_IMPORTED_MODULE_0__,"ActionByType"))__webpack_require__.d(__webpack_exports__,"ActionByType",(function(){return _action__WEBPACK_IMPORTED_MODULE_0__["ActionByType"]}));if(__webpack_require__.o(_action__WEBPACK_IMPORTED_MODULE_0__,"ActionDefinition"))__webpack_require__.d(__webpack_exports__,"ActionDefinition",(function(){return _action__WEBPACK_IMPORTED_MODULE_0__["ActionDefinition"]}));if(__webpack_require__.o(_action__WEBPACK_IMPORTED_MODULE_0__,"ActionDefinitionByType"))__webpack_require__.d(__webpack_exports__,"ActionDefinitionByType",(function(){return _action__WEBPACK_IMPORTED_MODULE_0__["ActionDefinitionByType"]}));if(__webpack_require__.o(_action__WEBPACK_IMPORTED_MODULE_0__,"ActionExecutionContext"))__webpack_require__.d(__webpack_exports__,"ActionExecutionContext",(function(){return _action__WEBPACK_IMPORTED_MODULE_0__["ActionExecutionContext"]}));if(__webpack_require__.o(_action__WEBPACK_IMPORTED_MODULE_0__,"ActionExecutionMeta"))__webpack_require__.d(__webpack_exports__,"ActionExecutionMeta",(function(){return _action__WEBPACK_IMPORTED_MODULE_0__["ActionExecutionMeta"]}));if(__webpack_require__.o(_action__WEBPACK_IMPORTED_MODULE_0__,"ActionInternal"))__webpack_require__.d(__webpack_exports__,"ActionInternal",(function(){return _action__WEBPACK_IMPORTED_MODULE_0__["ActionInternal"]}));if(__webpack_require__.o(_action__WEBPACK_IMPORTED_MODULE_0__,"IncompatibleActionError"))__webpack_require__.d(__webpack_exports__,"IncompatibleActionError",(function(){return _action__WEBPACK_IMPORTED_MODULE_0__["IncompatibleActionError"]}));if(__webpack_require__.o(_action__WEBPACK_IMPORTED_MODULE_0__,"createAction"))__webpack_require__.d(__webpack_exports__,"createAction",(function(){return _action__WEBPACK_IMPORTED_MODULE_0__["createAction"]}));var _action_internal__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(12);__webpack_require__.d(__webpack_exports__,"ActionInternal",(function(){return _action_internal__WEBPACK_IMPORTED_MODULE_1__["a"]}));var _create_action__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13);__webpack_require__.d(__webpack_exports__,"createAction",(function(){return _create_action__WEBPACK_IMPORTED_MODULE_2__["a"]}));var _incompatible_action_error__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14);__webpack_require__.d(__webpack_exports__,"IncompatibleActionError",(function(){return _incompatible_action_error__WEBPACK_IMPORTED_MODULE_3__["a"]}))},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TriggerInternal}));var _trigger_contract__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TriggerInternal=function(){function TriggerInternal(service,trigger){_classCallCheck(this,TriggerInternal);this.service=service;this.trigger=trigger;_defineProperty(this,"contract",new _trigger_contract__WEBPACK_IMPORTED_MODULE_0__["a"](this))}_createClass(TriggerInternal,[{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){var _this=this;var triggerId,actions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:triggerId=this.trigger.id;_context.next=3;return this.service.getTriggerCompatibleActions(triggerId,context);case 3:actions=_context.sent;_context.next=6;return Promise.all([actions.map((function(action){return _this.service.executionService.execute({action:action,context:context,trigger:_this.trigger})}))]);case 6:case"end":return _context.stop()}}}),_callee,this)})));function execute(_x){return _execute.apply(this,arguments)}return execute}()}]);return TriggerInternal}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TriggerContract}));function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TriggerContract=function TriggerContract(internal){var _this=this;_classCallCheck(this,TriggerContract);this.internal=internal;_defineProperty(this,"id",void 0);_defineProperty(this,"title",void 0);_defineProperty(this,"description",void 0);_defineProperty(this,"exec",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.internal.execute(context);case 2:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());this.id=this.internal.trigger.id;this.title=this.internal.trigger.title;this.description=this.internal.trigger.description}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,__webpack_exports__,__webpack_require__){"use strict";var _presentable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(22);var _presentable__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_presentable__WEBPACK_IMPORTED_MODULE_0__);if(__webpack_require__.o(_presentable__WEBPACK_IMPORTED_MODULE_0__,"Presentable"))__webpack_require__.d(__webpack_exports__,"Presentable",(function(){return _presentable__WEBPACK_IMPORTED_MODULE_0__["Presentable"]}));if(__webpack_require__.o(_presentable__WEBPACK_IMPORTED_MODULE_0__,"PresentableGrouping"))__webpack_require__.d(__webpack_exports__,"PresentableGrouping",(function(){return _presentable__WEBPACK_IMPORTED_MODULE_0__["PresentableGrouping"]}))},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ActionInternal}));var _kibana_react_public__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);var _kibana_react_public__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kibana_react_public__WEBPACK_IMPORTED_MODULE_0__);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ActionInternal=function(){function ActionInternal(definition){_classCallCheck(this,ActionInternal);this.definition=definition;_defineProperty(this,"id",this.definition.id);_defineProperty(this,"type",this.definition.type||"");_defineProperty(this,"order",this.definition.order||0);_defineProperty(this,"MenuItem",this.definition.MenuItem);_defineProperty(this,"ReactMenuItem",this.MenuItem?Object(_kibana_react_public__WEBPACK_IMPORTED_MODULE_0__["uiToReactComponent"])(this.MenuItem):undefined);_defineProperty(this,"grouping",this.definition.grouping)}_createClass(ActionInternal,[{key:"execute",value:function execute(context){return this.definition.execute(context)}},{key:"getIconType",value:function getIconType(context){if(!this.definition.getIconType)return undefined;return this.definition.getIconType(context)}},{key:"getDisplayName",value:function getDisplayName(context){if(!this.definition.getDisplayName)return"Action: ".concat(this.id);return this.definition.getDisplayName(context)}},{key:"getDisplayNameTooltip",value:function getDisplayNameTooltip(context){if(!this.definition.getDisplayNameTooltip)return"";return this.definition.getDisplayNameTooltip(context)}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.definition.isCompatible){_context.next=2;break}return _context.abrupt("return",true);case 2:_context.next=4;return this.definition.isCompatible(context);case 4:return _context.abrupt("return",_context.sent);case 5:case"end":return _context.stop()}}}),_callee,this)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"getHref",value:function(){var _getHref=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(this.definition.getHref){_context2.next=2;break}return _context2.abrupt("return",undefined);case 2:_context2.next=4;return this.definition.getHref(context);case 4:return _context2.abrupt("return",_context2.sent);case 5:case"end":return _context2.stop()}}}),_callee2,this)})));function getHref(_x2){return _getHref.apply(this,arguments)}return getHref}()},{key:"shouldAutoExecute",value:function(){var _shouldAutoExecute=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(context){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(this.definition.shouldAutoExecute){_context3.next=2;break}return _context3.abrupt("return",false);case 2:return _context3.abrupt("return",this.definition.shouldAutoExecute(context));case 3:case"end":return _context3.stop()}}}),_callee3,this)})));function shouldAutoExecute(_x3){return _shouldAutoExecute.apply(this,arguments)}return shouldAutoExecute}()}]);return ActionInternal}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createAction}));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createAction(action){return _objectSpread({getIconType:function getIconType(){return undefined},order:0,id:action.type,isCompatible:function isCompatible(){return Promise.resolve(true)},getDisplayName:function getDisplayName(){return""}},action)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return IncompatibleActionError}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IncompatibleActionError=function(_Error){_inherits(IncompatibleActionError,_Error);var _super=_createSuper(IncompatibleActionError);function IncompatibleActionError(){var _this;_classCallCheck(this,IncompatibleActionError);_this=_super.call(this,_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("uiActions.errors.incompatibleAction",{defaultMessage:"Action is incompatible"}));_defineProperty(_assertThisInitialized(_this),"code","INCOMPATIBLE_ACTION");return _this}return IncompatibleActionError}(_wrapNativeSuper(Error))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SELECT_RANGE_TRIGGER}));__webpack_require__.d(__webpack_exports__,"b",(function(){return selectRangeTrigger}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var SELECT_RANGE_TRIGGER="SELECT_RANGE_TRIGGER";var selectRangeTrigger={id:SELECT_RANGE_TRIGGER,title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("uiActions.triggers.selectRangeTitle",{defaultMessage:"Range selection"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("uiActions.triggers.selectRangeDescription",{defaultMessage:"A range of values on the visualization"})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VALUE_CLICK_TRIGGER}));__webpack_require__.d(__webpack_exports__,"b",(function(){return valueClickTrigger}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var VALUE_CLICK_TRIGGER="VALUE_CLICK_TRIGGER";var valueClickTrigger={id:VALUE_CLICK_TRIGGER,title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("uiActions.triggers.valueClickTitle",{defaultMessage:"Single click"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("uiActions.triggers.valueClickDescription",{defaultMessage:"A data point click on the visualization"})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return APPLY_FILTER_TRIGGER}));__webpack_require__.d(__webpack_exports__,"b",(function(){return applyFilterTrigger}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var APPLY_FILTER_TRIGGER="FILTER_TRIGGER";var applyFilterTrigger={id:APPLY_FILTER_TRIGGER,title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("uiActions.triggers.applyFilterTitle",{defaultMessage:"Apply filter"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("uiActions.triggers.applyFilterDescription",{defaultMessage:"When kibana filter is applied. Could be a single value or a range filter."})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VISUALIZE_FIELD_TRIGGER}));__webpack_require__.d(__webpack_exports__,"b",(function(){return visualizeFieldTrigger}));var VISUALIZE_FIELD_TRIGGER="VISUALIZE_FIELD_TRIGGER";var visualizeFieldTrigger={id:VISUALIZE_FIELD_TRIGGER,title:"Visualize field",description:"Triggered when user wants to visualize a field."}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VISUALIZE_GEO_FIELD_TRIGGER}));__webpack_require__.d(__webpack_exports__,"b",(function(){return visualizeGeoFieldTrigger}));var VISUALIZE_GEO_FIELD_TRIGGER="VISUALIZE_GEO_FIELD_TRIGGER";var visualizeGeoFieldTrigger={id:VISUALIZE_GEO_FIELD_TRIGGER,title:"Visualize Geo field",description:"Triggered when user wants to visualize a geo field."}},function(module,__webpack_exports__,__webpack_require__){"use strict";var DEFAULT_TRIGGER="";var defaultTrigger={id:DEFAULT_TRIGGER,title:"Unknown",description:"Unknown trigger."}},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=$getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){var args=[];for(var i=0;i<arguments.length;i++)args.push(arguments[i]);if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;ReflectApply(this.listener,this.target,args)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_uiActions_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26);var _node_modules_val_loader_dist_cjs_js_key_uiActions_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_uiActions_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/uiActions/public",__webpack_require__,27)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["uiActions"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));__webpack_require__.d(__webpack_exports__,"UiActionsSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"UiActionsStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"UiActionsServiceParams",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"UiActionsService",(function(){return ui_actions_service_UiActionsService}));__webpack_require__.d(__webpack_exports__,"Action",(function(){return public_actions["Action"]}));__webpack_require__.d(__webpack_exports__,"UiActionsActionDefinition",(function(){return public_actions["ActionDefinition"]}));__webpack_require__.d(__webpack_exports__,"createAction",(function(){return public_actions["createAction"]}));__webpack_require__.d(__webpack_exports__,"IncompatibleActionError",(function(){return public_actions["IncompatibleActionError"]}));__webpack_require__.d(__webpack_exports__,"buildContextMenuForActions",(function(){return buildContextMenuForActions}));__webpack_require__.d(__webpack_exports__,"UiActionsPresentable",(function(){return util["Presentable"]}));__webpack_require__.d(__webpack_exports__,"UiActionsPresentableGrouping",(function(){return util["PresentableGrouping"]}));__webpack_require__.d(__webpack_exports__,"Trigger",(function(){return triggers["Trigger"]}));__webpack_require__.d(__webpack_exports__,"TriggerContext",(function(){return triggers["TriggerContext"]}));__webpack_require__.d(__webpack_exports__,"SELECT_RANGE_TRIGGER",(function(){return triggers["SELECT_RANGE_TRIGGER"]}));__webpack_require__.d(__webpack_exports__,"selectRangeTrigger",(function(){return triggers["selectRangeTrigger"]}));__webpack_require__.d(__webpack_exports__,"VALUE_CLICK_TRIGGER",(function(){return triggers["VALUE_CLICK_TRIGGER"]}));__webpack_require__.d(__webpack_exports__,"valueClickTrigger",(function(){return triggers["valueClickTrigger"]}));__webpack_require__.d(__webpack_exports__,"APPLY_FILTER_TRIGGER",(function(){return triggers["APPLY_FILTER_TRIGGER"]}));__webpack_require__.d(__webpack_exports__,"applyFilterTrigger",(function(){return triggers["applyFilterTrigger"]}));__webpack_require__.d(__webpack_exports__,"VISUALIZE_FIELD_TRIGGER",(function(){return triggers["VISUALIZE_FIELD_TRIGGER"]}));__webpack_require__.d(__webpack_exports__,"visualizeFieldTrigger",(function(){return triggers["visualizeFieldTrigger"]}));__webpack_require__.d(__webpack_exports__,"VISUALIZE_GEO_FIELD_TRIGGER",(function(){return triggers["VISUALIZE_GEO_FIELD_TRIGGER"]}));__webpack_require__.d(__webpack_exports__,"visualizeGeoFieldTrigger",(function(){return triggers["visualizeGeoFieldTrigger"]}));__webpack_require__.d(__webpack_exports__,"TriggerContextMapping",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"TriggerId",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ActionContextMapping",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ActionType",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisualizeFieldContext",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ACTION_VISUALIZE_FIELD",(function(){return ACTION_VISUALIZE_FIELD}));__webpack_require__.d(__webpack_exports__,"ACTION_VISUALIZE_GEO_FIELD",(function(){return ACTION_VISUALIZE_GEO_FIELD}));__webpack_require__.d(__webpack_exports__,"ACTION_VISUALIZE_LENS_FIELD",(function(){return ACTION_VISUALIZE_LENS_FIELD}));__webpack_require__.d(__webpack_exports__,"ActionByType",(function(){return public_actions["ActionByType"]}));__webpack_require__.d(__webpack_exports__,"ActionDefinitionByType",(function(){return public_actions["ActionDefinitionByType"]}));__webpack_require__.d(__webpack_exports__,"ActionExecutionContext",(function(){return public_actions["ActionExecutionContext"]}));__webpack_require__.d(__webpack_exports__,"ActionExecutionMeta",(function(){return public_actions["ActionExecutionMeta"]}));var public_actions=__webpack_require__(2);var trigger_internal=__webpack_require__(4);var external_kbnSharedDeps_Lodash_=__webpack_require__(7);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var public_=__webpack_require__(23);var external_kbnSharedDeps_React_=__webpack_require__(3);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var kibanaReact_public_=__webpack_require__(6);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var defaultTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("uiActions.actionPanel.title",{defaultMessage:"Options"});var txtMore=external_kbnSharedDeps_KbnI18n_["i18n"].translate("uiActions.actionPanel.more",{defaultMessage:"More"});var onClick=function onClick(action,context,close){return function(event){if(event.currentTarget instanceof HTMLAnchorElement){if(!event.defaultPrevented&&event.button===0&&(!event.currentTarget.target||event.currentTarget.target==="_self")&&!(event.metaKey||event.altKey||event.ctrlKey||event.shiftKey)){event.preventDefault();action.execute(context)}}else action.execute(context);close()}};var wrapMainPanelItemsIntoSubmenu=function wrapMainPanelItemsIntoSubmenu(panels,id){var panel=panels[id];if(!panel)return;var maxItemsBeforeWrapping=4;if(!panel.items)return;if(panel.items.length<=maxItemsBeforeWrapping)return;var visibleItems=panel.items.slice(0,3);var itemsInSubmenu=panel.items.slice(3);var morePanelId=panel.id+"__more";var more={name:txtMore,panel:morePanelId,icon:"boxesHorizontal","data-test-subj":"embeddablePanelMore-".concat(id),_order:-1};panel.items=[].concat(_toConsumableArray(visibleItems),[more]);var subPanel={id:morePanelId,title:panel.title||defaultTitle,items:itemsInSubmenu};panels[morePanelId]=subPanel};var removeItemMetaFields=function removeItemMetaFields(items){var euiItems=[];var _iterator=_createForOfIteratorHelper(items),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;var omit=item._order,omit2=item._title,rest=_objectWithoutProperties(item,["_order","_title"]);euiItems.push(rest)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return euiItems};var removePanelMetaFields=function removePanelMetaFields(panels){var euiPanels=[];var _iterator2=_createForOfIteratorHelper(panels),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var panel=_step2.value;var omit=panel._level,omit2=panel._icon,rest=_objectWithoutProperties(panel,["_level","_icon"]);euiPanels.push(_objectSpread(_objectSpread({},rest),{},{items:removeItemMetaFields(rest.items)}))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return euiPanels};function buildContextMenuForActions(_x){return _buildContextMenuForActions.apply(this,arguments)}function _buildContextMenuForActions(){_buildContextMenuForActions=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref){var actions,_ref$title,title,_ref$closeMenu,closeMenu,panels,promises,_i,_Object$values,panel,items,_i2,_Object$values2,_panel,_panels$mainMenu$item,panelList;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:actions=_ref.actions,_ref$title=_ref.title,title=_ref$title===void 0?defaultTitle:_ref$title,_ref$closeMenu=_ref.closeMenu,closeMenu=_ref$closeMenu===void 0?function(){}:_ref$closeMenu;panels={mainMenu:{id:"mainMenu",title:title,items:[]}};promises=actions.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(item){var action,context,isCompatible,parentPanel,currentPanel,i,group,name;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:action=item.action;context=_objectSpread(_objectSpread({},item.context),{},{trigger:item.trigger});_context.next=4;return item.action.isCompatible(context);case 4:isCompatible=_context.sent;if(isCompatible){_context.next=7;break}return _context.abrupt("return");case 7:parentPanel="";currentPanel="";if(action.grouping){for(i=0;i<action.grouping.length;i++){group=action.grouping[i];currentPanel=group.id;if(!panels[currentPanel]){name=group.getDisplayName?group.getDisplayName(context):group.id;panels[currentPanel]={id:currentPanel,title:name,items:[],_level:i,_icon:group.getIconType?group.getIconType(context):"empty"};if(parentPanel){panels[parentPanel].items.push({name:name,panel:currentPanel,icon:group.getIconType?group.getIconType(context):"empty",_order:group.order||0,_title:group.getDisplayName?group.getDisplayName(context):""})}}parentPanel=currentPanel}}_context.t0=panels[parentPanel||"mainMenu"].items;_context.t1=action.MenuItem?external_kbnSharedDeps_React_["createElement"](Object(kibanaReact_public_["uiToReactComponent"])(action.MenuItem),{context:context}):action.getDisplayName(context);_context.t2=action.getIconType(context);_context.t3="embeddablePanelAction-".concat(action.id);_context.t4=onClick(action,context,closeMenu);if(!action.getHref){_context.next=21;break}_context.next=18;return action.getHref(context);case 18:_context.t5=_context.sent;_context.next=22;break;case 21:_context.t5=undefined;case 22:_context.t6=_context.t5;_context.t7=action.order||0;_context.t8=action.getDisplayName(context);_context.t9={name:_context.t1,icon:_context.t2,"data-test-subj":_context.t3,onClick:_context.t4,href:_context.t6,_order:_context.t7,_title:_context.t8};_context.t0.push.call(_context.t0,_context.t9);case 27:case"end":return _context.stop()}}}),_callee)})));return function(_x2){return _ref2.apply(this,arguments)}}());_context2.next=5;return Promise.all(promises);case 5:for(_i=0,_Object$values=Object.values(panels);_i<_Object$values.length;_i++){panel=_Object$values[_i];items=panel.items.filter(Boolean);panel.items=external_kbnSharedDeps_Lodash_default.a.sortBy(items,(function(a){var _a$_order;return-1*((_a$_order=a._order)!==null&&_a$_order!==void 0?_a$_order:0)}),(function(a){return a._title}))}wrapMainPanelItemsIntoSubmenu(panels,"mainMenu");for(_i2=0,_Object$values2=Object.values(panels);_i2<_Object$values2.length;_i2++){_panel=_Object$values2[_i2];if(_panel._level===0){if(_panel.items.length>3){panels.mainMenu.items.push({name:_panel.title||_panel.id,icon:_panel._icon||"empty",panel:_panel.id})}else{(_panels$mainMenu$item=panels.mainMenu.items).push.apply(_panels$mainMenu$item,_toConsumableArray(_panel.items))}}}panelList=Object.values(panels);return _context2.abrupt("return",removePanelMetaFields(panelList));case 10:case"end":return _context2.stop()}}}),_callee2)})));return _buildContextMenuForActions.apply(this,arguments)}var external_kbnSharedDeps_ElasticEui_=__webpack_require__(9);var events=__webpack_require__(24);var external_kbnSharedDeps_ReactDom_=__webpack_require__(10);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var activeSession=null;var CONTAINER_ID="contextMenu-container";function createInteractionPositionTracker(){var lastMouseX=0;var lastMouseY=0;var lastClicks=[];var MAX_LAST_CLICKS=10;document.addEventListener("mouseup",onClick,true);document.addEventListener("click",onClick,true);document.addEventListener("mousemove",onMouseUpdate,{passive:true});document.addEventListener("mouseenter",onMouseUpdate,{passive:true});function onClick(event){lastClicks.push({el:event.target,mouseX:event.clientX,mouseY:event.clientY});if(lastClicks.length>MAX_LAST_CLICKS){lastClicks.shift()}}function onMouseUpdate(event){lastMouseX=event.clientX;lastMouseY=event.clientY}return{resolveLastPosition:function resolveLastPosition(){var lastClick=[].concat(lastClicks).reverse().find((function(_ref){var el=_ref.el;return el&&document.body.contains(el)}));if(!lastClick){return{x:lastMouseX,y:lastMouseY}}var _getBoundingClientRec=lastClick.el.getBoundingClientRect(),top=_getBoundingClientRec.top,left=_getBoundingClientRec.left,bottom=_getBoundingClientRec.bottom,right=_getBoundingClientRec.right;var mouseX=lastClick.mouseX;var mouseY=lastClick.mouseY;if(top<=mouseY&&bottom>=mouseY&&left<=mouseX&&right>=mouseX){return{x:mouseX,y:mouseY}}else{return{x:left+(right-left)/2,y:bottom}}}}}var _createInteractionPos=createInteractionPositionTracker(),resolveLastPosition=_createInteractionPos.resolveLastPosition;function getOrCreateContainerElement(){var container=document.getElementById(CONTAINER_ID);var _resolveLastPosition=resolveLastPosition(),x=_resolveLastPosition.x,y=_resolveLastPosition.y;y=y+window.scrollY;x=x+window.scrollX;if(!container){container=document.createElement("div");container.style.left=x+"px";container.style.top=y+"px";container.style.position="absolute";container.style.zIndex="9999";container.id=CONTAINER_ID;document.body.appendChild(container)}else{container.style.left=x+"px";container.style.top=y+"px"}return container}var open_context_menu_ContextMenuSession=function(_EventEmitter){_inherits(ContextMenuSession,_EventEmitter);var _super=_createSuper(ContextMenuSession);function ContextMenuSession(){_classCallCheck(this,ContextMenuSession);return _super.apply(this,arguments)}_createClass(ContextMenuSession,[{key:"close",value:function close(){if(activeSession===this){var container=document.getElementById(CONTAINER_ID);if(container){external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(container);this.emit("closed")}}}}]);return ContextMenuSession}(events["EventEmitter"]);function openContextMenu(panels){var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(activeSession){activeSession.close()}var container=getOrCreateContainerElement();var session=activeSession=new open_context_menu_ContextMenuSession;var onClose=function onClose(){if(props.onClose){props.onClose()}session.close()};external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{className:"embPanel__optionsMenuPopover",button:container,isOpen:true,closePopover:onClose,panelPaddingSize:"none",anchorPosition:"downRight",withTitle:true,ownFocus:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:"mainMenu",panels:panels,"data-test-subj":props["data-test-subj"]})),container);return session}function ui_actions_execution_service_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function ui_actions_execution_service_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ui_actions_execution_service_ownKeys(Object(source),true).forEach((function(key){ui_actions_execution_service_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ui_actions_execution_service_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function ui_actions_execution_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function ui_actions_execution_service_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ui_actions_execution_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ui_actions_execution_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ui_actions_execution_service_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ui_actions_execution_service_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function ui_actions_execution_service_createClass(Constructor,protoProps,staticProps){if(protoProps)ui_actions_execution_service_defineProperties(Constructor.prototype,protoProps);if(staticProps)ui_actions_execution_service_defineProperties(Constructor,staticProps);return Constructor}function ui_actions_execution_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ui_actions_execution_service_UiActionsExecutionService=function(){function UiActionsExecutionService(){ui_actions_execution_service_classCallCheck(this,UiActionsExecutionService);ui_actions_execution_service_defineProperty(this,"batchingQueue",[]);ui_actions_execution_service_defineProperty(this,"pendingTasks",new Set)}ui_actions_execution_service_createClass(UiActionsExecutionService,[{key:"execute",value:function(){var _execute=ui_actions_execution_service_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var _yield$action$shouldA,_action$shouldAutoExe;var action,context,trigger,shouldBatch,task;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:action=_ref.action,context=_ref.context,trigger=_ref.trigger;_context.next=3;return(_action$shouldAutoExe=action.shouldAutoExecute)===null||_action$shouldAutoExe===void 0?void 0:_action$shouldAutoExe.call(action,ui_actions_execution_service_objectSpread(ui_actions_execution_service_objectSpread({},context),{},{trigger:trigger}));case 3:_context.t1=_yield$action$shouldA=!_context.sent;_context.t0=_context.t1!==null;if(!_context.t0){_context.next=7;break}_context.t0=_yield$action$shouldA!==void 0;case 7:if(!_context.t0){_context.next=11;break}_context.t2=_yield$action$shouldA;_context.next=12;break;case 11:_context.t2=false;case 12:shouldBatch=_context.t2;task={action:action,context:context,trigger:trigger,defer:Object(public_["defer"])()};if(!shouldBatch){_context.next=18;break}this.batchingQueue.push(task);_context.next=29;break;case 18:this.pendingTasks.add(task);_context.prev=19;_context.next=22;return action.execute(ui_actions_execution_service_objectSpread(ui_actions_execution_service_objectSpread({},context),{},{trigger:trigger}));case 22:this.pendingTasks.delete(task);_context.next=29;break;case 25:_context.prev=25;_context.t3=_context["catch"](19);this.pendingTasks.delete(task);throw new Error(_context.t3);case 29:this.scheduleFlush();return _context.abrupt("return",task.defer.promise);case 31:case"end":return _context.stop()}}}),_callee,this,[[19,25]])})));function execute(_x){return _execute.apply(this,arguments)}return execute}()},{key:"scheduleFlush",value:function scheduleFlush(){var _this=this;setTimeout((function(){if(_this.pendingTasks.size===0){var tasks=Object(external_kbnSharedDeps_Lodash_["uniqBy"])(_this.batchingQueue,(function(t){return t.action.id}));if(tasks.length===1){_this.executeSingleTask(tasks[0])}if(tasks.length>1){_this.executeMultipleActions(tasks)}_this.batchingQueue.splice(0,_this.batchingQueue.length)}}),0)}},{key:"executeSingleTask",value:function(){var _executeSingleTask=ui_actions_execution_service_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref2){var context,action,defer,trigger;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:context=_ref2.context,action=_ref2.action,defer=_ref2.defer,trigger=_ref2.trigger;_context2.prev=1;_context2.next=4;return action.execute(ui_actions_execution_service_objectSpread(ui_actions_execution_service_objectSpread({},context),{},{trigger:trigger}));case 4:defer.resolve();_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](1);defer.reject(_context2.t0);case 10:case"end":return _context2.stop()}}}),_callee2,null,[[1,7]])})));function executeSingleTask(_x2){return _executeSingleTask.apply(this,arguments)}return executeSingleTask}()},{key:"executeMultipleActions",value:function(){var _executeMultipleActions=ui_actions_execution_service_asyncToGenerator(regeneratorRuntime.mark((function _callee3(tasks){var panels,session;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return buildContextMenuForActions({actions:tasks.map((function(_ref3){var action=_ref3.action,context=_ref3.context,trigger=_ref3.trigger;return{action:action,context:context,trigger:trigger}})),title:"",closeMenu:function closeMenu(){tasks.forEach((function(t){return t.defer.resolve()}));session.close()}});case 2:panels=_context3.sent;session=openContextMenu(panels,{"data-test-subj":"multipleActionsContextMenu"});case 4:case"end":return _context3.stop()}}}),_callee3)})));function executeMultipleActions(_x3){return _executeMultipleActions.apply(this,arguments)}return executeMultipleActions}()}]);return UiActionsExecutionService}();function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||ui_actions_service_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ui_actions_service_createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=ui_actions_service_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e3){didErr=true;err=_e3},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function ui_actions_service_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function ui_actions_service_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ui_actions_service_ownKeys(Object(source),true).forEach((function(key){ui_actions_service_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ui_actions_service_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function ui_actions_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function ui_actions_service_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ui_actions_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ui_actions_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ui_actions_service_toConsumableArray(arr){return ui_actions_service_arrayWithoutHoles(arr)||ui_actions_service_iterableToArray(arr)||ui_actions_service_unsupportedIterableToArray(arr)||ui_actions_service_nonIterableSpread()}function ui_actions_service_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ui_actions_service_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return ui_actions_service_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ui_actions_service_arrayLikeToArray(o,minLen)}function ui_actions_service_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function ui_actions_service_arrayWithoutHoles(arr){if(Array.isArray(arr))return ui_actions_service_arrayLikeToArray(arr)}function ui_actions_service_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ui_actions_service_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ui_actions_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ui_actions_service_UiActionsService=function UiActionsService(){var _this=this;var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$triggers=_ref.triggers,_triggers=_ref$triggers===void 0?new Map:_ref$triggers,_ref$actions=_ref.actions,_actions=_ref$actions===void 0?new Map:_ref$actions,_ref$triggerToActions=_ref.triggerToActions,_triggerToActions=_ref$triggerToActions===void 0?new Map:_ref$triggerToActions;ui_actions_service_classCallCheck(this,UiActionsService);ui_actions_service_defineProperty(this,"executionService",new ui_actions_execution_service_UiActionsExecutionService);ui_actions_service_defineProperty(this,"triggers",void 0);ui_actions_service_defineProperty(this,"actions",void 0);ui_actions_service_defineProperty(this,"triggerToActions",void 0);ui_actions_service_defineProperty(this,"registerTrigger",(function(trigger){if(_this.triggers.has(trigger.id)){throw new Error("Trigger [trigger.id = ".concat(trigger.id,"] already registered."))}var triggerInternal=new trigger_internal["a"](_this,trigger);_this.triggers.set(trigger.id,triggerInternal);_this.triggerToActions.set(trigger.id,[])}));ui_actions_service_defineProperty(this,"getTrigger",(function(triggerId){var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("Trigger [triggerId = ".concat(triggerId,"] does not exist."))}return trigger.contract}));ui_actions_service_defineProperty(this,"registerAction",(function(definition){if(_this.actions.has(definition.id)){throw new Error("Action [action.id = ".concat(definition.id,"] already registered."))}var action=new public_actions["ActionInternal"](definition);_this.actions.set(action.id,action);return action}));ui_actions_service_defineProperty(this,"unregisterAction",(function(actionId){if(!_this.actions.has(actionId)){throw new Error("Action [action.id = ".concat(actionId,"] is not registered."))}_this.actions.delete(actionId)}));ui_actions_service_defineProperty(this,"hasAction",(function(actionId){return _this.actions.has(actionId)}));ui_actions_service_defineProperty(this,"attachAction",(function(triggerId,actionId){var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("No trigger [triggerId = ".concat(triggerId,"] exists, for attaching action [actionId = ").concat(actionId,"]."))}var actionIds=_this.triggerToActions.get(triggerId);if(!actionIds.find((function(id){return id===actionId}))){_this.triggerToActions.set(triggerId,[].concat(ui_actions_service_toConsumableArray(actionIds),[actionId]))}}));ui_actions_service_defineProperty(this,"detachAction",(function(triggerId,actionId){var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("No trigger [triggerId = ".concat(triggerId,"] exists, for detaching action [actionId = ").concat(actionId,"]."))}var actionIds=_this.triggerToActions.get(triggerId);_this.triggerToActions.set(triggerId,actionIds.filter((function(id){return id!==actionId})))}));ui_actions_service_defineProperty(this,"addTriggerAction",(function(triggerId,action){if(!_this.actions.has(action.id))_this.registerAction(action);_this.attachAction(triggerId,action.id)}));ui_actions_service_defineProperty(this,"getAction",(function(id){if(!_this.actions.has(id)){throw new Error("Action [action.id = ".concat(id,"] not registered."))}return _this.actions.get(id)}));ui_actions_service_defineProperty(this,"getTriggerActions",(function(triggerId){_this.getTrigger(triggerId);var actionIds=_this.triggerToActions.get(triggerId);var actions=actionIds.map((function(actionId){return _this.actions.get(actionId)})).filter(Boolean);return actions}));ui_actions_service_defineProperty(this,"getTriggerCompatibleActions",function(){var _ref2=ui_actions_service_asyncToGenerator(regeneratorRuntime.mark((function _callee(triggerId,context){var actions,isCompatibles;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:actions=_this.getTriggerActions(triggerId);_context.next=3;return Promise.all(actions.map((function(action){return action.isCompatible(ui_actions_service_objectSpread(ui_actions_service_objectSpread({},context),{},{trigger:_this.getTrigger(triggerId)}))})));case 3:isCompatibles=_context.sent;return _context.abrupt("return",actions.reduce((function(acc,action,i){return isCompatibles[i]?[].concat(ui_actions_service_toConsumableArray(acc),[action]):acc}),[]));case 5:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2){return _ref2.apply(this,arguments)}}());ui_actions_service_defineProperty(this,"executeTriggerActions",function(){var _ref3=ui_actions_service_asyncToGenerator(regeneratorRuntime.mark((function _callee2(triggerId,context){var trigger;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:trigger=_this.getTrigger(triggerId);_context2.next=3;return trigger.exec(context);case 3:case"end":return _context2.stop()}}}),_callee2)})));return function(_x3,_x4){return _ref3.apply(this,arguments)}}());ui_actions_service_defineProperty(this,"clear",(function(){_this.actions.clear();_this.triggers.clear();_this.triggerToActions.clear()}));ui_actions_service_defineProperty(this,"fork",(function(){var triggers=new Map;var actions=new Map;var triggerToActions=new Map;var _iterator=ui_actions_service_createForOfIteratorHelper(_this.triggers.entries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];triggers.set(key,value)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _iterator2=ui_actions_service_createForOfIteratorHelper(_this.actions.entries()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),_key=_step2$value[0],_value=_step2$value[1];actions.set(_key,_value)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}var _iterator3=ui_actions_service_createForOfIteratorHelper(_this.triggerToActions.entries()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=_slicedToArray(_step3.value,2),_key2=_step3$value[0],_value2=_step3$value[1];triggerToActions.set(_key2,ui_actions_service_toConsumableArray(_value2))}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return new UiActionsService({triggers:triggers,actions:actions,triggerToActions:triggerToActions})}));this.triggers=_triggers;this.actions=_actions;this.triggerToActions=_triggerToActions};var triggers=__webpack_require__(0);function plugin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function plugin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function plugin_createClass(Constructor,protoProps,staticProps){if(protoProps)plugin_defineProperties(Constructor.prototype,protoProps);if(staticProps)plugin_defineProperties(Constructor,staticProps);return Constructor}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var plugin_UiActionsPlugin=function(){function UiActionsPlugin(initializerContext){plugin_classCallCheck(this,UiActionsPlugin);plugin_defineProperty(this,"service",new ui_actions_service_UiActionsService)}plugin_createClass(UiActionsPlugin,[{key:"setup",value:function setup(core){this.service.registerTrigger(triggers["selectRangeTrigger"]);this.service.registerTrigger(triggers["valueClickTrigger"]);this.service.registerTrigger(triggers["applyFilterTrigger"]);this.service.registerTrigger(triggers["visualizeFieldTrigger"]);this.service.registerTrigger(triggers["visualizeGeoFieldTrigger"]);return this.service}},{key:"start",value:function start(core){return this.service}},{key:"stop",value:function stop(){this.service.clear()}}]);return UiActionsPlugin}();var util=__webpack_require__(8);var DEFAULT_ACTION="";var ACTION_VISUALIZE_FIELD="ACTION_VISUALIZE_FIELD";var ACTION_VISUALIZE_GEO_FIELD="ACTION_VISUALIZE_GEO_FIELD";var ACTION_VISUALIZE_LENS_FIELD="ACTION_VISUALIZE_LENS_FIELD";function public_plugin(initializerContext){return new plugin_UiActionsPlugin(initializerContext)}}]);